{
    "_initiator": {
        "type": "script",
        "stack": {
            "callFrames": [
                {
                    "functionName": "importWrapper",
                    "scriptId": "3",
                    "url": "https:\/\/www.instagram.com\/static_resources\/webworker\/init_script\/?worker_type=MODULE&__hs=19825.HYP%3Ainstagram_web_pkg.2.1..0.1&__spin_r=1012735413&__spin_b=trunk&__spin_t=1712915153",
                    "lineNumber": 0,
                    "columnNumber": 441
                },
                {
                    "functionName": "",
                    "scriptId": "3",
                    "url": "https:\/\/www.instagram.com\/static_resources\/webworker\/init_script\/?worker_type=MODULE&__hs=19825.HYP%3Ainstagram_web_pkg.2.1..0.1&__spin_r=1012735413&__spin_b=trunk&__spin_t=1712915153",
                    "lineNumber": 0,
                    "columnNumber": 892
                },
                {
                    "functionName": "processHRP",
                    "scriptId": "3",
                    "url": "https:\/\/www.instagram.com\/static_resources\/webworker\/init_script\/?worker_type=MODULE&__hs=19825.HYP%3Ainstagram_web_pkg.2.1..0.1&__spin_r=1012735413&__spin_b=trunk&__spin_t=1712915153",
                    "lineNumber": 0,
                    "columnNumber": 817
                },
                {
                    "functionName": "initMessageHandler",
                    "scriptId": "3",
                    "url": "https:\/\/www.instagram.com\/static_resources\/webworker\/init_script\/?worker_type=MODULE&__hs=19825.HYP%3Ainstagram_web_pkg.2.1..0.1&__spin_r=1012735413&__spin_b=trunk&__spin_t=1712915153",
                    "lineNumber": 0,
                    "columnNumber": 3142
                }
            ],
            "parentId": {
                "id": "144649",
                "debuggerId": "-6772076072718729518.1871580802681391568"
            }
        }
    },
    "_priority": "High",
    "_resourceType": "script",
    "cache": [],
    "request": {
        "method": "GET",
        "url": "https:\/\/static.cdninstagram.com\/rsrc.php\/v3ip6z4\/yJ\/l\/makehaste_jhash\/M0-nVadRB74cZtDF6kpo1BN7lSyOW51EvnpUFAMAtgCgSw7oMdoDdWSlK6cjntDuLrknUKOK1KcVzZC0uTymPFi86BFJQUsUw5J4Xooa1yDaQC8o1a25KZhLgch2GgO8Zqp61hZljntgGpqd4sN7saKqmmEFOTp1NgExX4rhG6u_TiI9LUyx5GomteHv3tq8BOKhuKSE3dc-QOLzbFvx5iWrEfcRJ9TdOYdWaz7A-fUTUKZ8rmcXfO4vRvm1tS_38TchtxxXrTz6SfrQecej_3M6klTdImr7htz8Y5oO6bYTTAL85gnsrnw6X76x8mbMITQpxAcuBO.js?_nc_x=Ij3Wp8lg5Kz",
        "httpVersion": "h3",
        "headers": [
            {
                "name": "Referer",
                "value": "https:\/\/www.instagram.com\/"
            },
            {
                "name": "Origin",
                "value": "https:\/\/www.instagram.com"
            },
            {
                "name": "User-Agent",
                "value": "Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/123.0.0.0 Safari\/537.36"
            }
        ],
        "queryString": [
            {
                "name": "_nc_x",
                "value": "Ij3Wp8lg5Kz"
            }
        ],
        "cookies": [],
        "headersSize": -1,
        "bodySize": 0
    },
    "response": {
        "status": 200,
        "statusText": "",
        "httpVersion": "h3",
        "headers": [
            {
                "name": "date",
                "value": "Fri, 12 Apr 2024 09:46:02 GMT"
            },
            {
                "name": "content-encoding",
                "value": "zstd"
            },
            {
                "name": "x-content-type-options",
                "value": "nosniff"
            },
            {
                "name": "content-md5",
                "value": "BYNQATO6EvBgwy7\/YhRM\/g=="
            },
            {
                "name": "document-policy",
                "value": "force-load-at-top"
            },
            {
                "name": "cross-origin-resource-policy",
                "value": "cross-origin"
            },
            {
                "name": "alt-svc",
                "value": "h3=\":443\"; ma=86400"
            },
            {
                "name": "content-length",
                "value": "496874"
            },
            {
                "name": "reporting-endpoints",
                "value": "permissions_policy=\"https:\/\/www.facebook.com\/ajax\/browser_error_reports\/\""
            },
            {
                "name": "x-fb-connection-quality",
                "value": "EXCELLENT; q=0.9, rtt=40, rtx=2457, c=93, mss=1232, tbw=8055307, tp=6625, tpl=2457, uplat=121, ullat=-1"
            },
            {
                "name": "x-fb-debug",
                "value": "w\/fmbJIEQ\/WJ7p0KXOO\/dZDbQc7ANylvb+5JZUKZ6tp8JeYlauis0d\/eO8UtTtW\/HCZNXcRbN4GQrRIMbU5N1A=="
            },
            {
                "name": "last-modified",
                "value": "Mon, 01 Jan 2001 08:00:00 GMT"
            },
            {
                "name": "vary",
                "value": "Origin"
            },
            {
                "name": "report-to",
                "value": "{\"max_age\":21600,\"endpoints\":[{\"url\":\"https:\\\/\\\/www.facebook.com\\\/ajax\\\/browser_error_reports\\\/\"}],\"group\":\"permissions_policy\"}"
            },
            {
                "name": "content-type",
                "value": "application\/x-javascript; charset=utf-8"
            },
            {
                "name": "access-control-allow-origin",
                "value": "https:\/\/www.instagram.com"
            },
            {
                "name": "origin-agent-cluster",
                "value": "?0"
            },
            {
                "name": "cache-control",
                "value": "public,max-age=31536000,immutable"
            },
            {
                "name": "permissions-policy",
                "value": "accelerometer=(), attribution-reporting=(), autoplay=(), bluetooth=(), camera=(), ch-device-memory=(), ch-downlink=(), ch-ect=(), ch-rtt=(), ch-save-data=(), ch-ua-arch=(), ch-ua-bitness=(), clipboard-read=(), clipboard-write=(), display-capture=(), encrypted-media=(), fullscreen=(self), gamepad=(), geolocation=(), gyroscope=(), hid=(), idle-detection=(), keyboard-map=(), local-fonts=(), magnetometer=(), microphone=(), midi=(), otp-credentials=(), payment=(), picture-in-picture=(), publickey-credentials-get=(), screen-wake-lock=(), serial=(), usb=(), window-management=(), xr-spatial-tracking=();report-to=\"permissions_policy\""
            },
            {
                "name": "timing-allow-origin",
                "value": "*"
            },
            {
                "name": "priority",
                "value": "u=1"
            },
            {
                "name": "expires",
                "value": "Sat, 12 Apr 2025 05:15:58 GMT"
            }
        ],
        "cookies": [],
        "content": {
            "size": 2457214,
            "mimeType": "application\/x-javascript",
            "text": ";\/*FB_PKG_DELIM*\/\n\n__d(\"registerExecutionContext\",[\"BroadcastChannelClientServerHandshake\",\"FBLogger\",\"asyncToGeneratorRuntime\",\"getBroadcastChannelForExecutionContext\",\"loadTaskHandlerResource\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){var d=a.context,e=a.name;a=a.payload;try{var f=(yield c(\"loadTaskHandlerResource\")(e));if(f==null)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"No task handler found for %s\",e);e=(yield f.handleTask(a,d));f={context:d,result:e,type:\"task_success\"};b.postMessage(f)}catch(c){a={context:d,type:\"task_failure\"};b.postMessage(a)}return});return i.apply(this,arguments)}function a(a){var b=c(\"getBroadcastChannelForExecutionContext\")(a);d(\"BroadcastChannelClientServerHandshake\").listen(b);var e=new Set();b.addEventListener(\"message\",function(a){switch(a.data.type){case\"execute_task\":a=a.data;var d=a.context.taskID;if(e.has(d))return;e.add(d);c(\"promiseDone\")(h(a,b)[\"finally\"](function(){e[\"delete\"](d)}));break;default:}});return function(){return b.close()}}g[\"default\"]=a}),98);\n__d(\"registerMAWExecutionContext\",[\"CometTaskFrameworkTypes\",\"registerExecutionContext\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"registerExecutionContext\")(d(\"CometTaskFrameworkTypes\").ExecutionContext.MAW_WORKER)}g[\"default\"]=a}),98);\n__d(\"ReStoreIDBFactory\",[\"invariant\",\"Deferred\",\"I64\",\"IndexedDbPolyfills\",\"ReStoreKeyComparer\",\"err\",\"isPromise\",\"nullthrows\",\"promiseDone\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g,h){\"use strict\";var i,j,k,l=\"e2ee_\",m=new MessageChannel(),n=[];m.port1.onmessage=function(){var a=n.pop();a()};function o(a){n.push(a),m.port2.postMessage({})}function p(a){var b=new Map();function c(a){if(typeof a!==\"object\"||a===null)return a;if(b.has(a))return b.get(a);var d;if(Array.isArray(a)){d=[];b.set(a,d);for(var e of a)d.push(c(e))}else if(a instanceof Set){d=new Set();b.set(a,d);for(e of a)d.add(c(e))}else if(a instanceof Map){d=new Map();b.set(a,d);for(e of a){var f=e[0],g=e[1];d.set(c(f),c(g))}}else if(a instanceof ArrayBuffer)d=new ArrayBuffer(a.byteLength),new Uint8Array(d).set(new Uint8Array(a));else if(a instanceof Uint8Array){f=c(a.buffer);d=new Uint8Array(f,a.byteOffset,a.length)}else d={};b.set(a,d);for(g of Object.keys(a))d[g]=c(a[g]);return d}return c(a)}function q(a,b){function d(b){if(b.done)return b.value;if(!(k||(k=c(\"isPromise\")))(b.value))throw c(\"unrecoverableViolation\")(\"expected promise\",\"messenger_web_product\");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function* r(a){return(k||(k=c(\"isPromise\")))(a)?yield a:a}function s(a,b){a=[].concat(a);b!==-1&&(a[b]=(i||(i=d(\"I64\"))).to_float(c(\"nullthrows\")(i.cast(a[b]),\"Expected autoincrementing field to be an I64\")));return a.length===1?a[0]:a}function t(a,b){a=Array.isArray(a)?a:[a];return a.map(function(a,c){if(a===-Infinity)return void 0;if(Array.isArray(a)&&a.length===0)return(j||(j=d(\"ReStoreKeyComparer\"))).MAX_KEY;if(Array.isArray(a)&&a.length===1&&Array.isArray(a[0])&&a[0].length===0)return(j||(j=d(\"ReStoreKeyComparer\"))).MAX_KEY;return c===b&&typeof a===\"number\"?(i||(i=d(\"I64\"))).of_float(a):a})}function u(a,b,e){var f=a.indexes,g=a.primaryKeyIds;g=e==null?g:f[e];f=g.map(function(f){if(b[f]!==void 0||e!=null){var g=b[f];if(a.autoIncrement&&f===a.primaryKeyIds[0]){g=(i||(i=d(\"I64\"))).cast(g);if(g==null)throw c(\"unrecoverableViolation\")(\"expected auto-incrementing field to be an i64\",\"messenger_web_product\");g=i.to_float(g)}return g}throw c(\"unrecoverableViolation\")(\"primary key must be defined on object\",\"messenger_web_product\")});return f.length===1?f[0]:f}var v=function(){function a(a){this.$1=a}var b=a.prototype;b.continue=function(a){this.$1(a)};b.advance=function(a){for(var b=0;b<a;b++)this.continue()};return a}(),w=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$3=c,this.$4=d}var b=a.prototype;b.openCursor=function(a,b){var c=this;return A(a,b,function(a){return a[c.$3].index(c.$1)},this.$4,this.$2,this.$1)};b.count=function(a){var b=this.$2.autoIncrement?this.$2.indexes[this.$1].indexOf(this.$2.primaryKeyIds[0]):-1,c=this;return this.$4(new(d(\"IndexedDbPolyfills\").IDBRequest)(),function(d){return q(function*(){var e=new WeakMap();e=(yield* r(d[c.$3].index(c.$1).keys(e,\"asc\",z(a,b))));var f=0,g=(yield* r(e.next()));while(!g.done)f++,g=(yield* r(e.next()));return f}())})};babelHelpers.createClass(a,[{key:\"keyPath\",get:function(){return this.$2.indexes[this.$1].length===1?this.$2.indexes[this.$1][0]:this.$2.indexes[this.$1]}},{key:\"name\",get:function(){return this.$1}}]);return a}();function x(a,b){if(b==null)return a;var e=c(\"nullthrows\")((i||(i=d(\"I64\"))).cast(a[b]),\"expected auto-increment field to be an I64\");a[b]=i.to_float(e);return a}function y(a,b){if(b==null||a[b]==null)return babelHelpers.extends({},a);typeof a[b]===\"number\"||h(0,72542);a[b]=(i||(i=d(\"I64\"))).of_float(a[b]);return a}function z(a,b){var c;a!=null&&(c={},a.lower!==void 0&&(a.lowerOpen?c.gt=t(a.lower,b):c.gte=t(a.lower,b)),a.upper!==void 0&&(a.upperOpen?c.lt=t(a.upper,b):c.lte=t(a.upper,b)));return c}function A(a,b,e,f,g,h){var i=g.autoIncrement?h==null?0:g.indexes[h].indexOf(g.primaryKeyIds[0]):-1,k=g.autoIncrement?g.primaryKeyIds[0]:null,l=\"asc\";if(b===\"prev\")l=\"desc\";else if(b!==void 0&&b!==\"next\")throw c(\"err\")(\"Unsupported direction:\"+b);var m=new WeakMap(),n=new(d(\"IndexedDbPolyfills\").IDBRequest)(),o,w=new v(y);n.result=w;function y(b){var c;b!=null&&(c=t(b,i));f(n,function(b){return q(function*(){var f;o=(f=o)!=null?f:e(b).entries(m,l,z(a,i));var h=o,n=(yield* r(h.next(c)));f=function*(){var a=n.value[0];for(var b=0;b<a.length;b++){var c=a.slice(0,b);if(l===\"asc\"){if(a[b]==null){if(b===a.length-1)n=(yield* r(h.next()));else{var e=[].concat(c,[void 0,(j||(j=d(\"ReStoreKeyComparer\"))).MAX_KEY]);n=(yield* r(h.next(e)))}if(n.done)return\"break|outer\";a=n.value[0];if(!c.every(function(b,c){return(j||(j=d(\"ReStoreKeyComparer\"))).compareValue(b,a[c])===0}))return\"continue|outer\"}}else if(a[b]==null){n=(yield* r(h.next(c)));return\"continue|outer\"}}return\"break\"};outer:while(!n.done){var q=(yield* f());switch(q){case\"break|outer\":break outer;case\"continue|outer\":continue outer;case\"break\":break outer}}if(!n.done){q=s(n.value[0],i);w.primaryKey=u(g,n.value[1]);w.key=q;w.value=x(p(n.value[1]),k);return w}}())})}y();return n}var B=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=this.$1.getTableData().tableNames[this.$2],this.$4=c}var b=a.prototype;b.index=function(a){return new w(a,this.$3,this.$2,this.$4)};b.get=function(a){var b=this;return this.$4(new(d(\"IndexedDbPolyfills\").IDBRequest)(),function(c){return q(function*(){var d;d=(yield* r((d=c[b.$2]).get.apply(d,t(a,b.$3.autoIncrement?0:-1))));return d==null?d:x(p(d),b.$3.autoIncrement?b.$3.primaryKeyIds[0]:null)}())})};b.clear=function(){var a=this;return this.$4(new(d(\"IndexedDbPolyfills\").IDBRequest)(),async function(b){var c=b[a.$2].entries(new WeakMap()),d=await c.next();while(!d.done){var e;await (e=b[a.$2]).delete.apply(e,d.value[0]);d=await c.next()}})};b.put=function(a,b){var c=this,e=y(p(a),this.$3.autoIncrement?this.$3.primaryKeyIds[0]:null);b==null||h(0,72438);return this.$4(new(d(\"IndexedDbPolyfills\").IDBRequest)(),async function(a){var b=c.$3.autoIncrement?0:-1;return s(await a[c.$2].put(e),b)})};b.add=function(a,b){var c=this,e=y(p(a),this.$3.autoIncrement?this.$3.primaryKeyIds[0]:null);b==null||h(0,72437);return this.$4(new(d(\"IndexedDbPolyfills\").IDBRequest)(),async function(a){var b=c.$3.autoIncrement?0:-1;return s(await a[c.$2].add(e),b)})};b.delete=function(a){var b=this;return this.$4(new(d(\"IndexedDbPolyfills\").IDBRequest)(),async function(c){if(a instanceof IDBKeyRange){var d=new WeakMap(),e=b.$3.autoIncrement?0:-1;d=await c[b.$2].entries(d,\"asc\",z(a,e));e=await d.next();while(!e.done){var f;await (f=c[b.$2]).delete.apply(f,e.value[0]);e=await d.next()}}else{await (f=c[b.$2]).delete.apply(f,t(a,b.$3.autoIncrement?0:-1))}return void 0})};b.openCursor=function(a,b){var c=this;return A(a,b,function(a){return a[c.$2]},this.$4,this.$3)};b.count=function(a){var b=this.$3.autoIncrement?0:-1,c=this;return this.$4(new(d(\"IndexedDbPolyfills\").IDBRequest)(),function(d){return q(function*(){var e=new WeakMap();e=(yield* r(d[c.$2].keys(e,\"asc\",z(a,b))));var f=0,g=(yield* r(e.next()));while(!g.done)f++,g=(yield* r(e.next()));return f}())})};b.createIndex=function(a,b){};b.deleteIndex=function(a){};babelHelpers.createClass(a,[{key:\"indexNames\",get:function(){return Object.keys(this.$3.indexes)}},{key:\"name\",get:function(){return this.$2.substr(l.length)}},{key:\"autoIncrement\",get:function(){return this.$3.autoIncrement}},{key:\"keyPath\",get:function(){return this.$3.primaryKeyIds.length===1?this.$3.primaryKeyIds[0]:this.$3.primaryKeyIds}}]);return a}(),C=function(b){babelHelpers.inheritsLoose(a,b);function a(a,d,e,f){var g;g=b.call(this)||this;g.$ReStoreIDBTransaction5=[];g.$ReStoreIDBTransaction6=new(c(\"Deferred\"))();g.state=\"active\";g.oncomplete=null;g.onerror=null;g.$ReStoreIDBTransaction1=a;g.$ReStoreIDBTransaction4=d;g.$ReStoreIDBTransaction3=e;g.$ReStoreIDBTransaction2=f;c(\"promiseDone\")(g.$ReStoreIDBTransaction1.runInTransaction(function(a){g.$ReStoreIDBTransaction6.resolve(a);return new Promise(function(b,d){var e=async function e(){var f=[].concat(g.$ReStoreIDBTransaction5);if(g.state===\"finished\"){d();throw c(\"err\")(\"Transaction aborted\")}if(!f.length){g.state=\"committing\";return b()}try{g.state=\"inactive\";var h=[];for(var i of f){i[0];var j=i[1];try{j=j(a);j={status:\"fulfilled\",value:(k||(k=c(\"isPromise\")))(j)?await j:j}}catch(a){j={reason:a,status:\"rejected\"}}h.push(j)}g.state=\"active\";g.$ReStoreIDBTransaction5=[];for(j=0;j<h.length;j++){i=h[j];var l=f[j];l=l[0];i.status===\"fulfilled\"?(l.result=i.value,l.emit(\"success\",{target:l})):(l.error=i.reason,l.emit(\"error\",{target:l}))}}catch(a){return d(a)}o(function(){return void e()})};o(function(){return void e()})})},f===\"versionchange\"?\"readwrite\":f),function(){g.state=\"finished\",g.emit(\"complete\"),g.$ReStoreIDBTransaction6=new(c(\"Deferred\"))()},function(){g.state=\"finished\",g.emit(\"error\"),g.$ReStoreIDBTransaction6=new(c(\"Deferred\"))()});return g}var e=a.prototype;e.objectStore=function(a){var b=this;if(!this.$ReStoreIDBTransaction3.has(a))throw c(\"err\")(\"Invalid object store name \"+a);return new B(this.$ReStoreIDBTransaction1,l+a,function(a,d){if(b.state!==\"active\")throw c(\"err\")(\"Cannot make request against inactive transaction.\");b.$ReStoreIDBTransaction5.push([a,d]);return a})};e.abort=function(){this.state=\"finished\"};e.enqueueAdditionalWork=function(a){this.$ReStoreIDBTransaction5.push([new(d(\"IndexedDbPolyfills\").IDBRequest)(),a])};babelHelpers.createClass(a,[{key:\"db\",get:function(){return this.$ReStoreIDBTransaction4}},{key:\"transaction\",get:function(){return this.$ReStoreIDBTransaction6.getPromise()}}]);return a}(d(\"IndexedDbPolyfills\").IDBRequest),D=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.transaction=function(a,b,c){return new C(this.$1,this,new Set(Array.isArray(a)?a:[a]),b)};b.createObjectStore=function(a){return{createIndex:function(a,b,c){}}};b.deleteObjectStore=function(a){};b.close=function(){this.$1.closeDb==null?void 0:this.$1.closeDb()};babelHelpers.createClass(a,[{key:\"objectStoreNames\",get:function(){var a=Object.keys(this.$1.getTableData().tableNames).filter(function(a){return a.startsWith(l)}).map(function(a){return a.substr(l.length)});a.contains=function(b){return a.find(function(a){return a===b})!=null};return a}},{key:\"name\",get:function(){return this.$2}}]);return a}();b=function(){function a(a){this.$1=a}var b=a.prototype;b.open=function(a,b){var c=new(d(\"IndexedDbPolyfills\").IDBRequest)();c.result=new D(this.$1,a);o(function(){return c.emit(\"success\")});return c};b.cmp=function(a,b){return indexedDB.cmp(a,b)};return a}();e=function(){function b(){}b.bound=function(c,d,e,f){if(Array.isArray(c)&&c[0]===void 0)return b.upperBound(d,f);return Array.isArray(d)&&d[0]===void 0?b.lowerBound(c,e):a.IDBKeyRange.bound(c,d,e,f)};b.lowerBound=function(b,c){if(Array.isArray(b)&&b[0]===null)return null;return Array.isArray(b)&&b[0]===void 0?null:a.IDBKeyRange.lowerBound(b,c)};b.upperBound=function(b,c){if(Array.isArray(b)&&b[0]===null)return null;return Array.isArray(b)&&b[0]===void 0?null:a.IDBKeyRange.upperBound(b,c)};return b}();self.setImmediate2=o;g.structuredClone=p;g.ReStoreIDBTransaction=C;g.ReStoreIDBDatabase=D;g.ReStoreIDBFactory=b;g.ReStoreIDBKeyRange=e}),98);\n__d(\"createReStoreIndexedDbPersistenceWithoutLocks\",[\"ClientConsistency\",\"CurrentMessengerUser\",\"Deferred\",\"ExecutionEnvironment\",\"FBLogger\",\"LSPlatformErrorChannel\",\"MAWCryptoConsts\",\"MAWExceededStorageQuota\",\"MAWKeychainNaClCrypto\",\"MWEARKeychainV3\",\"MessengerLogHistory\",\"ReStoreBinaryEncoding\",\"ReStoreDbClosedError\",\"ReStoreDbConfigStore\",\"ReStoreDbVersionChange\",\"ReStoreDecryptionFailure\",\"ReStoreErrorAction\",\"ReStorePersistence\",\"err\",\"gkx\",\"pageID\",\"promiseDone\",\"promiseFromRequest\",\"tweetnacl\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=4096,j=d(\"CurrentMessengerUser\").getIDorEIMU(),k=d(\"MessengerLogHistory\").getInstance(\"db_init\"),l=new Set([d(\"ReStoreDbConfigStore\").CONFIG_STORE_NAME]),m=new(d(\"ReStoreBinaryEncoding\").Encoder)(),n=new(d(\"ReStoreBinaryEncoding\").Decoder)();function o(a,b){if(a==null)return null;var e=new Uint8Array(a);try{e=e[1];var f=d(\"MWEARKeychainV3\").getDbEncryptionKey(e);f=f.key;var g=3;a=d(\"tweetnacl\").secretbox.open(new Uint8Array(a,g+d(\"tweetnacl\").secretbox.nonceLength),new Uint8Array(a,g,d(\"tweetnacl\").secretbox.nonceLength),new Uint8Array(f));if(a==null){throw new(d(\"MAWKeychainNaClCrypto\").EARDecryptionError)(\"Encrypted ReStore-no-locks was unable to decrypt an entity. Attempting to use key version : \"+((g=e)!=null?g:\"non-provided\")+\".\")}return n.decode(a)}catch(a){c(\"LSPlatformErrorChannel\").emit(new(d(\"ReStoreDecryptionFailure\").ReStoreDecryptionFailure)(a.message,b));throw new(d(\"ReStoreDecryptionFailure\").ReStoreDecryptionFailure)(a.message,b)}}function p(a,b){if(a==null)return a;try{var e=d(\"MWEARKeychainV3\").getDbEncryptionKey(),f=e.key;e=e.version;e=new Uint8Array([0,e,d(\"MAWCryptoConsts\").CIPHER_ID]);var g=d(\"tweetnacl\").randomBytes(d(\"tweetnacl\").secretbox.nonceLength);a=d(\"tweetnacl\").secretbox(m.encode(a),g,new Uint8Array(f));f=new Uint8Array(e.length+g.length+a.length);f.set(e);f.set(g,e.length);f.set(a,e.length+g.length);return f.buffer}catch(a){throw c(\"err\")(a.message+\" - Encrypted LSDB was unable to encrypt an entity for table \"+b)}}function q(a){for(a of a.values())if(a.size!==0)return!1;return!0}function r(a,b){var c=[];a=new Set(a);for(var d of a)b.objectStoreNames.contains(d)||c.push(d);d=[];for(var e=0;e<b.objectStoreNames.length;e++){var f=b.objectStoreNames[e];!a.has(f)&&!l.has(f)&&d.push(f)}if(c.length!==0||d.length!==0)return[c,d]}function s(a,b){if(b==null){k.debug(\"Schema doesn't have changes to apply\");return}k.debug(\"Schema has changes to apply\");var c=b[0];b=b[1];c.forEach(function(b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{autoIncrement:!0})});b.forEach(function(b){a.objectStoreNames.contains(b)&&a.deleteObjectStore(b)})}function t(a,b,e,f,g){function i(a){e(a.target),k.debug(\"DB onversionchange TABID=\"+c(\"pageID\")),c(\"FBLogger\")(\"mpf_web_foundations\").info(\"[pdb] onversionchange inWorker=%s\",String((h||(h=c(\"ExecutionEnvironment\"))).isInWorker)),f.endFail(\"version_change\"),c(\"LSPlatformErrorChannel\").emit(new(d(\"ReStoreDbVersionChange\").ReStoreDbVersionChange)())}return new Promise(function(d,e){var h=indexedDB.open(a,g);h.onupgradeneeded=function(a){a=a.target;var c=a.result;a=a.transaction;b(c,a)};h.onerror=function(a){f.endFail(\"failed_to_open_pdb\"),e(c(\"unrecoverableViolation\")(\"Failed to open db\",\"messenger_web_product\",{error:a.target.error}))};h.onsuccess=function(a){a=a.target.result;a.addEventListener(\"versionchange\",i);d(a)}})}async function u(a,b,e,f,g){function i(a){g.addAnnotations({bool:{dbEmpty:!0}});d(\"ReStoreDbConfigStore\").createDbConfig(a,f.defaultConfig);for(var c of b)a.createObjectStore(c,{autoIncrement:!0})}g.addPoint(\"idb_open_start\");var j=await t(a,i,e,g);g.addPoint(\"idb_open_end\");var l=j.transaction(d(\"ReStoreDbConfigStore\").CONFIG_STORE_NAME,\"readonly\");l=await Promise.all([d(\"ReStoreDbConfigStore\").detectConfigMismatch(l,f),d(\"ReStoreDbConfigStore\").readCorruptionFailuresFromConfig(l).then(function(a){return(a=a==null?void 0:a.value)!=null?a:0})]);var m=l[0];l=l[1];var n=l>0;n&&(c(\"FBLogger\")(\"mpf_web_foundations\").info(\"[pdb] opening corrupted db failures=%s inWorker=%s\",String(l),String((h||(h=c(\"ExecutionEnvironment\"))).isInWorker)),k.debug(\"DB corrupted, deleting db\"));m&&k.debug(\"DB config mismatch, deleting db\");g.addAnnotations({bool:{configMismatch:m,dbCorruptionOccured:n}});if(m||n)j.close(),g.addPoint(\"delete_db_start\"),await c(\"promiseFromRequest\")(indexedDB.deleteDatabase(a)),g.addPoint(\"delete_db_end\"),g.addPoint(\"reopen_db_start\"),j=await t(a,i,e,g),g.addPoint(\"reopen_db_end\");else{var o=r(b,j);o!=null&&(k.debug(\"Schema mismatch, bumping db version\"),j.close(),g.addPoint(\"mismatch_start\"),j=await t(a,function(a){return s(a,o)},e,g,j.version+1),g.addPoint(\"mismatch_end\"))}return j}function a(a,b,e,f){var g=j+\"-\"+a,h=!0,l,m=[],n=null,r=Promise.resolve();k.debug(\"shim DB is ON\");f.addPoint(\"init_idb_start\");var s=new Map(),v=new Promise(function(d,g){c(\"promiseDone\")(r=r.then(async function(){try{var c=await u(a,b,w,e,f);d(c)}catch(a){g(a)}}),function(a){},function(a){return c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).warn(\"[pdb] dbLock idbPromise issue\")})});c(\"promiseDone\")(v.then(function(){f.addPoint(\"init_idb_end\")}));function w(a){a.close(),h=!1}function x(a,b,c){c=a.transaction(c!=null&&c.length>0?c:a.objectStoreNames,b,{durability:\"relaxed\"});d(\"MAWExceededStorageQuota\").listenToQuotaExceededError(c);return c}function y(a){var b=s.get(a);b==null&&(b=new Map(),s.set(a,b));return b}function z(){if(n)return;n=new Promise(async function(a){var b;try{var d=async function(){if(l==null){var a;b=(a=b)!=null?a:await v;var d=x(b,m.some(function(a){return a.writemode===\"readwrite\"||a.expectingWrite})?\"readwrite\":\"readonly\");d.onabort=function(){l===d&&(l=null)};l=d}var e=l;a=[];for(var f of m){if(f.writemode===\"readwrite\"){e.mode===\"readwrite\"&&a.push(f);l=null;break}a.push(f)}m.splice(0,a.length);a.length&&await Promise.all(a.map(function(a){a=a.thunk;return a(e)}));c(\"gkx\")(\"116\")&&!m.length&&l!=null&&await c(\"promiseFromRequest\")(l.objectStore(l.objectStoreNames[0]).get(\"\"))};while(m.length)await d();(d=l)==null?void 0:d.commit==null?void 0:d.commit()}finally{l=null,a(),n=null}})}function A(a,b,c){c===void 0&&(c=!1);return new Promise(function(d,e){m.push({expectingWrite:c,thunk:async function(b){var c;try{c=await a(b)}catch(a){e(a);return}d(c)},writemode:b}),z()})}function B(){if(!h)return;c(\"promiseDone\")(v,async function(a){var b;a=x(a,\"readwrite\");b=(b=(b=await d(\"ReStoreDbConfigStore\").readCorruptionFailuresFromConfig(a))==null?void 0:b.value)!=null?b:0;await d(\"ReStoreDbConfigStore\").writeCorruptionFailuresToConfig(a,b)})}function C(){c(\"promiseDone\")(v,function(a){w(a)})}function D(){if(!h)throw new(c(\"ReStoreDbClosedError\"))()}async function E(a){await v;D();var b=c(\"ClientConsistency\").getAdditionalRevisions();b.size>0&&(c(\"FBLogger\")(\"mpf_web_foundations\").info(\"[pdb] js mismatch detected\"),d(\"ReStoreErrorAction\").softRefresh());return new Promise(function(b,d){c(\"promiseDone\")(r=r.then(async function(){try{var c=await a();b(c)}catch(a){d(a)}}),function(a){},function(a){return c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).warn(\"[pdb] dbLock runExclusively issue\")})})}return{clearCache:function(){s.clear()},close:C,flush:async function(b,e){e=e.upgrade;if(!h)return;async function g(a){var c=new Promise(function(b,c){a.oncomplete=function(a){b(a.target.result)},a.onerror=a.onabort=function(a){s.clear(),c(a)}}),e=!1;for(var f of b){var g=f[0],h=f[1],i=a.objectStore(g);for(h of h){var j=h[0],k=h[1],l;if(k===d(\"ReStorePersistence\").sentinelDeleted)l=i.delete(j);else{k=p(k,g);l=i.put(k,j)}l.onerror=function(){return e=!0}}}e?a.abort():a.commit!=null&&a.commit();await c}function i(){Array.from(b).forEach(function(a){var b=a[0];a=a[1];var c=y(b);Array.from(a).forEach(function(a){var b=a[0];a=a[1];a===d(\"ReStorePersistence\").sentinelDeleted?c.delete(b):c.set(b,a)})})}if(q(b))return;var j=await v;if(e===!0){c(\"FBLogger\")(\"mpf_web_foundations\").info(\"[pdb] Updating IDB version, fromVersion: %s, non-empty tables: %s\",j.version,Array.from(b.entries()).filter(function(a){a[0];a=a[1];return a.size>0}).map(function(a){a=a[0];return a}).sort().toString());await n;(e=l)==null?void 0:e.abort();j.close();s.clear();v=async function(){var b=new(c(\"Deferred\"))(),d=await t(a,function(a,d){i(),c(\"promiseDone\")(g(d),function(){b.resolve()},function(){b.reject()})},w,f,j.version+1);await b.getPromise();return d}();await v;return}if(b.size===0)return;i();e=Array.from(b.keys());e.push(d(\"ReStoreDbConfigStore\").CONFIG_STORE_NAME);await g(x(j,\"readwrite\",e))},get:function(a,b,d){var e=y(b);if(e.has(d))return e.get(d);else{if(!h)return new Promise(function(){});var f=A(function(a){return c(\"promiseFromRequest\")(a.objectStore(b).get(d))},\"readonly\").then(function(a){var c=e.get(d);if(c!==f)return c;c=o(a,b);e.set(d,c);return c});e.set(d,f);return f}},isClosed:function(){return!h},logError:function(a,b,d,e){if(d===\"dbCorruption\"){b===\"readwrite\"&&B();throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Got unexpected undefined in pdb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s\",b,a,(d=e==null?void 0:e.id)!=null?d:\"\",(b=e==null?void 0:e.deletedInThisTxn)!=null?b:\"\")}},queueCommitWork:function(a){return a()},runExclusively:E,shouldApplySync:function(){return!1},shouldInline:function(a,b){return d(\"ReStoreBinaryEncoding\").estimateSize(b)<i},shouldSync:function(a,b){return!1},types:[\"indexeddb\"],uniqueId:g}}a.schemaDiff=r;a.applyChanges=s;g.default=a}),98);\n__d(\"MAWDbThread\",[\"MAWHexUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){return d(\"MAWHexUtils\").orderPreservingHex(a)+\"_\"+b}g.craftThreadOrder=a}),98);\n__d(\"MAWDexieTable\",[\"Promise\",\"dexie_maw\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){return(h||(h=b(\"Promise\"))).resolve(a)}function a(a){return a.reduce(function(a,b,c){return a.then(function(a){return b(c).then(function(b){a.push(b);return a})})},n([]))}function e(a){return c(\"dexie_maw\").Promise.all(a)}function f(a){return c(\"dexie_maw\").Promise.allSettled(a)}function j(a){return c(\"dexie_maw\").Promise.PSD[a]}function k(a,b){c(\"dexie_maw\").Promise.PSD[a]=b}function l(a){c(\"dexie_maw\").Promise.PSD[a]=void 0}var m=function(){function a(a,b,d,e){d===void 0&&(d=!0);e=new(c(\"dexie_maw\"))(a,babelHelpers[\"extends\"]({chromeTransactionDurability:\"relaxed\"},e));b(e);this.name=a;this.stores=e;d&&this.open()}var b=a.prototype;b.open=function(){this.stores.open()};b.close=function(){this.stores.close()};b.transact=function(a,b,c){var d=this;return i(this.stores.transaction(a,b.map(function(a){return d.stores[a]}),function(){return c()}))};babelHelpers.createClass(a,[{key:\"tables\",get:function(){return this.stores.tables}}]);return a}();function n(a){return c(\"dexie_maw\").Promise.resolve(a)}function o(a){return c(\"dexie_maw\").waitFor(a)}g.DEXIE_MIN_KEY=d(\"dexie_maw\").Dexie.minKey;g.DEXIE_MAX_KEY=d(\"dexie_maw\").Dexie.maxKey;g.undexify=i;g.dexieSequentialAll=a;g.dexieAll=e;g.dexieAllSettled=f;g.getDexiePSDItem=j;g.setDexiePSDItem=k;g.clearDexiePSDItem=l;g.DexieTable=m;g.dexieResolve=n;g.dexieExpensiveAwait=o}),98);\n__d(\"SignalDbTypes\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b,c){return a+\"_\"+b+\"_\"+c}b={abProps:\"abProps\",authKeyPair:\"authKeyPair\",cat:\"cat\",certificateChain:\"certificateChain\",clockSkew:\"clockSkew\",deviceId:\"deviceId\",deviceUUID:\"deviceUUID\",edgeInfo:\"edgeInfo\",fbid:\"fbid\",identityKeyPair:\"identityKeyPair\",lastPrekeyGenerationId:\"lastPrekeyGenerationId\",lastPrekeyId:\"lastPrekeyId\",lastSessionDeviceWasLinkedTo:\"lastSessionDeviceWasLinkedTo\",lastSignedPrekeyId:\"lastSignedPrekeyId\",regId:\"regId\",registrationVersion:\"registrationVersion\"};({msgrDeviceId:\"msgrDeviceId\"});f.buildSenderKeySessionId=a;f.MetaKeysEnum=b}),66);\n__d(\"MAWDbSchema.dexie\",[\"MAWDbMsg\",\"MAWDbThread\",\"MAWDbVersionList\",\"MAWDexieTable\",\"MAWFolderTypes\",\"MAWLocalizationType\",\"MAWODSProxy\",\"MAWTimeUtils\",\"MAWWaitForBackendSetup\",\"SignalDbTypes\",\"WAJids\",\"WALogger\",\"WAMsg\",\"WAMsgType\",\"WAOdsEnums\",\"WAStanzaUtils\",\"WATimeUtils\",\"dexie_maw\",\"gkx\",\"promiseDone\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Duplicate waMsgId found for receipt, number of duplicates: \",\"\"]);i=function(){return a};return a}a=function(a){var b=function(a){var b;b=(b=a.quote)==null?void 0:b.content;return a.quoteExternalId!=null&&(b==null?void 0:b.media)!=null};return a.messages.where(\"quoteExternalId\").between(d(\"WAStanzaUtils\").toStanzaId(\"0\"),d(\"WAStanzaUtils\").toStanzaId(\"[\"),!0,!0).filter(b).toArray()[\"catch\"](function(){return a.messages.filter(b).toArray()}).then(function(b){var c=new Set(b.map(function(a){a=(a=a.quote)==null?void 0:a.content;return a==null?void 0:(a=a.media)==null?void 0:a.plaintextHash}).filter(Boolean)),d=b.map(function(a){a=a.msgId;return a});return a.media.filter(function(a){a=a.plaintextHash;return c.has(a)}).toArray().then(function(b){var c=new Map(b.map(function(a){var b=a.mediaId;a=a.plaintextHash;return[a,b]}));return a.messages.where(\"msgId\").anyOf(d).modify(function(a){var b;b=(b=a.quote)==null?void 0:b.content;a.quote.content.mediaId=c.get(b.media.plaintextHash);delete a.quote.content.media})})})};b=function(a){return a.groupInfo.toCollection().modify(function(a){typeof a.inviter===\"number\"&&delete a.inviter})};e=function(a){return a.meta.get(d(\"SignalDbTypes\").MetaKeysEnum.deviceId).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.deviceId)!=null&&typeof b.value.deviceId!==\"number\")return a.meta.clear()})};f=function(a){return a.threads.filter(function(a){return d(\"WAJids\").switchOnMsgrChatJidType(a.jid,{group:function(){return!1},user:function(){return a.oldestMsg!=null}})}).toArray().then(function(b){var c=[];b.forEach(function(a){c.push(a.oldestMsg),c.push(a.newestMsg)});return a.messages.where(\"msgId\").anyOf(c.filter(Boolean)).toArray().then(function(c){var e=new Map(),f=[],g=[];c.forEach(function(a){e.set(a.msgId,a)});b.forEach(function(b){var c=e.get(b.oldestMsg),h=e.get(b.newestMsg);(c==null?void 0:c.type)===\"Admin\"&&(h==null?void 0:h.type)===\"Admin\"&&(c.msgId===h.msgId?g.push(b.chatId):f.push(b));return d(\"MAWDexieTable\").dexieAll(f.map(function(b){return a.messages.where(\"thread\").equals(b.chatId).toArray()})).then(function(b){b.forEach(function(a){if(a.length===0)return;var b=a[0].thread;a=a.filter(function(a){return a.type!==\"Admin\"});if(a.length>0)return;g.push(b)});return d(\"MAWDexieTable\").dexieAll([a.threads.bulkDelete(g),a.messages.where(\"thread\").anyOf(g)[\"delete\"]()])})})})})};var j=function(a){return a.unrenderedMessages.toCollection().modify(function(a){if(a.type===d(\"WAMsgType\").MSG_TYPE.DELETE_FOR_ME){var b=a.messageDeleteForMeTs;a.messageDeleteForMeTs=b}})},k=function(a){var b=0,e=0,f=c(\"dexie_maw\").currentTransaction;if(f==null)throw c(\"unrecoverableViolation\")(\"transaction does not exist\",\"messenger_e2ee_web\");f.on(\"complete\",function(){c(\"promiseDone\")(d(\"MAWWaitForBackendSetup\").waitForBackendSetup(\"DB upgrade to V31\").then(function(){b>0&&d(\"MAWODSProxy\").odsBumpEntityKey({amount:b,entity:d(\"WAOdsEnums\").Entity.MESSAGE_MISSING_THREAD_JID,key:\"fail\"}),e>0&&d(\"MAWODSProxy\").odsBumpEntityKey({amount:e,entity:d(\"WAOdsEnums\").Entity.MESSAGE_MISSING,key:\"fail\"})}))});f.on(\"complete\",function(){b>0&&d(\"MAWODSProxy\").odsBumpEntityKey({amount:b,entity:d(\"WAOdsEnums\").Entity.MESSAGE_MISSING_THREAD_JID,key:\"fail\"}),e>0&&d(\"MAWODSProxy\").odsBumpEntityKey({amount:e,entity:d(\"WAOdsEnums\").Entity.MESSAGE_MISSING,key:\"fail\"})});return a.threads.toArray().then(function(c){var f=c.reduce(function(a,b){b!=null&&a.set(b.chatId,b);return a},new Map());return d(\"MAWDexieTable\").dexieAll([a.messages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:b+=1}else e+=1}),a.unrenderedMessages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:b+=1}else e+=1})])})},l=function(a){return a.isDualSend.toCollection().modify(function(a){a.version==null&&(a.version=1)})},m=function(a){return a.messages.toCollection().modify(function(a){a.type===d(\"WAMsgType\").MSG_TYPE.ADMIN&&a.msgContent.adminType===d(\"MAWLocalizationType\").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION&&(a.altIndex=d(\"MAWDbMsg\").craftE2eeAdminMsgAltIndex(a.thread))})},n=function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d(\"MAWDbMsg\").getSortOrderWithFallback(a)})},o=function(a){return a.threads.toCollection().modify(function(a){a.folder==null&&(a.folder=d(\"MAWFolderTypes\").FOLDER_ID.INBOX)})},p=function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d(\"MAWDbMsg\").getSortOrderWithFallback(a)})},q=function(a){return a.personalSenderKeyStatuses.toCollection().modify(function(a){a.rotateSenderKey=!0,a.hasSenderKey=new Set()})},r=function(a){return a.messages.toCollection().modify(function(a){a.type===d(\"WAMsgType\").MSG_TYPE.ADMIN&&a.msgContent.adminType===d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&a.sortOrderMs!=null&&a.sortOrderMs>0&&(a.sortOrderMs=0)})},s=function(a){return a.messages.toCollection().modify(function(a){!(a.type===d(\"WAMsgType\").MSG_TYPE.ADMIN&&(a.msgContent.adminType===d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||a.msgContent.adminType===d(\"MAWLocalizationType\").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION))&&a.sortOrderMs!=null&&a.sortOrderMs<1661204086&&(a.sortOrderMs=d(\"MAWDbMsg\").getCanonicalTsFromMsg(a)*1e3)})},t=function(a){return a.threads.filter(function(a){return a.isMigratedLocally===!0&&a.newestMsg!=null}).toArray().then(function(b){var c=b.map(function(a){return a.chatId}),e=new Map();return d(\"MAWDexieTable\").dexieAll(b.map(function(b){return a.messages.where([\"thread\",\"sortOrderMs\"]).between([b.chatId,0],[b.chatId,Number.MAX_VALUE]).last().then(function(a){a!=null&&e.set(a.thread,a.msgId)})})).then(function(){return a.threads.where(\"chatId\").anyOf(c).modify(function(a){var b=e.get(a.chatId);b!=null&&(a.newestMsg=b)})})})},u=function(a){return a.identity.toCollection().modify(function(a){a.userJid=d(\"WAJids\").extractUserJid(a.deviceJid)})},v=function(a){return a.threads.toCollection().modify(function(a){a.lastReadMsgTs!=null&&a.lastReadMsgTs<d(\"WATimeUtils\").MAX_INT&&(a.lastReadMsgTs=d(\"MAWTimeUtils\").ensureValidMillisTime(a.lastReadMsgTs));if(a.newestMsgTs!=null&&a.newestMsgTs<d(\"WATimeUtils\").MAX_INT){var b=d(\"MAWTimeUtils\").ensureValidMillisTime(a.newestMsgTs);a.newestMsgTs=b;b!=null&&(a.threadOrder=d(\"MAWDbThread\").craftThreadOrder(b,a.jid))}})},w=function(a){return a.messages.toCollection().modify(function(a){a.type===d(\"WAMsgType\").MSG_TYPE.ADMIN&&a.msgContent.adminType===d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&(a.altIndex=d(\"MAWDbMsg\").craftCutoverAdminMsgAltIndex(a.thread))})},x=function(a){return a.meta.get(d(\"SignalDbTypes\").MetaKeysEnum.fbid).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.fbid)!=null&&b.value.fbid===\"0\")return a.meta.clear()})},y=function(a){return a.prekey.filter(function(a){return a.isDeleted===!0})[\"delete\"]()},z=function(a){return c(\"gkx\")(\"23905\")?a.meta.clear():d(\"MAWDexieTable\").dexieResolve()},A=function(a){return a.participants.toCollection().modify(function(a){var b;if(a==null||((b=a.userJid)==null?void 0:b.indexOf(\"@msgr@msgr\"))===!1)return;a.id=a.id.replace(\"@msgr@msgr\",\"@msgr\");a.userJid=a.userJid.replace(\"@msgr@msgr\",\"@msgr\")}).then(function(){})},B=function(a){var b=a.threads.filter(function(a){return a.snippetMsg!=null&&a.snippetMsgTs==null});return b.toArray().then(function(c){var e=c.reduce(function(a,b){b!=null&&b.snippetMsg!=null&&a.set(b.jid,b.snippetMsg);return a},new Map());c=Array.from(e.values());return a.messages.where(\"msgId\").anyOf(c).toArray().then(function(a){var c=a.reduce(function(a,b){b!=null&&b.serverTs!=null&&a.set(b.msgId,b.serverTs);return a},new Map());b.modify(function(a){var b=e.get(a.jid);if(b!=null){b=c.get(b);b!=null&&(a.snippetMsgTs=d(\"WATimeUtils\").castUnixTimeToMillisTime(b))}})})})},C=function(a){return a.threads.toArray().then(function(b){return d(\"MAWDexieTable\").dexieAll(b.map(function(b){return a.participants.where(\"threadId\").equals(b.chatId).modify(function(a){a.threadJid=(a=a.threadJid)!=null?a:b.jid})}))})},D=C,E=function(a){var b=[];return a.groupInvites.toArray().then(function(c){var d=c.map(function(a){return a.invitedParticipantId});return a.participants.bulkGet(d).then(function(d){d.forEach(function(a,d){if(a==null){a=c[d];b.push(a)}});var e=d.filter(Boolean);return a.groupInvites.bulkPut(c.map(function(a){var c=e.find(function(b){return b.id===a.invitedParticipantId});if(c!=null){a.inviteeJid=c.userJid;a.threadJid=c.threadJid;return babelHelpers[\"extends\"]({},a,{inviteeJid:c.userJid,threadJid:c.threadJid})}else{b.push(a);return a}}))})}).then(function(){return a.groupInvites.bulkDelete(b.map(function(a){return[a.invitedParticipantId,a.inviterJid]}))})},F=function(a){var b=new Map();return a.receipts.toArray().then(function(c){return d(\"MAWDexieTable\").dexieAll(c.map(function(c){return a.messages.get({msgId:c.msgId}).then(function(e){if(e==null)return a.receipts[\"delete\"](c.msgId).then(function(){});else{var f=d(\"WAMsg\").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId});if(b.has(f)){var g;g=(g=b.get(f))!=null?g:1;b.set(f,g);d(\"WALogger\").ERROR(i(),g);return a.receipts[\"delete\"](c.msgId).then(function(){})}else{b.set(f,1);return a.receipts.where(\"msgId\").equals(e.msgId).modify(function(a){a.waMsgId=f}).then(function(){})}}})}))})},G=function(a){var b=[];return a.contacts.toArray().then(function(c){for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;b.push({ephemeralSetting:f.ephemeralSetting,ephemeralSyncResponseBackoffInfo:f.ephemeralSyncResponseBackoffInfo,userJid:f.contactJid})}return a.ephemeralSettings.bulkPut(b)})};a=new Map([[(h=d(\"MAWDbVersionList\")).VERSION.V26,a],[h.VERSION.V27,b],[h.VERSION.V28,e],[h.VERSION.V29,f],[h.VERSION.V30,j],[h.VERSION.V31,k],[h.VERSION.V43,l],[h.VERSION.V44,m],[h.VERSION.V45,n],[h.VERSION.V46,o],[h.VERSION.V47,p],[h.VERSION.V53,q],[h.VERSION.V54,r],[h.VERSION.V55,s],[h.VERSION.V56,t],[h.VERSION.V57,u],[h.VERSION.V58,v],[h.VERSION.V60,w],[h.VERSION.V66,x],[h.VERSION.V68,y],[h.VERSION.V71,z],[h.VERSION.V72,A],[h.VERSION.V82,B],[h.VERSION.V85,C],[h.VERSION.V87,D],[h.VERSION.V90,E],[h.VERSION.V91,F],[h.VERSION.V101,G]]);g.dbUpgrades=a}),98);\n__d(\"MAWDbSchemaReStoreDexieUtils\",[\"MAWDbSchema\",\"MAWDbSchema.dexie\",\"err\",\"sortBy\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=c(\"sortBy\")(Array.from(new Set([].concat(Array.from(d(\"MAWDbSchema\").dbSchema.keys()),Array.from(d(\"MAWDbSchema.dexie\").dbUpgrades.keys())))).map(function(a){return{schema:d(\"MAWDbSchema\").dbSchema.get(a),upgrade:d(\"MAWDbSchema.dexie\").dbUpgrades.get(a),version:a}}),function(a){a=a.version;return a}),i=function(a,b){return Array.from(a.filter(function(a){return a.version<=b&&a.schema!=null}).reduce(function(a,b){(b=b.schema)==null?void 0:b.forEach(function(b){a.set(b.name,b)});return a},new Map()).values())},j=function(a,b){return i(a,b).reduce(function(a,b){var d=b.autoIncrement,e=b.dexieOnly_primaryKeyUnique,f=b.name,g=b.primaryKey,h=b.removed;f=f.replace(\/^e2ee_\/,\"\");if(h===!0){a[f]=null;return a}if(d&&e===!0)throw c(\"err\")(\"Invalid schema, cannot have both autoincremnet and unique constraints \"+JSON.stringify(b));h=d?\"++\":\"\";d=e===!0?\"&\":\"\";e=\"\"+(g.length>1?\"[\":\"\")+g.join(\"+\")+(g.length>1?\"]\":\"\");g=Object.values(b.indexes).map(function(a){var b=a.columns,c=!(a.unique===!1),d=b.length>1;a=a.multiEntry_DO_NOT_USE===!0;c=c&&!a?\"&\":\"\";a=a?\"*\":\"\";c=\"\"+c+a;return\"\"+c+(d?\"[\":\"\")+b.join(\"+\")+(d?\"]\":\"\")}).join(\",\");a[f]=[\"\"+h+d+e,g].filter(Boolean).join(\",\");return a},{})};a=function(a){return j(h,a)};g.MAW_DB_VERSION_CHANGES=h;g.getDexieSchemaForVersion=j;g.getCompleteDexieSchemaForVersion=a}),98);\n__d(\"MAWDbVersion\",[\"MAWCurrentUser\",\"MAWDbSchemaReStoreDexieUtils\",\"MAWGetDbVersion\",\"MAWIndexedDbMetadata\",\"MAWReStoreDbSetup\",\"MAWRestoreRewriteUtils\",\"Promise\",\"WATagsLogger\",\"asyncToGeneratorRuntime\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Applying \",\" updates between \",\" and \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Skipping db upgrade and just applying latest schema\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"current db version is greater than target db version\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"version is not set in QE\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"current db version: \",\", target db version: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Using OneDB\/shim, cannot read DB version\"]);n=function(){return a};return a}var o=d(\"WATagsLogger\").TAGS([\"DB\",\"VERSION\"]);f=d(\"MAWGetDbVersion\").getArmadilloDbVersion();f=d(\"MAWDbSchemaReStoreDexieUtils\").getCompleteDexieSchemaForVersion(Math.min(d(\"MAWDbSchemaReStoreDexieUtils\").MAW_DB_VERSION_CHANGES[d(\"MAWDbSchemaReStoreDexieUtils\").MAW_DB_VERSION_CHANGES.length-1].version,f>0?f:Infinity));function p(a,b){var c=b.schema,d=b.upgrade;b=b.version;c!=null&&d!=null?a.version(b).stores(c).upgrade(d):c!=null?a.version(b).stores(c):d!=null?a.version(b).upgrade(d):a.version(b);return b}function q(a,c){if(d(\"MAWRestoreRewriteUtils\").isOneDBEnabled()||c){o.LOG(n());return(h||(h=b(\"Promise\"))).resolve(null)}return new(h||(h=b(\"Promise\")))(function(b){if(!indexedDB){b();return}var c=indexedDB.open(a);c.onsuccess=function(a){a=a.target.result;var c=a==null?void 0:a.version;a==null?void 0:a.close();c!=null?b(c\/10):b()};c.onerror=function(){b()}})}function r(a){return s.apply(this,arguments)}function s(){s=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){if(d(\"MAWRestoreRewriteUtils\").isOneDBEnabled()||a){a=(yield d(\"MAWReStoreDbSetup\").getDB());return a.getCustomMigrationVersion()}else return(h||(h=b(\"Promise\"))).resolve(null)});return s.apply(this,arguments)}function a(){var a=d(\"MAWCurrentUser\").getID(),b=c(\"gkx\")(\"23906\");if(d(\"MAWRestoreRewriteUtils\").isOneDBEnabled()||b)return r(b);else return q(d(\"MAWIndexedDbMetadata\").dbName(a),!1)}function t(a,b){if(a.upgrade!=null||b.upgrade!=null)return!0;a=Object.keys((a==null?void 0:a.schema)||{});b=Object.keys((b==null?void 0:b.schema)||{});a=[].concat(a,b);b=new Set(a);return b.size!==a.length}function u(a){return a.reduce(function(a,b,c){if(c===0)return[babelHelpers[\"extends\"]({},b,{schema:d(\"MAWDbSchemaReStoreDexieUtils\").getCompleteDexieSchemaForVersion(b.version)})];c=a[a.length-1];b=babelHelpers[\"extends\"]({},b,{schema:b.schema!=null?d(\"MAWDbSchemaReStoreDexieUtils\").getDexieSchemaForVersion([b],b.version):null});if(t(c,b)){a.push(b);return a}a.splice(a.length-1,1,babelHelpers[\"extends\"]({},c,b,{schema:babelHelpers[\"extends\"]({},c==null?void 0:c.schema,b==null?void 0:b.schema)}));return a},[])}function e(a,b,c){var e=c!=null?c:d(\"MAWGetDbVersion\").getArmadilloDbVersion==null?void 0:d(\"MAWGetDbVersion\").getArmadilloDbVersion();o.LOG(m(),b,e);e==null&&o.WARN(l());if(b!=null&&b>e){o.WARN(k());a.version(b);return b}c=d(\"MAWDbSchemaReStoreDexieUtils\").MAW_DB_VERSION_CHANGES.filter(function(a){a=a.version;return b==null||a>b}).filter(function(a){a=a.version;return e==null||e>=a});var f=d(\"MAWDbSchemaReStoreDexieUtils\").MAW_DB_VERSION_CHANGES.filter(function(a){a=a.version;return e==null||e>=a});if(c.length===0||c.length===f.length){o.LOG(j());f=d(\"MAWDbSchemaReStoreDexieUtils\").MAW_DB_VERSION_CHANGES[d(\"MAWDbSchemaReStoreDexieUtils\").MAW_DB_VERSION_CHANGES.length-1].version;f=Math.min(e!=null&&e>0?e:f,f);a.version(f).stores(d(\"MAWDbSchemaReStoreDexieUtils\").getCompleteDexieSchemaForVersion(f));return f}f=u(c);o.LOG(i(),f.length,c[0].version,c[c.length-1].version);var g=0;f.forEach(function(b){g=Math.max((b=p(a,b))!=null?b:0,(b=g)!=null?b:0)});return g}g.CURRENT_MAW_STORES=f;g.getDexieDbVersion=q;g.getRestoreDbVersion=r;g.getDBVersion=a;g.updateDB=e}),98);\n__d(\"MAWDBRestoreConfig\",[\"ReStoreDbConfigStore\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={lockVersion:9,name:d(\"ReStoreDbConfigStore\").DB_CONFIG_KEY};function a(){return{defaultConfig:h,isEqual:function(a){return(a==null?void 0:a.lockVersion)==null?!1:(a==null?void 0:a.lockVersion)===h.lockVersion}}}g.createConfig=a}),98);\n__d(\"MAWRestoreSchemaIndexedDB\",[\"IndexedDbPolyfills\",\"LSPlatformLsInitLog\",\"MAWCurrentUser\",\"MAWDBRestoreConfig\",\"MAWDbSchema.restore\",\"MAWDbVersion\",\"MAWGetDbVersion\",\"MAWIndexedDbMetadata\",\"MAWQplProxy\",\"Promise\",\"ReStore\",\"ReStoreIDBFactory\",\"ReStoreMetadata\",\"WATagsLogger\",\"asyncToGeneratorRuntime\",\"createReStoreIndexedDbPersistenceWithoutLocks\",\"dexie_maw\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Updating shimmed DB from \",\" to \",\"\"]);i=function(){return a};return a}var j,k=d(\"WATagsLogger\").TAGS([\"DBInit\",\"DBSetup\",\"ReStore\"]),l={};function a(){if(j==null){var a=d(\"ReStoreMetadata\").getBuildTableData(l)([d(\"MAWDbSchema.restore\").clientSchema.map(function(a,b){return babelHelpers[\"extends\"]({},a,{id:(b+1).toString()})})]),e=d(\"MAWGetDbVersion\").getArmadilloDbVersion();j=c(\"ReStore\")(c(\"createReStoreIndexedDbPersistenceWithoutLocks\")(d(\"MAWIndexedDbMetadata\").restoreDbName2(d(\"MAWCurrentUser\").getID()),Object.keys(a.tableNames),d(\"MAWDBRestoreConfig\").createConfig(),d(\"LSPlatformLsInitLog\").lsInitLogger),a,void 0,{migration:function(a,f){var g;d(\"MAWQplProxy\").sendQPLIntAnnotationThroughBridge(c(\"qpl\")._(1056839232,\"112\"),\"dbVersion\",(g=a)!=null?g:0);return new(h||(h=b(\"Promise\")))(function(g,l){var m={open:function(){var c=new(d(\"IndexedDbPolyfills\").IDBRequest)(),i=new(d(\"ReStoreIDBFactory\").ReStoreIDBDatabase)(j,\"\"),k=new(d(\"ReStoreIDBFactory\").ReStoreIDBTransaction)(babelHelpers[\"extends\"]({},j,{runInTransaction:function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b;try{b=(yield a(f))}catch(a){l(a);throw a}g();return b});function c(b){return a.apply(this,arguments)}return c}()}),i,new Set(i.objectStoreNames),\"versionchange\");c.result=i;c.transaction=k;void b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){yield (h||(h=b(\"Promise\"))).resolve(),c.emit(\"upgradeneeded\",{newVersion:e,oldVersion:a,target:{result:i,transaction:k}})})();return c}};m=new(c(\"dexie_maw\"))(\"\",{IDBKeyRange:d(\"ReStoreIDBFactory\").ReStoreIDBKeyRange,chromeTransactionDurability:\"relaxed\",enableDataSyncMiddleware:!0,indexedDB:m,shimEnabled:!0});k.LOG(i(),a,e);var n=d(\"MAWDbVersion\").updateDB(m,a,e);d(\"MAWQplProxy\").sendQPLBoolAnnotationThroughBridge(c(\"qpl\")._(1056839232,\"112\"),\"dbUpgradeNeeded\",a!==n);m.open()})},targetVersion:e})}return j}function e(){var a;(a=j)==null?void 0:a.closeDb==null?void 0:a.closeDb();j=null}g.createDB=a;g.closeDB=e}),98);\n__d(\"MAWReStoreDbSetup\",[\"MAWRestoreDbState\",\"MAWRestoreSchemaIndexedDB\",\"asyncToGeneratorRuntime\",\"cr:8810\",\"err\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";f=d(\"MAWRestoreDbState\").getTargetDbState()===\"restore\"||c(\"gkx\")(\"23906\")?d(\"MAWRestoreSchemaIndexedDB\").createDB:null;var h=(d=f)!=null?d:b(\"cr:8810\")==null?void 0:b(\"cr:8810\").createDB,i;function a(){return j.apply(this,arguments)}function j(){j=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=(yield i);a==null?void 0:a.closeDb==null?void 0:a.closeDb();i=null});return j.apply(this,arguments)}function e(){if(h==null)throw c(\"err\")(\"Unexpected invocation of OneDB\");i==null&&(i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=(yield h());yield a.runInTransaction(b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){}),\"readwrite\");return a})());return i}g.closeDB=a;g.getDB=e}),98);\n__d(\"WAPromiseQueue\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g;a=function(){function a(a){a===void 0&&(a=-1),this.$1=(g||(g=b(\"Promise\"))).resolve(),this.$3=0,this.$2=a}var c=a.prototype;c.wait=function(){return this.$1};c.enqueueHandlers=function(a,b,c){var d=this;this.$3++;b=this.$1.then(function(){return a}).then(b,c);c=b.then();this.$1=h(b,this.$2)[\"finally\"](function(){d.$3--});return c};c.enqueue=function(a){var b=this;this.$3++;a=this.$1.then(a);var c=a.then();this.$1=h(a,this.$2)[\"finally\"](function(){b.$3--});return c};c.size=function(){return this.$3};return a}();c=function(){function a(a){a===void 0&&(a=-1),this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitIfPending=function(a){return this.$1.get(a)};c.wait=function(a){return this.$1.get(a)||(g||(g=b(\"Promise\"))).resolve()};c.enqueueHandlers=function(a,b,c,d){c=this.wait(a).then(function(){return b}).then(c,d);return this.$3(a,c)};c.enqueue=function(a,b){b=this.wait(a).then(b);return this.$3(a,b)};c.$3=function(a,b){var c=this,d=b.then(),e,f=function(){c.$1.get(a)===e&&c.$1[\"delete\"](a)};e=h(b,this.$2).then(f,f);this.$1.set(a,e);return d};return a}();function h(a,c){if(c>=0)return new(g||(g=b(\"Promise\")))(function(b){var d=function(){return void b()};a.then(d,d);setTimeout(d,c)});else return a.then(i,i)}function i(){}f.PromiseQueue=a;f.PromiseQueueMap=c}),66);\n__d(\"MAWVaultDb\",[\"ExecutionEnvironment\",\"MAWQplProxy\",\"MAWVault\",\"cr:3657\",\"err\",\"gkx\",\"isObject\",\"isPlainObject\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;b=(f=b(\"cr:3657\"))!=null?f:{};var i=b.addToMessageContentCache,j=1\/1e3,k=new WeakMap();function l(a,b){return b[a]!=null}function a(a,b,e){if(!c(\"isPlainObject\")(a)||!c(\"gkx\")(\"23909\")||!l(b,e)||a==null)return a;var f=k.get(a);if(f!=null)return f;c(\"gkx\")(\"23968\")&&!(h||(h=c(\"ExecutionEnvironment\"))).isInWorker&&(i==null?void 0:i(a,b));f=Math.random()<j?d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(25301509,\"119\")):null;try{e=e[b];e=m(a,e,d(\"MAWVault\").vault);f==null?void 0:f.endSuccess();k.set(a,e);return e}catch(a){f==null?void 0:f.endFail(\"vault_fail\");throw c(\"err\")(a.message+\" - Failed to vault an entity in the table: \"+b)}}function e(a,b,e){if(!c(\"isPlainObject\")(a)||!c(\"gkx\")(\"23909\")||!l(b,e)||a==null)return a;var f=Math.random()<j?d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(741087294,\"2028\")):null;try{a=m(a,e[b],d(\"MAWVault\").unvault);f==null?void 0:f.endSuccess();return a}catch(a){f==null?void 0:f.endFail(\"unvault_fail\");throw c(\"err\")(a.message+\" - Unvaulting failed for an entity in the table: \"+b)}}function m(a,b,d){if(a==null)return a;b=Object.entries(b).filter(function(b){b=b[0];return a[b]!=null});return b.length===0?a:b.reduce(function(a,b){var e=b[0];b=b[1];typeof b!==\"boolean\"&&c(\"isObject\")(b)?a[e]=m(a[e],b,d):b===!0&&(a[e]=d(a[e]));return a},babelHelpers[\"extends\"]({},a))}g.vaultDbRow=a;g.unvaultDbRow=e;g.setInPath=m}),98);\n__d(\"MAWVaultDefinitions\",[],(function(a,b,c,d,e,f){\"use strict\";a={editMsgHistory:{msgContent:{content:!0}},messages:{msgContent:{content:!0},quote:{content:{msgContent:{content:!0}}}},unrenderedMessages:{msgContent:!0}};b={edit_message_history:{messageContent:!0},messages:{replyMessageText:!0,text:!0},threads:{snippet:!0}};f.ARMADILLO_IDB_VAULT_DEFINITIONS=a;f.PERSISTED_DB_VAULT_DEFINITIONS=b}),66);\n__d(\"decodeProtobuf\",[\"WABinary\",\"WAHasProperty\",\"WAHex\",\"WAProtoCompile\",\"WAProtoConst\",\"WAProtoUtils\",\"WAProtoValidate\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){b=new(d(\"WABinary\").Binary)(b);b=n(a,b,void 0,!1);d(\"WAProtoValidate\").checkRequirements(a,b);return b}function b(a,b){b=new(d(\"WABinary\").Binary)(b);b=n(a,b,void 0,!0);d(\"WAProtoValidate\").checkRequirements(a,b);return b}function e(a){return c(\"WAHasProperty\")(a,\"$$unsafeUnknownFields\")?a.$$unsafeUnknownFields:null}function h(a,b,c){if(a!==d(\"WAProtoUtils\").typeToEncType(b))throw new Error(\"FormatError: \"+c+\" encoded with wire type \"+a)}function i(a,b,c){switch(b){case d(\"WAProtoConst\").TYPES.INT32:return j(c,-2147483648,2147483648,a,d(\"WABinary\").parseInt64OrThrow);case d(\"WAProtoConst\").TYPES.INT64:return c.readVarInt(k);case d(\"WAProtoConst\").TYPES.UINT32:return j(c,0,4294967296,a,d(\"WABinary\").parseUint64OrThrow);case d(\"WAProtoConst\").TYPES.UINT64:return c.readVarInt(l);case d(\"WAProtoConst\").TYPES.SINT32:b=j(c,0,4294967296,a,d(\"WABinary\").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d(\"WAProtoConst\").TYPES.SINT64:return c.readVarInt(m);case d(\"WAProtoConst\").TYPES.BOOL:return!!j(c,0,2,a,d(\"WABinary\").parseUint64OrThrow);case d(\"WAProtoConst\").TYPES.ENUM:return c.readVarInt(d(\"WABinary\").parseInt64OrThrow);case d(\"WAProtoConst\").TYPES.FIXED64:return c.readLong(l,!0);case d(\"WAProtoConst\").TYPES.SFIXED64:return c.readLong(k,!0);case d(\"WAProtoConst\").TYPES.DOUBLE:return c.readFloat64(!0);case d(\"WAProtoConst\").TYPES.STRING:return c.readString(c.readVarInt(d(\"WABinary\").parseUint64OrThrow));case d(\"WAProtoConst\").TYPES.BYTES:return c.readBuffer(c.readVarInt(d(\"WABinary\").parseUint64OrThrow));case d(\"WAProtoConst\").TYPES.FIXED32:return c.readUint32(!0);case d(\"WAProtoConst\").TYPES.SFIXED32:return c.readInt32(!0);case d(\"WAProtoConst\").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error(\"FormatError: \"+d+\" encoded with out-of-range value \"+a);return a}function k(a,b){var c=d(\"WABinary\").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d(\"WAHex\").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d(\"WABinary\").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d(\"WAHex\").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e){var f=d(\"WAProtoCompile\").compileSpec(a),g=f.names,k=f.fields,l=f.types,m=f.meta,o=f.oneofToFields,p=f.fieldToOneof,q=f.reservedTags,r=f.reservedFields;f=a.internalDefaults;var s=c||babelHelpers[\"extends\"]({},f)||{};s.$$unknownFieldCount=(a=c==null?void 0:c.$$unknownFieldCount)!=null?a:0;for(f=0;f<g.length;f++)l[f]&d(\"WAProtoConst\").FLAGS.REPEATED&&(s[g[f]]=[]);var t=0;c=k.length>0;a=k[0];while(b.size()){f=j(b,0,4294967296,\"field and enc type\",d(\"WABinary\").parseInt64OrThrow);var u=f&7,v=f>>>3;if(c&&v!==a){f=t;do++t===k.length&&(t=0),a=k[t];while(v!==a&&t!==f)}if(c&&v===a)(function(){var a=g[t],c=l[t];h(u,c,a);var f=c&d(\"WAProtoConst\").TYPE_MASK,j=m[t];if(c&d(\"WAProtoConst\").FLAGS.PACKED){var k=b.readVarInt(d(\"WABinary\").parseUint64OrThrow);k=b.readBinary(k);while(k.size()){var w=i(a,f,k);(f!==d(\"WAProtoConst\").TYPES.ENUM||j[w]||(j.cast==null?void 0:j.cast(w))!==void 0)&&s[a].push(w)}}else if(f===d(\"WAProtoConst\").TYPES.MESSAGE){w=b.readVarInt(d(\"WABinary\").parseUint64OrThrow);k=b.readBinary(w);if(c&d(\"WAProtoConst\").FLAGS.REPEATED)s[a].push(n(j,k,void 0,e));else{w=s[a];s[a]=n(j,k,w,e)}}else{k=i(a,f,b);(f!==d(\"WAProtoConst\").TYPES.ENUM||j[k]||(j.cast==null?void 0:j.cast(k))!==void 0)&&(c&d(\"WAProtoConst\").FLAGS.REPEATED?s[a].push(k):s[a]=k)}w=p[a];w&&typeof s[a]!==\"undefined\"&&w.forEach(function(b){b=o[b].filter(function(b){return b!==a});b.forEach(function(a){delete s[a]})});(q[v]||r[a])&&delete s[a]})();else{s.$$unknownFieldCount++;if(e){s.$$unsafeUnknownFields||(s.$$unsafeUnknownFields={});f=void 0;switch(u){case d(\"WAProtoConst\").ENC.VARINT:f=b.readVarInt(d(\"WABinary\").parseInt64OrThrow);break;case d(\"WAProtoConst\").ENC.BIT64:f=b.readBinary(8);break;case d(\"WAProtoConst\").ENC.BINARY:f=b.readBinary(b.readVarInt(d(\"WABinary\").parseUint64OrThrow));break;case d(\"WAProtoConst\").ENC.BIT32:f=b.readBinary(4);break}s.$$unsafeUnknownFields[v]=f}else u===d(\"WAProtoConst\").ENC.VARINT?b.readVarInt(d(\"WABinary\").parseInt64OrThrow):u===d(\"WAProtoConst\").ENC.BIT64?b.advance(8):u===d(\"WAProtoConst\").ENC.BINARY?b.advance(b.readVarInt(d(\"WABinary\").parseUint64OrThrow)):u===d(\"WAProtoConst\").ENC.BIT32&&b.advance(4)}}return s}function o(a){return a>=0?a:4294967296+a}g.decodeProtobuf=a;g.decodeProtobufWithUnknowns=b;g.getUnknownFields=e}),98);\n__d(\"MAWDbInitIndexedDb\",[\"MAWIndexedDb\",\"MWEARKeychainV3\",\"WALogger\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[DB INIT] REGULAR DB INIT\"]);h=function(){return a};return a}function a(){d(\"WALogger\").LOG(h());return d(\"MAWIndexedDb\").makeDB(d(\"MWEARKeychainV3\").getDbEncryptionKey,{enableDataSyncMiddleware:!0,enableMutationValidator:c(\"gkx\")(\"1627\")})}g.dbInit=a}),98);\n__d(\"MAWReStoreMigrationUtils\",[\"Deferred\",\"MAWDbObjEncryption\",\"MAWDbSchema.restore\",\"MWEARKeychainV3\",\"Promise\",\"WATagsLogger\",\"asyncToGeneratorRuntime\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error fetching batch: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"REQUESTING \",\"\"]);j=function(){return a};return a}var k=d(\"WATagsLogger\").TAGS([\"DBInit\",\"Migration\"]),l=new Map(d(\"MAWDbSchema.restore\").clientSchema.map(function(a){return[a.name,a]}));function a(a){return new(h||(h=b(\"Promise\")))(function(b,c){var d=indexedDB.open(a);d.onupgradeneeded=function(a){a.target.transaction.abort(),b(null)};d.onerror=function(a){c(\"Error opening database: \"+a.target.error)};d.onsuccess=function(a){a=a.target.result;b(a)}})}function e(a){var b=new(c(\"Deferred\"))();a=indexedDB.deleteDatabase(a);a.onsuccess=function(){return b.resolve()};a.onerror=function(a){return b.reject(a)};return b.getPromise()}function f(a,c){var e=a.transaction(\"appMeta\").objectStore(\"appMeta\");return new(h||(h=b(\"Promise\")))(function(a,b){var f=e.get(c);f.onsuccess=function(b){b=b.target.result;if(b==null){a();return}a(d(\"MAWDbObjEncryption\").decryptDbObj(b,\"appMeta\",d(\"MWEARKeychainV3\").getDbEncryptionKey))};f.onerror=function(a){k.LOG(j(),a),b(a)}})}function m(a,c,e){if(a==null)return(h||(h=b(\"Promise\"))).resolve();var f=a.transaction(\"appMeta\",\"readwrite\").objectStore(\"appMeta\");return new(h||(h=b(\"Promise\")))(function(a,b){var g;g=f.put(d(\"MAWDbObjEncryption\").encryptDbObj({key:c,value:(g={},g[c]=e,g)},\"appMeta\",d(\"MWEARKeychainV3\").getDbEncryptionKey));g.onsuccess=function(){a()};g.onerror=function(a){b(a)}})}function n(a,c){return new(h||(h=b(\"Promise\")))(function(b,d){var e=a.transaction(c).objectStore(c);e=e.count();e.onsuccess=function(a){b(a.target.result)};e.onerror=function(a){d(a)}})}function o(a,c){var d=\"e2ee_\"+c;c=l.get(d);return c==null?(h||(h=b(\"Promise\"))).resolve(-1):a.runInTransaction(function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=new WeakMap();a=(yield a[d].keys(b,\"asc\",void 0));b=0;var c=(yield a.next());while(!c.done)b++,c=(yield a.next());return b});return function(b){return a.apply(this,arguments)}}(),\"readonly\")}function p(a,d){var e=100,f=[];return new(h||(h=b(\"Promise\")))(function(b){if(d==null){b([]);return}var g=a==null?d.openCursor():d.openCursor(IDBKeyRange.lowerBound(a,!0));g.onsuccess=function(a){a=a.target.result;a&&f.length<e?(f.push([a.key,a.value]),a[\"continue\"]()):b(f)};g.onerror=function(a){k.ERROR(i(),a.target.error);throw c(\"err\")(\"Error opening cursor: \"+a.target.error)}})}function q(a,c){return new(h||(h=b(\"Promise\")))(function(b){var d=a.transaction([c],\"readwrite\"),e=d.objectStore(c);e.add({}).onsuccess=function(a){b(a.target.result);try{d.abort()}catch(a){}}})}g.getDBForMigration=a;g.deleteDB=e;g.fetchAppMetaKey=f;g.putAppMetaKey=m;g.indexedDBCount=n;g.restoreCount=o;g.fetchIDBBatch=p;g.getNextKey=q}),98);\n__d(\"LSQueryBulkUtils\",[\"ReQL\"],(function(a,b,c,d,e,f,g){\"use strict\";async function a(a,b){b=await Promise.all(b.map(function(b){return d(\"ReQL\").toArrayAsync(d(\"ReQL\").fromTableAscending(a).getKeyRange(b))}));return b.flat()}async function b(a,b){await Promise.all(b.map(function(b){return a.put(b)}));return b}g.bulkGetByIndex=a;g.bulkPut=b}),98);\n__d(\"MAWRestoreDbMigration\",[\"I64\",\"LSQueryBulkUtils\",\"MAWDbAppMeta\",\"MAWDbObjEncryption\",\"MAWDbSchema.restore\",\"MAWReStoreDbSetup\",\"MAWReStoreMigrationUtils\",\"MAWRestoreDbState\",\"MWEARKeychainV3\",\"WATagsLogger\",\"err\",\"gkx\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Incrementing failed migration counter: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Incrementing failure count as executeMigration returned false\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Marking DB as not needing migration in the future.\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Migration completed with status: \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Starting DB migration\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Previous migration attempt purged\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Purging previous migration attempt\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Skipping due to previous failures\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Migration is currently disabled, skipping the attempt\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Already migrated db, no need to migrate\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Skipping due to source db not existing\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Checking if we need to migrate the database\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Completing migration\"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Data counts match.... completing migration\"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Data moved, checking for consistency\"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Moving data\"]);x=function(){return a};return a}var y=d(\"WATagsLogger\").TAGS([\"DBInit\",\"Migration\"]),z=c(\"justknobx\")._(\"1864\"),A=c(\"justknobx\")._(\"1871\"),B=new Map(d(\"MAWDbSchema.restore\").clientSchema.map(function(a){return[a.name,a]})),C=function(a){return new Promise(function(b){return setTimeout(b,a)})};function D(){return d(\"MAWRestoreDbState\").getTargetDbState()===\"restore\"?!0:c(\"gkx\")(\"23908\")}async function E(a,b,c){if(b==null)return;var e=\"e2ee_\"+c,f=await d(\"MAWReStoreMigrationUtils\").fetchIDBBatch(null,b.transaction(c).objectStore(c)),g=B.get(e)||{},i=g.auto_increment;g=g.primary_key;g=(g=g)!=null?g:[];var j=g[0];g=async function(){var g=f.map(function(a){a[0];a=a[1];a=babelHelpers.extends({},d(\"MAWDbObjEncryption\").decryptDbObj(a,c,d(\"MWEARKeychainV3\").getDbEncryptionKey));j!=null&&i===!0&&(a[j]=(h||(h=d(\"I64\"))).of_int32(a[j]));return a});await a.runInTransaction(async function(a){await d(\"LSQueryBulkUtils\").bulkPut(a[e],g)},\"readwrite\");a.clearCacheIfSupported==null?void 0:a.clearCacheIfSupported();f=await d(\"MAWReStoreMigrationUtils\").fetchIDBBatch(f[f.length-1][0],b.transaction(c).objectStore(c))};while(f.length)await g();if(i===!0){g=await d(\"MAWReStoreMigrationUtils\").getNextKey(b,c);var k=(h||(h=d(\"I64\"))).of_int32(g);await a.runInTransaction(async function(a){var b;await a[e].add((b={},b[j]=k,b));await a[e].delete(k)},\"readwrite\")}}async function F(a,b,e){var f=Array.from(a.objectStoreNames).filter(function(a){return B.has(\"e2ee_\"+a)});y.LOG(x());e==null?void 0:e.addPoint(\"table-migration-start\");await f.reduce(function(c,d){return c.then(function(){return E(b,a,d)})},Promise.resolve());e==null?void 0:e.addPoint(\"table-migration-end\");y.LOG(w());e==null?void 0:e.addPoint(\"data-verification-start\");f=await f.reduce(function(c,e){return c.then(async function(c){var f=await Promise.all([d(\"MAWReStoreMigrationUtils\").indexedDBCount(a,e),d(\"MAWReStoreMigrationUtils\").restoreCount(b,e)]),g=f[0];f=f[1];b.clearCacheIfSupported==null?void 0:b.clearCacheIfSupported();return[].concat(c,[[e,g===f]])})},Promise.resolve([]));if(!f.every(function(a){a=a[1];return a})){f=f.filter(function(a){a=a[1];return!a}).map(function(a){a=a[0];return a});throw c(\"err\")(\"count mismatch: \"+f.join(\",\")+\" \")}y.LOG(v());e==null?void 0:e.addPoint(\"data-verification-end\");y.LOG(u());return!0}async function G(){var a;a=await ((a=navigator.storage)==null?void 0:a.estimate==null?void 0:a.estimate());return(a=a==null?void 0:a.usage)!=null?a:0}async function a(a,b,e){y.LOG(t());e==null?void 0:e.addPoint(\"open-source-db-start\");a=await d(\"MAWReStoreMigrationUtils\").getDBForMigration(a);e==null?void 0:e.addPoint(\"open-source-db-end\");e==null?void 0:e.addAnnotations({bool:{shouldRunMigration:a!=null},int:{storageSize:await G()}});if(a==null){y.LOG(s());e==null?void 0:e.addAnnotations({string:{migrationSkipReason:\"new-indexeddb\"}});return!0}var f=await Promise.all([d(\"MAWReStoreMigrationUtils\").fetchAppMetaKey(a,d(\"MAWDbAppMeta\").AppMetaKeysEnum.restoreMigrationAttempts),d(\"MAWReStoreMigrationUtils\").fetchAppMetaKey(a,d(\"MAWDbAppMeta\").AppMetaKeysEnum.hasMigratedFromDexie)]),g=f[0];f=f[1];g=(g=g==null?void 0:(g=g.value)==null?void 0:g.restoreMigrationAttempts)!=null?g:0;f=(f=f==null?void 0:(f=f.value)==null?void 0:f.hasMigratedFromDexie)!=null?f:!1;if(f===!0){y.LOG(r());e==null?void 0:e.addAnnotations({string:{migrationSkipReason:\"previously-migrated\"}});a.close();return!0}if(!D()){y.LOG(q());e==null?void 0:e.addAnnotations({string:{migrationSkipReason:\"migration-disabled\"}});a.close();return!1}if(g>A){e==null?void 0:e.addAnnotations({string:{migrationSkipReason:\"exceeded-max-attempts\"}});y.LOG(p());a.close();return!1}e==null?void 0:e.addPoint(\"checking-target-db-start\");f=await d(\"MAWReStoreMigrationUtils\").getDBForMigration(b);f!=null&&(y.LOG(o()),e==null?void 0:e.addAnnotations({bool:{purgedPreviousAttempt:!0}}),f.close(),await d(\"MAWReStoreDbSetup\").closeDB(),await d(\"MAWReStoreMigrationUtils\").deleteDB(b),y.LOG(n()));e==null?void 0:e.addPoint(\"checking-target-db-end\");try{y.LOG(m());f=await d(\"MAWReStoreDbSetup\").getDB();b=await Promise.race([C(z).then(function(){throw c(\"err\")(\"timeout\")}),F(a,f,e)]).then(function(a){return typeof a===\"boolean\"?a:!1});y.LOG(l(),b);b?(y.LOG(k()),await d(\"MAWReStoreMigrationUtils\").putAppMetaKey(a,d(\"MAWDbAppMeta\").AppMetaKeysEnum.hasMigratedFromDexie,!0)):(y.LOG(j()),await d(\"MAWReStoreMigrationUtils\").putAppMetaKey(a,d(\"MAWDbAppMeta\").AppMetaKeysEnum.restoreMigrationAttempts,g+1));return b}catch(b){a!=null&&(y.LOG(i(),b),await d(\"MAWReStoreMigrationUtils\").putAppMetaKey(a,d(\"MAWDbAppMeta\").AppMetaKeysEnum.restoreMigrationAttempts,g+1));throw b}finally{a==null?void 0:a.close()}}g.migrateToRestoreFromDexie=a}),98);\n__d(\"MAWDbInitReStore\",[\"MAWCurrentUser\",\"MAWIndexedDb\",\"MAWIndexedDbMetadata\",\"MAWReStoreDbSetup\",\"MAWReStoreMigrationUtils\",\"MAWRestoreDbMigration\",\"MAWRestoreDbState\",\"MAWSendQplToServer\",\"MWEARKeychainV3\",\"ReStoreIDBFactory\",\"WATagsLogger\",\"asyncToGeneratorRuntime\",\"promiseDone\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Running shimmed db init\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Running original db init\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to clean up restored db: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Cleaned up restored db\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to migrate to restore from dexie: \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"ReStore DB initializing\"]);m=function(){return a};return a}var n=d(\"WATagsLogger\").TAGS([\"DBInit\",\"ReStore\"]);function a(){return o.apply(this,arguments)}function o(){o=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){n.LOG(m());var a=d(\"MAWCurrentUser\").getID();a=d(\"MAWIndexedDbMetadata\").dbName(a);var e=d(\"MAWIndexedDbMetadata\").restoreDbName2(d(\"MAWCurrentUser\").getID()),f=d(\"MAWSendQplToServer\").startQplUserFlow(c(\"qpl\")._(1056845565,\"194\"),{string:{version:\"encrypted_dexie\"}}),g=!1;try{f.addPoint(\"migrate-db\"),g=(yield d(\"MAWRestoreDbMigration\").migrateToRestoreFromDexie(a,e,f)),f.endSuccess()}catch(a){f.endFail(\"\"+a),n.ERROR(l(),a)}d(\"MAWRestoreDbState\").setIsUsingShim(g);if(!g){c(\"promiseDone\")(b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){yield d(\"MAWReStoreDbSetup\").closeDB(),yield d(\"MAWReStoreMigrationUtils\").deleteDB(e)})(),function(){n.LOG(k())},function(a){n.ERROR(j(),a)});n.LOG(i());return d(\"MAWIndexedDb\").makeDB(d(\"MWEARKeychainV3\").getDbEncryptionKey,{enableDataSyncMiddleware:!0,shimEnabled:!1})}a=new(d(\"ReStoreIDBFactory\").ReStoreIDBFactory)(yield d(\"MAWReStoreDbSetup\").getDB());n.LOG(h());return d(\"MAWIndexedDb\").makeDB(void 0,{IDBKeyRange:d(\"ReStoreIDBFactory\").ReStoreIDBKeyRange,enableDataSyncMiddleware:!0,indexedDB:a,shimEnabled:!0})});return o.apply(this,arguments)}g.dbInit=a}),98);\n__d(\"MAWReStoreTiming\",[\"FBLogger\",\"MAWErrorObject\",\"MAWLLAMigrationUtils\",\"MAWQplProxy\",\"MAWReStoreDb\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=[\"MWPTransactor\"];function i(a){a=d(\"MAWLLAMigrationUtils\").getTransactorQPLParam(a);a=a.length===2?a:[null,void 0];var b=a[0];a=a[1];return b!=null?d(\"MAWQplProxy\").startQplUserFlow(b,a):null}var j=c(\"FBLogger\")(\"messenger_e2ee_web\");function k(a){if(a)return j.catching(a);else return j}function a(a,c){return b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var b=(yield d(\"MAWReStoreDb\").getDB()),e=i(a),f;try{e==null?void 0:e.addPoint(\"transactor_execution_start\");for(var g=arguments.length,j=new Array(g),l=0;l<g;l++)j[l]=arguments[l];f=(yield c.apply(void 0,[b].concat(j)));e==null?void 0:e.addPoint(\"transactor_execution_end\");e==null?void 0:e.endSuccess()}catch(b){var m;e==null?void 0:e.endFail(\"transaction_fail\");var n=d(\"MAWErrorObject\").getErrorObject(b);throw k(n).mustfixThrow(\"[%s] Error performing %s transaction\",h.join(\"|\"),(m=a)!=null?m:\"\")}return f})}g.measureDuration=a}),98);\n__d(\"MAWDbDeletedMessages\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\")({ChatDelete:\"chat_delete\",Revoke:\"revoke\"});f.DbDeletedMsgReasonEnum=a}),66);\n__d(\"MAWDbEditMsgHistory\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){return a}function b(a){return(h||(h=d(\"I64\"))).of_float(a)}function c(a){return(h||(h=d(\"I64\"))).to_float(a)}g.unsafeCoerceToEditMsgHistoryId=a;g.convertToEditMsgHistoryId64=b;g.convertToEditMsgHistoryId=c}),98);\n__d(\"MAWDbParticipant\",[\"MAWDbChatId\",\"MAWODSProxy\",\"WAJids\",\"WAOdsEnums\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.MAW_THREADID_DEPRECATION_DETAILS,key:\"craftParticipantId\"});return a+\"_\"+b}function b(a,b){return a+\"_\"+b}function c(a){a=a.split(\"_\");var b=d(\"MAWDbChatId\").unsafeCoerceToChatId(parseInt(a[0],10));a=d(\"WAJids\").unsafeCoerceToUserJid(a[1]);return{threadId:b,userJid:a}}g.craftParticipantId__DEPRECATED=a;g.craftParticipantId=b;g.getThreadIdAndUserJidFromParticipantId=c}),98);\n__d(\"MAWDbPendingStanza\",[\"WAAssertUnreachable\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"revoked\",i=\"deleteForMe\",j=\"deleteThread\";b=\"Revoked\";d=\"DeleteForMe\";e=\"DeleteThread\";f={DELETE_FOR_ME:d,DELETE_THREAD:e,REVOKED:b};function a(a){switch(a){case\"Revoked\":return h;case\"DeleteForMe\":return i;case\"DeleteThread\":return j;default:return c(\"WAAssertUnreachable\")(a)}}g.PENDING_REVOKED=h;g.PENDING_DELETE_FOR_ME=i;g.REVOKED=b;g.DELETE_FOR_ME=d;g.PENDING_TYPE=f;g.getPendingSuffix=a}),98);\n__d(\"MAWDbMsgTypeVersionTxns\",[\"MAWDbAppMeta\",\"MAWDexieTable\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){return a.appMeta.get({key:d(\"MAWDbAppMeta\").AppMetaKeysEnum.msgTypeVersion}).then(function(a){return a==null?void 0:a.value.msgTypeVersion})}function b(a,b){return a.appMeta.add({key:d(\"MAWDbAppMeta\").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:b}})}function c(a,b){return a.appMeta.put({key:d(\"MAWDbAppMeta\").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:b}})}function e(a,b){return a.appMeta.add({key:d(\"MAWDbAppMeta\").AppMetaKeysEnum.hmacKey,value:{hmacKey:b}})}function f(a){return a.appMeta.get({key:d(\"MAWDbAppMeta\").AppMetaKeysEnum.hmacKey}).then(function(a){return a==null?void 0:a.value.hmacKey})}function i(a,b){return a.appMeta.get({key:b})}function j(a,b){return a.appMeta.put({key:d(\"MAWDbAppMeta\").AppMetaKeysEnum.allowSecurityAlert,value:{allowSecurityAlert:b}}).then(function(){})}function k(a,b){return a.appMeta.put({key:d(\"MAWDbAppMeta\").AppMetaKeysEnum.allowSecurityAlertForSelf,value:{allowSecurityAlertForSelf:b}}).then(function(){})}function l(a){return i(a,d(\"MAWDbAppMeta\").AppMetaKeysEnum.allowSecurityAlert).then(function(a){return(a=a==null?void 0:a.value.allowSecurityAlert)!=null?a:!1})}function m(a){return i(a,d(\"MAWDbAppMeta\").AppMetaKeysEnum.allowSecurityAlertForSelf).then(function(a){return(a=a==null?void 0:a.value.allowSecurityAlertForSelf)!=null?a:!0})}function n(a,b){return a.appMeta.add({key:d(\"MAWDbAppMeta\").AppMetaKeysEnum.hotlikeSticker,value:{hotlikeSticker:b}})}function o(a){return d(\"MAWDexieTable\").dexieAll([m(a),l(a)]).then(function(a){var b=a[0];a=a[1];return{allowSecurityAlertForContact:a,allowSecurityAlertForSelf:b}})}g.MSG_TYPE_VERSION=(h=d(\"MAWDbAppMeta\")).AppMetaKeysEnum.msgTypeVersion;g.ALLOW_SECURITY_ALERT_FOR_CONTACT=h.AppMetaKeysEnum.allowSecurityAlert;g.ALLOW_SECURITY_ALERT_FOR_SELF=h.AppMetaKeysEnum.allowSecurityAlertForSelf;g.HOT_LIKE=h.AppMetaKeysEnum.hotlikeSticker;g.getMsgTypeVersion=a;g.addMsgTypeVersion=b;g.updateMsgTypeVersion=c;g.addHMACKey=e;g.getHMACKey=f;g.getAppMetaValue=i;g.updateSecurityAlertValueForContact=j;g.updateSecurityAlertValueForSelf=k;g.getSecuritySettingForContact=l;g.getSecuritySettingForSelf=m;g.addHotLike=n;g.maybeBulkGetSecuritySetting=o}),98);\n__d(\"MAWHMACKey\",[\"MAWCryptoConsts\",\"MAWDbMsgTypeVersionTxns\",\"MAWIndexedDb\",\"MAWKeychainUtil\",\"MAWSubtleCrypto\",\"MAWTransactionMode\",\"WABase64\",\"tweetnacl-auth\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=d(\"MAWKeychainUtil\").getBufferWithRandomValuesFromLength(d(\"MAWCryptoConsts\").HKDF_SEED_LENGTH_IN_BYTES);return i(a).then(function(a){return d(\"MAWSubtleCrypto\").MAWSubtleCrypto.exportKey(\"raw\",a)})}function a(a,b){a=new TextEncoder().encode(a);b=new Uint8Array(b);a=c(\"tweetnacl-auth\")(a,b);return d(\"WABase64\").encodeB64UrlSafe(a)}function b(){return h().then(function(a){return d(\"MAWIndexedDb\").makeMsgrTransactor({appMeta:d(\"MAWTransactionMode\").READWRITE},\"generateAndInsertHMACKey\",function(b){return function(){return d(\"MAWDbMsgTypeVersionTxns\").getHMACKey(b).then(function(c){return c!=null?c:d(\"MAWDbMsgTypeVersionTxns\").addHMACKey(b,a).then(function(){return a})})}})()})}function i(a){return d(\"MAWSubtleCrypto\").MAWSubtleCrypto.importKey(\"raw\",a,{hash:\"SHA-256\",name:\"HMAC\"},!0,[\"sign\"])}g.genHMACKey=h;g.hmacTweetNaCl=a;g.generateAndInsertHMACKey=b}),98);\n__d(\"WAConcurrentIterate\",[\"Promise\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f){\"use strict\";var g;function a(a,c,d){var e=[],f=[],h=0,i=function(){var d;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(h<a)){e.next=8;break}d=h;h++;e.next=5;return b(\"regeneratorRuntime\").awrap(c(d));case 5:f[d]=e.sent;e.next=0;break;case 8:case\"end\":return e.stop()}},null,this)};d=Math.min(a,d);for(var j=0;j<d;j++)e.push(i());return(g||(g=b(\"Promise\"))).all(e).then(function(){return f})}f.concurrentIterate=a}),66);\n__d(\"WATypedArraysCast\",[\"WABase64\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){if(b instanceof a)return b;return typeof b===\"string\"?new a(d(\"WABase64\").decodeB64(b)):new a(b)}g.castTypedArrays=a}),98);\n__d(\"WACryptoHmac\",[\"WACryptoDependencies\",\"WATypedArraysCast\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=32,i=new Uint8Array(h),j={name:\"HMAC\",hash:\"SHA-256\"},k={name:\"HMAC\",hash:\"SHA-512\"},l={name:\"HMAC\",hash:\"SHA-1\"};function m(a,b){b=d(\"WATypedArraysCast\").castTypedArrays(Uint8Array,b);return d(\"WACryptoDependencies\").getCrypto().subtle.importKey(\"raw\",b,a,!1,[\"sign\"]).then(function(b){return{key:b,algo:a}})}function a(a){return m(j,a)}function n(a,b,c){var e=a.key;a=a.algo;return d(\"WACryptoDependencies\").getCrypto().subtle.sign(a,e,b).then(function(a){return c!=null&&c!==0?a.slice(0,c):a})}function b(a,b){return m(j,a!=null?a:i).then(function(a){return n(a,b)})}function c(a,b,c){return m(j,a).then(function(a){return n(a,b,c)})}function e(a,b,c){return m(k,a).then(function(a){return n(a,b,c)})}function f(a,b,c){return m(l,a).then(function(a){return n(a,b,c)})}g.SHA256_BYTE_LENGTH=h;g.DEFAULT_SALT=i;g.encodeKeySha256=a;g.sign=n;g.extractSha256=b;g.hmacSha256=c;g.hmacSha512=e;g.hmacSha1=f}),98);\n__d(\"WAMediaCryptoSidecar\",[\"WAConcurrentIterate\",\"WACryptoHmac\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return a===\"video\"}function b(a){return a}var h=16,i=10,j=64*1024;function c(a,b,c){c===void 0&&(c=1);var e=b.buffer.byteLength;e=Math.ceil((e-h)\/j);var f=new Uint8Array(i*e);return d(\"WAConcurrentIterate\").concurrentIterate(e,function(c){var e=c*j,g=e+h+j;e=b.subarray(e,g);return d(\"WACryptoHmac\").sign(a,e).then(function(a){a=new Uint8Array(a,0,i);f.set(a,c*i)})},c).then(function(){return f.buffer})}g.shouldHaveStreamingSidecar=a;g.castToStreamingSidecar=b;g.calculateStreamingSidecar=c}),98);\n__d(\"WAMediaEntryData.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.internalSpec={fileSha256:[1,(e=d(\"WAProtoConst\")).TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64],serverMediaType:[6,e.TYPES.STRING],uploadToken:[7,e.TYPES.BYTES],validatedTimestamp:[8,e.TYPES.BYTES],sidecar:[9,e.TYPES.BYTES],objectId:[10,e.TYPES.STRING],fbid:[11,e.TYPES.STRING],downloadableThumbnail:[12,e.TYPES.MESSAGE,c],handle:[13,e.TYPES.STRING],filename:[14,e.TYPES.STRING],progressiveJpegDetails:[15,e.TYPES.MESSAGE,b]};b.internalSpec={scanLengths:[1,e.FLAGS.REPEATED|e.TYPES.UINT32],sidecar:[2,e.TYPES.BYTES]};c.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING]};g.MediaEntrySpec=a;g.MediaEntry$ProgressiveJpegDetailsSpec=b;g.MediaEntry$DownloadableThumbnailSpec=c}),98);\n__d(\"WAProgressiveJpegMarkers\",[],(function(a,b,c,d,e,f){\"use strict\";a=255;b=0;c={SOF0:192,SOF1:193,SOF2:194,SOF3:195,DHT:196,SOF5:197,SOF6:198,SOF7:199,JPG:200,SOF9:201,SOF10:202,SOF11:203,SOF13:205,SOF14:206,SOF15:207,RST0:208,RST1:209,RST2:210,RST3:211,RST4:212,RST5:213,RST6:214,RST7:215,SOI:216,EOI:217,SOS:218,DQT:219,DRI:221,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,APP15:239,COM:254,TEM:1};d=[b,c.RST0,c.RST1,c.RST2,c.RST3,c.RST4,c.RST5,c.RST6,c.RST7];f.MARKER_PREFIX=a;f.MARKER_ESCAPE_BYTE=b;f.MARKERS=c;f.SOS_STREAM=d}),66);\n__d(\"WAProgressiveJpegGetScanOffsets\",[\"WAProgressiveJpegMarkers\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Non-progressive JPEG marker found\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Ending marker found before end of image\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Scan found at offset \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Not a JPEG image\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"starting\"]);l=function(){return a};return a}var m=d(\"WATagsLogger\").TAGS([\"media\",\"progressiveJpegUtils\"]);function a(a){m.DEV(l());if(!n(a)){m.DEV(k());return[]}var b=[],c=2,e=\"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA\",f=null,g=0,r=!1,s=!1,t=!1;function u(){t=!1,m.DEV(j(),c-1),b.push(c-1)}while(c<a.byteLength){f=a[c];if(r){m.ERROR(i());return[]}switch(e){case\"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA\":f===d(\"WAProgressiveJpegMarkers\").MARKER_PREFIX&&(e=\"READ_MARKER_SECOND_BYTE\");break;case\"READ_MARKER_SECOND_BYTE\":if(f===d(\"WAProgressiveJpegMarkers\").MARKER_PREFIX)e=\"READ_MARKER_SECOND_BYTE\";else if(f===d(\"WAProgressiveJpegMarkers\").MARKER_ESCAPE_BYTE)e=\"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA\";else if(f===d(\"WAProgressiveJpegMarkers\").MARKERS.EOI)r=!0,t&&u();else if(!s&&p(f)){m.LOG(h());return[]}else o(f)?(s=!0,e=\"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA\"):(t&&u(),f===d(\"WAProgressiveJpegMarkers\").MARKERS.SOS&&(t=!0),q(f)?e=\"READ_SIZE_FIRST_BYTE\":e=\"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA\");break;case\"READ_SIZE_FIRST_BYTE\":e=\"READ_SIZE_SECOND_BYTE\";break;case\"READ_SIZE_SECOND_BYTE\":c+=g*256;c+=f;c-=2;e=\"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA\";break}c+=1;g=f}return b}function n(a){if(a.byteLength<=2)return!1;if(a[0]!==d(\"WAProgressiveJpegMarkers\").MARKER_PREFIX)return!1;return a[1]!==d(\"WAProgressiveJpegMarkers\").MARKERS.SOF2&&a[1]!==d(\"WAProgressiveJpegMarkers\").MARKERS.SOI?!1:!0}function o(a){return a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF2||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF6||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF10||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF14}function p(a){return a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF0||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF1||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF3||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF5||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF7||a===d(\"WAProgressiveJpegMarkers\").MARKERS.JPG||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF9||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF11||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF13||a===d(\"WAProgressiveJpegMarkers\").MARKERS.SOF15}function q(a){if(a===d(\"WAProgressiveJpegMarkers\").MARKERS.TEM)return!1;return a>=d(\"WAProgressiveJpegMarkers\").MARKERS.RST0&&a<=d(\"WAProgressiveJpegMarkers\").MARKERS.RST7?!1:a!==d(\"WAProgressiveJpegMarkers\").MARKERS.EOI&&a!==d(\"WAProgressiveJpegMarkers\").MARKERS.SOI}g.getProgressiveJpegScanOffsets=a}),98);\n__d(\"WAProgressiveJpegGetScanLengths\",[\"WAProgressiveJpegGetScanOffsets\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){a=d(\"WAProgressiveJpegGetScanOffsets\").getProgressiveJpegScanOffsets(a);return h(a)}function b(a){return a}function h(a){var b=[],c=0;for(var d=0;d<a.length;d++){var e=a[d];b.push(e-c);c=e}return b}g.getProgressiveJpegScanLengths=a;g.asProgressiveJpegScanLength=b}),98);\n__d(\"WAServerMediaType\",[\"WAAssertUnreachable\"],(function(a,b,c,d,e,f,g){\"use strict\";d=[\"image\",\"sticker\",\"ptt\",\"audio\",\"document\",\"video\",\"gif\",\"ppic\",\"md-app-state\",\"md-msg-hist\",\"kyc-id\",\"template\",\"thumbnail-image\",\"thumbnail-video\",\"thumbnail-gif\",\"thumbnail-document\",\"thumbnail-link\",\"payment-bg-image\",\"novi-video\",\"novi-image\",\"product\",\"product-catalog-image\",\"xma-image\",\"biz-cover-photo\",\"preview\",\"newsletter-audio\",\"newsletter-document\",\"newsletter-image\",\"newsletter-gif\",\"newsletter-ptt\",\"newsletter-sticker\",\"newsletter-thumbnail-link\",\"newsletter-video\"];function a(a){switch(a){case\"image\":case\"sticker\":case\"ptt\":case\"audio\":case\"document\":case\"video\":case\"gif\":case\"ppic\":case\"md-app-state\":case\"md-msg-hist\":case\"kyc-id\":case\"thumbnail-image\":case\"thumbnail-video\":case\"thumbnail-gif\":case\"thumbnail-document\":case\"thumbnail-link\":case\"payment-bg-image\":case\"novi-video\":case\"novi-image\":case\"template\":case\"product\":case\"product-catalog-image\":case\"xma-image\":case\"biz-cover-photo\":case\"preview\":case\"newsletter-audio\":case\"newsletter-document\":case\"newsletter-image\":case\"newsletter-gif\":case\"newsletter-ptt\":case\"newsletter-sticker\":case\"newsletter-thumbnail-link\":case\"newsletter-video\":return a;default:return null}}function b(a){switch(a){case\"Image\":return\"image\";case\"Video\":return\"video\";case\"Ptt\":return\"ptt\";case\"Gif\":return\"gif\";case\"Sticker\":return\"sticker\";case\"DocumentFile\":return\"document\";case\"Text\":case\"Futureproof\":case\"Ciphertext\":case\"Unavailable\":case\"ExpiredEphemeral\":case\"Admin\":case\"Revoked\":case\"DeleteForMe\":case\"EphemeralSettingAdmin\":case\"EphemeralSyncResponse\":case\"EphemeralSettingChangeFromCurrentDevice\":case\"AlertICDC\":case\"GroupInvite\":case\"SenderKeyDistribution\":case\"Reaction\":case\"EditAction\":return null;default:return c(\"WAAssertUnreachable\")(a)}}g.SERVER_MEDIA=d;g.castToServerMediaType=a;g.getMediaType=b}),98);\n__d(\"WAMediaUtils\",[\"Promise\",\"WABase64\",\"WACryptoDependencies\",\"WAErr\",\"WALongInt\",\"WAMediaCryptoSidecar\",\"WAMediaEntryData.pb\",\"WAProgressiveJpegGetScanLengths\",\"WAServerMediaType\",\"WATimeUtils\",\"decodeProtobuf\",\"encodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=new Uint8Array(32);d(\"WACryptoDependencies\").getCrypto().getRandomValues(a);return a.buffer}function j(a){return a}function a(){return i()}function k(a){return a}function e(a,b){return d(\"WABase64\").encodeB64UrlSafe(a,b)}function f(a){return a}function l(a){return a}function m(a){return a}function n(a){return a}function o(a,b){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,b);b=a.fileSha256;var c=a.mediaKey,e=a.fileEncSha256,f=a.directPath,g=a.mediaKeyTimestamp,h=a.sidecar,i=a.objectId,j=a.fbid,k=a.serverMediaType,l=a.downloadableThumbnail,m=a.filename;a=a.progressiveJpegDetails;return{fileSha256:b,mediaKey:c,fileEncSha256:e,directPath:f,mediaKeyTimestamp:g==null?null:d(\"WATimeUtils\").castToUnixTime(d(\"WALongInt\").numberOrThrowIfTooLarge(g)),sidecar:h&&d(\"WAMediaCryptoSidecar\").castToStreamingSidecar(h),objectId:i,fbid:j,downloadableThumbnail:l&&w(l),serverMediaType:k,filename:m,progressiveJpegDetails:a&&x(a)}}function p(a,b,c,e,f,g,h,i,j,k,l){a=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,{fileSha256:a,fileEncSha256:b,mediaKey:c,directPath:e,mediaKeyTimestamp:f,serverMediaType:g,objectId:h,fbid:i,downloadableThumbnail:j,filename:k,progressiveJpegDetails:l});return a.readByteArray()}function q(a){return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,a).readByteArray()}function r(a){return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,a).readByteArray()}function s(a,b){return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,babelHelpers[\"extends\"]({},a,{directPath:b})).readByteArray()}function t(a,b){return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,babelHelpers[\"extends\"]({},a,{downloadableThumbnail:babelHelpers[\"extends\"]({},a.downloadableThumbnail,{directPath:b})})).readByteArray()}function u(a,b){a=babelHelpers[\"extends\"]({},a,{fbid:b});return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,a).readByteArray()}function v(a,b){a=babelHelpers[\"extends\"]({},a,{objectId:b});return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,a).readByteArray()}function w(a){if(a==null)return null;a.$$unknownFieldCount;var b=babelHelpers.objectWithoutPropertiesLoose(a,[\"$$unknownFieldCount\"]);return babelHelpers[\"extends\"]({},b,{mediaKey:a.mediaKey&&j(a.mediaKey),mediaKeyTimestamp:a.mediaKeyTimestamp==null?null:d(\"WATimeUtils\").castToUnixTime(d(\"WALongInt\").numberOrThrowIfTooLarge(a.mediaKeyTimestamp))})}function x(a){if(a==null)return null;return a.scanLengths==null||a.sidecar==null?null:{sidecar:a.sidecar,scanLengths:a.scanLengths.map(function(a){return d(\"WAProgressiveJpegGetScanLengths\").asProgressiveJpegScanLength(d(\"WALongInt\").numberOrThrowIfTooLarge(a))})}}function y(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAMediaEntryData.pb\").MediaEntrySpec,a);var b=a.serverMediaType,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken,g=a.downloadableThumbnail,h=a.progressiveJpegDetails;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"serverMediaType\",\"mediaKey\",\"mediaKeyTimestamp\",\"uploadToken\",\"downloadableThumbnail\",\"progressiveJpegDetails\"]);var i=null;h!=null&&h.scanLengths!=null&&h.sidecar!=null&&(i={sidecar:h.sidecar,scanLengths:h.scanLengths.map(function(a){return d(\"WAProgressiveJpegGetScanLengths\").asProgressiveJpegScanLength(d(\"WALongInt\").numberOrThrowIfTooLarge(a))})});return babelHelpers[\"extends\"]({},a,{serverMediaType:b==null?null:d(\"WAServerMediaType\").castToServerMediaType(b),mediaKey:c&&j(c),mediaKeyTimestamp:e==null?null:d(\"WATimeUtils\").castToUnixTime(d(\"WALongInt\").numberOrThrowIfTooLarge(e)),uploadToken:f&&k(f),progressiveJpegDetails:i,downloadableThumbnail:g&&w(g)})}function z(a){return\"arrayBuffer\"in a&&typeof a.arrayBuffer===\"function\"?a.arrayBuffer():new(h||(h=b(\"Promise\")))(function(b,d){var e=new FileReader();e.onload=function(){var a=e.result;a instanceof ArrayBuffer?b(a):d(c(\"WAErr\")(\"blobToArrayBuffer got error becaues result is not ArrayBuffer\"))};e.onerror=function(){var a;a=((a=e.error)==null?void 0:a.name)||\"unknown\";d(c(\"WAErr\")(\"blobToArrayBuffer got error got error \"+a))};e.readAsArrayBuffer(a)})}function A(a){var b=\"image\/jpeg\";switch(a){case\"image\":b=\"image\/jpeg\";break;case\"ptt\":b=\"audio\/wav\";break;case\"video\":b=\"video\/mp4\";break;case\"gif\":b=\"image\/gif\";break;case\"sticker\":b=\"image\/webp\";break;case\"preview\":b=\"image\/jpeg\";break;case\"document\":b=\"application\/pdf\";break;case\"xma-image\":b=\"image\/jpeg\";break;default:throw c(\"WAErr\")(\"Unsupported server media type: \"+a)}return b}g.createMediaKey=i;g.castToMediaKey=j;g.createUploadToken=a;g.castToUploadToken=k;g.toPlaintextHash=e;g.stringToPlaintextHash=f;g.toHashedPlaintextHash=l;g.stringToDeliveryObjectId=m;g.stringToBackupEntFbid=n;g.mediaEntryDataToRawData=o;g.rawDataToMediaEntry=p;g.encodeMediaEntryForUpload=q;g.encodeMediaEntryForDownload=r;g.encodeMediaEntryWithUpdatedPath=s;g.encodeMediaEntryDownloadableThumbnailWithUpdatedPath=t;g.encodeMediaEntryWithUpdatedFbid=u;g.encodeMediaEntryWithUpdatedObjectId=v;g.convertMediaDownloadableThumbnailToDownloadableThumbnail=w;g.decodeMediaEntryData=y;g.blobToArrayBuffer=z;g.getMimeTypeFromServerMediaType=A}),98);\n__d(\"MAWMediaUtils\",[\"MAWDbMedia\",\"MAWDexieCastToPromise\",\"MAWGlobals\",\"MAWHMACKey\",\"WAMediaUtils\",\"WAMsgType\",\"WATimeUtils\",\"asyncToGeneratorRuntime\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){b===void 0&&(b=\"media\");switch(a){case d(\"MAWDbMedia\").MEDIA_TYPE.IMAGE:return b===\"xma-media\"?\"xma-image\":\"image\";case d(\"MAWDbMedia\").MEDIA_TYPE.VIDEO:return\"video\";case d(\"MAWDbMedia\").MEDIA_TYPE.PTT:return\"ptt\";case d(\"MAWDbMedia\").MEDIA_TYPE.GIF:return\"gif\";case d(\"MAWDbMedia\").MEDIA_TYPE.STICKER:return\"sticker\";case d(\"MAWDbMedia\").MEDIA_TYPE.DOCUMENT_FILE:return\"document\";default:throw c(\"err\")(\"get a wrong media file with type \"+a)}}function h(a){try{return d(\"WAMediaUtils\").blobToArrayBuffer(a).then(i)}catch(a){throw c(\"err\")(\"Got \"+a+\" when convert the blob to Uint8Array\")}}function i(a){return self.crypto.subtle.digest(\"SHA-256\",a).then(function(a){return new Uint8Array(a)})}function e(a){return j.apply(this,arguments)}function j(){j=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=(yield h(a));a=d(\"WAMediaUtils\").toPlaintextHash(a);var b=k(a);return[a,b]});return j.apply(this,arguments)}function k(a){var b=d(\"MAWGlobals\").getHMACKey();return d(\"WAMediaUtils\").toHashedPlaintextHash(d(\"MAWHMACKey\").hmacTweetNaCl(a,b))}function f(a){var b=\"preview-\"+d(\"WATimeUtils\").unixTime().toString()+\".jpeg\";return l(a,b,\"image\/jpeg\")}function l(a,b,c){return new File([new Blob([new Uint8Array(a)],{type:c})],b,{type:c})}function m(a,b){return d(\"MAWDexieCastToPromise\").dexieCastToPromise(a.messages.where(\"msgId\").anyOf(b.msgIds).filter(function(a){return a.type!==d(\"WAMsgType\").REVOKED}).toArray().then(function(a){a=a.map(function(a){return a.msgId});return babelHelpers[\"extends\"]({},b,{msgIds:a})}))}g.getServerMediaTypeFromMediaType=a;g.hashBlob=h;g.hashArrayBuffer=i;g.genBlobHashes=e;g.genHMACPlaintextHash=k;g.convertJpegThumbnailArrayBufferToFile=f;g.getBridgeMediaWithoutUnsentMessageIds=m}),98);\n__d(\"WAErrorMessage\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"NoErrorMessageProvided\";function a(a){var b;a instanceof Error?b=a.message:typeof a===\"string\"?b=a:typeof a===\"object\"?typeof (a==null?void 0:a.description)===\"string\"?b=a.description:typeof (a==null?void 0:a.message)===\"string\"?b=a.message:b=g:b=g;return b}f.NO_ERROR_MESSAGE_PROVIDED=g;f.maybeGetMessageFromError=a}),66);\n__d(\"MAWDbChunkTxns\",[\"MAWMediaUtils\",\"WAErrorMessage\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to add chunk. Possible duplicate? Will attempt a retry. Error: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to add chunk. Possible duplicate? Will attempt a retry. For hashedPlaintextHash: \",\". Error: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to add chunk after retry. Error: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to add chunk for hashedPlaintextHash: \",\". Error: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Chunk found after retry for hashedPlaintextHash: \",\"\"]);l=function(){return a};return a}var m=d(\"WATagsLogger\").TAGS([\"MAWDbChunkTxns\"]);b=function a(b,c,e,f,g){g===void 0&&(g=0);var n=d(\"MAWMediaUtils\").genHMACPlaintextHash(c);return b.chunk.where(\"hashedPlaintextHash\").equals(n).first().then(function(o){if(o){g>0&&m.LOG(l(),n);return o}else{var p={blobData:e,hashedPlaintextHash:n,mimetype:f,plaintextHash:c};return b.chunk.add(p).then(function(a){return babelHelpers[\"extends\"]({},p,{chunkId:a})})[\"catch\"](function(l){var o=d(\"WAErrorMessage\").maybeGetMessageFromError(l);if(g>0){m.WARN(k(),n,o);m.ERROR(j(),o);throw l}else{m.WARN(i(),n,o);m.ERROR(h(),o);return a(b,c,e,f,g+1)}})}})};c=function(a,b){return n(a,b).then(function(a){return a!=null})};var n=function(a,b){return a.chunk.where(\"hashedPlaintextHash\").equals(b).first()};e=function(a,b){return a.chunk.where(\"hashedPlaintextHash\").anyOf(b).toArray().then(function(a){return new Map(a.map(function(a){return[a.hashedPlaintextHash,a]}))})};function a(a,b){return a.chunk.bulkGet(b)}f=function(a,b){b=d(\"MAWMediaUtils\").genHMACPlaintextHash(b);return a.chunk.get({hashedPlaintextHash:b})};g.getOrCreateMediaChunk=b;g.hasMediaChunk=c;g.maybeGetChunkFromHash=n;g.maybeBulkGetChunksFromHash=e;g.bulkGetChunks=a;g.maybeGetChunkByPlaintextHash=f}),98);\n__d(\"MAWJidUtils\",[\"FBLogger\",\"WAGlobals\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b,e){if(d(\"WAJids\").isAuthorSystem(a)||b==null||e==null){c(\"FBLogger\")(\"messenger_e2ee_web\").warn(\"Failed to create protocolMsgId with externalId %s for a msg to edit\",e);return}return{author:a,chat:b,externalId:e}}function a(a){var b;return h(a.author,a.threadJid,(b=a.externalId)!=null?b:a.editExternalId)}function b(a){return d(\"WAJids\").isAuthorMe(a)?d(\"WAGlobals\").getMyUserJid():a}g.maybeToProtocolMsgId=h;g.toProtocolMsgId=a;g.getAuthorJid=b}),98);\n__d(\"MAWLoadReplyMediaTxns\",[\"MAWDbChunkTxns\",\"MAWDbMedia\",\"MAWDbMsg\",\"MAWDbXMATxns\",\"MAWDexieTable\",\"MAWGlobals\",\"MAWJidUtils\",\"MAWMsgType\",\"MAWXMAUtils\",\"WAAssertUnreachable\",\"WAJids\",\"WALogger\",\"WAMsgType\",\"WAResultOrError\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Unable to fetch reply media XMA with id \",\": \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Unable to fetch reply media with id \",\": \",\"\"]);i=function(){return a};return a}function j(a,b){return a.media.get(b).then(function(b){return b==null?[void 0,void 0]:d(\"MAWDbChunkTxns\").maybeGetChunkFromHash(a,b.hashedPlaintextHash).then(function(a){return a==null?[void 0,b]:[a,b]})})}var k=new Set([(e=d(\"MAWDbMedia\")).MEDIA_TYPE.IMAGE,e.MEDIA_TYPE.GIF,e.MEDIA_TYPE.PTT,e.MEDIA_TYPE.STICKER,e.MEDIA_TYPE.VIDEO,e.MEDIA_TYPE.DOCUMENT_FILE]);function l(a){var b;switch(a.mediaType){case d(\"MAWDbMedia\").MEDIA_TYPE.IMAGE:case d(\"MAWDbMedia\").MEDIA_TYPE.GIF:case d(\"MAWDbMedia\").MEDIA_TYPE.STICKER:b=a.validatedImageInfo;break;case d(\"MAWDbMedia\").MEDIA_TYPE.VIDEO:b=a.validatedVideoInfo;break}a=b||{};var c=a.jpegThumbnailHeight;a=a.jpegThumbnailWidth;return{replyMediaPreviewHeight:c,replyMediaPreviewWidth:a}}function m(a){switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.IMAGE:case d(\"MAWMsgType\").MSG_TYPE.VIDEO:case d(\"MAWMsgType\").MSG_TYPE.PTT:case d(\"MAWMsgType\").MSG_TYPE.GIF:case d(\"MAWMsgType\").MSG_TYPE.STICKER:case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:return!0;case d(\"MAWMsgType\").MSG_TYPE.XMA:return d(\"MAWXMAUtils\").isXMAShare(a.xmaMessageType);case d(\"MAWMsgType\").MSG_TYPE.TEXT:case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.REVOKED:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"WAMsgType\").NOTE_REPLY:return!1;default:return c(\"WAAssertUnreachable\")(a.type)}}function n(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():j(a,b).then(function(a){var c=a[0];a=a[1];if(a==null)return d(\"WAResultOrError\").makeError(\"reply_media_not_found\");if(!k.has(a.mediaType))return d(\"WAResultOrError\").makeError(\"reply_media_type_unknown\");a=l(a);var e=a.replyMediaPreviewHeight;a=a.replyMediaPreviewWidth;var f;c!=null&&(f=c.mimetype);return d(\"WAResultOrError\").makeResult({replyMediaId:b,replyMediaPreviewHeight:e,replyMediaPreviewWidth:a,replyMediaUrlMimeType:f})}).then(function(a){if(a.success!==!0){d(\"WALogger\").ERROR(i(),b,a.error);return}return a.value})}function o(a,b){var c=b.defaultPreviewMediaId;return c==null?d(\"MAWDexieTable\").dexieResolve({replyXMAId:b.xmaId}):j(a,c).then(function(a){var c=a[0];a=a[1];if(c==null||a==null)return d(\"WAResultOrError\").makeError(\"reply_xma_media_not_found\");if(!k.has(a.mediaType))return d(\"WAResultOrError\").makeError(\"reply_xma_media_type_unknown\");a=l(a);var e=a.replyMediaPreviewHeight;a=a.replyMediaPreviewWidth;return d(\"WAResultOrError\").makeResult({replyMediaPreviewHeight:e,replyMediaPreviewWidth:a,replyMediaUrlMimeType:c.mimetype,replyXMAId:b.xmaId})}).then(function(a){if(a.success!==!0){d(\"WALogger\").ERROR(h(),b.xmaId,a.error);return}return a.value})}function a(a,b){var c,e;c=((c=b.quote)==null?void 0:c.content)||{};var f=c.author,g=c.externalId,h=c.mediaId;c=c.xmaMessageType;if(((e=b.quote)==null?void 0:e.content)==null||!m((e=b.quote)==null?void 0:e.content))return d(\"MAWDexieTable\").dexieResolve();e=b.threadJid;b=f===d(\"MAWGlobals\").getMyUserJid();b=b?d(\"WAJids\").AUTHOR_ME:f;return d(\"MAWXMAUtils\").isXMAShare(c)?p(a,d(\"MAWJidUtils\").maybeToProtocolMsgId(b,e,g)):n(a,h)}function p(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():d(\"MAWDbXMATxns\").maybeGetXMAFromProtocolMsgId(a,b).then(function(b){if(b==null||d(\"MAWXMAUtils\").isXMAExpired(b.isTombstoned,b.targetExpiringAtSec))return;return o(a,b)})}function b(a,b){var c=b.author,e=b.externalId,f=b.mediaId,g=b.threadJid,h=b.xmaMessageType;h=d(\"MAWXMAUtils\").isXMAShare(h);return!d(\"MAWDbMsg\").isMediaMsg(b)&&!h?d(\"MAWDexieTable\").dexieResolve():h?p(a,d(\"MAWJidUtils\").maybeToProtocolMsgId(c,g,e)):n(a,f)}g.isMediaReplyContent=m;g.getReplyMediaForMsgQuote=a;g.getReplyMediaForMsg=b}),98);\n__d(\"WAMsgMap\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(){function a(a){var b=this;this.$1=new Map();a==null?void 0:a.forEach(function(a){var c=a[0];a=a[1];b.set(c,a)})}var b=a.prototype;b.clear=function(){this.$1.clear()};b[\"delete\"]=function(a){var b;(b=this.$1.get(a.externalId))==null?void 0:(b=b.get(a.author))==null?void 0:b[\"delete\"](a.chat)};b.get=function(a){var b;return(b=this.$1.get(a.externalId))==null?void 0:(b=b.get(a.author))==null?void 0:b.get(a.chat)};b.has=function(a){var b;return(b=(b=this.$1.get(a.externalId))==null?void 0:(b=b.get(a.author))==null?void 0:b.has(a.chat))!=null?b:!1};b.set=function(a,b){var c,d;c=(c=this.$1.get(a.externalId))!=null?c:new Map();this.$1.has(a.externalId)||this.$1.set(a.externalId,c);d=(d=c.get(a.author))!=null?d:new Map();c.has(a.author)||c.set(a.author,d);d.set(a.chat,b);return this};b.keys=function(){var a=[],b=this.$1;for(var c=b.keys(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f,g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;f=(f=b.get(g))!=null?f:new Map();for(var h=f.keys(),i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k=(k=f.get(l))!=null?k:new Map();for(var k=k.keys(),m=Array.isArray(k),n=0,k=m?k:k[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var o;if(m){if(n>=k.length)break;o=k[n++]}else{n=k.next();if(n.done)break;o=n.value}o=o;a.push({externalId:g,author:l,chat:o})}}}return a};b.entries=function(){var a=[],b=this.$1;for(var c=b.keys(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f,g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;f=(f=b.get(g))!=null?f:new Map();for(var h=f.keys(),i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k=(k=f.get(l))!=null?k:new Map();for(var m=k.keys(),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}p=p;var q=k.get(p);q!=null&&a.push([{externalId:g,author:l,chat:p},q])}}}return a};b.values=function(){return this.entries().map(function(a){return a[1]})};return a}();f.MsgMap=a}),66);\n__d(\"MAWDbMsgUtil\",[\"WAJids\",\"WALogger\",\"WAMsgMap\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Invalid author when converting msg array to map\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Missing jid prevents adding message to array map\"]);i=function(){return a};return a}function a(a){return a.reduce(function(a,b){var c=b.threadJid;if(c==null){d(\"WALogger\").ERROR(i());return a}if(b.author===\"@system\"){d(\"WALogger\").ERROR(h());return a}a.set({author:b.author,chat:c,externalId:b.externalId},b);return a},new(d(\"WAMsgMap\").MsgMap)())}function b(a){return d(\"WAJids\").isAuthorSystem(a.author)||a.threadJid==null?null:{author:a.author,chat:a.threadJid,externalId:a.externalId}}g.convertMsgArrayToMap=a;g.getProtocolMsgIdFromDbMsg=b}),98);\n__d(\"MAWDbUnrenderedMsgTxns\",[\"MAWAckLevel\",\"MAWDbMsg\",\"MAWDbMsgUtil\",\"MAWDexieTable\",\"WAJids\",\"WALogger\",\"WAMsgMap\",\"WAResultOrError\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"bulkUpdateSystemAck on sent message\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"bulkUpdateSystemAck on incoming message\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"updateSystemAckForUnrenderedMsg on non existing message\"]);j=function(){return a};return a}function a(a,b){var c=b.author,e=b.chat,f=b.externalId;return a.threads.get({jid:e}).then(function(b){return b==null?d(\"WAResultOrError\").makeError(\"missing_thread_unrendered_msg\"):k(a,f,b.chatId,c).then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing_unrendered_msg\"):d(\"WAResultOrError\").makeResult(a)})})}function b(a,b){var c=b.map(function(a){a=a.externalId;return a});return a.unrenderedMessages.where(\"externalId\").anyOf(c).toArray().then(function(a){var c=d(\"MAWDbMsgUtil\").convertMsgArrayToMap(a),e=new(d(\"WAMsgMap\").MsgMap)();b.forEach(function(a){var b=c.get(a);b!=null&&e.set(a,b)});return e})}function k(a,b,c,d){return a.unrenderedMessages.where(\"externalId\").equals(b).filter(function(a){return a.author===d&&a.thread===c}).first()}function l(a,b){return a+\"_\"+b}function c(a,b){var c=b.map(function(a){a=a.externalId;return a}),e=Array.from(new Set(b.map(function(a){return a.chat})));return d(\"MAWDexieTable\").dexieAll([a.threads.where(\"jid\").anyOf(e).toArray(),a.unrenderedMessages.where(\"externalId\").anyOf(c).toArray()]).then(function(a){var c=a[0];a=a[1];if(a.length===0||c.length===0)return{msgs:[],threadIdToJid:new Map()};var d=new Map();c.forEach(function(a){return d.set(a.chatId,a.jid)});var e=new Map();b.forEach(function(a){var b=a.author,c=a.chat;a=a.externalId;var d=e.get(a)||new Set();d.add(l(b,c));e.set(a,d)});return{msgs:a.filter(function(a){var b=a.author,c=a.externalId;a=a.thread;a=d.get(a);c=e.get(c);return c!=null&&a!=null&&c.has(l(b,a))}),threadIdToJid:d}})}function e(a,b,c){return m(a,[{ack:c,msgId:b}]).then(function(a){a=a[0];if(a==null){d(\"WALogger\").LOG(j());return null}return a})}function m(a,b){var c=b.map(function(a){return a.msgId}),e=new Map();b.forEach(function(a){return e.set(a.msgId,{ack:a.ack})});return a.unrenderedMessages.where(\"msgId\").anyOf(c).toArray().then(function(b){if(b.length===0)return b;var c=[],f=[];b.forEach(function(a){var b;if(a.author!==d(\"WAJids\").AUTHOR_ME){d(\"WALogger\").ERROR(i());c.push(a);return}if(a.ack>d(\"MAWAckLevel\").ACK.clock){d(\"WALogger\").LOG(h());c.push(a);return}b=(b=e.get(a.msgId))==null?void 0:b.ack;if(b==null)return null;a=babelHelpers[\"extends\"]({},a,{ack:b});b===d(\"MAWAckLevel\").ACK.sent&&delete a.resendCount;f.push(a)});return a.unrenderedMessages.bulkPut(f).then(function(){return[].concat(f,c)})})}function f(a,b){b=b.map(function(b){return a.unrenderedMessages.get({msgId:b})});return d(\"MAWDexieTable\").dexieAll(b)}function n(a,b){return a.unrenderedMessages.where(\"msgId\").between(d(\"MAWDbMsg\").msgIdsInChatLowerBound(b.chatId),d(\"MAWDbMsg\").msgIdsInChatUpperBound(b.chatId)).last().then(function(a){a=a==null?0:d(\"MAWDbMsg\").getInChatMsgIdFromMsgId(a.msgId);return a+1})}g.maybeGetUnrenderedMsgByProtocolMsgId=a;g.getUnrenderedMsgMapByProtocolMsgId=b;g.maybeGetUnrenderedMsgByExternalId=k;g.getUnrenderedMsgsByProtocolMsgId=c;g.updateSystemAckForUnrenderedMsg=e;g.bulkUpdateSystemAckForUnrenderedMsgs=m;g.getUnrenderedMsgsByMsgIds=f;g.getNextUnrenderedMsgIdNumberForThread=n}),98);\n__d(\"MAWDbMsgTxns\",[\"MAWAckLevel\",\"MAWBridgeMsg\",\"MAWDbMsg\",\"MAWDbMsgUtil\",\"MAWDbUnrenderedMsgTxns\",\"MAWDbXMATxns\",\"MAWDexieTable\",\"MAWEBUploadTrackingUtils\",\"MAWIndexedDb\",\"MAWJidUtils\",\"MAWLoadReplyMediaTxns\",\"MAWMsgType\",\"MAWSharedMsgIdUtil\",\"MAWUpdateThreadMsgMetadataApi\",\"ODS\",\"Random\",\"WAGlobals\",\"WAJids\",\"WALogger\",\"WAMsgMap\",\"WAResultOrError\",\"WATimeUtils\",\"err\",\"gkx\",\"justknobx\",\"nullthrows\",\"promiseDone\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Successfull deleted \",\" messages\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"updateMediaId on message \",\" that already has this mediaId \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Replacing mediaId for message with pre-existing media. type=\",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"updateMediaId on message \",\" that already has this mediaId \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"getFutureproofMsg gets a message \",\" with unsupported type \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Inconsistent getMsgsFromOffset return between legacy and v2. Reason: \",\".\\n    Thread chatId: \",\", jid: \",\".\\n    Legacy result length: \",\", V2 result length: \",\".\\n    Legacy result first sortOrderMs: \",\".\\n    Legacy result last sortOrderMs: \",\".\\n    V2 result first sortOrderMs: \",\".\\n    V2 result last sortOrderMs: \",\".\\n    Input params: offsetMsgId: \",\", numMsgs: \",\", includeOffset: \",\", includeExpired: \",\", direction: \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"getMsgsFromOffsetV2 newest msg thread jid is not equal to thread jid.\\n            msg.threadJid: \",\",\\n            msg.thread: \",\",\\n            thread.jid: \",\",\\n            thread.chatId: \",\",\\n            threadId: \",\",\\n            offsetMsgId: \",\".\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Invalid sortOrder in getMsgsFromOffset. Offset msg sortOrderMs out of bound - oldest: \",\"(msgType=\",\"), offset: \",\"(msgType=\",\"), newest: \",\"(msgType=\",\"). Thread chatId: \",\".\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Invalid sortOrder in getMsgsFromOffset. Some msg has null sortOrderMs - oldest: \",\"(msgType=\",\"), offset: \",\"(msgType=\",\"), newest: \",\"(msgType=\",\"). Thread chatId: \",\".\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Invalid sortOrder in getMsgsFromOffset. Some msg is null - oldest: \",\", newest: \",\", offset: \",\". Thread chatId: \",\".\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"maybeUpdateThreadMsgsForUndefinedOldestOrNewestMsgs fixes an incorrect newest\/oldest values:\\n    thread id: \",\", thread jid: \",\", oldestMsgId: \",\", newestMsgId: \",\",\\n    validOldestMsg: \",\", validNewestMsg: \",\"\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"bulkUpdateSystemAck on sent message\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"bulkUpdateSystemAck on incoming message\"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose([\"updateSystemAck on non existing message\"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[maybeGetMsgByExternalId] Found \",\" messages with external id \",\"\"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[maybeGetMsgByProtocolMsgId] Suspected multiple instances of same message!\"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[maybeGetMsgByProtocolMsgId] Can't have \",\" messages with the same protocolMsgId!\"]);y=function(){return a};return a}var z=c(\"gkx\")(\"289\");function A(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():a.messages.get({msgId:b})}function a(a,b){return c(\"qex\")._(\"867\")===!0?a.messages.where(\"threadJid\").equals(b.jid).count().then(function(a){return a===0}):d(\"MAWDexieTable\").dexieResolve(b.newestMsgTs==null)}function B(a,b,c,d){return a.messages.where([\"threadJid\",\"sortOrderMs\"]).between([b,Number.MIN_SAFE_INTEGER],[b,Number.MAX_SAFE_INTEGER],c,d)}function C(a,b){return B(a,b,!1,!1).last()}function b(a,b){return c(\"qex\")._(\"867\")===!0?C(a,b.jid).then(function(a){return a}):A(a,b.newestMsg)}function e(a,b){return c(\"qex\")._(\"867\")===!0?C(a,b.jid).then(function(a){return a==null?void 0:a.msgId}):d(\"MAWDexieTable\").dexieResolve(b.newestMsg)}function f(a,b){return c(\"qex\")._(\"867\")===!0?C(a,b.jid).then(function(a){return(a==null?void 0:a.sortOrderMs)==null?null:d(\"WATimeUtils\").castToMillisTime(a.sortOrderMs)}):d(\"MAWDexieTable\").dexieResolve(b.newestMsgTs==null?b.newestMsgTs:b.newestMsgTs)}function D(a,b,c){return B(a,b,!1,!1).reverse().limit(c).toArray()}function E(a,b){return B(a,b,!1,!1).first()}function F(a,b){return c(\"qex\")._(\"867\")===!0?E(a,b.jid).then(function(a){return a}):A(a,b.oldestMsg)}function G(a,b){return c(\"qex\")._(\"867\")===!0?E(a,b.jid).then(function(a){return a==null?void 0:a.msgId}):d(\"MAWDexieTable\").dexieResolve(b.oldestMsg)}function H(a,b,c,d){return a.messages.where(\"[thread+serverTs]\").between([b,Number.MIN_SAFE_INTEGER],[b,Number.MAX_SAFE_INTEGER],c,d)}function I(a,b){return H(a,b,!1,!1).last()}function J(a,b,c){return H(a,b,!1,!1).reverse().limit(c).toArray()}function K(a,b){return a.messages.where(\"externalId\").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).toArray().then(function(a){if(a.length>1){var b=a.map(function(a){var b;return a.type+\":\"+((b=a.serverTs)!=null?b:0).toString()+\":\"+((b=a.ts)!=null?b:0).toString()});b=new Set(b).size===1;!b?d(\"WALogger\").ERROR(y(),a.length):d(\"WALogger\").ERROR(x())}return a[0]})}function L(a,b){return a.messages.where(\"msgId\").equals(b).toArray()}function M(a,b){return P(a,b).then(function(a){return a.success?a:a})}function N(a,b){var c=b.map(function(a){a=a.externalId;return a});return a.messages.where(\"externalId\").anyOf(c).toArray().then(function(a){var c=d(\"MAWDbMsgUtil\").convertMsgArrayToMap(a),e=new(d(\"WAMsgMap\").MsgMap)();b.forEach(function(a){var b=c.get(a);b!=null&&e.set(a,b)});return e})}function O(a,b){return a.messages.where(\"msgId\").equals(b).first().then(function(a){return a==null?void 0:a.sortOrderMs})}function P(a,b){var c=b.author,e=b.chat,f=b.externalId;return a.threads.get({jid:e}).then(function(b){return b==null?d(\"WAResultOrError\").makeError(\"missing_thread_msg\"):Q(a,f,b.chatId,c).then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing_msg\"):d(\"WAResultOrError\").makeResult(a)})})}function aa(a,b){var c=b.author,d=b.chat,e=b.externalId;return a.threads.get({jid:d}).then(function(b){if(b==null)return;return a.messages.where(\"revokedExternalId\").equals(e).filter(function(a){return a.author===c&&a.thread===b.chatId&&a.type===\"Revoked\"}).first()})}function Q(a,b,c,e){return a.messages.where(\"externalId\").equals(b).filter(function(a){return a.author===e&&a.thread===c}).toArray().then(function(a){a.length>1&&d(\"WALogger\").ERROR(w(),a.length,b);return a[0]})}function ba(a,b,c,e){var f=a.messages.where(\"revokedExternalId\").equals(b).filter(function(a){return a.author===e&&a.thread===c&&a.type===d(\"MAWMsgType\").MSG_TYPE.REVOKED}).first();a=d(\"MAWDbUnrenderedMsgTxns\").maybeGetUnrenderedMsgByExternalId(a,b,c,e).then(function(a){if((a==null?void 0:a.type)===d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME)return a});return d(\"MAWDexieTable\").dexieAll([f,a]).then(function(a){var b=a[0];a=a[1];return b!=null||a!=null})}function ca(a,b){var c=new Array(b.length),e=new Set();b.forEach(function(a){c.push(a.externalId),e.add(d(\"MAWSharedMsgIdUtil\").convertWAMsgIdToStringId(a))});return a.messages.where(\"externalId\").anyOf(c).filter(function(a){return e.has(d(\"MAWSharedMsgIdUtil\").convertWAMsgIdToStringId({author:a.author,chat:a.threadJid,externalId:a.externalId}))}).toArray()}function da(a,b,c,e,f){return R(a,[{ack:c,msgId:b,reportingMeta:f,serverTs:e}]).then(function(a){a=a.find(function(a){return a.msgId===b});if(a==null){d(\"WALogger\").LOG(v());return null}return a})}function R(a,b){var e=b.map(function(a){return a.msgId});return d(\"MAWDbXMATxns\").getXMAMsgIdsFromAssociatedMsgIds(a,e).then(function(f){var g=new Map();b.forEach(function(a){g.set(a.msgId,{ack:a.ack,reportingMeta:a.reportingMeta,serverTs:a.serverTs});var b=f.get(a.msgId);b!=null&&g.set(b,{ack:a.ack,reportingMeta:a.reportingMeta,serverTs:a.serverTs})});var h=Array.from(new Set(e.concat(Array.from(f.values()))));return a.messages.where(\"msgId\").anyOf(h).toArray().then(function(b){if(b.length===0)return b;var e=[],f=[];b.forEach(function(a){var b,c;if(a.author!==d(\"WAJids\").AUTHOR_ME){d(\"WALogger\").ERROR(u());e.push(a);return}if(a.ack>d(\"MAWAckLevel\").ACK.clock){d(\"WALogger\").LOG(t());e.push(a);return}b=(b=g.get(a.msgId))==null?void 0:b.ack;c=(c=g.get(a.msgId))==null?void 0:c.serverTs;if(b==null)return null;var h=babelHelpers[\"extends\"]({},a,{ack:b});c!=null&&(h.serverTs=c);a=(c=g.get(a.msgId))==null?void 0:c.reportingMeta;a!=null&&(h.reportingMeta=a);b===d(\"MAWAckLevel\").ACK.sent&&delete h.resendCount;f.push(h);d(\"WAGlobals\").getConfig().useEbUploadQueue()||d(\"MAWEBUploadTrackingUtils\").maybeStartTrackingForMiddleware(h,\"send\")});return a.messages.bulkPut(f).then(function(){return d(\"MAWDexieTable\").dexieAll(f.map(function(b){return d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsgQuote(a,b)}))}).then(function(a){c(\"qex\")._(\"1210\")!==!0&&f.forEach(function(b,c){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(b,void 0,a[c])})});return[].concat(f,e)})})})}function ea(a,b,e,f){return a.threads.get(b).then(function(g){if(g==null||f==null||g.oldestMsg!==e&&g.newestMsg!==e)return;var h=c(\"gkx\")(\"289\")?[a.messages.where([\"threadJid\",\"sortOrderMs\"]).above([g.jid,f]).first(),a.messages.where([\"threadJid\",\"sortOrderMs\"]).below([g.jid,f]).last()]:[a.messages.where(\"msgId\").above(e).first(),a.messages.where(\"msgId\").below(e).last()];return d(\"MAWDexieTable\").dexieAll(h).then(function(c){var f=c[0];c=c[1];return a.threads.update(b,{newestMsg:g.newestMsg===e?c==null?void 0:c.msgId:g.newestMsg,newestMsgTs:g.newestMsg===e?(c==null?void 0:c.ts)==null?null:d(\"WATimeUtils\").castUnixTimeToMillisTime(c.ts):g.newestMsgTs,oldestMsg:g.oldestMsg===e?f==null?void 0:f.msgId:g.oldestMsg}).then(function(){})})})}function S(a,b,e,f,g){if(b===(e==null?void 0:e.msgId)&&f===(g==null?void 0:g.msgId))return d(\"MAWDexieTable\").dexieResolve();d(\"WALogger\").ERROR(s(),a.chatId,a.jid,b,f,e==null?void 0:e.msgId,g==null?void 0:g.msgId);d(\"MAWIndexedDb\").afterTransactionEffect(function(){c(\"promiseDone\")(c(\"MAWUpdateThreadMsgMetadataApi\")(a,b,e,f,g))})}function fa(a,b,c,e){var f;if(b==null||c==null||e==null){d(\"WALogger\").ERROR(r(),b==null,c==null,e==null,a);return{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]}}if(c.sortOrderMs==null||e.sortOrderMs==null){d(\"WALogger\").ERROR(q(),b==null?void 0:b.sortOrderMs,b==null?void 0:b.type,e==null?void 0:e.sortOrderMs,e==null?void 0:e.type,c==null?void 0:c.sortOrderMs,c==null?void 0:c.type,a);return{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]}}if(e.sortOrderMs>c.sortOrderMs||e.sortOrderMs<((f=b.sortOrderMs)!=null?f:0)){d(\"WALogger\").ERROR(p(),b==null?void 0:b.sortOrderMs,b==null?void 0:b.type,e==null?void 0:e.sortOrderMs,e==null?void 0:e.type,c==null?void 0:c.sortOrderMs,c==null?void 0:c.type,a);return{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]}}}function T(a,b,e,f,g,h,i){g===void 0&&(g=!1);h===void 0&&(h=!1);i===void 0&&(i=\"before\");return f===0?d(\"MAWDexieTable\").dexieResolve({hasMoreAfter:!1,hasMoreBefore:!1,msgs:[],threadJid:null}):d(\"MAWDexieTable\").dexieAll([a.threads.get(b),e==null?d(\"MAWDexieTable\").dexieResolve(null):a.messages.get({msgId:e})]).then(function(j){var k=j[0],l=j[1],m=k==null?void 0:k.oldestMsg,n=k==null?void 0:k.newestMsg;if(k==null||e!=null&&l==null)return{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[],threadJid:null};var p=h?function(a){return!0}:function(a){return a.messageExpirationTs==null||a.messageExpirationTs>d(\"WATimeUtils\").unixTime()};j=d(\"MAWDexieTable\").dexieResolve([]);f===1&&g&&l!=null&&(j=d(\"MAWDexieTable\").dexieResolve([l].filter(p)));return j.then(function(h){h=h.length>0?d(\"MAWDexieTable\").dexieResolve(h):sa(a,k.jid,l,g,f,p,i);var j=c(\"gkx\")(\"23927\");return d(\"MAWDexieTable\").dexieAll([h,C(a,k.jid),E(a,k.jid)]).then(function(a){var c=a[0],g=a[1];a=a[2];S(k,m,a,n,g);if(c.length===0)return{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[],threadJid:k.jid};var h=c[c.length-1],i=c[0];h=j?h.msgId!==(a==null?void 0:a.msgId):h.msgId!==(a==null?void 0:a.msgId)&&c.length===f;a=j?i.msgId!==(g==null?void 0:g.msgId):!1;i.threadJid!==k.jid&&d(\"WALogger\").ERROR(o(),i.threadJid,i.thread,k.jid,k.chatId,b,e);return{hasMoreAfter:a,hasMoreBefore:h,msgs:c,threadJid:k.jid}})})})}function ga(a,b,e,f,g,h,i){g===void 0&&(g=!1);h===void 0&&(h=!1);i===void 0&&(i=\"before\");var j=d(\"Random\").coinflip(c(\"justknobx\")._(\"1707\")),k=j?c(\"qex\")._(\"794\")===!0:c(\"qex\")._(\"546\")===!0,l={hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]};return d(\"MAWDexieTable\").dexieAll([!k||j?U(a,b,e,f,g,h,i):d(\"MAWDexieTable\").dexieResolve(l),k||j?T(a,b,e,f,g,h,i):d(\"MAWDexieTable\").dexieResolve(babelHelpers[\"extends\"]({},l,{threadJid:null}))]).then(function(a){var c=a[0];a=a[1];j&&ha(c,a,b,e,f,g,h,i);a.threadJid;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"threadJid\"]);return k?a:c})}function ha(a,b,c,e,f,g,i,j){g===void 0&&(g=!1);i===void 0&&(i=!1);j===void 0&&(j=\"before\");var k=b.hasMoreAfter===a.hasMoreAfter&&b.hasMoreBefore===a.hasMoreBefore&&b.msgs.length===a.msgs.length&&b.msgs.every(function(b,c){c=a.msgs[c];return b.msgId===c.msgId});(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"armadillo_get_msgs_from_offset_v2\",k?\"consistent\":\"inconsistent\");if(!k){k=b.hasMoreAfter!==a.hasMoreAfter?\"inconsistent_hasMoreAfter\":b.hasMoreBefore!==a.hasMoreBefore?\"inconsistent_hasMoreBefore\":b.msgs.length>a.msgs.length?\"inconsistent_v2LengthGreater\":b.msgs.length<a.msgs.length?\"inconsistent_legacyLengthGreater\":\"inconsistent_other\";(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"armadillo_get_msgs_from_offset_v2\",k);d(\"WALogger\").ERROR(n(),k,c,b.threadJid,a.msgs.length,b.msgs.length,(k=a.msgs[0])==null?void 0:k.sortOrderMs,(c=a.msgs[a.msgs.length-1])==null?void 0:c.sortOrderMs,(k=b.msgs[0])==null?void 0:k.sortOrderMs,(c=b.msgs[b.msgs.length-1])==null?void 0:c.sortOrderMs,e,f,g,i,j)}}function U(a,b,e,f,g,h,i){g===void 0&&(g=!1);h===void 0&&(h=!1);i===void 0&&(i=\"before\");if(f===0)return d(\"MAWDexieTable\").dexieResolve({hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]});var j=c(\"qex\")._(\"863\")===!0;return a.threads.get(b).then(function(b){var k=b==null?void 0:b.oldestMsg,l=b==null?void 0:b.newestMsg;return b==null||k==null||l==null?{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]}:d(\"MAWDexieTable\").dexieAll([j?E(a,b.jid):a.messages.where(\"msgId\").aboveOrEqual(k).first(),j?C(a,b.jid):a.messages.where(\"msgId\").belowOrEqual(l).last(),e==null?d(\"MAWDexieTable\").dexieResolve(null):a.messages.get({msgId:e})]).then(function(e){var j=e[0],m=e[1];e=e[2];var n=(e=e)!=null?e:m,o=j==null?void 0:j.msgId;e=n==null?void 0:n.msgId;var p=m==null?void 0:m.msgId,q=d(\"WATimeUtils\").unixTime();S(b,k,j,l,m);var r=fa(b.chatId,j,m,n);if(r!=null)return r;r=d(\"MAWDexieTable\").dexieResolve([]);var s=h?function(a){return!0}:function(a){return a.messageExpirationTs==null||a.messageExpirationTs>q};f===1&&g&&(r=a.messages.get({msgId:e}).then(function(a){return a!=null?[a].filter(s):[]}));return r.then(function(e){e=e.length>0?d(\"MAWDexieTable\").dexieResolve(e):ta(a,b.jid,c(\"nullthrows\")(j),c(\"nullthrows\")(m),c(\"nullthrows\")(n),g,f,s,i);return e.then(function(a){if(a.length===0)return{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]};var b=a[a.length-1],d=a[0];b=c(\"gkx\")(\"23927\")?b.msgId!==o:b.msgId!==o&&a.length===f;d=c(\"gkx\")(\"23927\")?d.msgId!==p:!1;return{hasMoreAfter:d,hasMoreBefore:b,msgs:a}})})})})}function ia(a){return a.messages.where(\"altIndex\").equals(d(\"MAWDbMsg\").FUTUREPROOF_ALT_INDEX).toArray().then(function(a){var b=[];a.forEach(function(a){if(a.type!==d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF){d(\"WALogger\").ERROR(m(),a.msgId,a.type);return}b.push(a)});return b})}function V(a){return a.toString()}function ja(a,b,c){var e=b.mediaId;if(e===c){d(\"WALogger\").LOG(l(),b.msgId,c);return d(\"MAWDexieTable\").dexieResolve()}e=e!=null?a.media.get(e):d(\"MAWDexieTable\").dexieResolve();return e.then(function(e){e&&d(\"WALogger\").ERROR(k(),b.type);e=babelHelpers[\"extends\"]({},b,{mediaId:c});return a.messages.put(e).then(function(){})})}function ka(a,b){var e=Array.from(b.keys());return a.messages.where(\"msgId\").anyOf(e).toArray().then(function(e){var f=[];e.map(function(a){var e=b.get(a.msgId),g=a.mediaId;if(g!=null&&g!==e){if(e!=null)throw c(\"err\")(\"mediaId \"+V(g)+\" in message \"+a.msgId+\" is different with the \"+V(e)+\" in bulkUpdateMediaId\");d(\"WALogger\").LOG(j(),a.msgId,e);return}g=babelHelpers[\"extends\"]({},a,{mediaId:e});f.push(g)});return a.messages.bulkPut(f).then(function(){})})}function la(a,b){return W(a,[b]).then(function(){})}function W(a,b){return a.messages.where(\"msgId\").anyOf(b).toArray().then(function(b){var c=b.map(function(a){return babelHelpers[\"extends\"]({},a,{isExpiredXmaMsg:!0})});return a.messages.bulkPut(c).then(function(){return c})})}function X(a,b,c,e){if(e!=null&&e<=0)return d(\"MAWDexieTable\").dexieResolve([]);a=a.messages.where(\"altIndex\").equals(d(\"MAWDbMsg\").craftToBeReadAltIndex(b)).filter(c);e!=null&&(a=a.limit(e));return a.toArray()}function Y(a,b,c,d){return X(a,b,function(a){return a.msgId<=c},d)}function Z(a,b,c,e){return X(a,b,function(a){return d(\"MAWDbMsg\").getSortOrderWithFallback(a)<=c},e)}function ma(a,b,c){return Y(a,b,c).then(function(b){var c=b.map(function(a){return babelHelpers[\"extends\"]({altIndex:null},a)});return a.messages.bulkPut(c).then(function(){return c})})}function na(a,b,c){return Z(a,b,c).then(function(b){var c=b.map(function(a){return babelHelpers[\"extends\"]({altIndex:null},a)});return a.messages.bulkPut(c).then(function(){return c})})}function oa(a,b){return a.messages[\"delete\"](b)}function pa(a,b,c){var e=b.map(function(a){return a.rowId});b=c!=null?b.map(function(a){a=d(\"MAWJidUtils\").toProtocolMsgId(a);if(!a)return;return babelHelpers[\"extends\"]({},a,{reason:c})}).filter(Boolean):[];return d(\"MAWDexieTable\").dexieAll([a.deletedMessages.bulkAdd(b),a.messages.bulkDelete(e)]).then(function(a){a[0];a=a[1];d(\"WALogger\").LOG(i(),a)})}function qa(a,b){return a.messages.where(\"msgId\").anyOf(b).toArray()}function ra(a){return a.messages.where(\"altIndex\").anyOf([d(\"MAWDbMsg\").SPAM_ALT_INDEX,d(\"MAWDbMsg\").FUTUREPROOF_SPAM_ALT_INDEX]).toArray()}function sa(a,b,c,e,f,g,h){h===void 0&&(h=\"before\");c=c==null?null:d(\"MAWDbMsg\").getSortOrderWithFallback(c);if(h===\"before\"){return a.messages.where([\"threadJid\",\"sortOrderMs\"]).between([b,Number.MIN_SAFE_INTEGER],[b,(h=c)!=null?h:Number.MAX_SAFE_INTEGER],!0,e).reverse().filter(g).limit(f).toArray()}else{return a.messages.where([\"threadJid\",\"sortOrderMs\"]).between([b,(h=c)!=null?h:Number.MIN_SAFE_INTEGER],[b,Number.MAX_SAFE_INTEGER],e,!0).filter(g).limit(f).toArray().then(function(a){return a.sort(function(a,b){return b.ts-a.ts})})}}function ta(a,b,c,e,f,g,h,i,j){j===void 0&&(j=\"before\");c=d(\"MAWDbMsg\").getSortOrderWithFallback(c);f=d(\"MAWDbMsg\").getSortOrderWithFallback(f);e=d(\"MAWDbMsg\").getSortOrderWithFallback(e);if(j===\"before\")return a.messages.where([\"threadJid\",\"sortOrderMs\"]).between([b,c],[b,f],!0,g).reverse().filter(i).limit(h).toArray();else return a.messages.where([\"threadJid\",\"sortOrderMs\"]).between([b,f],[b,e],g,!0).filter(i).limit(h).toArray().then(function(a){return a.sort(function(a,b){return b.ts-a.ts})})}function ua(a,b,c,e,f){var g=e.msgId;if(b==null&&c==null)return d(\"MAWDexieTable\").dexieResolve({newestMsg:g,oldestMsg:g});if(f==null){var h;return d(\"MAWDexieTable\").dexieResolve({newestMsg:g,oldestMsg:(h=b)!=null?h:g})}return d(\"MAWDexieTable\").dexieAll([b!=null?a.messages.get({msgId:b}):null,c!=null?a.messages.get({msgId:c}):null]).then(function(a){var b=a[0];a=a[1];b=[b,a,e].filter(Boolean);return{newestMsg:b.reduce(function(a,b){return $(b,g,f)>=$(a,g,f)?b:a}).msgId,oldestMsg:b.reduce(function(a,b){return $(a,g,f)<$(b,g,f)?a:b}).msgId}})}function $(a,b,c){return a.msgId===b?c:d(\"MAWDbMsg\").getSortOrderWithFallback(a)}function va(a,b){return a.messages.where(\"msgId\").between(d(\"MAWDbMsg\").msgIdsInChatLowerBound(b.chatId),d(\"MAWDbMsg\").msgIdsInChatUpperBound(b.chatId)).last().then(function(a){a=a==null?0:d(\"MAWDbMsg\").getInChatMsgIdFromMsgId(a.msgId);return a+1})}g.IS_SORT_ORDER_COMPARISON_ENABLED=z;g.maybeGetMsg=A;g.getIsThreadEmpty=a;g.getThreadMessagesBySortOrder=B;g.getThreadNewestMessageBySortOrder=C;g.getThreadNewestMessageBySortOrderOrCache=b;g.getThreadNewestMessageIdBySortOrder=e;g.getThreadNewestMessageTsBySortOrder=f;g.getThreadNewestNumMessagesBySortOrder=D;g.getThreadOldestMessageBySortOrderOrCache=F;g.getThreadOldestMessageIdBySortOrder=G;g.getThreadMessagesByServerTs=H;g.getThreadNewestMessageByServerTs=I;g.getThreadNewestNumMessagesByServerTs=J;g.maybeGetMsgByProtocolMsgId=K;g.maybeGetMsgListByMsgId_I_KNOW_WHAT_I_AM_DOING=L;g.maybeGetMsgResultByProtocolMsgId=M;g.getMsgMapByProtocolMsgId=N;g.getSortOrderFromMsgId=O;g.maybeGetRevokedMsgByProtocolMsgId=aa;g.maybeGetMsgByExternalId=Q;g.checkIfMsgIsDeletedForMeOrRevoked=ba;g.getMsgsByProtocolMsgId=ca;g.updateSystemAck=da;g.bulkUpdateSystemAck=R;g.maybeUpdateThreadMsgsForDeleteForMe=ea;g.getMsgsFromOffsetV2=T;g.getMsgsFromOffset=ga;g.getMsgsFromOffsetLegacy=U;g.getFutureProofMsgs=ia;g.updateMediaId=ja;g.bulkUpdateMediaId=ka;g.updateDbMsgXMAExpiration=la;g.bulkUpdateDbMsgXMAExpired=W;g.getMsgsNeedingRetroactiveReadReceiptsUpTo__DONOTUSE=Y;g.getMsgsNeedingRetroactiveReadReceiptsUpTo=Z;g.clearRetroactiveReadReceiptStatusFromMsgsUpTo__DONOTUSE=ma;g.clearRetroactiveReadReceiptStatusFromMsgsUpTo=na;g.deleteDbMsg=oa;g.deleteMessages=pa;g.getMsgsByMsgIds=qa;g.getSpamMsgs=ra;g.calculateOldestAndNewestMsg=ua;g.getNextMsgIdNumberForThread=va}),98);\n__d(\"MAWBridgeTypesCreators\",[\"I64\",\"MAWDbMsg\",\"MAWDbParticipant\",\"MAWGlobals\",\"MAWImageUtils\",\"MAWMsgType\",\"WAAssertUnreachable\",\"WAJids\",\"WAMediaUtils\",\"WATimeUtils\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){return{threadId:b,threadJid:a}}function i(a){var b,c=a.ts;switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.REVOKED:c=(b=a.originalTs)!=null?b:a.ts;break;default:c=d(\"MAWDbMsg\").getCanonicalTsFromMsg(a)}return{msgId:a.msgId,threadId:a.thread,ts:c}}function b(a,b,c){c=c.map(i);return{messages:c,threadId:a,threadJid:b}}function e(a){return{ravenMsgId:a.msgId,threadId:a.thread,threadJid:a.threadJid}}function f(a,b,e,f,g,h,i){var j,k=e.msgIds.filter(function(b){return d(\"MAWDbMsg\").getThreadIdFromMsgId(b)===a});switch(e.mediaType){case\"Image\":return{duration:null,ephemeralMediaState:h==null?void 0:h.ephemeralMediaState,ephemeralMediaViewMode:h==null?void 0:h.ephemeralMediaViewMode,filesize:e.size,hasMedia:f,mediaId:e.mediaId,mediaType:e.mediaType,msgIds:k,offlineAttachmentId:i,previewHeight:(j=e.validatedImageInfo)==null?void 0:j.jpegThumbnailHeight,previewHeightLarge:(j=e.validatedImageInfo)==null?void 0:j.height,previewWidth:(j=e.validatedImageInfo)==null?void 0:j.jpegThumbnailWidth,previewWidthLarge:(j=e.validatedImageInfo)==null?void 0:j.width,sortOrderMs:d(\"WATimeUtils\").castToMillisTime(g!=null?g:e.ts*1e3),threadId:a,threadJid:b,ts:d(\"WATimeUtils\").castToUnixTime(g!=null?g\/1e3:e.ts)};case\"Video\":return{duration:((j=e.validatedVideoInfo)==null?void 0:j.duration)!=null?((j=e.validatedVideoInfo)==null?void 0:j.duration)*1e3:0,ephemeralMediaState:h==null?void 0:h.ephemeralMediaState,ephemeralMediaViewMode:h==null?void 0:h.ephemeralMediaViewMode,filesize:e.size,hasMedia:f,mediaId:e.mediaId,mediaType:e.mediaType,msgIds:k,offlineAttachmentId:i,previewHeight:(j=e.validatedVideoInfo)==null?void 0:j.jpegThumbnailHeight,previewHeightLarge:(h=e.validatedVideoInfo)==null?void 0:h.height,previewWidth:(j=e.validatedVideoInfo)==null?void 0:j.jpegThumbnailWidth,previewWidthLarge:(h=e.validatedVideoInfo)==null?void 0:h.width,sortOrderMs:d(\"WATimeUtils\").castToMillisTime(g!=null?g:e.ts*1e3),threadId:a,threadJid:b,ts:d(\"WATimeUtils\").castToUnixTime(g!=null?g\/1e3:e.ts)};case\"Ptt\":return{duration:((j=e.validatedAudioInfo)==null?void 0:j.duration)?e.validatedAudioInfo.duration*1e3:null,filesize:e.size,hasMedia:f,mediaId:e.mediaId,mediaType:e.mediaType,msgIds:k,offlineAttachmentId:i,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:d(\"WATimeUtils\").castToMillisTime(g!=null?g:e.ts*1e3),threadId:a,threadJid:b,ts:d(\"WATimeUtils\").castToUnixTime(g!=null?g\/1e3:e.ts)};case\"Gif\":return{duration:null,filesize:e.size,hasMedia:f,mediaId:e.mediaId,mediaType:e.mediaType,msgIds:e.msgIds,offlineAttachmentId:i,previewHeight:(h=e.validatedImageInfo)==null?void 0:h.jpegThumbnailHeight,previewHeightLarge:(j=e.validatedImageInfo)==null?void 0:j.height,previewWidth:(h=e.validatedImageInfo)==null?void 0:h.jpegThumbnailWidth,previewWidthLarge:(j=e.validatedImageInfo)==null?void 0:j.width,sortOrderMs:d(\"WATimeUtils\").castToMillisTime(g!=null?g:e.ts*1e3),threadId:a,threadJid:b,ts:d(\"WATimeUtils\").castToUnixTime(g!=null?g\/1e3:e.ts)};case\"Sticker\":h=d(\"MAWImageUtils\").boundHeightWidth((h=e.validatedImageInfo)==null?void 0:h.jpegThumbnailHeight,(j=e.validatedImageInfo)==null?void 0:j.jpegThumbnailWidth,128);j=h.height;h=h.width;return{duration:null,filesize:e.size,hasMedia:f,mediaId:e.mediaId,mediaType:e.mediaType,msgIds:e.msgIds,offlineAttachmentId:i,previewHeight:j,previewHeightLarge:j,previewWidth:h,previewWidthLarge:h,sortOrderMs:d(\"WATimeUtils\").castToMillisTime(g!=null?g:e.ts*1e3),threadId:a,threadJid:b,ts:d(\"WATimeUtils\").castToUnixTime(g!=null?g\/1e3:e.ts)};case\"DocumentFile\":j={};for(var h=e.mediaEntries,l=Array.isArray(h),m=0,h=l?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var n;if(l){if(m>=h.length)break;n=h[m++]}else{m=h.next();if(m.done)break;n=m.value}n=n;var o=n[0];n=n[1];n=d(\"WAMediaUtils\").mediaEntryDataToRawData(e.plaintextHash,n);n=n.filename;n!=null&&(j[o]=n)}return{defaultFilename:(o=e.validatedDocumentFileInfo)==null?void 0:o.filename,duration:null,filenames:j,filesize:e.size,hasMedia:f,mediaId:e.mediaId,mediaType:e.mediaType,msgIds:k,offlineAttachmentId:i,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:d(\"WATimeUtils\").castToMillisTime(g!=null?g:e.ts*1e3),threadId:a,threadJid:b,ts:d(\"WATimeUtils\").castToUnixTime(g!=null?g\/1e3:e.ts)};default:return c(\"WAAssertUnreachable\")(e.mediaType)}}function j(a,b,c,e,f,g){return{chatJid:b,deliveredWatermarkTs:(b=e)!=null?b:d(\"WATimeUtils\").castToUnixTime(0),fbid:c,lastReadActionTs:(e=g)!=null?e:d(\"WATimeUtils\").castToUnixTime(0),lastReadWatermarkTs:(b=f)!=null?b:d(\"WATimeUtils\").castToUnixTime(0),threadId:a}}function k(a){var b=a.cannotReplyReason,c=a.folder,d=a.fromCheckIfParticipant,e=a.muteExpireTimeMs,f=a.snippetParams,g=a.snippetSenderContactId,h=a.snippetType,i=a.threadId;a=a.threadJid;return{cannotReplyReason:b,folder:c,fromCheckIfParticipant:d,muteExpireTimeMs:e,snippetContactIDs:f==null?void 0:f.contactIDs,snippetMentionJIDs:f==null?void 0:f.mentionJIDs,snippetParams:f==null?void 0:f.strings,snippetSenderContactId:g,snippetType:h,threadId:i,threadJid:a}}function l(a){return{chatJid:a.groupJid,memberAddMode:a.memberAddMode,threadId:a.threadId,threadName:a.name}}function m(a,b,c,e,f,g,i,j,k){return{description:j,lastActivityTs:c,lastMsgExternalId:k!==void 0?(h||(h=d(\"I64\"))).of_string_opt(k):void 0,lastReadTs:(j=e)!=null?j:d(\"WATimeUtils\").castToMillisTime(0),snippetContactIDs:g.contactIDs,snippetMentionJIDs:(c=g.mentionJIDs)!=null?c:[],snippetParams:g.strings,snippetSenderContactId:i,snippetType:f,threadId:a,threadJid:b}}function n(a){var b=a.bumpTimestampMs,c=a.description,d=a.isMessageAuthorMe,e=a.skipServerThreadBump,f=a.snippetParams,g=a.snippetSenderContactId,h=a.snippetType,i=a.threadId;a=a.threadJid;return{bumpTimestampMs:b,description:c,isMessageAuthorMe:d,skipServerThreadBump:(b=e)!=null?b:!1,snippetContactIDs:f.contactIDs,snippetMentionJIDs:(c=f.mentionJIDs)!=null?c:[],snippetParams:f.strings,snippetSenderContactId:g,snippetType:h,threadId:i,threadJid:a}}function o(a){return c(\"gkx\")(\"239\")?0:d(\"MAWDbMsg\").getOriginalTsFromMsg(a)*1e3}function p(a,b,d,e,f,g,h){h===void 0&&(h=\"before\");d=d;if(d.length===0)return{chatJid:b,rangeExtensionType:null,threadId:a};if(e)return{chatJid:b,rangeExtensionType:{hasMoreBefore:f,maxMsgId:d[0].msgId,minMsgId:d[d.length-1].msgId,minMsgTs:o(d[d.length-1]),rangeKind:\"initial\"},threadId:a};return c(\"gkx\")(\"23927\")?{chatJid:b,rangeExtensionType:{hasMoreAfter:g,hasMoreBefore:f,maxMsgId:d[0].msgId,maxMsgTs:o(d[0]),minMsgId:d[d.length-1].msgId,minMsgTs:o(d[d.length-1]),rangeKind:h===\"before\"?\"before\":\"after\"},threadId:a}:{chatJid:b,rangeExtensionType:{hasMoreBefore:f,minMsgId:d[d.length-1].msgId,minMsgTs:o(d[d.length-1]),rangeKind:\"extensionBefore\"},threadId:a}}function q(a,b,c,d,e,f){c=c;return{offsetMsgId:f,rangeExtensionType:c.length===0?null:{hasMoreAfter:e,hasMoreBefore:d,maxMsgId:c[c.length-1].msgId,maxMsgTs:o(c[c.length-1]),minMsgId:c[0].msgId,minMsgTs:o(c[0]),rangeKind:\"extension\"},threadId:a,threadJid:b}}function r(a){var b=d(\"WAJids\").extractDeviceIDParts(d(\"MAWGlobals\").getMyDeviceJid()).userId,c=a.author,e=a.chatId,f=a.chatJid,g=a.reaction,h=a.reactToMsgId;a=a.ts;return{actorId:d(\"WAJids\").authorToUserId(c,b),chatJid:f,messageId:h,reaction:g,threadId:e,ts:a}}function s(a){return{hasMoreAfter:!1,hasMoreBefore:!1,maxMsgId:a.newestMsg,maxMsgTs:a.newestMsgTs,minMsgId:a.oldestMsg,minMsgTs:d(\"WATimeUtils\").castToMillisTime(0),threadId:a.chatId,threadJid:a.jid}}function t(a){var b=d(\"WAJids\").extractDeviceIDParts(d(\"MAWGlobals\").getMyDeviceJid()).userId,c=a.author,e=a.chatId,f=a.chatJid;a=a.reactToMsgId;return{actorId:d(\"WAJids\").authorToUserId(c,b),chatJid:f,messageId:a,threadId:e}}function u(a){return{creationTs:a.creationTs,creator:a.creator,groupJid:a.groupJid,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion,threadId:a.threadId}}function v(a){var b=d(\"MAWDbParticipant\").getThreadIdAndUserJidFromParticipantId(a.invitedParticipantId);b=b.threadId;var c=a.threadJid,e=a.inviteeJid;return{caption:a.caption,inviteCode:a.inviteCode,inviteeId:e,inviteExpireTs:a.inviteExpirationTs,inviterId:d(\"WAJids\").extractUserId(a.inviterJid),threadId:b,threadJid:c}}function w(a,b){return{threadId:a,threadJid:b}}function x(a,b,c,e){return{senderId:d(\"WAJids\").extractUserId(c),state:e,threadId:a,threadJid:b}}g.createBridgeUpdateE2EEMetadataParticipants=a;g.createBridgeDeleteMessages=b;g.createBridgeRavenAction=e;g.createBridgeMedia=f;g.createBridgeReceivedReceipt=j;g.createBridgeUpdatedThread=k;g.createBridgeUpdatedGroupInfo=l;g.createBridgeBumpedThread=m;g.createBridgeBumpedThreadV2=n;g.createBridgeMsgsLoadedInfo=p;g.createBridgeMsgRangeLoadedInfo=q;g.createBridgeUpsertReaction=r;g.createBridgeUpdateMessageRange=s;g.createBridgeDeleteReaction=t;g.createBridgeGroupInfo=u;g.createBridgeGroupInvite=v;g.createBridgeDeleteGroupInvite=w;g.createBridgeReceivedChatState=x}),98);\n__d(\"WAArrayZip\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){var c=Math.min(a.length,b.length);return a.slice(0,c).map(function(a,c){return[a,b[c]]})}f.zip=a}),66);\n__d(\"MAWDbThreadTxns\",[\"MAWBridgeTypesCreators\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWFolderTypes\",\"MAWIndexedDb\",\"WAArrayZip\",\"WALogger\",\"WAResultOrError\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"markCutoverThreadAsNotMigratedLocally failed because thread is already unmigrated\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"markThreadAsMigratedLocally failed because thread is already migrated\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"markThreadAsMigratedLocally failed to get the thread\"]);j=function(){return a};return a}function a(a,b){return a.threads.get(b).then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing\"):d(\"WAResultOrError\").makeResult(a)})}function b(a,b){return a.threads.get({deduplicationKey:b}).then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing\"):d(\"WAResultOrError\").makeResult(a)})}function k(a,b){return a.threads.get({jid:b}).then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing\"):d(\"WAResultOrError\").makeResult(a)})}function c(a,b){return a.threads.where(\"jid\").anyOf(b).toArray()}function e(a,b){return a.threads.where(\"jid\").startsWith(b+\"@\").first().then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing\"):d(\"WAResultOrError\").makeResult(a)})}function f(a,b){return a.threads[\"delete\"](b).then(function(){})}function l(a,b){return a.participants.where(\"userJid\").equals(b).toArray().then(function(b){b=b.map(function(a){return a.threadId});return a.threads.bulkGet(b).then(function(a){return a.filter(Boolean)})})}function m(a,b){return a.participants.where(\"userJid\").anyOf(b).toArray().then(function(b){var c=new Map();b.forEach(function(a){var b;c.has(a.userJid)||c.set(a.userJid,[]);(b=c.get(a.userJid))==null?void 0:b.push(a.threadId)});b=Array.from(c.values()).reduce(function(a,b){return a.concat(b)},[]);b=Array.from(new Set(b));return a.threads.bulkGet(b).then(function(a){return a.reduce(function(a,b){b!=null&&b.chatId!=null&&a.set(b.chatId,b);return a},new Map())}).then(function(a){return new Map(Array.from(c.entries()).map(function(b){var c=b[0];b=b[1];return[c,b.map(function(b){return a.get(b)}).filter(Boolean)]}))})})}function n(a,b,c){return d(\"MAWDbMsgTxns\").IS_SORT_ORDER_COMPARISON_ENABLED?(b==null?void 0:b.lastReadMsgReceiptSent)==null?d(\"MAWDexieTable\").dexieResolve(!1):d(\"MAWDbMsgTxns\").getSortOrderFromMsgId(a,b.lastReadMsgReceiptSent).then(function(a){return c.sortOrderMs==null||a==null?!1:c.sortOrderMs<=a}):d(\"MAWDexieTable\").dexieResolve(b==null||b.lastReadMsgReceiptSent==null?!1:c.msgId<=b.lastReadMsgReceiptSent)}function o(a,b){return a.threads.get(b.thread).then(function(c){return n(a,c,b)})}function p(a,b){var c=b.map(function(a){return a.thread});return a.threads.bulkGet(c).then(function(c){return d(\"MAWDexieTable\").dexieAll(d(\"WAArrayZip\").zip(b,c).map(function(b){var c=b[0];b=b[1];return n(a,b,c)}))})}function q(a,b,c){return a.threads.bulkGet(b).then(function(b){var e=b.filter(Boolean).map(function(a){return babelHelpers[\"extends\"]({},a,{archived:!0,cannotReplyReason:c?\"viewer_not_subscribed\":a.cannotReplyReason,folder:d(\"MAWFolderTypes\").FOLDER_ID.ARCHIVED})});return a.threads.bulkPut(e).then(function(){e.forEach(function(a){c&&d(\"WALogger\").LOG([\"[Occamadillo] Leaving a group thread\\n          \"+a.jid.toString()+\", showing a VIEWER_NOT_SUBSCRIBED composer blocker\"]),d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({cannotReplyReason:a.cannotReplyReason,folder:d(\"MAWFolderTypes\").FOLDER_ID.ARCHIVED,threadId:a.chatId,threadJid:a.jid})})})})})}function r(a,b){return a.threads.bulkGet(b).then(function(c){var b=c.filter(Boolean).map(function(a){return babelHelpers[\"extends\"]({},a,{cannotReplyReason:null})});return a.threads.bulkPut(b).then(function(){b.forEach(function(a){a={cannotReplyReason:null,threadId:a.chatId,threadJid:a.jid};d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread(a)})})})})}function s(a,b){return a.threads.bulkGet(b).then(function(b){var c=b.filter(Boolean).map(function(a){return babelHelpers[\"extends\"]({},a,{archived:!1,cannotReplyReason:a.cannotReplyReason===\"viewer_not_subscribed\"?a.cannotReplyReason:null,folder:d(\"MAWFolderTypes\").FOLDER_ID.INBOX})});return a.threads.bulkPut(c).then(function(){c.forEach(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({cannotReplyReason:a.cannotReplyReason,folder:d(\"MAWFolderTypes\").FOLDER_ID.INBOX,threadId:a.chatId,threadJid:a.jid})})})})})}function t(a,b){return a.threads.bulkGet(b)}function u(a,b){return a.threads.bulkGet(b).then(function(b){var c=b.filter(Boolean).map(function(a){return babelHelpers[\"extends\"]({},a,{cannotReplyReason:\"viewer_not_subscribed\"})});return a.threads.bulkPut(c).then(function(){c.forEach(function(a){var b={cannotReplyReason:\"viewer_not_subscribed\",threadId:a.chatId,threadJid:a.jid};d(\"WALogger\").LOG([\"[Occamadillo] User is unsubscribed from thread\\n          \"+a.jid.toString()+\", showing a VIEWER_NOT_SUBSCRIBED composer blocker\"]);d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread(b)})})})})}function v(a,b){return k(a,b).then(function(b){if(!b.success){d(\"WALogger\").WARN(j());return}b=b.value;if(b.isMigratedLocally===!0){d(\"WALogger\").WARN(i());return}b=babelHelpers[\"extends\"]({},b,{isMigratedLocally:!0});return a.threads.put(b).then(function(){})})}function w(a,b){if(b.isMigratedLocally===!1){d(\"WALogger\").WARN(h());return d(\"MAWDexieTable\").dexieResolve(b)}var c=babelHelpers[\"extends\"]({},b,{isMigratedLocally:!1});return a.threads.put(c).then(function(){return c})}function x(a,b){return a.threads.put(b).then(function(){})}function y(a,b,c,e,f,g){c=c===(e==null?void 0:e.msgId);f=f===(g==null?void 0:g.msgId);return c&&f?d(\"MAWDexieTable\").dexieResolve():a.threads.update(b.chatId,{newestMsg:g==null?void 0:g.msgId,newestMsgTs:f?b.newestMsgTs:(g==null?void 0:g.ts)==null?null:d(\"WATimeUtils\").castUnixTimeToMillisTime(g.ts),oldestMsg:e==null?void 0:e.msgId})}g.getThread=a;g.getThreadByDeduplicationKey=b;g.getThreadByJid=k;g.getThreadsByJids=c;g.getThreadByJidPrimaryId=e;g.deleteThreadRow=f;g.getAllThreadsForUser=l;g.getAllThreadsForUsers=m;g.needsRetroactiveReadReceiptInThread=o;g.bulkNeedsRetroactiveReadReceiptInThread=p;g.archiveThreads=q;g.subscribeToThreads=r;g.unarchiveThreads=s;g.getThreads=t;g.unsubscribeFromThreads=u;g.markCutoverThreadAsMigratedLocally=v;g.markCutoverThreadAsNotMigratedLocally=w;g.updateThread=x;g.updateThreadMsgsForUndefinedOldestOrNewestMsgs=y}),98);\n__d(\"MAWDbMediaTxns\",[\"MAWDbMsg\",\"MAWDexieTable\",\"MAWMediaUtils\",\"MAWMsgType\",\"WALogger\",\"WAResultOrError\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"mediaId is null for media msg with msgId: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"mediaId is null for media msg with msgId: \",\"\"]);i=function(){return a};return a}function a(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():a.media.get({mediaId:b})}function j(a,b){return a.media.where(\"hashedPlaintextHash\").equals(b).first()}function b(a,b){b=d(\"MAWMediaUtils\").genHMACPlaintextHash(b);return j(a,b)}function e(a,b){return a.media.where(\"hashedPlaintextHash\").anyOf(b).toArray()}function f(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():k(a,b).then(function(c){c=c==null?void 0:c.mediaId;return c!=null?a.media.get({mediaId:c}):a.media.get({objectId:b})})}function k(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():a.mediaBackup.get({objectId:b})}function l(a,b){a=a.mediaBackup.where(\"objectId\").anyOf(b).toArray();return a.then(function(a){return new Map(a.map(function(a){return[a.objectId,a]}))})}function m(a,b){return l(a,b).then(function(b){b=Array.from(b.values()).map(function(a){return a.mediaId});return a.media.bulkGet(b)})}function n(a,b){if(b==null)return d(\"MAWDexieTable\").dexieResolve();a=a.mediaBackup.where(\"msgId\").equals(b).toArray();return a}function o(a,b){if(b.length===0)return d(\"MAWDexieTable\").dexieResolve([]);b=b.filter(d(\"MAWDbMsg\").isMediaMsg);var e=b.reduce(function(a,b){if(b.mediaId==null){d(\"WALogger\").ERROR(i(),b.msgId);return a}return a.set(b.mediaId,b)},new Map());b=Array.from(e.keys());return r(a,b).then(function(a){var b=[];a.forEach(function(a){if(a==null)throw c(\"err\")(\"Error missing media\");var d=e.get(a.mediaId);if(d==null)throw c(\"err\")(\"Error missing media\");b.push([d,a])});return b})}function p(a,b){if(b.length===0)return d(\"MAWDexieTable\").dexieResolve([]);b=b.filter(d(\"MAWDbMsg\").isMediaMsg).map(function(a){var b=a.mediaId;if(b==null){d(\"WALogger\").ERROR(h(),a.msgId);throw c(\"err\")(\"mediaId is missing\")}else return b});return r(a,b).then(function(a){var b=[];a.forEach(function(a){a!=null&&b.push(a)});return b})}function q(a,b){if(b.type===d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME||d(\"MAWDbMsg\").isMediaMsg(b)){var c=b.mediaId;return c==null?b.type===d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME?d(\"MAWDexieTable\").dexieResolve(d(\"WAResultOrError\").makeResult()):d(\"MAWDexieTable\").dexieResolve(d(\"WAResultOrError\").makeError(\"missing\")):a.media.get(c).then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing\"):d(\"WAResultOrError\").makeResult(a)})}else return d(\"MAWDexieTable\").dexieResolve(d(\"WAResultOrError\").makeResult())}function r(a,b){return a.media.bulkGet(b)}function s(a,b){var c=b.previewMediaIds!=null?r(a,b.previewMediaIds):d(\"MAWDexieTable\").dexieResolve(),e=b.headerMediaId!=null?a.media.get(b.headerMediaId):d(\"MAWDexieTable\").dexieResolve();a=b.faviconMediaId!=null?a.media.get(b.faviconMediaId):d(\"MAWDexieTable\").dexieResolve();return d(\"MAWDexieTable\").dexieAll([c,e,a]).then(function(a){var c=a[0],e=a[1];a=a[2];if(b.headerMediaId!=null&&e==null)return d(\"WAResultOrError\").makeError(\"missing\");if(b.faviconMediaId!=null&&a==null)return d(\"WAResultOrError\").makeError(\"missing\");if(c==null)return d(\"WAResultOrError\").makeError(\"missing\");var f=[];for(var c=c,g=Array.isArray(c),h=0,c=g?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var i;if(g){if(h>=c.length)break;i=c[h++]}else{h=c.next();if(h.done)break;i=h.value}i=i;if(i==null)return d(\"WAResultOrError\").makeError(\"missing\");else f.push(i)}return d(\"WAResultOrError\").makeResult({favicon:a,header:e,previews:f})})}function t(a,b,c){b=babelHelpers[\"extends\"]({},b,c);return a.media.put(b)}g.maybeGetMediaFromMediaId=a;g.maybeGetMediaFromHashedPlaintextHash=j;g.maybeGetMediaFromPlaintextHash=b;g.maybeBulkGetMediaFromHashedPlaintextHash=e;g.maybeGetMediaFromObjectId=f;g.maybeGetMediaBackupRowFromObjectId=k;g.maybeGetMediaBackupRowsFromObjectIds=l;g.maybeGetBulkMediaFromObjectIds=m;g.maybeGetMediaBackupRowFromMsgId=n;g.getMsgMediaPairFromMsgs=o;g.getMediaFromMsgs=p;g.getAndCheckMediaFromMsg=q;g.bulkGetMedias=r;g.getMediaForXMA=s;g.updateMedia=t}),98);\n__d(\"MAWDbXMATxns\",[\"MAWDbMediaTxns\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWJidUtils\",\"MAWXMAUtils\",\"WAResultOrError\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){return a.xma.bulkGet(b)}function b(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():a.xma.get({xmaId:b})}function h(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():a.xma.where(\"associatedMessageId\").equals(b).first()}function i(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():a.xma.where(\"externalId\").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).first()}function c(a,b){return i(a,b).then(function(b){return b==null?d(\"WAResultOrError\").makeError(\"missing\"):d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMediaTxns\").getMediaForXMA(a,b),d(\"MAWDbMsgTxns\").maybeGetMsg(a,b.associatedMessageId)]).then(function(a){var c=a[0];a=a[1];if(!c.success)return d(\"WAResultOrError\").makeError(\"missing\");c=c.value;var e=c.favicon,f=c.header;c=c.previews;return d(\"WAResultOrError\").makeResult({associatedMessage:a,favicon:e,header:f,previews:c,xma:b})})})}function e(a,b){return h(a,b).then(function(b){if(b==null)return;return d(\"MAWDbMsgTxns\").maybeGetMsg(a,b.msgId)})}function f(a,b){if(b.length===0)return d(\"MAWDexieTable\").dexieResolve([]);b=b.filter(d(\"MAWDbMsg\").isXMAMsg).map(function(a){return d(\"MAWJidUtils\").maybeToProtocolMsgId(a.author,a.threadJid,a.externalId)}).filter(Boolean);b=b.map(function(b){return i(a,b)});return d(\"MAWDexieTable\").dexieAll(b).then(function(a){return a.filter(Boolean)})}function j(a,b){return a.xma.where(\"associatedMessageId\").anyOf(b).toArray().then(function(a){a=a.filter(function(a){return a.msgId!=null&&d(\"MAWXMAUtils\").isXMAShare(a.targetType)});return a.reduce(function(a,b){return b.associatedMessageId!=null&&b.msgId!=null?a.set(b.associatedMessageId,b.msgId):a},new Map())})}function k(a,b){return a.xma.where(\"associatedMessageId\").equals(b).first()}function l(a,b){return a.xma.where(\"associatedMessageId\").equals(b).first().then(function(b){if(b==null)return;b=d(\"MAWJidUtils\").maybeToProtocolMsgId(b.author,b.threadJid,b.externalId);if(b==null)return;return d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,b)})}function m(a,b){return k(a,b).then(function(b){return b==null?d(\"WAResultOrError\").makeResult():d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMediaTxns\").getMediaForXMA(a,b),d(\"MAWDbMsgTxns\").maybeGetMsg(a,b.associatedMessageId)]).then(function(a){var c=a[0];a=a[1];if(!c.success)return d(\"WAResultOrError\").makeError(\"missing\");c=c.value;var e=c.favicon,f=c.header;c=c.previews;return d(\"WAResultOrError\").makeResult({associatedMessage:a,favicon:e,header:f,previews:c,xma:b})})})}function n(a,b,c){return d(\"MAWDbThreadTxns\").getThreadByJid(a,c).then(function(c){if(!c.success)return;c=c.value;if(b==null)return d(\"MAWDexieTable\").dexieResolve();c={author:b.author,chat:c.jid,externalId:b.externalId};return d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,c)})}g.bulkGetXMAs=a;g.maybeGetXMAFromXMAId=b;g.maybeGetXMAFromAssociatedMsgId=h;g.maybeGetXMAFromProtocolMsgId=i;g.maybeGetXMAPayloadFromProtocolMsgId=c;g.getDbXMAMsgFromAssociatedMsgId=e;g.getXMAFromMsgs=f;g.getXMAMsgIdsFromAssociatedMsgIds=j;g.maybeGetDbXMAMsgByAssociatedMsgId=l;g.maybeGetXMAPayloadFromAssociatedMsgId=m;g.maybeGetAssociatedXMAMsg=n}),98);\n__d(\"MAWUpdateThreadMsgMetadataApi\",[\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWTransactionMode\",\"WALogger\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"updated oldestMsg from id \",\" to id \",\" when oldestMsg is undefined\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"updated newestMsg from id \",\" to id \",\", and newestMsgTs from \",\" to \",\" when newestMsg is undefined\"]);i=function(){return a};return a}a=d(\"MAWIndexedDb\").makeMsgrTransactor({threads:d(\"MAWTransactionMode\").READWRITE},\"updateThreadMsgMetadataApiTransactor\",function(a){return function(b,c,e,f,g){var j=c===(e==null?void 0:e.msgId),k=f===(g==null?void 0:g.msgId);if(j&&k)return d(\"MAWDexieTable\").dexieResolve();k||d(\"WALogger\").ERROR(i(),f,g==null?void 0:g.msgId,b.newestMsgTs,(g==null?void 0:g.ts)==null?null:d(\"WATimeUtils\").castUnixTimeToMillisTime(g.ts));j||d(\"WALogger\").ERROR(h(),c,e==null?void 0:e.msgId);return d(\"MAWDbThreadTxns\").updateThreadMsgsForUndefinedOldestOrNewestMsgs(a,b,c,e,f,g).then(function(){})}});b=a;g[\"default\"]=b}),98);\n__d(\"MAWGetMsgQuoteTxn\",[\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWMsgType\",\"WAJids\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(a){return a==null||a===d(\"WAJids\").AUTHOR_SYSTEM?null:d(\"WAJids\").authorAsUserJid(a)};function i(a,b,c){var e=b.quote;b=(e==null?void 0:e.content)||{};var f=b.author;b=b.externalId;if(f==null)return d(\"MAWDexieTable\").dexieResolve(null);f=d(\"WAJids\").isAuthorMe(f)?d(\"WAJids\").AUTHOR_ME:h(f);if(e==null||f==null||b==null)return d(\"MAWDexieTable\").dexieResolve(null);f={author:f,chat:c,externalId:b};return d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,f).then(function(b){if(b==null||!d(\"MAWMsgType\").isQuotedMsgType(b.type))return{quote:e,quoteExternalId:e.content.externalId};var a=b.author,c=b.externalId,f=b.mediaId,g=b.msgContent,h=b.msgId,i=b.specialTextSize,j=b.ts,k=b.type,l=b.xmaMessageType;a={author:a,externalId:c,mediaId:f,msgContent:g,msgId:h,specialTextSize:i,ts:j,type:k,xmaMessageType:l};b.messageExpirationTs!=null&&b.messageExpirationTs<d(\"WATimeUtils\").unixTime()&&(a=babelHelpers[\"extends\"]({},a,{mediaId:void 0,msgContent:void 0,type:d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL}));return{quote:babelHelpers[\"extends\"]({},e,{content:a}),quoteExternalId:b.externalId}})}function a(a,b,c){return i(a,b,c).then(function(a){return babelHelpers[\"extends\"]({},b,{quote:a==null?void 0:a.quote,quoteExternalId:a==null?void 0:a.quoteExternalId})})}g.getMsgQuoteInfo=i;g.enhanceMsgWithQuoteInfo=a}),98);\n__d(\"MAWLocalizationUtils\",[\"MAWAckLevel\",\"MAWGlobals\",\"MAWLocalizationType\",\"MAWMsgType\",\"WAJids\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c,e,f){return{ack:d(\"MAWAckLevel\").ACK.sent,altIndex:(f=f)!=null?f:void 0,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"MAWGlobals\").getDependencies().generateExternalId(),msgContent:a,thread:b,threadJid:c,ts:(f=e)!=null?f:d(\"WATimeUtils\").unixTime(),type:d(\"MAWMsgType\").MSG_TYPE.ADMIN}}function b(a){switch(a){case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS:return!0}return!1}function c(a){switch(a){case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return!0}return!1}function e(a){switch(a){case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_MORE_THAN_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:return!0}return!1}g.buildUnstoredDbAdminMsg=a;g.isAdminMsgNormalized=b;g.isDeviceChangeAdminMsg=c;g.isParticipantChangeAdminMsg=e}),98);\n__d(\"MAWEphemeralGatingUtil\",[\"$InternalEnum\",\"MetaConfig\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"$InternalEnum\")({SEEN_BASED:0,SEND_BASED:1}),i=\"0,60,900,86400\";function a(){var a=c(\"MetaConfig\")._(\"56\");(a===null||a===\"\")&&(a=i);return a.replace('\"',\"\").split(\",\").map(function(a){return parseInt(a,10)})}function d(){var a=c(\"MetaConfig\")._(\"57\");return c(\"justknobx\")._(\"1545\")&&h.cast(a)===h.SEND_BASED}function e(){var a=c(\"MetaConfig\")._(\"65\");return c(\"justknobx\")._(\"1546\")&&a}g.EphemeralityType=h;g.getExpirationOptions=a;g.isSendBasedDisappearingMessageEnabled=d;g.isResetEphemeralSettingsEnabled=e}),98);\n__d(\"WAArmadilloApplication.pb\",[\"WAArmadilloXMA.pb\",\"WACommon.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){var h,i;a={ES_OPEN:1,ES_CLOSE:2};b={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23};c={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2};e={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2};f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2};var j={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={};k.internalSpec={payload:[1,(h=d(\"WAProtoConst\")).TYPES.MESSAGE,m],metadata:[2,h.TYPES.MESSAGE,l]};l.internalSpec={};m.internalSpec={content:[1,h.TYPES.MESSAGE,D],applicationData:[2,h.TYPES.MESSAGE,r],signal:[3,h.TYPES.MESSAGE,o],subProtocol:[4,h.TYPES.MESSAGE,n],__oneofs__:{payload:[\"content\",\"applicationData\",\"signal\",\"subProtocol\"]}};n.internalSpec={futureProof:[1,h.TYPES.ENUM,(i=d(\"WACommon.pb\")).FUTURE_PROOF_BEHAVIOR]};o.internalSpec={encryptedBackupsSecrets:[1,h.TYPES.MESSAGE,p],__oneofs__:{signal:[\"encryptedBackupsSecrets\"]}};p.internalSpec={backupId:[1,h.TYPES.UINT64],serverDataId:[2,h.TYPES.UINT64],epoch:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,q],tempOcmfClientState:[4,h.TYPES.BYTES],mailboxRootKey:[5,h.TYPES.BYTES],obliviousValidationToken:[6,h.TYPES.BYTES]};q.internalSpec={id:[1,h.TYPES.UINT64],anonId:[2,h.TYPES.BYTES],rootKey:[3,h.TYPES.BYTES],status:[4,h.TYPES.ENUM,a]};r.internalSpec={metadataSync:[1,h.TYPES.MESSAGE,C],aiBotResponse:[2,h.TYPES.MESSAGE,s],__oneofs__:{applicationData:[\"metadataSync\",\"aiBotResponse\"]}};s.internalSpec={summonToken:[1,h.TYPES.STRING],messageText:[2,h.TYPES.STRING],serializedExtras:[3,h.TYPES.STRING]};t.internalSpec={actionTimestamp:[1,h.TYPES.INT64],chatAction:[101,h.TYPES.MESSAGE,w],messageAction:[102,h.TYPES.MESSAGE,u],__oneofs__:{actionType:[\"chatAction\",\"messageAction\"]}};u.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],messageDelete:[101,h.TYPES.MESSAGE,v],__oneofs__:{action:[\"messageDelete\"]}};v.internalSpec={};w.internalSpec={chatId:[1,h.TYPES.STRING],chatArchive:[101,h.TYPES.MESSAGE,z],chatDelete:[102,h.TYPES.MESSAGE,y],chatRead:[103,h.TYPES.MESSAGE,x],__oneofs__:{action:[\"chatArchive\",\"chatDelete\",\"chatRead\"]}};x.internalSpec={messageRange:[1,h.TYPES.MESSAGE,B],read:[2,h.TYPES.BOOL]};y.internalSpec={messageRange:[1,h.TYPES.MESSAGE,B]};z.internalSpec={messageRange:[1,h.TYPES.MESSAGE,B],archived:[2,h.TYPES.BOOL]};A.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],timestamp:[2,h.TYPES.INT64]};B.internalSpec={lastMessageTimestamp:[1,h.TYPES.INT64],lastSystemMessageTimestamp:[2,h.TYPES.INT64],messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A]};C.internalSpec={actions:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t]};D.internalSpec={commonSticker:[1,h.TYPES.MESSAGE,M],screenshotAction:[3,h.TYPES.MESSAGE,I],extendedContentMessage:[4,h.TYPES.MESSAGE,d(\"WAArmadilloXMA.pb\").ExtendedContentMessageSpec],ravenMessage:[5,h.TYPES.MESSAGE,L],ravenActionNotifMessage:[6,h.TYPES.MESSAGE,K],extendedMessageContentWithSear:[7,h.TYPES.MESSAGE,J],imageGalleryMessage:[8,h.TYPES.MESSAGE,H],paymentsTransactionMessage:[10,h.TYPES.MESSAGE,E],bumpExistingMessage:[11,h.TYPES.MESSAGE,G],noteReplyMessage:[13,h.TYPES.MESSAGE,F],__oneofs__:{content:[\"commonSticker\",\"screenshotAction\",\"extendedContentMessage\",\"ravenMessage\",\"ravenActionNotifMessage\",\"extendedMessageContentWithSear\",\"imageGalleryMessage\",\"paymentsTransactionMessage\",\"bumpExistingMessage\",\"noteReplyMessage\"]}};E.internalSpec={transactionId:[1,h.TYPES.UINT64],amount:[2,h.TYPES.STRING],currency:[3,h.TYPES.STRING],paymentStatus:[4,h.TYPES.ENUM,b],extendedContentMessage:[5,h.TYPES.MESSAGE,d(\"WAArmadilloXMA.pb\").ExtendedContentMessageSpec]};F.internalSpec={noteId:[1,h.TYPES.STRING],noteText:[2,h.TYPES.MESSAGE,i.MessageTextSpec],noteTimestampMs:[3,h.TYPES.INT64],textContent:[4,h.TYPES.MESSAGE,i.MessageTextSpec],stickerContent:[5,h.TYPES.MESSAGE,i.SubProtocolSpec],videoContent:[6,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{noteReplyContent:[\"textContent\",\"stickerContent\",\"videoContent\"]}};G.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};H.internalSpec={images:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i.SubProtocolSpec]};I.internalSpec={screenshotType:[1,h.TYPES.ENUM,c]};J.internalSpec={searId:[1,h.TYPES.STRING],payload:[2,h.TYPES.BYTES],nativeUrl:[3,h.TYPES.STRING],searAssociatedMessage:[4,h.TYPES.MESSAGE,i.SubProtocolSpec],searSentWithMessageId:[5,h.TYPES.STRING]};K.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],actionTimestamp:[2,h.TYPES.INT64],actionType:[3,h.TYPES.ENUM,e]};L.internalSpec={ephemeralType:[1,h.TYPES.ENUM,f],imageMessage:[2,h.TYPES.MESSAGE,i.SubProtocolSpec],videoMessage:[3,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{mediaContent:[\"imageMessage\",\"videoMessage\"]}};M.internalSpec={stickerType:[1,h.TYPES.ENUM,j]};g.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=a;g.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=b;g.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=c;g.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=e;g.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f;g.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=j;g.ArmadilloSpec=k;g.Armadillo$MetadataSpec=l;g.Armadillo$PayloadSpec=m;g.Armadillo$SubProtocolPayloadSpec=n;g.Armadillo$SignalSpec=o;g.Armadillo$Signal$EncryptedBackupsSecretsSpec=p;g.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=q;g.Armadillo$ApplicationDataSpec=r;g.Armadillo$ApplicationData$AIBotResponseMessageSpec=s;g.Armadillo$ApplicationData$MetadataSyncActionSpec=t;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=u;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=v;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=w;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=x;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=y;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=z;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=A;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=B;g.Armadillo$ApplicationData$MetadataSyncNotificationSpec=C;g.Armadillo$ContentSpec=D;g.Armadillo$Content$PaymentsTransactionMessageSpec=E;g.Armadillo$Content$NoteReplyMessageSpec=F;g.Armadillo$Content$BumpExistingMessageSpec=G;g.Armadillo$Content$ImageGalleryMessageSpec=H;g.Armadillo$Content$ScreenshotActionSpec=I;g.Armadillo$Content$ExtendedContentMessageWithSearSpec=J;g.Armadillo$Content$RavenActionNotifMessageSpec=K;g.Armadillo$Content$RavenMessageSpec=L;g.Armadillo$Content$CommonStickerSpec=M}),98);\n__d(\"MAWEphemeralUtils\",[\"MAWEphemeralGatingUtil\",\"MAWGlobals\",\"MAWLocalizationType\",\"WAArmadilloApplication.pb\",\"WAJids\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=60,i=60*h,j=24*i;function a(a,b,c,e){var f=[],g=b===j&&d(\"MAWEphemeralGatingUtil\").isSendBasedDisappearingMessageEnabled(),l=a===d(\"MAWGlobals\").getMyUserJid();if(e)e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET;else if(!l||a==null)b===0?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:b<h?(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,f.push(b.toString())):b<i?(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,f.push((b\/h).toString())):b<j||g?(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,f.push((b\/i).toString())):(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,f.push((b\/j).toString()));else{a=d(\"WAJids\").extractUserId(a).toString();b===0?l?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,f.push(a)):b<h?(l?e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,f.push(a)),f.push(b.toString())):b<i?(l?e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,f.push(a)),f.push((b\/h).toString())):b<j||g?(l?e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,f.push(a)),f.push((b\/i).toString())):(l?e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,f.push(a)),f.push((b\/j).toString()))}return{ephemeralSettingChangeContent:f,ephemeralSettingChangeType:k(e)}}function k(a){return!d(\"MAWEphemeralGatingUtil\").isSendBasedDisappearingMessageEnabled()||!(a in l)?a:l[a.toString()]}function b(a,b,e){var f,g=[];b=d(\"WAJids\").extractUserId(b).toString();switch(a){case d(\"WAArmadilloApplication.pb\").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:e?f=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:(f=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,g.push(b));break;case d(\"WAArmadilloApplication.pb\").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:e?f=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:(f=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,g.push(b));break;default:throw c(\"err\")(\"Received unexpected screenshot action type\")}return{ephemeralScreenshotActionContent:g,ephemeralScreenshotActionType:f}}var l=(e={},e[(f=d(\"MAWLocalizationType\")).LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS]=f.LOCALIZATION_TYPE.SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e[f.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES]=f.LOCALIZATION_TYPE.SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e[f.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS]=f.LOCALIZATION_TYPE.SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,e[f.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS]=f.LOCALIZATION_TYPE.SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,e[f.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS]=f.LOCALIZATION_TYPE.SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e[f.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES]=f.LOCALIZATION_TYPE.SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e[f.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS]=f.LOCALIZATION_TYPE.SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,e[f.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS]=f.LOCALIZATION_TYPE.SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,e[f.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS]=f.LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e[f.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES]=f.LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e[f.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS]=f.LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,e[f.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS]=f.LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,e[f.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS]=f.LOCALIZATION_TYPE.SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,e[f.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES]=f.LOCALIZATION_TYPE.SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,e[f.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS]=f.LOCALIZATION_TYPE.SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,e[f.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS]=f.LOCALIZATION_TYPE.SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,e[f.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS]=f.LOCALIZATION_TYPE.SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,e[f.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES]=f.LOCALIZATION_TYPE.SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,e[f.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS]=f.LOCALIZATION_TYPE.SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_HOURS,e[f.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS]=f.LOCALIZATION_TYPE.SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_DAYS,e[f.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS]=f.LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,e[f.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES]=f.LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,e[f.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS]=f.LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,e[f.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS]=f.LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,e);g.getEphemeralSettingChangeData=a;g.getEphemeralScreenshotActionData=b}),98);\n__d(\"MAWDbGroupInfoTxns\",[\"MAWBridgeTypesCreators\",\"MAWIndexedDb\",\"WAResultOrError\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c){return h(a,c.jid).then(function(d){var e=c.participantVersion;d.success&&d.value.participantVersion!=null&&c.participantVersion==null&&(e=d.value.participantVersion);d=c.subject.content;d!=null&&d.length===0&&(d=void 0);var f={creationTs:c.creationTs,creator:c.creator,groupJid:c.jid,inviter:c.inviter,memberAddMode:c.memberAddMode,name:d,nameOwner:c.subject.user,nameTs:c.subject.ts,participantVersion:e,threadId:b};return i(a,f).then(function(){return f})})}function h(a,b){return a.groupInfo.get({groupJid:b}).then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing\"):d(\"WAResultOrError\").makeResult(a)})}function i(a,b){return a.groupInfo.put(b).then(function(){d(\"MAWIndexedDb\").afterTransaction({tag:\"GroupInfoUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedGroupInfo(b)})})}function b(a,b){return a.groupInfo.bulkPut(b).then(function(){b.forEach(function(a){return d(\"MAWIndexedDb\").afterTransaction({tag:\"GroupInfoUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedGroupInfo(a)})})})}function c(a,b){return a.groupInfo.bulkGet(b)}function e(a,b){return a.groupInfo[\"delete\"](b)}g.putGroupInfo=a;g.getGroupInfo=h;g.updateGroupInfo=i;g.bulkUpdateGroupInfo=b;g.getGroupInfos=c;g.deleteGroupInfo=e}),98);\n__d(\"MAWThreadSnippetForAdminOrEphemeralMsg\",[\"MAWAdminMsgNormalized\",\"MAWLocalizationUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){var c=a.msgContent.adminType;a=d(\"MAWLocalizationUtils\").isAdminMsgNormalized(c)?d(\"MAWAdminMsgNormalized\").deconstructContactIdsFromAdminContent(c,a.msgContent.adminMsgContent):{contactIds:[],contents:a.msgContent.adminMsgContent};var e=a.contactIds;a=a.contents;return{snippetParams:{contactIDs:[].concat(e),strings:[].concat(a)},snippetSenderContactId:b,snippetType:c}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForDocumentFileMsg\",[\"MAWLocalizationType\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Document file message can not have AUTHOR_SYSTEM\"]);h=function(){return a};return a}function a(a,b){var c,e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(h()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForGifMsg\",[\"MAWLocalizationType\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Animated message can not have AUTHOR_SYSTEM\"]);h=function(){return a};return a}function a(a,b){var c,e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(h()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForImageMsg\",[\"MAWLocalizationType\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Image message can not have AUTHOR_SYSTEM\"]);h=function(){return a};return a}function a(a,b){var c,e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(h()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForPttMsg\",[\"MAWLocalizationType\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Ptt message can not have AUTHOR_SYSTEM\"]);h=function(){return a};return a}function a(a,b){var c,e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(h()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForRevokedMsg\",[\"MAWLocalizationType\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Revoked message can not have AUTHOR_SYSTEM\"]);h=function(){return a};return a}function a(a,b){var c,e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(h()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForStickerMsg\",[\"MAWLocalizationType\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Sticker message can not have AUTHOR_SYSTEM\"]);h=function(){return a};return a}function a(a,b){var c,e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(h()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForTextMsg\",[\"MAWLocalizationType\",\"MAWVault\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Text message can not have AUTHOR_SYSTEM\"]);h=function(){return a};return a}function a(a,b,c){var e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,f={contactIDs:[],mentionJIDs:a.msgContent.mentionedJids,strings:[]};d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(h()):(e=c?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,f.contactIDs.push(b));if(a.specialTextSize===1||a.specialTextSize===2||a.specialTextSize===3){c=d(\"MAWVault\").unvault(a.msgContent.content);f.strings.push(c===\"\\ud83d\\udc4d\"?\"(Y)\":a.msgContent.content)}else f.strings.push(a.msgContent.content);return{snippetParams:f,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForVideoMsg\",[\"MAWLocalizationType\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Video message can not have AUTHOR_SYSTEM\"]);h=function(){return a};return a}function a(a,b){var c,e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(h()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWThreadSnippetForXMAMsg\",[\"MAWLocalizationType\",\"WAArmadilloXMA.pb\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Encountered unexpected XMAMessageType when building a thread snippet\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA story mentions must have a target Jid\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message can not have AUTHOR_SYSTEM\"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose([\"XMA message does not have xmaMessageType\"]);y=function(){return a};return a}function a(a,b){var c,e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};a.xmaMessageType==null&&d(\"WALogger\").ERROR(y());switch(a.xmaMessageType){case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(x()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:if(d(\"WAJids\").isAuthorMe(a.author)){var f;if(a.msgContent!=null&&((f=a.msgContent)==null?void 0:f.content)!=null){e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT;c.strings.push((f=a.msgContent)==null?void 0:f.content)}else e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT}else if(d(\"WAJids\").isAuthorSystem(a.author)||b==null)d(\"WALogger\").ERROR(w());else{e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT;c.contactIDs.push(b);if(a.msgContent!=null&&((f=a.msgContent)==null?void 0:f.content)!=null){c.strings.push((f=a.msgContent)==null?void 0:f.content)}}break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(v()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(u()):e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL;break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(t()):e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(s()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(r()):e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT;break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:if(d(\"WAJids\").isAuthorMe(a.author)){e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG;f=a.threadJid;var g;f!=null&&(g=d(\"WAJids\").interpretAsUserJid(f));if(g!=null){f=d(\"WAJids\").userIdFromJid(g);c.contactIDs.push(f)}else d(\"WALogger\").ERROR(q())}else d(\"WAJids\").isAuthorSystem(a.author)?d(\"WALogger\").ERROR(p()):e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG;break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:d(\"WAJids\").isAuthorMe(a.author)&&b!=null?(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,c.contactIDs.push(b)):d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(o()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:d(\"WAJids\").isAuthorMe(a.author)&&b!=null?(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,c.contactIDs.push(b)):d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(n()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:d(\"WAJids\").isAuthorMe(a.author)&&b!=null?(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,c.contactIDs.push(b)):d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(m()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:d(\"WAJids\").isAuthorMe(a.author)&&b!=null?(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,c.contactIDs.push(b)):d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(l()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:d(\"WAJids\").isAuthorMe(a.author)&&b!=null?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(k()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:d(\"WAJids\").isAuthorMe(a.author)&&b!=null?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(j()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL,c.contactIDs.push(b));break;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:d(\"WAJids\").isAuthorMe(a.author)?e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT:d(\"WAJids\").isAuthorSystem(a.author)||b==null?d(\"WALogger\").ERROR(i()):(e=d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,c.contactIDs.push(b));break;default:d(\"WALogger\").ERROR(h())}return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g[\"default\"]=a}),98);\n__d(\"MAWEphemeralMsgUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return function(b){return!a.has(b.msgId)&&b.ephemeralMsgDisappeared!==!0}}f.filterNonExpiredMsg=a}),66);\n__d(\"MAWThreadSnippetUtils\",[\"MAWEphemeralMsgUtils\",\"MAWLocalizationType\",\"MAWLocalizationUtils\",\"MAWMsgType\",\"MAWXMAUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){var b;if(a.type===d(\"MAWMsgType\").MSG_TYPE.REVOKED)return!0;if(d(\"MAWXMAUtils\").isXMAStoryReply(a.xmaMessageType))return!0;b=((b=a.msgContent)==null?void 0:b.adminType)!=null?d(\"MAWLocalizationUtils\").isDeviceChangeAdminMsg(a.msgContent.adminType):!1;if(a.type!==d(\"MAWMsgType\").MSG_TYPE.ADMIN)return!1;a=a.msgContent.adminType;return a===d(\"MAWLocalizationType\").LOCALIZATION_TYPE.DEBUG_MSG?!0:b}function a(a,b,c){return a.messages.where(\"[threadJid+sortOrderMs]\").between([b.jid,Number.MIN_SAFE_INTEGER],[b.jid,Number.MAX_SAFE_INTEGER],!1,!1).filter(function(a){return(c==null||d(\"MAWEphemeralMsgUtils\").filterNonExpiredMsg(c)(a))&&!h(a)}).reverse().first()}g.isDbMsgDisabledForThreadSnippet=h;g.findMostRecentSnippetMsgFromThread=a}),98);\n__d(\"WAProtocolMsgId\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){return a.externalId===b.externalId&&a.author===b.author&&a.chat===b.chat}f.equals=a}),66);\n__d(\"MAWThreadSnippetBuildTxns\",[\"FBLogger\",\"I64\",\"MAWBridgeTypesCreators\",\"MAWCalculateBumpTimestampMs\",\"MAWDbGroupInfoTxns\",\"MAWDbMsg\",\"MAWDexieTable\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWJidUtils\",\"MAWLocalizationType\",\"MAWMsgType\",\"MAWThreadSnippetForAdminOrEphemeralMsg\",\"MAWThreadSnippetForDocumentFileMsg\",\"MAWThreadSnippetForGifMsg\",\"MAWThreadSnippetForImageMsg\",\"MAWThreadSnippetForPttMsg\",\"MAWThreadSnippetForRevokedMsg\",\"MAWThreadSnippetForStickerMsg\",\"MAWThreadSnippetForTextMsg\",\"MAWThreadSnippetForVideoMsg\",\"MAWThreadSnippetForXMAMsg\",\"MAWThreadSnippetUtils\",\"WAJids\",\"WAProtocolMsgId\",\"WATimeUtils\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){return\/^\\d+$\/.test(a)}function j(a){if(d(\"WAJids\").isAuthorSystem(a))return;a=d(\"WAJids\").isAuthorMe(a)?d(\"WAJids\").userIdFromJid(d(\"MAWGlobals\").getMyUserJid()):d(\"WAJids\").userIdFromJid(a);if(!i(a)){c(\"FBLogger\")(\"mpf_web_foundations\").mustfix(\"[MAWThreadSnippetBuildTxns] Snippet sender contact id is invalid\");return}return a}function k(a,b,e){var f=j(b.author);return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbGroupInfoTxns\").getGroupInfo(a,d(\"WAJids\").toGroupJid(e.jid))]).then(function(a){a=a[0];a=a.success;switch(b.type){case d(\"MAWMsgType\").MSG_TYPE.TEXT:return c(\"MAWThreadSnippetForTextMsg\")(b,f,a);case d(\"MAWMsgType\").MSG_TYPE.IMAGE:return c(\"MAWThreadSnippetForImageMsg\")(b,f);case d(\"MAWMsgType\").MSG_TYPE.VIDEO:return c(\"MAWThreadSnippetForVideoMsg\")(b,f);case d(\"MAWMsgType\").MSG_TYPE.PTT:return c(\"MAWThreadSnippetForPttMsg\")(b,f);case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return c(\"MAWThreadSnippetForAdminOrEphemeralMsg\")(b,f);case d(\"MAWMsgType\").MSG_TYPE.GIF:return c(\"MAWThreadSnippetForGifMsg\")(b,f);case d(\"MAWMsgType\").MSG_TYPE.STICKER:return c(\"MAWThreadSnippetForStickerMsg\")(b,f);case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:return c(\"MAWThreadSnippetForDocumentFileMsg\")(b,f);case d(\"MAWMsgType\").MSG_TYPE.REVOKED:return c(\"MAWThreadSnippetForRevokedMsg\")(b,f);case d(\"MAWMsgType\").MSG_TYPE.XMA:return c(\"MAWThreadSnippetForXMAMsg\")(b,f);default:return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:f,snippetType:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET}}})}function a(a,b,c,e){return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbGroupInfoTxns\").getGroupInfo(a,d(\"WAJids\").toGroupJid(e))]).then(function(a){a=a[0];a=a.success;return l(b,c,a)})}function l(a,b,e){var f;d(\"WAJids\").isAuthorMe(a)?(c(\"FBLogger\")(\"mpf_web_foundations\").warn(\"[MAWThreadSnippetBuildTxns] Reaction snippet author should not be @me\"),f=d(\"WAJids\").userIdFromJid(d(\"MAWGlobals\").getMyUserJid())):f=d(\"WAJids\").userIdFromJid(a);a={contactIDs:[],strings:[]};e=e?d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE;a.contactIDs.push(f);a.strings.push(b);return{snippetParams:a,snippetSenderContactId:f,snippetType:e}}function b(a,b,c,e){var f=c.newestReaction,g=c.reactionsToClear;if(f!=null&&d(\"WATimeUtils\").castUnixTimeToMillisTime(f.ts)>((c=b.snippetMsgTs)!=null?c:0))return d(\"MAWDexieTable\").dexieResolve(m(b,f,e));return g!=null&&b.snippetMsg!=null?a.reactions.get({reactionId:b.snippetMsg}).then(function(c){var e=!1;if(c==null)e=!0;else{var f=d(\"MAWJidUtils\").maybeToProtocolMsgId(c.author,c.threadJid,c.reactToExternalId);f!=null&&(e=g.some(function(a){a=d(\"MAWJidUtils\").maybeToProtocolMsgId(a.author,a.threadJid,a.reactToExternalId);return a!=null&&d(\"WAProtocolMsgId\").equals(a,f)}))}return e?n(a,b):d(\"MAWDexieTable\").dexieResolve(b)}):d(\"MAWDexieTable\").dexieResolve(b)}function m(a,b,e){var f=d(\"WATimeUtils\").castUnixTimeToMillisTime(b.ts);e=l(b.author,b.reaction,e);var g=e.snippetParams,i=e.snippetSenderContactId;e=e.snippetType;if(!c(\"gkx\")(\"23996\"))d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumped\",value:d(\"MAWBridgeTypesCreators\").createBridgeBumpedThread(a.chatId,a.jid,f,a.lastReadMsgTs,e,g,i,\"newReaction\",b.externalId)}),d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumpedServer\",value:{description:\"newReaction\",isCurrentDeviceSendingMsg:!1,lastActivityTs:f,lastMsgExternalId:(h||(h=d(\"I64\"))).of_string_opt(b.externalId),threadId:a.chatId,threadJid:a.jid}});else{var j=b.externalId!==void 0?(h||(h=d(\"I64\"))).of_string_opt(b.externalId):void 0;f=d(\"MAWCalculateBumpTimestampMs\").calculateBumpTimestampMs(f,j);d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumpedV2\",value:d(\"MAWBridgeTypesCreators\").createBridgeBumpedThreadV2({bumpTimestampMs:f,description:\"newReaction\",isMessageAuthorMe:!1,snippetParams:g,snippetSenderContactId:i,snippetType:e,threadId:a.chatId,threadJid:a.jid})})}return babelHelpers[\"extends\"]({},a,{snippetMsg:b.reactionId,snippetMsgTs:d(\"WATimeUtils\").castUnixTimeToMillisTime(b.ts)})}function n(a,b){return d(\"MAWThreadSnippetUtils\").findMostRecentSnippetMsgFromThread(a,b).then(function(c){if(c==null){d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:\"0\",snippetType:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.EMPTY_SNIPPET,threadId:b.chatId,threadJid:b.jid})});return babelHelpers[\"extends\"]({},b,{snippetMsg:void 0,snippetMsgTs:void 0})}return k(a,c,b).then(function(a){var e=a.snippetParams,f=a.snippetSenderContactId;a=a.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:e,snippetSenderContactId:f,snippetType:a,threadId:b.chatId,threadJid:b.jid})});return babelHelpers[\"extends\"]({},b,{snippetMsg:c.msgId,snippetMsgTs:d(\"WATimeUtils\").castUnixTimeToMillisTime(d(\"MAWDbMsg\").getCanonicalTsFromMsg(c))})})})}function e(a,b){return n(a,b).then(function(b){return a.threads.put(b).then(function(){})})}g.getSnippetContactId=j;g.buildThreadSnippet=k;g.buildReactionThreadSnippet=a;g.getThreadChangesetForReactionChanges=b;g.refreshThreadSnippet=e}),98);\n__d(\"MAWEphemeralAdminMsgBuildTxns\",[\"MAWAckLevel\",\"MAWBridgeMsg\",\"MAWBridgeTypesCreators\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWEphemeralUtils\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWMsgType\",\"MAWThreadSnippetBuildTxns\",\"MAWWriteMsgTxns\",\"WAJids\",\"err\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,e,f,g,h,i,j){if(e<0)throw c(\"err\")(\"Received unexpected ephemeral time setting\");e=d(\"MAWEphemeralUtils\").getEphemeralSettingChangeData(b,e,h,i);h=e.ephemeralSettingChangeContent;i=e.ephemeralSettingChangeType;var k={ack:d(\"MAWAckLevel\").ACK.sent,altIndex:void 0,author:(e=b)!=null?e:d(\"WAJids\").AUTHOR_SYSTEM,msgContent:{adminMsgContent:h,adminType:i,version:1},type:d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN};e=j!=null&&b!=null?d(\"MAWDbMsgTxns\").maybeGetMsgByExternalId(a,j,g.chatId,b):d(\"MAWDexieTable\").dexieResolve();return e.then(function(b){if(b==null){var e,h=babelHelpers[\"extends\"]({},k,{externalId:(e=j)!=null?e:d(\"MAWGlobals\").getDependencies().generateExternalId(),thread:g.chatId,threadJid:g.jid,ts:f});return d(\"MAWWriteMsgTxns\").writeMsg(a,h,g).then(function(a){return babelHelpers[\"extends\"]({},h,{msgId:a.msgId,rowId:a.rowId})})}else if(b.type===d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT){var i=babelHelpers[\"extends\"]({},b,k);return a.messages.put(i).then(function(){d(\"MAWIndexedDb\").afterTransaction({tag:\"DeleteMessages\",value:d(\"MAWBridgeTypesCreators\").createBridgeDeleteMessages(b.thread,b.threadJid,[b])});c(\"qex\")._(\"1210\")!==!0&&d(\"MAWIndexedDb\").afterTransaction({tag:\"NewMsg\",value:d(\"MAWBridgeMsg\").createBridgeMsg(i)});return i.msgId===g.newestMsg?d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,i,g).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:g.chatId,threadJid:g.jid})});return i}):i})}else return null})}function b(a,b,e,f,g,h,i){var j=b===d(\"MAWGlobals\").getMyUserJid(),k=d(\"MAWEphemeralUtils\").getEphemeralScreenshotActionData(g,b,j),l=k.ephemeralScreenshotActionContent;k=k.ephemeralScreenshotActionType;if(i==null){var m={ack:d(\"MAWAckLevel\").ACK.received,altIndex:void 0,author:j?d(\"WAJids\").AUTHOR_ME:b,externalId:h,msgContent:{adminMsgContent:l,adminType:k,screenshotActionType:g,version:1},thread:e.chatId,threadJid:e.jid,ts:f,type:d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION};return d(\"MAWWriteMsgTxns\").writeMsg(a,m,e).then(function(a){return babelHelpers[\"extends\"]({},m,{msgId:a.msgId,rowId:a.rowId})})}else if(i.type===d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT){var n=babelHelpers[\"extends\"]({},i,{ack:d(\"MAWAckLevel\").ACK.received,altIndex:void 0,author:j?d(\"WAJids\").AUTHOR_ME:b,msgContent:{adminMsgContent:l,adminType:k,screenshotActionType:g,version:1},type:d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION});return a.messages.put(n).then(function(){d(\"MAWIndexedDb\").afterTransaction({tag:\"DeleteMessages\",value:d(\"MAWBridgeTypesCreators\").createBridgeDeleteMessages(i.thread,i.threadJid,[i])});c(\"qex\")._(\"1210\")!==!0&&d(\"MAWIndexedDb\").afterTransaction({tag:\"NewMsg\",value:d(\"MAWBridgeMsg\").createBridgeMsg(n)});return n.msgId===e.newestMsg?d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,n,e).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:e.chatId,threadJid:e.jid})});return n}):n})}else return d(\"MAWDexieTable\").dexieResolve(null)}g.writeEphemeralSettingAdminMsg=a;g.writeEphemeralScreenshotActionMsg=b}),98);\n__d(\"MAWBridgeMsgCountdown\",[\"MAWDbMsg\",\"MAWLoggerUtils\",\"WATagsLogger\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"createBridgeMsgsStartCountdown: msg \",\", expiration \",\", ms until countdown \",\", duration \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Calling the messages starting countdown bridge event with remaning time less or equal to 0 (expired message)\"]);i=function(){return a};return a}var j=d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.Ephemeral,d(\"MAWLoggerUtils\").Tag.Countdown]);function a(a){return{msgs:a.map(function(a){var b,c=a.messageExpirationTs;b=(b=a.ephemeralSetting)==null?void 0:b.ephemeralExpirationInSec;if(c==null||b==null)return;var e=d(\"WATimeUtils\").cappedMillisecondsUntil(c);if(e<=0){j.LOG(i());return}var f=b*1e3;e>f&&(e=f);j.LOG(h(),a.msgId,c,e,b);return{chatId:a.thread,countdownTs:c,millisecondsUntilCountdownTs:e,msgId:a.msgId,threadJid:a.threadJid,ts:d(\"MAWDbMsg\").getCanonicalTsFromMsg(a)}}).filter(Boolean)}}function b(a,b){return{countdownTs:b,msgId:a}}g.createBridgeMsgsStartCountdown=a;g.createBridgeMsgClearCountdown=b}),98);\n__d(\"MAWMsgCleaner\",[\"MAWLoggerUtils\",\"Promise\",\"WAAssertUnreachable\",\"WAShiftTimer\",\"WATagsLogger\",\"WATimeUtils\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"::_purgeNow \",\" msgs' content cleaned\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"::_purgeNow\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"::update \",\"\"]);k=function(){return a};return a}a=\"Unsend\";e=\"Ephemeral\";f=\"DeleteForMe\";var l=\"PendingStanza\",m=\"Xma\",n=\"IGDDM\";f={DELETE_FOR_ME:f,EPHEMERAL:e,IGDDM:n,PENDING_STANZA:l,UNSEND:a,XMA:m};e=function(){function a(a,b){var e=this;this.$1=new(d(\"WAShiftTimer\").ShiftTimer)(function(){c(\"promiseDone\")(e.$2())});this.getNextTs=a.getNextTs;this.removeExpired=a.removeExpired;this.cleanerType=b;this.purgeEnabled=a.purgeEnabled;this.$1.forceRunNow()}var e=a.prototype;e.update=function(a){var b=o(this.cleanerType);d(\"WATagsLogger\").TAGS([b,d(\"MAWLoggerUtils\").Tag.MsgCleaner,d(\"MAWLoggerUtils\").Tag.CleanerUpdate]).LOG(k(),b,a);this.$1.onOrBefore(d(\"WATimeUtils\").cappedMillisecondsUntil(a))};e.$2=function(){var a=this;if(!this.purgeEnabled())return(h||(h=b(\"Promise\"))).resolve();var c=o(this.cleanerType);d(\"WATagsLogger\").TAGS([c,d(\"MAWLoggerUtils\").Tag.MsgCleaner,d(\"MAWLoggerUtils\").Tag.CleanerPurge]).LOG(j(),c);return this.removeExpired().then(function(b){b>0&&d(\"WATagsLogger\").TAGS([c,d(\"MAWLoggerUtils\").Tag.MsgCleaner,d(\"MAWLoggerUtils\").Tag.CleanerPurge]).LOG(i(),c,b);return a.getNextTs()}).then(function(b){b!=null&&a.update(b)})};return a}();function o(a){switch(a){case\"Unsend\":return\"UnsendMsgCleaner\";case\"Ephemeral\":return\"EphemeralCleaner\";case\"DeleteForMe\":return\"DeleteForMeCleaner\";case\"PendingStanza\":return\"PendingStanzaCleaner\";case\"Xma\":return\"XmaCleaner\";case\"IGDDM\":return\"IGDDisappearingMsgCleaner\";default:return c(\"WAAssertUnreachable\")(a)}}n=e;g.CLEANER_TYPE=f;g.MsgCleaner=e;g.MSG_CLEANER_FOR_TESTING_ONLY=n}),98);\n__d(\"MAWEphemeralCleaner\",[\"MAWLoggerUtils\",\"MAWMsgCleaner\",\"WATagsLogger\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"EphemeralCleaner: Adding timestamps for UI(\",\") and backend(\",\")\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"startEphemeralCleaner invoked\"]);j=function(){return a};return a}var k=null;function a(a){var b=a.backendFns;a=a.uiFns;d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.Ephemeral,d(\"MAWLoggerUtils\").Tag.MsgCleaner,d(\"MAWLoggerUtils\").Tag.CleanerStart]).LOG(j());if(k==null){var c;k={backend:new((c=d(\"MAWMsgCleaner\")).MsgCleaner)(b,c.CLEANER_TYPE.EPHEMERAL),ui:new c.MsgCleaner(a,c.CLEANER_TYPE.EPHEMERAL)}}}function b(a,b){if(k==null){var e=\"Trying to add new ephemeral timestamp before the cleaner is initialized!\";d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.Ephemeral,d(\"MAWLoggerUtils\").Tag.MsgCleaner,d(\"MAWLoggerUtils\").Tag.CleanerTimestamp]).ERROR(i(),e);throw c(\"err\")(e)}else{e=k;var f=e.backend;e=e.ui;d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.Ephemeral,d(\"MAWLoggerUtils\").Tag.MsgCleaner,d(\"MAWLoggerUtils\").Tag.CleanerTimestamp]).DEV(h(),a,b);e.update(a);f.update(b)}}function e(){return k}function f(){k=null}g.startEphemeralCleaner=a;g.addNewEphemeralTimestamp=b;g.getEphemeralCleaner_FOR_TESTING_ONLY=e;g.resetEphemeralCleaner_FOR_TESTING_ONLY=f}),98);\n__d(\"MAWEphemeralMsgTxns\",[\"MAWBridgeMsgCountdown\",\"MAWBridgeTypesCreators\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbThreadTxns\",\"MAWDbXMATxns\",\"MAWDexieTable\",\"MAWEphemeralCleaner\",\"MAWEphemeralConsts\",\"MAWEphemeralMsgUtils\",\"MAWEphemeralSettingsTxns\",\"MAWIndexedDb\",\"MAWLocalizationType\",\"MAWLoggerUtils\",\"MAWThreadSnippetBuildTxns\",\"MAWThreadSnippetUtils\",\"MAWXMAUtils\",\"WAGetHashFromProtocolMsgId\",\"WAJids\",\"WATagsLogger\",\"WATimeUtils\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"incoming msg is not out of sync\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"incoming msg is out of sync: correct duration \",\", correct timestamp \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"incoming msg is ephemeral: duration \",\", timestamp \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"incoming msg is non-ephemeral\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"maybeUpdateEphemeralSettingOrCheckOutOfSyncAfterWritingIncomingMsg: Message from \",\", chat \",\", type \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"trying to update ephemeral timestamp to a later ts then previously set - expiration: \",\" \",\", deletion: \",\"  \",\", storedTs: \",\", readTs: \",\", ephemeralDuration \",\"  - \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"updating ephemeral timestamp msg \",\", existing expiration \",\", existing deletion \",\", updated expiration \",\", updated deletion \",\"\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"markEphemeralMessageAsSent EphemeralCounter: Showing UI counter for \",\"\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"bulkMarkEphemeralMessageAsRead EphemeralCounter: Showing UI counter for \",\"\"]);q=function(){return a};return a}var r=d(\"WATagsLogger\").TAGS([(h=d(\"MAWLoggerUtils\")).Tag.Ephemeral,h.Tag.SettingSync,h.Tag.Incoming]),s=d(\"WATagsLogger\").TAGS([h.Tag.Ephemeral,h.Tag.OnRead,h.Tag.Countdown]);function t(a,b,c,e,f){f===void 0&&(f=function(){return!0});b=d(\"MAWDbMsgTxns\").IS_SORT_ORDER_COMPARISON_ENABLED?d(\"MAWDbMsgTxns\").getThreadMessagesBySortOrder(a,b,!1,!0):a.messages.where(\"msgId\").between(c,e,!1,!0);return b.filter(f).limit(1).toArray().then(function(a){return{needsUpdate:!0,value:(a=a[0])!=null?a:null}})}function u(a,b,e){return e.size===0?d(\"MAWDexieTable\").dexieResolve():d(\"MAWDbThreadTxns\").getThread(a,b).then(function(f){if(!f.success)return;var g=f.value,h=g.oldestMsg,i=g.newestMsg;if(h==null||i==null)return;f=d(\"MAWEphemeralMsgUtils\").filterNonExpiredMsg(e);var j=e.has(h)?t(a,g.jid,h,i,f):d(\"MAWDexieTable\").dexieResolve({needsUpdate:!1}),k=c(\"gkx\")(\"289\")?d(\"MAWDbMsgTxns\").getThreadMessagesBySortOrder(a,g.jid,!0,!1):a.messages.where(\"msgId\").between(h,i,!0,!1);k=e.has(i)?k.filter(f).reverse().limit(1).toArray().then(function(b){b=b[0];return b!=null&&d(\"MAWThreadSnippetUtils\").isDbMsgDisabledForThreadSnippet(b)?d(\"MAWThreadSnippetUtils\").findMostRecentSnippetMsgFromThread(a,g,e).then(function(a){return{needsUpdate:!0,value:(a=a)!=null?a:null}}):{needsUpdate:!0,value:(b=b)!=null?b:null}}):d(\"MAWDexieTable\").dexieResolve({needsUpdate:!1});return d(\"MAWDexieTable\").dexieAll([j,k]).then(function(c){var e=c[0],f=c[1];if(!e.needsUpdate&&!f.needsUpdate)return;c=f.needsUpdate?(c=(c=f.value)==null?void 0:c.msgId)!=null?c:void 0:i;var j=f.needsUpdate?f.value!=null?d(\"WATimeUtils\").castUnixTimeToMillisTime(d(\"MAWDbMsg\").getCanonicalTsFromMsg(f.value)):void 0:g.snippetMsgTs,k=babelHelpers[\"extends\"]({},g,{newestMsg:c,oldestMsg:e.needsUpdate?(e=(e=e.value)==null?void 0:e.msgId)!=null?e:null:h,snippetMsg:c,snippetMsgTs:j});return a.threads.put(k).then(function(){if(f.needsUpdate){var c=f.value;if(c==null)d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:\"0\",snippetType:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.EMPTY_SNIPPET,threadId:b,threadJid:k.jid})});else return d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,c,k).then(function(a){var c=a.snippetParams,e=a.snippetSenderContactId;a=a.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:c,snippetSenderContactId:e,snippetType:a,threadId:b,threadJid:k.jid})})})}})})})}function a(a,b){var c={};b.map(function(a){var b=a.msgId;a=a.ts;b=d(\"WAGetHashFromProtocolMsgId\").getHashFromProtocolMsgId(b);c[b]=a});return d(\"MAWDbMsgTxns\").getMsgsByProtocolMsgId(a,b.map(function(a){return babelHelpers[\"extends\"]({},a.msgId)})).then(function(b){b=b.map(function(a){var b,e=a.author;if(a.threadJid==null||d(\"WAJids\").isAuthorSystem(e))return null;e=d(\"WAGetHashFromProtocolMsgId\").getHashFromProtocolMsgId({author:e,chat:a.threadJid,externalId:a.externalId});e=c[e];b=(b=a.ephemeralSetting)==null?void 0:b.ephemeralExpirationInSec;if(b==null||b===0)return null;b=d(\"WATimeUtils\").castToUnixTime(e+b);var f=d(\"WATimeUtils\").castToUnixTime(b+d(\"MAWEphemeralConsts\").ephemeralReportingWindowInSeconds);return{messageDeleteTs:f,messageExpirationTs:b,msgId:a.msgId,readTsForLogging:e}}).filter(Boolean);return v(a,b,\"bulkMarkEphemeralMessageAsRead\")}).then(function(a){var b=a[0],c=a[1];a=a[2];a.length>0&&(s.LOG(q(),a.map(function(a){return a.msgId})),d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgsStartCountdown\",value:d(\"MAWBridgeMsgCountdown\").createBridgeMsgsStartCountdown(a)}));b!=null&&c!=null&&d(\"MAWEphemeralCleaner\").addNewEphemeralTimestamp(b,c)})}function b(a,b){if(b==null||b.ephemeralSetting==null||b.ephemeralSetting.ephemeralExpirationInSec===0)return d(\"MAWDexieTable\").dexieResolve(b);var c=d(\"WATimeUtils\").castToUnixTime(b.ts+b.ephemeralSetting.ephemeralExpirationInSec),e=d(\"WATimeUtils\").castToUnixTime(c+d(\"MAWEphemeralConsts\").ephemeralReportingWindowInSeconds);return v(a,[{messageDeleteTs:e,messageExpirationTs:c,msgId:b.msgId,readTsForLogging:b.ts}]).then(function(a){var b=a[0],c=a[1];a=a[2];a.length>0&&(s.LOG(p(),a.map(function(a){return a.msgId})),d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgsStartCountdown\",value:d(\"MAWBridgeMsgCountdown\").createBridgeMsgsStartCountdown(a)}));b!=null&&c!=null&&d(\"MAWEphemeralCleaner\").addNewEphemeralTimestamp(b,c);return a[0]})}function v(a,b,c){var e=b.map(function(a){return a.msgId});return d(\"MAWDbXMATxns\").getXMAMsgIdsFromAssociatedMsgIds(a,e).then(function(d){var f=new Map();b.forEach(function(a){f.set(a.msgId,{messageDeleteTs:a.messageDeleteTs,messageExpirationTs:a.messageExpirationTs,readTsForLogging:a.readTsForLogging});var b=d.get(a.msgId);b!=null&&f.set(b,{messageDeleteTs:a.messageDeleteTs,messageExpirationTs:a.messageExpirationTs,readTsForLogging:a.readTsForLogging})});var g=null,h=null,i=[],j=Array.from(new Set(e.concat(Array.from(d.values()))));return a.messages.where(\"msgId\").anyOf(j).toArray().then(function(b){if(b.length===0)return;b.forEach(function(a){var b=a.messageExpirationTs,d=a.messageDeleteTs,e=f.get(a.msgId),j=e==null?void 0:e.messageExpirationTs,k=e==null?void 0:e.messageDeleteTs;e=e==null?void 0:e.readTsForLogging;s.LOG(o(),a.msgId,b,d,j,k);if(j==null||k==null)return;if(b!=null&&j>b||d!=null&&j>d){s.ERROR(n(),j,b,k,d,a.ts,e,(b=a.ephemeralSetting)==null?void 0:b.ephemeralExpirationInSec,c);return}if(a.ephemeralCounterStarted===!0)return;g==null?g=j:j<g&&(g=j);h==null?h=k:k<h&&(h=k);d=babelHelpers[\"extends\"]({},a,{ephemeralCounterStarted:!0,messageDeleteTs:k,messageExpirationTs:j});i.push(d)});return a.messages.bulkPut(i)}).then(function(){return[g,h,i]})})}function e(a,b){if(b.size===0)return d(\"MAWDexieTable\").dexieResolve();var c=[];b.forEach(function(b,d){c.push(u(a,d,b))});return d(\"MAWDexieTable\").dexieAll(c).then(function(){})}function f(a,b,c){if(b==null||b.ephemeralSetting==null||b.ephemeralSetting.ephemeralExpirationInSec===0)return d(\"MAWDexieTable\").dexieResolve();var e=d(\"WATimeUtils\").castToUnixTime(c+d(\"MAWEphemeralConsts\").ephemeralMaxDelectionWindowForUnseenMessage);return d(\"MAWDbXMATxns\").getDbXMAMsgFromAssociatedMsgId(a,b.msgId).then(function(c){var f=[babelHelpers[\"extends\"]({},b,{messageDeleteTs:e,messageExpirationTs:e})];c!=null&&d(\"MAWXMAUtils\").isXMAShare(c.xmaMessageType)&&f.push(babelHelpers[\"extends\"]({},c,{messageDeleteTs:e,messageExpirationTs:e}));return a.messages.bulkPut(f).then(function(){})})}function w(a,b,c,e,f,g){if(b==null||f==null)return d(\"MAWDexieTable\").dexieResolve();r.LOG(m(),c,e.jid,b.type);var h=d(\"MAWDexieTable\").dexieResolve();if(b.ephemeralSetting==null)d(\"WAJids\").switchOnMsgrChatJidType(e.jid,{group:function(){return d(\"MAWEphemeralSettingsTxns\").maybeResetEphemeralSyncResponseBackoffInfo(a,c).then(function(){})},user:function(){d(\"MAWDbMsg\").isMsgEligibleForTriggeringEphemeralSyncResponse(b)&&(r.LOG(l()),h=d(\"MAWEphemeralSettingsTxns\").getOutOfSyncEphemeralSettingForIncomingNonEphemeralMsg(a,e.jid).then(function(a){return a==null?void 0:(a=a.value)==null?void 0:a.outOfSyncEphemeralSetting}))}});else if(b.messageExpirationTs!=null&&b.messageDeleteTs!=null){var n=b.ephemeralSetting,o=b.messageDeleteTs,p=b.messageExpirationTs;r.LOG(k(),n.ephemeralExpirationInSec,n.ephemeralLastUpdatedOrSetTimestamp);d(\"MAWEphemeralCleaner\").addNewEphemeralTimestamp(p,o);h=d(\"MAWEphemeralSettingsTxns\").handleAndWriteIncomingEphemeralSetting(a,c,f,n.ephemeralExpirationInSec,n.ephemeralLastUpdatedOrSetTimestamp,!1,e,g,null,!0).then(function(a){return a==null?void 0:a.outOfSyncEphemeralSetting})}return h.then(function(b){if(b!=null){r.LOG(j(),b.correctEphemeralExpirationInSec,b.correctEphemeralLastUpdatedOrSetTimestamp);return b}else{r.LOG(i());return d(\"MAWEphemeralSettingsTxns\").maybeResetEphemeralSyncResponseBackoffInfo(a,c).then(function(){})}})}g.bulkMarkEphemeralMessageAsRead=a;g.markEphemeralMessageAsSent=b;g.bulkUpdateEphemeralMessageTimestamps=v;g.updateThreadsOnMessagesExpiredFromUi=e;g.maybeUpdateEphemeralMessageWhenMarkedSent=f;g.syncEphemeralSettingOnIncomingMsg=w}),98);\n__d(\"MAWEphemeralSettingsCache\",[\"MAWBridge\",\"WATimeUtils\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=new Map();function i(a,b){h.set(a,b)}function a(a){var b={ephemeralExpirationInSec:0,ephemeralLastUpdatedOrSetTimestamp:d(\"WATimeUtils\").castToUnixTime(0)};return(a=h.get(a))!=null?a:b}function c(a){return j.apply(this,arguments)}function j(){j=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b={ephemeralExpirationInSec:0,ephemeralLastUpdatedOrSetTimestamp:d(\"WATimeUtils\").castToUnixTime(0)};if(!h.has(a)){var c=(yield d(\"MAWBridge\").getBridge().sendAndReceive(\"event\",\"getLSDBEphemeralSetting\",{chatJid:a}));i(a,(a=c)!=null?a:b)}});return j.apply(this,arguments)}g.setEphemeralSettingCache=i;g.getEphemeralSettingCache=a;g.requestLSDBCacheForJid=c}),98);\n__d(\"MAWEphemeralUtil\",[\"MAWAckLevel\",\"MAWBridgeMsgCountdown\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWLocalizationType\",\"MAWMsgType\",\"WAArmadilloApplication.pb\",\"WAJids\",\"WALogger\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"The new ephemeral setting timestamp should be greater than the existing timestamp\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"New ephemeral duration should be different from the existing duration\"]);i=function(){return a};return a}function a(a,b,c){var e=d(\"MAWGlobals\").getMyDeviceJid();e=b.ephemeralExpirationInSec!==a.ephemeralExpirationInSec&&b.ephemeralLastUpdatedOrSetTimestamp===a.ephemeralLastUpdatedOrSetTimestamp&&e<=c;return e||a.ephemeralLastUpdatedOrSetTimestamp>b.ephemeralLastUpdatedOrSetTimestamp}function b(a,b,c){if(a==null)return!0;a=a.ephemeralSetting;if(a!=null&&a.ephemeralExpirationInSec===b){d(\"WALogger\").DEV(i());return!1}if(a!=null&&a.ephemeralLastUpdatedOrSetTimestamp>c){d(\"WALogger\").DEV(h());return!1}return!0}function e(a){a={ack:d(\"MAWAckLevel\").ACK.sent,altIndex:void 0,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"MAWGlobals\").getDependencies().generateExternalId(),msgContent:{adminMsgContent:[],adminType:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES},ts:a,type:d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN};return{unstoredDbMedia:null,unstoredDbMsg:a,unstoredDbReaction:null}}function f(a,b){var e;switch(b){case d(\"WAArmadilloApplication.pb\").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:e=d(\"WAArmadilloApplication.pb\").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE;break;case d(\"WAArmadilloApplication.pb\").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:e=d(\"WAArmadilloApplication.pb\").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING;break;default:throw c(\"err\")(\"Received unexpected screenshot action type\")}b={ack:d(\"MAWAckLevel\").ACK.sent,altIndex:void 0,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"MAWGlobals\").getDependencies().generateExternalId(),msgContent:{adminMsgContent:[],adminType:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,screenshotActionType:e},ts:a,type:d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION};return{unstoredDbMedia:null,unstoredDbMsg:b,unstoredDbReaction:void 0}}function j(a){return d(\"WAJids\").switchOnMsgrChatJidType(a,{group:function(a){throw c(\"err\")(\"Received invalid chatJid. We only support ephemeral messaging in 1:1 threads.\")},user:function(a){return a}})}function k(a){a!=null&&a.messageExpirationTs!=null&&a.ephemeralCounterStarted===!0&&d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgClearCountdown\",value:d(\"MAWBridgeMsgCountdown\").createBridgeMsgClearCountdown(a.msgId,a.messageExpirationTs)})}g.isLocalSettingOutdated=a;g.shouldUpdateForOutgoingUserEphemeralSettingChange=b;g.buildUnstoredDbEphemeralSettingMsgWithoutContentPlaceholder=e;g.buildUnstoredDbEphemeralScreenshotActionMsgWithoutContentPlaceholder=f;g.getUserJidForEphemeralSetting=j;g.maybeClearEphemeralMsgCountdown=k}),98);\n__d(\"MAWEphemeralSettingsTxns\",[\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWEphemeralAdminMsgBuildTxns\",\"MAWEphemeralSettingsCache\",\"MAWEphemeralUtil\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWLoggerUtils\",\"WAJids\",\"WALogger\",\"WAResultOrError\",\"WATagsLogger\",\"WATimeUtils\",\"err\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"maybeResetEphemeralSyncResponseBackoffInfo reset for \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"maybeResetEphemeralSyncResponseBackoffInfo no op for \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Contact \",\" \",\" and ephemeral setting \",\" should not be null when receiving the server ack for outgoing ephemeral setting change\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Writing ephemeral duration \",\" with ts \",\" , previous duration \",\" with ts \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handleAndWriteIncomingEphemeralSetting - ephemeral setting in sync\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handleAndWriteIncomingEphemeralSetting - Sending Sync Response with duration \",\", timestamp \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Received invalid chat jid for incoming ephemeral settings\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handleAndWriteIncomingEphemeralSetting - Handle Incoming Ephemeral Setting duration: \",\", lastUpdated: \",\"\"]);p=function(){return a};return a}var q=d(\"WATagsLogger\").TAGS([(h=d(\"MAWLoggerUtils\")).Tag.Ephemeral,h.Tag.SettingChange,h.Tag.Incoming]),r=d(\"WATagsLogger\").TAGS([h.Tag.Ephemeral,h.Tag.SettingChange,h.Tag.Outgoing]);function s(){return c(\"gkx\")(\"23920\")}var t=null;function a(a,b,e,f,g,h,i,j,k,r){if(f<0||f>86400){var u=d(\"WAJids\").interpretAndValidateJid(i.jid).toString();throw c(\"err\")(\"EphemeralSetting duration is invalid \"+f+\", jidType: \"+u)}var v={ephemeralExpirationInSec:f,ephemeralLastUpdatedOrSetTimestamp:g};d(\"WALogger\").LOG(p(),f,g);var w=d(\"WAJids\").interpretAsUserJid(i.jid),x=s();if(w==null){q.ERROR(o());return d(\"MAWDexieTable\").dexieResolve(t)}var y=d(\"WAJids\").isAuthorMe(b)?d(\"MAWGlobals\").getMyUserJid():b,z=e!=null?d(\"WAJids\").toDeviceJid(y,e.id):null;return a.ephemeralSettings.get({userJid:w}).then(function(c){var e=x?d(\"MAWEphemeralSettingsCache\").getEphemeralSettingCache(i.jid):c==null?void 0:c.ephemeralSetting,o=e==null?void 0:e.ephemeralExpirationInSec;c=e==null?void 0:e.ephemeralLastUpdatedOrSetTimestamp;if(r){if(e!=null&&z!=null&&!d(\"MAWEphemeralUtil\").isLocalSettingOutdated(v,e,z))if(g!==c){d(\"WALogger\").LOG(n(),o,c);return{dbMsg:null,outOfSyncEphemeralSetting:{chatJid:i.jid,correctEphemeralExpirationInSec:e.ephemeralExpirationInSec,correctEphemeralLastUpdatedOrSetTimestamp:e.ephemeralLastUpdatedOrSetTimestamp}}}else{d(\"WALogger\").WARN(m());return t}d(\"MAWIndexedDb\").afterTransaction({tag:\"EphemeralSettingsUpdatedForUI\",value:{author:d(\"WAJids\").userIdFromJid(y),chatJid:i.jid,ephemeralSettingArgs:v,isEphemeralSettingReset:h}});if(x)return t}c={ephemeralSetting:v,ephemeralSyncResponseBackoffInfo:void 0,userJid:w};return a.ephemeralSettings.put(c).then(function(){if(!x&&(e==null||o!==f)){q.LOG(l(),f,g,e==null?void 0:e.ephemeralLastUpdatedOrSetTimestamp,e==null?void 0:e.ephemeralExpirationInSec);var c=(e==null||o===0)&&f>0;return d(\"MAWEphemeralAdminMsgBuildTxns\").writeEphemeralSettingAdminMsg(a,b,f,j,i,c,h,k).then(function(a){return{dbMsg:a}})}else return t})})}function b(a,b,e,f,g){var h=e;if(h<0)throw c(\"err\")(\"Ephemeral duration should be 0 or more\");var i=d(\"MAWEphemeralUtil\").getUserJidForEphemeralSetting(b);return d(\"MAWDbThreadTxns\").getThreadByJid(a,b).then(function(b){return!b.success?{success:!1}:a.ephemeralSettings.get({userJid:i}).then(function(c){if(!d(\"MAWEphemeralUtil\").shouldUpdateForOutgoingUserEphemeralSettingChange(c,h,f))return{success:!1};var e,j=!0;if(c==null)e={ephemeralSetting:{ephemeralExpirationInSec:h,ephemeralLastUpdatedOrSetTimestamp:f},userJid:i};else{var k=c.ephemeralSetting;j=k==null||k.ephemeralExpirationInSec===0;e=babelHelpers[\"extends\"]({},c,{ephemeralSetting:{ephemeralExpirationInSec:h,ephemeralLastUpdatedOrSetTimestamp:f}})}k=s();return d(\"MAWDexieTable\").dexieAll([a.ephemeralSettings.put(e),k?d(\"MAWDexieTable\").dexieResolve():d(\"MAWEphemeralAdminMsgBuildTxns\").writeEphemeralSettingAdminMsg(a,d(\"MAWGlobals\").getMyUserJid(),h,f,b.value,j,g)]).then(function(){return{success:!0}})})})}function e(a,b,e){var f=d(\"MAWEphemeralUtil\").getUserJidForEphemeralSetting(b);return a.ephemeralSettings.get({userJid:f}).then(function(b){if(b==null||b.ephemeralSetting==null){r.ERROR(k(),f,b,b==null?void 0:b.ephemeralSetting);throw c(\"err\")(\"Contact and ephemeral setting should not be null when receiving the server ack for outgoing ephemeral setting change\")}b=babelHelpers[\"extends\"]({},b,{ephemeralSetting:{ephemeralExpirationInSec:b.ephemeralSetting.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:e}});return a.ephemeralSettings.put(b).then(function(){})})}function f(a,b){var e=[d(\"WAJids\").interpretAsUserJid(b),s()],f=e[0],g=e[1];if(f==null)throw c(\"err\")(\"Unexpected chatJid input to isEphemeralMessagesEnabledForContact\");var h=d(\"MAWEphemeralSettingsCache\").getEphemeralSettingCache(b);return a.ephemeralSettings.get({userJid:f}).then(function(a){if(g&&h.ephemeralLastUpdatedOrSetTimestamp===d(\"WATimeUtils\").castToUnixTime(0)||a==null)return d(\"WAResultOrError\").makeError(\"no_ephemeral_setting\");a=g?h:a.ephemeralSetting;return a!=null&&a.ephemeralExpirationInSec>0?d(\"WAResultOrError\").makeResult({outOfSyncEphemeralSetting:{chatJid:b,correctEphemeralExpirationInSec:a.ephemeralExpirationInSec,correctEphemeralLastUpdatedOrSetTimestamp:a.ephemeralLastUpdatedOrSetTimestamp}}):d(\"WAResultOrError\").makeError(\"no_ephemeral_setting\")})}function u(a,b){return a.ephemeralSettings.get({userJid:b}).then(function(c){if((c==null?void 0:c.ephemeralSyncResponseBackoffInfo)==null){q.LOG(j(),b);return d(\"WAResultOrError\").makeResult()}c.ephemeralSyncResponseBackoffInfo=void 0;q.LOG(i(),b);return a.ephemeralSettings.put(c).then(function(){return d(\"WAResultOrError\").makeResult()})})}g.getOccamMIEnabled=s;g.handleAndWriteIncomingEphemeralSetting=a;g.handleAndWriteOutgoingUserEphemeralSettingChange=b;g.updateContactWhenEphemeralSettingChangeMarkedSent=e;g.getOutOfSyncEphemeralSettingForIncomingNonEphemeralMsg=f;g.maybeResetEphemeralSyncResponseBackoffInfo=u}),98);\n__d(\"MAWBridgeThread\",[\"MAWTimeUtils\",\"WAJids\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c,e){var f=d(\"WAJids\").switchOnMsgrChatJidType(a.jid,{group:function(a){return!0},user:function(a){return!1}});return{authoritativeThreadKey:c,cannotReplyReason:a.cannotReplyReason,chatId:a.chatId,clientThreadKey:b,description:e,folder:a.folder,isGroup:f,jid:a.jid,lastActivityTs:d(\"MAWTimeUtils\").ensureValidMillisTime(a.snippetMsgTs!=null&&d(\"WATimeUtils\").fromMillisTime(a.snippetMsgTs)!==0?a.snippetMsgTs:a.newestMsgTs)||d(\"WATimeUtils\").castToMillisTime(0),lastReadTs:d(\"MAWTimeUtils\").ensureValidMillisTime(a.lastReadMsgTs)||d(\"WATimeUtils\").castToMillisTime(0),muteExpireTimeMs:(c=a.muteExpireTimeMs)!=null?c:0}}function b(a,b,c,d){return{lastActivityTimestampMs:d,lastReadWatermarkTs:c,threadId:b,threadJid:a}}g.createBridgeThread=a;g.createBridgeThreadTimestampsUpdated=b}),98);\n__d(\"MAWGetOrCreateThreadTxns\",[\"MAWAdminMsgTxns\",\"MAWBridgeThread\",\"MAWBridgeTypesCreators\",\"MAWDbMsgTxns\",\"MAWDbThread\",\"MAWDexieTable\",\"MAWFolderTypes\",\"MAWIndexedDb\",\"WATimeUtils\",\"getErrorSafe\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b){if(a!=null&&b!=null){var c=d(\"WATimeUtils\").fromMillisTime(a),e=d(\"WATimeUtils\").fromMillisTime(b);return d(\"WATimeUtils\").castToMillisTime(Math.max(c,e))}return(c=a)!=null?c:b}function i(a,b){return a.threads.get({jid:b})}function a(a,b){var c=b.deduplicationKey,e=b.jid;c=b.deduplicationKey!=null?a.threads.get({deduplicationKey:c}):d(\"MAWDexieTable\").dexieResolve();return d(\"MAWDexieTable\").dexieAll([c,i(a,e)]).then(function(c){var d=c[0];c=c[1];if(d!=null)return{created:!1,thread:d};if(c==null)return j(a,b).then(function(a){return{created:!0,thread:a}});else return k(a,b,c).then(function(a){return{created:!1,thread:a}})})}function j(a,b){var e=b.authoritativeThreadKey,f=b.clientThreadKey,g=b.createTs,h=b.deduplicationKey,i=b.description,j=b.folder,k=b.jid,l=b.lastActivityTimestamp,m=b.lastReadWatermarkTimestamp,n=b.skipVerifyThread;b=(l=(b=l)!=null?b:g)!=null?l:d(\"WATimeUtils\").millisTime();g=b!=null?d(\"WATimeUtils\").castToMillisTime(Math.max(b-1,0)):null;m=(l=m)!=null?l:g;var o={authoritativeThreadKey:e!=null?e:void 0,deduplicationKey:h,folder:j!=null?j:d(\"MAWFolderTypes\").FOLDER_ID.INBOX,jid:k,lastReadMsg:null,lastReadMsgReceiptSent:null,lastReadMsgTs:m,newestMsg:null,newestMsgTs:b,oldestMsg:null,optimisticThreadKey:(l=f)!=null?l:void 0,threadOrder:d(\"MAWDbThread\").craftThreadOrder(b,k)};return a.threads.add(o).then(function(b){b=babelHelpers[\"extends\"]({},o,{chatId:b});n!==!0&&d(\"MAWIndexedDb\").afterTransaction({tag:\"VerifyThreadExists\",value:d(\"MAWBridgeThread\").createBridgeThread(b,b.optimisticThreadKey,e,i)});return d(\"MAWAdminMsgTxns\").writeE2EEThreadDescriptionMsg(a,b)})[\"catch\"](function(a){a=c(\"getErrorSafe\")(a);a.message=\"Error creating thread: \"+a.message;throw a})}function k(a,b,e){var f=b.authoritativeThreadKey,g=b.clientThreadKey,i=b.deduplicationKey,j=b.description,k=b.folder,l=b.lastActivityTimestamp,m=b.lastReadWatermarkTimestamp,n=b.skipVerifyThread;return d(\"MAWDbMsgTxns\").getThreadNewestMessageTsBySortOrder(a,e).then(function(b){var o,p=babelHelpers[\"extends\"]({},e,{authoritativeThreadKey:(o=f)!=null?o:e.authoritativeThreadKey,cannotReplyReason:k!=null||g!=null?null:e.cannotReplyReason,deduplicationKey:k!=null||g!=null?i:e.deduplicationKey,folder:(o=k)!=null?o:e.folder,lastReadMsgTs:h(e.lastReadMsgTs,m),newestMsgTs:h(b,l),optimisticThreadKey:(o=g)!=null?o:e.optimisticThreadKey});return a.threads.update(e.chatId,p).then(function(){var a;n!==!0&&d(\"MAWIndexedDb\").afterTransaction({tag:\"VerifyThreadExists\",value:d(\"MAWBridgeThread\").createBridgeThread(p,p.optimisticThreadKey,f,j)});d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({folder:(a=p==null?void 0:p.folder)!=null?a:d(\"MAWFolderTypes\").FOLDER_ID.INBOX,threadId:p.chatId,threadJid:p.jid})});return p})[\"catch\"](function(a){a=c(\"getErrorSafe\")(a);a.message=\"Error updating thread: \"+a.message;throw a})})}g.getExistingThread=i;g.getOrCreateThread=a;g.createThread=j;g.updateThread=k}),98);\n__d(\"MAWAfterWriteMsgUtil\",[\"ArmadilloDataTraceType\",\"I64\",\"MAWBridgeMsg\",\"MAWBridgeTrace\",\"MAWBridgeTypesCreators\",\"MAWCalculateBumpTimestampMs\",\"MAWDbMsg\",\"MAWIndexedDb\",\"MAWLocalizationType\",\"MAWMsgType\",\"MAWXMAUtils\",\"WAJids\",\"WALogger\",\"WATimeUtils\",\"gkx\",\"justknobx\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Skipping local thread bump for threadId: \",\", msgType: \",\"\"]);i=function(){return a};return a}function a(a){var b=a.dbMsg,e=a.ebRestore,f=a.hasMoreAfter,g=a.hasMoreBefore,k=a.isFirstMsg,l=a.isOldestMsgUpdated,m=a.msgsLeftToRestoreForEB,n=a.openMessageOtid,o=a.openMessageParticipantCount,p=a.optimisticMsg,q=a.participantCount,r=a.prevOldestMsg,s=a.quotedReplyAttachmentMeta,t=a.snippet,u=a.updatedThread,v=u.authoritativeThreadKey,w=u.chatId,x=u.jid,y=u.lastReadMsgTs,z=u.newestMsgTs;u=u.oldestMsg;if(b.altIndex===d(\"MAWDbMsg\").SPAM_ALT_INDEX||b.altIndex===d(\"MAWDbMsg\").FUTUREPROOF_SPAM_ALT_INDEX)return;d(\"MAWIndexedDb\").afterTransaction({tag:\"StartTrace\",value:d(\"MAWBridgeTrace\").createBridgeStartTraceData(b,x,d(\"ArmadilloDataTraceType\").armadilloMessageSend,n,k,o,q,v)});!d(\"MAWXMAUtils\").isXMAStoryReply(b.xmaMessageType)&&c(\"qex\")._(\"1210\")!==!0&&d(\"MAWIndexedDb\").afterTransaction({tag:\"NewMsg\",value:d(\"MAWBridgeMsg\").createBridgeMsg(b,p,s)});n=j(a);n&&d(\"WALogger\").LOG(i(),w,b.type);if(!n&&t!=null&&z!=null){k=t.snippetParams;o=t.snippetSenderContactId;q=t.snippetType;if(!c(\"gkx\")(\"23996\"))d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumped\",value:d(\"MAWBridgeTypesCreators\").createBridgeBumpedThread(w,x,z,y,q,k,o,\"writeMsgAfterTransaction-\"+b.type,b.externalId)});else{v=d(\"MAWCalculateBumpTimestampMs\").calculateBumpTimestampMs(b.serverTs!=null?d(\"WATimeUtils\").castUnixTimeToMillisTime(b.serverTs):z,(h||(h=d(\"I64\"))).of_string_opt(b.externalId));d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumpedV2\",value:d(\"MAWBridgeTypesCreators\").createBridgeBumpedThreadV2({bumpTimestampMs:v,description:\"writeMsgAfterTransaction-\"+b.type,isMessageAuthorMe:b.author===d(\"WAJids\").AUTHOR_ME,skipServerThreadBump:!0,snippetParams:k,snippetSenderContactId:o,snippetType:q,threadId:w,threadJid:x})})}}p=e!=null&&e&&m!=null&&m<=1;if((r==null||p)&&c(\"qex\")._(\"1210\")!==!0){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgsLoaded\",value:d(\"MAWBridgeTypesCreators\").createBridgeMsgsLoadedInfo(w,x,[b],!0,(s=g)!=null?s:!1,(a=f)!=null?a:!1)})}l&&u!=null&&d(\"MAWIndexedDb\").afterTransaction({tag:\"UpdateMinMessage\",value:{minMessageId:u,minTimestampMs:d(\"MAWDbMsg\").getCanonicalTsFromMsg(b)*1e3,threadId:w,threadJid:x}})}function j(a){var b=a.dbMsg,e=a.ebRestore;a=a.skipLocalThreadBump;a=a===void 0?!1:a;if(e!=null&&e)return!0;if(d(\"MAWXMAUtils\").isXMAStoryReply(b.xmaMessageType))return!0;if(c(\"justknobx\")._(\"2017\")&&b.type===d(\"MAWMsgType\").MSG_TYPE.ADMIN&&b.msgContent.adminType===d(\"MAWLocalizationType\").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION)return!0;return a?!0:!1}g.writeMsgAfterTransaction=a}),98);\n__d(\"MAWAdminMsgTxns\",[\"MAWAfterWriteMsgUtil\",\"MAWDbMsg\",\"MAWDbThread\",\"MAWDbThreadTxns\",\"MAWLocalizationType\",\"MAWLocalizationUtils\",\"MAWThreadSnippetUtils\",\"MAWTimeUtils\",\"MAWWriteBulkWriteIncomingAdminMsgTxns\",\"MAWWriteMsgTxns\",\"WALogger\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"writeReachabilityErrorAdminMsg failed to create or get 1:1 thread\"]);h=function(){return a};return a}function a(a,b,c){var e=a.ts;e=d(\"WATimeUtils\").castUnixTimeToMillisTime(e);c=d(\"MAWTimeUtils\").ensureValidMillisTime(c)||d(\"WATimeUtils\").castToMillisTime(0);e=e>c?e:c;c=d(\"MAWThreadSnippetUtils\").isDbMsgDisabledForThreadSnippet(a);return babelHelpers[\"extends\"]({},b,{newestMsg:a.msgId,newestMsgTs:e,oldestMsg:a.msgId,snippetMsg:c?void 0:a.msgId,snippetMsgTs:c?void 0:d(\"WATimeUtils\").castUnixTimeToMillisTime(d(\"MAWDbMsg\").getCanonicalTsFromMsg(a)),threadOrder:d(\"MAWDbThread\").craftThreadOrder(e,b.jid)})}function b(a){a.forEach(function(a){return d(\"MAWAfterWriteMsgUtil\").writeMsgAfterTransaction(a)})}function c(a,b){return d(\"MAWDbThreadTxns\").getThreadByJid(a,b).then(function(b){if(!b.success){d(\"WALogger\").WARN(h());return}b=b.value;var c=d(\"MAWLocalizationUtils\").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.REACHABILITY_ERROR,version:0},b.chatId,b.jid,d(\"WATimeUtils\").castMillisTimeToUnixTime(b.lastReadMsgTs));return d(\"MAWWriteMsgTxns\").writeMsg(a,c,b).then(function(){})})}function e(a,b){return d(\"MAWWriteBulkWriteIncomingAdminMsgTxns\").writeE2EEAdminMsgsForIncomingCreatedThreads(a,[b]).then(function(a){a=a[0];return a})}function f(a){var b=d(\"MAWDbMsg\").craftE2eeAdminMsgAltIndex(a.chatId);b=d(\"MAWLocalizationUtils\").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION,version:0},a.chatId,a.jid,d(\"WATimeUtils\").castToUnixTime(0),b);return babelHelpers[\"extends\"]({},b,{msgId:d(\"MAWDbMsg\").craftMsgIdV2(a.chatId,1,b),sortOrderMs:0})}g.getUpdatedThreadForAdminMsg=a;g.syncMsgsDataAfterTransaction=b;g.writeReachabilityErrorAdminMsg=c;g.writeE2EEThreadDescriptionMsg=e;g.buildE2EEThreadDescriptionMsg=f}),98);\n__d(\"MAWWriteBulkWriteIncomingAdminMsgTxns\",[\"MAWAdminMsgTxns\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWThreadSnippetBuildTxns\",\"MAWThreadSnippetForAdminOrEphemeralMsg\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"OfflineBulkWriteAdminmsg - Missing thread when write e2ee thread description\"]);h=function(){return a};return a}function i(a,b){var e=[],f=[],g=[],i=new Map(),j=new Map(),k=b.map(function(b){return d(\"MAWDbMsgTxns\").getThreadOldestMessageIdBySortOrder(a,b).then(function(a){return i.set(b.jid,a)})}),l=b.map(function(b){return d(\"MAWDbMsgTxns\").getThreadNewestMessageTsBySortOrder(a,b).then(function(a){return j.set(b.jid,a)})});return d(\"MAWDexieTable\").dexieAll([k,l]).then(function(){b.forEach(function(a){a==null&&d(\"WALogger\").ERROR(h());var b=d(\"MAWAdminMsgTxns\").buildE2EEThreadDescriptionMsg(a),k=d(\"MAWAdminMsgTxns\").getUpdatedThreadForAdminMsg(b,a,j.get(a.jid)),l=c(\"MAWThreadSnippetForAdminOrEphemeralMsg\")(b,d(\"MAWThreadSnippetBuildTxns\").getSnippetContactId(b.author));a=i.get(a.jid);e.push(b);g.push(k);f.push({dbMsg:b,isFirstMsg:!1,isOldestMsgUpdated:a!=null&&b.msgId!==a,prevOldestMsg:a==null?void 0:a,snippet:l,updatedThread:k})});return{afterTransactionSyncMsgsData:f,e2eeThreadAdminMsgs:e,threadsToUpdate:g}})}function a(a,b){return i(a,b).then(function(b){var c=b.afterTransactionSyncMsgsData,e=b.e2eeThreadAdminMsgs,f=b.threadsToUpdate;return d(\"MAWDexieTable\").dexieAll([a.messages.bulkAdd(e),a.threads.bulkPut(f)]).then(function(){d(\"MAWAdminMsgTxns\").syncMsgsDataAfterTransaction(c);return f})})}g.writeE2EEAdminMsgsForIncomingCreatedThreads=a}),98);\n__d(\"MAWAddQPLPointForHandleIncomingMsgApi\",[\"MAWDexieTable\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){if(!c(\"gkx\")(\"23963\"))return;var e=d(\"MAWDexieTable\").getDexiePSDItem(\"transactorQPLEvent\"),f=d(\"MAWDexieTable\").getDexiePSDItem(\"offlineQueueSize\");f===1&&(e==null?void 0:e.addPoint(a,b))}g.addQPLPointForHIMApi=a}),98);\n__d(\"MAWBuildIncomingMsgs\",[\"MAWAckLevel\",\"MAWDbMsg\",\"MAWMsgType\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=6*d(\"WATimeUtils\").HOUR_SECONDS;function a(a,b){var c=a.author;a=a.externalId;return{ack:d(\"MAWAckLevel\").ACK.received,altIndex:void 0,author:c,externalId:a,serverTs:b,ts:b,type:d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT}}function b(a,b){var c=a.author;a=a.externalId;return{ack:d(\"MAWAckLevel\").ACK.failed,altIndex:void 0,author:c,externalId:a,serverTs:b,ts:b,type:d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE}}function c(a,b){var c;return{ack:a.ack,author:a.author,externalId:a.externalId,messageDeleteForMeTs:d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+h),msgContent:(c=d(\"MAWDbMsg\").getMsgContent(a))==null?void 0:c.content,thread:b.chatId,threadJid:b.jid,ts:a.ts,type:d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME}}function e(a,b,c){return{ack:a.ack,altIndex:void 0,author:a.author,externalId:c.externalId,msgContent:d(\"MAWDbMsg\").getMsgContent(a),originalTs:a.ts,revokedExternalId:c.revokedExternalId,thread:b.chatId,threadJid:b.jid,ts:c.ts,type:d(\"MAWMsgType\").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+h)}}g.REVOKE_CONTENT_EXPIRATION_IN_SEC=h;g.buildUnstoredCiphertextMsg=a;g.buildUnstoredUnavailableMsg=b;g.buildUnstoredDeleteForMeMsg=c;g.buildUnstoredRevokedMsg=e}),98);\n__d(\"MAWDeleteThreadUtil\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){var b=[];a.forEach(function(a){if(a.pendingContent.type===\"DeleteThread\"){a=a.pendingContent.content.metaSyncMessageRange.lastMessageTimestamp;a!=null&&b.push(a)}});if(b.length===0)return null;b.sort(function(a,b){return b-a});a=b[0];return{lastMessageTimestamp:a}}function b(a,b){return b!=null&&b.lastMessageTimestamp>=a}f.getLatestDeleteThreadInfo=a;f.isMsgDeletedViaDeleteThread=b}),66);\n__d(\"MAWPendingStanzaCleaner\",[\"MAWMsgCleaner\",\"WALogger\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"PendingStanzaCleaner: Adding timestamps (\",\")\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);i=function(){return a};return a}var j=null;function a(a){j==null&&(j=new(d(\"MAWMsgCleaner\").MsgCleaner)(a,d(\"MAWMsgCleaner\").CLEANER_TYPE.PENDING_STANZA))}function b(a){if(j==null){var b=\"Trying to add new PendingStanzaCleanerTimestamp before the cleaner is initialized!\";d(\"WALogger\").ERROR(i(),b);throw c(\"err\")(b)}else d(\"WALogger\").DEV(h(),a),j.update(a)}function e(){return j}function f(){j=null}g.startPendingStanzaCleaner=a;g.addNewPendingStanzaCleanerTimestamp=b;g.getPendingStanzaCleaner_FOR_TESTING_ONLY=e;g.resetPendingStanzaCleaner_FOR_TESTING_ONLY=f}),98);\n__d(\"MAWDbPendingStanzaTxns\",[\"MAWDbPendingStanza\",\"MAWDeleteThreadUtil\",\"MAWPendingStanzaCleaner\",\"WAJids\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b,c,e,f){var g=d(\"MAWDbPendingStanza\").getPendingSuffix(f);return a.pendingStanzas.where(\"externalIdWithType\").equals(b+\"_\"+g).filter(function(a){a=a.pendingContent;return a.type===f&&a.content.author===c&&a.content.thread!=null&&a.content.thread===e}).first()}function a(a,b,c,e){return h(a,b,c,e,d(\"MAWDbPendingStanza\").PENDING_TYPE.REVOKED)}function b(a,b,c,e){return h(a,b,c,e,d(\"MAWDbPendingStanza\").PENDING_TYPE.DELETE_FOR_ME)}function c(a,b){var c=b.map(function(a){a=a.expirationInSeconds;return d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+a)});b=b.map(function(a,b){var e=a.content,f=a.externalId;a=a.pendingStanzaType;return{deleteTs:c[b],externalIdWithType:f+\"_\"+d(\"MAWDbPendingStanza\").getPendingSuffix(a),pendingContent:e}});return a.pendingStanzas.bulkAdd(b).then(function(){return c.forEach(d(\"MAWPendingStanzaCleaner\").addNewPendingStanzaCleanerTimestamp)}).then(function(){})}function e(a,b,c,e,f){f=d(\"MAWDbPendingStanza\").getPendingSuffix(f);var g=d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+c);c={deleteTs:g,externalIdWithType:e+\"_\"+f,pendingContent:b};return a.pendingStanzas.add(c).then(function(){d(\"MAWPendingStanzaCleaner\").addNewPendingStanzaCleanerTimestamp(g)})}function f(a,b){var c=d(\"MAWDbPendingStanza\").getPendingSuffix(d(\"MAWDbPendingStanza\").PENDING_TYPE.DELETE_THREAD);return a.pendingStanzas.where(\"externalIdWithType\").equals(b+\"_\"+c).toArray().then(function(a){return d(\"MAWDeleteThreadUtil\").getLatestDeleteThreadInfo(a)})}function i(a){return a.pendingStanzas.toArray()}function j(a,b){b=b.map(function(a){return a.rowId});return a.pendingStanzas.bulkDelete(b)}function k(a){var b;return(a==null?void 0:(b=a.pendingContent)==null?void 0:b.type)===d(\"MAWDbPendingStanza\").PENDING_TYPE.REVOKED?a==null?void 0:(b=a.pendingContent)==null?void 0:b.content:null}function l(a,b){var c=d(\"MAWDbPendingStanza\").getPendingSuffix(d(\"MAWDbPendingStanza\").PENDING_TYPE.DELETE_THREAD);b=b.map(function(a){return a+\"_\"+c});return a.pendingStanzas.where(\"externalIdWithType\").anyOf(b).toArray().then(function(a){a=a.reduce(function(a,b){var c=a.get(b.externalIdWithType);c==null?a.set(b.externalIdWithType,[b]):c.push(b);return a},new Map());var b=new Map();a.forEach(function(a,c){c=d(\"WAJids\").unsafeCoerceToChatJid(c.split(\"_\")[0]);a=d(\"MAWDeleteThreadUtil\").getLatestDeleteThreadInfo(a);a!=null&&b.set(c,a)});return b})}g.maybeGetPendingStanzaByExternalId=h;g.maybeGetPendingRevokedStanza=a;g.maybeGetPendingDeletedStanza=b;g.bulkPutPendingStanzas=c;g.putPendingStanza=e;g.maybeGetDeleteThreadFromPendingStanza=f;g.getAllPendingStanzas=i;g.deletePendingStanzas=j;g.getRevokedContent=k;g.bulkGetDeleteThreadPendingStanzas=l}),98);\n__d(\"MAWDbReactionsTxns\",[\"FBLogger\",\"MAWAuthor\",\"MAWBridgeTypesCreators\",\"MAWDbMsg\",\"MAWDbMsgUtil\",\"MAWDexieTable\",\"MAWIndexedDb\",\"WALogger\",\"WAMsgMap\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Deleted \",\" reactions\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Successfully deleted: \",\" reactions rows.\"]);i=function(){return a};return a}var j=function(a){return a};function a(a,b){return a.reactions.put(j(b))}function b(a,b){return a.reactions.where(\"externalId\").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).first()}function e(a,b){return a.reactions.where(\"reactToExternalId\").equals(b.externalId).filter(function(a){return a.reactToAuthor===b.author&&a.threadJid===b.chat}).toArray()}function k(a,b){var d=b.reduce(function(a,b){a.set(b.msgId,b);return a},new Map());return a.reactions.where(\"reactToMsgId\").anyOf(b.map(function(a){return a.msgId})).toArray().then(function(a){var b=a.filter(function(a){var b=a.reactToExternalId;a=a.reactToMsgId;return a!=null&&b===((b=d.get(a))==null?void 0:b.externalId)});b.length<a.length&&c(\"FBLogger\")(\"messenger_e2ee_web\").mustfix(\"Reactions query by reactToMsgId returns reactions with mismatching externalId\");return b})}function f(a,b){return k(a,[b])}function l(a,b){var c=b.author,d=b.chat;b=b.externalId;return a.reactions.where(\"externalId\").equals(b).filter(function(a){return a.author===c&&a.threadJid===d}).first()}function m(a,b){var c=b.map(function(a){a=a.externalId;return a});return a.reactions.where(\"externalId\").anyOf(c).toArray().then(function(a){var c=d(\"MAWDbMsgUtil\").convertMsgArrayToMap(a),e=new(d(\"WAMsgMap\").MsgMap)();b.forEach(function(a){var b=c.get(a);b!=null&&e.set(a,b)});return e})}function n(a,b){return d(\"MAWDexieTable\").dexieAll(b.map(function(b){var c=b.author,e=b.chatId;b=b.externalId;var f=d(\"MAWAuthor\").getAuthorUserJid(c);return a.reactions.where(\"reactToExternalId\").equals(b).filter(function(a){return d(\"MAWAuthor\").getAuthorUserJid(a.reactToAuthor)===f&&d(\"MAWDbMsg\").getThreadIdFromMsgId(a.reactionId)===e}).toArray()})).then(function(b){b=b.reduce(function(a,b){return a.concat(b)},[]);b.forEach(function(a){var b=a.author,c=a.reactionId,e=a.reactToMsgId;a=a.threadJid;if(e==null)return;d(\"MAWIndexedDb\").afterTransaction({tag:\"DeleteReaction\",value:d(\"MAWBridgeTypesCreators\").createBridgeDeleteReaction({author:b,chatId:d(\"MAWDbMsg\").getThreadIdFromMsgId(c),chatJid:a,reactToMsgId:e})})});d(\"WALogger\").LOG(i(),b.length);return a.reactions.bulkDelete(b.map(function(a){return a.rowId}))})}function o(a,b){return a.reactions.where(\"reactToMsgId\").anyOf(b.map(function(a){return a.msgId}))[\"delete\"]().then(function(a){d(\"WALogger\").LOG(h(),a)})}function p(a,b){return a.reactions.where(\"reactionId\").between(d(\"MAWDbMsg\").msgIdsInChatLowerBound(b.chatId),d(\"MAWDbMsg\").msgIdsInChatUpperBound(b.chatId)).last().then(function(a){a=a==null?0:d(\"MAWDbMsg\").getInChatMsgIdFromMsgId(a.reactionId);return a+1})}g.coerceToReaction=j;g.putReaction=a;g.getReaction=b;g.getReactionForEcho=e;g.getReactionsFromMessages=k;g.getReactionsFromMessage=f;g.maybeGetReactionByProtocolMsgId=l;g.getReactionMapByProtocolMsgId=m;g.deleteReactionsByUniqueMsgIdentifiers=n;g.deleteAllReactionsForMessages=o;g.getNextReactionIdNumberForThread=p}),98);\n__d(\"MAWDeleteForMeMsgContentCleaner\",[\"MAWMsgCleaner\",\"WALogger\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"DeleteForMeMsgContentCleaner: Adding timestamps (\",\")\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"startDeleteForMeMsgContentCleaner invoked\"]);j=function(){return a};return a}var k=null;function a(a){d(\"WALogger\").LOG(j()),k==null&&(k=new(d(\"MAWMsgCleaner\").MsgCleaner)(a,d(\"MAWMsgCleaner\").CLEANER_TYPE.DELETE_FOR_ME))}function b(a){if(k==null){var b=\"Trying to add new DeleteForMeContentCleanerTimestamp before the cleaner is initialized!\";d(\"WALogger\").ERROR(i(),b);throw c(\"err\")(b)}else d(\"WALogger\").DEV(h(),a),k.update(a)}function e(){return k}function f(){k=null}g.startDeleteForMeMsgContentCleaner=a;g.addNewDeleteForMeMsgContentCleanerTimestamp=b;g.getDeleteForMeMsgContentCleaner_FOR_TESTING_ONLY=e;g.resetDeleteForMeMsgContentCleaner_FOR_TESTING_ONLY=f}),98);\n__d(\"MAWEBUploadMessageUtils\",[\"I64\",\"MAWDbMsg\",\"MAWExtractMsFromExternalId\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sortOrder] externalId is not a valid int64\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sortOrder] Timestamp bits in externalId not valid\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sortOrder] ExternalId is not present for \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"echoOverrideMessageSortOrder called without ID\"]);l=function(){return a};return a}function a(a){var b=a.revokedExternalId!=null?a.revokedExternalId:a.externalId;b==null&&d(\"WALogger\").ERROR(l());b=(h||(h=d(\"I64\"))).of_string_opt(b);if(a.serverTs==null){if(a.sortOrderMs!=null)return a.sortOrderMs;b==null&&d(\"WALogger\").WARN(k(),a.type);var c=b==null?null:d(\"MAWExtractMsFromExternalId\").extractMsFromExternalId(b);return d(\"MAWDbMsg\").getCanonicalTsFromMsg(a)*1e3+((c=c)!=null?c:0)}if(b!=null){c=d(\"MAWExtractMsFromExternalId\").extractMsFromExternalId(b);if(c!=null){b=a.originalTs!=null?a.originalTs:a.serverTs;return Number(b)*1e3+c}else d(\"WALogger\").WARN(j())}else d(\"WALogger\").WARN(i());return d(\"MAWDbMsg\").getSortOrderWithFallback(a)}g.echoOverrideMessageSortOrder=a}),98);\n__d(\"MAWThreadEvent\",[\"LSContactUtils\",\"MAWBridge\",\"MAWBridgeSendAndReceive\",\"MAWContactRelationshipType\",\"MAWJobDefinitions\",\"MAWUIJob\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";b=\"placeholderConvertSubscription\";function a(a,b,e){d(\"MAWBridge\").getBridge().setHandlers(\"threadEvent\",{placeholderConvertSubscription:function(f){var g=f.chatJid;f=f.msgId;a===g&&c(\"promiseDone\")(d(\"MAWBridgeSendAndReceive\").sendAndReceive(\"backend\",\"getProtocolMsgIdByMsgId\",{msgId:f}).then(function(a){if(a==null)return;d(\"MAWUIJob\").UIJobStarters.fireAndForget(d(\"MAWJobDefinitions\").jobSerializers.markThreadAsRead(g,b&&d(\"MAWContactRelationshipType\").getContactRelationshipType(b),b?d(\"LSContactUtils\").isContactBlocked(b):!1,b?d(\"LSContactUtils\").isContactRestricted(b):!1,a,e))}))}})}g.PLACEHOLDER_CONVERT_SUBSCRIPTION=b;g.setThreadEventHandler=a}),98);\n__d(\"MAWUpdateQuotedMsgTxns\",[\"MAWAuthor\",\"MAWBridgeMsg\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWMsgType\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(a,b,c,e,f,g,h){var i=d(\"MAWAuthor\").getAuthorUserJid(e);return a.messages.where(\"quoteExternalId\").equals(c).toArray().then(function(c){if(c.length===0)return;var e=c;(h==null||!h)&&(e=c.filter(function(a){var c=a.quote;a=a.thread;return d(\"MAWAuthor\").getAuthorUserJid(c==null?void 0:c.content.author)===i&&a===b}));var j=e.map(function(a){var b;b=Object.assign({},(b=a.quote)==null?void 0:b.content,f.content);b=babelHelpers[\"extends\"]({},a.quote,f,{content:b});b.content.msgId==null&&g!=null&&(b.content.msgId=g);return babelHelpers[\"extends\"]({},a,{quote:b})});return a.messages.bulkPut(j).then(function(){return j})})},i=function(a,b,c,e,f){f===void 0&&(f=d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE);f={content:{mediaId:void 0,msgContent:void 0,type:f}};return h(a,b,c,e,f).then(function(a){if(a==null)return;a.forEach(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(a)})})})};a=function(a,b,c){c===void 0&&(c=d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE);var e=b.author,f=b.chat,g=b.externalId;return a.threads.get({jid:f}).then(function(b){if(b==null)return;return i(a,b.chatId,g,e,c)})};b=function(a,b,c,e){var f=c.author,g=c.externalId,i=c.mediaId,j=c.msgContent,k=c.msgId,l=c.ts;c=c.type;if(!d(\"MAWMsgType\").isQuotedMsgType(c))return d(\"MAWDexieTable\").dexieResolve();i={author:f,externalId:g,mediaId:i,msgContent:j,ts:l,type:c};return h(a,b,g,f,{content:i},k,e)};g.disassociateQuotedMsg=i;g.disassociateQuotedMessageByProtocolMsgId=a;g.associateQuotedMessage=b}),98);\n__d(\"MAWBridgeParticipants\",[\"WAJids\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){var b=a.deliveredWatermarkTs,c=a.lastReadActionTs,e=a.lastReadWatermarkTs,f=a.threadId,g=a.threadJid,h=a.type;a=a.userJid;return{deliveredWatermarkTs:b||d(\"WATimeUtils\").castToUnixTime(0),fbid:d(\"WAJids\").extractUserId(a),isAdmin:h===\"superadmin\"||h===\"admin\",isInvited:h===\"invitedParticipant\",isSuperAdmin:h===\"superadmin\",lastReadActionTs:(b=c)!=null?b:d(\"WATimeUtils\").castToUnixTime(0),readWatermarkTs:e||d(\"WATimeUtils\").castToUnixTime(0),threadId:f,threadJid:g}}function a(a){return{participants:a.map(function(a){return h(a)})}}g.createBridgeParticipant=h;g.createBridgeParticipants=a}),98);\n__d(\"MAWDbParticipantTxns\",[\"MAWBridgeParticipants\",\"MAWBridgeTypesCreators\",\"MAWCurrentUser\",\"MAWDbParticipant\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWODSProxy\",\"WAJids\",\"WAOdsEnums\",\"WAResultOrError\",\"WATimeUtils\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c,d,e,f){e===void 0&&(e=\"participant\");return h(a,b,c,[{addressable:f,type:e,userJid:d}]).then(function(a){return a[0]})}function h(a,b,c,d){return i(a,d.map(function(a){return babelHelpers[\"extends\"]({},a,{threadId:b,threadJid:c})}))}function i(a,b){if(b.length===0)return d(\"MAWDexieTable\").dexieResolve([]);var c=[];b.forEach(function(a){var b=a.addressable,e=a.threadId,f=a.threadJid,g=a.type;a=a.userJid;c.push({addressable:b,deliveredWatermarkTs:d(\"WATimeUtils\").castToUnixTime(0),id:d(\"MAWDbParticipant\").craftParticipantId__DEPRECATED(e,a),lastReadWatermarkTs:d(\"WATimeUtils\").castToUnixTime(0),threadId:e,threadJid:f,type:g,userJid:a})});return a.participants.bulkPut(c).then(function(){d(\"MAWIndexedDb\").afterTransaction({tag:\"ParticipantsUpdated\",value:d(\"MAWBridgeParticipants\").createBridgeParticipants(c)});return c})}function b(a,b,c,e){return o(a,c).then(function(f){var g=[],i=new Set(e.map(function(a){return a.userJid}));for(var j=f,l=Array.isArray(j),m=0,j=l?j:j[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var n;if(l){if(m>=j.length)break;n=j[m++]}else{m=j.next();if(m.done)break;n=m.value}n=n;var o=i.has(n.userJid);o||g.push([n.threadJid,n.userJid])}o=[];n=new Set(f.map(function(a){return a.userJid}));for(m=0;m<e.length;m++){l=e[m];j=n.has(l.userJid);j||o.push(l)}g.length>0&&d(\"MAWODSProxy\").odsBumpEntityKey({amount:1,entity:d(\"WAOdsEnums\").Entity.MAW_ONE_TO_ONE_THREAD_PARTICIPANT_CLEANUP,key:d(\"MAWCurrentUser\").isEmployee()?\"employee\":\"public\"});return d(\"MAWDexieTable\").dexieAll([h(a,b,c,o),k(a,g)]).then(function(a){var b=a[0];a[1];a=e.reduce(function(a,c){var d=b.find(function(a){return a.userJid===c.userJid}),e=f.find(function(a){return a.userJid===c.userJid});d!=null&&e==null?a.push(d):e!=null&&a.push(e);return a},[]);return a})})}function e(a,b){return a.participants.bulkPut(b).then(function(){b.length>0&&d(\"MAWIndexedDb\").afterTransaction({tag:\"ParticipantsUpdated\",value:d(\"MAWBridgeParticipants\").createBridgeParticipants(b)});return b})}function f(a,b,c){if(c.length===0)return d(\"MAWDexieTable\").dexieResolve();c=c.map(function(a){return[b,a]});return k(a,c)}function j(a,b,c){if(b.length===0)return d(\"MAWDexieTable\").dexieResolve();b=b.map(function(a){return[a,c]});return k(a,b)}function k(a,b){return a.participants.where([\"threadJid\",\"userJid\"]).anyOf(b).toArray().then(function(b){return a.participants.bulkDelete(b.map(function(a){return a.id})).then(function(){return a.threads.where(\"jid\").anyOf(Array.from(new Set(b.map(function(a){return a.threadJid})))).toArray()}).then(function(a){var c=new Map(a.map(function(a){return[a.jid,a.chatId]}));b.forEach(function(a){var b=c.get(a.threadJid);b!=null&&d(\"MAWIndexedDb\").afterTransaction({tag:\"ParticipantRemoved\",value:{threadId:b,threadJid:a.threadJid,userId:d(\"WAJids\").extractUserId(a.userJid)}})})})})}function l(a,b){return a.participants.where(\"threadJid\").equals(b)[\"delete\"]()}function m(a,b,c,d,e){return n(a,[{deliveredWatermarkTs:c,lastReadActionTs:e,lastReadWatermarkTs:d,participantKey:b}]).then(function(a){return a[0]})}function n(a,b){if(b.length===0)return d(\"MAWDexieTable\").dexieResolve([]);var c=new Map(),e=[];b.forEach(function(a){e.push(a.participantKey),c.set(JSON.stringify(a.participantKey),a)});return a.participants.where([\"threadJid\",\"userJid\"]).anyOf(e).toArray().then(function(b){var e=[],f=[];b.forEach(function(a){var b=c.get(JSON.stringify([a.threadJid,a.userJid]));if(b==null)return;var d=b.deliveredWatermarkTs,g=b.lastReadActionTs;b=b.lastReadWatermarkTs;var h=a.deliveredWatermarkTs,i=a.lastReadWatermarkTs,j=a.lastReadActionTs,k=d>h,l=b>i,m=j==null||g>j;if(!k&&!l&&!m){f.push(a);return}e.push(babelHelpers[\"extends\"]({},a,{deliveredWatermarkTs:k?d:h,lastReadActionTs:m?g:j,lastReadWatermarkTs:l?b:i}))});return a.participants.bulkPut(e).then(function(){e.forEach(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"ReceivedReceipt\",value:d(\"MAWBridgeTypesCreators\").createBridgeReceivedReceipt(a.threadId,a.threadJid,d(\"WAJids\").extractUserId(a.userJid),a.deliveredWatermarkTs,a.lastReadWatermarkTs,a.lastReadActionTs)})});return[].concat(e,f)})})}function o(a,b){return a.participants.where(\"threadJid\").equals(b).toArray()}function p(a,b){return a.participants.where(\"threadJid\").anyOf(b).toArray()}function q(a,b){return o(a,b).then(function(a){return a.filter(function(a){return a.type===\"invitedParticipant\"})})}function r(a,b,c){return a.participants.get(d(\"MAWDbParticipant\").craftParticipantId__DEPRECATED(b,c)).then(function(a){return a==null?d(\"WAResultOrError\").makeError(\"missing\"):d(\"WAResultOrError\").makeResult(a)})}function s(a,b){var d=Array.from(b.keys()).filter(Boolean);return a.participants.where(\"threadId\").anyOf(d).toArray().then(function(d){var e=d.map(function(a){return[a.threadJid,a.userJid]}),f=d.map(function(a){var d=b.get(a.threadId);if(d==null)throw c(\"err\")(\"New Thread Id is null - should not happen flow\");return{addressable:a.addressable,threadId:d,threadJid:a.threadJid,type:a.type,userJid:a.userJid}});return k(a,e).then(function(){return i(a,f)}).then(function(){})})}function t(a,b){return a.participants.where([\"threadJid\",\"userJid\"]).anyOf(b).toArray().then(function(a){var c=new Map(a.map(function(a){return[JSON.stringify([a.threadJid,a.userJid]),a]}));return b.map(function(a){return c.get(JSON.stringify(a))})})}g.addParticipant=a;g.bulkAddParticipants=h;g.bulkAddParticipantsInThreads=i;g.bulkUpsertParticiantsInThread=b;g.bulkUpdateParticipants=e;g.bulkDeleteParticipantsInThread=f;g.bulkDeleteParticipantAcrossThreads=j;g.bulkDeleteParticipants=k;g.deleteAllParticipantsForThread=l;g.updateParticipantTimestamps=m;g.bulkUpdateParticipantTimestamps=n;g.getParticipantsInThread=o;g.getParticipantsInThreads=p;g.getInvitedParticipantsInThread=q;g.getParticipant=r;g.bulkMigrateParticipantsToNewThreads=s;g.bulkGetParticipants=t}),98);\n__d(\"MAWWriteMsgSideEffectTxns\",[\"MAWDbMsg\",\"MAWDbParticipantTxns\",\"MAWDexieTable\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){var c=d(\"MAWDbMsg\").getCanonicalTsFromMsg(b),e=b.author;return e!==\"@me\"&&e!==\"@system\"?d(\"MAWDbParticipantTxns\").updateParticipantTimestamps(a,[b.threadJid,e],c,c,c):d(\"MAWDexieTable\").dexieResolve()}g.updateParticipantTimestampsForMsg=a}),98);\n__d(\"MAWWriteDeleteMessageTxns\",[\"MAWAckLevel\",\"MAWBridgeTypesCreators\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbPendingStanza\",\"MAWDbReactionsTxns\",\"MAWDbThreadTxns\",\"MAWDbXMATxns\",\"MAWDeleteForMeMsgContentCleaner\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWMsgType\",\"MAWPendingStanzaCleaner\",\"MAWThreadSnippetBuildTxns\",\"MAWUpdateQuotedMsgTxns\",\"MAWUploadMessagesBackup\",\"MAWXMAUtils\",\"WAResultOrError\",\"WATimeUtils\",\"gkx\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=6*d(\"WATimeUtils\").HOUR_SECONDS,i=30*d(\"WATimeUtils\").DAY_SECONDS;function a(a,b){var c=b.protocolMsgId,e=c.author;b=c.chat;var f=c.externalId;return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbThreadTxns\").getThreadByJid(a,b),a.unrenderedMessages.get({externalId:f})]).then(function(b){var g=b[0];b=b[1];if(!g.success)return d(\"WAResultOrError\").makeError(\"missing_thread\");return b!=null&&b.thread===g.value.chatId&&b.author===e?d(\"WAResultOrError\").makeError(\"duplicate_delete_for_me\"):d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,c).then(function(b){if(b==null){var h={ack:d(\"MAWAckLevel\").ACK.received,author:e,externalId:f,thread:g.value.chatId,threadJid:g.value.jid,type:d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME},k=d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+i);h={deleteTs:k,externalIdWithType:f+\"_\"+d(\"MAWDbPendingStanza\").PENDING_DELETE_FOR_ME,pendingContent:{content:h,type:d(\"MAWDbPendingStanza\").PENDING_TYPE.DELETE_FOR_ME}};return a.pendingStanzas.add(h).then(function(){d(\"MAWPendingStanzaCleaner\").addNewPendingStanzaCleanerTimestamp(k);return d(\"WAResultOrError\").makeResult()})}return d(\"MAWDexieTable\").dexieResolve(j(a,b,e,c.chat,g.value)).then(function(){return d(\"WAResultOrError\").makeResult()})})})}function j(a,b,e,f,g){var i,j=d(\"MAWDexieTable\").dexieResolve();d(\"MAWXMAUtils\").isXMAStoryReply((i=b.quote)==null?void 0:i.content.xmaMessageType)&&(j=k(a,b));var l={ack:b.ack,author:e,externalId:b.externalId,mediaId:b.mediaId,messageDeleteForMeTs:d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+h),msgContent:(i=d(\"MAWDbMsg\").getMsgContent(b))==null?void 0:i.content,msgId:b.msgId,quote:b.quote,reportingMeta:b.reportingMeta,serverTs:c(\"justknobx\")._(\"1753\")?void 0:b.serverTs,thread:b.thread,threadJid:f,ts:b.ts,type:d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME,xmaMessageType:b.xmaMessageType};i=d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").deleteDbMsg(a,b.rowId),j]).then(function(){d(\"MAWIndexedDb\").afterTransaction({tag:\"DeleteMessages\",value:d(\"MAWBridgeTypesCreators\").createBridgeDeleteMessages(b.thread,b.threadJid,[b])});c(\"gkx\")(\"23914\")&&c(\"justknobx\")._(\"1071\")&&d(\"MAWUploadMessagesBackup\").sendDeleteEchoMessage(b,g.jid);if(d(\"MAWDbMsg\").isMediaMsg(b)){var e=b.mediaId;e!=null&&d(\"MAWIndexedDb\").afterTransaction({tag:\"MediaExpired\",value:{mediaId:e,msgId:b.msgId,threadId:b.thread,threadJid:b.threadJid}})}return d(\"MAWThreadSnippetBuildTxns\").refreshThreadSnippet(a,g)});return d(\"MAWDexieTable\").dexieAll([i,a.unrenderedMessages.add(l),d(\"MAWDbReactionsTxns\").deleteReactionsByUniqueMsgIdentifiers(a,[{author:e,chatId:b.thread,externalId:b.externalId}]),d(\"MAWUpdateQuotedMsgTxns\").disassociateQuotedMsg(a,b.thread,b.externalId,b.author,d(\"MAWMsgType\").MSG_TYPE.REVOKED)]).then(function(){return d(\"MAWDbMsgTxns\").maybeUpdateThreadMsgsForDeleteForMe(a,g.chatId,b.msgId,b.sortOrderMs).then(function(){d(\"MAWDeleteForMeMsgContentCleaner\").addNewDeleteForMeMsgContentCleanerTimestamp(l.messageDeleteForMeTs);return d(\"WAResultOrError\").makeResult()})})}function k(a,b){return d(\"MAWDbXMATxns\").maybeGetXMAFromAssociatedMsgId(a,b.msgId).then(function(b){return d(\"MAWDbMsgTxns\").maybeGetMsg(a,b==null?void 0:b.msgId).then(function(b){if(b!=null)return d(\"MAWDbMsgTxns\").deleteDbMsg(a,b.rowId)})})}g.REVOKE_CONTENT_EXPIRATION_IN_SEC=h;g.handleDeleteForMe=a;g.deleteXMAStoryReplyMsg=k}),98);\n__d(\"MAWUnsendMsgContentCleaner\",[\"MAWMsgCleaner\",\"WALogger\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"UnsendMsgContentCleaner: Adding timestamps (\",\")\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"startUnsendMsgContentCleaner invoked\"]);j=function(){return a};return a}var k=null;function a(a){d(\"WALogger\").LOG(j()),k==null&&(k=new(d(\"MAWMsgCleaner\").MsgCleaner)(a,d(\"MAWMsgCleaner\").CLEANER_TYPE.UNSEND))}function b(a){if(k==null){var b=\"Trying to add new UnsendMsgContentCleanerTimestamp before the cleaner is initialized!\";d(\"WALogger\").ERROR(i(),b);throw c(\"err\")(b)}else d(\"WALogger\").DEV(h(),a),k.update(a)}function e(){return k}function f(){k=null}g.startUnsendMsgContentCleaner=a;g.addNewUnsendMsgContentCleanerTimestamp=b;g.getUnsendMsgContentCleaner_FOR_TESTING_ONLY=e;g.resetUnsendMsgContentCleaner_FOR_TESTING_ONLY=f}),98);\n__d(\"MAWWriteRevokeMessageTxns\",[\"FBLogger\",\"MAWAckLevel\",\"MAWBridgeMsg\",\"MAWBridgeTypesCreators\",\"MAWDbDeletedMessages\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbPendingStanza\",\"MAWDbReactionsTxns\",\"MAWDexieTable\",\"MAWEphemeralUtil\",\"MAWIndexedDb\",\"MAWJidUtils\",\"MAWMsgType\",\"MAWPendingStanzaCleaner\",\"MAWThreadSnippetBuildTxns\",\"MAWUnsendMsgContentCleaner\",\"MAWUpdateQuotedMsgTxns\",\"MAWUploadMessagesBackup\",\"MAWWriteDeleteMessageTxns\",\"MAWXMAUtils\",\"WATimeUtils\",\"err\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=6*d(\"WATimeUtils\").HOUR_SECONDS,i=30*d(\"WATimeUtils\").DAY_SECONDS;function a(a,b,e,f,g){var h=d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+i),k=b.author,m=b.externalId,n=b.revokedExternalId,o=g!=null?l(a,g):d(\"MAWDexieTable\").dexieResolve();return(f==null?d(\"MAWDbMsgTxns\").maybeGetMsgByExternalId(a,b.revokedExternalId,e.chatId,b.author):d(\"MAWDexieTable\").dexieResolve(f)).then(function(g){(f==null||g!=null)&&c(\"FBLogger\")(\"messenger_e2ee_web\").warn(\"Revoked message missing originalMsg incorrectly\");if(g==null){var i={deleteTs:h,externalIdWithType:n+\"_\"+d(\"MAWDbPendingStanza\").PENDING_REVOKED,pendingContent:{content:{ack:d(\"MAWAckLevel\").ACK.received,altIndex:void 0,author:k,externalId:m,revokedExternalId:n,thread:e.chatId,threadJid:e.jid,ts:b.ts,type:\"Revoked\"},type:d(\"MAWDbPendingStanza\").PENDING_TYPE.REVOKED}};return d(\"MAWDexieTable\").dexieAll([a.pendingStanzas.add(i),o]).then(function(b){b[0];b=b[1];d(\"MAWPendingStanzaCleaner\").addNewPendingStanzaCleanerTimestamp(h);b===!0&&d(\"MAWThreadSnippetBuildTxns\").refreshThreadSnippet(a,e)})}return o.then(function(){return j(a,g,e,b.externalId,b.revokedExternalId,b.serverTs,b.ts,!1)})})}function j(a,b,c,e,f,g,i,j){var l=babelHelpers[\"extends\"]({},b,{altIndex:void 0,externalId:e,msgContent:d(\"MAWDbMsg\").getMsgContent(b),originalTs:(e=b.serverTs)!=null?e:b.ts,revokedExternalId:f,serverTs:g,threadJid:c.jid,ts:i,type:\"Revoked\",unsendMsgContentDeleteTs:d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+h)});if(j){d(\"MAWUploadMessagesBackup\").sendDeleteEchoMessage(b,c.jid);return d(\"MAWDexieTable\").dexieResolve(l)}return k(a,b,l,c).then(function(){return l})}function k(a,b,c,e,f){var g;f===void 0&&(f=!1);g=d(\"MAWXMAUtils\").isXMAStoryReply((g=b.quote)==null?void 0:g.content.xmaMessageType)?d(\"MAWWriteDeleteMessageTxns\").deleteXMAStoryReplyMsg(a,b):d(\"MAWDexieTable\").dexieResolve();var h=d(\"MAWJidUtils\").toProtocolMsgId(b);h=h!=null?a.deletedMessages.add(babelHelpers[\"extends\"]({},h,{reason:d(\"MAWDbDeletedMessages\").DbDeletedMsgReasonEnum.Revoke})):d(\"MAWDexieTable\").dexieResolve();return d(\"MAWDexieTable\").dexieAll([a.messages.put(c),d(\"MAWDbReactionsTxns\").deleteReactionsByUniqueMsgIdentifiers(a,[{author:c.author,chatId:c.thread,externalId:c.revokedExternalId}]),d(\"MAWUpdateQuotedMsgTxns\").disassociateQuotedMsg(a,c.thread,c.revokedExternalId,c.author,d(\"MAWMsgType\").MSG_TYPE.REVOKED),g,h]).then(function(){f||d(\"MAWUnsendMsgContentCleaner\").addNewUnsendMsgContentCleanerTimestamp(c.unsendMsgContentDeleteTs);return d(\"MAWThreadSnippetBuildTxns\").refreshThreadSnippet(a,e)}).then(function(){b!=null&&d(\"MAWUploadMessagesBackup\").sendDeleteEchoMessage(b,b.threadJid);d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(c)});if(b!=null&&d(\"MAWDbMsg\").isMediaMsg(b)){var a=b.mediaId;a!=null&&d(\"MAWIndexedDb\").afterTransaction({tag:\"MediaExpired\",value:{mediaId:a,msgId:b.msgId,threadId:b.thread,threadJid:b.threadJid}})}d(\"MAWEphemeralUtil\").maybeClearEphemeralMsgCountdown(b)})}function b(a,b,e){if(b.type!==d(\"MAWMsgType\").MSG_TYPE.REVOKED)throw c(\"err\")(\"Cant mark unrevoked message revoked\");var f=d(\"MAWJidUtils\").toProtocolMsgId(b);f=f!=null?a.deletedMessages.add(babelHelpers[\"extends\"]({},f,{reason:d(\"MAWDbDeletedMessages\").DbDeletedMsgReasonEnum.Revoke})):d(\"MAWDexieTable\").dexieResolve();return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbReactionsTxns\").deleteReactionsByUniqueMsgIdentifiers(a,[{author:b.author,chatId:b.thread,externalId:b.revokedExternalId}]),d(\"MAWThreadSnippetBuildTxns\").refreshThreadSnippet(a,e),f]).then(function(){d(\"MAWUnsendMsgContentCleaner\").addNewUnsendMsgContentCleanerTimestamp(b.unsendMsgContentDeleteTs),c(\"qex\")._(\"1210\")!==!0&&d(\"MAWIndexedDb\").afterTransaction({tag:\"NewMsg\",value:d(\"MAWBridgeMsg\").createBridgeMsg(b)})})}function l(a,b){return b.type===d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT?a.messages[\"delete\"](b.rowId).then(function(){d(\"MAWIndexedDb\").afterTransaction({tag:\"DeleteMessages\",value:d(\"MAWBridgeTypesCreators\").createBridgeDeleteMessages(b.thread,b.threadJid,[b])});return!0}):d(\"MAWDexieTable\").dexieResolve(!1)}g.REVOKE_CONTENT_EXPIRATION_IN_SEC=h;g.writeIncomingRevokeMsg=a;g.revokeUnstoredMsg=j;g.markExistingMsgRevoked=k;g.markIncomingMessageRevoked=b}),98);\n__d(\"EchoBackupCompareUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){var b;return{contentSubtype:a.contentSubtype,contentType:a.contentType,reactionTsList:(b=a.reactionAuthoritativeTimestampMs)==null?void 0:b.map(function(a){return a.displayName==null?null:Number(a.displayName)\/1e3}).filter(Boolean).sort(),receiptTsList:(b=a.receiptStatusList)==null?void 0:b.map(function(a){return a.timestampMs==null?null:a.timestampMs\/1e3}).filter(Boolean).sort()}}function g(a,b){if(a==null&&b==null)return!0;if(a!=null&&b!=null)return a.length===b.length&&a.every(function(a,c){return a===b[c]});return a==null&&(b==null?void 0:b.length)===0||b==null&&(a==null?void 0:a.length)===0?!0:!1}function b(a,b){return b!=null&&a.contentSubtype===b.contentSubtype&&a.contentType===b.contentType&&g(a.reactionTsList,b.reactionTsList)}f.buildEchoDocCacheValue=a;f.echoEquals=b}),66);\n__d(\"LSEBPayloadSerializerError\",[],(function(a,b,c,d,e,f){a=Object.freeze({INVALID_BACKUP_OPERATION:-7,INVALID_CONTENT_TYPE:-6,INVALID_PAYLOAD_FORMAT:-5,CQL_DB_ERROR:-4,REQUIRED_COLUMN_NOT_PRESENT_ON_CLIENT:-3,DEPRECATED_SPROC:-2,UNKNOWN_ERROR:-1,NOT_AN_ERROR:0,BACKUP_NOT_FOUND:1,REQUIRED_TABLE_NOT_FOUND:2,NATIVE_OP_NOT_FOUND:3,BACKUP_UPLOAD_KILLSWITCHED:4,TASK_ID_NOT_FOUND:5,NOT_IMPLEMENTED:6,NOT_SUPPORTED_ON_WEB:7,DUPLICATE_TASK:8,CLIENT_STATE_NOT_LOADED:9,RECOVERY_CODE_NOT_FOUND:10,EPOCH_KEYS_NOT_FOUND:11,DEVICE_PAYLOAD_NOT_CREATED:12,NULL_DEVICE_PAYLOAD:13,EPOCH_PAYLOAD_NOT_CREATED:14,NULL_EPOCH_PAYLOAD:15,VIRTUAL_DEVICE_PAYLOAD_NOT_CREATED:16,NULL_VIRTUAL_DEVICE_PAYLOAD:17,DEVICE_METADATA_NOT_FOUND:18,NO_MATCHING_DEVICE_PUBLIC_KEY:19,NULL_MAILBOX_ROOT_KEY:20,NULL_ENCRYPTION_VERSION:21,NULL_OCMF_KEY:22,NULL_EPOCH_KEYS:23,NULL_DEVICE_ID:24,OPE_KEY_DERIVATION_FAILED:25,MESSAGE_KEY_DERIVATION_FAILED:26,NULL_MAILBOX_ROOT_KEY_V2:27,ECHO_DOCUMENT_ENCODING_FAILED:30,MESSAGE_PAYLOAD_ENCRYPTION_FAILED:40,SERVER_THREAD_ID_NOT_FOUND_FOR_JID:52,UNKNOWN_PROTOBUF_TYPE:60,SUPPLEMENTARY_DATA_KEY_UNEXPECTED:61,PROTOBUF_ENCRYPTION_FAILED:62,PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE:63,PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE:64,SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE:65,SUPPLEMENTAL_ENCRYPTION_FAILED:66,PROTOBUF_CONTEXT_ROW_NOT_FOUND:67,PROTOBUF_FORMATTING_FAILED:68,SUPPLEMENTAL_FORMATTING_FAILED:69,PROTOBUF_ALREADY_DELETED:70,THREAD_PK_NOT_FOUND_FOR_JID:100,MESSAGE_DECRYPTION_FAILED:101,EPOCH_KEY_FETCH_FAILED:102,TOO_MANY_OPEN_EPOCHS:103,MESSAGE_RANGE_PREPARE_FAILURE:104,ECHO_DOCUMENT_RESTORE_FAILED:105,MISMATCH_POINT_QUERY_MESSAGE_AND_RANGE_LENGTH:106,INITIAL_THREADS_FETCH_FOR_RESTORE_FAILED:107,MISSING_SUPPLEMENTAL_KEY_CIPHERTEXT:108,SUPPLEMENTAL_KEY_DECRYPTION_FAILURE:109,DEVICE_ID_MISMATCH:110,RESTORE_TO_TAM_INFO:111,MISSING_SERVER_THREAD_KEY:112,MESSAGE_PK_NOT_FOUND_IN_CLIENT_MESSAGES:200,OTID_NOT_FOUND_IN_ACT_MESSAGES:201,THREAD_ID_NOT_FOUND_IN_ACT_THREADS:202,THREAD_PK_NOT_FOUND_IN_CLIENT_THREADS:203,FAILED_TO_GET_THREAD_SORT_KEY:204,MEDIA_INFO_INVALID:205,REVERB_DB_NOT_ENABLED_FOR_INSTAMADILLO:206,SKIPPED_EB_DISABLED:300,SKIPPED_THREAD_NOT_ELIGIBLE:301,SKIPPED_MESSAGE_NOT_ELIGIBLE:302,NO_EPOCHS_FOUND:400,LATEST_EPOCH_QUERY_BY_ID_FAILED:401,FOUND_EPOCH_WITH_NULL_ROOT_KEY:402,FOUND_EPOCH_WITH_NULL_ANON_ID:403,NO_RECOVERY_CODE:501,NO_ERROR:601,ERROR_GENERAL:602,UNKNOWN:603,ONBOARDING_MATERIAL_DERIVATION_FAILURE:604,NULL_DEVICE_HMAC:605,MISSING_LATEST_EPOCH_AT_ONBOARDING:606,NO_THREADS_TO_COMPARE:701,START_SORT_KEY_FAILURE:702,END_SORT_KEY_FAILURE:703,LOOPING_UPLOAD_PAYLOAD_NOT_FOUND:704,NULL_ECHO_IDENTIFIERS:705,ECHO_TIMESTAMP_CONVERSION_FAILED:706,ECHO_PROTOBUF_THREAD_ID_MISMATCH:707,ECHO_PROTOBUF_TIMESTAMP_MISMATCH:708,ECHO_PROTOBUF_OTID_MISMATCH:709,NULL_ECHO_DOCUMENT:710,INVALID_PROTOBUF_BACKUP_ACTION:711,EMPTY_ENCODED_ECHO_DOCUMENT:712,ECHO_DOCUMENT_ENCODING_UNKNOWN_ENCODING_ERROR:750,ECHO_DOCUMENT_ENCODING_MESSAGE_PK_NOT_FOUND_ERROR:751,ECHO_DOCUMENT_ENCODING_DISK_WRITE_CHECK_FAILED:752,ECHO_DOCUMENT_ENCODING_THREAD_TRANSPORT_ID_FETCH_FAILED:753,ECHO_DOCUMENT_ENCODING_FILE_WRITE_FAILED:754,ECHO_DOCUMENT_ENCODING_DISK_WRITE_DISABLED:755,ECHO_DOCUMENT_ENCODING_SHOULD_NOT_PERSIST:756,MISSING_SUPPLEMENTAL_DATA:757,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_REPLY_PROXY_ERROR:758,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_EDIT_MESSAGE_QUERY_ERROR:759,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_EDIT_MESSAGE_ERROR:760,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_RECEIPTS_ERROR:761,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_REACTIONS_ERROR:762,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_VISUAL_MESSAGE_ACTIONS_ERROR:763,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_POLLS_ERROR:764});f[\"default\"]=a}),66);\n__d(\"MAWBridgeUpload\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b,c,d,e,f,g,h,i,j,k,l){return{actionType:g,authTs:d,echoDocument:f,echoEncodingLatencyNs:e,errorCode:h,errorMessage:i,messageId:a,protoMsg:l,sortOrderMs:c,threadId:b,traceId:j,uploadTrackingInstanceKey:k}}function b(a,b,c,d,e,f){return{actionType:f,echoDocument:e,folderType:b,threadId:a,transportKey:c,ts:d}}function c(a,b,c,d,e,f,g,h,i){return{chatId:a,deliveryObjectId:b,mediaType:c,messageId:d,productType:e,threadId:f,threadJid:g,traceId:i,ts:h}}f.createBridgeUploadMessage=a;f.createBridgeDeleteMessagesOfThread=b;f.createBridgeUploadAttachment=c}),66);\n__d(\"MAWUploadThreadTxns\",[\"$InternalEnum\",\"MAWFolderTypes\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"$InternalEnum\")({INBOX:0,PENDING:1,OTHER:2,SPAM:3,ARCHIVED:4,HIDDEN:5});function i(a){switch(a){case d(\"MAWFolderTypes\").FOLDER_ID.INBOX:return h.INBOX;case d(\"MAWFolderTypes\").FOLDER_ID.PENDING:return h.PENDING;case d(\"MAWFolderTypes\").FOLDER_ID.ARCHIVED:return h.ARCHIVED;default:return h.INBOX}}function a(a){return i(a).toString()}g.FolderType=h;g.getFolderTypeAsText=a}),98);\n__d(\"MAWBridgeEventTransmitter\",[\"MAWBridge\",\"MAWBridgeMsg\",\"MAWBridgeTrace\",\"MAWBridgeTypesCreators\",\"MAWBridgeUpload\",\"MAWIndexedDb\",\"MAWUploadThreadTxns\",\"WAJids\",\"WATimeUtils\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c,e,f){d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"IssuePointQuery\",value:{jid:f,messageId:a,startSortKey:c,taskSource:e,threadId:b}}]})}function b(a,b){d(\"MAWIndexedDb\").afterTransaction({tag:\"DeleteMessagesOfThread\",value:d(\"MAWBridgeUpload\").createBridgeDeleteMessagesOfThread(d(\"WAJids\").threadIdForChatJid(a.jid),d(\"MAWUploadThreadTxns\").getFolderTypeAsText(a.folder),\"AdvancedCrypto\",(a=b)!=null?a:d(\"WATimeUtils\").castToMillisTime(1),null,2)})}function e(a,b,c,e,f,g){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgsLoaded\",value:d(\"MAWBridgeTypesCreators\").createBridgeMsgsLoadedInfo(a,b,c,e,f,g)})}function f(a,b,c){d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"StartTrace\",value:d(\"MAWBridgeTrace\").createBridgeStartTraceData(a,b,c)}]})}function h(a,b,e){var f=c(\"qpl\")._(521482576,\"1069\");(e==null?void 0:e.get(a.externalId))!=null?d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"NewMsg\",value:d(\"MAWBridgeMsg\").createBridgeMsg(a,e.get(a.externalId),void 0,f,b,\"EncryptedBackups\")}]}):d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"NewMsg\",value:d(\"MAWBridgeMsg\").createBridgeMsg(a,void 0,void 0,f,b,\"EncryptedBackups\")}]})}function i(a,b,c,e){d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({cannotReplyReason:a,folder:b,threadId:c,threadJid:e})}]})}function j(a,b,c,e){d(\"MAWIndexedDb\").afterTransaction({tag:\"DeleteMessageRangesV2\",value:{minMsgId:a,minTimestampMs:b,threadId:c,threadJid:e}})}g.issuePointQueryOutsideTxn=a;g.deleteMessagesOfThreadAfterTxn=b;g.issueMsgLoadedEventAfterTxn=e;g.startTraceOutsideTxn=f;g.issueNewMsgUiEventOutsideTxn=h;g.updateThreadOutsideTxn=i;g.deleteMessageRangesV2AfterTxn=j}),98);\n__d(\"MAWConstants\",[],(function(a,b,c,d,e,f){\"use strict\";a=5;b=\"Facebook user\";c=\"Instagram user\";d=24;e=3;var g=50;f.MESSAGE_RETRY_COUNT_LIMIT=a;f.FB_UNKNOWN_USER=b;f.INS_UNKNOWN_USER=c;f.MAX_APPDATA_RECIPIENTS=d;f.CURRENT_REGISTRATION_VERSION=e;f.BRIDGE_UPLOAD_BATCH_SIZE=g}),66);\n__d(\"MAWEBBackendQPLUtils\",[\"MAWEBSwitch\",\"MAWQplProxy\",\"Random\",\"WAHashStringToNumber\",\"gkx\",\"hashString\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){b=(b=b)!=null?b:c(\"Random\").uint32();d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(521479468,\"1752\"),{\"int\":{numMessagesRestored:0},string:{threadId:a}},b);return b}function b(a,b){d(\"MAWQplProxy\").sendQPLSuccessThroughBridge(c(\"qpl\")._(521479468,\"1752\"),{string:{threadId:b}},a)}function e(a){return a.dyiBatch.each(function(a){if(a.isThread===!1)return;d(\"MAWQplProxy\").sendQPLFailThroughBridge(c(\"qpl\")._(521479468,\"1752\"),\"dyi_backup_restore_error\",{string:{threadId:a.threadId}},a.qplInstanceKeyForThread)})}function f(a,b){if(b.qplInstanceKeyForThread==null)return;a=a===!1?\"dyi_backup_restore_continuing\":\"dyi_backup_restore_finished\";var e=b.qplInstanceKeyForThread;d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(521479468,\"1752\"),a,{annotations:{\"int\":{numMessages:b.numMessages,numMessagesRestored:b.numMessagesRestored},string:{threadId:b.threadId}},instanceKey:(a=e)!=null?a:void 0})}function h(a,b){if(a==null)return;d(\"MAWQplProxy\").sendQPLErrorThroughBridge(c(\"qpl\")._(521479468,\"1752\"),\"dyi_backup_restore_thread_halted\",{debugInfo:\"DYI attempting to re-restore previous batch - halting DYI for thread \"+b,instanceKey:a})}function i(a,b){if(a==null)return;d(\"MAWQplProxy\").sendQPLErrorThroughBridge(c(\"qpl\")._(521479468,\"1752\"),\"dyi_backup_restore_batch_not_in_progress\",{debugInfo:\"DYI for thread with jid \"+b+\" is not currently in progress\",instanceKey:a})}function j(a,b){if(a==null)return;d(\"MAWQplProxy\").sendQPLErrorThroughBridge(c(\"qpl\")._(521479468,\"1752\"),\"dyi_backup_restore_stopping_dyi\",{debugInfo:\"Error occurred on restore - stopping DYI for thread with chat jid \"+b,instanceKey:a})}function k(a,b){if(a==null)return;d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(521478596,\"1329\"),\"dyi_get_thread_list\",{annotations:{\"int\":{threadsToRestore:b}},instanceKey:a})}function l(a){return c(\"hashString\")(a)}function m(a,b){if(c(\"gkx\")(\"23946\")!==!0)return;var e=l(b);d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(521485625,\"1876\"),{bool:{eb_switch:c(\"MAWEBSwitch\").isEnabled(),is_retroactive_backups_upload:a},string:{trace_id:b}},e)}function n(a,b,e){if(c(\"gkx\")(\"23946\")!==!0||a==null)return;a=l(a);d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(521485625,\"1876\"),b,{annotations:e,instanceKey:a})}function o(a,b,e){if(c(\"gkx\")(\"23946\")!==!0||a==null)return;a=l(a);d(\"MAWQplProxy\").sendQPLFailThroughBridge(c(\"qpl\")._(521485625,\"1876\"),b,e,a)}function p(a,b,e){if(a==null)return;a=d(\"WAHashStringToNumber\").hashStringToNumber(a);d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(521485815,\"2166\"),b,{annotations:e,instanceKey:a})}function q(a,b,e){if(a==null)return;a=d(\"WAHashStringToNumber\").hashStringToNumber(a);d(\"MAWQplProxy\").sendQPLFailThroughBridge(c(\"qpl\")._(521485815,\"2166\"),b,e,a)}g.startDYIBackupRestoreQplUserFlow=a;g.endSuccessDYIBackupRestoreQplUserFlow=b;g.cleanupDYIBackupRestoreQplUserFlow=e;g.addPointDYIBackupRestoreQplUserFlow=f;g.markErrorDyiBackupRestoreThreadHalt=h;g.markErrorDyiBackupRestoreBatchNotInProgress=i;g.markErrorDyiBackupRestoreStoppingDyi=j;g.logDyiE2EGetThreadList=k;g.getQplInstanceKey=l;g.startEBBackupUploadQplUserFlow=m;g.addPointEBBackupUpload=n;g.endFailEBBackupUpload=o;g.logMediaRestoreFromMIQPLPoint=p;g.logMediaRestoreFromMIQPLEndFailure=q}),98);\n__d(\"MAWEncryptedBackupCacheManager\",[],(function(a,b,c,d,e,f){\"use strict\";var g=new Map(),h=new Map(),i=new Map();function a(a,b){h.set(a,{cache:b,status:\"restoring\"})}function b(a){a.forEach(function(a){var b=h.get(a);b!=null&&h.set(a,{cache:b.cache,status:\"done\"})})}function c(a){a=h.get(a);if(a!=null)return a.status;else return\"none\"}function d(a){return(a=h.get(a))==null?void 0:a.cache}function e(a){return h[\"delete\"](a)}function j(a,b){var c=g.get(a)||new Set();c.add(b);g.set(a,c)}function k(a,b){a=g.get(a);return a!=null?a==null?void 0:a.has(b):!1}function l(a,b){a=g.get(a);a!=null&&a[\"delete\"](b)}function m(a){return h.has(a)}function n(a){return i.has(a)}function o(a){return i.get(a)}function p(a){n(a)&&i[\"delete\"](a)}function q(a,b){i.set(a,b)}f.restoredCache=h;f.addMsgEntryToRestoredCache=a;f.setRestoredCacheStatusAsDone=b;f.getRestoredCacheStatus=c;f.getRestoredCache=d;f.removeFromRestoredCache=e;f.addMsgEntryToReuploadCache=j;f.checkForMsgEntryInReuploadCache=k;f.removeMsgEntryFromReuploadCache=l;f.peekRestoreCache=m;f.peekPendingStanzaCache=n;f.getPendingStanzaCacheValue=o;f.removePendingStanzaCacheValue=p;f.addPendingStanzaToPendingStanzaCache=q}),66);\n__d(\"MAWUploadRetryStatusUtil\",[\"FBLogger\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWReStoreTiming\",\"MAWTransactionMode\",\"ReQL\",\"WALogger\",\"asyncToGeneratorRuntime\",\"gkx\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Unhandled error in postBackupWriteCompletionHook job: \",\"\"]);h=function(){return a};return a}a=c(\"gkx\")(\"23906\")?d(\"MAWReStoreTiming\").measureDuration(\"checkRetroactiveBackupsStateStore\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){return(yield d(\"ReQL\").firstAsync(d(\"ReQL\").fromTableAscending(a.tables.e2ee_retroactiveBackupsState,[])))!=null});return function(b){return a.apply(this,arguments)}}()):d(\"MAWIndexedDb\").makeMsgrTransactor({retroactiveBackupsState:d(\"MAWTransactionMode\").READONLY},\"checkRetroactiveBackupsStateStore\",function(a){return function(){return a.retroactiveBackupsState.count().then(function(a){return a>0?!0:!1})}});e=d(\"MAWIndexedDb\").makeMsgrTransactor({uploadRetryStatus:d(\"MAWTransactionMode\").READWRITE},\"uploadRetry\",function(a){return function(b){return a.uploadRetryStatus.bulkAdd(b.map(function(a){return{externalId:a.msg.externalId,lastRetryTs:a.lastRetryTs,retriedTimes:a.retriedTimes,traceId:a.traceId}})).then(function(a){})}});var i=d(\"MAWIndexedDb\").makeMsgrTransactor({uploadRetryStatus:d(\"MAWTransactionMode\").READWRITE},\"bulkRemoveRetries\",function(a){return function(b){return a.uploadRetryStatus.where(\"traceId\").anyOf(b)[\"delete\"]()}});f=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"postBackupWriteCompletionHook\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.traceIdArray;if(!(c(\"gkx\")(\"23947\")||c(\"qex\")._(\"229\")===!0))return;if(a==null||a.length===0){c(\"FBLogger\")(\"labyrinth_web\").info(\"[labyrinth_web] postBackupWriteCompletionHook get null\/empty input.\");return}try{yield i(a)}catch(a){d(\"WALogger\").ERROR(h(),a)}});return function(b){return a.apply(this,arguments)}}()).end();g.checkRetroactiveBackupsStateStore=a;g.bulkInsert=e;g.bulkRemove=i;g.postBackupWriteCompletionHook=f}),98);\n__d(\"MAWUploadMessagesBackup\",[\"$InternalEnum\",\"EchoBackupCompareUtils\",\"EchoMessage\",\"LSDataTraceCheckPoint\",\"LSDataTraceType\",\"LSEBPayloadSerializerError\",\"LSIntEnum\",\"LSMEBTaskCreationSource\",\"MAWBridge\",\"MAWBridgeEventTransmitter\",\"MAWBridgeTrace\",\"MAWBridgeUpload\",\"MAWConstants\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbMsgUtil\",\"MAWDbPendingStanza\",\"MAWDbThreadTxns\",\"MAWDbXMA\",\"MAWDexieTable\",\"MAWEBBackendQPLUtils\",\"MAWEBSwitch\",\"MAWEBUploadMessageUtils\",\"MAWEBUploadTrackingUtils\",\"MAWEncryptedBackupCacheManager\",\"MAWGlobals\",\"MAWHMACKey\",\"MAWHandlePendingStanzasInRestoreV2\",\"MAWIndexedDb\",\"MAWQplProxy\",\"MAWReceiveToUploadUtils\",\"MAWTraceUtils\",\"MAWTransactionMode\",\"MAWUploadRetryStatusUtil\",\"Promise\",\"WAGlobals\",\"WAJids\",\"WALogger\",\"WAProtocolMsgId\",\"WAStanzaUtils\",\"WATimeUtils\",\"asyncToGeneratorRuntime\",\"cr:5916\",\"gkx\",\"qex\",\"qpl\",\"requireDeferred\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Cannot proceed with encodeAndSendEchoMessage: Encrypted Backups are not enabled\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Cannot proceed with encodeAndSendEchoMessage: Encrypted Backups are not enabled\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] \",\"\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Duplicated upload stopped by cache, extId: \",\"\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] threadJid is null for pendingStanza\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] thread is null for pendingStanza\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] externalId is null for pendingStanza\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] pendingStanzaMessageType: \",\" not supported\"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Unhandled error in uploadMessagesBackup job: \",\"\"]);v=function(){return a};return a}var w=c(\"requireDeferred\")(\"EchoSerializationFailureFalcoEvent\").__setRef(\"MAWUploadMessagesBackup\"),x=c(\"requireDeferred\")(\"EchoSerializationSuccessFalcoEvent\").__setRef(\"MAWUploadMessagesBackup\"),y=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"echoSerialization\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.messageIds,c=a.oldTraceIdMap,e=a.pendingStanzaIds,f=a.reactionIds,g=a.uploadTrackingInstanceMap;a=a.xmaIds;try{a=d(\"MAWDbXMA\").convertNumbersToXMAIds(a);e=(e=e)!=null?e:[];yield A(b,e,f,a,c,g)}catch(a){d(\"WALogger\").ERROR(v(),a)}});return function(b){return a.apply(this,arguments)}}()).end();function a(a){return a==null?[]:a.filter(Boolean).map(function(a){if(a!=null)return d(\"MAWDbMsg\").toMsgId(a)}).filter(Boolean)}var z=b(\"$InternalEnum\").Mirrored([\"FATAL\",\"WARN\"]);function A(a,b,c,d,e,f){a=F(a,b,c,d).then(function(a){return R(a,void 0,!1,e,f)});return a.then(function(){})}function B(a,b){return a.messages.bulkGet(b).then(function(a){return a.filter(Boolean)})}function C(a,b){return a.pendingStanzas.bulkGet(b).then(function(a){return a.filter(Boolean).map(function(a){var b=a.pendingContent.type;if(b==null||b!==d(\"MAWDbPendingStanza\").PENDING_TYPE.REVOKED&&b!==d(\"MAWDbPendingStanza\").PENDING_TYPE.DELETE_FOR_ME){d(\"WALogger\").WARN(u(),b);return}b=a.pendingContent.content.externalId;if(b==null){d(\"WALogger\").WARN(t());return}b=a.pendingContent.content.thread;if(b==null){d(\"WALogger\").WARN(s());return}b=a.pendingContent.content.threadJid;if(b==null){d(\"WALogger\").WARN(r());return}d(\"MAWHandlePendingStanzasInRestoreV2\").issuePointQueryForPendingStanza(a)})}).then(function(a){return[]})}function D(a,b){return a.reactions.bulkGet(b).then(function(b){b=b.filter(Boolean).map(function(b){return d(\"MAWDbThreadTxns\").getThreadByJid(a,b.threadJid).then(function(e){var f=e.success?e.value:null;if(f!=null&&f.chatId!=null){e=b.reactToAuthor;e=e===d(\"WAGlobals\").getMyUserJid()?d(\"WAJids\").AUTHOR_ME:e;return d(\"MAWDbMsgTxns\").maybeGetMsgByExternalId(a,b.reactToExternalId,f.chatId,e).then(function(a){if(a==null&&!d(\"MAWEncryptedBackupCacheManager\").peekRestoreCache(b.reactToExternalId)){var e=d(\"WAJids\").threadIdForChatJid(f.jid);d(\"MAWEncryptedBackupCacheManager\").addMsgEntryToReuploadCache(f.chatId,b.reactToExternalId);d(\"MAWBridgeEventTransmitter\").issuePointQueryOutsideTxn(b.reactToExternalId,e,void 0,c(\"LSMEBTaskCreationSource\").EB_POINT_QUERY_IN_ACT,f.jid)}return a})}})});return d(\"MAWDexieTable\").dexieAll(b).then(function(a){return a.filter(Boolean)})})}function E(a,b){b=b.filter(Boolean);return a.xma.bulkGet(b).then(function(b){b=b.map(function(a){return a==null?void 0:a.associatedMessageId}).filter(Boolean);return a.messages.where(\"msgId\").anyOf(b).toArray()})}var F=d(\"MAWIndexedDb\").makeMsgrTransactor({messages:(j=d(\"MAWTransactionMode\")).READONLY,pendingStanzas:j.READONLY,reactions:j.READONLY,threads:j.READONLY,xma:j.READONLY},\"uploadMsgBackupGetMsgs\",function(a){return function(b,c,d,e){return T(a,b,c,d,e)}});function G(a,b,c){H({tag:\"UploadMessageByBatch\",value:{checkPoint:a,messages:b,qpl:c}})}function H(a){a=[a];d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:a})}function I(a,b,e){var f=[],g=[];if(a!=null){var h=c(\"gkx\")(\"23946\"),j=c(\"qpl\")._(521485625,\"1876\");b.forEach(function(b){var c=b.checkPoint;b=b.pointName;h&&b!=null&&f.push({action:{name:b,type:\"point\"},annotations:null,event:j,instanceKey:d(\"MAWEBBackendQPLUtils\").getQplInstanceKey(a),timestamp:d(\"MAWQplProxy\").performanceAbsoluteNow()});g.push(d(\"MAWBridgeTrace\").createBridgeTraceRecordCheckpointData((i||(i=d(\"LSIntEnum\"))).ofNumber(c),(b=e)!=null?b:a,void 0,!1,-1,void 0))})}return{checkPointArray:g,qplArray:f}}function J(a,b,c,e,f,g){var h=b.xOfflineThreadingId;if(h==null)return!1;var i=d(\"WAStanzaUtils\").toStanzaId(h);if(d(\"MAWEncryptedBackupCacheManager\").getRestoredCacheStatus(i)===\"done\"){var j=d(\"EchoBackupCompareUtils\").buildEchoDocCacheValue(b);j=d(\"EchoBackupCompareUtils\").echoEquals(j,d(\"MAWEncryptedBackupCacheManager\").getRestoredCache(i));d(\"MAWEncryptedBackupCacheManager\").removeFromRestoredCache(i);if(j){d(\"WALogger\").LOG(q(),i);return!1}}if(c!=null&&e!=null){j=window.performance.now();i=d(\"EchoMessage\").encodeEchoMessage(b);var k=window.performance.now();a.push(d(\"MAWBridgeUpload\").createBridgeUploadMessage(h,b.threadId,d(\"MAWEBUploadMessageUtils\").echoOverrideMessageSortOrder(c),c.serverTs,(k-j)*1e6,i,1,null,null,e,O(g,c.externalId),f));P(\"point\",g,c.externalId,\"construct_echo_success\");L(c.externalId,e);return!0}return!1}function K(a,b){a!=null&&d(\"MAWReceiveToUploadUtils\").checkUploadEligbility(a)&&void w.load().then(function(c){return c.log(function(){return{message_id:a,trace_id:b}})})}function L(a,b){a!=null&&d(\"MAWReceiveToUploadUtils\").checkUploadEligbility(a)&&void x.load().then(function(c){return c.log(function(){return{message_id:a,trace_id:b}})})}function M(a,b,c){if(a==null||b==null)return c;else{b=O(b,a.externalId);if(b!=null)return b.toString();else return c}}function N(a,e,f){var g=new Map();a.forEach(function(a){return g.set(a.dbMsg.externalId,a)});return S(a).then(function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=[],h=[],j=[];a.forEach(function(a){var k,l=g.get(a.externalId)||{dbMsg:null,traceId:null},m=l.dbMsg;l=l.traceId;k=m!=null?(k=e==null?void 0:e.find(function(a){var b=d(\"MAWDbMsgUtil\").getProtocolMsgIdFromDbMsg(m);return b==null?!1:d(\"WAProtocolMsgId\").equals(a.msgId,b)}))!=null?k:void 0:void 0;var n=a.echoMessage,o=[],q=M(m,f,l);if(a.maybeErrorDetail!=null){a=a.maybeErrorDetail;if(m!=null&&l!=null)if(a.uploadErrorType===z.WARN||a.errorCode===c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID){var r;r=a.uploadErrorType===z.WARN?\"possible error when constructing echo message: \"+((r=a.errorMsg)!=null?r:\"\"):\"media info invalid thrown from constructEchoMessage, error msg: \"+((r=a.errorMsg)!=null?r:\"\");d(\"WALogger\").WARN(p(),r);P(\"success\",f,m.externalId,\"construct_echo_success_media\/xma_warn\/error\",{string:{errorMsg:r}});K(m.externalId,l)}else{b.push(d(\"MAWBridgeUpload\").createBridgeUploadMessage((r=n==null?void 0:n.xOfflineThreadingId)!=null?r:\"0\",(r=n==null?void 0:n.threadId)!=null?r:\"0\",d(\"MAWEBUploadMessageUtils\").echoOverrideMessageSortOrder(m),m.serverTs,null,null,1,a.errorCode,a.errorMsg,l,O(f,m.externalId),k));P(\"fail\",f,m.externalId,\"construct_echo_failed\",{string:{errorMsg:a.errorMsg}});L(m.externalId,l)}return}if((n==null?void 0:n.xOfflineThreadingId)==null){if(m!=null&&l!=null){b.push(d(\"MAWBridgeUpload\").createBridgeUploadMessage(\"0\",(r=n==null?void 0:n.threadId)!=null?r:\"0\",d(\"MAWEBUploadMessageUtils\").echoOverrideMessageSortOrder(m),m.serverTs,null,null,1,c(\"LSEBPayloadSerializerError\").OTID_NOT_FOUND_IN_ACT_MESSAGES,null,l,O(f,m.externalId),k));P(\"fail\",f,m.externalId,\"construct_echo_failed\",{string:{errorMsg:\"oitd not found\"}});L(m.externalId,l)}}else{a=J(b,n,m,l,k,f);if(!a){m!=null&&P(\"success\",f,m.externalId,\"construct_echo_success_duplicate_message\",{string:{errorMsg:\"not unique from cache\"}});return}}o.push({checkPoint:c(\"LSDataTraceCheckPoint\").LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT,pointName:\"issue_message_upload_ui_event\"});r=I(l,o,q);n=r.checkPointArray;k=r.qplArray;h.push.apply(h,k);j.push.apply(j,n);d(\"MAWTraceUtils\").startNewTrace((i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceType\").ENCRYPTED_BACKUPS_UPLOAD),d(\"MAWTraceUtils\").CONTEXT_BACKUP_UPLOAD,q);(b.length>=d(\"MAWConstants\").BRIDGE_UPLOAD_BATCH_SIZE||j.length>=d(\"MAWConstants\").BRIDGE_UPLOAD_BATCH_SIZE)&&(G(j.slice(),b.slice(),h.slice()),j.length=0,b.length=0,h.length=0)});(b.length>0||j.length>0)&&G(j,b,h);return a});return function(b){return a.apply(this,arguments)}}())}function O(a,b){return a.get(b)}function P(a,b,c,e,f){b=O(b,c);if(b!=null)switch(a){case\"success\":d(\"MAWEBUploadTrackingUtils\").endSuccess(b,e,f);break;case\"fail\":d(\"MAWEBUploadTrackingUtils\").endFail(b,e,f);break;case\"point\":d(\"MAWEBUploadTrackingUtils\").addPoint(b,e,f);break}}function Q(a){var b=new Set(),c=[];a.forEach(function(a){var e=a.externalId+\"|\"+a.thread.toString()+\"|\"+a.author;d(\"MAWEncryptedBackupCacheManager\").getRestoredCacheStatus(a.externalId)!==\"restoring\"&&!b.has(e)&&(b.add(e),c.push(a))});return c}function R(a,e,f,g,i,j){if(!c(\"MAWEBSwitch\").isEnabled()){d(\"WALogger\").LOG(o());i.forEach(function(a,b){d(\"MAWEBUploadTrackingUtils\").endSuccess(a,\"upload_tracking_cancelled_eb_turned_off_upload\",{string:{externalId:b,from:\"uploadUniqueMessage\"}})});return(h||(h=b(\"Promise\"))).resolve()}var k=Q(a).filter(function(a){return d(\"MAWEBUploadTrackingUtils\").isUploadSupported(a)}).map(function(a){var b;P(\"point\",i,a.externalId,\"construct_echo_start\",f!=null?{bool:{isRetroactiveBackupsUpload:f}}:void 0);b=((b=O(i,a.externalId))!=null?b:d(\"MAWTraceUtils\").createTraceId()).toString();d(\"MAWEBBackendQPLUtils\").startEBBackupUploadQplUserFlow(f,b);f!=null&&f&&d(\"MAWEBBackendQPLUtils\").addPointEBBackupUpload(b,\"retroactive_backup_upload_started\");return{lastRetryTs:d(\"WATimeUtils\").millisTime(),msg:a,retriedTimes:0,traceId:b}});return(c(\"gkx\")(\"23947\")||c(\"qex\")._(\"229\")===!0?d(\"MAWUploadRetryStatusUtil\").bulkInsert(k):(h||(h=b(\"Promise\"))).resolve()).then(function(a){return U(k.map(function(a){var b=a.msg.quoteExternalId;if(b!=null)return{dbMsg:a.msg,quotedMsg:e==null?void 0:e.get(b),traceId:a.traceId};else return{dbMsg:a.msg,traceId:a.traceId}}),g,j,i)}).then(function(){return(h||(h=b(\"Promise\"))).resolve()})}function e(a,e,f){if(!c(\"MAWEBSwitch\").isEnabled()){d(\"WALogger\").LOG(n());e.forEach(function(a,b){d(\"MAWEBUploadTrackingUtils\").endSuccess(a,\"upload_tracking_cancelled_eb_turned_off_upload\",{string:{externalId:b,from:\"uploadMessageFromUploadQueue\"}})});return(h||(h=b(\"Promise\"))).resolve()}return U(a.filter(function(a){return d(\"MAWEBUploadTrackingUtils\").isUploadSupported(a)}).map(function(a){var b;b=((b=O(e,a.externalId))!=null?b:d(\"MAWTraceUtils\").createTraceId()).toString();return{dbMsg:a,traceId:b}}),void 0,f,e).then(function(){return(h||(h=b(\"Promise\"))).resolve()})}var S=d(\"MAWIndexedDb\").makeMsgrAndSignalTransactor({contacts:j.READONLY,editMsgHistory:j.READONLY,media:j.READONLY,mediaBackup:j.READONLY,messages:j.READONLY,reactions:j.READONLY,threads:j.READONLY,xma:j.READONLY},\"constructEchoMessage\",function(a){return function(){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b(\"cr:5916\").constructEchoMessage.apply(b(\"cr:5916\"),[a].concat(d))}});function T(a,b,e,f,g){b=B(a,b);c(\"gkx\")(\"23948\")?C(a,e):d(\"MAWDexieTable\").dexieResolve();e=D(a,f);f=E(a,g);return d(\"MAWDexieTable\").dexieAll([b,e,f]).then(function(a){return a.flat()})}function U(a,e,f,g){var j=new Map();a.forEach(function(a){var b=a.dbMsg;a=a.traceId;d(\"MAWEBBackendQPLUtils\").addPointEBBackupUpload(a,\"echo_message_upload_begin\",{string:{message_type:b.type}});var f=d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(521475102,\"868\"),{bool:{eb_switch:c(\"MAWEBSwitch\").isEnabled()},\"int\":{sort_order:b.sortOrderMs,timestamp:Date.now()},string:{hashed_msgid:V(b.externalId),message_id:b.externalId,message_type:b.type.toString(),org_trace_id:e==null?void 0:e.get(b.externalId),trace_id:a}});j.set(b.externalId,{constructEchoFlow:f,traceId:a})});a=N(a,f,g)[\"catch\"](function(a){a=\"[labyrinth_web] Error while encode and upload message to backup: \"+String(a);d(\"WALogger\").ERROR(m(),a);for(var e of j.values())d(\"MAWEBBackendQPLUtils\").endFailEBBackupUpload(e.traceId,\"echo_message_upload_failure\",{string:{error_message:a}}),d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(e.traceId,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE),[],a),e.constructEchoFlow.endFail(\"serialisation_failure\");return(h||(h=b(\"Promise\"))).resolve()});return a.then(function(a){a==null?void 0:a.forEach(function(a){var b;b=(b=a.echoMessage)==null?void 0:b.messageId;if(b!=null&&j.has(d(\"WAStanzaUtils\").toStanzaId(b))){var e;b=j.get(d(\"WAStanzaUtils\").toStanzaId(b))||{constructEchoFlow:null,traceId:null};var f=b.constructEchoFlow;b=b.traceId;e=a==null?void 0:(e=a.maybeErrorDetail)==null?void 0:e.uploadErrorType;a=a==null?void 0:(a=a.maybeErrorDetail)==null?void 0:a.errorMsg;if(e!=null)switch(e){case z.WARN:a!=null&&d(\"WALogger\").WARN(l(),a);f==null?void 0:f.endSuccess({bool:{is_skipped:!0}});b!=null&&(d(\"MAWEBBackendQPLUtils\").addPointEBBackupUpload(b,\"echo_message_upload_invalid_request\"),d(\"MAWTraceUtils\").recordInvalidUploadRequestAndFlushTrace(b,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]));break;case z.FATAL:a=(e=a)!=null?e:\"[labyrinth_web] unknown error in the upload message flow\";d(\"WALogger\").ERROR(k(),a);b!=null&&(d(\"MAWEBBackendQPLUtils\").endFailEBBackupUpload(b,\"echo_message_upload_failure\",{string:{error_message:a}}),d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(b,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE),[],a));f==null?void 0:f.endFail(\"serialisation_failure\");break}else f==null?void 0:f.endSuccess()}});return(h||(h=b(\"Promise\"))).resolve()})}function V(a){if(a==null)return\"\";var b=d(\"MAWGlobals\").getHMACKey();return d(\"MAWHMACKey\").hmacTweetNaCl(a,b)}function f(a,b){var e=d(\"MAWTraceUtils\").startNewTrace((i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceType\").ENCRYPTED_BACKUPS_UPLOAD),d(\"MAWTraceUtils\").CONTEXT_BACKUP_UPLOAD);d(\"MAWTraceUtils\").recordCheckpointForTrace(e,i.ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN),[d(\"MAWTraceUtils\").getTagForMsgType(a.type)],!1);b=b==null?a.thread.toString():d(\"WAJids\").threadIdForChatJid(b);d(\"MAWIndexedDb\").afterTransaction({tag:\"UploadMessage\",value:d(\"MAWBridgeUpload\").createBridgeUploadMessage(a.externalId,b,d(\"MAWEBUploadMessageUtils\").echoOverrideMessageSortOrder(a),a.serverTs,null,null,2,null,null,e,null)})}g.uploadMessagesBackup=y;g.convertStringMsgIdtoMsgId=a;g.UploadErrorType=z;g.deduplicateMessageArray=Q;g.uploadUniqueMessage=R;g.uploadMessageFromUploadQueue=e;g.getMessagesBackupForUpload=T;g.sendDeleteEchoMessage=f}),98);\n__d(\"MAWHandlePendingStanzasInRestoreV2\",[\"I64\",\"LSMEBTaskCreationSource\",\"MAWBridgeEventTransmitter\",\"MAWDbPendingStanza\",\"MAWDbPendingStanzaTxns\",\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWEBUploadTrackingUtils\",\"MAWEncryptedBackupCacheManager\",\"MAWIndexedDb\",\"MAWReStoreTiming\",\"MAWRestoreDbState\",\"MAWTransactionMode\",\"MAWUploadMessagesBackup\",\"MAWWriteRevokeMessageTxns\",\"Promise\",\"ReQL\",\"WAJids\",\"WALogger\",\"cr:553\",\"nullthrows\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] pendingStanza type \",\" is not supported\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] revokedExternalId is null for pendingStanza\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] revokedExternalId is null for pendingStanza\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] threadJid is null for pendingStanza\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] pendingStanzaTs is null for pendingStanza\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] revokedExternalId is null for pendingStanza\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] externalId is null for pendingStanza\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Could not find thread for chatId \",\" for pendingStanza\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Delete For Me pending stanza does not need to be applied.\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] thread is null\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] pendingStanza type \",\" is not supported\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Pending Stanza not found in the cache. This shouldn't happen.\"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] externalId is null for pendingStanza\"]);v=function(){return a};return a}var w=(a=b(\"cr:553\"))==null?void 0:a.structuredClone;e=function(a,c,d){a=a.restoredMsgsData;if(a){var e=a.newlyAddedMsgs;e=e.concat(a.existingMsgs);return x(e,c,d)}return(i||(i=b(\"Promise\"))).resolve()};var x=function(a,e,f){f==null?void 0:f.addPoint(\"apply_pending_stanza_start\");var g=0,h=0,j=0,k=0,l=new Map();return F().then(function(a){a==null?void 0:a.map(function(a){var b=a.pendingContent.content.externalId;if(b==null){d(\"WALogger\").WARN(v());return}l.set(a.externalIdWithType,a)}),k=l.size}).then(function(){var b=new Set();return B(a).then(function(f){return d(\"MAWDexieTable\").dexieAll(a.map(function(a){var c=a.externalId;if(e)if(d(\"MAWEncryptedBackupCacheManager\").peekPendingStanzaCache(c)){var i=d(\"MAWEncryptedBackupCacheManager\").getPendingStanzaCacheValue(c);if(i==null){d(\"WALogger\").ERROR(u());return}return A(i,a,f,e).then(function(a){a!=null&&b.add(i);d(\"MAWEncryptedBackupCacheManager\").removePendingStanzaCacheValue(c);l[\"delete\"](i.externalIdWithType);a=i.pendingContent.type;a===d(\"MAWDbPendingStanza\").PENDING_TYPE.REVOKED&&g++;h++})}else l.clear();else{var k=c+\"_\"+d(\"MAWDbPendingStanza\").PENDING_REVOKED,m=l.get(k);if(m!=null)return A(m,a,f,e).then(function(a){a!=null&&(b.add(m),g++,j++),l[\"delete\"](m.externalIdWithType)})}})).then(function(){if(!e){var a=y(l);g+=a[1];h+=a[0]+a[1];c(\"promiseDone\")(z(Array.from(b)))}})})}).then(function(a){f==null?void 0:f.addPoint(\"apply_pending_stanza_end\",{\"int\":{initialRestorePendingStanzaCount:j,pendingStanzasToBeUploadedCount:k,pointRestorePendingStanzaCount:h,revokedCount:g}});return(i||(i=b(\"Promise\"))).resolve()})},y=function(a){var b=0,c=0;a.forEach(function(a){var e=a.pendingContent.type;e===d(\"MAWDbPendingStanza\").PENDING_TYPE.REVOKED?c++:e===d(\"MAWDbPendingStanza\").PENDING_TYPE.DELETE_FOR_ME&&b++;E(a)});a.clear();return[b,c]},z=d(\"MAWIndexedDb\").makeMsgrTransactor({pendingStanzas:d(\"MAWTransactionMode\").READWRITE},\"deletePendingStanzasFromIndexedDB\",function(a){return function(b){return d(\"MAWDbPendingStanzaTxns\").deletePendingStanzas(a,b)}}),A=function(a,e,f,g){var h=a.pendingContent.type;if(h===d(\"MAWDbPendingStanza\").PENDING_TYPE.REVOKED)return D(a,e,f,g).then(function(a){if(a!=null){var b=d(\"MAWEBUploadTrackingUtils\").genInstanceKeyOnly();d(\"MAWEBUploadTrackingUtils\").startUploadTracking(a.externalId,a.type,\"pendingstanza\",b);c(\"promiseDone\")(d(\"MAWUploadMessagesBackup\").uploadUniqueMessage([a],void 0,!1,void 0,new Map([[a.externalId,b]])))}});else if(h===d(\"MAWDbPendingStanza\").PENDING_TYPE.DELETE_FOR_ME)return C(a);else{d(\"WALogger\").WARN(t(),h);return(i||(i=b(\"Promise\"))).resolve()}},B=d(\"MAWIndexedDb\").makeMsgrTransactor({threads:d(\"MAWTransactionMode\").READONLY},\"getThreadsForMessages\",function(a){return function(b){var c=[];b.forEach(function(a){c.push(a.thread)});return d(\"MAWDbThreadTxns\").getThreads(a,c).then(function(a){var b=new Map();a.forEach(function(a){if(a==null){d(\"WALogger\").WARN(s());return d(\"MAWDexieTable\").dexieResolve()}b.set(a.chatId,a)});return b})}}),C=d(\"MAWIndexedDb\").makeMsgrTransactor({pendingStanzas:d(\"MAWTransactionMode\").READWRITE},\"deleteForMeMsg\",function(a){return function(b){d(\"WALogger\").LOG(r());return d(\"MAWDexieTable\").dexieAll([a.pendingStanzas[\"delete\"](b.rowId)]).then(function(){return d(\"MAWDexieTable\").dexieResolve(b)})}}),D=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:d(\"MAWTransactionMode\").READONLY,deletedMessages:d(\"MAWTransactionMode\").READWRITE,groupInfo:d(\"MAWTransactionMode\").READWRITE,media:d(\"MAWTransactionMode\").READONLY,messages:d(\"MAWTransactionMode\").READWRITE,pendingStanzas:d(\"MAWTransactionMode\").READWRITE,reactions:d(\"MAWTransactionMode\").READWRITE,threads:d(\"MAWTransactionMode\").READWRITE,xma:d(\"MAWTransactionMode\").READONLY},\"revokeMessage\",function(a){return function(b,c,e,f){var g=c.thread;e=e.get(c.thread);if(e==null){d(\"WALogger\").ERROR(q(),g);return d(\"MAWDexieTable\").dexieResolve()}g=b.pendingContent.content.externalId;if(g==null){d(\"WALogger\").ERROR(p());return d(\"MAWDexieTable\").dexieResolve()}var h=b.pendingContent.content.revokedExternalId;if(h==null){d(\"WALogger\").ERROR(o());return d(\"MAWDexieTable\").dexieResolve()}var i=b.pendingContent.content.ts;if(i==null){d(\"WALogger\").ERROR(n());return d(\"MAWDexieTable\").dexieResolve()}return d(\"MAWWriteRevokeMessageTxns\").revokeUnstoredMsg(a,c,e,g,h,c.serverTs,c.ts,f).then(function(c){a.pendingStanzas[\"delete\"](b.rowId);return d(\"MAWDexieTable\").dexieResolve(c)})}});function E(a){var b=a.pendingContent.content.threadJid;if(b==null){d(\"WALogger\").WARN(m());return}var e=d(\"WAJids\").threadIdForChatJid(b),f=a.pendingContent.type;if(f===d(\"MAWDbPendingStanza\").PENDING_TYPE.REVOKED){var g=a.pendingContent.content.revokedExternalId;if(g==null){d(\"WALogger\").WARN(l());return}g=g}else if(f===d(\"MAWDbPendingStanza\").PENDING_TYPE.DELETE_FOR_ME){var h=a.pendingContent.content.externalId;if(h==null){d(\"WALogger\").WARN(k());return}g=h}else{d(\"WALogger\").WARN(j(),f);return}d(\"MAWEncryptedBackupCacheManager\").addPendingStanzaToPendingStanzaCache(g,a);d(\"MAWBridgeEventTransmitter\").issuePointQueryOutsideTxn(g,e,void 0,c(\"LSMEBTaskCreationSource\").EB_POINT_QUERY_IN_ACT,b)}var F=d(\"MAWRestoreDbState\").isUsingShim()?d(\"MAWReStoreTiming\").measureDuration(\"getAllPendingStanzas\",function(a){return d(\"ReQL\").toArrayAsync(d(\"ReQL\").fromTableAscending(a.tables.e2ee_pendingStanzas).map(function(a){a=c(\"nullthrows\")(w)(a);return babelHelpers[\"extends\"]({},a,{rowId:(h||(h=d(\"I64\"))).to_float(a.rowId)})}))}):d(\"MAWIndexedDb\").makeMsgrTransactor({pendingStanzas:d(\"MAWTransactionMode\").READONLY},\"getAllPendingStanzas\",function(a){return function(){return d(\"MAWDbPendingStanzaTxns\").getAllPendingStanzas(a)}});g.applyPendingStanzas=e;g.issuePointQueryForPendingStanza=E}),98);\n__d(\"MAWWriteMsgTxns\",[\"I64\",\"MAWAddQPLPointForHandleIncomingMsgApi\",\"MAWAfterWriteMsgUtil\",\"MAWBridgeMsg\",\"MAWBridgeTypesCreators\",\"MAWBuildIncomingMsgs\",\"MAWCalculateBumpTimestampMs\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbPendingStanzaTxns\",\"MAWDbReactionsTxns\",\"MAWDbThread\",\"MAWDbThreadTxns\",\"MAWDbUnrenderedMsgTxns\",\"MAWDeleteForMeMsgContentCleaner\",\"MAWDeleteThreadUtil\",\"MAWDexieTable\",\"MAWEBUploadMessageUtils\",\"MAWEBUploadTrackingUtils\",\"MAWEphemeralGatingUtil\",\"MAWEphemeralMsgTxns\",\"MAWFolderTypes\",\"MAWGetMsgQuoteTxn\",\"MAWGetOrCreateThreadTxns\",\"MAWIndexedDb\",\"MAWLoadReplyMediaTxns\",\"MAWLocalizationUtils\",\"MAWMsgType\",\"MAWThreadEvent\",\"MAWThreadSnippetBuildTxns\",\"MAWThreadSnippetUtils\",\"MAWTimeUtils\",\"MAWUpdateQuotedMsgTxns\",\"MAWWriteMsgSideEffectTxns\",\"MAWWriteRevokeMessageTxns\",\"WAGlobals\",\"WAJids\",\"WALogger\",\"WATimeUtils\",\"err\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handle\",\" Msg: Message from \",\", chat \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"writeMsgAfterTransaction - sortOrderMs is in the future. sortOrderMs: \",\", current time: \",\", serverTs: \",\", suppliedSortOrder: \",\", ts: \",\", originalTs: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"writeMsgAfterTransaction - sortOrderMs: \",\"\"]);k=function(){return a};return a}function l(a,b,e,f){var g=e.ts;g=[d(\"WATimeUtils\").castUnixTimeToMillisTime(g),e.type===d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN];var h=g[0],i=g[1];return d(\"MAWGetOrCreateThreadTxns\").getExistingThread(a,b.jid).then(function(b){if(b==null)throw c(\"err\")(\"at this point there's always a thread - checking for updates\");return d(\"MAWDbMsgTxns\").getNextMsgIdNumberForThread(a,b).then(function(c){var g,j=d(\"MAWTimeUtils\").ensureValidMillisTime(b.newestMsgTs)||d(\"WATimeUtils\").castToMillisTime(0),k=h>j&&!i?h:j;j=(j=d(\"MAWTimeUtils\").ensureValidMillisTime(b.lastReadMsgTs))!=null?j:0;g=(g=d(\"MAWTimeUtils\").ensureValidMillisTime(b.newestMsgTs))!=null?g:0;j=j<g;var l=e.author===d(\"WAJids\").AUTHOR_ME||e.type===d(\"MAWMsgType\").MSG_TYPE.ADMIN&&d(\"MAWLocalizationUtils\").isParticipantChangeAdminMsg(e.msgContent.adminType)&&!j,m=babelHelpers[\"extends\"]({},e,{msgId:d(\"MAWDbMsg\").craftMsgIdV2(b.chatId,c,e)}),n=!d(\"MAWThreadSnippetUtils\").isDbMsgDisabledForThreadSnippet(m)&&d(\"WATimeUtils\").castUnixTimeToMillisTime(d(\"MAWDbMsg\").getCanonicalTsFromMsg(m))>((g=b.snippetMsgTs)!=null?g:0);return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").calculateOldestAndNewestMsg(a,b.oldestMsg,b.newestMsg,m,f),n?d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,m,b):d(\"MAWDexieTable\").dexieResolve(null)]).then(function(a){var c=a[0],f=c.newestMsg;c=c.oldestMsg;a=a[1];return{msgId:m.msgId,updatedSnippet:a,updatedThread:babelHelpers[\"extends\"]({},b,{lastReadMsg:l?m.msgId:b.lastReadMsg,lastReadMsgTs:l?k:b.lastReadMsgTs,newestMsg:f,newestMsgTs:k,oldestMsg:c,snippetMsg:n?m.msgId:b.snippetMsg,snippetMsgTs:n?d(\"WATimeUtils\").castUnixTimeToMillisTime(d(\"MAWDbMsg\").getCanonicalTsFromMsg(e)):b.snippetMsgTs,threadOrder:d(\"MAWDbThread\").craftThreadOrder(k,b.jid)})}})})})}function m(a,b,e,f,g,h,i,m,n){f===void 0&&(f={});f=f;var o=f.isFirstMsg,p=o===void 0?!1:o;o=f.isOutgoing;var q=o===void 0?!1:o,r=f.openMessageOtid,s=f.openMessageParticipantCount,t=f.optimisticMsg,u=f.participantCount,v=f.quotedReplyAttachmentMeta;o=f.skipLocalThreadBump;var w=o===void 0?!1:o,x=f.sortOrderMs;o=c(\"gkx\")(\"23926\");f=o?(f=x)!=null?f:d(\"MAWEBUploadMessageUtils\").echoOverrideMessageSortOrder(b):x;o=o?(o=x)!=null?o:d(\"MAWEBUploadMessageUtils\").echoOverrideMessageSortOrder(b):d(\"MAWEBUploadMessageUtils\").echoOverrideMessageSortOrder(b);var y=babelHelpers[\"extends\"]({},b,{sortOrderMs:o});return l(a,e,b,f).then(function(b){var c=b.msgId,f=b.updatedSnippet,l=b.updatedThread,o=e.oldestMsg!=null&&l.oldestMsg!==e.oldestMsg,z=babelHelpers[\"extends\"]({},y,{msgId:c});return m!=null&&m?a.messages.add(z).then(function(a){return babelHelpers[\"extends\"]({},z,{rowId:a})}):d(\"MAWDexieTable\").dexieAll([a.messages.add(z).then(function(a){return babelHelpers[\"extends\"]({},z,{rowId:a})}),a.threads.put(l)]).then(function(a){var b=a[0];a[1];q&&(d(\"WALogger\").LOG(k(),b.sortOrderMs),b.sortOrderMs!=null&&b.sortOrderMs>Date.now()+60*1e3&&d(\"WALogger\").ERROR(j(),b.sortOrderMs,Date.now(),b.serverTs,x,b.ts,b.originalTs));d(\"MAWAfterWriteMsgUtil\").writeMsgAfterTransaction({dbMsg:b,ebRestore:g,hasMoreAfter:i,hasMoreBefore:h,isFirstMsg:p,isOldestMsgUpdated:o,msgsLeftToRestoreForEB:n,openMessageOtid:r,openMessageParticipantCount:s,optimisticMsg:t,participantCount:u,prevOldestMsg:e.oldestMsg==null?void 0:e.oldestMsg,quotedReplyAttachmentMeta:v,skipLocalThreadBump:w,snippet:f,updatedThread:l});return b})})}function n(a,b,e){return d(\"MAWGetOrCreateThreadTxns\").getExistingThread(a,e.jid).then(function(e){if(e==null)throw c(\"err\")(\"at this point there's always a thread - checking for updates\");return d(\"MAWDbUnrenderedMsgTxns\").getNextUnrenderedMsgIdNumberForThread(a,e).then(function(c){var f=babelHelpers[\"extends\"]({},b,{msgId:d(\"MAWDbMsg\").craftUnrenderedMsgId(e.chatId,c)});return d(\"MAWDexieTable\").dexieAll([a.unrenderedMessages.add(f),a.threads.put(e)]).then(function(a){var b=a[0];a[1];return babelHelpers[\"extends\"]({},f,{rowId:b})})})})}function a(a,b,c){var e=[b.externalId,c.chatId,b.author],f=e[0],g=e[1];e=e[2];d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"msg_queries_start\");return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").maybeGetMsgByExternalId(a,f,g,e),d(\"MAWDbPendingStanzaTxns\").maybeGetPendingRevokedStanza(a,f,e,g),d(\"MAWDbPendingStanzaTxns\").maybeGetPendingDeletedStanza(a,f,e,g),d(\"MAWDbMsgTxns\").checkIfMsgIsDeletedForMeOrRevoked(a,f,g,e),d(\"MAWDbPendingStanzaTxns\").maybeGetDeleteThreadFromPendingStanza(a,c.jid).then(function(a){return d(\"MAWDeleteThreadUtil\").isMsgDeletedViaDeleteThread(b.ts,a)})]).then(function(a){var b=a[0],c=a[1],e=a[2],f=a[3];a=a[4];d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"msg_queries_end\");return{existingMsg:(b=b)!=null?b:null,isDeletedWithThread:a,isDeleteForMeOrRevoked:f,pendingDeleteForMeStanza:(b=e)!=null?b:null,pendingRevokedStanza:(a=c)!=null?a:null}})}function b(a,b,e){return d(\"MAWDbPendingStanzaTxns\").maybeGetPendingRevokedStanza(a,b.externalId,b.author,e.chatId).then(function(f){if(f!=null)return o(a,b,e,f);f=b.author;d(\"WALogger\").DEV(i(),b.type,f,e.jid);var g=babelHelpers[\"extends\"]({},babelHelpers[\"extends\"]({},b,{thread:e.chatId,threadJid:e.jid}));e.folder===d(\"MAWFolderTypes\").FOLDER_ID.OTHER&&(g.altIndex=g.altIndex===d(\"MAWDbMsg\").FUTUREPROOF_ALT_INDEX?d(\"MAWDbMsg\").FUTUREPROOF_SPAM_ALT_INDEX:d(\"MAWDbMsg\").SPAM_ALT_INDEX);return d(\"MAWGetMsgQuoteTxn\").getMsgQuoteInfo(a,g,e.jid).then(function(b){b!=null&&(g=babelHelpers[\"extends\"]({},g,{quote:b==null?void 0:b.quote,quoteExternalId:b==null?void 0:b.quoteExternalId}));return d(\"MAWDexieTable\").dexieAll([d(\"MAWUpdateQuotedMsgTxns\").associateQuotedMessage(a,e.chatId,g),d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsgQuote(a,g),d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsg(a,g)]).then(function(b){var f=b[0],i=b[1],j=b[2];d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"write_incoming_msg_start\");d(\"WAGlobals\").getConfig().useEbUploadQueue()||d(\"MAWEBUploadTrackingUtils\").maybeStartTrackingForMiddleware(g,\"receive\");b=c(\"gkx\")(\"23996\")&&g.altIndex!==d(\"MAWDbMsg\").SPAM_ALT_INDEX&&g.altIndex!==d(\"MAWDbMsg\").FUTUREPROOF_SPAM_ALT_INDEX&&g.author!==d(\"WAJids\").AUTHOR_ME;return m(a,g,e,{quotedReplyAttachmentMeta:i,skipLocalThreadBump:b}).then(function(b){g.altIndex!==d(\"MAWDbMsg\").SPAM_ALT_INDEX&&g.altIndex!==d(\"MAWDbMsg\").FUTUREPROOF_SPAM_ALT_INDEX&&g.author!==d(\"WAJids\").AUTHOR_ME&&(!c(\"gkx\")(\"23996\")?d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumpedServer\",value:{description:\"writeNewMessage-\"+g.type,isCurrentDeviceSendingMsg:!1,lastActivityTs:d(\"WATimeUtils\").castUnixTimeToMillisTime(g.ts),lastMsgExternalId:(h||(h=d(\"I64\"))).of_string_opt(g.externalId),threadId:e.chatId,threadJid:e.jid}}):d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,b,e).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;var f=g.externalId!==void 0?(h||(h=d(\"I64\"))).of_string_opt(g.externalId):void 0;f=d(\"MAWCalculateBumpTimestampMs\").calculateBumpTimestampMs(d(\"WATimeUtils\").castUnixTimeToMillisTime(g.ts),f);d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumpedV2\",value:d(\"MAWBridgeTypesCreators\").createBridgeBumpedThreadV2({bumpTimestampMs:f,description:\"writeNewIncomingMsg-\"+g.type,isMessageAuthorMe:!1,snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:e.chatId,threadJid:e.jid})})}));d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"write_msg_additional_steps\");return d(\"MAWDexieTable\").dexieAll([d(\"MAWWriteMsgSideEffectTxns\").updateParticipantTimestampsForMsg(a,g),d(\"MAWEphemeralGatingUtil\").isSendBasedDisappearingMessageEnabled()?d(\"MAWEphemeralMsgTxns\").markEphemeralMessageAsSent(a,b):d(\"MAWDexieTable\").dexieResolve(b)]).then(function(a){a=a[1];f!=null&&f.forEach(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(a,void 0,j)})});d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"write_incoming_msg_end\");return a||b})})})})})}function e(a,b,c,e){var f=babelHelpers[\"extends\"]({},babelHelpers[\"extends\"]({},b,{msgId:c.msgId,rowId:c.rowId,serverTs:c.serverTs,sortOrderMs:c.sortOrderMs,thread:c.thread,threadJid:e.jid,ts:c.ts}));return d(\"MAWDexieTable\").dexieAll([d(\"MAWUpdateQuotedMsgTxns\").associateQuotedMessage(a,e.chatId,f),d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsgQuote(a,f),d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsg(a,f),d(\"MAWGetMsgQuoteTxn\").getMsgQuoteInfo(a,f,e.jid)]).then(function(b){var c=b[0],g=b[1],h=b[2];b=b[3];f=babelHelpers[\"extends\"]({},f,{quote:b==null?void 0:b.quote,quoteExternalId:b==null?void 0:b.quoteExternalId});d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"handle_ciphertext_start\");return a.messages.put(f).then(function(){return d(\"MAWDbThreadTxns\").needsRetroactiveReadReceiptInThread(a,f)}).then(function(b){if(b){f.altIndex=d(\"MAWDbMsg\").craftToBeReadAltIndex(f.thread);return a.messages.put(f)}}).then(function(){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(f,void 0,h)});d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(f,void 0,g)});d(\"MAWIndexedDb\").afterTransactionThreadEvent({chatJid:e.jid,msgId:f.msgId},d(\"MAWThreadEvent\").PLACEHOLDER_CONVERT_SUBSCRIPTION);c!=null&&c.forEach(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(a,void 0,h)})});if(f.msgId===e.newestMsg){var b=f;b.rowId;b=babelHelpers.objectWithoutPropertiesLoose(b,[\"rowId\"]);return d(\"MAWDexieTable\").dexieAll([d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,f,e),d(\"MAWWriteMsgSideEffectTxns\").updateParticipantTimestampsForMsg(a,b)]).then(function(a){a=a[0];var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:e.chatId,threadJid:e.jid})});return f})}d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"handle_ciphertext_end\");return f})})}function f(a,b,c,e){d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"handle_dfm_message_start\");var f=d(\"MAWBuildIncomingMsgs\").buildUnstoredDeleteForMeMsg(b,c);return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbReactionsTxns\").deleteReactionsByUniqueMsgIdentifiers(a,[{author:f.author,chatId:f.thread,externalId:f.externalId}]),n(a,f,c),a.pendingStanzas[\"delete\"](e.rowId)]).then(function(a){a[0];a=a[1];d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"handle_dfm_message_end\");d(\"MAWDeleteForMeMsgContentCleaner\").addNewDeleteForMeMsgContentCleanerTimestamp(f.messageDeleteForMeTs);return babelHelpers[\"extends\"]({},f,{msgId:a.msgId,rowId:a.rowId})})}function o(a,b,e,f){var g=d(\"MAWDbPendingStanzaTxns\").getRevokedContent(f);if(g==null)throw c(\"err\")(\"missing revoked content\");b=d(\"MAWBuildIncomingMsgs\").buildUnstoredRevokedMsg(b,e,g);d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"handle_revoke_message_start\");return d(\"MAWDexieTable\").dexieAll([m(a,b,e),a.pendingStanzas[\"delete\"](f.rowId)]).then(function(b){var c=b[0];return d(\"MAWWriteRevokeMessageTxns\").markIncomingMessageRevoked(a,c,e).then(function(){d(\"MAWAddQPLPointForHandleIncomingMsgApi\").addQPLPointForHIMApi(\"handle_revoke_message_end\");return c})})}g.writeMsg=m;g.writeUnrenderedMsg=n;g.prepareMsgWriteData=a;g.writeNewIncomingMsg=b;g.writeCiphertextUpdate=e;g.handleDeleteForMeMessage=f;g.handleOutOfOrderRevokedMessage=o}),98);\n__d(\"WAAckLevel\",[],(function(a,b,c,d,e,f){\"use strict\";a={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};f.ACK=a}),66);\n__d(\"WAMsgUtils\",[\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"Facebook User\";function a(a){return a==null||a===\"\"}function b(a){return a==null||a===\"\"?h:a}function c(a){return a!=null?d(\"WAJids\").userIdFromJid(a):h}function e(a,b){b===void 0&&(b=2);a=a.slice(0,b);return[a.map(function(){return void 0}),a.reduce(function(a,b){return[].concat(a,[b])},[])]}g.UNKNOWN_USER=h;g.isUnknownName=a;g.maybeUnknownParticipantName=b;g.createAdminMsgContactId=c;g.getParticipantsAndUnknownNameJids=e}),98);\n__d(\"WACreateParticipantAdminMsg\",[\"WAGlobals\",\"WAMsgUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:\"participantAddedYou\"};case 2:return{adminMsgContent:[b,c],adminType:\"participantAddedYouAndOneUser\"};default:return{adminMsgContent:[b,a.toString()],adminType:\"participantAddedYouAndMoreThanOneUsers\"}}}function i(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:\"currentUserAddedOneParticipant\"};case 2:return{adminMsgContent:[b,c],adminType:\"currentUserAddedTwoParticipant\"};default:return{adminMsgContent:[b,a.toString()],adminType:\"currentUserAddedMoreThanTwoParticipant\"}}}function j(a,b,c,d){switch(a){case 1:return{adminMsgContent:[b,c],adminType:\"participantAddedOneUser\"};case 2:return{adminMsgContent:[b,c,d],adminType:\"participantAddedTwoUser\"}}return{adminMsgContent:[b,c,a.toString()],adminType:\"participantAddedMoreThanTwoUser\"}}function a(a,b,c,e){e=e==null?b.map(d(\"WAMsgUtils\").createAdminMsgContactId):e;var f=e[0];e=e[1];c=c==null?d(\"WAMsgUtils\").createAdminMsgContactId(a):d(\"WAMsgUtils\").maybeUnknownParticipantName(c);if(a===d(\"WAGlobals\").getMyUserJid())return i(b.length,d(\"WAMsgUtils\").maybeUnknownParticipantName(f),d(\"WAMsgUtils\").maybeUnknownParticipantName(e));return b.includes(d(\"WAGlobals\").getMyUserJid())?h(b.length,d(\"WAMsgUtils\").maybeUnknownParticipantName(c),d(\"WAMsgUtils\").maybeUnknownParticipantName(b[0]===d(\"WAGlobals\").getMyUserJid()?e:f)):j(b.length,c,d(\"WAMsgUtils\").maybeUnknownParticipantName(f),d(\"WAMsgUtils\").maybeUnknownParticipantName(e))}g.createParticipantAdminMessage=a}),98);\n__d(\"WARemoveParticipantAdminMsg\",[\"WAGlobals\",\"WAMsgUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:\"participantRemovedYou\"};case 2:return{adminMsgContent:[b,c],adminType:\"participantRemovedYouAndOneUser\"};default:return{adminMsgContent:[b,a.toString()],adminType:\"participantRemovedYouAndMoreThanOneUsers\"}}}function i(a,b,c,d){switch(a){case 1:return d?{adminMsgContent:[],adminType:\"currentUserLeftGroup\"}:{adminMsgContent:[b],adminType:\"currentUserRemovedOneParticipant\"};case 2:return{adminMsgContent:[b,c],adminType:\"currentUserRemovedTwoParticipant\"};default:return{adminMsgContent:[b,a.toString()],adminType:\"currentUserRemovedMoreThanTwoParticipant\"}}}function j(a,b,c,d,e){switch(a){case 1:return e?{adminMsgContent:[b],adminType:\"participantLeftGroup\"}:{adminMsgContent:[b,c],adminType:\"participantRemovedOneUser\"};case 2:return{adminMsgContent:[b,c,d],adminType:\"participantRemovedTwoUser\"}}return{adminMsgContent:[b,c,a.toString()],adminType:\"participantRemovedMoreThanTwoUser\"}}function a(a,b,c,e){e=e==null?b.map(d(\"WAMsgUtils\").createAdminMsgContactId):e;var f=e[0];e=e[1];var g=c==null?d(\"WAMsgUtils\").createAdminMsgContactId(a):d(\"WAMsgUtils\").maybeUnknownParticipantName(c);if(a===d(\"WAGlobals\").getMyUserJid())return i(b.length,d(\"WAMsgUtils\").maybeUnknownParticipantName(f),d(\"WAMsgUtils\").maybeUnknownParticipantName(e),b[0]===d(\"WAGlobals\").getMyUserJid());return b.includes(d(\"WAGlobals\").getMyUserJid())?h(b.length,d(\"WAMsgUtils\").maybeUnknownParticipantName(c),d(\"WAMsgUtils\").maybeUnknownParticipantName(b[0]===d(\"WAGlobals\").getMyUserJid()?e:f)):j(b.length,g,d(\"WAMsgUtils\").maybeUnknownParticipantName(f),d(\"WAMsgUtils\").maybeUnknownParticipantName(e),b[0]===a)}g.removeParticipantAdminMessage=a}),98);\n__d(\"WAAdminMsgHelpers\",[\"WAAckLevel\",\"WACreateParticipantAdminMsg\",\"WAGlobals\",\"WAJids\",\"WARemoveParticipantAdminMsg\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"Facebook User\";function a(a,b,c){return{type:\"Admin\",ack:d(\"WAAckLevel\").ACK.SENT,msgContent:d(\"WACreateParticipantAdminMsg\").createParticipantAdminMessage(c===\"@me\"?d(\"WAGlobals\").getMyUserJid():c,b),id:{chat:a,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"WAGlobals\").getDependencies().generateExternalId()},ts:d(\"WATimeUtils\").unixTime()}}function b(a,b,c){return{type:\"Admin\",ack:d(\"WAAckLevel\").ACK.SENT,msgContent:d(\"WARemoveParticipantAdminMsg\").removeParticipantAdminMessage(c===\"@me\"?d(\"WAGlobals\").getMyUserJid():c,b),id:{chat:a,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"WAGlobals\").getDependencies().generateExternalId()},ts:d(\"WATimeUtils\").unixTime()}}function c(a,b,c){var e,f=d(\"WAGlobals\").getMyUserJid();c=c===\"@me\"?f:c;if(c===f)e={adminMsgContent:[d(\"WAJids\").userIdFromJid(b)],adminType:\"currentUserPromotedParticipant\"};else if(c==null)e=b===f?{adminMsgContent:[],adminType:\"currentUserGotPromoted\"}:{adminMsgContent:[d(\"WAJids\").userIdFromJid(b)],adminType:\"participantGotPromoted\"};else{c=d(\"WAJids\").userIdFromJid(c);e=b===f?{adminMsgContent:[c],adminType:\"participantPromotedYou\"}:{adminMsgContent:[c,d(\"WAJids\").userIdFromJid(b)],adminType:\"participantPromotedParticipant\"}}return{type:\"Admin\",ack:d(\"WAAckLevel\").ACK.SENT,msgContent:e,id:{chat:a,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"WAGlobals\").getDependencies().generateExternalId()},ts:d(\"WATimeUtils\").unixTime()}}function e(a,b,c){var e,f=d(\"WAGlobals\").getMyUserJid();c=c===\"@me\"?f:c;if(c===f)e=b===f?{adminType:\"currentUserSelfDemoted\",adminMsgContent:[]}:{adminMsgContent:[d(\"WAJids\").userIdFromJid(b)],adminType:\"currentUserDemotedParticipant\"};else if(c==null)e=b===f?{adminMsgContent:[],adminType:\"currentUserGotDemoted\"}:{adminMsgContent:[d(\"WAJids\").userIdFromJid(b)],adminType:\"participantGotDemoted\"};else{var g=d(\"WAJids\").userIdFromJid(c);e=b===f?{adminMsgContent:[g],adminType:\"participantDemotedYou\"}:{adminMsgContent:[g,d(\"WAJids\").userIdFromJid(b)],adminType:c===b?\"participantSelfDemoted\":\"participantDemotedParticipant\"}}return{type:\"Admin\",ack:d(\"WAAckLevel\").ACK.SENT,msgContent:e,id:{chat:a,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"WAGlobals\").getDependencies().generateExternalId()},ts:d(\"WATimeUtils\").unixTime()}}function f(a,b,c){var e=[],f=b.subject.content;if(f==null)return;b.subject.user===d(\"WAGlobals\").getMyUserJid()?(b=\"currentUserNamedGroup\",e.push(f)):c==null?(b=\"unkonwnUserNamedGroup\",e.push(f)):(b=\"participantNamedGroup\",e.push(c,f));return{type:\"Admin\",ack:d(\"WAAckLevel\").ACK.SENT,msgContent:{adminType:b,adminMsgContent:e},id:{chat:a,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"WAGlobals\").getDependencies().generateExternalId()},ts:d(\"WATimeUtils\").unixTime()}}function i(a,b,c){var e,f=[];if(c===d(\"WAGlobals\").getMyUserJid())switch(b){case\"all_member_add\":e=\"currentUserSetAddModeAllMembers\";break;case\"admin_add\":e=\"currentUserSetAddModeAdminOnly\";break}else if(c!=null){f.push(d(\"WAJids\").userIdFromJid(c));switch(b){case\"all_member_add\":e=\"participantSetAddModeAllMembers\";break;case\"admin_add\":e=\"participantSetAddModeAdminOnly\";break}}else switch(b){case\"all_member_add\":e=\"serverSetAddModeAllMembers\";break;case\"admin_add\":e=\"serverSetAddModeAdminOnly\";break}if(e==null)return;return{type:\"Admin\",ack:d(\"WAAckLevel\").ACK.SENT,msgContent:{adminType:e,adminMsgContent:f},id:{chat:a,author:d(\"WAJids\").AUTHOR_SYSTEM,externalId:d(\"WAGlobals\").getDependencies().generateExternalId()},ts:d(\"WATimeUtils\").unixTime()}}g.UNKNOWN_USER=h;g.createParticipantAddAdminMessage=a;g.createParticipantRemoveAdminMsg=b;g.createParticipantPromoteAdminMsg=c;g.createParticipantDemoteAdminMsg=e;g.createGroupNameChangeAdminMsg=f;g.createMemberAddModeChangeAdminMsg=i}),98);\n__d(\"MAWAdminWriteUserDeviceMsgTxn\",[\"MAWAckLevel\",\"MAWDexieTable\",\"MAWExternalId\",\"MAWGlobals\",\"MAWLocalizationType\",\"MAWLocalizationUtils\",\"MAWMsgType\",\"MAWWriteMsgTxns\",\"WAAdminMsgHelpers\",\"WAJids\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";c={add:\"add\",remove:\"remove\",update:\"update\"};function h(a,b){switch(a){case\"add\":if(b)return d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE;else return d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case\"remove\":if(b)return d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE;else return d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case\"update\":if(b)return d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE;else return d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}function a(a,b,c,e,f){if(c.newestMsg==null)return d(\"MAWDexieTable\").dexieResolve();var g=b===d(\"MAWGlobals\").getMyUserJid();e=h(e,g);g=g?[]:[d(\"WAJids\").userIdFromJid(b)];b=d(\"MAWLocalizationUtils\").buildUnstoredDbAdminMsg({adminMsgContent:g,adminType:e,version:1},c.chatId,c.jid,f);return d(\"MAWWriteMsgTxns\").writeMsg(a,b,c).then(function(){})}function b(a,b,c,e){var f=d(\"WAAdminMsgHelpers\").UNKNOWN_USER,g=b===d(\"MAWGlobals\").getMyUserJid();b={ack:d(\"MAWAckLevel\").ACK.received,altIndex:void 0,author:g?d(\"WAJids\").AUTHOR_ME:b,externalId:d(\"MAWExternalId\").generateExternalId(),msgContent:{adminType:d(\"MAWLocalizationType\").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE,authorName:f},thread:c.chatId,threadJid:c.jid,ts:(g=e)!=null?g:d(\"WATimeUtils\").unixTime(),type:d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT};return d(\"MAWWriteMsgTxns\").writeMsg(a,b,c).then(function(){})}g.DeviceChange=c;g.getUserDeviceAdminType=h;g.writeUserDeviceAdminMsg=a;g.writeICDCAlert=b}),98);\n__d(\"MAWConvertExtendedContentOverlayIconGlyphToXMAGatingType\",[\"EchoMessageXMAFieldUtils\",\"WAArmadilloXMA.pb\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Not a valid ExtendedContentOverlayIconGlyph: \",\"\"]);h=function(){return a};return a}function a(a){switch(a){case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.INFO:return d(\"EchoMessageXMAFieldUtils\").XMAGatingType.INFO;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.EYE_OFF:return d(\"EchoMessageXMAFieldUtils\").XMAGatingType.EYE_OFF;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NEWS_OFF:return d(\"EchoMessageXMAFieldUtils\").XMAGatingType.NEWS_OFF;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING:return d(\"EchoMessageXMAFieldUtils\").XMAGatingType.WARNING;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE:return d(\"EchoMessageXMAFieldUtils\").XMAGatingType.PRIVATE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE:return d(\"EchoMessageXMAFieldUtils\").XMAGatingType.NONE;default:d(\"WALogger\").ERROR(h(),a);return d(\"EchoMessageXMAFieldUtils\").XMAGatingType.NONE}}g.convertExtendedContentOverlayIconGlyphToXMAGatingType=a}),98);\n__d(\"MAWConvertExtendedContentTargetTypeToXMATargetType\",[\"EchoMessageXMAFieldUtils\",\"WAArmadilloXMA.pb\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Not a valid ExtendedContentTargetType: \",\"\"]);h=function(){return a};return a}function a(a){switch(a){case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_STORY_PHOTO_MENTION;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_SINGLE_IMAGE_POST_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_MULTIPOST_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_SINGLE_VIDEO_POST_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_STORY_PHOTO_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_STORY_VIDEO_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_CLIPS_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_IGTV_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_SHOP_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_PROFILE_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_PROFILE_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_STORY_PHOTO_HIGHLIGHT_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_STORY_VIDEO_HIGHLIGHT_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_STORY_REPLY;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.IG_STORY_REACTION;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.FB_FEED_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.FB_STORY_REPLY;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.FB_STORY_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.FB_STORY_MENTION;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.FB_FEED_VIDEO_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.FB_GAMING_CUSTOM_UPDATE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.FB_PRODUCER_STORY_REPLY;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.MSG_EXTERNAL_LINK_SHARE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.RTC_AUDIO_CALL;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.RTC_VIDEO_CALL;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.RTC_MISSED_AUDIO_CALL;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.RTC_MISSED_VIDEO_CALL;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.RTC_GROUP_AUDIO_CALL;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.RTC_GROUP_VIDEO_CALL;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.FB_EVENT;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:return d(\"EchoMessageXMAFieldUtils\").XMAContentType.MSG_RECEIVER_FETCH;default:d(\"WALogger\").ERROR(h(),a);return d(\"EchoMessageXMAFieldUtils\").XMAContentType.NONE}}g.convertExtendedContentTargetTypeToXMATargetType=a}),98);\n__d(\"MAWConvertExtendedContentXMLLayoutTypeToXMALayoutType\",[\"EchoMessageXMAFieldUtils\",\"WAArmadilloXMA.pb\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Not a valid ExtendedContentXMLLayoutType: \",\"\"]);h=function(){return a};return a}function a(a){switch(a){case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.SINGLE:return d(\"EchoMessageXMAFieldUtils\").XMALayoutType.SINGLE;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.PORTRAIT:return d(\"EchoMessageXMAFieldUtils\").XMALayoutType.PORTRAIT;default:d(\"WALogger\").ERROR(h(),a);return d(\"EchoMessageXMAFieldUtils\").XMALayoutType.SINGLE}}g.convertExtendedContentXMLLayoutTypeToXMALayoutType=a}),98);\n__d(\"MAWDbEditMsgHistoryTxns\",[\"MAWAckLevel\",\"MAWDbEditMsgHistory\",\"MAWDexieTable\",\"MAWIndexedDb\",\"WALogger\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[getEditHistoryMsgByEditedProtocolMsgId] Suspected multiple instances of same message!\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[getEditHistoryMsgByEditedProtocolMsgId] Can't have \",\" messages with the same editExternalId!\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"No msgId found mapped with externalId: Edit messages with the externalId do not have associated Msg in the IDB.\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\\n          'No edit history found for the messages despite there being an editCount greater than 0\"]);k=function(){return a};return a}function a(a,b){var c=[];if(b.length===0)return d(\"MAWDexieTable\").dexieResolve(c);b=b.filter(function(a){return a.editCount!=null&&a.editCount>0});var e=b.map(function(a){return[a.externalId,a.threadJid]});if(e.length===0)return d(\"MAWDexieTable\").dexieResolve([]);var f=b.reduce(function(a,b){b.msgId!=null&&a.set(b.externalId,b.msgId);return a},new Map());return l(a,e).then(function(a){if(a.length===0){d(\"WATagsLogger\").TAGS([\"MAWLoadMsgsTxns\"]).ERROR(k());return[]}for(var b=0;b<a.length;b++){var e=a[b],g=f.get(e.originalMsgExternalId);g!=null?c.push(babelHelpers[\"extends\"]({},e,{editMsgHistoryId:d(\"MAWDbEditMsgHistory\").convertToEditMsgHistoryId64(e.editMsgHistoryId),originalMsgId:g})):d(\"WATagsLogger\").TAGS([\"MAWLoadMsgsTxns\"]).ERROR(j())}d(\"MAWIndexedDb\").afterTransaction({tag:\"EditMsgHistoryAdded\",value:c});return c})}function l(a,b){return a.editMsgHistory.where([\"originalMsgExternalId\",\"threadJid\"]).anyOf(b).toArray()}function b(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve():a.editMsgHistory.get({editMsgHistoryId:b})}function c(a,b,c){return a.editMsgHistory.where(\"originalMsgExternalId\").equals(c).filter(function(a){return a.editExternalId===b.externalId&&a.author===b.author&&a.threadJid===b.chat}).toArray().then(function(a){if(a.length>1){var b=a.map(function(a){return\"\"+a.editTs.toString()});b=new Set(b).size===1;!b?d(\"WALogger\").ERROR(i(),a.length):d(\"WALogger\").ERROR(h())}return a[0]})}function e(a,b){return b==null?d(\"MAWDexieTable\").dexieResolve([]):a.editMsgHistory.where(\"originalMsgExternalId\").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).toArray().then(function(a){var b=[];a.forEach(function(a){if(a==null)return;b.push(a)});return b})}function f(a,b){return a.editMsgHistory.bulkGet(b)}function m(a,b,c){var e=b.map(function(a,b){return babelHelpers[\"extends\"]({},a,{editMsgHistoryId:d(\"MAWDbEditMsgHistory\").convertToEditMsgHistoryId64(c[b])})});return a.messages.where(\"externalId\").anyOf(e.map(function(a){return a.originalMsgExternalId})).toArray().then(function(a){var b=new Map();a.forEach(function(a){a!=null&&b.set(a.externalId,a)});return e.map(function(a){var c=b.get(a.originalMsgExternalId);return c==null?null:babelHelpers[\"extends\"]({},a,{originalMsgId:c.msgId})}).filter(Boolean)}).then(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"EditMsgHistoryAdded\",value:a});return c})}function n(a,b,c){c===void 0&&(c=!0);return a.editMsgHistory.bulkAdd(b,{allKeys:!0}).then(function(e){return c?m(a,b,e):d(\"MAWDexieTable\").dexieResolve(e)})}function o(a,b,c,d){return d.then(function(d){return p(a,b,c,d)})}function p(a,b,c,e){var f=[];return a.editMsgHistory.where(\"originalMsgExternalId\").equals(b).filter(function(a){return a.threadJid===e&&a.author===c&&(a.sendStatus==null||a.sendStatus>=d(\"MAWAckLevel\").ACK.sent)}).toArray().then(function(a){a.forEach(function(a){f.push({messageId:a.editExternalId,originalMessageId:a.originalMsgExternalId,text:a.msgContent.content,timestamp:a.editTs})});return f})}function q(a,b,c,d){return a.editMsgHistory.where(\"originalMsgExternalId\").equals(b).filter(function(a){return a.threadJid===d&&a.author===c})[\"delete\"]().then(function(){})}var r=function(a,b){return a.editMsgHistory.where([\"originalMsgExternalId\",\"threadJid\"]).anyOf(b)[\"delete\"]().then(function(){return d(\"MAWDexieTable\").dexieResolve(b.length)})};g.loadEditMsgHistory=a;g.getEditHistoryByOriginalMsgExternalIdAndThreadJid=l;g.maybeGetEditMsgHistoryFromEditMsgHistoryId=b;g.getEditHistoryMsgByEditedProtocolMsgId=c;g.maybeGetEditMsgHistoryFromProtocolMsgId=e;g.bulkGetEditMsgHistorys=f;g.bulkAddEditMsgHistory=n;g.getEditHistoryAsEchoWithJidPromise=o;g.getEditHistoryAsEcho=p;g.bulkRemoveEditHistory=q;g.deleteExpiredEditMsgHistory=r}),98);\n__d(\"MAWGetAttachmentTypeForServerMediaType\",[\"EchoMessageMediaFieldUtils\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Not a valid AttachmentType: \",\"\"]);h=function(){return a};return a}function a(a){switch(a){case\"image\":return d(\"EchoMessageMediaFieldUtils\").AttachmentType.IMAGE;case\"video\":return d(\"EchoMessageMediaFieldUtils\").AttachmentType.VIDEO;case\"ptt\":return d(\"EchoMessageMediaFieldUtils\").AttachmentType.PTT;case\"gif\":return d(\"EchoMessageMediaFieldUtils\").AttachmentType.GIF;case\"sticker\":return d(\"EchoMessageMediaFieldUtils\").AttachmentType.STICKER;case\"xma-image\":return d(\"EchoMessageMediaFieldUtils\").AttachmentType.XMA;case\"document\":return d(\"EchoMessageMediaFieldUtils\").AttachmentType.DOCUMENT;default:d(\"WALogger\").WARN(h(),a);return null}}g.getAttachmentTypeForServerMediaType=a}),98);\n__d(\"MAWGetMediaAttachmentTypeForServerMediaType\",[\"EchoMessageMediaFieldUtils\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Not a valid EchoMessageActMediaAttachmentType: \",\"\"]);h=function(){return a};return a}function a(a){switch(a){case\"image\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.IMAGE;case\"video\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.VIDEO;case\"ptt\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.AUDIO;case\"gif\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.GIF;case\"sticker\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.STICKER;case\"audio\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.AUDIO;case\"document\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.DOCUMENT;case\"ppic\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.PROFILE_PICTURE;case\"md-app-state\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.APP_STATE;case\"md-msg-hist\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.HISTORY_SYNC;case\"thumbnail-image\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.THUMBNAIL_IMAGE;case\"thumbnail-video\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.THUMBNAIL_VIDEO;case\"thumbnail-gif\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.THUMBNAIL_GIF;case\"thumbnail-document\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.THUMBNAIL_DOCUMENT;case\"thumbnail-link\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.THUMBNAIL_LINK;case\"novi-video\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.NOVI_VIDEO;case\"novi-image\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.NOVI_IMAGE;case\"xma-image\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.XMA_IMAGE;default:d(\"WALogger\").ERROR(h(),a);return null}}g.getMediaAttachmentTypeForServerMediaType=a}),98);\n__d(\"MAWGetPreviewContentTypeForMediaType\",[\"EchoMessageMediaFieldUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){switch(a){case\"image\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.IMAGE_JPEG;case\"gif\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.GIF;case\"sticker\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.STICKER;case\"video\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.AUDIO_MP4;case\"ptt\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.AUDIO_WAV;case\"xma-image\":return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.IMAGE_JPEG;default:return null}}g.getPreviewContentTypeForMediaType=a}),98);\n__d(\"MAWUploadMessageTxns\",[\"EchoCommonUtils\",\"EchoEncodingUtils\",\"EchoMessage\",\"LSEBPayloadSerializerError\",\"LSMEBTaskCreationSource\",\"MAWBridgeEventTransmitter\",\"MAWConvertExtendedContentOverlayIconGlyphToXMAGatingType\",\"MAWConvertExtendedContentTargetTypeToXMATargetType\",\"MAWConvertExtendedContentXMLLayoutTypeToXMALayoutType\",\"MAWDbEditMsgHistoryTxns\",\"MAWDbMediaTxns\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbMsgUtil\",\"MAWDbReactionsTxns\",\"MAWDbXMATxns\",\"MAWDexieTable\",\"MAWEBUploadMessageUtils\",\"MAWEncryptedBackupCacheManager\",\"MAWGetAttachmentTypeForServerMediaType\",\"MAWGetMediaAttachmentTypeForServerMediaType\",\"MAWGetPreviewContentTypeForMediaType\",\"MAWGlobals\",\"MAWJidUtils\",\"MAWJids\",\"MAWMsgType\",\"MAWUploadMessagesBackup\",\"MAWVault\",\"WAArmadilloXMA.pb\",\"WABase64\",\"WAJids\",\"WALogger\",\"WAMediaUtils\",\"WATimeUtils\",\"err\",\"gkx\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] edit history has length \",\", but edit count on message is \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] No XMA object found for msg with external id \",\". Cannot upload XMA\"]);k=function(){return a};return a}function l(a,b){return a.threads.get(b).then(function(a){if(a==null)throw c(\"err\")(\"constructEchoMessage: thread not present\");return a.jid})}var m=\"You unsent a message\";function n(a){switch(a.specialTextSize){case 1:return d(\"EchoMessage\").MessageTextSize.SMALL;case 2:return d(\"EchoMessage\").MessageTextSize.MEDIUM;case 3:return d(\"EchoMessage\").MessageTextSize.LARGE;default:return d(\"EchoMessage\").MessageTextSize.NONE}}function o(a,b){return d(\"MAWDbXMATxns\").maybeGetXMAFromProtocolMsgId(a,d(\"MAWJidUtils\").maybeToProtocolMsgId(b.author,b.threadJid,b.externalId)).then(function(e){if(e!=null)return e.previewMediaIds!=null?d(\"MAWDexieTable\").dexieAll(e.previewMediaIds.map(function(b){return d(\"MAWDbMediaTxns\").maybeGetMediaFromMediaId(a,b)})).then(function(a){for(var a=a,b=Array.isArray(a),f=0,a=b?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(b){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(g==null)return d(\"MAWDexieTable\").dexieResolve({maybeErrorDetail:{errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"constructEchoMessage: DbMedia is null for the XMA message\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.WARN},xmaData:void 0});if(g.fbid==null)return d(\"MAWDexieTable\").dexieResolve({maybeErrorDetail:{errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"constructEchoMessage: fbid is null for the XMA message\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.WARN},xmaData:void 0})}return v(e)}):v(e);else{d(\"WALogger\").ERROR(k(),b.externalId);return d(\"MAWDexieTable\").dexieResolve({maybeErrorDetail:{errorCode:c(\"LSEBPayloadSerializerError\").UNKNOWN_ERROR,errorMsg:\"constructEchoMessage: no xma object found for msg with external id \"+b.externalId,uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.WARN},xmaData:void 0})}})}function p(a,b){try{return d(\"MAWDbMsg\").isMediaMsg(a)||a.type===d(\"MAWMsgType\").MSG_TYPE.XMA}catch(e){a=\"[labyrinth_web] Invalid msg type for isMediaMsg check: \"+e;d(\"WALogger\").ERROR(j(),a);b.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:a,uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return!1}}function q(a,b){return{echoMessage:null,externalId:a,maybeErrorDetail:{errorCode:c(\"LSEBPayloadSerializerError\").NOT_IMPLEMENTED,errorMsg:b,uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.WARN}}}function r(a,b,e){var f=e.threadJid!=null?d(\"MAWDexieTable\").dexieResolve(e.threadJid):l(a,e.thread),g={mediaMetadata:null},h=p(e,g);h=h?t(a,e):d(\"MAWDexieTable\").dexieResolve(g);g=u(a,e);b=e.quote!=null?A(a,e.quote,e.thread,f,b):d(\"MAWDexieTable\").dexieResolve();var i=d(\"MAWDbMsg\").isXMAMsg(e)?o(a,e):d(\"MAWDexieTable\").dexieResolve(null),j=[];a=c(\"gkx\")(\"23918\")||c(\"qex\")._(\"778\")===!0?d(\"MAWDbEditMsgHistoryTxns\").getEditHistoryAsEchoWithJidPromise(a,e.externalId,e.author,f):d(\"MAWDexieTable\").dexieResolve(j);return{editHistoryPromise:a,mediaMetadataUploadPromise:h,quotedMsgPromise:b,reactionsPromise:g,threadJidPromise:f,xmaDataUploadRequestPromise:i}}function s(a,b,c,e,f,g,h,j){var k;a=d(\"WAJids\").threadIdForChatJid(a);var l=h.serverTs;k=(k=h.editCount)!=null?k:0;g.length>0&&g.length-1!==h.editCount&&(d(\"WALogger\").WARN(i(),g.length,h.editCount),k=g.length-1);l={authoritativeTimestampMs:l!=null?l*1e3:void 0,contentSubtype:d(\"EchoMessage\").EchoMessageContentSubtype.NONE,contentType:d(\"EchoMessage\").EchoMessageContentType.TEXT,displayTimestampMs:h.ts*1e3,editCount:k,editHistory:g,from:d(\"EchoCommonUtils\").craftEchoAddress(null,j,\"AdvancedCrypto\"),isForwarded:h.isForwarded,messageId:h.externalId,serializationOrigin:d(\"EchoMessage\").EchoSerializationOriginType.WEB,sortOrderMs:d(\"MAWEBUploadMessageUtils\").echoOverrideMessageSortOrder(h),textSize:n(h),threadId:a,version:d(\"EchoMessage\").ECHO_MESSAGE_MIGRATION_DOCUMENT_VERSION,xContentType:d(\"EchoEncodingUtils\").convertDbMsgTypeToXMessageContentType(h.type),xMessagePlaceholderType:d(\"EchoMessage\").EchoMessagePlaceholderType.NO_PLACEHOLDER,xOfflineThreadingId:h.externalId,xThreadId:a};((k=h.msgContent)==null?void 0:k.content)!=null&&(l=babelHelpers[\"extends\"]({},l,{text:d(\"MAWVault\").unvault(h.msgContent.content)}));h.type===d(\"MAWMsgType\").MSG_TYPE.REVOKED&&(l.contentType=d(\"EchoMessage\").EchoMessageContentType.PLACEHOLDER,l.contentSubtype=d(\"EchoMessage\").EchoMessageContentSubtype.UNSEND,l.revokeSentTimestampMs=h.originalTs,l.revokeUnsentTimestampMS=h.unsendMsgContentDeleteTs,l.text=m);if(e!=null){g=z(e);j=g.senderId;a=d(\"EchoCommonUtils\").craftEchoAddress(null,j,\"AdvancedCrypto\");e.sortOrderMs!=null&&(l.quoteData={quoteMessageId:e.externalId,quoteMessageSender:a,quoteSortOrderInMs:e.sortOrderMs})}if(d(\"MAWMsgType\").isMAWSupportedMediaType(h.type)){k=b.mediaMetadata;if(k!=null)l=babelHelpers[\"extends\"]({},l,{contentType:d(\"EchoMessage\").EchoMessageContentType.MEDIA,mediaData:k});else if(h.type!==d(\"MAWMsgType\").MSG_TYPE.XMA)return{echoMessage:l,externalId:h.externalId,maybeErrorDetail:b.maybeErrorDetail}}if(f!=null&&f.xmaData!=null&&h.type===d(\"MAWMsgType\").MSG_TYPE.XMA){l.xmaData=f.xmaData;l.contentType=d(\"EchoMessage\").EchoMessageContentType.XMA;if(l.mediaData==null&&((g=f.xmaData)==null?void 0:g.xmaDefaultCTA)!=null&&l.text==null){l.text=(j=f.xmaData)==null?void 0:j.xmaDefaultCTA}}else if(f!=null&&f.xmaData==null&&h.type===d(\"MAWMsgType\").MSG_TYPE.XMA)return{echoMessage:l,externalId:h.externalId,maybeErrorDetail:f.maybeErrorDetail};return{echoMessage:babelHelpers[\"extends\"]({},l,c),externalId:h.externalId}}function a(a,b){return d(\"MAWDexieTable\").dexieAll(b.map(function(b){var c=b.dbMsg;b=b.quotedMsg;if(!d(\"MAWMsgType\").isEBSupportedMsgType(c.type))return d(\"MAWDexieTable\").dexieResolve(q(c.externalId,'constructEchoMessage: \"'+String(c.type)+'\" NYI'));if(c.serverTs==null)return d(\"MAWDexieTable\").dexieResolve(q(c.externalId,'constructEchoMessage: \"'+String(c.type)+'\" Not authoritative msg. '));var e=d(\"WATimeUtils\").castToUnixTime(0);if(c.serverTs===e||c.serverTs===null&&c.ts===e){e=\"constructEchoMessage: Invalid timestamp - timestamp for message corresponds to 1\/1\/1970\";d(\"WALogger\").ERROR(h(),e);return d(\"MAWDexieTable\").dexieResolve(q(c.externalId,e))}e=z(c);var f=e.senderId;e=r(a,b,c);b=e.editHistoryPromise;var g=e.mediaMetadataUploadPromise,i=e.quotedMsgPromise,j=e.reactionsPromise,k=e.threadJidPromise;e=e.xmaDataUploadRequestPromise;return d(\"MAWDexieTable\").dexieAll([k,g,j,i,e,b]).then(function(a){var b=a[0],d=a[1],e=a[2],g=a[3],h=a[4];a=a[5];return s(b,d,e,g,h,a,c,f)})}))}function t(a,b){var e={mediaMetadata:null};if(b.type===d(\"MAWMsgType\").MSG_TYPE.XMA)return d(\"MAWDbXMATxns\").maybeGetXMAFromProtocolMsgId(a,d(\"MAWJidUtils\").maybeToProtocolMsgId(b.author,b.threadJid,b.externalId)).then(function(b){if(b!=null)return w(a,b);else{e.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] Media meta data couldn't be created for XMA because DbXMA is not in IndexedDB. This probably means the XMA message was not sent properly by ChatX.\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return d(\"MAWDexieTable\").dexieResolve(e)}});if(!d(\"MAWMsgType\").isMAWSupportedMediaType(b.type)){e.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").NOT_SUPPORTED_ON_WEB,errorMsg:\"[labyrinth_web] Media type is not supported for msg, type: \"+b.type,uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.WARN};return d(\"MAWDexieTable\").dexieResolve(e)}if(b.mediaId==null){e.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] No media id found in a media msg\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return d(\"MAWDexieTable\").dexieResolve(e)}var f=d(\"WATimeUtils\").DAY_SECONDS*28,g=b.serverTs;if(g!=null&&d(\"WATimeUtils\").unixTime()-g>f){e.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] Media is older than 28 days and is not being uploaded.\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.WARN};return d(\"MAWDexieTable\").dexieResolve(e)}return d(\"MAWDbMediaTxns\").maybeGetMediaFromMediaId(a,b.mediaId).then(function(f){if(!f){e.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] No media db entry for media id\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return d(\"MAWDexieTable\").dexieResolve(e)}var g=c(\"gkx\")(\"23919\")?d(\"MAWDbMediaTxns\").maybeGetMediaBackupRowFromMsgId(a,b.msgId):d(\"MAWDexieTable\").dexieResolve();return g.then(function(a){return d(\"MAWDexieTable\").dexieResolve(x(b.msgId,f,!1,a))})})}function u(a,b){b=d(\"MAWDbMsgUtil\").getProtocolMsgIdFromDbMsg(b);return b==null?d(\"MAWDexieTable\").dexieResolve():d(\"MAWDbReactionsTxns\").getReactionForEcho(a,b).then(function(a){if(a!=null&&a.length>0){var b=d(\"WAJids\").extractUserId(d(\"MAWGlobals\").getMyUserJid()),c=a.map(function(a){var c=d(\"WAJids\").authorToUserId(a.author,b);return d(\"EchoCommonUtils\").craftEchoAddress(a.reaction,c,\"AdvancedCrypto\")}),e=a.map(function(a){var c=d(\"WAJids\").authorToUserId(a.author,b);return d(\"EchoCommonUtils\").craftEchoAddress((a.ts*1e3).toString(),c,\"AdvancedCrypto\")});a=a.map(function(a){var c=d(\"WAJids\").authorToUserId(a.author,b);return d(\"EchoCommonUtils\").craftEchoAddress(a.externalId.toString(),c,\"AdvancedCrypto\")});return{reactionAuthoritativeTimestampMs:e,reactions:c,reactionXOfflineThreadingIds:a}}})}function v(a){var b={xmaData:null};if(a.isTombstoned==null){b.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no isTombstoned to construct XMAData\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return b}var e={xmaContentRef:a.contentRef,xmaHeaderSubtitle:a.overlayTitle,xmaHeaderTitle:a.headerTitle,xmaIsTombstoned:a.isTombstoned,xmaMaxSubtitleNumLines:a.maxSubtitleNumOfLines,xmaMaxTitleNumLines:a.maxTitleNumOfLines,xmaSubtitleText:a.subtitleText,xmaTargetExpiry:a.targetExpiringAtSec,xmaTargetId:a.targetId,xmaTargetUsername:a.targetUsername,xmaTitleText:a.titleText},f=a.xmaLayoutType||d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.SINGLE;e=babelHelpers[\"extends\"]({},e,{xmaLayoutType:d(\"MAWConvertExtendedContentXMLLayoutTypeToXMALayoutType\").convertExtendedContentXMLLayoutTypeToXMALayoutType(f)});a.targetType!=null&&(e=babelHelpers[\"extends\"]({},e,{xmaTargetType:d(\"MAWConvertExtendedContentTargetTypeToXMATargetType\").convertExtendedContentTargetTypeToXMATargetType(a.targetType)}));a.overlayIconGlyph!=null&&(e=babelHelpers[\"extends\"]({},e,{xmaGatingType:d(\"MAWConvertExtendedContentOverlayIconGlyphToXMAGatingType\").convertExtendedContentOverlayIconGlyphToXMAGatingType(a.overlayIconGlyph)}));a.defaultCTA!=null&&a.defaultCTA.nativeUrl!=null&&(e=babelHelpers[\"extends\"]({},e,{xmaDefaultCTA:a.defaultCTA.nativeUrl}));b.xmaData=e;return b}function w(a,b){var e={mediaMetadata:null};if(b.previewMediaIds!=null){var f=b.previewMediaIds[0];return d(\"MAWDbMediaTxns\").maybeGetMediaFromMediaId(a,f).then(function(f){if(!f){e.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] No media db entry for media id to be used for xma\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.WARN};return d(\"MAWDexieTable\").dexieResolve(e)}var g=b.msgId;if(g==null){e.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] No message id found in a xma msg\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return d(\"MAWDexieTable\").dexieResolve(e)}var h=c(\"gkx\")(\"23919\")?d(\"MAWDbMediaTxns\").maybeGetMediaBackupRowFromMsgId(a,g):d(\"MAWDexieTable\").dexieResolve();return h.then(function(a){return d(\"MAWDexieTable\").dexieResolve(x(g,f,!0,a))})})}else return d(\"MAWDexieTable\").dexieResolve(e)}function x(a,b,e,f){var g={mediaMetadata:null},h=null;f!=null&&f.length>0&&(h=f.find(function(a){return a.mediaId===b.mediaId}));f=h!=null?h.fbid:b.fbid;a=b.mediaEntries.get(a);if(a==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no media entry to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}a=d(\"WAMediaUtils\").decodeMediaEntryData(a);h=h!=null?h.objectId:b.objectId;if(h==null)return g;var i=d(\"MAWGetAttachmentTypeForServerMediaType\").getAttachmentTypeForServerMediaType(a.serverMediaType);if(i==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no attachment type to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}var j=a.mediaKey;if(j==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no mediaKey to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}var k=a.mediaKeyTimestamp;if(k==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no mediaKeyTimestamp to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}var l=a.directPath;if(l==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no directPath to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}if(a.serverMediaType==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no mediaContentType to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}e=e?\"image\/jpeg\":d(\"WAMediaUtils\").getMimeTypeFromServerMediaType(a.serverMediaType);var m=d(\"MAWGetMediaAttachmentTypeForServerMediaType\").getMediaAttachmentTypeForServerMediaType(a.serverMediaType);if(m==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no xAttachmentType to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}if(a.serverMediaType!=null&&a.serverMediaType in{gif:1,image:1,sticker:1}&&b.validatedImageInfo==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no imageinfo to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}if(a.serverMediaType===\"video\"&&b.validatedVideoInfo==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no videoinfo to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}if(a.serverMediaType===\"ptt\"&&b.validatedAudioInfo==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no audioinfo to construct mediaMetadata\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}if(a.fileSha256==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no WA fileSha256 found\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}var n=d(\"WABase64\").encodeB64UrlSafe(a.fileSha256);if(a.fileEncSha256==null){g.maybeErrorDetail={errorCode:c(\"LSEBPayloadSerializerError\").MEDIA_INFO_INVALID,errorMsg:\"[labyrinth_web] no WA fileEncSha256 found\",uploadErrorType:d(\"MAWUploadMessagesBackup\").UploadErrorType.FATAL};return g}g=d(\"WABase64\").encodeB64UrlSafe(a.fileEncSha256);var o=null,p=null,q=null,r=null,s=null,t=void 0;a=d(\"MAWGetPreviewContentTypeForMediaType\").getPreviewContentTypeForMediaType(a.serverMediaType);if(b.validatedImageInfo!=null){var u;o=(u=b.validatedImageInfo.width)!=null?u:0;p=(u=b.validatedImageInfo.height)!=null?u:0;r=(u=b.validatedImageInfo.jpegThumbnailWidth)!=null?u:0;s=(u=b.validatedImageInfo.jpegThumbnailHeight)!=null?u:0}if(b.validatedVideoInfo!=null){o=(u=b.validatedVideoInfo.width)!=null?u:0;p=(u=b.validatedVideoInfo.height)!=null?u:0;r=(u=b.validatedVideoInfo.jpegThumbnailWidth)!=null?u:0;s=(u=b.validatedVideoInfo.jpegThumbnailHeight)!=null?u:0;q=(u=b.validatedVideoInfo.duration)!=null?u:0}if(b.validatedAudioInfo!=null){q=(u=b.validatedAudioInfo.duration)!=null?u:0}b.validatedDocumentFileInfo!=null&&(t=b.validatedDocumentFileInfo.filename);u={attachmentObjectId:h,attachmentType:i,directPath:l,encryptedHash:g,mediaBackupStatus:\"success\",mediaContentType:e,mediaKey:d(\"EchoEncodingUtils\").convertMediaKeyToString(j),mediaKeyTimestamp:k,plaintextHash:n,size:b.size,xAttachmentType:m,xContentType:\"full\"};u=y(u,f,a,o,p,q,r,s,t);return{mediaMetadata:u}}function y(a,b,c,d,e,f,g,h,i){a=a;b!=null&&(a=babelHelpers[\"extends\"]({},a,{backupEntFbid:b}));c!=null&&(a=babelHelpers[\"extends\"]({},a,{previewContentType:c}));d!=null&&(a=babelHelpers[\"extends\"]({},a,{width:d}));e!=null&&(a=babelHelpers[\"extends\"]({},a,{height:e}));f!=null&&(a=babelHelpers[\"extends\"]({},a,{mediaPlayableDuration:f}));g!=null&&(a=babelHelpers[\"extends\"]({},a,{previewContentWidth:g}));h!=null&&(a=babelHelpers[\"extends\"]({},a,{previewContentHeight:h}));i!=null&&(a=babelHelpers[\"extends\"]({},a,{filename:i}));return a}function z(a){a=d(\"WAJids\").authorToUserId(a.author,d(\"WAJids\").userIdFromJid(d(\"MAWGlobals\").getMyUserJid()));var b=d(\"MAWJids\").toUserJid(a);return{senderId:a,senderJid:b}}function A(a,b,e,f,g){var h=b.content.msgId,i=b.content.externalId;return g!=null?d(\"MAWDexieTable\").dexieResolve(g):d(\"MAWDbMsgTxns\").maybeGetMsg(a,h).then(function(a){if(a==null)return f.then(function(a){var b=d(\"WAJids\").threadIdForChatJid(a);if(!d(\"MAWEncryptedBackupCacheManager\").peekRestoreCache(i)){d(\"MAWEncryptedBackupCacheManager\").addMsgEntryToReuploadCache(e,i);d(\"MAWBridgeEventTransmitter\").issuePointQueryOutsideTxn(i,b,void 0,c(\"LSMEBTaskCreationSource\").EB_POINT_QUERY_IN_ACT,a);return null}else{a=(b=d(\"MAWEncryptedBackupCacheManager\").getRestoredCache(i))==null?void 0:b.dbMsg;return d(\"MAWDexieTable\").dexieResolve(a)}});else return d(\"MAWDexieTable\").dexieResolve(a)})}g.constructEchoMessage=a;g.constructXMAData=v;g.constructMediaMetadata=x;g.setConditionalFields=y}),98);\n__d(\"MAWCastToMsgrServerMediaType\",[\"MAWDbMedia\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"invalid client mediaType: \",\" for castClientMediaTypeToServerMediaType method\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"invalid mediaType: \",\" for castToMsgrServerMediaType method\"]);i=function(){return a};return a}function a(a,b){b===void 0&&(b=!1);if(b&&a===\"image\")return\"xma\";switch(a){case\"image\":case\"video\":case\"gif\":case\"sticker\":case\"document\":return a;case\"ptt\":return\"audio\";case\"xma-image\":return\"xma\";default:d(\"WALogger\").ERROR(i(),a);return null}}function b(a,b){b===void 0&&(b=!1);if(b&&a===d(\"MAWDbMedia\").MEDIA_TYPE.IMAGE)return\"xma\";switch(a){case\"Image\":return\"image\";case\"Video\":return\"video\";case\"Gif\":return\"gif\";case\"Sticker\":return\"sticker\";case\"DocumentFile\":return\"document\";case\"Ptt\":return\"audio\";default:d(\"WALogger\").ERROR(h(),a);return null}}g.castToMsgrServerMediaType=a;g.castClientMediaTypeToServerMediaType=b}),98);\n__d(\"MAWMediaAfterTxns\",[\"MAWBridgeTypesCreators\",\"MAWIndexedDb\",\"MAWRavenUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(a,b){return{ephemeralMediaState:b,ephemeralMediaViewMode:d(\"MAWRavenUtils\").getEphemeralMediaViewMode(a)}};function a(a,b,c){b=a.ravenEphemeralType!=null&&a.ravenEphemeralMediaState!=null?d(\"MAWBridgeTypesCreators\").createBridgeMedia(a.thread,a.threadJid,b,c,a.sortOrderMs,h(a.ravenEphemeralType,a.ravenEphemeralMediaState)):d(\"MAWBridgeTypesCreators\").createBridgeMedia(a.thread,a.threadJid,b,c,a.sortOrderMs);d(\"MAWIndexedDb\").afterTransaction({tag:\"NewMedia\",value:b})}g.handleNewMediaAfterTxn=a}),98);\n__d(\"MAWMediaBackupTxns\",[\"MAWDbMediaTxns\",\"MAWDexieTable\",\"Promise\",\"WALogger\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] fbid already exists for objectId\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] mediaId or msgId cannot differ for an objectId in mediaBackup\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] ObjectId already shared by different msgId\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] fbid already exists for objectId\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] mediaId or msgId cannot differ for an objectId in mediaBackup\"]);m=function(){return a};return a}function a(a,b,e,f,g){return f==null||!c(\"gkx\")(\"23919\")?d(\"MAWDexieTable\").dexieResolve():d(\"MAWDbMediaTxns\").maybeGetMediaBackupRowFromObjectId(a,f).then(function(c){if(c==null){var h={mediaId:b,msgId:e,objectId:f};g!=null&&(h=babelHelpers[\"extends\"]({},h,{fbid:g}));return a.mediaBackup.add(h).then(function(a){return babelHelpers[\"extends\"]({},h,{mediaBackupId:a})})}else if(c.mediaId!==b||c.msgId!==e){d(\"WALogger\").ERROR(m());return c}else{if(c.fbid==null&&g!=null){var i=babelHelpers[\"extends\"]({},c,{fbid:g});return a.mediaBackup.put(i).then(function(a){return i})}else d(\"WALogger\").WARN(l());return c}})}function e(a,e){if(e==null||!c(\"gkx\")(\"23919\"))return d(\"MAWDexieTable\").dexieResolve();var f=[];e.forEach(function(a){a=a.objectId;a!=null&&f.push(a)});return d(\"MAWDbMediaTxns\").maybeGetMediaBackupRowsFromObjectIds(a,f).then(function(c){var f=new Map(),g=[];e.forEach(function(a){var b=a.objectId;if(b!=null){var e=c.get(b);if(e==null){var h={mediaId:a.mediaId,msgId:a.msgId,objectId:b},l=a.fbid;if(l!=null){h=babelHelpers[\"extends\"]({},h,{fbid:l});f.get(b)!=null&&((l=f.get(b))==null?void 0:l.msgId)!==a.msgId&&d(\"WALogger\").ERROR(k());f.set(b,h)}}else{e.mediaId!==a.mediaId&&d(\"WALogger\").ERROR(j());l=a.fbid;if(e.fbid==null&&l!=null){b=babelHelpers[\"extends\"]({},e,{fbid:l});g.push(b)}else d(\"WALogger\").WARN(i())}}});return(h||(h=b(\"Promise\"))).all([a.mediaBackup.bulkAdd([].concat(Array.from(f.values()))),a.mediaBackup.bulkPut(g)]).then(function(){})}).then(function(){})}g.linkMediaBackup=a;g.bulkLinkMediaBackup=e}),98);\n__d(\"MAWSupportedDocumentTypes\",[],(function(a,b,c,d,e,f){\"use strict\";var g=[\"apk\",\"pyc\",\"7z\",\"z\",\"gz\",\"xz\",\"rar\",\"zip\",\"zipx\",\"ace\",\"arc\",\"zpaq\",\"quad\",\"balz\",\"cab\",\"arj\",\"lzh\",\"uue\",\"bz\",\"bz2\",\"bzip2\",\"jar\",\"iso\",\"tar\",\"ade\",\"adp\",\"air\",\"app\",\"application\",\"bas\",\"bat\",\"chm\",\"cmd\",\"com\",\"command\",\"cpl\",\"crt\",\"dll\",\"dmg\",\"dpkg\",\"exe\",\"hlp\",\"hta\",\"inf\",\"ins\",\"isp\",\"jnlp\",\"js\",\"jse\",\"lib\",\"lnk\",\"lua\",\"mde\",\"msc\",\"msi\",\"msp\",\"mst\",\"ocx\",\"pcd\",\"pif\",\"pkg\",\"ps1\",\"reg\",\"scr\",\"sct\",\"sh\",\"shb\",\"shs\",\"sys\",\"term\",\"url\",\"vb\",\"vbe\",\"vbs\",\"vxd\",\"webarchive\",\"wsc\",\"wsf\",\"wsh\",\"xbap\"];function a(a){if(a==null)return!1;a=a.includes(\".\")?a.split(\".\").pop():null;return a!=null&&!g.includes(a)}f.isAllowedType=a}),66);\n__d(\"WASortedLists\",[],(function(a,b,c,d,e,f){\"use strict\";function a(){return[]}function b(){return[]}function c(a,b){return a.filter(b)}function d(a,b){return l(a.map(b))}function e(a,b){var c=a.length===b.length;for(var d=0;c&&d<a.length;d++)a[d]!==b[d]&&(c=!1);return c}function g(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return a;return a.concat([b]).sort()}function h(a,b){if(a.length<b.length)return!1;var c=!0;for(var d=0,e=0;c&&e<b.length;e++)do c=a[d]===b[e];while(!c&&++d<a.length);return c}function i(a,b){var c=[];for(var d=0,e=0;d<a.length;d++){var f=a[d];while(e<b.length&&f>b[e])e++;(e===b.length||f<b[e])&&c.push(f)}return c}function j(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length){var f=a[d],g=b[e];f<g?d++:f===g?(c.push(f),d++,e++):e++}return c}function k(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length)a[d]<b[e]?c.push(a[d++]):a[d]===b[e]?(c.push(a[d++]),e++):c.push(b[e++]);while(d<a.length)c.push(a[d++]);while(e<b.length)c.push(b[e++]);return c}function l(a){return m(a.slice().sort())}function m(a){var b=!1;for(var c=0;c<a.length-1;c++)a[c]===a[c+1]&&(b=!0);if(!b)return a;c=[];for(b=0;b<a.length-1;b++)a[b]!==a[b+1]&&c.push(a[b]);c.push(a[a.length-1]);return c}function n(a){return Array.from(a).sort()}function o(a){return a.slice().sort()}function p(a,b,c){var d=null;for(var e=0;!d&&e<a.length;e++)a[e]===b&&(d=a.slice(),d[e]=c,d=m(d.sort()));return d||a}function q(a){return[a]}function r(a){return a.length<1}function s(a,b,c){return a.slice(b,c)}f.emptySet=a;f.emptyList=b;f.filter=c;f.map=d;f.areEqual=e;f.addToSet=g;f.contains=h;f.subtract=i;f.intersect=j;f.joinUniq=k;f.sortAndDedupe=l;f.asSortedSet=n;f.sort=o;f.swapIn=p;f.singleElement=q;f.isEmpty=r;f.slice=s}),66);\n__d(\"MAWMediaManagementTxns\",[\"MAWBridgeTypesCreators\",\"MAWBridgeUpload\",\"MAWCastToMsgrServerMediaType\",\"MAWDbChunkTxns\",\"MAWDbMediaTxns\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWMediaAfterTxns\",\"MAWMediaBackupTxns\",\"MAWMediaUtils\",\"MAWMsgType\",\"MAWSupportedDocumentTypes\",\"MAWWriteMsgTxns\",\"WAErrorMessage\",\"WAJids\",\"WALogger\",\"WAMediaUtils\",\"WASortedLists\",\"WATagsLogger\",\"WATimeUtils\",\"err\",\"gkx\",\"isInstamadilloEB\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] mediaBackup entry already exists for objectId \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Same FBId assigned for different mediaIds. fbId: \",\" - shared by hashedPlaintextHashes: \",\" \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Same objectId assigned for different mediaIds. objectId: \",\" shared by  hashedPlaintextHashes: \",\" \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web][updateMediaWithEncodedMediaEntryData] media entry is missing, can't upate media with encoded data\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] media entry is missing, can't update media info\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Media failed to link. Possible duplicate? Will attempt a retry. Error: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Media failed to link. Possible duplicate? Will attempt a retry. For plaintextHash: \",\", hashedPlaintextHash: \",\". Error: \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Media failed to link after retry. Error: \",\"\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Media failed to link after retry. For plaintextHash: \",\", hashedPlaintextHash: \",\". Error: \",\"\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Media found after retry for plaintextHash: \",\"\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Missing mandatory args for incoming media msg\"]);r=function(){return a};return a}var s=d(\"WATagsLogger\").TAGS([\"MAWMediaManagementTxns\"]),t=c(\"gkx\")(\"23924\");function a(a,b,c,e){var f=c==null||b.type===d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE&&(t||!d(\"MAWSupportedDocumentTypes\").isAllowedType((c=c.validatedDocumentFileInfo)==null?void 0:c.filename));return d(\"MAWWriteMsgTxns\").prepareMsgWriteData(a,b,e).then(function(a){return babelHelpers[\"extends\"]({},a,{shouldDropDocument:f})})}function b(a,b,e,f){f===void 0&&(f=!1);var g={validatedAudioInfo:b.validatedAudioInfo,validatedDocumentFileInfo:b.validatedDocumentFileInfo,validatedImageInfo:b.validatedImageInfo,validatedVideoInfo:b.validatedVideoInfo},h=d(\"MAWMediaUtils\").genHMACPlaintextHash(b.plaintextHash),i=d(\"WAMediaUtils\").decodeMediaEntryData(b.mediaEntry),j=i.objectId!=null?d(\"WAMediaUtils\").stringToDeliveryObjectId(i.objectId):null;return d(\"MAWDexieTable\").dexieAll([u(a,e,b.plaintextHash,b.mediaType,b.size,b.mediaEntry,g,j,void 0,f),d(\"MAWDbChunkTxns\").hasMediaChunk(a,h)]).then(function(a){var b=a[0];a=a[1];e.type!==d(\"MAWMsgType\").MSG_TYPE.REVOKED&&!f&&d(\"MAWMediaAfterTxns\").handleNewMediaAfterTxn(e,b,a);return b}).then(function(a){var b=d(\"MAWCastToMsgrServerMediaType\").castToMsgrServerMediaType(i.serverMediaType,f),g=i.mediaKeyTimestamp;if(d(\"MAWMsgType\").isMAWSupportedMediaType(e.type)&&!c(\"isInstamadilloEB\")()){var h=e.threadJid;j!=null&&b!=null&&h!=null&&g!=null&&b!==\"document\"?d(\"MAWIndexedDb\").afterTransaction({tag:\"UploadAttachment\",value:d(\"MAWBridgeUpload\").createBridgeUploadAttachment(e.thread,j,b,e.externalId,d(\"MAWGlobals\").getConfig().productTypeForEBAttachments,d(\"WAJids\").threadIdForChatJid(h),h,g)}):d(\"WALogger\").WARN(r())}return a})}function u(a,b,c,e,f,g,h,i,j,k){k===void 0&&(k=!1);return v(a,b,c,e,f,g,h,i,j,k).then(function(c){var e=k?d(\"MAWDexieTable\").dexieResolve():d(\"MAWDbMsgTxns\").updateMediaId(a,b,c.mediaId);return e.then(function(){return d(\"MAWMediaBackupTxns\").linkMediaBackup(a,c.mediaId,b.msgId,i,j).then(function(){return c})})})}function v(a,b,c,e,f,g,h,i,j,k,l){k===void 0&&(k=!1);l===void 0&&(l=0);return d(\"MAWDbMediaTxns\").maybeGetMediaFromPlaintextHash(a,c).then(function(r){var t=new Map(r==null?void 0:r.mediaEntries),u=z(g,i,j);u!=null&&t.set(b.msgId,u);if(r){l>0&&s.LOG(q(),c);var w=babelHelpers[\"extends\"]({},r,h,{mediaEntries:t,msgIds:d(\"WASortedLists\").addToSet(r.msgIds,b.msgId)});return a.media.put(w).then(function(){return w})}else{var x=d(\"MAWMediaUtils\").genHMACPlaintextHash(c),y=babelHelpers[\"extends\"]({fbid:(u=j)!=null?u:void 0,hashedPlaintextHash:x,mediaEntries:t,mediaType:e,msgIds:d(\"WASortedLists\").singleElement(b.msgId),objectId:(r=i)!=null?r:void 0,plaintextHash:c,size:f,ts:d(\"WATimeUtils\").unixTime()},h);return a.media.add(y).then(function(a){return babelHelpers[\"extends\"]({},y,{mediaId:a})})[\"catch\"](function(q){var r=d(\"WAErrorMessage\").maybeGetMessageFromError(q);if(l>0){s.WARN(p(),c,x,r);s.ERROR(o(),r);throw q}else{s.WARN(n(),c,x,r);s.ERROR(m(),r);return v(a,b,c,e,f,g,h,i,j,k,l+1)}})}})}var w=function(a,b,e,f,g,h,i,j,k){k===void 0&&(k=!1);return d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,b).then(function(b){if(b==null)throw c(\"err\")(\"Do not have the media message in db when attachHashToMediaMsg\");else return u(a,b,e,h,i,void 0,j,f,g,k)})},x=function(a,b,c){return d(\"MAWDbMediaTxns\").maybeGetMediaFromHashedPlaintextHash(a,b).then(function(b){if(b!=null){var d=babelHelpers[\"extends\"]({},b);c.validatedAudioInfo!=null&&(d.validatedAudioInfo=babelHelpers[\"extends\"]({},b.validatedAudioInfo,c.validatedAudioInfo));c.validatedVideoInfo!=null&&(d.validatedVideoInfo=babelHelpers[\"extends\"]({},b.validatedVideoInfo,c.validatedVideoInfo));c.validatedImageInfo!=null&&(d.validatedImageInfo=babelHelpers[\"extends\"]({},b.validatedImageInfo,c.validatedImageInfo));c.validatedDocumentFileInfo!=null&&(d.validatedDocumentFileInfo=babelHelpers[\"extends\"]({},b.validatedDocumentFileInfo,c.validatedDocumentFileInfo));return a.media.update(d.mediaId,d).then(function(){})}else s.WARN(l())})},y=function(a,b,c,e){return d(\"MAWDbMediaTxns\").maybeGetMediaFromHashedPlaintextHash(a,b).then(function(b){if(b!=null){var f=e?b.mediaEntries.set(c,e):b.mediaEntries;b=babelHelpers[\"extends\"]({},b,{mediaEntries:f});return a.media.update(b.mediaId,b)}else{s.ERROR(k());return d(\"MAWDexieTable\").dexieResolve()}})};function e(a,b,c,e,f,g,h,i,j,k){k===void 0&&(k=!1);return d(\"MAWDexieTable\").dexieAll([w(a,b,e,f,g,h,j.size,i,k),d(\"MAWDbChunkTxns\").getOrCreateMediaChunk(a,e,c,j.type)]).then(function(a){a=a[0];return a})}function z(a,b,c){var e;a=a;a!=null&&b!=null&&(e=d(\"WAMediaUtils\").decodeMediaEntryData(a),a=d(\"WAMediaUtils\").encodeMediaEntryWithUpdatedObjectId(e,b));a!=null&&c!=null&&(e=d(\"WAMediaUtils\").decodeMediaEntryData(a),a=d(\"WAMediaUtils\").encodeMediaEntryWithUpdatedFbid(e,c));return a}function f(a,b,c){var e=new Map();a.mediaEntries.forEach(function(a,f){var g=d(\"WAMediaUtils\").decodeMediaEntryData(a);g=g.objectId===b?d(\"WAMediaUtils\").encodeMediaEntryWithUpdatedFbid(g,c):a;e.set(f,g)});return e}function A(a,b,c,e){var f=new Map();b.forEach(function(a){var b;b=(b=f.get(a.hashedPlaintextHash))!=null?b:[];b.push(a);f.set(a.hashedPlaintextHash,b)});return d(\"MAWDbMediaTxns\").maybeBulkGetMediaFromHashedPlaintextHash(a,[].concat(Array.from(f.keys()))).then(function(g){var h=new Map(g.map(function(a){return[a.hashedPlaintextHash,a]})),i=new Map();b.forEach(function(a){var b=h.get(a.hashedPlaintextHash);if(a==null)return;var c=z(a==null?void 0:a.entry,a==null?void 0:a.objectId,a==null?void 0:a.fbId);if(b){var e=c?b.mediaEntries.set(a.msgId,c):b.mediaEntries;e=babelHelpers[\"extends\"]({},b,{mediaEntries:e,msgIds:d(\"WASortedLists\").addToSet(b.msgIds,a.msgId)});h.set(a.hashedPlaintextHash,e)}else I(i,a,c)});var j=new Map(),k=new Map();g=Array.from(i.values()).filter(function(a){return B(a,j,k)});return d(\"MAWDexieTable\").dexieAll([a.media.bulkAdd(g),a.media.bulkPut(Array.from(h.values()))]).then(function(){return C(a,[].concat(Array.from(f.keys())),f,c,e)})})}function B(a,b,c){if(a.objectId!=null){var d=b.get(a.objectId);if(d!=null&&d!==a.hashedPlaintextHash){s.ERROR(j(),a.objectId,d,a.hashedPlaintextHash);return!1}}if(a.fbid!=null){d=c.get(a.fbid);if(d!=null&&d!==a.hashedPlaintextHash){s.ERROR(i(),a.fbid,d,a.hashedPlaintextHash);return!1}}a.objectId!=null&&b.set(a.objectId,a.hashedPlaintextHash);a.fbid!=null&&c.set(a.fbid,a.hashedPlaintextHash);return!0}function C(a,b,c,e,f){return d(\"MAWDbMediaTxns\").maybeBulkGetMediaFromHashedPlaintextHash(a,b).then(function(b){return d(\"MAWDexieTable\").dexieAll([F(a,b,c),d(\"MAWMediaBackupTxns\").bulkLinkMediaBackup(a,G(b,c))]).then(function(){D(b,c,e,f);return b})})}function D(a,b,c,e){a.forEach(function(a){var f=b.get(a.hashedPlaintextHash);f!=null&&!E(f)&&d(\"MAWIndexedDb\").afterTransaction({tag:\"NewMedia\",value:d(\"MAWBridgeTypesCreators\").createBridgeMedia(c,e,a,!1)})})}function E(a){return a.reduce(function(a,b){return a||b.isXMAShare},!1)}function F(a,b,c){b=b.reduce(function(a,b){var d;(d=c.get(b.hashedPlaintextHash))==null?void 0:d.filter(function(a){return a!=null&&!a.isXMAShare}).forEach(function(c){return a.set(c.msgId,b.mediaId)});return a},new Map());return d(\"MAWDbMsgTxns\").bulkUpdateMediaId(a,b)}function G(a,b){var c=new Map();a.forEach(function(a){var d;d=(d=b.get(a.hashedPlaintextHash))!=null?d:[];d.forEach(function(b){c.has(b.objectId)?s.ERROR(h(),b.objectId):b.objectId!=null&&c.set(b.objectId,{fbid:b.fbId,mediaId:a.mediaId,msgId:b.msgId,objectId:b.objectId})})});return Array.from(c.values())}function H(a,b){var c;a=a?new Map([[b.msgId,a]]):new Map();return babelHelpers[\"extends\"]({fbid:(c=b.fbId)!=null?c:void 0,hashedPlaintextHash:b.hashedPlaintextHash,mediaEntries:a,mediaType:b.mediaType,msgIds:d(\"WASortedLists\").singleElement(b.msgId),objectId:(c=b.objectId)!=null?c:void 0,plaintextHash:b.plaintextHash,size:b.size,ts:d(\"WATimeUtils\").unixTime()},b.mediaInfo)}function I(a,b,c){var d=a.get(b.hashedPlaintextHash);d==null?a.set(b.hashedPlaintextHash,H(c,b)):(c!=null&&d.mediaEntries.set(b.msgId,c),d.msgIds.push(b.msgId))}g.prepareMediaWriteData=a;g.handleUnstoredDbMedia=b;g.linkMedia=u;g.createOrUpdateMediaRow=v;g.attachHashToMediaMsg=w;g.updateMediaEntryWithValidatedMediaInfo=x;g.updateMediaWithEncodedMediaEntryData=y;g.attachHashAndSaveMedia=e;g.updateBackupFbidInMediaEntries=f;g.bulkLinkMedia=A;g.linkMessageAndMediaBackupForMediaList=C}),98);\n__d(\"MAWConvertFutureproofMsgTxns\",[\"MAWBridgeMsg\",\"MAWBridgeTypesCreators\",\"MAWDbMsg\",\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWLoadReplyMediaTxns\",\"MAWMediaManagementTxns\",\"MAWMsgType\",\"MAWThreadEvent\",\"MAWThreadSnippetBuildTxns\",\"WAArrayZip\",\"WAJids\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b,c){return a.type===d(\"MAWMsgType\").MSG_TYPE.REVOKED?babelHelpers[\"extends\"]({},a,{altIndex:\"foobar\",msgId:b.msgId,rowId:b.rowId,sortOrderMs:b.sortOrderMs,thread:b.thread,threadJid:c,ts:b.ts}):babelHelpers[\"extends\"]({},a,{msgId:b.msgId,rowId:b.rowId,sortOrderMs:b.sortOrderMs,thread:b.thread,threadJid:c,ts:b.ts})}function a(a,b,e,f,g){var i=h(b,e,g.jid);return a.messages.put(i).then(function(){return d(\"MAWDbThreadTxns\").needsRetroactiveReadReceiptInThread(a,i)}).then(function(b){if(b){i.altIndex=d(\"MAWDbMsg\").craftToBeReadAltIndex(i.thread);return a.messages.put(i)}}).then(function(){return d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsgQuote(a,i)}).then(function(b){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(i,void 0,b)});d(\"MAWIndexedDb\").afterTransactionThreadEvent({chatJid:g.jid,msgId:i.msgId},d(\"MAWThreadEvent\").PLACEHOLDER_CONVERT_SUBSCRIPTION);b=i.msgId===g.newestMsg?d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,i,g).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:g.chatId,threadJid:g.jid})})}):d(\"MAWDexieTable\").dexieResolve();var e=f!=null?d(\"MAWMediaManagementTxns\").handleUnstoredDbMedia(a,f,i).then(function(a){if(d(\"WAJids\").isAuthorSystem(i.author))throw c(\"err\")(\"This cannot happen\");return{plaintextHash:a.plaintextHash,protocolMsgId:{author:i.author,chat:g.jid,externalId:i.externalId}}}):d(\"MAWDexieTable\").dexieResolve(null);return d(\"MAWDexieTable\").dexieAll([b,e]).then(function(a){a[0];a=a[1];return a})})}function b(a,b){var e=[];b.forEach(function(a){e.push(h(a.unstoredDbMsg,a.dbMsg,a.thread.jid))});var f=d(\"MAWDbThreadTxns\").bulkNeedsRetroactiveReadReceiptInThread(a,e).then(function(a){d(\"WAArrayZip\").zip(e,a).forEach(function(a){var b=a[0];a=a[1];a&&(b.altIndex=d(\"MAWDbMsg\").craftToBeReadAltIndex(b.thread))})});return f.then(function(){return a.messages.bulkPut(e).then(function(){var f=[];e.forEach(function(e){var g=d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsgQuote(a,e).then(function(f){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(e,void 0,f)});var g=(f=b.get(e.msgId))==null?void 0:f.thread;f=(f=b.get(e.msgId))==null?void 0:f.unstoredDbMedia;if(g==null)throw c(\"err\")(\"MAWConvertFutureproofMsgTxns: thread is null cannot happen\");d(\"MAWIndexedDb\").afterTransactionThreadEvent({chatJid:g.jid,msgId:e.msgId},d(\"MAWThreadEvent\").PLACEHOLDER_CONVERT_SUBSCRIPTION);var h=e.msgId===g.newestMsg?d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,e,g).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:g.chatId,threadJid:g.jid})})}):d(\"MAWDexieTable\").dexieResolve();f=f!=null?d(\"MAWMediaManagementTxns\").handleUnstoredDbMedia(a,f,e).then(function(a){if(d(\"WAJids\").isAuthorSystem(e.author))throw c(\"err\")(\"This cannot happen\");return{plaintextHash:a.plaintextHash,protocolMsgId:{author:e.author,chat:g.jid,externalId:e.externalId}}}):d(\"MAWDexieTable\").dexieResolve(null);return d(\"MAWDexieTable\").dexieAll([h,f]).then(function(a){a[0];a=a[1];return a})});f.push(g)});return d(\"MAWDexieTable\").dexieAll(f).then(function(a){return a.map(function(a){return a})})})})}g.convertFutureproofMsg=a;g.bulkConvertFutureproofMsgs=b}),98);\n__d(\"MAWUnsafeCoerce\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a}f.unsafeCoerce=a}),66);\n__d(\"MAWWriteEditTxns\",[\"FBLogger\",\"MAWAckLevel\",\"MAWBridgeMsg\",\"MAWBridgeTypesCreators\",\"MAWDbEditMsgHistoryTxns\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWEBSwitch\",\"MAWEBUploadTrackingUtils\",\"MAWIndexedDb\",\"MAWLoadReplyMediaTxns\",\"MAWThreadSnippetForTextMsg\",\"MAWUnsafeCoerce\",\"WAGlobals\",\"WAJids\",\"WAMsgType\",\"WAResultOrError\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){var e=b.args,f=b.externalId,g=e.editMsgContent;e=e.originalProtocolMsgId;var i=e.chat,j=e.externalId;return d(\"MAWDexieTable\").dexieAll([a.threads.get({jid:i}),d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,e),a.messages.where(\"quoteExternalId\").equals(j).toArray(),a.editMsgHistory.where(\"originalMsgExternalId\").equals(j).toArray()]).then(function(e){var k=e[0],l=e[1],m=e[2];e=e[3];if(k==null)return d(\"WAResultOrError\").makeError(\"missing_thread\");if(l==null)return d(\"WAResultOrError\").makeError(\"missing_msg\");if(l.type!==d(\"WAMsgType\").MSG_TYPE.TEXT)throw c(\"err\")(\"Msg other than text cannot be edited.\");var n=e.find(function(a){return a.author===d(\"WAJids\").AUTHOR_ME&&a.threadJid===i&&a.editExternalId===f});if((n==null?void 0:n.sendStatus)!=null&&n.sendStatus>d(\"MAWAckLevel\").ACK.clock)return d(\"WAResultOrError\").makeError(\"already_sent\");n=[];n.push(h(b,i,j));e=e.find(function(a){return a.author===d(\"WAJids\").AUTHOR_ME&&a.threadJid===i&&a.editExternalId===j});e==null&&(l.editCount==null||l.editCount===0)&&n.push(h(l,i,j));return d(\"MAWDbEditMsgHistoryTxns\").bulkAddEditMsgHistory(a,n,!1).then(function(){if(c(\"MAWEBSwitch\").isEnabled()&&!d(\"WAGlobals\").getConfig().useEbUploadQueue()){var b=d(\"MAWEBUploadTrackingUtils\").genInstanceKeyForMiddleware(f);b!=null&&d(\"MAWEBUploadTrackingUtils\").startUploadTracking(f,d(\"WAMsgType\").MSG_TYPE.EDIT_ACTION,\"send\",b)}var e=babelHelpers[\"extends\"]({},l,{ack:d(\"MAWAckLevel\").ACK.clock,editCount:((b=l.editCount)!=null?b:0)+1,msgContent:g});if(k.newestMsg!=null&&k.newestMsg===e.msgId){b=d(\"WAJids\").userIdFromJid(d(\"WAGlobals\").getMyUserJid());var h=c(\"MAWThreadSnippetForTextMsg\")(e,b,d(\"WAJids\").interpretAsGroupJid(k.jid)!=null),n=h.snippetParams;h=h.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:n,snippetSenderContactId:b,snippetType:h,threadId:k.chatId,threadJid:k.jid})})}var o=[],p=d(\"WAGlobals\").getMyUserJid();n=m.find(function(a){var b;return(((b=a.quote)==null?void 0:b.content.author)===d(\"WAJids\").AUTHOR_ME||((b=a.quote)==null?void 0:b.content.author)===p)&&a.threadJid===i});if(n!=null){b=n.quote;h=n.quoteExternalId;if(b==null)c(\"FBLogger\")(\"messenger_e2ee_web\").warn(\"[edit message] Failed to get the quoted content for a msg that has been quoted.\",h);else{h=babelHelpers[\"extends\"]({},n,{quote:babelHelpers[\"extends\"]({},b,{content:babelHelpers[\"extends\"]({},b.content,{msgContent:babelHelpers[\"extends\"]({},e.msgContent)})})});o.push(h)}}return a.messages.bulkPut([e].concat(o)).then(function(){return d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsgQuote(a,l)}).then(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(e,void 0,a)})}).then(function(){o.forEach(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(a)})});return d(\"WAResultOrError\").makeResult({originalMsgExternalId:j,originalMsgId:l.msgId,protocolMsgId:{author:d(\"WAJids\").AUTHOR_ME,chat:i,externalId:f}})})})})}function h(a,b,c){var e;return{author:d(\"WAJids\").AUTHOR_ME,editExternalId:a.externalId,editTs:(e=a.serverTs)!=null?e:a.ts,msgContent:(e=(e=a.args)==null?void 0:e.editMsgContent)!=null?e:d(\"MAWUnsafeCoerce\").unsafeCoerce(a.msgContent),originalMsgExternalId:c,sendStatus:d(\"MAWAckLevel\").ACK.clock,specialTextSize:a.specialTextSize,threadJid:b}}g.writeEdit=a}),98);\n__d(\"MAWWriteReactionTxns\",[\"MAWAuthor\",\"MAWDbMsg\",\"MAWDbReaction\",\"MAWDbReactionUtils\",\"MAWDbReactionsTxns\",\"MAWDexieTable\",\"WAJids\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,e){var f=b.author,g=b.externalId,h=b.groupingKey,i=b.reaction,j=b.reactToAuthor,k=b.reactToExternalId,l=b.ts;return d(\"MAWDexieTable\").dexieAll([a.messages.where(\"externalId\").equals(k).toArray(),a.reactions.where(\"reactToExternalId\").equals(k).toArray(),d(\"MAWDbReactionsTxns\").getNextReactionIdNumberForThread(a,e)]).then(function(b){var m=b[0],n=b[1];b=b[2];n=d(\"MAWDbReaction\").findMatchingReaction(n,e.jid,f);var o=d(\"MAWAuthor\").getAuthorUserJid(j);m=m.find(function(a){return a.thread===e.chatId&&o===d(\"MAWAuthor\").getAuthorUserJid(a.author)});var p=d(\"MAWDbReaction\").formatReactionForDb(e.jid,g,d(\"MAWDbMsg\").craftReactionId(e.chatId,b),k,i,h,j,m==null?void 0:m.msgId,l,(b=f)!=null?b:d(\"WAJids\").AUTHOR_ME,n==null?void 0:n.rowId);m=n!=null?a.receipts.where(\"waMsgId\").equals(d(\"MAWDbMsg\").getWAMsgId(n))[\"delete\"]():d(\"MAWDexieTable\").dexieResolve();return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbReactionsTxns\").putReaction(a,p),m]).then(function(a){a=a[0];a=babelHelpers[\"extends\"]({},p,{rowId:a});var b=e.chatId;c(\"qex\")._(\"1215\")!==!0&&d(\"MAWDbReactionUtils\").dispatchReaction(a,b);return a})})}g.writeReaction=a}),98);\n__d(\"WAConsumerApplication.pb\",[\"WACommon.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){var h;a={SMALL:1,MEDIUM:2,LARGE:3};b={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5};c={NONE:0,VIDEO:1};e={};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={};e.internalSpec={payload:[1,(h=d(\"WAProtoConst\")).TYPES.MESSAGE,f],metadata:[2,h.TYPES.MESSAGE,j]};f.internalSpec={content:[1,h.TYPES.MESSAGE,m],applicationData:[2,h.TYPES.MESSAGE,l],signal:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,i],__oneofs__:{payload:[\"content\",\"applicationData\",\"signal\",\"subProtocol\"]}};i.internalSpec={futureProof:[1,h.TYPES.ENUM,(d=d(\"WACommon.pb\")).FUTURE_PROOF_BEHAVIOR]};j.internalSpec={specialTextSize:[1,h.TYPES.ENUM,a]};k.internalSpec={};l.internalSpec={revoke:[1,h.TYPES.MESSAGE,v],__oneofs__:{applicationContent:[\"revoke\"]}};m.internalSpec={messageText:[1,h.TYPES.MESSAGE,d.MessageTextSpec],imageMessage:[2,h.TYPES.MESSAGE,I],contactMessage:[3,h.TYPES.MESSAGE,A],locationMessage:[4,h.TYPES.MESSAGE,D],extendedTextMessage:[5,h.TYPES.MESSAGE,C],statusTextMessage:[6,h.TYPES.MESSAGE,B],documentMessage:[7,h.TYPES.MESSAGE,F],audioMessage:[8,h.TYPES.MESSAGE,H],videoMessage:[9,h.TYPES.MESSAGE,G],contactsArrayMessage:[10,h.TYPES.MESSAGE,z],liveLocationMessage:[11,h.TYPES.MESSAGE,y],stickerMessage:[12,h.TYPES.MESSAGE,E],groupInviteMessage:[13,h.TYPES.MESSAGE,x],viewOnceMessage:[14,h.TYPES.MESSAGE,w],reactionMessage:[16,h.TYPES.MESSAGE,u],pollCreationMessage:[17,h.TYPES.MESSAGE,s],pollUpdateMessage:[18,h.TYPES.MESSAGE,r],editMessage:[19,h.TYPES.MESSAGE,n],__oneofs__:{content:[\"messageText\",\"imageMessage\",\"contactMessage\",\"locationMessage\",\"extendedTextMessage\",\"statusTextMessage\",\"documentMessage\",\"audioMessage\",\"videoMessage\",\"contactsArrayMessage\",\"liveLocationMessage\",\"stickerMessage\",\"groupInviteMessage\",\"viewOnceMessage\",\"reactionMessage\",\"pollCreationMessage\",\"pollUpdateMessage\",\"editMessage\"]}};n.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],message:[2,h.TYPES.MESSAGE,d.MessageTextSpec],timestampMs:[3,h.TYPES.INT64]};o.internalSpec={pollOption:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t]};p.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES],senderTimestampMs:[2,h.TYPES.INT64]};q.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};r.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,d.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,q],addOption:[3,h.TYPES.MESSAGE,q]};s.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t],selectableOptionsCount:[4,h.TYPES.UINT32]};t.internalSpec={optionName:[1,h.TYPES.STRING]};u.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64],reactionMetadataDataclassData:[5,h.TYPES.STRING],style:[6,h.TYPES.INT32]};v.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec]};w.internalSpec={imageMessage:[1,h.TYPES.MESSAGE,I],videoMessage:[2,h.TYPES.MESSAGE,G],__oneofs__:{viewOnceContent:[\"imageMessage\",\"videoMessage\"]}};x.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.MESSAGE,d.MessageTextSpec]};y.internalSpec={location:[1,h.TYPES.MESSAGE,L],accuracyInMeters:[2,h.TYPES.UINT32],speedInMps:[3,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,h.TYPES.UINT32],caption:[5,h.TYPES.MESSAGE,d.MessageTextSpec],sequenceNumber:[6,h.TYPES.INT64],timeOffset:[7,h.TYPES.UINT32]};z.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A]};A.internalSpec={contact:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};B.internalSpec={text:[1,h.TYPES.MESSAGE,C],textArgb:[6,h.TYPES.FIXED32],backgroundArgb:[7,h.TYPES.FIXED32],font:[8,h.TYPES.ENUM,b]};C.internalSpec={text:[1,h.TYPES.MESSAGE,d.MessageTextSpec],matchedText:[2,h.TYPES.STRING],canonicalUrl:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],title:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],previewType:[7,h.TYPES.ENUM,c]};D.internalSpec={location:[1,h.TYPES.MESSAGE,L],address:[2,h.TYPES.STRING]};E.internalSpec={sticker:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};F.internalSpec={document:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],fileName:[2,h.TYPES.STRING]};G.internalSpec={video:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};H.internalSpec={audio:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],ptt:[2,h.TYPES.BOOL]};I.internalSpec={image:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};J.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,K],location:[2,h.TYPES.MESSAGE,L],__oneofs__:{action:[\"location\"]}};K.internalSpec={x:[1,h.TYPES.DOUBLE],y:[2,h.TYPES.DOUBLE]};L.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};M.internalSpec={protocol:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};g.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=a;g.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=b;g.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=c;g.ConsumerApplicationSpec=e;g.ConsumerApplication$PayloadSpec=f;g.ConsumerApplication$SubProtocolPayloadSpec=i;g.ConsumerApplication$MetadataSpec=j;g.ConsumerApplication$SignalSpec=k;g.ConsumerApplication$ApplicationDataSpec=l;g.ConsumerApplication$ContentSpec=m;g.ConsumerApplication$EditMessageSpec=n;g.ConsumerApplication$PollAddOptionMessageSpec=o;g.ConsumerApplication$PollVoteMessageSpec=p;g.ConsumerApplication$PollEncValueSpec=q;g.ConsumerApplication$PollUpdateMessageSpec=r;g.ConsumerApplication$PollCreationMessageSpec=s;g.ConsumerApplication$OptionSpec=t;g.ConsumerApplication$ReactionMessageSpec=u;g.ConsumerApplication$RevokeMessageSpec=v;g.ConsumerApplication$ViewOnceMessageSpec=w;g.ConsumerApplication$GroupInviteMessageSpec=x;g.ConsumerApplication$LiveLocationMessageSpec=y;g.ConsumerApplication$ContactsArrayMessageSpec=z;g.ConsumerApplication$ContactMessageSpec=A;g.ConsumerApplication$StatusTextMesageSpec=B;g.ConsumerApplication$ExtendedTextMessageSpec=C;g.ConsumerApplication$LocationMessageSpec=D;g.ConsumerApplication$StickerMessageSpec=E;g.ConsumerApplication$DocumentMessageSpec=F;g.ConsumerApplication$VideoMessageSpec=G;g.ConsumerApplication$AudioMessageSpec=H;g.ConsumerApplication$ImageMessageSpec=I;g.ConsumerApplication$InteractiveAnnotationSpec=J;g.ConsumerApplication$PointSpec=K;g.ConsumerApplication$LocationSpec=L;g.ConsumerApplication$MediaPayloadSpec=M}),98);\n__d(\"WAMediaTransport.pb\",[\"WACommon.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){var h;a={NONE:0,LQ_4K:1,HQ_4K:2};b={NONE:0,GIPHY:1,TENOR:2};c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4};e={};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={};e.internalSpec={integral:[1,(h=d(\"WAProtoConst\")).TYPES.MESSAGE,k],ancillary:[2,h.TYPES.MESSAGE,f]};f.internalSpec={fileLength:[1,h.TYPES.UINT64],mimetype:[2,h.TYPES.STRING],thumbnail:[3,h.TYPES.MESSAGE,i],objectId:[4,h.TYPES.STRING]};i.internalSpec={jpegThumbnail:[1,h.TYPES.BYTES],downloadableThumbnail:[2,h.TYPES.MESSAGE,j],thumbnailWidth:[3,h.TYPES.UINT32],thumbnailHeight:[4,h.TYPES.UINT32]};j.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING]};k.internalSpec={fileSha256:[1,h.TYPES.BYTES],mediaKey:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],directPath:[4,h.TYPES.STRING],mediaKeyTimestamp:[5,h.TYPES.INT64]};l.internalSpec={integral:[1,h.TYPES.MESSAGE,n],ancillary:[2,h.TYPES.MESSAGE,m]};m.internalSpec={height:[1,h.TYPES.UINT32],width:[2,h.TYPES.UINT32],scansSidecar:[3,h.TYPES.BYTES],scanLengths:[4,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[5,h.TYPES.BYTES],hdType:[6,h.TYPES.ENUM,a]};n.internalSpec={transport:[1,h.TYPES.MESSAGE,e]};o.internalSpec={integral:[1,h.TYPES.MESSAGE,q],ancillary:[2,h.TYPES.MESSAGE,p]};p.internalSpec={seconds:[1,h.TYPES.UINT32],caption:[2,h.TYPES.MESSAGE,d(\"WACommon.pb\").MessageTextSpec],gifPlayback:[3,h.TYPES.BOOL],height:[4,h.TYPES.UINT32],width:[5,h.TYPES.UINT32],sidecar:[6,h.TYPES.BYTES],gifAttribution:[7,h.TYPES.ENUM,b]};q.internalSpec={transport:[1,h.TYPES.MESSAGE,e]};r.internalSpec={integral:[1,h.TYPES.MESSAGE,v],ancillary:[2,h.TYPES.MESSAGE,s]};s.internalSpec={seconds:[1,h.TYPES.UINT32],avatarAudio:[2,h.TYPES.MESSAGE,t]};t.internalSpec={poseId:[1,h.TYPES.UINT32],avatarAnimations:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,u]};u.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],animationsType:[7,h.TYPES.ENUM,c]};v.internalSpec={transport:[1,h.TYPES.MESSAGE,e]};w.internalSpec={integral:[1,h.TYPES.MESSAGE,y],ancillary:[2,h.TYPES.MESSAGE,x]};x.internalSpec={pageCount:[1,h.TYPES.UINT32]};y.internalSpec={transport:[1,h.TYPES.MESSAGE,e]};z.internalSpec={integral:[1,h.TYPES.MESSAGE,B],ancillary:[2,h.TYPES.MESSAGE,A]};A.internalSpec={pageCount:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],width:[3,h.TYPES.UINT32],firstFrameLength:[4,h.TYPES.UINT32],firstFrameSidecar:[5,h.TYPES.BYTES],mustacheText:[6,h.TYPES.STRING],isThirdParty:[7,h.TYPES.BOOL],receiverFetchId:[8,h.TYPES.STRING]};B.internalSpec={transport:[1,h.TYPES.MESSAGE,e],isAnimated:[2,h.TYPES.BOOL],receiverFetchId:[3,h.TYPES.STRING]};C.internalSpec={integral:[1,h.TYPES.MESSAGE,E],ancillary:[2,h.TYPES.MESSAGE,D]};D.internalSpec={displayName:[1,h.TYPES.STRING]};E.internalSpec={vcard:[1,h.TYPES.STRING],downloadableVcard:[2,h.TYPES.MESSAGE,e],__oneofs__:{contact:[\"vcard\",\"downloadableVcard\"]}};g.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=a;g.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=b;g.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c;g.WAMediaTransportSpec=e;g.WAMediaTransport$AncillarySpec=f;g.WAMediaTransport$Ancillary$ThumbnailSpec=i;g.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=j;g.WAMediaTransport$IntegralSpec=k;g.ImageTransportSpec=l;g.ImageTransport$AncillarySpec=m;g.ImageTransport$IntegralSpec=n;g.VideoTransportSpec=o;g.VideoTransport$AncillarySpec=p;g.VideoTransport$IntegralSpec=q;g.AudioTransportSpec=r;g.AudioTransport$AncillarySpec=s;g.AudioTransport$Ancillary$AvatarAudioSpec=t;g.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=u;g.AudioTransport$IntegralSpec=v;g.DocumentTransportSpec=w;g.DocumentTransport$AncillarySpec=x;g.DocumentTransport$IntegralSpec=y;g.StickerTransportSpec=z;g.StickerTransport$AncillarySpec=A;g.StickerTransport$IntegralSpec=B;g.ContactTransportSpec=C;g.ContactTransport$AncillarySpec=D;g.ContactTransport$IntegralSpec=E}),98);\n__d(\"validateMAWMediaAndComposeEntryForProtoMsg\",[\"WAMediaUtils\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){if(b==null)throw c(\"err\")(\"DbMedia is null in validateMediaAndComposeEntryForProtoMsg\");if(!b.msgIds.includes(a))throw c(\"err\")(\"the media (\"+b.mediaId+\") is not linked to the msg (\"+a+\")\");a=b.mediaEntries.get(a);if(a==null)throw c(\"err\")(\"media entry not found in validateMediaAndComposeEntryForProtoMsg\");var e=b.plaintextHash,f=d(\"WAMediaUtils\").mediaEntryDataToRawData(e,a);e=[\"fileSha256\",\"mediaKey\",\"fileEncSha256\",\"directPath\",\"mediaKeyTimestamp\"];a=e.filter(function(a){return f[a]==null});if(a.length>0)throw c(\"err\")(\"missing fields in mediaEntryData: \"+a.toString());return[b,f]}g[\"default\"]=a}),98);\n__d(\"encodeMAWDocumentFileMessage\",[\"WAMediaTransport.pb\",\"encodeProtobuf\",\"validateMAWMediaAndComposeEntryForProtoMsg\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"application\/pdf\";function a(a,b){return i(a.msgId,b)}function i(a,b){a=c(\"validateMAWMediaAndComposeEntryForProtoMsg\")(a,b);b=a[0];a=a[1];return j(b,a)}function j(a,b){b={ancillary:{},integral:{transport:{ancillary:{fileLength:a.size,mimetype:h,objectId:b.objectId,thumbnail:{jpegThumbnail:new ArrayBuffer(1),thumbnailHeight:1,thumbnailWidth:1}},integral:{directPath:b.directPath,fileEncSha256:b.fileEncSha256,fileSha256:b.fileSha256,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp}}}};b=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaTransport.pb\").DocumentTransportSpec,b);return{payload:{content:{documentMessage:{document:{payload:b.readBuffer(),version:1},fileName:(b=a.validatedDocumentFileInfo)==null?void 0:b.filename}}}}}g[\"default\"]=a}),98);\n__d(\"MAWAsConsumerApplication\",[\"I64\",\"LSIntEnum\",\"MAWDbMedia\",\"MAWGlobals\",\"MAWJids\",\"MAWMsgType\",\"MAWVault\",\"WAAssertUnreachable\",\"WAConsumerApplication.pb\",\"WAJids\",\"WAMediaTransport.pb\",\"encodeMAWDocumentFileMessage\",\"encodeProtobuf\",\"err\",\"validateMAWMediaAndComposeEntryForProtoMsg\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=\"image\/jpeg\",k=\"video\/mp4\",l=\"audio\/wav\",m=\"image\/gif\",n=\"image\/webp\",o=\"application\/pdf\",p=new ArrayBuffer(0);function a(a,b,e){switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.TEXT:return r(a);case d(\"MAWMsgType\").MSG_TYPE.IMAGE:return s(a,b);case d(\"MAWMsgType\").MSG_TYPE.VIDEO:return z(a,b);case d(\"MAWMsgType\").MSG_TYPE.PTT:return C(a,b);case d(\"MAWMsgType\").MSG_TYPE.REVOKED:return F(a);case d(\"MAWMsgType\").MSG_TYPE.GIF:return z(a,b);case d(\"MAWMsgType\").MSG_TYPE.STICKER:return w(a,b);case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:return c(\"encodeMAWDocumentFileMessage\")(a,b);case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d(\"MAWMsgType\").MSG_TYPE.SK_DISTRIBUTION:return null;case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:throw c(\"err\")(\"Implemented ephemeral setting message in MAWAsConsumerApplication\");case d(\"MAWMsgType\").MSG_TYPE.XMA:throw c(\"err\")(\"XMA content message is not consumer application. It should be addressed as ArmadilloApplication\");case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:case d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME:throw c(\"err\")(\"We do not support converting to protoMsg with \"+a.type+\" type\",\"mpf_web_foundations\");case d(\"MAWMsgType\").MSG_TYPE.RAVEN:case d(\"MAWMsgType\").MSG_TYPE.RAVEN_ACTION:throw c(\"err\")(\"Raven content message is not consumer application. It should be addressed as ArmadilloApplication\");case d(\"MAWMsgType\").MSG_TYPE.EDIT_ACTION:throw c(\"err\")(\"We do not support editing messages right now since the sending flow is not implemented yet. \");case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:return G(a,e);case d(\"MAWMsgType\").MSG_TYPE.BUMP_EXISTING_MESSAGE:throw c(\"err\")(\"Sending bump messages is not supported yet.\");default:return c(\"WAAssertUnreachable\")(a.type)}}function b(a,b){if(b==null)return q(a);else switch(b.mediaType){case d(\"MAWDbMedia\").MEDIA_TYPE.IMAGE:return t(a.msgId,b);case d(\"MAWDbMedia\").MEDIA_TYPE.VIDEO:return A(a.msgId,b);case d(\"MAWDbMedia\").MEDIA_TYPE.PTT:return D(a.msgId,b);case d(\"MAWDbMedia\").MEDIA_TYPE.GIF:return A(a.msgId,b);case d(\"MAWDbMedia\").MEDIA_TYPE.STICKER:return x(a.msgId,b);default:return null}}function q(a){var b=null;if(a.type===d(\"MAWMsgType\").MSG_TYPE.REVOKED&&a.msgContent!=null&&a.msgContent.content!=null)b=a.msgContent.content;else if(a.type===d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME&&a.msgContent!=null)b=a.msgContent;else return null;return{payload:{content:{messageText:{mentionedJid:[],text:d(\"MAWVault\").unvault(b)}}}}}function r(a){var b={payload:{content:{messageText:{mentionedJid:a.msgContent.mentionedJids,text:d(\"MAWVault\").unvault(a.msgContent.content)}}}};if(a.specialTextSize!=null){a=a.specialTextSize===1?d(\"WAConsumerApplication.pb\").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.SMALL:a.specialTextSize===2?d(\"WAConsumerApplication.pb\").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.MEDIUM:d(\"WAConsumerApplication.pb\").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.LARGE;b.metadata={specialTextSize:a}}return b}function s(a,b){return t(a.msgId,b)}function t(a,b){a=c(\"validateMAWMediaAndComposeEntryForProtoMsg\")(a,b);b=a[0];a=a[1];return v(b,a)}function u(a,b){var c;a={ancillary:{height:(c=a.validatedImageInfo)==null?void 0:c.height,scanLengths:((c=b.progressiveJpegDetails)==null?void 0:c.scanLengths)||[],scansSidecar:(c=b.progressiveJpegDetails)==null?void 0:c.sidecar,width:(c=a.validatedImageInfo)==null?void 0:c.width},integral:{transport:{ancillary:{fileLength:a.size,mimetype:j,objectId:b.objectId,thumbnail:{downloadableThumbnail:b.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:(c=a.validatedImageInfo)==null?void 0:c.jpegThumbnailHeight,thumbnailWidth:(c=a.validatedImageInfo)==null?void 0:c.jpegThumbnailWidth}},integral:{directPath:b.directPath,fileEncSha256:b.fileEncSha256,fileSha256:b.fileSha256,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp}}}};return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaTransport.pb\").ImageTransportSpec,a).readBuffer()}function v(a,b){a=u(a,b);return{payload:{content:{imageMessage:{caption:{mentionedJid:[]},image:{payload:a,version:1}}}}}}function e(a){return{payload:{content:{editMessage:{key:{fromMe:!0,id:a.originalMsgExternalId,remoteJid:a.threadJid},message:{mentionedJid:a.msgContent.mentionedJids,text:d(\"MAWVault\").unvault(a.msgContent.content)},timestampMs:a.editTs}}}}}function w(a,b){return x(a.msgId,b)}function x(a,b){a=c(\"validateMAWMediaAndComposeEntryForProtoMsg\")(a,b);b=a[0];a=a[1];return y(b,a)}function y(a,b){var c;a={ancillary:{height:(c=a.validatedImageInfo)==null?void 0:c.height,width:(c=a.validatedImageInfo)==null?void 0:c.width},integral:{transport:{ancillary:{fileLength:a.size,mimetype:n,objectId:b.objectId,thumbnail:{thumbnailHeight:(c=a.validatedImageInfo)==null?void 0:c.jpegThumbnailHeight,thumbnailWidth:(c=a.validatedImageInfo)==null?void 0:c.jpegThumbnailWidth}},integral:{directPath:b.directPath,fileEncSha256:b.fileEncSha256,fileSha256:b.fileSha256,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp}}}};c=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaTransport.pb\").StickerTransportSpec,a);return{payload:{content:{stickerMessage:{sticker:{payload:c.readBuffer(),version:1}}}}}}function z(a,b){return A(a.msgId,b)}function A(a,b){a=c(\"validateMAWMediaAndComposeEntryForProtoMsg\")(a,b);b=a[0];a=a[1];return B(b,a)}function B(a,b){var c,e=a.mediaType===d(\"MAWDbMedia\").MEDIA_TYPE.GIF,f=e?a.validatedImageInfo:a.validatedVideoInfo;c={ancillary:{gifPlayback:e,height:f==null?void 0:f.height,seconds:e?void 0:(c=a.validatedVideoInfo)==null?void 0:c.duration,sidecar:b.sidecar,width:f==null?void 0:f.width},integral:{transport:{ancillary:{fileLength:a.size,mimetype:e?m:k,objectId:b.objectId,thumbnail:e?{thumbnailHeight:f==null?void 0:f.jpegThumbnailHeight,thumbnailWidth:f==null?void 0:f.jpegThumbnailWidth}:{downloadableThumbnail:b.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:f==null?void 0:f.jpegThumbnailHeight,thumbnailWidth:f==null?void 0:f.jpegThumbnailWidth}},integral:{directPath:b.directPath,fileEncSha256:b.fileEncSha256,fileSha256:b.fileSha256,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp}}}};a=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaTransport.pb\").VideoTransportSpec,c);return{payload:{content:{videoMessage:{caption:{mentionedJid:[]},video:{payload:a.readBuffer(),version:1}}}}}}function C(a,b){return D(a.msgId,b)}function D(a,b){a=c(\"validateMAWMediaAndComposeEntryForProtoMsg\")(a,b);b=a[0];a=a[1];return E(b,a)}function E(a,b){var c;c={ancillary:{seconds:(c=a.validatedAudioInfo)==null?void 0:c.duration},integral:{transport:{ancillary:{fileLength:a.size,mimetype:l,objectId:b.objectId,thumbnail:{jpegThumbnail:p}},integral:{directPath:b.directPath,fileEncSha256:b.fileEncSha256,fileSha256:b.fileSha256,mediaKey:b.mediaKey,mediaKeyTimestamp:b.mediaKeyTimestamp}}}};a=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMediaTransport.pb\").AudioTransportSpec,c);return{payload:{content:{audioMessage:{audio:{payload:a.readBuffer(),version:1},ptt:!0}}}}}function F(a){return{payload:{applicationData:{revoke:{key:{fromMe:!0,id:a.revokedExternalId}}}}}}function f(a){var b=d(\"WAJids\").isAuthorMe(a.reactToAuthor)||d(\"MAWGlobals\").getMyUserJid()===a.reactToAuthor,c=d(\"WAJids\").interpretAsGroupJid(a.threadJid)!=null;c={groupingKey:a.groupingKey==null?void 0:a.groupingKey,key:{fromMe:b,id:a.reactToExternalId,participant:c&&!b?a.reactToAuthor:void 0,remoteJid:a.threadJid},senderTimestampMs:a.ts*1e3,text:a.reaction==null?void 0:a.reaction};return{payload:{content:{reactionMessage:c}}}}function G(a,b){if(a.threadJid==null)throw c(\"err\")(\"msg threadJid is null in encodeGroupInviteMessage\");if(b==null)throw c(\"err\")(\"DbGroupInvite is null in encodeGroupInviteMessage\");var e=d(\"WAJids\").interpretAsGroupJid(a.threadJid);if(e==null)throw c(\"err\")(\"groupJid is null in encodeGroupInviteMessage\");return{payload:{content:{groupInviteMessage:{groupJid:e,groupName:a.groupName,inviteCode:b.inviteCode,inviteExpiration:b.inviteExpirationTs}}}}}function H(a){return(h||(h=d(\"I64\"))).equal(a.displayedContentTypes,(i||(i=d(\"LSIntEnum\"))).ofNumber(1))||(h||(h=d(\"I64\"))).equal(a.displayedContentTypes,(i||(i=d(\"LSIntEnum\"))).ofNumber(256))||a.textHasLinks||a.isUnsent?I(a):null}function I(a){var b;b=(b=a.mentionIds)==null?void 0:(b=b.split(\",\"))==null?void 0:b.map(d(\"MAWJids\").toUserJid);return{payload:{content:{messageText:{mentionedJid:(b=b)!=null?b:[],text:a.text}}}}}g.IMAGE_MIME_TYPE=j;g.VIDEO_MIME_TYPE=k;g.AUDIO_MIME_TYPE=l;g.GIF_MIME_TYPE=m;g.STICKER_MIME_TYPE=n;g.FILE_MIME_TYPE=o;g.emptyAudioFileArrayBuffer=p;g.asConsumerApplication=a;g.deletedMsgAsConsumerApplicationForSpamReporting=b;g.encodeValidatedMediaToImageTransport=u;g.encodeEditMessage=e;g.encodeReactionMessage=f;g.asConsumerApplicationLSDb=H}),98);\n__d(\"WAMsgApplication.pb\",[\"WACommon.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){var h;a={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2};b={};c={};e={};f={};var i={},j={},k={},l={},m={},n={};b.internalSpec={payload:[1,(h=d(\"WAProtoConst\")).TYPES.MESSAGE,i],metadata:[2,h.TYPES.MESSAGE,c]};c.internalSpec={chatEphemeralSetting:[1,h.TYPES.MESSAGE,n],ephemeralSettingList:[2,h.TYPES.MESSAGE,f],ephemeralSharedSecret:[3,h.TYPES.BYTES],forwardingScore:[5,h.TYPES.UINT32],isForwarded:[6,h.TYPES.BOOL],businessMetadata:[7,h.TYPES.MESSAGE,(d=d(\"WACommon.pb\")).SubProtocolSpec],frankingKey:[8,h.TYPES.BYTES],frankingVersion:[9,h.TYPES.INT32],quotedMessage:[10,h.TYPES.MESSAGE,e],threadType:[11,h.TYPES.ENUM,a],readonlyMetadataDataclass:[12,h.TYPES.STRING],groupId:[13,h.TYPES.STRING],groupSize:[14,h.TYPES.UINT32],groupIndex:[15,h.TYPES.UINT32],botResponseId:[16,h.TYPES.STRING],collapsibleId:[17,h.TYPES.STRING],__oneofs__:{ephemeral:[\"chatEphemeralSetting\",\"ephemeralSettingList\",\"ephemeralSharedSecret\"]}};e.internalSpec={stanzaId:[1,h.TYPES.STRING],remoteJid:[2,h.TYPES.STRING],participant:[3,h.TYPES.STRING],payload:[4,h.TYPES.MESSAGE,i]};f.internalSpec={chatJid:[1,h.TYPES.STRING],ephemeralSetting:[2,h.TYPES.MESSAGE,n]};i.internalSpec={coreContent:[1,h.TYPES.MESSAGE,m],signal:[2,h.TYPES.MESSAGE,l],applicationData:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,j],__oneofs__:{content:[\"coreContent\",\"signal\",\"applicationData\",\"subProtocol\"]}};j.internalSpec={futureProof:[1,h.TYPES.ENUM,d.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,h.TYPES.MESSAGE,d.SubProtocolSpec],businessMessage:[3,h.TYPES.MESSAGE,d.SubProtocolSpec],paymentMessage:[4,h.TYPES.MESSAGE,d.SubProtocolSpec],multiDevice:[5,h.TYPES.MESSAGE,d.SubProtocolSpec],voip:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],armadillo:[7,h.TYPES.MESSAGE,d.SubProtocolSpec],__oneofs__:{subProtocol:[\"consumerMessage\",\"businessMessage\",\"paymentMessage\",\"multiDevice\",\"voip\",\"armadillo\"]}};k.internalSpec={};l.internalSpec={};m.internalSpec={};n.internalSpec={ephemeralExpiration:[2,h.TYPES.UINT32],ephemeralSettingTimestamp:[3,h.TYPES.INT64],isEphemeralSettingReset:[4,h.TYPES.BOOL]};g.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=a;g.MessageApplicationSpec=b;g.MessageApplication$MetadataSpec=c;g.MessageApplication$Metadata$QuotedMessageSpec=e;g.MessageApplication$Metadata$EphemeralSettingMapSpec=f;g.MessageApplication$PayloadSpec=i;g.MessageApplication$SubProtocolPayloadSpec=j;g.MessageApplication$ApplicationDataSpec=k;g.MessageApplication$SignalSpec=l;g.MessageApplication$ContentSpec=m;g.MessageApplication$EphemeralSettingSpec=n}),98);\n__d(\"WAMapContentTypeToFbType\",[\"WAAssertUnreachable\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){switch(a){case\"text\":return\"text\";case\"media\":return\"media\";case\"reaction\":return\"reaction\";case\"live_location\":case\"pay\":case\"product_list\":case\"poll_creation\":case\"poll_vote\":case\"scheduled_call\":return\"text\";default:a;throw c(\"WAAssertUnreachable\")(a)}}g.mapContentTypeToFbType=a}),98);\n__d(\"WAPersistedQueueCache\",[\"WAResolvable\",\"WAShiftTimer\",\"WATagsLogger\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error during flush: \",\"\"]);h=function(){return a};return a}function a(a,c,e){var f=d(\"WATagsLogger\").TAGS([\"PersistedQueue\",a,\"cache\"]),g=[],i=new(d(\"WAResolvable\").Resolvable)(),j=(a=e)!=null?a:{},k=new(d(\"WAShiftTimer\").ShiftTimer)(function(){void n()});function l(){j.cacheSize!=null&&g.length>=j.cacheSize&&void n()}function m(){if(j.maxDelay!=null){var a=j.maxDelay;k.cancel();k.onOrAfter(a)}}function n(){var a,e;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:if(!(g.length===0)){j.next=2;break}return j.abrupt(\"return\");case 2:k.cancel();a=g;g=[];e=i;i=new(d(\"WAResolvable\").Resolvable)();j.prev=7;j.next=10;return b(\"regeneratorRuntime\").awrap(c(a));case 10:e.resolve();j.next=17;break;case 13:j.prev=13,j.t0=j[\"catch\"](7),f.ERROR(h(),j.t0),e.reject(j.t0);case 17:case\"end\":return j.stop()}},null,this,[[7,13]])}return{flush:function(){return n()},write:function(a){g.push(a);a=i;l();m();return a.promise},config:function(a){j=a}}}g.makePersistedQueueCache=a}),98);\n__d(\"WAPubSub\",[],(function(a,b,c,d,e,f){\"use strict\";var g=function(){function a(){this.$1=new Set()}var b=a.prototype;b.publish=function(a){this.$1.forEach(function(b){return b(a)})};b.subscribe=function(a){var b=this;this.$1.add(a);return function(){b.$1[\"delete\"](a)}};return a}();function a(){return new g()}f.WAPubSub=g;f.simplePubSub=a}),66);\n__d(\"WAPersistedQueue\",[\"WALogger\",\"WAPersistedQueueCache\",\"WAPubSub\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[PersistedQueue] new entry\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[PersistedQueue] flush: \",\"}\"]);i=function(){return a};return a}var j=function(){function a(a,b,c){var e=this;this.$1=d(\"WAPubSub\").simplePubSub();this.$3=a;this.$4=b;this.$2=d(\"WAPersistedQueueCache\").makePersistedQueueCache(a,function(c){return b.write(a,c).then(function(){d(\"WALogger\").DEV(i(),c.length),e.$1.publish({type:\"flush\"})})},c)}var b=a.prototype;b.subscribe=function(a){return this.$1.subscribe(a)};b.config=function(a){this.$2.config(a)};b.index=function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){var b=this;return{equals:function(c,d,e){return b.$4.indexEquals(b.$3,a,c,d,e)}}});b.read=function(a,b){return this.$4.read(this.$3,a,b)};b.write=function(a){d(\"WALogger\").DEV(h());this.$1.publish({type:\"new_entity\"});return this.$2.write(a)};b.flush=function(){return this.$2.flush()};b.ack=function(a,b){return this.$4.ack(this.$3,a,b)};b[\"delete\"]=function(a){return this.$4[\"delete\"](this.$3,a)};b.failAck=function(a,b){return this.$4.failAck(this.$3,a,b)};b.clear=function(){return this.$4.clear(this.$3)};return a}();function a(a,b,c){return new j(a,b,c)}g.PersistedQueue=j;g.initPersistedQueue=a}),98);\n__d(\"WAProtocolQueue\",[\"WAErr\",\"WAGlobals\",\"WAJids\",\"WALogger\",\"WAMapContentTypeToFbType\",\"WAPersistedQueue\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Protocol Queue is already initialized\"]);h=function(){return a};return a}var i=5e3,j=null;function a(a){if(j!=null){d(\"WALogger\").WARN(h());return j}a=d(\"WAPersistedQueue\").initPersistedQueue(\"stanzaQueue\",a,{cacheSize:null,maxDelay:i});j=a;return j}function b(){if(!j)throw c(\"WAErr\")(\"Protocol queue not initialized\");return j}function e(a){return{flush:function(){return a.flush()}}}function f(a){return a.map(function(a){return a.type===\"message\"?k(a):babelHelpers[\"extends\"]({},a)})}function k(a){switch(a.subtype){case\"unavailable\":var b=a,c=d(\"WAJids\").extractUserJid(b.from);c={type:\"UnavailableMsg\",id:{chat:b.jid,author:d(\"WAGlobals\").getMyUserJid()===c?\"@me\":c,externalId:b.stanzaId},ts:b.serverTs};return{stanzaId:b.stanzaId,jid:b.jid,type:b.type,message:{decrypted:c,details:{count:null,externalId:b.stanzaId,folder:b.fbFolderId,from:d(\"WAJids\").switchOnMsgrChatJidType(b.jid,{group:function(a){return{type:\"group\",groupJid:a,chat:a,author:b.from}},user:function(a){return{type:\"device\",deviceJid:b.from,chat:a,author:b.from}}}),hideDecryptionFailure:!1,messageAlreadyPresented:!1,offline:b.offline,recipient:b.recipient,reportingMeta:b.reportingMeta,retryCount:b.retryCount,ts:b.serverTs,isInstamadillo:!1,type:d(\"WAMapContentTypeToFbType\").mapContentTypeToFbType(b.contentType)}},consumerRetries:a.consumerRetries,failAcks:a.failAcks,stanzaQueueId:a.stanzaQueueId,priority:b.priority};case\"armadillo\":var e=a;c=d(\"WAJids\").extractUserJid(e.from);c={device:{id:d(\"WAJids\").extractDeviceId(e.from),identity:e.remoteIdentity},folder:e.fbFolderId,id:{chat:e.jid,author:d(\"WAGlobals\").getMyUserJid()===c?\"@me\":c,externalId:e.stanzaId},msg:e.message,recipientsCount:null,reportingMeta:e.reportingMeta,ts:e.serverTs,type:\"IncomingMsg\"};return{stanzaId:e.stanzaId,jid:e.jid,type:e.type,message:{decrypted:c,details:{count:null,externalId:e.stanzaId,folder:e.fbFolderId,from:d(\"WAJids\").switchOnMsgrChatJidType(e.jid,{group:function(a){return{type:\"group\",groupJid:a,chat:a,author:e.from}},user:function(a){return{type:\"device\",deviceJid:e.from,chat:a,author:e.from}}}),hideDecryptionFailure:!1,messageAlreadyPresented:!1,offline:e.offline,recipient:e.recipient,reportingMeta:e.reportingMeta,retryCount:e.retryCount,ts:e.serverTs,isInstamadillo:!1,type:d(\"WAMapContentTypeToFbType\").mapContentTypeToFbType(e.contentType)}},consumerRetries:a.consumerRetries,failAcks:a.failAcks,stanzaQueueId:a.stanzaQueueId,priority:e.priority};case\"instamadillo\":var f=a;c=d(\"WAJids\").extractUserJid(f.from);c={device:{id:d(\"WAJids\").extractDeviceId(f.from),identity:f.remoteIdentity},folder:f.fbFolderId,id:{chat:f.jid,author:d(\"WAGlobals\").getMyUserJid()===c?\"@me\":c,externalId:f.stanzaId},msg:f.message,recipientsCount:null,reportingMeta:f.reportingMeta,ts:f.serverTs,type:\"InstamadilloMsg\"};return{stanzaId:f.stanzaId,jid:f.jid,type:f.type,priority:f.priority,message:{decrypted:c,details:{count:null,externalId:f.stanzaId,folder:f.fbFolderId,from:d(\"WAJids\").switchOnMsgrChatJidType(f.jid,{group:function(a){return{type:\"group\",groupJid:a,chat:a,author:f.from}},user:function(a){return{type:\"device\",deviceJid:f.from,chat:a,author:f.from}}}),hideDecryptionFailure:!1,messageAlreadyPresented:!1,offline:f.offline,recipient:f.recipient,reportingMeta:f.reportingMeta,retryCount:f.retryCount,ts:f.serverTs,isInstamadillo:!0,type:d(\"WAMapContentTypeToFbType\").mapContentTypeToFbType(f.contentType)}},consumerRetries:a.consumerRetries,failAcks:a.failAcks,stanzaQueueId:a.stanzaQueueId};case\"ciphertext\":var g=a;c=d(\"WAJids\").extractUserJid(g.from);c={createPlaceholder:g.contentType!==\"reaction\",id:{chat:g.jid,author:d(\"WAGlobals\").getMyUserJid()===c?\"@me\":c,externalId:g.stanzaId},ts:g.serverTs,type:\"IncomingCiphertextMsg\"};return{priority:g.priority,stanzaId:g.stanzaId,jid:g.jid,type:g.type,message:{decrypted:c,details:{count:null,externalId:g.stanzaId,folder:g.fbFolderId,from:d(\"WAJids\").switchOnMsgrChatJidType(g.jid,{group:function(a){return{type:\"group\",groupJid:a,chat:a,author:g.from}},user:function(a){return{type:\"device\",deviceJid:g.from,chat:a,author:g.from}}}),hideDecryptionFailure:!1,messageAlreadyPresented:!1,offline:g.offline,recipient:g.recipient,reportingMeta:g.reportingMeta,retryCount:g.retryCount,ts:g.serverTs,isInstamadillo:!1,type:d(\"WAMapContentTypeToFbType\").mapContentTypeToFbType(g.contentType)}},consumerRetries:a.consumerRetries,failAcks:a.failAcks,stanzaQueueId:a.stanzaQueueId};default:a;return babelHelpers[\"extends\"]({},a)}}var l=9,m=5;function n(a){return a}function o(a){return a}g.initProtocolQueue=a;g.protocolQueue=b;g.protocolQueueFlushable=e;g.mapProtocolEntriesV2toV1=f;g.mapProcolQueueMessageV2toV1=k;g.WAProtocolQueuePriorityHigh=l;g.WAProtocolQueuePriorityLow=m;g.appdataApplicationProtocol=n;g.extractSubProtocolFromAppdataProtocol=o}),98);\n__d(\"WAMessageKey\",[\"WAErr\",\"WAGlobals\",\"WAJids\",\"WAStanzaUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){return a===d(\"WAJids\").AUTHOR_ME||a==d(\"WAGlobals\").getMyUserJid()}function a(a,b,e){if(e==null)throw c(\"WAErr\")(\"messageKey is null\");var f=e.id,g=e.remoteJid;if(f==null)throw c(\"WAErr\")(\"messageKey.id is null\");else if(g==null)throw c(\"WAErr\")(\"messageKey.remoteJid is null\");g=d(\"WAJids\").interpretAndValidateJid(g);if(g.jidType===\"unknown\")throw c(\"WAErr\")(\"messageKey.remoteJid is invalid\");var i,j=d(\"WAJids\").AUTHOR_ME;if(g.jidType===\"group\"){i=g.groupJid;if(h(b)&&e.fromMe===!0)j=d(\"WAJids\").AUTHOR_ME;else if(e.fromMe==!0)j=b;else{var k=e.participant;if(k==null)throw c(\"WAErr\")(\"key.participant is null\");k=d(\"WAJids\").interpretAndValidateJid(k);if(k.jidType===\"msgrUser\")j=k.userJid;else throw c(\"WAErr\")(\"key.participant is invalid\")}}else if(g.jidType===\"msgrUser\"||g.jidType===\"msgrDevice\"){k=d(\"WAJids\").interpretAndValidateJid(a);if(k.jidType!==\"msgrUser\")throw c(\"WAErr\")(\"expected user type jid.\");i=k.userJid;h(b)?e.fromMe===!0?j=d(\"WAJids\").AUTHOR_ME:j=k.userJid:e.fromMe===!0&&(j=k.userJid)}else throw c(\"WAErr\")(\"Unsupported jidtype type\");return{chat:i,author:h(j)?d(\"WAJids\").AUTHOR_ME:j,externalId:d(\"WAStanzaUtils\").toStanzaId(f)}}g.extractProtocolMessageId=a}),98);\n__d(\"WAParseConsumerMessagePollCreation\",[\"WAGlobals\",\"WAHex\",\"WAMsgType\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c,e){a={unstoredMsg:{type:d(\"WAMsgType\").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:d(\"WAHex\").bytesToBuffer(a),subtype:d(\"WAGlobals\").getConfig().isUnsupportedMessagesRedesignEnabled()?\"pollCreationMessage\":null},id:b.id,ts:b.ts,sentTs:b.sentTs,serverTs:b.serverTs,ack:b.ack,reportingMeta:c},unstoredMedia:null,unstoredQuotedMedia:null};return!e||!d(\"WAGlobals\").getConfig().isPollsFallbackExperienceEnabled()?a:a}g[\"default\"]=a}),98);\n__d(\"WAParseProtocolUtils\",[\"WAGlobals\",\"WALogger\",\"WALongInt\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Unsupported franking version \",\"\"]);h=function(){return a};return a}function a(a,b){b=i(b,a.serverTs);a=b==null?void 0:b.expirationTs;var c=b==null?void 0:b.deleteTs;b=b==null?void 0:b.ephemeralSetting;return{expirationTs:a,deleteTs:c,ephemeralSetting:b}}function b(a,b){b=j(b);b!=null&&(a.reportingMeta=b);return b}function i(a,b){var c;c=a==null?void 0:(c=a.chatEphemeralSetting)==null?void 0:c.ephemeralExpiration;a=a==null?void 0:(a=a.chatEphemeralSetting)==null?void 0:a.ephemeralSettingTimestamp;if(c==null||a==null||c===0||!d(\"WAGlobals\").getConfig().isEphemeralMessagesEnabled())return null;b=d(\"WATimeUtils\").castToUnixTime(b+d(\"WAGlobals\").getConfig().ephemeralMaxDeletionWindowForUnseenMessage());var e=b,f=null;try{a=d(\"WALongInt\").numberOrThrowIfTooLarge(a)\/1e3;f=d(\"WATimeUtils\").castToUnixTime(a)}catch(a){return null}return{expirationTs:b,deleteTs:e,ephemeralSetting:{expirationTs:c,updatedTs:f}}}function j(a){a=a==null?void 0:a.frankingVersion;a!=null&&a!==0&&d(\"WALogger\").ERROR(h(),a);return{frankingKey:void 0,frankingTag:void 0,frankingVersion:a,reportingContent:void 0,reportingTag:void 0}}g.parseEphemerality=a;g.enhanceReportingMeta=b}),98);\n__d(\"WAParseConsumerMessageProtocol\",[\"WACommon.pb\",\"WAConsumerApplication.pb\",\"WAErr\",\"WAGlobals\",\"WAHex\",\"WAJids\",\"WALogger\",\"WAMediaTransport.pb\",\"WAMessageKey\",\"WAMsgType\",\"WAParseConsumerMessagePollCreation\",\"WAParseMediaTransportProtocol\",\"WAParseProtocolUtils\",\"WAResultOrError\",\"WAStanzaUtils\",\"decodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"parseConsumerMessageProtocol error :\",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WAParseConsumerMessageProtocol - ephemeralSetting duration is invalid \",\", jidType: \",\"\"]);i=function(){return a};return a}b=1;e=0;f=1;f=d(\"WAGlobals\").getConfig().armadilloWebProcessFutureproof()?f+1:f;function a(a,b,e,f,g){var j;b=d(\"decodeProtobuf\").decodeProtobufWithUnknowns(d(\"WAConsumerApplication.pb\").ConsumerApplicationSpec,b);j=(j=b.payload)==null?void 0:(j=j.applicationData)==null?void 0:(j=j.revoke)==null?void 0:(j=j.key)==null?void 0:j.id;if(j!=null)return{unstoredMsg:{type:d(\"WAMsgType\").MSG_TYPE.REVOKED,id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:e.reportingMeta,revokedExternalId:d(\"WAStanzaUtils\").toStanzaId(j),unsendMsgContentDeleteTs:null,msgContent:null},unstoredMedia:null,unstoredQuotedMedia:null};var k=(g==null?void 0:g.isForwarded)||!1;j=d(\"WAParseProtocolUtils\").parseEphemerality(e,g);var l=j.expirationTs,u=j.deleteTs,v=j.ephemeralSetting;if(v!=null&&(v.expirationTs<0||v.expirationTs>86400)){j=d(\"WAJids\").interpretAndValidateJid(a);j=j.jidType;var w=v.expirationTs;v.expirationTs===4294967295&&(v.expirationTs=0);d(\"WALogger\").ERROR(i(),w,j)}var x=d(\"WAParseProtocolUtils\").enhanceReportingMeta(e,g),y=(w=n(g))!=null?w:void 0,z=(j=b.payload)==null?void 0:j.content;if(!z)return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null};var A=(g=b.metadata)==null?void 0:g.specialTextSize,B=s(z),C={contentTypeForLogging:B,unstoredMsg:{type:d(\"WAMsgType\").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:d(\"WAHex\").bytesToBuffer(f),subtype:null},id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:x},unstoredMedia:null,unstoredQuotedMedia:null};w=function(){try{switch(B){case\"messageText\":var b,g=z[B];if(g==null)throw c(\"WAErr\")(\"consumerMessage has no messageText\");b=((b=g.commands)==null?void 0:b.some(function(a){return a.commandType===d(\"WACommon.pb\").COMMAND_COMMAND_TYPE.AI}))===!0;if(b)return C;if(g.text==null)throw c(\"WAErr\")(\"consumerMessage has no messageText\");return{unstoredMsg:babelHelpers[\"extends\"]({type:d(\"WAMsgType\").MSG_TYPE.TEXT,msgContent:{content:g.text,mentionedJids:g.mentionedJid.map(d(\"WAJids\").validateUserJid).filter(Boolean)},quote:y,expirationTs:l,deleteTs:u,ephemeralSetting:v,isForwarded:k},e,{specialTextSize:A}),unstoredMedia:null,unstoredQuotedMedia:null};case\"reactionMessage\":return{unstoredMsg:m(a,e,z[B]),unstoredMedia:null,unstoredQuotedMedia:null};case\"imageMessage\":b=o(z,e.ts);return{unstoredMsg:babelHelpers[\"extends\"]({type:d(\"WAMsgType\").MSG_TYPE.IMAGE,quote:y,expirationTs:l,deleteTs:u,ephemeralSetting:v,isForwarded:k,mediaId:b.plaintextHash},e),unstoredMedia:b,unstoredQuotedMedia:null};case\"videoMessage\":var i;g=z[B];if(g==null)throw c(\"WAErr\")(\"consumerMessage has no videoMessage\");g=d(\"decodeProtobuf\").decodeProtobufWithUnknowns(d(\"WAMediaTransport.pb\").VideoTransportSpec,g==null?void 0:(b=g.video)==null?void 0:b.payload);b=g==null?void 0:(b=g.integral)==null?void 0:(b=b.transport)==null?void 0:(b=b.ancillary)==null?void 0:b.mimetype;i=(g==null?void 0:(i=g.ancillary)==null?void 0:i.gifPlayback)===!0&&b===\"image\/gif\";if(i&&!d(\"WAGlobals\").getConfig().isGifEnabled())return C;b=d(\"WAParseMediaTransportProtocol\").parseVideoMsg(g,e.ts,i);if(b==null)throw c(\"WAErr\")(\"consumerMessage has no video media info\");return{unstoredMsg:i?babelHelpers[\"extends\"]({type:d(\"WAMsgType\").MSG_TYPE.GIF},e,{quote:y,expirationTs:l,deleteTs:u,ephemeralSetting:v,isForwarded:k,reportingMeta:x,mediaId:b.plaintextHash}):babelHelpers[\"extends\"]({type:d(\"WAMsgType\").MSG_TYPE.VIDEO},e,{quote:y,expirationTs:l,deleteTs:u,ephemeralSetting:v,isForwarded:k,mediaId:b.plaintextHash}),unstoredMedia:b,unstoredQuotedMedia:null};case\"audioMessage\":g=p(z,e.ts);return{unstoredMsg:babelHelpers[\"extends\"]({type:d(\"WAMsgType\").MSG_TYPE.PTT,quote:y,expirationTs:l,deleteTs:u,ephemeralSetting:v,isForwarded:k,mediaId:g.plaintextHash},e),unstoredMedia:g,unstoredQuotedMedia:null};case\"stickerMessage\":if(d(\"WAGlobals\").getConfig().isStickerEnabled()){i=q(z,e.ts);return{unstoredMsg:babelHelpers[\"extends\"]({type:d(\"WAMsgType\").MSG_TYPE.STICKER,quote:y,expirationTs:l,deleteTs:u,ephemeralSetting:v,isForwarded:k,reportingMeta:x,mediaId:i.plaintextHash},e),unstoredMedia:i,unstoredQuotedMedia:null}}return C;case\"documentMessage\":if(d(\"WAGlobals\").getConfig().isDocumentReceiveEnabled()){b=r(z,e.ts);return{unstoredMsg:babelHelpers[\"extends\"]({type:d(\"WAMsgType\").MSG_TYPE.DOCUMENT_FILE,quote:y,expirationTs:l,deleteTs:u,ephemeralSetting:v,isForwarded:k,reportingMeta:x,mediaId:b.plaintextHash},e),unstoredMedia:b,unstoredQuotedMedia:null}}return C;case\"groupInviteMessage\":return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null,unstoredIncomingGroupInvite:t(e,z)};case\"editMessage\":var j;g=z[B];i=g==null?void 0:g.message;b=i==null?void 0:i.text;j=g==null?void 0:(j=g.key)==null?void 0:j.id;if(g==null||i==null||b==null)throw c(\"WAErr\")(\"consumerMessage with editMessage type has no editMessage\");if(j==null)throw c(\"WAErr\")(\"consumerMessage with editMessage type has no original Msg External Id.\");g=d(\"WAStanzaUtils\").toStanzaId(j);return{unstoredEditMsg:{type:d(\"WAMsgType\").MSG_TYPE.EDIT_ACTION,editMsgContent:{content:b,mentionedJids:i.mentionedJid.map(d(\"WAJids\").validateUserJid).filter(Boolean)},originalMsgExternalId:g,id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:x,specialTextSize:A},unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null};case\"pollCreationMessage\":return c(\"WAParseConsumerMessagePollCreation\")(f,e,x,z[B]);case\"contactMessage\":case\"locationMessage\":case\"extendedTextMessage\":case\"statusTextMessage\":case\"contactsArrayMessage\":case\"liveLocationMessage\":case\"viewOnceMessage\":default:return C}}catch(a){d(\"WALogger\").ERROR(h(),a);return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}}}();return babelHelpers[\"extends\"]({},w,{contentTypeForLogging:B})}function j(a){if(d(\"WAJids\").isAuthorSystem(a))throw c(\"WAErr\")(\"Got system author\");return a}var k=30;function l(a){if(a==null)return d(\"WAResultOrError\").makeResult(null);return a.length>k?d(\"WAResultOrError\").makeError(\"invalid-reaction-text-length\"):d(\"WAResultOrError\").makeResult(a)}function m(a,b,e){if(e==null)throw c(\"WAErr\")(\"consumerMessage has no reactionMessage\");var f=j(b.id.author);a=d(\"WAMessageKey\").extractProtocolMessageId(a,f,e.key);f=e.text;e=e.groupingKey;var g=l(f);if(!g.success){throw c(\"WAErr\")('\"'+((f=f)!=null?f:\"\")+'\" is not a valid reaction ['+g.error+\"]\")}return{type:d(\"WAMsgType\").MSG_TYPE.REACTION,ack:b.ack,id:b.id,reactToExternalId:a.externalId,reactToAuthor:a.author,reaction:g.value,groupingKey:e,ts:b.ts}}function n(a){var b,e;b=a==null?void 0:(b=a.quotedMessage)==null?void 0:b.stanzaId;e=a==null?void 0:(e=a.quotedMessage)==null?void 0:e.participant;a=a==null?void 0:(a=a.quotedMessage)==null?void 0:a.remoteJid;e=e!=null?d(\"WAJids\").interpretAndValidateJid(e):null;var f;(e==null?void 0:e.jidType)===\"msgrUser\"&&e.userJid===d(\"WAGlobals\").getMyUserJid()?f=d(\"WAJids\").AUTHOR_ME:(e==null?void 0:e.jidType)===\"msgrUser\"?f=e.userJid:f=d(\"WAJids\").AUTHOR_ME;if(b==null)return null;e={type:d(\"WAMsgType\").MSG_TYPE.UNAVAILABLE,author:f,externalId:d(\"WAStanzaUtils\").toStanzaId(b),ts:null};if(a!=null){f=d(\"WAJids\").interpretAndValidateJid(a);if(f.jidType===\"group\")return{remoteJid:f.groupJid,content:e};else throw c(\"WAErr\")(\"not supported\")}else return{remoteJid:null,content:e}}function o(a,b){a=a.imageMessage;if(a==null)throw c(\"WAErr\")(\"consumerMessage has no imageMessage\");return d(\"WAParseMediaTransportProtocol\").decodeImageTransport(a==null?void 0:(a=a.image)==null?void 0:a.payload,b)}function p(a,b){var e;a=a.audioMessage;if(a==null)throw c(\"WAErr\")(\"consumerMessage has no audioMessage\");e=d(\"decodeProtobuf\").decodeProtobufWithUnknowns(d(\"WAMediaTransport.pb\").AudioTransportSpec,a==null?void 0:(e=a.audio)==null?void 0:e.payload);e=d(\"WAParseMediaTransportProtocol\").parseAudioMsg(e,(a==null?void 0:a.ptt)||!1,b);if(e==null)throw c(\"WAErr\")(\"consumerMessage has no audio media info\");return e}function q(a,b){a=a.stickerMessage;if(a==null)throw c(\"WAErr\")(\"consumerMessage has no stickerMessage\");a=d(\"decodeProtobuf\").decodeProtobufWithUnknowns(d(\"WAMediaTransport.pb\").StickerTransportSpec,a==null?void 0:(a=a.sticker)==null?void 0:a.payload);a=d(\"WAParseMediaTransportProtocol\").parseStickerMsg(a,b);if(a==null)throw c(\"WAErr\")(\"consumerMessage has no sticker media info\");return a}function r(a,b){var e;a=a.documentMessage;if(a==null)throw c(\"WAErr\")(\"consumerMessage has no documentMessage\");e=d(\"decodeProtobuf\").decodeProtobufWithUnknowns(d(\"WAMediaTransport.pb\").DocumentTransportSpec,a==null?void 0:(e=a.document)==null?void 0:e.payload);a=a==null?void 0:a.fileName;e=d(\"WAParseMediaTransportProtocol\").parseDocumentMsg(e,a,b);if(e==null)throw c(\"WAErr\")(\"consumerMessage has no document media info\");return e}function s(a){var b=Object.keys(a).filter(function(a){return a!==\"$$unknownFieldCount\"});if(b.length!==1)throw c(\"WAErr\")(JSON.stringify(a)+\" consumerMessage payload content should have exactly one field, instead found \"+JSON.stringify(b));return b[0]}function t(a,b){b=b.groupInviteMessage;if(b==null)throw c(\"WAErr\")(\"consumerMessage has no GroupInvite Data\");return babelHelpers[\"extends\"]({ack:a.ack,author:a.id.author,externalId:a.id.externalId,ts:a.ts},b)}g.MINIMAL_MEDIA_DURATION=b;g.DEFAULT_FILE_SIZE=e;g.SUPPORTED_TYPES_VERSION=f;g.parseConsumerMessageProtocol=a;g.interpretAsNonSystemAuthor=j;g.validReactionMessageText=l;g.parseReactionMessage=m;g.parseOneOfContentType=s}),98);\n__d(\"WAMedia\",[],(function(a,b,c,d,e,f){\"use strict\";a=\"Image\";b=\"Video\";c=\"Ptt\";d=\"Gif\";e=\"Sticker\";var g=\"DocumentFile\",h={IMAGE:a,VIDEO:b,PTT:c,GIF:d,STICKER:e,DOCUMENT_FILE:g};f.IMAGE=a;f.VIDEO=b;f.PTT=c;f.GIF=d;f.STICKER=e;f.DOCUMENT_FILE=g;f.MEDIA_TYPE=h}),66);\n__d(\"WAParseMediaTransportProtocol\",[\"WAErr\",\"WALogger\",\"WALongInt\",\"WAMedia\",\"WAMediaTransport.pb\",\"WAMediaUtils\",\"WAMsgMap\",\"WAParseConsumerMessageProtocol\",\"WAProgressiveJpegGetScanLengths\",\"WATimeUtils\",\"decodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"cannot compose mediaEntry with the media message\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"protobuf msg with too large size \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"protobuf msg with bad size \",\", use default size instead\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"protobuf msg with no plaintext hash\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"There is unknown fileds in integral of VideoTransport\"]);l=function(){return a};return a}function m(a,b,c){var e,f,g,m;if(!((e=a.integral)==null?void 0:e.transport))return null;e=(e=a.integral)==null?void 0:e.transport;if(d(\"decodeProtobuf\").getUnknownFields(e.integral)!=null){d(\"WALogger\").ERROR(l());return null}f=(f=e.integral)==null?void 0:f.fileSha256;if(!f){d(\"WALogger\").ERROR(k());return null}g=(g=e.ancillary)==null?void 0:g.fileLength;g==null&&(d(\"WALogger\").WARN(j(),g),g=d(\"WAParseConsumerMessageProtocol\").DEFAULT_FILE_SIZE);try{g=d(\"WALongInt\").numberOrThrowIfTooLarge(g)}catch(a){d(\"WALogger\").ERROR(i(),g);return null}var n=null;if(((m=a.ancillary)==null?void 0:m.scansSidecar)!=null&&((m=a.ancillary)==null?void 0:m.scanLengths)!=null){n={sidecar:(m=a.ancillary)==null?void 0:m.scansSidecar,scanLengths:(m=a.ancillary)==null?void 0:(a=m.scanLengths)==null?void 0:a.map(d(\"WAProgressiveJpegGetScanLengths\").asProgressiveJpegScanLength)}}if(((m=e.integral)==null?void 0:m.fileSha256)==null||((a=e.integral)==null?void 0:a.fileEncSha256)==null||((m=e.integral)==null?void 0:m.mediaKey)==null||((a=e.integral)==null?void 0:a.directPath)==null||((m=e.integral)==null?void 0:m.mediaKeyTimestamp)==null||((a=e.ancillary)==null?void 0:a.objectId)==null){d(\"WALogger\").ERROR(h());return null}a=(m=e.ancillary.thumbnail)==null?void 0:m.downloadableThumbnail;b=d(\"WAMediaUtils\").rawDataToMediaEntry(e.integral.fileSha256,e.integral.fileEncSha256,e.integral.mediaKey,e.integral.directPath,d(\"WATimeUtils\").castLongIntToUnixTime(e.integral.mediaKeyTimestamp),b,(m=e.ancillary)==null?void 0:m.objectId,void 0,{directPath:a==null?void 0:a.directPath,fileEncSha256:a==null?void 0:a.fileEncSha256,fileSha256:a==null?void 0:a.fileSha256,mediaKey:a==null?void 0:a.mediaKey,mediaKeyTimestamp:(a==null?void 0:a.mediaKeyTimestamp)==null?null:d(\"WATimeUtils\").castLongIntToUnixTime(a==null?void 0:a.mediaKeyTimestamp),objectId:a==null?void 0:a.objectId},c,n);return{size:g,plaintextHash:d(\"WAMediaUtils\").toPlaintextHash(new Uint8Array(f)),mediaEntry:b}}function n(a,b){var c,e=m(a,\"image\");if(!e)return null;e=p(e,b);b=(b=a.ancillary)==null?void 0:b.width;c=(c=a.ancillary)==null?void 0:c.height;a.ancillary!=null&&(a.ancillary.width!=null&&a.ancillary.width===4294967295&&(b=void 0),a.ancillary.height!=null&&a.ancillary.height===4294967295&&(c=void 0));c=babelHelpers[\"extends\"]({},e,{mediaType:d(\"WAMedia\").MEDIA_TYPE.IMAGE,validatedVideoInfo:null,validatedImageInfo:{width:b,height:c,jpegThumbnail:(e=a.integral)==null?void 0:(b=e.transport)==null?void 0:(c=b.ancillary)==null?void 0:(e=c.thumbnail)==null?void 0:e.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(e=c.ancillary)==null?void 0:(b=e.thumbnail)==null?void 0:b.thumbnailHeight,jpegThumbnailWidth:(c=a.integral)==null?void 0:(e=c.transport)==null?void 0:(b=e.ancillary)==null?void 0:(a=b.thumbnail)==null?void 0:a.thumbnailWidth},validatedAudioInfo:null,validatedDocumentFileInfo:null});return c}function a(a,b){a=d(\"decodeProtobuf\").decodeProtobufWithUnknowns(d(\"WAMediaTransport.pb\").ImageTransportSpec,a);a=n(a,b);if(a==null)throw c(\"WAErr\")(\"consumerMessage has no image media info\");return a}function b(a,b,c){var e;if(!((e=a.integral)==null?void 0:e.transport))return null;e=m(a,c?\"gif\":\"video\");if(!e)return null;e=p(e,b);e=babelHelpers[\"extends\"]({},e,{mediaType:c?d(\"WAMedia\").MEDIA_TYPE.GIF:d(\"WAMedia\").MEDIA_TYPE.VIDEO,validatedVideoInfo:c?null:{duration:(a==null?void 0:(b=a.ancillary)==null?void 0:b.seconds)!=null&&(a==null?void 0:(e=a.ancillary)==null?void 0:e.seconds)>d(\"WAParseConsumerMessageProtocol\").MINIMAL_MEDIA_DURATION?a==null?void 0:(b=a.ancillary)==null?void 0:b.seconds:d(\"WAParseConsumerMessageProtocol\").MINIMAL_MEDIA_DURATION,width:a==null?void 0:(e=a.ancillary)==null?void 0:e.width,height:a==null?void 0:(b=a.ancillary)==null?void 0:b.height,mimetype:a==null?void 0:(e=a.integral)==null?void 0:(b=e.transport)==null?void 0:(e=b.ancillary)==null?void 0:e.mimetype,jpegThumbnail:(b=a.integral)==null?void 0:(e=b.transport)==null?void 0:(b=e.ancillary)==null?void 0:(e=b.thumbnail)==null?void 0:e.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null?void 0:(e=b.transport)==null?void 0:(b=e.ancillary)==null?void 0:(e=b.thumbnail)==null?void 0:e.thumbnailHeight,jpegThumbnailWidth:(b=a.integral)==null?void 0:(e=b.transport)==null?void 0:(b=e.ancillary)==null?void 0:(e=b.thumbnail)==null?void 0:e.thumbnailWidth},validatedImageInfo:c?{width:(b=a.ancillary)==null?void 0:b.width,height:(e=a.ancillary)==null?void 0:e.height,jpegThumbnail:(c=a.integral)==null?void 0:(b=c.transport)==null?void 0:(e=b.ancillary)==null?void 0:(c=e.thumbnail)==null?void 0:c.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null?void 0:(e=b.transport)==null?void 0:(c=e.ancillary)==null?void 0:(b=c.thumbnail)==null?void 0:b.thumbnailHeight,jpegThumbnailWidth:(e=a.integral)==null?void 0:(c=e.transport)==null?void 0:(b=c.ancillary)==null?void 0:(a=b.thumbnail)==null?void 0:a.thumbnailWidth}:null,validatedAudioInfo:null,validatedDocumentFileInfo:null});return e}function e(a,b,c){if(!((b=a.integral)==null?void 0:b.transport))return null;b=m(a,\"ptt\");if(!b)return null;b=p(b,c);b=babelHelpers[\"extends\"]({},b,{mediaType:d(\"WAMedia\").MEDIA_TYPE.PTT,validatedVideoInfo:null,validatedImageInfo:null,validatedDocumentFileInfo:null,validatedAudioInfo:{duration:(a==null?void 0:(c=a.ancillary)==null?void 0:c.seconds)!=null&&(a==null?void 0:(b=a.ancillary)==null?void 0:b.seconds)>d(\"WAParseConsumerMessageProtocol\").MINIMAL_MEDIA_DURATION?a==null?void 0:(c=a.ancillary)==null?void 0:c.seconds:d(\"WAParseConsumerMessageProtocol\").MINIMAL_MEDIA_DURATION,mimetype:a==null?void 0:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(a=c.ancillary)==null?void 0:a.mimetype,played:!1}});return b}function f(a,b){var c;if(!((c=a.integral)==null?void 0:c.transport))return null;c=m(a,\"sticker\");if(!c)return null;c=p(c,b);c=babelHelpers[\"extends\"]({},c,{mediaType:d(\"WAMedia\").MEDIA_TYPE.STICKER,validatedVideoInfo:null,validatedImageInfo:{width:(b=a.ancillary)==null?void 0:b.width,height:(c=a.ancillary)==null?void 0:c.height,jpegThumbnail:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(b=c.ancillary)==null?void 0:(c=b.thumbnail)==null?void 0:c.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(b=c.ancillary)==null?void 0:(c=b.thumbnail)==null?void 0:c.thumbnailHeight,jpegThumbnailWidth:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(a=c.ancillary)==null?void 0:(b=a.thumbnail)==null?void 0:b.thumbnailWidth},validatedAudioInfo:null,validatedDocumentFileInfo:null});return c}function o(a,b,c){var e;if(!((e=a.integral)==null?void 0:e.transport))return null;e=m(a,\"document\",b);if(!e)return null;e=p(e,c);return babelHelpers[\"extends\"]({},e,{mediaType:d(\"WAMedia\").MEDIA_TYPE.DOCUMENT_FILE,validatedVideoInfo:null,validatedImageInfo:null,validatedAudioInfo:null,validatedDocumentFileInfo:{mimetype:a==null?void 0:(c=a.integral)==null?void 0:(e=c.transport)==null?void 0:(a=e.ancillary)==null?void 0:a.mimetype,filename:(c=b)!=null?c:void 0}})}function p(a,b){return{mediaEntry:a.mediaEntry,plaintextHash:a.plaintextHash,size:a.size,msgIds:[],mediaEntries:new(d(\"WAMsgMap\").MsgMap)(),ts:b}}g.getMediaMeta=m;g.parseImageMsg=n;g.decodeImageTransport=a;g.parseVideoMsg=b;g.parseAudioMsg=e;g.parseStickerMsg=f;g.parseDocumentMsg=o}),98);\n__d(\"MAWPersistedQueueApi\",[\"MAWDexieTable\",\"MAWTransactionMode\",\"MAWTransactor\",\"WAArrayZip\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return{ack:k,clear:n,\"delete\":m,failAck:l,indexEquals:i,read:h,write:j}}function h(a,b,c){return d(\"MAWTransactor\").persistedQueueTransactor(a,d(\"MAWTransactionMode\").READONLY,function(a){a=a.toCollection();c===\"desc\"&&(a=a.reverse());b!=null&&(a=a.limit(b));return a.toArray()},\"any\")}function i(a,b,c,e,f){return d(\"MAWTransactor\").persistedQueueTransactor(a,d(\"MAWTransactionMode\").READONLY,function(a){a=a.where(b).equals(c.length===1?c[0]:c);f===\"desc\"&&(a=a.reverse());e!=null&&(a=a.limit(e));return a.toArray()},\"where\")}function j(a,b){return d(\"MAWTransactor\").persistedQueueTransactor(a,d(\"MAWTransactionMode\").READWRITE,function(a){return a.bulkAdd(b).then(function(){})},\"write\")}function k(a,b,c){return d(\"MAWTransactor\").persistedQueueTransactor(a,d(\"MAWTransactionMode\").READWRITE,function(a){if(c==null)return a.bulkDelete(b);else return a.bulkGet(b).then(function(e){e=d(\"WAArrayZip\").zip(b,e).map(function(a){var b=a[0];a=a[1];return{after:c(a),id:b}});var f=e.filter(function(a){return a.after==null}).map(function(a){return a.id});e=e.filter(function(a){return a.after!=null});return d(\"MAWDexieTable\").dexieAll([a.bulkDelete(f),a.bulkUpdate(e.map(function(a){return{changes:a.after,key:a.id}}))]).then(function(){})})},\"ack\")}function l(a,b,c){return d(\"MAWTransactor\").persistedQueueTransactor(a,d(\"MAWTransactionMode\").READWRITE,function(a){return a.bulkGet(b).then(function(e){e=d(\"WAArrayZip\").zip(b,e).map(function(a){var b=a[0];a=a[1];if(a==null)return;return{after:c(a),id:b}}).filter(Boolean);var f=e.filter(function(a){return a.after==null}).map(function(a){return a.id});e=e.filter(function(a){return a.after!=null});return d(\"MAWDexieTable\").dexieAll([a.bulkDelete(f),a.bulkUpdate(e.map(function(a){return{changes:a.after,key:a.id}}))]).then(function(){})})},\"failAck\")}function m(a,b){return d(\"MAWTransactor\").persistedQueueTransactor(a,d(\"MAWTransactionMode\").READWRITE,function(a){return a.bulkDelete(b)},\"delete\")}function n(a){return d(\"MAWTransactor\").persistedQueueTransactor(a,d(\"MAWTransactionMode\").READWRITE,function(a){return a.clear().then(function(){})},\"clear\")}g.dexieApiForPersistedQueue=a;g.persistedQueueRead=h;g.persistedQueueIndexEquals=i}),98);\n__d(\"MAWSharedEbUploadQueue\",[\"MAWPersistedQueueApi\",\"MAWSharedEbUploadEntity\",\"WAGlobals\",\"WAPersistedQueue\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to write to ebUploadQueue \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"EB Upload Queue is already initialized\"]);i=function(){return a};return a}var j=d(\"WATagsLogger\").TAGS([\"EbUploadQueue\"]),k=null;function l(){return k==null?m():k}function m(){k!=null&&j.ERROR(i());var a=d(\"WAPersistedQueue\").initPersistedQueue(\"ebUploadQueue\",d(\"MAWPersistedQueueApi\").dexieApiForPersistedQueue());k=a;return a}function a(a){if(!d(\"WAGlobals\").getConfig().useEbUploadQueue()||a.length===0)return;a=a.map(function(a){var b=a.backupDirective,c=a.messageApplication,e=a.msgId,f=a.originalMsgProtocolId,g=a.reportingMeta,h=a.senderId;a=a.serverTs;return d(\"MAWSharedEbUploadEntity\").asEBUploadEntity({backupDirective:b,msgId:e,originalMsgProtocolId:f,protobuf:d(\"MAWSharedEbUploadEntity\").encodeBackupMessage({backupDirective:b,messageApplication:c,msgId:e,reportingMeta:g,serverTs:a}),senderId:h,serverTs:a})});var b=l();a.forEach(function(a){void b.write(a)});b.flush()[\"catch\"](function(a){j.ERROR(h(),a)})}g.logger=j;g.ebUploadQueue=l;g.initEbUploadQueue=m;g.putMsgsToEbUpload=a}),98);\n__d(\"MessageBackupSupplementalKeyGenerator\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"$InternalEnum\")({REACTION:\"reaction\",EDIT:\"edit\"}),h=\":\";function a(a,b){return\"\"+g.getName(a)+h+b}function c(a){return a.split(h)[1]}function i(a,b){b=b.replace(\/[-[\\]{}()*+?.,\\\\^$|#\\s]\/g,\"\\\\$&\");b=new RegExp(\"^\"+b,\"i\");return b.test(a)}function d(a){return i(a,\"reaction\")}function e(a){return i(a,\"edit\")}f.SupplementalKeyPrefix=g;f.SUPPLEMENTAL_KEY_DELIMITER=h;f.createMessageSupplementalKey=a;f.getSupplementalSenderId=c;f.isSupplementalProtobufAReaction=d;f.isSupplementalProtobufAnEdit=e}),66);\n__d(\"WAMsgIdToMessageKey\",[\"WAGlobals\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=a.author,c=a.externalId;a=a.chat;var e=d(\"WAJids\").isAuthorMe(b),f=d(\"WAJids\").interpretAsGroupJid(a);b=e?d(\"WAGlobals\").getMyUserJid():b;a=a;f=f!=null?b:void 0;return{fromMe:e,id:c,remoteJid:a,participant:f}}g.msgIdToMessageKey=a}),98);\n__d(\"WAAsConsumerApplication\",[\"WAAssertUnreachable\",\"WAConsumerApplication.pb\",\"WAErr\",\"WAMsgIdToMessageKey\",\"WAMsgType\"],(function(a,b,c,d,e,f,g){\"use strict\";b=\"image\/jpeg\";e=\"video\/mp4\";f=\"audio\/wav\";var h=\"image\/gif\",i=\"image\/webp\";function a(a){switch(a.type){case d(\"WAMsgType\").MSG_TYPE.TEXT:return j(a);case d(\"WAMsgType\").MSG_TYPE.REACTION:return k(a);case d(\"WAMsgType\").MSG_TYPE.REVOKED:return l(a);default:return c(\"WAAssertUnreachable\")(a.type)}}function j(a){var b={payload:{content:{messageText:{mentionedJid:[],text:a.msgContent.content}}}};if(a.specialTextSize!=null){a=a.specialTextSize===1?d(\"WAConsumerApplication.pb\").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.SMALL:a.specialTextSize===2?d(\"WAConsumerApplication.pb\").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.MEDIUM:d(\"WAConsumerApplication.pb\").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.LARGE;b.metadata={specialTextSize:a}}return b}function k(a){if(a.reactToMsgId==null)throw c(\"WAErr\")(\"cannot send reaction that reacts to no message\");var b=d(\"WAMsgIdToMessageKey\").msgIdToMessageKey(a.reactToMsgId);b={groupingKey:a.groupingKey==null?void 0:a.groupingKey,key:b,senderTimestampMs:a.ts,text:a.reaction==null?void 0:a.reaction};return{payload:{content:{reactionMessage:b}}}}function l(a){a={remoteJid:a.id.chat,fromMe:!0,id:a.revokedExternalId};return{payload:{applicationData:{revoke:{key:a}}}}}g.IMAGE_MIME_TYPE=b;g.VIDEO_MIME_TYPE=e;g.AUDIO_MIME_TYPE=f;g.GIF_MIME_TYPE=h;g.STICKER_MIME_TYPE=i;g.asConsumerApplication=a;g.encodeTextMessage=j;g.encodeReactionMessage=k}),98);\n__d(\"WACryptoPrimitives\",[\"tweetnacl\"],(function(a,b,c,d,e,f,g){\"use strict\";b={scalarbase:(a=d(\"tweetnacl\")).lowlevel.scalarbase,crypto_hash:a.lowlevel.crypto_hash,modL:a.lowlevel.modL,pack25519:a.lowlevel.pack25519,S:a.lowlevel.S,M:a.lowlevel.M,A:a.lowlevel.A,Z:a.lowlevel.Z,D:a.lowlevel.D,unpack25519:a.lowlevel.unpack25519,pow2523:a.lowlevel.pow2523,crypto_verify_32:a.lowlevel.crypto_verify_32,set25519:a.lowlevel.set25519,add:a.lowlevel.add,scalarmult:a.lowlevel.scalarmult};g.hash=a.hash;g.scalarMult=a.scalarMult;g.verify=a.verify;g.lowlevel=b;g.keypairFromSecretKey=a.box.keyPair.fromSecretKey;g.keyPair=a.box.keyPair;g.signDetachedVerify=a.sign.detached.verify}),98);\n__d(\"WACryptoUtils\",[\"WACryptoDependencies\",\"WACryptoPrimitives\",\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function h(a,b){return a.length===0&&b.length===0||d(\"WACryptoPrimitives\").verify(a,b)}function b(a,b){return a.length===0&&b.length===0||d(\"WACryptoPrimitives\").verify(a,b)}function e(a,b){return a.length===0&&b.length===0||d(\"WACryptoPrimitives\").verify(a,b)}function f(a){if(a!==(a|0))throw c(\"WAErr\")(\"bound must be int32\");if(a<=0)throw c(\"WAErr\")(\"bound must not be positive\");var b=new Int32Array(1),e=-1>>>1;e=a*Math.floor(e\/a);var f=-1;while(f===-1){d(\"WACryptoDependencies\").getCrypto().getRandomValues(b);var g=b[0]>>>1;g<e&&(f=g%a)}return f}g.arrayBuffersEqual=a;g.uint8ArraysEqual=h;g.rawKeysEqual=b;g.serializedPubKeysEqual=e;g.randomNumberLessThan=f}),98);\n__d(\"WAFrankingTypes\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a}function b(a){return a}f.castToFrankingTag=a;f.castToFrankingKey=b}),66);\n__d(\"WAPREList\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\")({DECRYPT_MESSAGE_FINAL:\"decrypt_message_final\",FRANKING_VALIDATION:\"franking_validation\",GET_DEVICES:\"get_devices\",MEDIA_DOWNLOAD:\"media_download\",MEDIA_UPLOAD:\"media_upload\",DELETE_THREAD:\"delete_thread\",DOWNLOAD_AND_DECRYPT:\"download_and_decrypt\",MESSAGE_DECRYPTION:\"message_decryption\",MESSAGE_ENCRYPTION:\"message_encryption\",OFFLINE_QUEUE:\"offline_queue\",OFFLINE_RETRY:\"offline_retry\",ICDC_ERROR:\"icdc_error\",QUERY_GROUP:\"query_group\",QUERY_GROUPS:\"query_groups\",RETRY_RECEIPTS_SENT:\"retry_receipts_sent\",SYNCD_FATAL_ERROR:\"syncd_fatal_error\",SYNCD_CRITICAL_EVENT:\"syncd_critical_event\",SYNCD_CRITICAL_BOOTSTRAP_STAGE:\"syncd_critical_bootstrap_stage\",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:\"syncd_bootstrap_app_state_download\",SYNCD_DECRYPT_MUTATIONS:\"syncd_decrypt_mutations\",SYNCD_BOOTSTRAP_DATA_APPLIED:\"syncd_bootstrap_data_applied\",APP_STATE_SYNC_DAILY:\"app_state_sync_daily\",SYNCD:\"syncd\",SEND_MESSAGE:\"send_message\",RECEIVE_MESSAGE:\"receive_message\",SYNCD_KEY_ROTATION:\"syncd_key_rotation\",REMOVE_PARTICIPANTS:\"remove_participants\",CREATE_GROUP:\"create_group\",WA_JOBS_ORCHESTRATOR:\"wa_jobs_orchestrator\",WA_DISCONNECT:\"wa_disconnect\",WA_JOB_MANAGER:\"wa_job_manager\",STANZA_QUEUE_MESSAGE_CONSUMER:\"stanza_queue_message_consumer\",WA_FAIL_STANZA_QUEUE_ITEM:\"stanza_queue_item_failure\",ONE_QUEUE:\"one_queue\",PROTOCOL_QUEUE_CONSUMER:\"protocol_queue_consumer\"});f.PRE_METRIC=a}),66);\n__d(\"WAPREMetrics\",[\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[PRE] \",\" ends with an error \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[PRE] \",\" ends successfully\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[PRE] add point \",\" to \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[PRE] resume \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[PRE] start \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[PRE] There are no subscribers to PRE events\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Removing all listeners from PRE_METRICS\"]);n=function(){return a};return a}var o=0;function a(){var b=[];function c(a){b.push(a)}function e(){d(\"WALogger\").WARN(n()),b.length=0}function a(a){b.length===0&&d(\"WALogger\").WARN(m()),b.forEach(function(b){b(a)})}return{subscribe:c,notify:a,clear:e}}c=a();var p=c.notify;e=c.clear;f=c.subscribe;function b(a,b,c){var e;c==null&&o++;var f=(e=c)!=null?e:o,g=\"open\";c==null?(p({name:a,stage:\"START\",instanceKey:f,annotations:b}),d(\"WALogger\").DEV(l(),a)):(p({name:a,stage:\"RESUME\",instanceKey:f,annotations:b}),d(\"WALogger\").DEV(k(),a));return{addPoint:function(c,b){p({name:a,stage:\"POINT\",reason:c,instanceKey:f,annotations:b}),d(\"WALogger\").DEV(j(),c,a)},addAnnotations:function(b){p({name:a,stage:\"ANNOTATE\",instanceKey:f,annotations:b})},endSuccess:function(b){p({name:a,stage:\"SUCCESS\",instanceKey:f,annotations:b}),g=\"closed\",d(\"WALogger\").DEV(i(),a)},endFail:function(c,b){p({name:a,stage:\"FAIL\",reason:c,instanceKey:f,annotations:b}),g=\"closed\",d(\"WALogger\").DEV(h(),a,c)},getFlowDetails:function(){return{name:a,instanceKey:f}},isActive:function(){return g===\"open\"}}}g.clear=e;g.subscribe=f;g.startMetric=b}),98);\n__d(\"WAFranking\",[\"$InternalEnum\",\"WACryptoDependencies\",\"WACryptoHmac\",\"WACryptoUtils\",\"WAFrankingTypes\",\"WAGlobals\",\"WAPREList\",\"WAPREMetrics\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=32,i=0,j=b(\"$InternalEnum\").Mirrored([\"KEEP\",\"DROP\"]);function a(){var a=new Uint8Array(h);d(\"WACryptoDependencies\").getCrypto().getRandomValues(a);return d(\"WAFrankingTypes\").castToFrankingKey(a)}function c(a){return(a=a)!=null?a:i}function e(a,b){return d(\"WACryptoHmac\").hmacSha256(a,b).then(function(a){return d(\"WAFrankingTypes\").castToFrankingTag(new Uint8Array(a))})}function k(a,c,e,f){var g;return b(\"regeneratorRuntime\").async(function(h){while(1)switch(h.prev=h.next){case 0:h.t0=f;h.next=h.t0===void 0?3:h.t0===0?3:7;break;case 3:h.next=5;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoHmac\").hmacSha256(c,a));case 5:g=h.sent;return h.abrupt(\"return\",d(\"WACryptoUtils\").uint8ArraysEqual(new Uint8Array(g),e));case 7:return h.abrupt(\"return\",!0);case 8:case\"end\":return h.stop()}},null,this)}function f(a,c){var e,f,g,h,i,l,m,n;return b(\"regeneratorRuntime\").async(function(o){while(1)switch(o.prev=o.next){case 0:if(!(!d(\"WAGlobals\").getConfig().isFrankingEnabled()||a.version===\"v3\"&&a.type===\"instamadillo\")){o.next=2;break}return o.abrupt(\"return\",{decision:j.KEEP,updatedReportingMeta:c});case 2:g=d(\"WAGlobals\").getConfig().isFrankingDropOnInvalid();if(!((c==null?void 0:c.frankingTag)!=null&&((e=a.metadata)==null?void 0:e.frankingKey)==null)){o.next=7;break}c.frankingTag=null;c.reportingTag=null;return o.abrupt(\"return\",{decision:j.KEEP,updatedReportingMeta:c});case 7:if(!((c==null?void 0:c.frankingTag)!=null&&a.version===\"v3\"&&a.type===\"subprotocol\"&&((f=a.metadata)==null?void 0:f.frankingKey)!=null&&a.frankingContent!=null)){o.next=24;break}h=c.frankingTag;i=a.frankingContent,l=a.metadata.frankingVersion;m=d(\"WAFrankingTypes\").castToFrankingKey(new Uint8Array(a.metadata.frankingKey));n=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.FRANKING_VALIDATION);if(!(m==null)){o.next=15;break}n.endFail(\"tagButNoKey\");return o.abrupt(\"return\",g?{decision:j.DROP,updatedReportingMeta:c}:{decision:j.KEEP,updatedReportingMeta:c});case 15:o.next=17;return b(\"regeneratorRuntime\").awrap(k(new Uint8Array(i),m,h,l));case 17:if(o.sent){o.next=20;break}n.endFail(\"tagMismatch\");return o.abrupt(\"return\",g?{decision:j.DROP,updatedReportingMeta:c}:{decision:j.KEEP,updatedReportingMeta:c});case 20:c.frankingKey=m;c.reportingContent=i;n.endSuccess();return o.abrupt(\"return\",{decision:j.KEEP,updatedReportingMeta:c});case 24:return o.abrupt(\"return\",d(\"WAGlobals\").getConfig().isFrankingDropOnMissing()?{decision:j.DROP,updatedReportingMeta:c}:{decision:j.KEEP,updatedReportingMeta:c});case 25:case\"end\":return o.stop()}},null,this)}g.FrankingDecision=j;g.createFrankingKey=a;g.getFrankingVersion=c;g.genFrankingTag=e;g.validateFrankingTag=k;g.handleAndValidateFrankingFromIncomingMsg=f}),98);\n__d(\"WAAsMessageApplication\",[\"WAAsConsumerApplication\",\"WAConsumerApplication.pb\",\"WAFranking\",\"WAMsgApplication.pb\",\"encodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b;switch(a.type){default:b=d(\"WAAsConsumerApplication\").asConsumerApplication(a)}var c=a.forwardingScore!=null?a.forwardingScore:0;a=a.isForwarded!=null?a.isForwarded:!1;c={metadata:{chatEphemeralSetting:null,forwardingScore:c,frankingKey:d(\"WAFranking\").createFrankingKey(),frankingVersion:d(\"WAFranking\").getFrankingVersion(),isForwarded:a,quotedMessage:null}};if(b!=null){a=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAConsumerApplication.pb\").ConsumerApplicationSpec,b);c.payload={subProtocol:{consumerMessage:{payload:a.readBuffer(),version:1}}}}return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMsgApplication.pb\").MessageApplicationSpec,c).readByteArray()}function b(a){return a}g.asMessageApplication=a;g.castToMessageApplicationBytes=b}),98);\n__d(\"WAServerRPCLogger\",[\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"WATagsLogger\").TAGS([\"ServerRPC\"]);g.logger=a}),98);\n__d(\"MAWIncomingMsg\",[\"MAWExternalId\",\"WAGlobals\",\"WAHashStringToNumber\",\"WAJids\",\"WAServerRPCLogger\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"WAServerRPCLogger\").logger.TAGS([\"HandleIncomingMsg\"]);b=function(a){var b=a.consumerRetries,c=a.encTypes,e=a.msg,f=a.queueType;a=a.retryCount;return{\"int\":{consumerRetries:(b=b)!=null?b:0,messageAge:d(\"WATimeUtils\").unixTime()-e.ts,msgId:d(\"WAHashStringToNumber\").hashStringToNumber(e.externalId.toString()),offlineDelivery:e.offline,retryCount:a},string:{e2eePlatform:d(\"MAWExternalId\").getPlatform(e.externalId),jid:e.from.chat,msgType:e.type,queueType:f,threadType:e.from.type,userHash:d(\"WAGlobals\").getConfig().isEmployee()&&d(\"WAGlobals\").getConfig().isUseridAnnotationEnabled()?d(\"WAJids\").extractUserId(d(\"WAGlobals\").getMyUserJid()).slice(-5):null},string_array:{encTypes:c}}};g.logger=a;g.prepareAnnotationsForIncomingMessage=b}),98);\n__d(\"WAXmlParsingFailure\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(){function a(a,b){this.parser=a,this.reason=b}var b=a.prototype;b.toString=function(){return\"XmlParsingFailure: \"+this.parser+\": \"+this.reason};return a}();f.XmlParsingFailure=a}),66);\n__d(\"WAParsableXmlNode\",[\"WAErr\",\"WAHasProperty\",\"WAXmlParsingFailure\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(){function a(a,b){var c=this;this.$1=a;this.$2=b;this.$3=Array.isArray(b.content)?b.content.map(function(b){return new c.constructor(a,b)}):null}var b=a.prototype;b.name=function(){return this.$1};b.node=function(){return this.$2};b.hasAttr=function(a){return c(\"WAHasProperty\")(this.$2.attrs,a)};b.assertTag=function(a){this.$2.tag!==a&&this[\"throw\"](\"to be <\"+a+\">\")};b.tag=function(){return this.$2.tag};b.maybeChild=function(a){var b=this.$3;if(!b)return null;for(var c=0;c<b.length;c++)if(b[c].tag()===a)return b[c];return null};b.hasChild=function(a){return!!this.maybeChild(a)};b.child=function(a){var b=this.maybeChild(a);return!b?this[\"throw\"](\"to have child <\"+a+\">\"):b};b.assertAttr=function(a,b){var c=this.attrString(a);c!==b&&this[\"throw\"]('to have \"'+a+'\"=\"'+b+'\", but instead has \"'+c+'\"')};b.attrString=function(a){return!c(\"WAHasProperty\")(this.$2.attrs,a)?this[\"throw\"]('to have attribute \"'+a+'\"'):this.decodeAsString(this.$2.attrs[a])};b.forEachAttributeKey=function(a){var b=this.$2.attrs;Object.keys(b).forEach(function(b){return a(b)})};b.maybeAttrString=function(a){return this.hasAttr(a)?this.decodeAsString(this.$2.attrs[a]):null};b.maybeAttrInt=function(a,b,c){return this.hasAttr(a)?this.attrInt(a,b,c):null};b.attrEnumValues=function(a,b,c){b=new Set(b);var d=this.attrString(a);if(!b.has(d)){if(c!=null)return c;c=Array.from(b).join(\"|\");return this[\"throw\"]('to have \"'+a+'\"={'+c+'} but has value \"'+d+'\"')}return d};b.attrEnum=function(a,b){var d=this.attrString(a);if(!c(\"WAHasProperty\")(b,d)){var e=Object.keys(b).join(\"|\");return this[\"throw\"]('to have \"'+a+'\"={'+e+'} but has value \"'+d+'\"')}return b[d]};b.attrEnumOrNullIfUnknown=function(a,b){a=this.attrString(a);return!c(\"WAHasProperty\")(b,a)?null:b[a]};b.attrEnumOrDefault=function(a,b,c){return this.hasAttr(a)?this.attrEnum(a,b):c};b.attrInt=function(a,b,c){var d=this.attrString(a);return this.$4(d,a,b,c)};b.$4=function(a,b,c,d){var e=parseInt(a,10);if(Number.isNaN(e))return this[\"throw\"]('to have \"'+b+'\"={integer} but has value \"'+a+'\"');else if(c!==void 0&&e<c)return this[\"throw\"]('to have \"'+b+'\"={at least '+c+\"} but has value \"+e);else if(d!==void 0&&e>=d)return this[\"throw\"]('to have \"'+b+'\"={below '+d+\"} but has value \"+e);return e};b.forEachChild=function(a){var b=this.$3;if(b)b.forEach(function(b){return a(b)});else if(this.$2.content!=null)return this[\"throw\"](\"to have children\")};b.forEachChildWithTag=function(a,b){this.forEachChild(function(c){c.tag()===a&&b(c)})};b.mapChildren=function(a){var b=this.$3;return!b&&this.$2.content!=null?this[\"throw\"](\"to have children\"):b?b.map(function(b){return a(b)}):[]};b.mapChildrenWithTag=function(a,b){var c=this.$3;return!c&&this.$2.content!=null?this[\"throw\"](\"to have children\"):c?c.filter(function(b){return b.tag()===a}).map(function(a){return b(a)}):[]};b.mapFirstChild=function(a){var b=this.$3;return!b||b.length===0?this[\"throw\"](\"to have children\"):a(b[0])};b.hasContent=function(){return!this.$3&&!!this.$2.content};b.hasChildren=function(){return this.$3!=null};b.getChildren=function(){return this.$3};b.mapAttrKeys=function(a){var b=this.getAttrKeys();return b&&b.length?b.map(a):[]};b.getAttrKeys=function(){return Object.keys(this.$2.attrs)};b.hasAttrs=function(){var a=this.$2.attrs?Object.keys(this.$2.attrs):[];return a.length>0};b.getNode=function(){return this.$2};b.unsafeSetChildren=function(a){this.$3=a};b.unsafeSetNodeContent=function(a){this.$2.content=a};b.contentUint=function(a){var b=this.contentBytes(a);return h(b,a)};b.contentBytes=function(a){a===void 0&&(a=-1);if(this.$3)return this[\"throw\"](\"to have binary content, but has children instead\");else if(this.$2.content!=null){var b=this.$2.content;return a!==-1&&b.length!==a?this[\"throw\"](\"to be \"+a+\" bytes, but got \"+b.length+\" instead\"):b}else return this[\"throw\"](\"to have content\")};b.contentString=function(){if(this.$3)return this[\"throw\"](\"to have string content, but has children instead\");else if(this.$2.content!=null)return this.$2.content;else return this[\"throw\"](\"to have content\")};b.contentInt=function(a,b){var c=this.contentString();return this.$4(c,\"content\",a,b)};b.contentEnum=function(a){var b=this.contentString();if(!c(\"WAHasProperty\")(a,b)){var d=Object.keys(a).join(\"|\");return this[\"throw\"](\"to have content {\"+d+'} but has value \"'+b+'\"')}return a[b]};b.decodeAsString=function(a){if(typeof a!==\"string\")throw c(\"WAErr\")(\"decodeAsString: attribute is \"+typeof a+\" not a string: \"+a);return a};b[\"throw\"]=function(a){throw new(d(\"WAXmlParsingFailure\").XmlParsingFailure)(this.$1,\"expected <\"+this.$2.tag+\"> \"+a)};b.toString=function(){return this.$2.toString()};return a}();function h(a,b){var c=0;for(var d=0;d<b;d++)c=c*256+a[d];return c}g.ParsableXmlNode=a;g.convertBytesToUint=h}),98);\n__d(\"WASignalLocalStorageProtocol.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={};a.internalSpec={sessionVersion:[1,(d=d(\"WAProtoConst\")).TYPES.UINT32],localIdentityPublic:[2,d.TYPES.BYTES],remoteIdentityPublic:[3,d.TYPES.BYTES],rootKey:[4,d.TYPES.BYTES],previousCounter:[5,d.TYPES.UINT32],senderChain:[6,d.TYPES.MESSAGE,e],receiverChains:[7,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],pendingKeyExchange:[8,d.TYPES.MESSAGE,c],pendingPreKey:[9,d.TYPES.MESSAGE,b],remoteRegistrationId:[10,d.TYPES.UINT32],localRegistrationId:[11,d.TYPES.UINT32],needsRefresh:[12,d.TYPES.BOOL],aliceBaseKey:[13,d.TYPES.BYTES]};b.internalSpec={preKeyId:[1,d.TYPES.UINT32],signedPreKeyId:[3,d.TYPES.INT32],baseKey:[2,d.TYPES.BYTES]};c.internalSpec={sequence:[1,d.TYPES.UINT32],localBaseKey:[2,d.TYPES.BYTES],localBaseKeyPrivate:[3,d.TYPES.BYTES],localRatchetKey:[4,d.TYPES.BYTES],localRatchetKeyPrivate:[5,d.TYPES.BYTES],localIdentityKey:[7,d.TYPES.BYTES],localIdentityKeyPrivate:[8,d.TYPES.BYTES]};e.internalSpec={senderRatchetKey:[1,d.TYPES.BYTES],senderRatchetKeyPrivate:[2,d.TYPES.BYTES],chainKey:[3,d.TYPES.MESSAGE,h],messageKeys:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f]};f.internalSpec={index:[1,d.TYPES.UINT32],cipherKey:[2,d.TYPES.BYTES],macKey:[3,d.TYPES.BYTES],iv:[4,d.TYPES.BYTES]};h.internalSpec={index:[1,d.TYPES.UINT32],key:[2,d.TYPES.BYTES]};i.internalSpec={currentSession:[1,d.TYPES.MESSAGE,a],previousSessions:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,a]};j.internalSpec={id:[1,d.TYPES.UINT32],publicKey:[2,d.TYPES.BYTES],privateKey:[3,d.TYPES.BYTES]};k.internalSpec={id:[1,d.TYPES.UINT32],publicKey:[2,d.TYPES.BYTES],privateKey:[3,d.TYPES.BYTES],signature:[4,d.TYPES.BYTES],timestamp:[5,d.TYPES.FIXED64]};l.internalSpec={publicKey:[1,d.TYPES.BYTES],privateKey:[2,d.TYPES.BYTES]};m.internalSpec={senderKeyId:[1,d.TYPES.UINT32],senderChainKey:[2,d.TYPES.MESSAGE,p],senderSigningKey:[3,d.TYPES.MESSAGE,n],senderMessageKeys:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,o]};n.internalSpec={\"public\":[1,d.TYPES.BYTES],\"private\":[2,d.TYPES.BYTES]};o.internalSpec={iteration:[1,d.TYPES.UINT32],seed:[2,d.TYPES.BYTES]};p.internalSpec={iteration:[1,d.TYPES.UINT32],seed:[2,d.TYPES.BYTES]};q.internalSpec={senderKeyStates:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};g.SessionStructureSpec=a;g.SessionStructure$PendingPreKeySpec=b;g.SessionStructure$PendingKeyExchangeSpec=c;g.SessionStructure$ChainSpec=e;g.SessionStructure$Chain$MessageKeySpec=f;g.SessionStructure$Chain$ChainKeySpec=h;g.RecordStructureSpec=i;g.PreKeyRecordStructureSpec=j;g.SignedPreKeyRecordStructureSpec=k;g.IdentityKeyPairStructureSpec=l;g.SenderKeyStateStructureSpec=m;g.SenderKeyStateStructure$SenderSigningKeySpec=n;g.SenderKeyStateStructure$SenderMessageKeySpec=o;g.SenderKeyStateStructure$SenderChainKeySpec=p;g.SenderKeyRecordStructureSpec=q}),98);\n__d(\"WACryptoHkdf\",[\"Promise\",\"WABinary\",\"WACryptoHmac\",\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=255*d(\"WACryptoHmac\").SHA256_BYTE_LENGTH;function j(a,e,f){if(f<0||f>i)return(h||(h=b(\"Promise\"))).reject(c(\"WAErr\")(\"HKDF::expand given bad length \"+f));var g,j=Math.ceil(f\/d(\"WACryptoHmac\").SHA256_BYTE_LENGTH),k=d(\"WABinary\").Binary.build(e).readByteArray(),l=new(d(\"WABinary\").Binary)(),m=d(\"WACryptoHmac\").encodeKeySha256(a).then(function(a){g=a;return new Uint8Array(0)});e=function(a){m=m.then(function(b){return d(\"WACryptoHmac\").sign(g,d(\"WABinary\").Binary.build(b,k,a).readByteArray())}).then(function(a){a=new Uint8Array(a);l.writeByteArray(a);return a})};for(a=1;a<=j;a++)e(a);return m.then(function(){return l.readBuffer(f)})}function a(a,b,c){return d(\"WACryptoHmac\").extractSha256(null,a).then(function(a){return j(new Uint8Array(a),b,c)})}function e(a,b,c,e){return d(\"WACryptoHmac\").extractSha256(b,a).then(function(a){return j(new Uint8Array(a),c,e)})}g.expand=j;g.extractAndExpand=a;g.extractWithSaltAndExpand=e}),98);\n__d(\"WASignalOther\",[\"WACryptoDependencies\",\"WACryptoHkdf\",\"WACryptoUtils\",\"WAErr\",\"WAParsableXmlNode\",\"decodeProtobuf\",\"encodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={name:\"AES-CBC\"},i={name:\"HMAC\",hash:\"SHA-256\"};function j(a,b){if(a.length!==b)throw c(\"WAErr\")(\"Signal expected \"+b+\" bytes, given \"+a.length);return a}function a(a,b){return j(new Uint8Array(a),b)}function b(a){var b=a.buffer,c=a.byteOffset;a=a.length;return c===0&&a===b.byteLength?b:b.slice(c,c+a)}function e(a,b){return a.readByteArray(b)}function f(a){return new Uint8Array(a)}function k(a,b,d){if(a.length-b<d)throw c(\"WAErr\")(\"Can not split off \"+d+\" bytes from index \"+b+\" of \"+a.length+\" bytes\");return a.slice(b,b+d)}function l(a){a=a===\"extendedRange\"?(-1>>>1)-1:16380;return d(\"WACryptoUtils\").randomNumberLessThan(a)+1}function m(a){return q(a)}function n(a){return d(\"WAParsableXmlNode\").convertBytesToUint(a,4)}function o(){var a=-1>>>1;return d(\"WACryptoUtils\").randomNumberLessThan(a)+1}function p(a){return q(a)}function q(a,b,d){b===void 0&&(b=0);d===void 0&&(d=4294967296);if(typeof a===\"number\"&&b<=a&&a<d&&Math.floor(a)===a)return a;else throw c(\"WAErr\")(\"Expected integer in range [\"+b+\", \"+d+\"), given \"+String(a))}function r(a,b){return d(\"encodeProtobuf\").encodeProtobuf(a,b).readByteArray()}function s(a,b,c){return c(d(\"decodeProtobuf\").decodeProtobuf(a,b))}function t(a,b,c,e){return d(\"WACryptoHkdf\").extractWithSaltAndExpand(a,b,c,e).then(function(a){return new Uint8Array(a)})}function u(a,b){var c,e;b===\"hmac-sha256\"?(c=i,e=[\"sign\"]):(b,c=h,e=[\"encrypt\",\"decrypt\"]);return d(\"WACryptoDependencies\").getCrypto().subtle.importKey(\"raw\",a,c,!1,e)}function v(a){return a}function w(a){return a}function x(a,b){return d(\"WACryptoUtils\").arrayBuffersEqual(a,b)}g.AES_CBC=h;g.HMAC_SHA256=i;g.ensureSize=j;g.toBytes=a;g.toBuffer=b;g.readBytes=e;g.makeBytes=f;g.sliceBytes=k;g.makeRegistrationId=l;g.castRegistrationId=m;g.castRegistrationIdFromBytes=n;g.makeSenderKeyId=o;g.castSenderKeyId=p;g.ensureIntInRange=q;g.encodeSignalProto=r;g.decodeSignalProto=s;g.hkdf=t;g.makeCryptoKey=u;g.castToByteEncoded=v;g.castToSessionHash=w;g.areSessionHashesEqual=x}),98);\n__d(\"WASignalKeys\",[\"WACryptoDependencies\",\"WACryptoPrimitives\",\"WAErr\",\"WALogger\",\"WASignalLocalStorageProtocol.pb\",\"WASignalOther\",\"decodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"deserializePreKey error \",\"\"]);h=function(){return a};return a}var i=5,j=16777215;function k(a,b){return{publicKey:a,privateKey:b}}function a(a){a=d(\"WACryptoPrimitives\").keypairFromSecretKey(a);var b=a.publicKey;a=a.secretKey;return k(d(\"WASignalOther\").ensureSize(b,32),d(\"WASignalOther\").ensureSize(a,32))}function b(a,b){return{publicKey:d(\"WASignalOther\").toBytes(a,32),privateKey:d(\"WASignalOther\").toBytes(b,32)}}function l(){var a=d(\"WACryptoPrimitives\").keyPair(),b=a.publicKey;a=a.secretKey;a[0]&=248;a[31]=64|a[31]&63;return k(d(\"WASignalOther\").ensureSize(b,32),d(\"WASignalOther\").ensureSize(a,32))}function m(a,b){return k(d(\"WASignalOther\").sliceBytes(b,1,32),a)}function n(a,b){return{serializedPubKey:b,privateKey:a}}function e(){var a=l();return n(a.privateKey,o(a))}function o(a){var b=d(\"WASignalOther\").makeBytes(33);b[0]=i;b.set(a.publicKey,1);return b}function f(a){var b=d(\"WASignalOther\").makeBytes(33);b[0]=i;b.set(d(\"WASignalOther\").ensureSize(a,32),1);return b}function p(a){return n(a.privateKey,o(a))}function q(a,b){a=(a-1)%j;a<=0&&(a+=j);var c=[];for(var e=0;e<b;e++){var f=a===j?1:a+1,g=l(),h=d(\"WASignalOther\").encodeSignalProto(d(\"WASignalLocalStorageProtocol.pb\").PreKeyRecordStructureSpec,{id:f,publicKey:o(g),privateKey:g.privateKey});c.push({plainObject:{id:f,keyPair:g},record:h});a=f}return c}function r(a){try{a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WASignalLocalStorageProtocol.pb\").PreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey;a=a.privateKey;return b==null||c==null||a==null?null:{id:s(b),keyPair:m(d(\"WASignalOther\").toBytes(a,32),u(new Uint8Array(c)))}}catch(a){d(\"WALogger\").DEV(h(),a);return null}}function s(a){return d(\"WASignalOther\").ensureIntInRange(a,1,j)}function t(a){return d(\"WASignalOther\").ensureIntInRange(a,0,j)}function u(a){if(a.length===0||a[0]!==i)throw c(\"WAErr\")(\"Unrecognized public key type\");return d(\"WASignalOther\").ensureSize(a,33)}function v(){var a=d(\"WASignalOther\").makeBytes(32);d(\"WACryptoDependencies\").getCrypto().getRandomValues(a);return a}function w(a,b){return d(\"WACryptoPrimitives\").scalarMult(a,b.subarray(1)).buffer}g.KEY_TYPE=i;g.makeKeyPairFrom=a;g.makeKeyPairFromArrayBuffers=b;g.makeKeyPair=l;g.makeKeyPairFromSerialized=m;g.makeSerializedKeyPairFrom=n;g.makeSerializedKeyPair=e;g.serializePubKey=o;g.serializeIdentity=f;g.toSerializedKeyPair=p;g.makePreKeys=q;g.deserializePreKey=r;g.castToPreKeyId=s;g.castToSignedPreKeyId=t;g.castToSerializedPubKey=u;g.makeRawSenderKey=v;g.ecdh=w}),98);\n__d(\"WATextEncoding\",[],(function(a,b,c,d,e,f){\"use strict\";e=TextEncoder;var g=TextDecoder,h=e,i=g;function a(){return new h()}function b(){return new i()}function c(a){h=a}function d(a){i=a}f.newTextEncoder=a;f.newTextDecoder=b;f.setTextEncoderClass=c;f.setTextDecoderClass=d}),66);\n__d(\"WAWapDict\",[],(function(a,b,c,d,e,f){a=3;b=[\"xmlstreamstart\",\"xmlstreamend\",\"s.whatsapp.net\",\"type\",\"participant\",\"from\",\"receipt\",\"id\",\"notification\",\"disappearing_mode\",\"status\",\"jid\",\"broadcast\",\"user\",\"devices\",\"device_hash\",\"to\",\"offline\",\"message\",\"result\",\"class\",\"xmlns\",\"duration\",\"notify\",\"iq\",\"t\",\"ack\",\"g.us\",\"enc\",\"urn:xmpp:whatsapp:push\",\"presence\",\"config_value\",\"picture\",\"verified_name\",\"config_code\",\"key-index-list\",\"contact\",\"mediatype\",\"routing_info\",\"edge_routing\",\"get\",\"read\",\"urn:xmpp:ping\",\"fallback_hostname\",\"0\",\"chatstate\",\"business_hours_config\",\"unavailable\",\"download_buckets\",\"skmsg\",\"verified_level\",\"composing\",\"handshake\",\"device-list\",\"media\",\"text\",\"fallback_ip4\",\"media_conn\",\"device\",\"creation\",\"location\",\"config\",\"item\",\"fallback_ip6\",\"count\",\"w:profile:picture\",\"image\",\"business\",\"2\",\"hostname\",\"call-creator\",\"display_name\",\"relaylatency\",\"platform\",\"abprops\",\"success\",\"msg\",\"offline_preview\",\"prop\",\"key-index\",\"v\",\"day_of_week\",\"pkmsg\",\"version\",\"1\",\"ping\",\"w:p\",\"download\",\"video\",\"set\",\"specific_hours\",\"props\",\"primary\",\"unknown\",\"hash\",\"commerce_experience\",\"last\",\"subscribe\",\"max_buckets\",\"call\",\"profile\",\"member_since_text\",\"close_time\",\"call-id\",\"sticker\",\"mode\",\"participants\",\"value\",\"query\",\"profile_options\",\"open_time\",\"code\",\"list\",\"host\",\"ts\",\"contacts\",\"upload\",\"lid\",\"preview\",\"update\",\"usync\",\"w:stats\",\"delivery\",\"auth_ttl\",\"context\",\"fail\",\"cart_enabled\",\"appdata\",\"category\",\"atn\",\"direct_connection\",\"decrypt-fail\",\"relay_id\",\"mmg-fallback.whatsapp.net\",\"target\",\"available\",\"name\",\"last_id\",\"mmg.whatsapp.net\",\"categories\",\"401\",\"is_new\",\"index\",\"tctoken\",\"ip4\",\"token_id\",\"latency\",\"recipient\",\"edit\",\"ip6\",\"add\",\"thumbnail-document\",\"26\",\"paused\",\"true\",\"identity\",\"stream:error\",\"key\",\"sidelist\",\"background\",\"audio\",\"3\",\"thumbnail-image\",\"biz-cover-photo\",\"cat\",\"gcm\",\"thumbnail-video\",\"error\",\"auth\",\"deny\",\"serial\",\"in\",\"registration\",\"thumbnail-link\",\"remove\",\"00\",\"gif\",\"thumbnail-gif\",\"tag\",\"capability\",\"multicast\",\"item-not-found\",\"description\",\"business_hours\",\"config_expo_key\",\"md-app-state\",\"expiration\",\"fallback\",\"ttl\",\"300\",\"md-msg-hist\",\"device_orientation\",\"out\",\"w:m\",\"open_24h\",\"side_list\",\"token\",\"inactive\",\"01\",\"document\",\"te2\",\"played\",\"encrypt\",\"msgr\",\"hide\",\"direct_path\",\"12\",\"state\",\"not-authorized\",\"url\",\"terminate\",\"signature\",\"status-revoke-delay\",\"02\",\"te\",\"linked_accounts\",\"trusted_contact\",\"timezone\",\"ptt\",\"kyc-id\",\"privacy_token\",\"readreceipts\",\"appointment_only\",\"address\",\"expected_ts\",\"privacy\",\"7\",\"android\",\"interactive\",\"device-identity\",\"enabled\",\"attribute_padding\",\"1080\",\"03\",\"screen_height\"];c=[\"read-self\",\"active\",\"fbns\",\"protocol\",\"reaction\",\"screen_width\",\"heartbeat\",\"deviceid\",\"2:47DEQpj8\",\"uploadfieldstat\",\"voip_settings\",\"retry\",\"priority\",\"longitude\",\"conflict\",\"false\",\"ig_professional\",\"replaced\",\"preaccept\",\"cover_photo\",\"uncompressed\",\"encopt\",\"ppic\",\"04\",\"passive\",\"status-revoke-drop\",\"keygen\",\"540\",\"offer\",\"rate\",\"opus\",\"latitude\",\"w:gp2\",\"ver\",\"4\",\"business_profile\",\"medium\",\"sender\",\"prev_v_id\",\"email\",\"website\",\"invited\",\"sign_credential\",\"05\",\"transport\",\"skey\",\"reason\",\"peer_abtest_bucket\",\"America\/Sao_Paulo\",\"appid\",\"refresh\",\"100\",\"06\",\"404\",\"101\",\"104\",\"107\",\"102\",\"109\",\"103\",\"member_add_mode\",\"105\",\"transaction-id\",\"110\",\"106\",\"outgoing\",\"108\",\"111\",\"tokens\",\"followers\",\"ig_handle\",\"self_pid\",\"tue\",\"dec\",\"thu\",\"joinable\",\"peer_pid\",\"mon\",\"features\",\"wed\",\"peer_device_presence\",\"pn\",\"delete\",\"07\",\"fri\",\"audio_duration\",\"admin\",\"connected\",\"delta\",\"rcat\",\"disable\",\"collection\",\"08\",\"480\",\"sat\",\"phash\",\"all\",\"invite\",\"accept\",\"critical_unblock_low\",\"group_update\",\"signed_credential\",\"blinded_credential\",\"eph_setting\",\"net\",\"09\",\"background_location\",\"refresh_id\",\"Asia\/Kolkata\",\"privacy_mode_ts\",\"account_sync\",\"voip_payload_type\",\"service_areas\",\"acs_public_key\",\"v_id\",\"0a\",\"fallback_class\",\"relay\",\"actual_actors\",\"metadata\",\"w:biz\",\"5\",\"connected-limit\",\"notice\",\"0b\",\"host_storage\",\"fb_page\",\"subject\",\"privatestats\",\"invis\",\"groupadd\",\"010\",\"note.m4r\",\"uuid\",\"0c\",\"8000\",\"sun\",\"372\",\"1020\",\"stage\",\"1200\",\"720\",\"canonical\",\"fb\",\"011\",\"video_duration\",\"0d\",\"1140\",\"superadmin\",\"012\",\"Opening.m4r\",\"keystore_attestation\",\"dleq_proof\",\"013\",\"timestamp\",\"ab_key\",\"w:sync:app:state\",\"0e\",\"vertical\",\"600\",\"p_v_id\",\"6\",\"likes\",\"014\",\"500\",\"1260\",\"creator\",\"0f\",\"rte\",\"destination\",\"group\",\"group_info\",\"syncd_anti_tampering_fatal_exception_enabled\",\"015\",\"dl_bw\",\"Asia\/Jakarta\",\"vp8\/h.264\",\"online\",\"1320\",\"fb:multiway\",\"10\",\"timeout\",\"016\",\"nse_retry\",\"urn:xmpp:whatsapp:dirty\",\"017\",\"a_v_id\",\"web_shops_chat_header_button_enabled\",\"nse_call\",\"inactive-upgrade\",\"none\",\"web\",\"groups\",\"2250\",\"mms_hot_content_timespan_in_seconds\",\"contact_blacklist\",\"nse_read\",\"suspended_group_deletion_notification\",\"binary_version\",\"018\",\"https:\/\/www.whatsapp.com\/otp\/copy\/\",\"reg_push\",\"shops_hide_catalog_attachment_entrypoint\",\"server_sync\",\".\",\"ephemeral_messages_allowed_values\",\"019\",\"mms_vcache_aggregation_enabled\",\"iphone\",\"America\/Argentina\/Buenos_Aires\",\"01a\",\"mms_vcard_autodownload_size_kb\",\"nse_ver\",\"shops_header_dropdown_menu_item\",\"dhash\",\"catalog_status\",\"communities_mvp_new_iqs_serverprop\",\"blocklist\",\"default\",\"11\",\"ephemeral_messages_enabled\",\"01b\",\"original_dimensions\",\"8\",\"mms4_media_retry_notification_encryption_enabled\",\"mms4_server_error_receipt_encryption_enabled\",\"original_image_url\",\"sync\",\"multiway\",\"420\",\"companion_enc_static\",\"shops_profile_drawer_entrypoint\",\"01c\",\"vcard_as_document_size_kb\",\"status_video_max_duration\",\"request_image_url\",\"01d\",\"regular_high\",\"s_t\",\"abt\",\"share_ext_min_preliminary_image_quality\",\"01e\",\"32\",\"syncd_key_rotation_enabled\",\"data_namespace\",\"md_downgrade_read_receipts2\",\"patch\",\"polltype\",\"ephemeral_messages_setting\",\"userrate\",\"15\",\"partial_pjpeg_bw_threshold\",\"played-self\",\"catalog_exists\",\"01f\",\"mute_v2\"];d=[\"reject\",\"dirty\",\"announcement\",\"020\",\"13\",\"9\",\"status_video_max_bitrate\",\"fb:thrift_iq\",\"offline_batch\",\"022\",\"full\",\"ctwa_first_business_reply_logging\",\"h.264\",\"smax_id\",\"group_description_length\",\"https:\/\/www.whatsapp.com\/otp\/code\",\"status_image_max_edge\",\"smb_upsell_business_profile_enabled\",\"021\",\"web_upgrade_to_md_modal\",\"14\",\"023\",\"s_o\",\"smaller_video_thumbs_status_enabled\",\"media_max_autodownload\",\"960\",\"blocking_status\",\"peer_msg\",\"joinable_group_call_client_version\",\"group_call_video_maximization_enabled\",\"return_snapshot\",\"high\",\"America\/Mexico_City\",\"entry_point_block_logging_enabled\",\"pop\",\"024\",\"1050\",\"16\",\"1380\",\"one_tap_calling_in_group_chat_size\",\"regular_low\",\"inline_joinable_education_enabled\",\"hq_image_max_edge\",\"locked\",\"America\/Bogota\",\"smb_biztools_deeplink_enabled\",\"status_image_quality\",\"1088\",\"025\",\"payments_upi_intent_transaction_limit\",\"voip\",\"w:g2\",\"027\",\"md_pin_chat_enabled\",\"026\",\"multi_scan_pjpeg_download_enabled\",\"shops_product_grid\",\"transaction_id\",\"ctwa_context_enabled\",\"20\",\"fna\",\"hq_image_quality\",\"alt_jpeg_doc_detection_quality\",\"group_call_max_participants\",\"pkey\",\"America\/Belem\",\"image_max_kbytes\",\"web_cart_v1_1_order_message_changes_enabled\",\"ctwa_context_enterprise_enabled\",\"urn:xmpp:whatsapp:account\",\"840\",\"Asia\/Kuala_Lumpur\",\"max_participants\",\"video_remux_after_repair_enabled\",\"stella_addressbook_restriction_type\",\"660\",\"900\",\"780\",\"context_menu_ios13_enabled\",\"mute-state\",\"ref\",\"payments_request_messages\",\"029\",\"frskmsg\",\"vcard_max_size_kb\",\"sample_buffer_gif_player_enabled\",\"match_last_seen\",\"510\",\"4983\",\"video_max_bitrate\",\"028\",\"w:comms:chat\",\"17\",\"frequently_forwarded_max\",\"groups_privacy_blacklist\",\"Asia\/Karachi\",\"02a\",\"web_download_document_thumb_mms_enabled\",\"02b\",\"hist_sync\",\"biz_block_reasons_version\",\"1024\",\"18\",\"web_is_direct_connection_for_plm_transparent\",\"view_once_write\",\"file_max_size\",\"paid_convo_id\",\"online_privacy_setting\",\"video_max_edge\",\"view_once_read\",\"enhanced_storage_management\",\"multi_scan_pjpeg_encoding_enabled\",\"ctwa_context_forward_enabled\",\"video_transcode_downgrade_enable\",\"template_doc_mime_types\",\"hq_image_bw_threshold\",\"30\",\"body\",\"u_aud_limit_sil_restarts_ctrl\",\"other\",\"participating\",\"w:biz:directory\",\"1110\",\"vp8\",\"4018\",\"meta\",\"doc_detection_image_max_edge\",\"image_quality\",\"1170\",\"02c\",\"smb_upsell_chat_banner_enabled\",\"key_expiry_time_second\",\"pid\",\"stella_interop_enabled\",\"19\",\"linked_device_max_count\",\"md_device_sync_enabled\",\"02d\",\"02e\",\"360\",\"enhanced_block_enabled\",\"ephemeral_icon_in_forwarding\",\"paid_convo_status\",\"gif_provider\",\"project_name\",\"server-error\",\"canonical_url_validation_enabled\",\"wallpapers_v2\",\"syncd_clear_chat_delete_chat_enabled\",\"medianotify\",\"02f\",\"shops_required_tos_version\",\"vote\",\"reset_skey_on_id_change\",\"030\",\"image_max_edge\",\"multicast_limit_global\",\"ul_bw\",\"21\",\"25\",\"5000\",\"poll\",\"570\",\"22\",\"031\",\"1280\",\"WhatsApp\",\"032\",\"bloks_shops_enabled\",\"50\",\"upload_host_switching_enabled\",\"web_ctwa_context_compose_enabled\",\"ptt_forwarded_features_enabled\",\"unblocked\",\"partial_pjpeg_enabled\",\"fbid:devices\",\"height\",\"ephemeral_group_query_ts\",\"group_join_permissions\",\"order\",\"033\",\"alt_jpeg_status_quality\",\"migrate\",\"popular-bank\",\"win_uwp_deprecation_killswitch_enabled\",\"web_download_status_thumb_mms_enabled\",\"blocking\",\"url_text\",\"035\",\"web_forwarding_limit_to_groups\",\"1600\",\"val\",\"1000\",\"syncd_msg_date_enabled\",\"bank-ref-id\",\"max_subject\",\"payments_web_enabled\",\"web_upload_document_thumb_mms_enabled\",\"size\",\"request\",\"ephemeral\",\"24\",\"receipt_agg\",\"ptt_remember_play_position\",\"sampling_weight\",\"enc_rekey\",\"mute_always\",\"037\",\"034\",\"23\",\"036\",\"action\",\"click_to_chat_qr_enabled\",\"width\",\"disabled\",\"038\",\"md_blocklist_v2\",\"played_self_enabled\",\"web_buttons_message_enabled\",\"flow_id\",\"clear\",\"450\",\"fbid:thread\",\"bloks_session_state\",\"America\/Lima\",\"attachment_picker_refresh\",\"download_host_switching_enabled\",\"1792\",\"u_aud_limit_sil_restarts_test2\",\"custom_urls\",\"device_fanout\",\"optimistic_upload\",\"2000\",\"key_cipher_suite\",\"web_smb_upsell_in_biz_profile_enabled\",\"e\",\"039\",\"siri_post_status_shortcut\",\"pair-device\",\"lg\",\"lc\",\"stream_attribution_url\",\"model\",\"mspjpeg_phash_gen\",\"catalog_send_all\",\"new_multi_vcards_ui\",\"share_biz_vcard_enabled\",\"-\",\"clean\",\"200\",\"md_blocklist_v2_server\",\"03b\",\"03a\",\"web_md_migration_experience\",\"ptt_conversation_waveform\",\"u_aud_limit_sil_restarts_test1\"];e=[\"64\",\"ptt_playback_speed_enabled\",\"web_product_list_message_enabled\",\"paid_convo_ts\",\"27\",\"manufacturer\",\"psp-routing\",\"grp_uii_cleanup\",\"ptt_draft_enabled\",\"03c\",\"business_initiated\",\"web_catalog_products_onoff\",\"web_upload_link_thumb_mms_enabled\",\"03e\",\"mediaretry\",\"35\",\"hfm_string_changes\",\"28\",\"America\/Fortaleza\",\"max_keys\",\"md_mhfs_days\",\"streaming_upload_chunk_size\",\"5541\",\"040\",\"03d\",\"2675\",\"03f\",\"...\",\"512\",\"mute\",\"48\",\"041\",\"alt_jpeg_quality\",\"60\",\"042\",\"md_smb_quick_reply\",\"5183\",\"c\",\"1343\",\"40\",\"1230\",\"043\",\"044\",\"mms_cat_v1_forward_hot_override_enabled\",\"user_notice\",\"ptt_waveform_send\",\"047\",\"Asia\/Calcutta\",\"250\",\"md_privacy_v2\",\"31\",\"29\",\"128\",\"md_messaging_enabled\",\"046\",\"crypto\",\"690\",\"045\",\"enc_iv\",\"75\",\"failure\",\"ptt_oot_playback\",\"AIzaSyDR5yfaG7OG8sMTUj8kfQEb8T9pN8BM6Lk\",\"w\",\"048\",\"2201\",\"web_large_files_ui\",\"Asia\/Makassar\",\"812\",\"status_collapse_muted\",\"1334\",\"257\",\"2HP4dm\",\"049\",\"patches\",\"1290\",\"43cY6T\",\"America\/Caracas\",\"web_sticker_maker\",\"campaign\",\"ptt_pausable_enabled\",\"33\",\"42\",\"attestation\",\"biz\",\"04b\",\"query_linked\",\"s\",\"125\",\"04a\",\"810\",\"availability\",\"1411\",\"responsiveness_v2_m1\",\"catalog_not_created\",\"34\",\"America\/Santiago\",\"1465\",\"enc_p\",\"04d\",\"status_info\",\"04f\",\"key_version\",\"..\",\"04c\",\"04e\",\"md_group_notification\",\"1598\",\"1215\",\"web_cart_enabled\",\"37\",\"630\",\"1920\",\"2394\",\"-1\",\"vcard\",\"38\",\"elapsed\",\"36\",\"828\",\"peer\",\"pricing_category\",\"1245\",\"invalid\",\"stella_ios_enabled\",\"2687\",\"45\",\"1528\",\"39\",\"u_is_redial_audio_1104_ctrl\",\"1025\",\"1455\",\"58\",\"2524\",\"2603\",\"054\",\"bsp_system_message_enabled\",\"web_pip_redesign\",\"051\",\"verify_apps\",\"1974\",\"1272\",\"1322\",\"1755\",\"052\",\"70\",\"050\",\"1063\",\"1135\",\"1361\",\"80\",\"1096\",\"1828\",\"1851\",\"1251\",\"1921\",\"key_config_id\",\"1254\",\"1566\",\"1252\",\"2525\",\"critical_block\",\"1669\",\"max_available\",\"w:auth:backup:token\",\"product\",\"2530\",\"870\",\"1022\",\"participant_uuid\",\"web_cart_on_off\",\"1255\",\"1432\",\"1867\",\"41\",\"1415\",\"1440\",\"240\",\"1204\",\"1608\",\"1690\",\"1846\",\"1483\",\"1687\",\"1749\",\"69\",\"url_number\",\"053\",\"1325\",\"1040\",\"365\",\"59\",\"Asia\/Riyadh\",\"1177\",\"test_recommended\",\"057\",\"1612\",\"43\",\"1061\",\"1518\",\"1635\",\"055\",\"1034\",\"1375\",\"750\",\"1430\",\"event_code\",\"1682\",\"503\",\"55\",\"865\",\"78\",\"1309\",\"1365\",\"44\",\"America\/Guayaquil\",\"535\",\"LIMITED\",\"1377\",\"1613\",\"1420\",\"1599\",\"1822\",\"05a\",\"1681\",\"password\",\"1111\",\"1214\",\"1376\",\"1478\",\"47\",\"1082\",\"4282\",\"Europe\/Istanbul\",\"1307\",\"46\",\"058\",\"1124\",\"256\",\"rate-overlimit\",\"retail\",\"u_a_socket_err_fix_succ_test\",\"1292\",\"1370\",\"1388\",\"520\",\"861\",\"psa\",\"regular\",\"1181\",\"1766\",\"05b\",\"1183\",\"1213\",\"1304\",\"1537\"];var g=[\"1724\",\"profile_picture\",\"1071\",\"1314\",\"1605\",\"407\",\"990\",\"1710\",\"746\",\"pricing_model\",\"056\",\"059\",\"061\",\"1119\",\"6027\",\"65\",\"877\",\"1607\",\"05d\",\"917\",\"seen\",\"1516\",\"49\",\"470\",\"973\",\"1037\",\"1350\",\"1394\",\"1480\",\"1796\",\"keys\",\"794\",\"1536\",\"1594\",\"2378\",\"1333\",\"1524\",\"1825\",\"116\",\"309\",\"52\",\"808\",\"827\",\"909\",\"495\",\"1660\",\"361\",\"957\",\"google\",\"1357\",\"1565\",\"1967\",\"996\",\"1775\",\"586\",\"736\",\"1052\",\"1670\",\"bank\",\"177\",\"1416\",\"2194\",\"2222\",\"1454\",\"1839\",\"1275\",\"53\",\"997\",\"1629\",\"6028\",\"smba\",\"1378\",\"1410\",\"05c\",\"1849\",\"727\",\"create\",\"1559\",\"536\",\"1106\",\"1310\",\"1944\",\"670\",\"1297\",\"1316\",\"1762\",\"en\",\"1148\",\"1295\",\"1551\",\"1853\",\"1890\",\"1208\",\"1784\",\"7200\",\"05f\",\"178\",\"1283\",\"1332\",\"381\",\"643\",\"1056\",\"1238\",\"2024\",\"2387\",\"179\",\"981\",\"1547\",\"1705\",\"05e\",\"290\",\"903\",\"1069\",\"1285\",\"2436\",\"062\",\"251\",\"560\",\"582\",\"719\",\"56\",\"1700\",\"2321\",\"325\",\"448\",\"613\",\"777\",\"791\",\"51\",\"488\",\"902\",\"Asia\/Almaty\",\"is_hidden\",\"1398\",\"1527\",\"1893\",\"1999\",\"2367\",\"2642\",\"237\",\"busy\",\"065\",\"067\",\"233\",\"590\",\"993\",\"1511\",\"54\",\"723\",\"860\",\"363\",\"487\",\"522\",\"605\",\"995\",\"1321\",\"1691\",\"1865\",\"2447\",\"2462\",\"NON_TRANSACTIONAL\",\"433\",\"871\",\"432\",\"1004\",\"1207\",\"2032\",\"2050\",\"2379\",\"2446\",\"279\",\"636\",\"703\",\"904\",\"248\",\"370\",\"691\",\"700\",\"1068\",\"1655\",\"2334\",\"060\",\"063\",\"364\",\"533\",\"534\",\"567\",\"1191\",\"1210\",\"1473\",\"1827\",\"069\",\"701\",\"2531\",\"514\",\"prev_dhash\",\"064\",\"496\",\"790\",\"1046\",\"1139\",\"1505\",\"1521\",\"1108\",\"207\",\"544\",\"637\",\"final\",\"1173\",\"1293\",\"1694\",\"1939\",\"1951\",\"1993\",\"2353\",\"2515\",\"504\",\"601\",\"857\",\"modify\",\"spam_request\",\"p_121_aa_1101_test4\",\"866\",\"1427\",\"1502\",\"1638\",\"1744\",\"2153\",\"068\",\"382\",\"725\",\"1704\",\"1864\",\"1990\",\"2003\",\"Asia\/Dubai\",\"508\",\"531\",\"1387\",\"1474\",\"1632\",\"2307\",\"2386\",\"819\",\"2014\",\"066\",\"387\",\"1468\",\"1706\",\"2186\",\"2261\",\"471\",\"728\",\"1147\",\"1372\",\"1961\"],h=[c,d,e,g];f.DICT_VERSION=a;f.SINGLE_BYTE_TOKEN=b;f.DICTIONARY_0_TOKEN=c;f.DICTIONARY_1_TOKEN=d;f.DICTIONARY_2_TOKEN=e;f.DICTIONARY_3_TOKEN=g;f.DICTIONARIES=h}),66);\n__d(\"WAWapJid\",[\"$InternalEnum\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={JID:0,JID_U:1,JID_AD:1,JID_FB:3,JID_INTEROP:4},i=b(\"$InternalEnum\")({WHATSAPP:0,LID:1,HOSTED:128,HOSTED_LID:129});a=function(){function a(a){this.$1=a}a.createAD=function(b,c,d){return new a({type:h.JID_AD,user:b,device:d==null?0:d,agent:c==null?0:c,domainType:i.WHATSAPP})};a.createJidU=function(b,c,d){return new a({type:h.JID_U,user:b,device:d==null?0:d,domainType:c==null?i.WHATSAPP:c})};a.createFbJid=function(b,c){c=c==null?0:c;return new a({type:h.JID_FB,user:b,device:c})};a.createInteropJid=function(b,c,d){c=c==null?0:c;return new a({type:h.JID_INTEROP,user:b,device:c,integrator:d})};a.create=function(b,c){return new a({type:h.JID,user:b,server:c})};var b=a.prototype;b.toString=function(){if(this.$1.type===h.JID_AD||this.$1.type===h.JID_U){var a=this.$1,b=a.user,c=a.device;a=a.domainType;var e;a===i.WHATSAPP?e=d(\"WAJids\").WA_USER_JID_SUFFIX:a===i.HOSTED?e=d(\"WAJids\").HOSTED_SUFFIX:a===i.HOSTED_LID?e=d(\"WAJids\").HOSTED_LID_SUFFIX:e=d(\"WAJids\").LID_SUFFIX;return c===0?b+\"@\"+e:b+\":\"+c+\"@\"+e}else if(this.$1.type===h.JID_FB){a=this.$1;b=a.user;c=a.device;e=d(\"WAJids\").MSGR_USER_JID_SUFFIX;return b+\":\"+c+\"@\"+e}else if(this.$1.type===h.JID_INTEROP){a=this.$1;b=a.user;c=a.device;e=a.integrator;a=d(\"WAJids\").INTEROP_USER_JID_SUFFIX;return e+\"-\"+b+\":\"+c+\"@\"+a}else{this.$1.type;e=this.$1;b=e.user;c=e.server;return b!=null?b+\"@\"+c:c}};b.getInnerJid=function(){return this.$1};return a}();g.WAP_JID_SUBTYPE=h;g.DomainType=i;g.WapJid=a}),98);\n__d(\"WAXmlFormatter\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){a=a.replace(\/>\\s{0,}<\/g,\"><\").replace(\/<\/g,\"~::~<\").replace(\/\\s*xmlns:\/g,\"~::~xmlns:\").replace(\/\\s*xmlns=\/g,\"~::~xmlns=\").split(\"~::~\");var b=a.length,c=!1,d=0,e=\"\",f=0,h=[\"\\n\"];for(f=0;f<100;f++)h.push(h[f]+\"    \");var i=function(b,a){var c=\/^<[\\w:\\-.,]+\/.exec(b[a-1]);b=\/^<\\\/[\\w:\\-.,]+\/.exec(b[a]);return c!=null&&b!=null&&c[0]===b[0]};for(f=0;f<b;f++)a[f].search(\/<!\/)>-1?(e+=h[d]+a[f],c=!0,(a[f].search(\/-->\/)>-1||a[f].search(\/\\]>\/)>-1||a[f].search(\/!DOCTYPE\/)>-1)&&(c=!1)):a[f].search(\/-->\/)>-1||a[f].search(\/\\]>\/)>-1?(e+=a[f],c=!1):i(a,f)?(e+=a[f],c||d--):a[f].search(\/<\\w\/)>-1&&a[f].search(\/<\\\/\/)===-1&&a[f].search(\/\\\/>\/)===-1?(a[f]=g(a[f]),e=c?e+=a[f]:e+=h[d++]+a[f]):a[f].search(\/<\\w\/)>-1&&a[f].search(\/<\\\/\/)>-1?e=c?e+=a[f]:e+=h[d]+a[f]:a[f].search(\/<\\\/\/)>-1?e=c?e+=a[f]:e+=h[d===0?d:--d]+a[f]:a[f].search(\/\\\/>\/)>-1?e=c?e+=a[f]:e+=h[d]+a[f]:a[f].search(\/<\\?\/)>-1?e+=h[d]+a[f]:a[f].search(\/xmlns:\/)>-1||a[f].search(\/xmlns=\/)>-1?e+=h[d]+a[f]:e+=a[f];return e[0]===\"\\n\"?e.slice(1):e}function g(a){var b=a.match(\/(<query.*>|<result>)(\\{.*\\})\/);if(b===null)return a;try{var c=b[1];b=JSON.stringify(JSON.parse(b[2]),null,2);return c+\"\\n\"+b}catch(b){return a+\"[Error formatting JSON]\"}}f[\"default\"]=a}),66);\n__d(\"WAXmlNode\",[\"WAHex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={};a=function(){function a(a,b,c){b===void 0&&(b=h),c===void 0&&(c=null),this.tag=a,this.attrs=b,this.content=c}var b=a.prototype;b.toString=function(){var a=\"<\"+this.tag;a+=i(this.attrs);var b=this.content;Array.isArray(b)?a+=\">\"+b.map(String).join(\"\")+\"<\/\"+this.tag+\">\":b instanceof Uint8Array?a+=\">\"+j(b)+\"<\/\"+this.tag+\">\":b!=null?a+=\">\"+String(b)+\"<\/\"+this.tag+\">\":a+=\" \/>\";return a};return a}();function i(a){var b=Object.keys(a),c=\"\";for(var d=0;d<b.length;d++){var e=b[d];c+=\" \"+e+'=\"'+a[e].toString()+'\"'}return c}function j(a){var b;a.length===0?b=\"<!-- empty binary -->\":a.length<50?b=d(\"WAHex\").bytesToDebugString(a):b=\"<!-- \"+a.length+\" bytes -->\";return b}g.XmlNode=a;g.attrsToString=i;g.uint8ArrayToDebugString=j}),98);\n__d(\"WAWap\",[\"WAAssertUnreachable\",\"WABinary\",\"WACryptoDependencies\",\"WAErr\",\"WAJids\",\"WALogger\",\"WALongInt\",\"WATextEncoding\",\"WAWapDict\",\"WAWapJid\",\"WAXmlFormatter\",\"WAXmlNode\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"decodeNullableString got invalid value: \",\", string expected\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"decodeString got invalid value: \",\", string expected\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Decoding compressed stanza\"]);k=function(){return a};return a}var l=(h=d(\"WAJids\")).MSGR_USER_DOMAIN.replace(\"@\",\"\"),aa=h.WA_USER_DOMAIN.replace(\"@\",\"\"),m=h.LID_DOMAIN.replace(\"@\",\"\"),n=h.INTEROP_DOMAIN.replace(\"@\",\"\"),o=h.HOSTED_DOMAIN.replace(\"@\",\"\"),p=2,ba=128,q=0,r=236,s=237,t=238,u=239,ca=[r,s,t,u],v=245,w=246,x=247,y=248,z=249,A=250,B=251,C=252,D=253,E=254,F=255,da=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"-\",\".\",\"\\ufffd\",\"\\ufffd\",\"\\ufffd\",\"\\ufffd\"],ea=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"],G=\"\",fa=1,H={sentinel:\"DROP_ATTR\"},I=(s=d(\"WAWapJid\")).WapJid.create(null,\"g.us\"),J=s.WapJid.create(null,h.WA_SERVER_JID_SUFFIX);t=s.WapJid.create(\"status\",\"broadcast\");var K=s.WapJid.create(null,\"newsletter\");h=s.WapJid.create(null,\"hosted\");s=s.WapJid.create(null,\"hosted.lid\");var L={},M=!1;function a(){M=!0}var ga=d(\"WATextEncoding\").newTextEncoder(),N=function(){function a(a,b,c){b===void 0&&(b=L),c===void 0&&(c=null),this.tag=a,this.attrs=b,this.content=c}var b=a.prototype;b.toString=function(){var a=\"<\"+this.tag;a+=d(\"WAXmlNode\").attrsToString(this.attrs);var b=this.content;Array.isArray(b)?a+=\">\"+b.map(String).join(\"\")+\"<\/\"+this.tag+\">\":b?a+=\">\"+d(\"WAXmlNode\").uint8ArrayToDebugString(b)+\"<\/\"+this.tag+\">\":a+=\" \/>\";M&&(a=c(\"WAXmlFormatter\")(a));return a};return a}();function b(a,b,e){var f=null;if(b&&b.children!=null)throw c(\"WAErr\")('Children should not be passed via props (see eslint check \"react\/no-children-props\")');if(Array.isArray(e))f=e.filter(Boolean);else if(typeof e===\"string\")f=d(\"WABinary\").Binary.build(e).readByteArray();else if(e instanceof ArrayBuffer)f=new Uint8Array(e);else if(e instanceof Uint8Array)f=e;else{var g=[];for(var h=2;h<arguments.length;h++){var i=arguments[h];i&&g.push(i)}f=g}Array.isArray(f)&&f.length===0&&(f=null);var j={};if(b){var k=b;Object.keys(k).forEach(function(b){if([\"__self\",\"__source\"].includes(b))return;var d=k[b];if(d==null)throw c(\"WAErr\")(\"Attr \"+b+\" in <\"+a+\"> is null\");if(d===H)return;j[b]=d})}return new N(a,j,f)}var ha=b;function e(a){return a instanceof d(\"WAWapJid\").WapJid?a.toString():a}function O(a){var b=a.content;Array.isArray(b)?b=b.map(O):typeof b===\"string\"&&(b=d(\"WABinary\").Binary.build(b).readByteArray());return new N(a.tag,a.attrs||L,b)}function f(a){a=a instanceof N?a:O(a);var b=new(d(\"WABinary\").Binary)();P(a,b);a=0;b=b.readByteArray();var c=new Uint8Array(1+b.length);c[0]=a;c.set(b,1);return c}function P(a,b){if(a==null)b.writeUint8(q);else if(a instanceof N)Q(a,b);else if(a instanceof d(\"WAWapJid\").WapJid)ia(a,b);else if(typeof a===\"string\")U(a,b);else if(a instanceof Uint8Array)ja(a,b);else{a;b=typeof a;throw c(\"WAErr\")(\"Invalid payload type \"+b)}}function ia(a,b){a=a.getInnerJid();if(a.type===d(\"WAWapJid\").WAP_JID_SUBTYPE.JID_U){var c=a.user,e=a.device,f=a.domainType;b.writeUint8(x);b.writeUint8(f);b.writeUint8(e);P(c,b)}else if(a.type===d(\"WAWapJid\").WAP_JID_SUBTYPE.JID_FB){f=a.user;e=a.device;b.writeUint8(w);P(f,b);b.writeUint16(e);P(l,b)}else if(a.type===d(\"WAWapJid\").WAP_JID_SUBTYPE.JID_INTEROP){c=a.user;f=a.device;e=a.integrator;b.writeUint8(v);P(c,b);b.writeUint16(f);b.writeUint16(e)}else{c=a.user;f=a.server;b.writeUint8(A);c!=null?P(c,b):b.writeUint8(q);P(f,b)}}function Q(a,b){if(a.tag===void 0){b.writeUint8(y);b.writeUint8(q);return}var c=1;a.attrs&&(c+=Object.keys(a.attrs).length*2);a.content&&c++;c<256?(b.writeUint8(y),b.writeUint8(c)):c<65536&&(b.writeUint8(z),b.writeUint16(c));P(a.tag,b);a.attrs&&Object.keys(a.attrs).forEach(function(c){U(c,b),P(a.attrs[c],b)});c=a.content;if(Array.isArray(c)){c.length<256?(b.writeUint8(y),b.writeUint8(c.length)):c.length<65536&&(b.writeUint8(z),b.writeUint16(c.length));for(var d=0;d<c.length;d++)Q(c[d],b)}else c&&P(c,b)}var R,S;function T(a){var b=new Map();for(var c=0;c<a.length;c++)b.set(a[c],c);return b}function U(a,b){if(a===\"\"){b.writeUint8(C);b.writeUint8(0);return}R==null&&(R=T(d(\"WAWapDict\").SINGLE_BYTE_TOKEN));var c=R.get(a);if(c!=null){b.writeUint8(c+1);return}if(S==null){S=[];for(c=0;c<d(\"WAWapDict\").DICTIONARIES.length;++c)S.push(T(d(\"WAWapDict\").DICTIONARIES[c]))}for(c=0;c<S.length;++c){var e=S[c].get(a);if(e!=null){b.writeUint8(ca[c]);b.writeUint8(e);return}}e=d(\"WABinary\").numUtf8Bytes(a);if(e<128){c=\/[^0-9.-]+?\/;var f=\/[^0-9A-F]+?\/;if(!c.exec(a)){V(a,F,b);return}else if(!f.exec(a)){V(a,B,b);return}}ka(e,b);b.writeString(a)}function V(a,b,d){var e=a.length%2===1;d.writeUint8(b);var f=Math.ceil(a.length\/2);e&&(f|=ba);d.writeUint8(f);e=0;for(f=0;f<a.length;f++){var g=a.charCodeAt(f),h=null;48<=g&&g<=57?h=g-48:b===F?g===45?h=10:g===46&&(h=11):b===B&&(65<=g&&g<=70&&(h=g-55));if(h==null)throw c(\"WAErr\")(\"Cannot nibble encode \"+g);else f%2===0?(e=h<<4,f===a.length-1&&(e|=15,d.writeUint8(e))):(e|=h,d.writeUint8(e))}}function ja(a,b){ka(a.length,b),b.writeByteArray(a)}function ka(a,b){if(a<256)b.writeUint8(C),b.writeUint8(a);else if(a<1048576)b.writeUint8(D),b.writeUint8(a>>>16&255),b.writeUint8(a>>>8&255),b.writeUint8(a&255);else if(a<4294967296)b.writeUint8(E),b.writeUint32(a);else throw c(\"WAErr\")(\"Binary with length \"+a+\" is too big for WAP protocol\")}function la(a,b){a=new(d(\"WABinary\").Binary)(a);var c=a.readUint8();c=c&p;if(c){d(\"WALogger\").LOG(k());return b(a.readByteArray()).then(function(a){return X(new(d(\"WABinary\").Binary)(a))})}return Promise.resolve(X(a))}function ma(a){a=new(d(\"WABinary\").Binary)(a);var b=a.readUint8();b=b&p;if(b)throw c(\"WAErr\")(\"Cannot pass compressed stanza to decodeStanzaDebug\");return X(a)}function W(a,b){var e=a.readUint8();if(e===q)return null;if(e===y)return na(a,a.readUint8());if(e===z)return na(a,a.readUint16());if(e===C){var f=a.readUint8();return Z(a,f,b)}if(e===D){f=a.readUint8();var g=a.readUint8(),h=a.readUint8();f=((f&15)<<16)+(g<<8)+h;return Z(a,f,b)}if(e===E){g=a.readUint32();return Z(a,g,b)}if(e===A)return pa(a);if(e===w)return qa(a);if(e===v)return ra(a);if(e===x)return sa(a);if(e===F){h=a.readUint8();f=h>>>7;g=h&127;return ta(a,da,f,g)}if(e===B){b=a.readUint8();h=b>>>7;f=b&127;return ta(a,ea,h,f)}if(e<=0||e>=240)throw c(\"WAErr\")(\"Unable to decode WAP buffer\");if(e>=r&&e<=u){g=e-r;b=d(\"WAWapDict\").DICTIONARIES[g];if(b===void 0)throw c(\"WAErr\")(\"Missing WAP dictionary \"+g);h=a.readUint8();f=b[h];if(f===void 0)throw c(\"WAErr\")(\"Invalid value index \"+h+\" in dict \"+g);return f}a=d(\"WAWapDict\").SINGLE_BYTE_TOKEN[e-1];if(a===void 0)throw c(\"WAErr\")(\"Undefined token with index \"+e);return a}function na(a,b){var c=[];for(var d=0;d<b;d++)c.push(X(a));return c}function X(a){var b=a.readUint8(),e;if(b===y)e=a.readUint8();else if(b===z)e=a.readUint16();else throw c(\"WAErr\")(\"Failed to decode node since type byte \"+String(b)+\" is invalid\");b=void 0;var f=null;if(e===0)throw c(\"WAErr\")(\"Failed to decode node, list cannot be empty\");var g=Y(a);e-=1;while(e>1){b||(b={});var h=Y(a),i=W(a,!0);b[h]=i;e-=2}e===1&&(f=W(a,!1),f instanceof d(\"WAWapJid\").WapJid&&(f=String(f)),typeof f===\"string\"&&(f=ga.encode(f)));return new N(g,b,f)}function Y(a){a=W(a,!0);if(typeof a!==\"string\"){d(\"WALogger\").DEV(j(),String(a));throw c(\"WAErr\")(\"WAWap:decodeString got invalid value, string expected\")}return a}function oa(a){a=W(a,!0);if(a!=null&&typeof a!==\"string\"){d(\"WALogger\").DEV(i(),String(a));throw c(\"WAErr\")(\"WAWap:decodeNullableString got invalid value, string expected\")}return a}function pa(a){var b=oa(a);a=Y(a);return d(\"WAWapJid\").WapJid.create(b,a)}function qa(a){var b=Y(a),c=a.readUint16();Y(a);return d(\"WAWapJid\").WapJid.createFbJid(b,c)}function ra(a){var b=Y(a),c=a.readUint16(),e=a.readUint16();Y(a);return d(\"WAWapJid\").WapJid.createInteropJid(b,c,e)}function sa(a){var b=null,e=a.readUint8();if(e===0)b=d(\"WAWapJid\").DomainType.WHATSAPP;else if(e===1)b=d(\"WAWapJid\").DomainType.LID;else if((1&e)===0&&(128&e)!==0)b=d(\"WAWapJid\").DomainType.HOSTED;else if(e===129)b=d(\"WAWapJid\").DomainType.HOSTED_LID;else throw c(\"WAErr\")(\"decodeJidU - Invalid domain type encoding \"+e);e=a.readUint8();a=Y(a);return d(\"WAWapJid\").WapJid.createJidU(a,b,e)}function Z(a,b,c){c===void 0&&(c=!1);if(c)return a.readString(b);else return a.readByteArray(b)}function ta(a,b,c,d){d=new Array(d*2-c);for(var e=0;e<d.length-1;e+=2){var f=a.readUint8();d[e]=b[f>>>4];d[e+1]=b[f&15]}if(c){f=a.readUint8();d[d.length-1]=b[f>>>4]}return d.join(\"\")}function ua(){if(!G){var a=new Uint16Array(2);d(\"WACryptoDependencies\").getCrypto().getRandomValues(a);G=String(a[0])+\".\"+String(a[1])+\"-\"}return\"\"+G+fa++}function va(a){switch(a.type){case\"group\":return a.groupJid;case\"status\":return d(\"WAJids\").STATUS_JID;case\"device\":return a.deviceJid;case\"newsletter\":return a.newsletterJid;case\"hosted\":return a.hostedDeviceJid;case\"hostedLid\":return a.hostedLidDeviceJid;default:a.type;return a.broadcastJid}}function wa(a){switch(a.type){case\"group\":return a.author;case\"status\":return a.author;case\"broadcast\":return a.author;default:a.type;return null}}function xa(a){return a.type===\"status\"||a.type===\"group\"||a.type===\"broadcast\"?$(a.author):H}function ya(a){return $(va(a))}function $(a){var b=d(\"WAJids\").validateDomainJid(a);if(b!=null)return za(b);b=a.split(\"@\");a=b[0];b=b[1];var e=null;if((b===aa||b===l||b===n||b===m||b===o||b===d(\"WAJids\").HOSTED_LID_SUFFIX)&&a.indexOf(\":\")!==-1){var f=a.split(\":\");a=f[0];f=f[1];e=parseInt(f,10)}if(b===n){f=a.split(\"-\");var g=f[0];f=f[1];return d(\"WAWapJid\").WapJid.createInteropJid(f,e,parseInt(g,10))}else if(b===l)return d(\"WAWapJid\").WapJid.createFbJid(a,e);f=null;if(b===m)f=d(\"WAWapJid\").DomainType.LID;else if(b===o){if(e!==99)throw c(\"WAErr\")(\"wid unexpected deviceId\");f=d(\"WAWapJid\").DomainType.HOSTED}else if(b===d(\"WAJids\").HOSTED_LID_SUFFIX){if(e!==99)throw c(\"WAErr\")(\"lid invalid deviceId\");f=d(\"WAWapJid\").DomainType.HOSTED_LID}else f=d(\"WAWapJid\").DomainType.WHATSAPP;return e!=null&&e!==0?d(\"WAWapJid\").WapJid.createJidU(a,f,e):d(\"WAWapJid\").WapJid.create(a,b)}function za(a){if(a===\"s.whatsapp.net\")return J;else if(a===\"g.us\")return I;else if(a===\"newsletter\")return K;else return c(\"WAAssertUnreachable\")(a)}function Aa(a){return $(a)}function Ba(a){return $(a)}function Ca(a){return $(a)}function Da(a){return $(a)}function Ea(a){return $(a)}function Fa(a){return $(a)}function Ga(a){if(a.jidType===\"phoneDevice\")return $(a.deviceJid);else if(a.jidType===\"msgrDevice\")return $(a.deviceJid);else if(a.jidType===\"lidDevice\")return $(a.deviceJid);else if(a.jidType===\"phoneUser\")return $(a.userJid);else if(a.jidType===\"msgrUser\")return $(a.userJid);else if(a.jidType===\"lidUser\")return $(a.userJid);else if(a.jidType===\"group\")return $(a.groupJid);else if(a.jidType===\"status\")return $(a.statusJid);else if(a.jidType===\"call\")return $(a.callJid);else if(a.jidType===\"interopDevice\")return $(a.deviceJid);else if(a.jidType===\"interopUser\")return $(a.userJid);else if(a.jidType===\"newsletter\")return $(a.newsletterJid);else if(a.jidType===\"hosted\")return $(a.hostedDeviceJid);else if(a.jidType===\"hostedLid\")return $(a.hostedLidDeviceJid);else{a.jidType;return $(a.broadcastJid)}}function Ha(a){return a}function Ia(a){return a.toString()}function Ja(a){return a}function Ka(a){return a==null?H:a}function La(a){return a.toString()}function Ma(a){return d(\"WALongInt\").longIntToDecimalString(a)}function Na(a,b){b===void 0&&(b=4);a=a;var c=new Uint8Array(b);for(b=b-1;b>=0;b--)c[b]=a&255,a>>>=8;return c}g.DROP_ATTR=H;g.G_US=I;g.S_WHATSAPP_NET=J;g.STATUS_BROADCAST=t;g.NEWSLETTER=K;g.HOSTED=h;g.HOSTED_LID=s;g.enableXMLFormat=a;g.WapNode=N;g.makeWapNode=b;g.wap=ha;g.decodeAsString=e;g.makeStanza=O;g.encodeStanza=f;g.decodeStanza=la;g.decodeStanzaDebug=ma;g.generateId=ua;g.extractToJid=va;g.extractParticipantJid=wa;g.PARTICIPANT_JID=xa;g.TO_JID=ya;g.JID=$;g.DOMAIN_JID=za;g.USER_JID=Aa;g.DEVICE_JID=Ba;g.GROUP_JID=Ca;g.BROADCAST_JID=Da;g.CALL_JID=Ea;g.NEWSLETTER_JID=Fa;g.TO_WAP_JID=Ga;g.STANZA_ID=Ha;g.SMAX_ID=Ia;g.CUSTOM_STRING=Ja;g.MAYBE_CUSTOM_STRING=Ka;g.INT=La;g.LONG_INT=Ma;g.BIG_ENDIAN_CONTENT=Na}),98);\n__d(\"WAParsableWapNode\",[\"WABinary\",\"WAErr\",\"WAJids\",\"WALogger\",\"WALongInt\",\"WAParsableXmlNode\",\"WASignalKeys\",\"WATimeUtils\",\"WAWap\",\"WAWapJid\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"ParsableWapNode: attrFromJid() is called with \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"ParsableWapNode: attrFromJid() is called with \",\"\"]);i=function(){return a};return a}var j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,\"XmppParsingFailure: \"+a+\": \"+c)||this;d.name=\"XmppParsingFailure\";d.parser=a;d.reason=c;return d}var c=a.prototype;c.toString=function(){return\"XmppParsingFailure: \"+this.parser+\": \"+this.reason};return a}(babelHelpers.wrapNativeSuper(Error));a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){return a.call(this,b,c)||this}var e=b.prototype;e.assertFromServer=function(){var a=this.attrString(\"from\");a!==d(\"WAJids\").WA_SERVER_JID_SUFFIX&&this[\"throw\"]('to have \"from\"=\"s.whatsapp.net\", but instead has \"'+a+'\"')};e.attrUserJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);return c.userJid==null?this[\"throw\"]('to have \"'+a+'\"={UserJid}, but instead has \"'+b+'\"'):c.userJid};e.attrPhoneUserJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);return c.jidType===\"phoneUser\"?c.userJid:this[\"throw\"]('to have \"'+a+'\"={PhoneUserJid}, but instead has \"'+b+'\"')};e.attrLidUserJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);return c.jidType===\"lidUser\"?c.userJid:this[\"throw\"]('to have \"'+a+'\"={LidUserJid}, but instead has \"'+b+'\"')};e.maybeAttrUserJid=function(a){return this.hasAttr(a)?this.attrUserJid(a):null};e.maybeAttrPhoneUserJid=function(a){return this.hasAttr(a)?this.attrPhoneUserJid(a):null};e.maybeAttrLidUserJid=function(a){return this.hasAttr(a)?this.attrLidUserJid(a):null};e.attrGroupJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);return c.groupJid==null?this[\"throw\"]('to have \"'+a+'\"={GroupJid}, but instead has \"'+b+'\"'):c.groupJid};e.maybeAttrGroupJid=function(a){return this.hasAttr(a)?this.attrGroupJid(a):null};e.attrChatJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);if(c.userJid!=null)return c.userJid;return c.groupJid!=null?c.groupJid:this[\"throw\"]('to have \"'+a+'\"={ChatJid}, but instead has \"'+b+'\"')};e.attrPhoneChatJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);if(c.jidType===\"phoneUser\")return c.userJid;else if(c.jidType===\"group\")return c.groupJid;else return this[\"throw\"]('to have \"'+a+'\"={ChatJid}, but instead has \"'+b+'\"')};e.attrDeviceJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);if(c.deviceJid!=null)return c.deviceJid;if(c.userJid!=null)return d(\"WAJids\").defaultDeviceJidForUser(c.userJid);if(c.hostedDeviceJid!=null)return c.hostedDeviceJid;return c.hostedLidDeviceJid!=null?c.hostedLidDeviceJid:this[\"throw\"]('to have \"'+a+'\"={DeviceJid}, but instead has \"'+b+'\"')};e.attrPhoneDeviceJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);if(c.jidType===\"phoneDevice\")return c.deviceJid;return c.jidType===\"phoneUser\"?d(\"WAJids\").defaultPhoneDeviceJidForUser(c.userJid):this[\"throw\"]('to have \"'+a+'\"={PhoneDeviceJid}, but instead has \"'+b+'\"')};e.attrLidDeviceJid=function(a){var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);if(c.jidType===\"lidDevice\")return c.deviceJid;return c.jidType===\"lidUser\"?d(\"WAJids\").defaultLidDeviceJidForLidUserJid(c.userJid):this[\"throw\"]('to have \"'+a+'\"={LidDeviceJid}, but instead has \"'+b+'\"')};e.attrDeviceId=function(a){a=this.attrInt(a);return d(\"WAJids\").interpretAsDeviceId(a)};e.attrFromJidChat=function(){var a=this.attrJidWithType();switch(a.jidType){case\"msgrUser\":var b=a.userJid,e=d(\"WAJids\").defaultDeviceJidForUser(b);return{type:\"device\",chat:b,deviceJid:e,author:e};case\"interopUser\":b=a.userJid;e=d(\"WAJids\").defaultDeviceJidForUser(b);return{type:\"device\",chat:b,deviceJid:e,author:e};case\"phoneUser\":b=a.userJid;e=d(\"WAJids\").defaultDeviceJidForUser(b);return{type:\"device\",chat:b,deviceJid:e,author:e};case\"lidUser\":b=a.userJid;e=d(\"WAJids\").defaultLidDeviceJidForLidUserJid(b);return{type:\"device\",chat:b,deviceJid:e,author:e};case\"phoneDevice\":b=a.deviceJid;return{type:\"device\",chat:d(\"WAJids\").extractUserJid(b),deviceJid:b,author:b};case\"msgrDevice\":e=a.deviceJid;return{type:\"device\",chat:d(\"WAJids\").extractUserJid(e),deviceJid:e,author:e};case\"interopDevice\":b=a.deviceJid;return{type:\"device\",chat:d(\"WAJids\").extractUserJid(b),deviceJid:b,author:b};case\"lidDevice\":e=a.deviceJid;return{type:\"device\",chat:d(\"WAJids\").extractUserJid(e),deviceJid:e,author:e};case\"group\":b=this.hasAttr(\"participant\")?this.attrDeviceJid(\"participant\"):null;return b==null?this[\"throw\"](\"expected to have participant JID for group\"):{type:\"group\",chat:a.groupJid,groupJid:a.groupJid,author:b};case\"broadcast\":e=this.hasAttr(\"participant\")?this.attrDeviceJid(\"participant\"):null;return e==null?this[\"throw\"](\"expected to have participant JID for group\"):{type:\"broadcast\",broadcastJid:a.broadcastJid,chat:d(\"WAJids\").extractUserJid(e),author:e};case\"hosted\":b=a.hostedDeviceJid;return{type:\"device\",chat:d(\"WAJids\").extractUserJid(b),deviceJid:b,author:b};case\"hostedLid\":e=a.hostedLidDeviceJid;return{type:\"device\",chat:d(\"WAJids\").extractUserJid(e),deviceJid:e,author:e};case\"call\":d(\"WALogger\").ERROR(i(),a.callJid);throw c(\"WAErr\")(\"ParsableWapNode: attrFromJid() does not support CallJid\");default:a.jidType;return this[\"throw\"](\"attrFromJidChat should not be used with jid of type \"+a.jidType)}};e.attrFromJidPhoneChat=function(){var a=this.attrJidWithType();switch(a.jidType){case\"phoneUser\":var b=a.userJid,e=d(\"WAJids\").defaultPhoneDeviceJidForUser(b);return{type:\"device\",chat:b,deviceJid:e,author:e};case\"phoneDevice\":b=a.deviceJid;return{type:\"device\",chat:d(\"WAJids\").extractPhoneUserJid(b),deviceJid:b,author:b};case\"group\":e=this.hasAttr(\"participant\")?this.attrPhoneDeviceJid(\"participant\"):null;return e==null?this[\"throw\"](\"expected to have participant JID for group\"):{type:\"group\",chat:a.groupJid,groupJid:a.groupJid,author:e};case\"broadcast\":b=this.hasAttr(\"participant\")?this.attrPhoneDeviceJid(\"participant\"):null;return b==null?this[\"throw\"](\"expected to have participant JID for group\"):{type:\"broadcast\",broadcastJid:a.broadcastJid,chat:d(\"WAJids\").extractPhoneUserJid(b),author:b};case\"call\":d(\"WALogger\").ERROR(h(),a.callJid);throw c(\"WAErr\")(\"ParsableWapNode: attrFromJid() does not support CallJid\");default:a.jidType;return this[\"throw\"](\"attrFromJidChat should not be used with jid of type \"+a.jidType)}};e.attrFromPhoneJid=function(){var a=this.attrJidWithType();if(a.jidType===\"status\"){a=this.hasAttr(\"participant\")?this.attrPhoneDeviceJid(\"participant\"):null;return a==null?this[\"throw\"](\"to have participant for status msg\"):{type:\"status\",author:a}}else return this.attrFromJidPhoneChat()};e.attrFromJid=function(){var a=this.attrJidWithType();if(a.jidType===\"status\"){var b=this.hasAttr(\"participant\")?this.attrPhoneDeviceJid(\"participant\"):null;return b==null?this[\"throw\"](\"to have participant for status msg\"):{type:\"status\",author:b}}if(a.jidType===\"newsletter\")return{type:\"newsletter\",newsletterJid:a.newsletterJid};if(a.jidType===\"hosted\")return{type:\"hosted\",hostedDeviceJid:a.hostedDeviceJid};return a.jidType===\"hostedLid\"?{type:\"hostedLid\",hostedLidDeviceJid:a.hostedLidDeviceJid}:this.attrFromJidChat()};e.attrJidWithType=function(a){a===void 0&&(a=\"from\");var b=this.attrString(a),c=d(\"WAJids\").interpretAndValidateJid(b);return c.jidType===\"unknown\"?this[\"throw\"]('to have \"'+a+'\"={Jid}, but instead has \"'+b+'\"'):c};e.attrWapJid=function(a){a===void 0&&(a=\"from\");a=this.attrString(a);var b=d(\"WAJids\").interpretAndValidateJid(a);return b.jidType===\"unknown\"?d(\"WAWapJid\").WapJid.create(null,a):d(\"WAWap\").JID(d(\"WAJids\").extractFromJid(b))};e.attrLongInt=function(a){a=this.attrString(a);return d(\"WALongInt\").decimalStringToLongInt(a)};e.attrTime=function(a){return d(\"WATimeUtils\").castToUnixTime(this.attrInt(a))};e.attrFutureTime=function(a){a=this.attrInt(a);return d(\"WATimeUtils\").futureUnixTime(a)};e.contentString=function(){if(this.hasChildren())return this[\"throw\"](\"to have string content, but has children instead\");else if(this.hasContent()){var a=new(d(\"WABinary\").Binary)(this.contentBytes());return a.readString(a.size())}else return this[\"throw\"](\"to have content\")};e.decodeAsString=function(a){return d(\"WAWap\").decodeAsString(a)};e.contentSerializedPubKey=function(){if(this.hasContent())return d(\"WASignalKeys\").serializeIdentity(this.contentBytes());else return this[\"throw\"](\"to have content\")};e.createParseError=function(a){return new j(this.name(),\"expected <\"+this.tag()+\"> \"+a)};e[\"throw\"]=function(a){throw this.createParseError(a)};return b}(d(\"WAParsableXmlNode\").ParsableXmlNode);g.XmppParsingFailure=j;g.ParsableWapNode=a}),98);\n__d(\"WADeprecatedWapParser\",[\"WAErr\",\"WAParsableWapNode\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.parse=function(a){a=new(d(\"WAParsableWapNode\").ParsableWapNode)(this.$1,a);try{return{success:this.$2(a)}}catch(a){if(a instanceof d(\"WAParsableWapNode\").XmppParsingFailure)return{error:a};else throw a}};b.parseOrThrow=function(a){a=this.parse(a);if(a.error)throw c(\"WAErr\")(String(a.error));return a.success};return a}();g[\"default\"]=a}),98);\n__d(\"WAAckParser\",[\"WADeprecatedWapParser\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";b=new(c(\"WADeprecatedWapParser\"))(\"ack\",function(a){a.assertTag(\"ack\");return{id:a.attrString(\"id\"),ts:a.maybeAttrString(\"t\"),\"class\":a.attrString(\"class\"),type:a.maybeAttrString(\"type\"),from:a.attrJidWithType(),participant:a.hasAttr(\"participant\")?a.attrDeviceJid(\"participant\"):null,recipient:a.hasAttr(\"recipient\")?a.attrUserJid(\"recipient\"):null}});function a(a,b){return a.id===b.id&&(b[\"class\"]===void 0||a[\"class\"]===b[\"class\"])&&(b.type===void 0||a.type===b.type)&&(b.from===void 0||h(a.from,b.from))&&(b.participant===void 0||a.participant===b.participant)&&(b.recipient===void 0||a.recipient===b.recipient)&&(b.ts===void 0||a.ts===b.ts)}function h(a,b){if(d(\"WAJids\").extractFromJid(a)===b)return!0;if(a.userJid!=null)return d(\"WAJids\").defaultDeviceJidForUser(a.userJid)===b;if(a.deviceJid!=null){a=a.deviceJid;return d(\"WAJids\").extractDeviceId(a)===0&&d(\"WAJids\").extractUserJid(a)===b}return!1}g.AckParser=b;g.ackMatchesTemplate=a;g.fromJidsAreEqual=h}),98);\n__d(\"WAArrayUtils\",[\"regeneratorRuntime\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"regeneratorRuntime\").mark(c);function a(a,b){var c=a.pop();b<a.length&&(a[b]=c)}function c(a,c){var d;return b(\"regeneratorRuntime\").wrap(function(b){while(1)switch(b.prev=b.next){case 0:d=0;case 1:if(!(d<a.length)){b.next=7;break}b.next=4;return a.slice(d,d+c);case 4:d+=c;b.next=1;break;case 7:case\"end\":return b.stop()}},g,this)}f.removeIndexWithoutPreservingOrder=a;f.peekEvery=c}),66);\n__d(\"WAErrors\",[\"WACustomError\"],(function(a,b,c,d,e,f,g){\"use strict\";b=(a=d(\"WACustomError\")).customError(\"BufferTooLarge\",!1);c=a.customError(\"Disconnected\",!1);e=a.customError(\"Offline\",!1,c);f=a.customError(\"MaxRetries\",!1);g.BufferTooLargeError=b;g.Disconnected=c;g.Offline=e;g.MaxRetries=f}),98);\n__d(\"WANotifyConnectionChangeFactory\",[],(function(a,b,c,d,e,f){\"use strict\";var g=15e3;function a(a,b,c){c===void 0&&(c=g);var d={timeoutID:null,connectionStatus:\"disconnected\",optimismLevel:\"optimist\"},e=function(){var a=d.optimismLevel,e=d.connectionStatus;a===\"optimist\"?d.timeoutID=setTimeout(function(){d.optimismLevel=\"realist\",b(e)},c):b(e)};return function(c){d.connectionStatus=c,c===\"disconnected\"?e():c===\"in_handshake\"?e():(c,d.timeoutID!=null&&(clearTimeout(d.timeoutID),d.timeoutID=null),b(c)),a(c)}}f.notifyConnectionChangeFactory=a}),66);\n__d(\"WAPromiseBackoffs\",[\"Promise\",\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){if(a===0)return 0;var c=o(b.algo);for(var d=1;d<a;d++)c();return j(b,c())}function i(a){var b=a.relativeDelay,c=b===void 0?!1:b,d=null,e=o(a.algo);return function(){var b=d;if(b==null){d=c?Date.now():0;return 0}var f=j(a,e());if(c){var g=Date.now();b=g-b;b>0&&(f=Math.max(0,f-b));d=g}return f}}function d(a){var c=i(a);return function(a){return new(h||(h=b(\"Promise\")))(function(b){var d=c();d>0?setTimeout(b,d,a):b(a)})}}function j(a,b){var c=a.max,d=a.min;a=a.jitter;a=a===void 0?.1:a;b=b;c!=null&&b>c&&(b=c);d!=null&&b<d&&(b=d);a!==0&&(b=Math.ceil(b*(1+a*Math.random())));return b}function k(a){var b=a.second-a.first,c=a.first-b;return function(){var a=b+c;c=b;b=a;return a}}function l(a){var b=a.base,c=b===void 0?2:b,d=a.first;return function(){var a=d;d*=c;return a}}function m(a){var b=a.delay;return function(){return b}}function n(a){var b=a.toMs;a=a.backoff;var c=o(a);return function(){return b(c())}}function o(a){switch(a.type){case\"fibonacci\":return k(a);case\"exponential\":return l(a);case\"constant\":return m(a);case\"adjust\":return n(a);default:a;throw c(\"WAErr\")(\"makeTimeFunc unrecognized backoff \"+a.type)}}g.getDelay=a;g.createTimer=i;g.createPromiseTimer=d}),98);\n__d(\"WAPromiseRetryLoop\",[\"Promise\",\"WAErr\",\"WALogger\",\"WAPromiseBackoffs\",\"WAPromiseDelays\",\"WAResolvable\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"PromiseRetryLoop: retrying \",\" in \",\"ms\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"PromiseRetryLoop: resetting \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"PromiseRetryLoop was called several times. You may have race conditions\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"PromiseRetryLoop: starting \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"PromiseRetryLoop: resetting \",\"\"]);m=function(){return a};return a}a=function(){function a(a){var b=this;this.$2=new(d(\"WAResolvable\").Resolvable)();this.$3=null;this.$4=null;this.$5=0;this.endWithValue=function(a){b.$5++,b.$2.resolve(a)};this.$1=a}var e=a.prototype;e.resetTimeoutAfter=function(a){this.$4=Date.now()+a};e.cancelReset=function(){this.$4=null};e.reset=function(){if(this.$2.resolveWasCalled())return;d(\"WALogger\").LOG(m(),this.$1.name);this.$5++;this.$6()};e.start=function(){if(this.$2.resolveWasCalled())return;d(\"WALogger\").LOG(l(),this.$1.name);this.$5!==0&&d(\"WALogger\").ERROR(k());this.$5++;this.$6()};e.$6=function(){var a=this,c=this.$1,e=this.$5,f=d(\"WAPromiseBackoffs\").createTimer(this.$1.timer);f();var g=function b(){if(a.$2.resolveWasCalled())return;if(e!==a.$5)return;var g=Date.now();a.$3=c.code(a.endWithValue).then(function(){if(a.$2.resolveWasCalled())return;var e=c.resetDelay;(e!==void 0&&Date.now()>=g+e||a.$4!=null&&a.$4<=Date.now())&&(d(\"WALogger\").LOG(j(),c.name),f=d(\"WAPromiseBackoffs\").createTimer(a.$1.timer));a.$4=null;e=f();d(\"WALogger\").LOG(i(),c.name,e);return d(\"WAPromiseDelays\").delayMs(e).then(b)});return a.$3};this.$3=(h||(h=b(\"Promise\"))).resolve().then(g)};e.promise=function(){var a=this;if(this.$2.resolveWasCalled())return this.$2.promise;return!this.$3?(h||(h=b(\"Promise\"))).reject(c(\"WAErr\")(\"PromiseRetryLoop \"+this.$1.name+\" had promise() called before start()\")):(h||(h=b(\"Promise\"))).race([this.$2.promise,this.$3.then(function(){return a.$2.promise})])};return a}();g.PromiseRetryLoop=a}),98);\n__d(\"WASmaxInPingsEnums\",[\"WAJids\"],(function(a,b,c,d,e,f,g){a={validators:[d(\"WAJids\").validateDomainJid,d(\"WAJids\").validateUserJid],typeName:\"DomainJid|UserJid\"};g.DOMAINJID_USERJID=a}),98);\n__d(\"WADeepEquals\",[],(function(a,b,c,d,e,f){\"use strict\";function g(a,b){if(a===b)return!0;if(!a||!b||typeof a!==\"object\"&&typeof b!==\"object\")return!1;var c=Array.isArray(a),d=Array.isArray(b);if(c!==d)return!1;d=!0;if(c){c=a.length;if(c!==b.length)return!1;for(var e=0;d&&e<c;e++)d=g(a[e],b[e]);return d}c=Object.keys(a);for(e=0;d&&e<c.length;e++){var f=c[e];d=b.propertyIsEnumerable(f)&&g(a[f],b[f])}return d&&Object.keys(b).length===c.length}f.deepEqual=g}),66);\n__d(\"WASmaxParseUtils\",[\"WABase64\",\"WABinary\",\"WACryptoUtils\",\"WADeepEquals\",\"WAHasProperty\",\"WAResultOrError\",\"WAStanzaUtils\",\"WAWapJid\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=d(\"WAResultOrError\").makeResult();function a(a,b){return a.tag!==b?H(a,\"to be <\"+b+\">\"):h}function i(a,b){return!I(a,b)?H(a,'to have attribute \"'+b+'\"'):J(a,a.attrs[b])}function j(a,b,c,e){var f=i(a,b);if(!f.success)return f;c=c(f.value);return c!=null?d(\"WAResultOrError\").makeResult(c):H(a,'to have \"'+b+'\"={'+e+'}, but instead has \"'+f.value+'\"')}function k(a,b,c){var e=B(a);if(!e.success)return e;b=b(e.value);return b!=null?d(\"WAResultOrError\").makeResult(b):H(a,\"to have \"+c+' content, but instead has \"'+e.value+'\"')}function b(a,b,c){var d=i(a,b);if(!d.success)return d;else if(d.value!==c)return H(a,'to have \"'+b+'\"=\"'+c+'\", but instead has \"'+d.value+'\"');return h}function e(a,b){return j(a,b,d(\"WAStanzaUtils\").toStanzaId,\"stanzaID\")}function l(a,b){return j(a,b,K,\"integer\")}function f(a,b,c,e){var f=l(a,b);if(!f.success)return f;f=f.value;if(c!==void 0&&f<c)return H(a,'to have \"'+b+'\"={at least '+c+\"} but has value \"+f);else if(e!==void 0&&f>e)return H(a,'to have \"'+b+'\"={at most '+e+\"} but has value \"+f);return d(\"WAResultOrError\").makeResult(f)}function m(a){var b=a.content;return b instanceof Uint8Array?H(a,\"to have children\"):d(\"WAResultOrError\").makeResult(b)}function n(a,b){var c=m(a);if(!c.success)return c;c=c.value;if(c==null)return h;var e=null;for(var f=0;f<c.length;f++){var g=c[f];if(g.tag===b){if(e!=null)return H(a,\"to have 1 child <\"+b+\">, but found more than 1\");e=g}}return d(\"WAResultOrError\").makeResult(e)}function o(a,b,c){a=n(a,b);if(!a.success)return a;return a.value==null?h:c(a.value)}function p(a,b,c){c=o(a,b,c);if(!c.success)return c;c=c.value;return c==null?H(a,\"to have 1 child <\"+b+\">, but found 0\"):d(\"WAResultOrError\").makeResult(c)}function q(a,b){var c=n(a,b);if(!c.success)return c;return c.value==null?H(a,\"to have 1 child <\"+b+\">, but found 0\"):d(\"WAResultOrError\").makeResult(c.value)}function r(a,b,c,e,f){a=L(a,b,c,e);if(!a.success)return a;b=[];for(c=0;c<a.value.length;c++){e=f(a.value[c]);if(!e.success)return e;b.push(e.value)}return d(\"WAResultOrError\").makeResult(b)}function s(a,b,c,e,f){a=L(a,b,c,e);if(!a.success)return a;b=a.value.length;for(c=0;c<b;c++){e=f(a.value[c]);if(!e.success)return e}return d(\"WAResultOrError\").makeResult(b)}function t(a,b,c){b=r(a,b,0,Infinity,c);if(!b.success)return b;for(c=0;c<b.value.length;c++)if(!d(\"WADeepEquals\").deepEqual(b.value[0],b.value[c]))return H(a,\"to have homogeneous children, but found two children that are not equal\");return b}function u(a,b,c){a=t(a,b,c);return!a.success?a:d(\"WAResultOrError\").makeResult(a.value.length)}function v(a,b,c,d,e){return I(b,c)?a(b,c,d,e):h}function w(a,b,c,e){if(e==null)return h;a=v(a,b,c);if(!a.success)return a;if(a.value===e)return d(\"WAResultOrError\").makeResult(e);return a.value==null?h:H(b,'to have \"'+c+'\"={'+e+'}, but instead has \"'+a.value+'\"')}function x(a,b,c,e){a=a(b,c);if(!a.success)return a;return a.value===e?d(\"WAResultOrError\").makeResult(e):H(b,'to have \"'+c+'\"={'+e+'}, but instead has \"'+a.value+'\"')}function y(a,b,c){a=a(b);if(!a.success)return a;return a.value===c?d(\"WAResultOrError\").makeResult(c):H(b,'to have content \"'+c+'\", but instead has \"'+a.value+'\"')}function z(a,b,c){var e=i(a,b);if(!e.success)return e;var f=c[e.value];if(f!=null)return d(\"WAResultOrError\").makeResult(f);f=Object.values(c).join(\"|\");return H(a,'to have \"'+b+'\"={'+f+'}, but instead has \"'+e.value+'\"')}function A(a,b){var c=B(a);if(!c.success)return c;var e=b[c.value];if(e!=null)return d(\"WAResultOrError\").makeResult(e);e=Object.values(b).join(\"|\");return H(a,'to have content \"'+e+'\", but instead has \"'+c.value+'\"')}function B(a){var b=C(a);if(!b.success)return b;else try{b=new(d(\"WABinary\").Binary)(b.value);b=b.readString(b.size());return d(\"WAResultOrError\").makeResult(b)}catch(b){return H(a,\"to have string content, but run into decoding error: \"+b.message)}}function C(a){var b=a.content;if(b==null)return H(a,\"to have content\");else if(Array.isArray(b))return H(a,\"to have content, but has children instead\");else return d(\"WAResultOrError\").makeResult(b)}function D(a,b){var c=C(a);if(!c.success)return c;return d(\"WACryptoUtils\").uint8ArraysEqual(c.value,b)?d(\"WAResultOrError\").makeResult(b):H(a,'to have content \":binary:'+d(\"WABase64\").encodeB64(b)+'\", but instead has \":binary:'+d(\"WABase64\").encodeB64(c.value)+'\"')}function E(a,b,c){var e=a.content;if(e==null)if(b===void 0||b<1)return d(\"WAResultOrError\").makeResult(new Uint8Array([]));else return H(a,\"to have content\");else if(Array.isArray(e))return H(a,\"to have content, but has children instead\");else{var f=e.length;if(b!==void 0&&f<b)return H(a,\"to have binary content at least \"+b+\" bytes but has \"+f+\" bytes\");else if(c!==void 0&&f>c)return H(a,\"to have binary content at most \"+c+\" bytes but has \"+f+\" bytes\");return d(\"WAResultOrError\").makeResult(e)}}function F(a){return k(a,K,\"integer\")}function G(a){return a}function H(a,b){return d(\"WAResultOrError\").makeError(\"expected <\"+a.tag+\">: \"+b)}function I(a,b){return c(\"WAHasProperty\")(a.attrs,b)}function J(a,b){if(b instanceof d(\"WAWapJid\").WapJid)return d(\"WAResultOrError\").makeResult(b.toString());return typeof b===\"string\"?d(\"WAResultOrError\").makeResult(b):H(a,\"decodeAsString: attribute is \"+typeof b+\" not a string: \"+String(b))}function K(a){a=parseInt(a,10);return Number.isNaN(a)?null:a}function L(a,b,c,e){var f=m(a);if(!f.success)return f;f=f.value;if(f==null)if(c!==0)return H(a,\"to have at least \"+c+\" <\"+b+\"> children, but found 0\");else return d(\"WAResultOrError\").makeResult([]);var g=[];for(var h=0;h<f.length;h++){var i=f[h];i.tag===b&&g.push(i)}i=g.length;if(i<c)return H(a,\"to have at least \"+c+\" <\"+b+\"> children, but found \"+i);else if(i>e)return H(a,\"to have at most \"+e+\" <\"+b+\"> children, but found \"+i);return d(\"WAResultOrError\").makeResult(g)}var M={};function N(a,b,c){var d=b.map(function(a,b){return a+\": \"+c[b].error});return H(a,[\"to match any of following mixins: \"+b.join(\", \")+\", but all mixins failed.\"].concat(d).join(\" \"))}g.voidSuccess=h;g.assertTag=a;g.attrString=i;g.attrValidate=j;g.contentValidate=k;g.assertAttr=b;g.attrStanzaId=e;g.attrInt=l;g.attrIntRange=f;g.maybeChildren=m;g.optionalChild=n;g.optionalChildWithTag=o;g.childWithTag=p;g.flattenedChildWithTag=q;g.mapChildrenWithTag=r;g.countChildrenWithTag=s;g.mapHomogeneousChildrenWithTag=t;g.countHomogeneousChildrenWithTag=u;g.optional=v;g.optionalLiteral=w;g.literal=x;g.literalContent=y;g.attrStringEnum=z;g.contentStringEnum=A;g.contentString=B;g.contentBytes=C;g.contentLiteralBytes=D;g.contentBytesRange=E;g.contentInt=F;g.identity=G;g.errorMessage=H;g.emptyObject=M;g.errorMixinDisjunction=N}),98);\n__d(\"WASmaxParseJid\",[\"WAJids\",\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){return d(\"WASmaxParseUtils\").attrValidate(a,b,d(\"WAJids\").validateUserJid,\"UserJid\")}function b(a,b){return d(\"WASmaxParseUtils\").attrValidate(a,b,d(\"WAJids\").validateDeviceJid,\"DeviceJid\")}function c(a,b){return d(\"WASmaxParseUtils\").attrValidate(a,b,d(\"WAJids\").validateGroupJid,\"GroupJid\")}function e(a,b){return d(\"WASmaxParseUtils\").attrValidate(a,b,d(\"WAJids\").validateCallJid,\"CallJid\")}function f(a,b){return d(\"WASmaxParseUtils\").attrValidate(a,b,d(\"WAJids\").validateDomainJid,\"DomainJid\")}function h(a,b){return d(\"WASmaxParseUtils\").attrValidate(a,b,d(\"WAJids\").validateBroadcastJid,\"BroadcastJid\")}function i(a,b){return d(\"WASmaxParseUtils\").attrValidate(a,b,d(\"WAJids\").validateStatusJid,\"StatusJid\")}function j(a,b){return d(\"WASmaxParseUtils\").attrValidate(a,b,d(\"WAJids\").validateNewsletterJid,\"NewsletterJid\")}function k(a,b,c){var e=d(\"WASmaxParseUtils\").attrString(a,b);if(!e.success)return e;var f=c.validators;c=c.typeName;for(var g=0;g<f.length;g++){var h=f[g](e.value);if(h!=null)return d(\"WAResultOrError\").makeResult(h)}return d(\"WASmaxParseUtils\").errorMessage(a,'to have \"'+b+'\"={'+c+'}, but instead has \"'+e.value+'\"')}function l(a,b,c,e){a=a(b,c);if(!a.success)return a;return a.value===e?a:d(\"WASmaxParseUtils\").errorMessage(b,'to have \"'+c+'\"={'+e+'}, but instead has \"'+a.value+'\"')}function m(a,b,c,e){a=d(\"WASmaxParseUtils\").optional(a,b,c);if(!a.success)return a;return a.value==null||a.value===e?a:d(\"WASmaxParseUtils\").errorMessage(b,'to have \"'+c+'\"={'+e+'}, but instead has \"'+a.value+'\"')}g.attrUserJid=a;g.attrDeviceJid=b;g.attrGroupJid=c;g.attrCallJid=e;g.attrDomainJid=f;g.attrBroadcastJid=h;g.attrStatusJid=i;g.attrNewsletterJid=j;g.attrJidEnum=k;g.literalJid=l;g.optionalLiteralJid=m}),98);\n__d(\"WASmaxParseReference\",[\"WAHasProperty\",\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b,c,d,e){b=j(b,c);if(!b.success)return l(b);a=a(b.value,c[c.length-1],d,e);return!a.success?l(a):a}function a(a,b,c,e,f){return k(b,c)?h(a,b,c,e,f):d(\"WASmaxParseUtils\").voidSuccess}function i(a,b){return h(d(\"WASmaxParseUtils\").attrString,a,b)}function b(a,b){return k(a,b)?i(a,b):d(\"WASmaxParseUtils\").voidSuccess}function e(a,b){a=j(a,b);if(!a.success)return l(a);b=d(\"WASmaxParseUtils\").contentString(a.value);return!b.success?l(b):b}function j(a,b){var c=b.length;a=a;for(var e=0;e<c-1;e++){var f=b[e];f=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,f);if(!f.success)return f;a=f.value}return d(\"WAResultOrError\").makeResult(a)}function k(a,b){a=j(a,b);return a.success&&c(\"WAHasProperty\")(a.value.attrs,b[b.length-1])}function l(a){return d(\"WAResultOrError\").makeError(\"in the reference, \"+a.error)}g.attrFromReference=h;g.optionalAttrFromReference=a;g.attrStringFromReference=i;g.optionalAttrStringFromReference=b;g.contentStringFromReference=e}),98);\n__d(\"WASmaxInPingsClientResponseServerResponse\",[\"WAResultOrError\",\"WASmaxInPingsEnums\",\"WASmaxParseJid\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseJid\").attrJidEnum(a,\"from\",d(\"WASmaxInPingsEnums\").DOMAINJID_USERJID);if(!c.success)return c;var e=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"result\");if(!e.success)return e;b=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",b.value);if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrInt(a,\"t\");return!b.success?b:d(\"WAResultOrError\").makeResult({from:c.value,type:e.value,t:b.value})}g.parseClientResponseServerResponse=a}),98);\n__d(\"WASmaxJsx\",[\"WAWap\"],(function(a,b,c,d,e,f,g){\"use strict\";g.smax=d(\"WAWap\").wap}),98);\n__d(\"WASmaxMixins\",[\"WAArrayBufferUtils\",\"WAWapJid\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"smax$any\";function i(a,b){j(a,b);k(a,b);b.content instanceof Uint8Array?m(a,b.content):b.content!=null&&n(a,b.content);return a}function a(a,b,c,d){return c!=null?a(b,c,d):b}function j(a,b){a=a.tag;b=b.tag;if(b===h)return;if(a!==b)throw new Error(\"tag mismatch: \"+a+\" != \"+b)}function k(a,b){var c=a.attrs,d=b.attrs;Object.keys(d).forEach(function(a){var b=d[a],e=c[a];if(b!=null&&e!=null){if(l(b,e))return;throw new Error(\"conflict for key: \"+a)}c[a]=b})}function l(a,b){if(typeof a===\"string\"&&typeof b===\"string\")return a===b;return a instanceof d(\"WAWapJid\").WapJid&&b instanceof d(\"WAWapJid\").WapJid?a.toString()===b.toString():!1}function m(a,b){var c=a.content;if(c instanceof Uint8Array){if(!d(\"WAArrayBufferUtils\").uint8ArraysEqualUNSAFE(c,b))throw new Error(\"elementValue mismatch: bytes dose not equal\");return}if(c!=null)throw new Error(\"elementValue mismatch: destination has children\");a.content=b}function n(a,b){var c=a.content;if(c instanceof Uint8Array)throw new Error(\"children mismatch: destination has element value\");if(c==null||c.length===0){a.content=b;return}if(!o(c,b))throw new Error(\"children mismatch: child counts are not compatible\");var d=[],e=Array.from(c);b.forEach(function(a){var b=e.findIndex(function(b){return b.tag===a.tag});if(b===-1)d.push(a);else{b=e.splice(b,1);b=i(b[0],a);d.push(b)}});e.forEach(function(a){return d.push(a)});a.content=d}function o(a,b){b=p(b);a=p(a);var c=Object.keys(b);for(var d=0;d<c.length;d++){var e=c[d],f=b[e];e=a[e];if(f!=null&&e!=null&&f!==e)return!1}return!0}function p(a){return a.reduce(function(a,b){b=b.tag;var c=a[b];a[b]=c==null?1:c+1;return a},{})}g.mergeStanzas=i;g.optionalMerge=a}),98);\n__d(\"WASmaxOutPingsClientWellFormedToMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"iq\",{to:d(\"WAWap\").S_WHATSAPP_NET});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeClientWellFormedToMixin=a}),98);\n__d(\"WASmaxOutPingsClientRequest\",[\"WASmaxJsx\",\"WASmaxOutPingsClientWellFormedToMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function a(){var a=d(\"WASmaxOutPingsClientWellFormedToMixin\").mergeClientWellFormedToMixin(d(\"WASmaxJsx\").smax(\"iq\",{id:d(\"WAWap\").generateId(),type:\"get\",xmlns:\"w:p\"}));return a}g.makeClientRequest=a}),98);\n__d(\"WAComms\",[\"Promise\",\"WAArrayUtils\",\"WAErr\",\"WAErrors\",\"WALogger\",\"WANotifyConnectionChangeFactory\",\"WAPromiseRetryLoop\",\"WAResolvable\",\"WAResultOrError\",\"WAShiftTimer\",\"WASmaxInPingsClientResponseServerResponse\",\"WASmaxOutPingsClientRequest\",\"WASmaxParseUtils\",\"WATimeUtils\",\"WAWap\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms has no open socket\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: closeSocket called\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: Socket \",\" closed\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: socketLoopIteration failed \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: socketLoopIteration socket closed while in noise handshake\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: socketLoopIteration socket disconnected while in noise handshake\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: socketLoopIteration socket closed while in noise handshake using treasureHunt strategy\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: Socket \",\" closed\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: Socket \",\" opened\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: Socket \",\" opening\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: maybeResetSocketLoop\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: closeSocketAndPreventRetry called\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handleAck: unrecognized \",\"\"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: job response is NO_ACK\"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: job response is CLOSE_SOCKET\"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose([\"--- Receiving ---\\n\",\"\"],[\"--- Receiving ---\\\\n\",\"\"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failure parsing stanza!\"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms.startHandlingRequests\"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose([\"castStanza error \",\"\"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose([\"castStanza async error \",\"\"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose([\"--- Sending ---\\n\",\"\"],[\"--- Sending ---\\\\n\",\"\"]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\\n\",\"\"],[\"Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\\\\n\",\"\"]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Dropping stanza since onBeforeCastStanza matched. We return mock response directly.\"]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose([\"--- Receive (via SMAX+E2E) ---\\n\",\"\"],[\"--- Receive (via SMAX+E2E) ---\\\\n\",\"\"]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Dropping stanza since onBeforeCastStanza matched:\\n\",\". We return mock response directly.\"],[\"Dropping stanza since onBeforeCastStanza matched:\\\\n\",\". We return mock response directly.\"]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms has no open socket, will resend stanza when socket opens\"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: No stanzaId in ping request stanza\"]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: sendPing ping still pending\"]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: sendPing when socket dead\"]);K=function(){return a};return a}function L(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: Socket \",\" expired\"]);L=function(){return a};return a}function M(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms: testing socket\"]);M=function(){return a};return a}function N(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handleIq no handler for iq\"]);N=function(){return a};return a}function O(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handleIq no handler for iq with id \",\"\"]);O=function(){return a};return a}var P=null,Q=null,R=1,S=0,T=function(){function a(a,c,e){var f=this;this.nextSocketId=1;this.pendingIqs=new Map();this.ackHandlers=[];this.pendingSmaxStanzas=new Map();this.$2=new(d(\"WAResolvable\").Resolvable)();this.socketAbortController=null;this.activePing=null;this.$3=new Set();this.socketId=S;this.socket=null;this.softCloseSocket=null;this.handleStanza=function(a,b,c){var e=d(\"WASmaxParseUtils\").attrString(a,\"id\");if(e.success&&a.tag!==\"receipt\"){e=e.value;var g=f.pendingSmaxStanzas.get(e);if(g){f.pendingSmaxStanzas[\"delete\"](e);g.resolve(a);f.maybeScheduleHealthCheck();return\"NO_ACK\"}}e=$(a);if(e!=null){g=f.pendingIqs.get(e);g?(f.pendingIqs[\"delete\"](e),g.resolve(a),f.maybeScheduleHealthCheck()):(d(\"WALogger\").WARN(O(),e),d(\"WALogger\").ERROR(N()))}else if(a.tag===\"ack\")f.handleAck(a);else return a.tag===\"failure\"&&f.config.shouldBlockReceivingUntilSuccess?f.$1(a,b,c):f.$2.promise.then(function(){return f.$1(a,b,c)});return\"NO_ACK\"};this.healthCheckTimer=new(d(\"WAShiftTimer\").ShiftTimer)(function(){d(\"WALogger\").DEV(M());if(!f.socketId)return;f.sendPing()});this.deadSocketTimer=new(d(\"WAShiftTimer\").ShiftTimer)(function(a){d(\"WALogger\").LOG(L(),a);if(a!==f.socketId)return;f.softCloseSocket&&f.softCloseSocket()});this.sendPing=function(){var a,c,e,f,g,i,j,k;return b(\"regeneratorRuntime\").async(function(l){while(1)switch(l.prev=l.next){case 0:a=Z(\"sendPing\");if(a.socketId){l.next=4;break}d(\"WALogger\").LOG(K());return l.abrupt(\"return\",(h||(h=b(\"Promise\"))).resolve());case 4:if(!(a.activePing&&a.activePing.socketId===a.socketId)){l.next=7;break}d(\"WALogger\").LOG(J());return l.abrupt(\"return\",(h||(h=b(\"Promise\"))).resolve());case 7:a.activePing&&a.activePing.handler.resolve();c=d(\"WASmaxOutPingsClientRequest\").makeClientRequest();e=c.attrs.id;if(!(typeof e!==\"string\")){l.next=13;break}d(\"WALogger\").ERROR(I());return l.abrupt(\"return\",(h||(h=b(\"Promise\"))).resolve());case 13:f=new(d(\"WAResolvable\").Resolvable)();a.activePing={socketId:a.socketId,stanzaId:e,handler:f};a.callStanza(c);l.next=18;return b(\"regeneratorRuntime\").awrap(f.promise);case 18:g=l.sent,g&&(i=d(\"WASmaxInPingsClientResponseServerResponse\").parseClientResponseServerResponse(g,c),i.success&&(j=d(\"WATimeUtils\").castToUnixTime(i.value.t),k=Math.round(Date.now()\/1e3-j),a.config.handlers.onClockSkewUpdate==null?void 0:a.config.handlers.onClockSkewUpdate(k)));case 20:case\"end\":return l.stop()}},null,this)};this.$1=a;this.onConnectionChange=d(\"WANotifyConnectionChangeFactory\").notifyConnectionChangeFactory((a=c.handlers.onConnectionChange)!=null?a:function(){},(a=c.handlers.onOptimisticConnectionChange)!=null?a:function(){});this.gzipInflate=e;this.config=c;this.socketLoop=new(d(\"WAPromiseRetryLoop\").PromiseRetryLoop)({name:\"MainSocketLoop\",code:W,timer:{jitter:.1,max:c.maxSocketLoopWaitTime,algo:{type:\"fibonacci\",first:1e4,second:1e4},relativeDelay:!0},resetDelay:3e4})}var e=a.prototype;e.filterPending=function(a){var b=[];function c(c){a(c)&&b.push(c)}this.pendingIqs.forEach(c);this.ackHandlers.forEach(c);this.pendingSmaxStanzas.forEach(c);return b};e.sendPendingStanza=function(a){a.cleanup==null?void 0:a.cleanup(),a.cleanup=void 0,this.callStanza(a.stanza)};e.maybeSendPendingStanza=function(a){if(a.attempt>=this.config.maxRetries)this.config.handlers.onDropStanza==null?void 0:this.config.handlers.onDropStanza(a),a.cleanup==null?void 0:a.cleanup(),a.cleanup=void 0,this.removeHandler(a,\"max-retries\");else if(this.socket){a.attempt+=1;this.sendPendingStanza(a);return}else d(\"WALogger\").LOG(H())};e.callStanzaAsync=function(a,c){var d;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b(\"regeneratorRuntime\").awrap(this.callStanza(a,c));case 2:d=e.sent;return e.abrupt(\"return\",d);case 4:case\"end\":return e.stop()}},null,this)};e.callStanza=function(a,b){a=this.castStanza(a,b);this.deadSocketTimer.onOrBefore(this.config.deadSocketTime,this.socketId);this.healthCheckTimer.cancel();return a};e.castStanzaAsync=function(a){var c;return b(\"regeneratorRuntime\").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b(\"regeneratorRuntime\").awrap(this.castStanza(a));case 2:c=d.sent;return d.abrupt(\"return\",c);case 4:case\"end\":return d.stop()}},null,this)};e.castStanza=function(a,c){var e=this;try{var f=this.config.handlers.onBeforeCastStanzaForE2E==null?void 0:this.config.handlers.onBeforeCastStanzaForE2E(a,c);if(f!=null){d(\"WALogger\").DEV_XMPP(G(),a);d(\"WALogger\").DEV_XMPP(F(),f);d(\"WALogger\").ERROR(E());if(Array.isArray(f))return(h||(h=b(\"Promise\"))).all(f.map(function(a){return(h||(h=b(\"Promise\"))).resolve(e.handleStanza(a,e.socketId,S))}));else{this.handleStanza(f,this.socketId,S);return(h||(h=b(\"Promise\"))).resolve()}}}catch(a){d(\"WALogger\").DEV_XMPP(D(),a)}f=this.socketOrThrow(\"castStanza\");try{d(\"WALogger\").DEV_XMPP(C(),a);return f.sendFrame(d(\"WAWap\").encodeStanza(a)).then(function(){e.config.handlers.onCastStanza==null?void 0:e.config.handlers.onCastStanza(a,c)})[\"catch\"](function(a){d(\"WALogger\").ERROR(B(),a).devConsole(a);if(a instanceof d(\"WAErrors\").BufferTooLargeError)return(h||(h=b(\"Promise\"))).reject(a)})}catch(a){d(\"WALogger\").ERROR(A(),a).devConsole(a)}return(h||(h=b(\"Promise\"))).resolve()};e.socketOrThrow=function(a){var b=this.socket;if(b)return b;throw c(\"WAErr\")(\"Comms.\"+a+\" called while no socket\")};e.startHandlingRequests=function(){d(\"WALogger\").LOG(z());this.$2.resolve();return this.$2.promise.then(function(){})};e.parseAndHandleStanza=function(a,b){var c=this;a===this.socketId&&(this.deadSocketTimer.cancel(),Q&&(Q.resolve(),Q=null));var e=d(\"WAWap\").decodeStanza(b,this.gzipInflate)[\"catch\"](function(a){d(\"WALogger\").ERROR(y()).devConsole(b);throw a}).then(function(e){d(\"WALogger\").DEV_XMPP(x(),e);c.config.handlers.onHandleStanza==null?void 0:c.config.handlers.onHandleStanza(e,a,b.byteLength);var f=c.activePing;if(f&&f.socketId===a&&f.stanzaId===$(e)){c.activePing=null;f.handler.resolve(e);c.maybeScheduleHealthCheck();return\"NO_ACK\"}return c.handleStanza(e,a,b.byteLength)}).then(function(b){if(a!==c.socketId)return;if(b===\"CLOSE_SOCKET\"){d(\"WALogger\").LOG(w());var e=c.socket;e&&e.close()}else b===\"NO_ACK\"?d(\"WALogger\").DEV(v()):c.castStanza(b);return\"NO_ACK\"});this.$3.add(e);e[\"finally\"](function(){return void c.$3[\"delete\"](e)})};e.handleAck=function(a){var b=this.ackHandlers,c=-1,e=null;while(!e&&++c<b.length)e=b[c].parseAndTest(a);if(e){var f=b[c];d(\"WAArrayUtils\").removeIndexWithoutPreservingOrder(b,c);this.config.handlers.onHandleAck==null?void 0:this.config.handlers.onHandleAck(a);f.resolve(e);this.maybeScheduleHealthCheck()}else d(\"WALogger\").WARN(u(),a)};e.removeHandler=function(a,c){c===void 0&&(c=\"disconnect\");if(a.type===\"iq\"||a.type===\"smax\"){var e=a.stanza.attrs.id;if(!e||typeof e!==\"string\")return;if(a.type===\"iq\"&&!this.pendingIqs[\"delete\"](e)||a.type===\"smax\"&&!this.pendingSmaxStanzas[\"delete\"](e))return}else{a.type;e=this.ackHandlers.indexOf(a);if(e===-1)return;d(\"WAArrayUtils\").removeIndexWithoutPreservingOrder(this.ackHandlers,e)}c===\"disconnect\"?a.resolve((h||(h=b(\"Promise\"))).reject(new(d(\"WAErrors\").Disconnected)())):a.resolve((h||(h=b(\"Promise\"))).reject(new(d(\"WAErrors\").MaxRetries)()))};e.maybeScheduleHealthCheck=function(){if(this.healthCheckTimer.isScheduled())return;if(this.activePing||this.ackHandlers.length||this.pendingIqs.size||this.pendingSmaxStanzas.size)return;var a=this.config.healthCheckInterval;a=Math.ceil(a*1e3*(1+Math.random()));this.healthCheckTimer.onOrBefore(a)};return a}();function a(){return P}function e(a,b,c,d){d===void 0&&(d=!0);if(P)return;P=new T(a,b,c);d&&setTimeout(U,0)}function f(){var a=Z(\"stopComms\");a.socketLoop.endWithValue();a.socket&&X();P=null}function aa(){var a=Z(\"closeSocketAndPreventRetry\");a.socketLoop.endWithValue();a.socket&&(d(\"WALogger\").LOG(t()),X())}function U(){Z(\"openSocketLoop\").socketLoop.start()}function ba(){d(\"WALogger\").LOG(s()),V()||Z(\"maybeResetSocketLoop\").socketLoop.reset()}function ca(){Z(\"forceResetSocketLoop\").socketLoop.reset()}function da(){var a,b=Z(\"socketAbortController\");(a=b.socketAbortController)==null?void 0:a.abort();b.softCloseSocket==null?void 0:b.softCloseSocket()}function V(){var a;return!!((a=P)==null?void 0:a.socket)}function W(){var a=Z(\"socketLoopIteration\"),b=a.nextSocketId++;d(\"WALogger\").LOG(r(),b);var c=function(){a.onConnectionChange(\"in_handshake\")};a.config.handlers.onSocketLoopIteration==null?void 0:a.config.handlers.onSocketLoopIteration(a.socketAbortController);typeof AbortController===\"function\"&&(a.socketAbortController=new AbortController());return a.config.openChatSocket(c,(c=a.socketAbortController)==null?void 0:c.signal).then(d(\"WAResultOrError\").onResult(function(c){a.config.handlers.onSocketOpen==null?void 0:a.config.handlers.onSocketOpen();var e=new(d(\"WAResolvable\").Resolvable)();d(\"WALogger\").LOG(q(),b);a.socketId=b;a.socket=c;a.softCloseSocket=function(){a.softCloseSocket=null,a.socket&&a.config.shouldCloseStaleSocket&&(X(),a.socket=null),e.resolve()};a.socketLoop.resetTimeoutAfter(1e4);a.deadSocketTimer.cancel();a.maybeScheduleHealthCheck();c.setOnFrame(function(c){return a.parseAndHandleStanza(b,c)});c.setOnClose(function(){d(\"WALogger\").LOG(p(),b);a.activePing&&b===a.activePing.socketId&&(a.activePing.handler.resolve(),a.activePing=null);a.filterPending(function(a){return a.attachedToSocketId===b}).forEach(function(b){return void a.removeHandler(b)});if(b!==a.socketId)return;a.socketId=S;a.socket=null;a.onConnectionChange(\"disconnected\");a.config.handlers.onDisconnect==null?void 0:a.config.handlers.onDisconnect();e.resolve()});a.onConnectionChange(\"connected\");a.config.handlers.onConnect==null?void 0:a.config.handlers.onConnect();a.filterPending(function(a){return!a.attachedToSocketId}).sort(function(a,b){return a.orderedId-b.orderedId}).forEach(function(b){switch(b.type){case\"smax\":case\"iq\":a.maybeSendPendingStanza(b);break;case\"ack\":a.callStanza(b.stanza);break;default:b.type;break}});return e.promise})).then(d(\"WAResultOrError\").catchError(function(a){switch(a){case\"max-hunters\":d(\"WALogger\").WARN(o());break;case\"disconnected\":d(\"WALogger\").WARN(n());break;default:a;return}}))[\"catch\"](function(a){a instanceof d(\"WAErrors\").Disconnected?d(\"WALogger\").LOG(m()):d(\"WALogger\").ERROR(l(),a).devConsole(a)})}function X(){var a=Z(\"closeSocket\");a.socket&&(d(\"WALogger\").LOG(k(),a.socketId),d(\"WALogger\").LOG(j()),a.socket.close())}function ea(){Z(\"onStreamErrorReceived\").socketLoop.cancelReset()}function fa(){Z(\"waitForConnection\").sendPing();Q||(Q=new(d(\"WAResolvable\").Resolvable)());return Q.promise}function ga(a,b){var c=Z(\"castStanza\");c.socket?c.castStanza(a,b):d(\"WALogger\").LOG(i())}function ha(a){var b=Z(\"castStanza\");return b.socketId===a}function Y(a,e,f,g,i){f===void 0&&(f=0);i===void 0&&(i=\"iq\");return new(h||(h=b(\"Promise\")))(function(j){var k=Z(\"sendIq\"),l=a.attrs.id;if(!l||typeof l!==\"string\")throw c(\"WAErr\")(\"Comms:sendIq given iq without id: \"+String(a));var m=k.socketId;if(e&&!m){j((h||(h=b(\"Promise\"))).reject(new(d(\"WAErrors\").Offline)()));return}var n=function(){var a=i===\"iq\"?k.pendingIqs.get(l):k.pendingSmaxStanzas.get(l);if(!a){j((h||(h=b(\"Promise\"))).reject(c(\"WAErr\")(\"Comms:_sendIq unexisting stanza to be cancelled: \"+l)));return}k.removeHandler(a)},o=null;if(f>0){var p=setTimeout(n,f*1e3);o=function(){clearTimeout(p)}}if(g!=null)if(g.aborted){j((h||(h=b(\"Promise\"))).reject(new(d(\"WAErrors\").Disconnected)()));return}else g.addEventListener(\"abort\",n),o=function(){g.removeEventListener(\"abort\",n)};m={resolve:j,stanza:a,attachedToSocketId:e?m:S,orderedId:R++,attempt:0,cleanup:o};if(i===\"iq\"){o=babelHelpers[\"extends\"]({type:i},m);k.pendingIqs.set(l,o);k.config.handlers.onSendIq==null?void 0:k.config.handlers.onSendIq(a);k.maybeSendPendingStanza(o)}else{i;o=babelHelpers[\"extends\"]({type:i},m);k.pendingSmaxStanzas.set(l,o);k.maybeSendPendingStanza(o)}})}function ia(a,b){var c,d;c=(c=b==null?void 0:b.withoutRetry)!=null?c:!1;d=(d=b==null?void 0:b.timeoutSeconds)!=null?d:0;b=(b=b==null?void 0:b.signal)!=null?b:null;return Y(a,c,d,b,\"smax\")}function ja(){var a=Z(\"sendPing\");return a.sendPing()}function ka(){return Z(\"startHandlingRequests\").startHandlingRequests()}function la(){P&&P.deadSocketTimer.cancel()}function Z(a){if(P)return P;throw c(\"WAErr\")(\"Comms::\"+a+\" called before startComms\")}function $(a){if(a.tag===\"iq\"){var b=a.attrs.type;if(b===\"result\"||b===\"error\")return d(\"WAWap\").decodeAsString(a.attrs.id)||null}return null}function ma(){return R++}function na(){P=null,Q=new(d(\"WAResolvable\").Resolvable)(),R=1}g.DEFAULT_SOCKET_ID=S;g.getComms=a;g.startComms=e;g.stopComms=f;g.closeSocketAndPreventRetry=aa;g.openSocketLoop=U;g.maybeResetSocketLoop=ba;g.forceResetSocketLoop=ca;g.forceAbortSocketConnection=da;g.isSocketConnected=V;g.socketLoopIteration=W;g.closeSocket=X;g.onStreamErrorReceived=ea;g.waitForConnection=fa;g.castSmaxStanza=ga;g.isActiveSocket=ha;g._sendIq=Y;g.sendSmaxStanza=ia;g.sendPing=ja;g.startHandlingRequests=ka;g.cancelDeadSocketTimer=la;g.singletonOrThrowIfUninitialized=Z;g.getAndIncrementNextOrderedId=ma;g.resetStateForTests=na}),98);\n__d(\"WAParseIqResponse\",[\"WAWap\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c){var e=a.content;if(e&&Array.isArray(e)&&e[0]){e=e[0];if(e.tag===\"error\"){var f=e.attrs||{},g;c&&(typeof c===\"function\"?g=c(a):g=c.parseOrThrow(e));c=g;return{success:!1,errorCode:parseInt(f.code,10),errorText:d(\"WAWap\").decodeAsString(f.text)||\"\",errorType:d(\"WAWap\").decodeAsString(f.type)||\"\",errorBackoff:parseInt(f.backoff,10),toString:h,customError:c}}}if(typeof b===\"function\")return{success:!0,result:b(a)};else return{success:!0,result:b.parseOrThrow(a)}}function h(){return\"IqError \"+this.errorCode+\": \"+this.errorText}g.parseIqResponse=a}),98);\n__d(\"WADeprecatedSendIq\",[\"Promise\",\"WAAckParser\",\"WAArrayUtils\",\"WAComms\",\"WALogger\",\"WAParseIqResponse\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Comms has no open socket, will send stanza when socket opens\"]);i=function(){return a};return a}function a(a,b){return d(\"WAComms\")._sendIq(a,!1).then(function(a){return d(\"WAParseIqResponse\").parseIqResponse(a,b)})}function c(a,b,c){return d(\"WAComms\")._sendIq(a,!1).then(function(a){return d(\"WAParseIqResponse\").parseIqResponse(a,b,c)})}function e(a,b,c){return d(\"WAComms\")._sendIq(a,!1,c).then(function(a){return d(\"WAParseIqResponse\").parseIqResponse(a,b)})}function f(a,b){return d(\"WAComms\")._sendIq(a,!0).then(function(a){return d(\"WAParseIqResponse\").parseIqResponse(a,b)})}function j(a,b){return k(a,b).then(function(){})}function k(a,c){return new(h||(h=b(\"Promise\")))(function(e){var f=d(\"WAComms\").singletonOrThrowIfUninitialized(\"deprecatedSendStanzaAndReturnAck\"),g=function(a){var b=d(\"WAAckParser\").AckParser.parse(a);return!b.error&&d(\"WAAckParser\").ackMatchesTemplate(b.success,c)?a:null},j={type:\"ack\",parseAndTest:g,resolve:e,stanza:a,attachedToSocketId:d(\"WAComms\").DEFAULT_SOCKET_ID,orderedId:d(\"WAComms\").getAndIncrementNextOrderedId()};f.ackHandlers.push(j);if(!f.socket){d(\"WALogger\").LOG(i());return}f.callStanza(a)[\"catch\"](function(a){var c=f.ackHandlers.indexOf(j);if(c===-1)return;d(\"WAArrayUtils\").removeIndexWithoutPreservingOrder(f.ackHandlers,c);j.resolve((h||(h=b(\"Promise\"))).reject(a))})})}function l(a,b){d(\"WAComms\").castSmaxStanza(a,b)}g.deprecatedSendIq=a;g.deprecatedSendIqErrorParser=c;g.deprecatedSendIqIfConnectedWithin=e;g.deprecatedSendIqWithoutRetry=f;g.deprecatedSendStanzaAndWaitForAck=j;g.deprecatedSendStanzaAndReturnAck=k;g.deprecatedCastStanza=l}),98);\n__d(\"MAWCastToServerMediaType\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){switch(a){case\"document\":case\"image\":case\"xma-image\":case\"video\":case\"ptt\":case\"gif\":case\"sticker\":return a;default:return null}}f.castToServerMediaType=a}),66);\n__d(\"MAWOptimisticUploadManager\",[],(function(a,b,c,d,e,f){\"use strict\";var g=new Map();function a(){return g}function b(){g.clear()}f.getOptimisticUploadManager=a;f.clearOptimisticUploadManager=b}),66);\n__d(\"MAWUpdateMediaEntryForMsgApi\",[\"FBLogger\",\"MAWBridgeUpload\",\"MAWCastToMsgrServerMediaType\",\"MAWCastToServerMediaType\",\"MAWDbMediaTxns\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWMediaBackupTxns\",\"MAWOptimisticUploadManager\",\"MAWTransactionMode\",\"WAJids\",\"WALogger\",\"WAMediaUtils\",\"err\",\"isInstamadilloEB\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Missing required arguments for media backup\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Nothing to update if updatedMediaEntry is null\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" msgId does not exist within media entries\"]);j=function(){return a};return a}var k=d(\"MAWIndexedDb\").makeMsgrTransactor({media:(a=d(\"MAWTransactionMode\")).READWRITE,mediaBackup:a.READWRITE,messages:a.READONLY,threads:a.READONLY},\"updateMediaEntryForMsg\",function(a){return function(b,e,f,g,k){var l=d(\"MAWCastToServerMediaType\").castToServerMediaType(k);if(!l){c(\"FBLogger\")(\"labyrinth_web\",\"unsupported_media\").mustfix(\"unsupported media type\");throw c(\"err\")(\"Media type unsupported: \"+((l=k)!=null?l:\"\"))}return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMediaTxns\").maybeGetMediaFromPlaintextHash(a,b),d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,e)]).then(function(b){var l=b[0],m=b[1];if(!m)throw c(\"err\")(\"Message does not exist for the given protocolMsgId\");if(!l)throw c(\"err\")(\"Media does not exist for the given hashedPlaintextHash\");if(!l.msgIds.includes(m.msgId)){d(\"WALogger\").LOG(j(),m.msgId);return}b=l.mediaEntries;var n=b.get(m.msgId);n=f(n);if(n==null){d(\"WALogger\").LOG(i());return}b=babelHelpers[\"extends\"]({},l,{mediaEntries:b.set(m.msgId,n)});g!=null&&(b=babelHelpers[\"extends\"]({},b,{objectId:d(\"WAMediaUtils\").stringToDeliveryObjectId(g)}));var o=d(\"WAMediaUtils\").decodeMediaEntryData(n);return a.media.put(b).then(function(b){return g!=null?d(\"MAWMediaBackupTxns\").linkMediaBackup(a,l.mediaId,m.msgId,d(\"WAMediaUtils\").stringToDeliveryObjectId(g)):d(\"MAWDexieTable\").dexieResolve()}).then(function(){var a=d(\"MAWCastToMsgrServerMediaType\").castToMsgrServerMediaType(k),b=o.mediaKeyTimestamp;g!=null&&a!=null&&b!=null&&a!==\"document\"&&!c(\"isInstamadilloEB\")()?d(\"MAWIndexedDb\").afterTransaction({tag:\"UploadAttachment\",value:d(\"MAWBridgeUpload\").createBridgeUploadAttachment(m.thread,g,a,e.externalId,d(\"MAWGlobals\").getConfig().productTypeForEBAttachments,d(\"WAJids\").threadIdForChatJid(e.chat),m.threadJid,b)}):d(\"WALogger\").WARN(h())})})}});b=function(a,b,c,d,e){l(a,c);return k(a,b,c,d,e)};function l(a,b){var c=d(\"MAWOptimisticUploadManager\").getOptimisticUploadManager(),e=c.get(a);if(e==null)return;b=b();if(b==null)return;c.set(a,babelHelpers[\"extends\"]({},e,{mediaEntry:b}))}g.updateMediaEntryForMsg=b}),98);\n__d(\"WAArmadilloICDC.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={seq:[1,(c=d(\"WAProtoConst\")).TYPES.INT32],timestamp:[2,c.TYPES.INT64],devices:[3,c.FLAGS.REPEATED|c.TYPES.BYTES],signingDeviceIndex:[4,c.TYPES.INT32]};b.internalSpec={details:[1,c.TYPES.BYTES],signature:[2,c.TYPES.BYTES]};g.ICDCIdentityListSpec=a;g.SignedICDCIdentityListSpec=b}),98);\n__d(\"WACryptoEd25519\",[\"WACryptoPrimitives\",\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null;function i(a){var b=h;h=[];try{return a()}finally{((a=h)!=null?a:[]).forEach(function(a){return void a.fill(0)});h=b}}function j(a,b){if(h==null)throw c(\"WAErr\")(\"allocate called outside of active scope\");return new a(b)}function a(a,b,c){d(\"WACryptoPrimitives\").lowlevel.crypto_hash(a,b,c)}function b(a,b){for(var c=0;c<64;++c)b[c]=a[c],a[c]=0;l(a,b);b.fill(0)}function e(a,b){var c=[k(),k(),k(),k()];d(\"WACryptoPrimitives\").lowlevel.scalarbase(c,b);R(a,c)}function k(a){var b=j(Float64Array,16);if(a){if(a.length>16)throw c(\"WAErr\")(\"Incorrect initialiser array provided to the fieldElement\");for(var d=0;d<a.length;d++)b[d]=a[d]}return b}function l(a,b){d(\"WACryptoPrimitives\").lowlevel.modL(a,b)}var m=function(){return k([0])},n=function(){return k([1])},o=function(){return k([2])},p=function(){return k([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])};function q(){return[k(),k(),k(),k()]}function r(){return[k(),k(),k(),k()]}function s(){return[k(),k(),k()]}function t(a,b){var c=0;b=b;while(b>0){var d=b%65536;a[c]=d;b=(b-d)\/65536;c++}}function u(a,b){return T(a,b)?0:1}function v(a){var b=d(\"WACryptoPrimitives\").lowlevel.pack25519,c=j(Uint8Array,32);b(c,a);return c[0]&1}function w(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.S,e=d(\"WACryptoPrimitives\").lowlevel.M,f=o(),g=k();c(g,b);e(a,f,g)}function x(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.S,e=d(\"WACryptoPrimitives\").lowlevel.M,f=d(\"WACryptoPrimitives\").lowlevel.A,g=m(),h=n(),i=k(),j=k(),l=k(),o=k();t(g,486662);c(i,b);e(j,g,b);f(l,i,j);f(o,l,h);e(a,b,o)}function y(a,b,c){c===1&&a.set(b)}var z=new Uint8Array([176,160,14,74,39,27,238,196,120,228,47,173,6,24,67,47,167,215,251,61,153,0,77,43,11,223,193,79,128,36,131,43]);function A(a,b){var c,e=(c=d(\"WACryptoPrimitives\")).lowlevel.unpack25519,f=c.lowlevel.pow2523,g=c.lowlevel.M;c=c.lowlevel.S;var h=k();e(h,z);e=k();f(e,b);f=k();g(f,b,e);e=k();c(e,f);c=k();g(c,f,h);y(f,c,1^u(e,b));a.set(f)}function B(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.Z,e=d(\"WACryptoPrimitives\").lowlevel.A,f=d(\"WACryptoPrimitives\").lowlevel.M,g=n(),h=k(),i=k(),j=k();c(h,b,g);e(i,b,g);S(j,i);f(a,h,j)}function C(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.Z,e=m();c(a,e,b)}function D(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3])}function E(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3]);c(a[3],b[0],b[1])}function F(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.S,e=d(\"WACryptoPrimitives\").lowlevel.A,f=d(\"WACryptoPrimitives\").lowlevel.Z;c(a[0],b[0]);c(a[2],b[1]);w(a[3],b[2]);e(a[1],b[0],b[1]);b=k();c(b,a[1]);e(a[1],a[2],a[0]);f(a[2],a[2],a[0]);f(a[0],b,a[1]);f(a[3],a[3],a[2])}var G=new Uint8Array([6,126,69,255,170,4,110,204,130,26,125,75,209,211,161,197,126,79,252,3,220,8,123,210,187,6,160,96,244,237,38,15]);function H(a,b,c){var e=d(\"WACryptoPrimitives\").lowlevel.unpack25519,f=d(\"WACryptoPrimitives\").lowlevel.M,g=k();e(g,G);e=k();B(e,b);var h=k();x(h,b);var i=k();A(i,h);h=k();f(h,b,g);b=k();S(b,i);g=k();f(g,h,b);i=k();C(i,g);y(g,i,v(g)^c);a[0].set(g);a[1].set(e);a[2].set(n());f(a[3],a[0],a[1])}function I(a,b){a[0].set(b[0]),a[1].set(b[1]),a[2].set(b[2])}function J(a,b){var c=s();I(c,b);F(a,c)}function K(a,b){var c=r(),d=s();J(c,b);D(d,c);F(c,d);D(d,c);F(c,d);E(a,c)}function L(a){var b,c=(b=d(\"WACryptoPrimitives\")).lowlevel.S,e=b.lowlevel.M,f=b.lowlevel.pow2523;b=b.lowlevel.pack25519;var g=k(),h=k(),i=k(),j=k(),l=k();f(g,a);c(h,g);c(i,h);e(j,i,a);e(l,j,a);f=new Uint8Array(32);b(f,l);return 1&f[31]}function M(a,b){C(a[0],b[0]),a[1].set(b[1]),a[2].set(b[2]),C(a[3],b[3])}function f(a,b){var c=q();b=U(c,b);if(b!==0)return-1;M(a,c);return 0}function N(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.M,e=d(\"WACryptoPrimitives\").lowlevel.A;b=b;var f=n(),g=m();t(g,486662);var h=k();w(h,b);b=k();e(b,h,f);h=k();S(h,b);f=k();c(f,h,g);b=k();C(b,f);c=k();x(c,b);h=L(c);f=k([0]);y(f,g,h);c=k();e(c,b,f);g=k();C(g,c);y(c,g,h);a.set(c)}function O(a){var b=d(\"WACryptoPrimitives\").lowlevel.unpack25519;a=d(\"WACryptoPrimitives\").hash(a);var c=(a[31]&128)>>7;a[31]&=127;var e=k();b(e,a);b=k();P(b,e);a=q();H(a,b,c);e=q();K(e,a);return e}function P(a,b){return i(function(){return N(a,b)})}function Q(a){return i(function(){return O(a)})}function R(a,b){var c=k(),e=k(),f=k(),g=d(\"WACryptoPrimitives\").lowlevel.M,h=d(\"WACryptoPrimitives\").lowlevel.pack25519;S(f,b[2]);g(c,b[0],f);g(e,b[1],f);h(a,e);g=new Uint8Array(32);h(g,c);a[31]^=(g[0]&1)<<7}function S(a,b){var c=k();c.set(b);var e=d(\"WACryptoPrimitives\").lowlevel.M,f=d(\"WACryptoPrimitives\").lowlevel.S;for(var g=253;g>=0;--g)f(c,c),g!==2&&g!==4&&e(c,c,b);a.set(c)}function T(a,b){var c=d(\"WACryptoPrimitives\").lowlevel.pack25519,e=d(\"WACryptoPrimitives\").lowlevel.crypto_verify_32,f=new Uint8Array(32),g=new Uint8Array(32);c(f,a);c(g,b);return e(f,0,g,0)}function U(a,b){var c,e=(c=d(\"WACryptoPrimitives\")).lowlevel.set25519,f=c.lowlevel.S,g=c.lowlevel.M,h=c.lowlevel.Z,i=c.lowlevel.A,j=c.lowlevel.D,l=c.lowlevel.unpack25519;c=c.lowlevel.pow2523;var o=k(),q=k(),r=k(),s=k(),t=k(),u=k(),v=k();e(a[2],n());l(a[1],b);f(r,a[1]);g(s,r,j);h(r,r,a[2]);i(s,a[2],s);f(t,s);f(u,t);g(v,u,t);g(o,v,r);g(o,o,s);c(o,o);g(o,o,r);g(o,o,s);g(o,o,s);g(a[0],o,s);f(q,a[0]);g(q,q,s);T(q,r)&&g(a[0],a[0],p());f(q,a[0]);g(q,q,s);if(T(q,r))return-1;V(a[0])===b[31]>>7&&h(a[0],m(),a[0]);g(a[3],a[0],a[1]);return 0}function V(a){var b=d(\"WACryptoPrimitives\").lowlevel.pack25519,c=new Uint8Array(32);b(c,a);return c[0]&1}g.runInAllocationScope=i;g.allocate=j;g.hashSha512=a;g.reduce=b;g.scalarmultBase=e;g.fieldElement=k;g.modL=l;g.p3Element=q;g.unpack=f;g.elligator=P;g.hashToPoint=Q;g.pack=R;g.inv25519=S;g.unpackneg=U}),98);\n__d(\"WADevicesState\",[\"Promise\",\"WAErr\",\"WALogger\",\"WAResolvable\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"GetDevices cahce is already initialized\"]);i=function(){return a};return a}var j=null;function a(a){if(j!=null){d(\"WALogger\").WARN(i());return}j=new k(a)}function e(){if(j==null)throw c(\"WAErr\")(\"GetDevices cache is not initialized\");return j}var k=function(){function a(a){this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitForUserDevices=function(a,c,e){var f=this;e===void 0&&(e=!1);var g=new Map(),i=[];a.forEach(function(a){var b=f.$1.get(a);if(b==null){var c=new(d(\"WAResolvable\").Resolvable)();g.set(a,c);f.$1.set(a,c.promise)}else i.push(b)});return(g.size>0?this.$2.fetchAndSaveDevices(new Set(g.keys()),c,e):(h||(h=b(\"Promise\"))).resolve(new Map())).then(function(a){for(var b=g,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var h=e[0];e=e[1];var i=a.get(h);(i==null?void 0:i.success)?e.resolve():(e.reject(\"Failed to fetch devices for user: \"+h),f.$1[\"delete\"](h))}})[\"catch\"](function(a){for(var b=g,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var h=e[0];e=e[1];e.reject(a);f.$1[\"delete\"](h)}}).then(function(){return(h||(h=b(\"Promise\"))).all([].concat(i,Array.from(g.values()).map(function(a){return a.promise}))).then(function(){})})};c.reset=function(a){var c=this;a.forEach(function(a){return c.$1[\"delete\"](a)});return(h||(h=b(\"Promise\"))).resolve()};return a}();g.initDevicesState=a;g.getDevicesState=e}),98);\n__d(\"WAIdentityUtils\",[\"WABinary\",\"WACryptoDependencies\",\"WASignalOther\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){var b=a.length===33&&a[0]===5;return b?a.slice(1):a}function i(a,b){for(var c=0;c<a.length&&c<b.length;++c)if(a[c]!==b[c])return a[c]-b[c];return a.length-b.length}function a(a){a=a.map(function(a){return h(a)});var b=new(d(\"WABinary\").Binary)();a.sort(i).forEach(function(a){return b.writeByteArray(a)});a=d(\"WACryptoDependencies\").getCrypto().subtle.digest(\"SHA-256\",b.readByteArray());return a.then(function(a){a=new Uint8Array(a);return d(\"WASignalOther\").sliceBytes(a,0,10)})}g.removeKeyTypeIfNeeded=h;g.computeIdentitiesHash=a}),98);\n__d(\"WAProtocolQueueState\",[\"Promise\",\"WAProtocolQueue\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){var c=d(\"WAProtocolQueue\").protocolQueue();void (h||(h=b(\"Promise\"))).all(a.map(function(a){return c.write(a)}));return h.resolve()}function c(a){void d(\"WAProtocolQueue\").protocolQueue().write(a);return(h||(h=b(\"Promise\"))).resolve()}function e(a){return d(\"WAProtocolQueue\").protocolQueue().ack(a)}function f(a){return d(\"WAProtocolQueue\").protocolQueue()[\"delete\"](a)}var i=function(a){var c,e,f,g,h,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:c=a.jid,e=a.priority,f=a.limit,g=a.order;if(!(c!=null&&e!=null)){j.next=7;break}j.next=4;return b(\"regeneratorRuntime\").awrap(d(\"WAProtocolQueue\").protocolQueue().index(\"[jid+priority]\").equals([c,e],f,g));case 4:h=j.sent;j.next=22;break;case 7:if(!(c!=null)){j.next=13;break}j.next=10;return b(\"regeneratorRuntime\").awrap(d(\"WAProtocolQueue\").protocolQueue().index(\"jid\").equals([c],f,g));case 10:h=j.sent;j.next=22;break;case 13:if(!(e!=null)){j.next=19;break}j.next=16;return b(\"regeneratorRuntime\").awrap(d(\"WAProtocolQueue\").protocolQueue().index(\"priority\").equals([e],f,g));case 16:h=j.sent;j.next=22;break;case 19:j.next=21;return b(\"regeneratorRuntime\").awrap(d(\"WAProtocolQueue\").protocolQueue().read(f,g));case 21:h=j.sent;case 22:i=d(\"WAProtocolQueue\").mapProtocolEntriesV2toV1(h);return j.abrupt(\"return\",i);case 24:case\"end\":return j.stop()}},null,this)},j=function(){return d(\"WAProtocolQueue\").protocolQueue().read(1).then(function(a){return a.length===0})};g.persistStanzas=a;g.persistStanza=c;g.ackProtocols=e;g.deleteQueueIDs=f;g.where=i;g.isProtocolQueueEmpty=j}),98);\n__d(\"WASignalSignatures\",[\"Promise\",\"WACryptoDependencies\",\"WACryptoEd25519\",\"WACryptoPrimitives\",\"WAErr\",\"WAHex\",\"WALogger\",\"WALongInt\",\"WASignalKeys\",\"WASignalLocalStorageProtocol.pb\",\"WASignalOther\",\"decodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"deserializeSignedPreKey error \",\"\"]);i=function(){return a};return a}function j(a,b,c){return d(\"WACryptoEd25519\").runInAllocationScope(function(){var e,f=b.length,g=a.privateKey,h=new Uint8Array(32);(e=d(\"WACryptoEd25519\")).scalarmultBase(h,g);var i=h[31]&128,j=new Uint8Array(f+128);j[0]=254;j.fill(255,1,32);j.set(g,32);j.set(b,64);j.set(c,f+64);var k=e.allocate(Uint8Array,64);e.hashSha512(k,j,f+128);j.set(h,32);h=e.allocate(Float64Array,64);e.reduce(k,h);e.scalarmultBase(j,k);var l=e.allocate(Uint8Array,64);e.hashSha512(l,j,f+64);e.reduce(l,h);for(f=0;f<32;++f)h[f]=k[f];for(f=0;f<32;++f)for(k=0;k<32;++k)h[f+k]+=l[f]*g[k];e.modL(j.subarray(32,64),h);return{pubKeyNegative:i!==0,signedMsg:j}})}function a(a,c){return(h||(h=b(\"Promise\"))).resolve().then(function(){var b=d(\"WASignalOther\").makeBytes(64);d(\"WACryptoDependencies\").getCrypto().getRandomValues(b);return k(a,c,b)})}function e(a,b,c){var e=c[63];return e&96?!1:d(\"WACryptoEd25519\").runInAllocationScope(function(){var f,g,h=(f=d(\"WACryptoPrimitives\")).lowlevel.A,i=f.lowlevel.M,j=f.lowlevel.Z,k=f.lowlevel.pack25519,l=f.lowlevel.unpack25519,m=(g=d(\"WACryptoEd25519\")).allocate(Uint8Array,64);m.set(c);m[63]=e&127;var n=g.fieldElement(),o=g.fieldElement(),p=g.fieldElement(),q=g.fieldElement(),r=g.fieldElement(),s=g.allocate(Uint8Array,32),t=g.fieldElement();t[0]=1;l(n,a.subarray(1));j(o,n,t);h(p,n,t);g.inv25519(q,p);i(r,o,q);k(s,r);s[31]=s[31]&127|e&128;return f.signDetachedVerify(b,m,s)})}function k(a,b,c){a=j(a,b,c);b=d(\"WASignalOther\").sliceBytes(a.signedMsg,0,64);b[63]=b[63]&127|(a.pubKeyNegative?128:0);return b}function l(a,b,e){var f=d(\"WASignalKeys\").makeKeyPair(),g=d(\"WASignalOther\").makeBytes(64);d(\"WACryptoDependencies\").getCrypto().getRandomValues(g);e=k(e,d(\"WASignalKeys\").serializePubKey(f),g);if(!Number.isSafeInteger(b))throw c(\"WAErr\")(\"Expected timestamp to be a safe integer, given \"+String(b));return{id:d(\"WASignalKeys\").castToPreKeyId(a),ts:b,keyPair:f,signature:e}}function f(a,b){var c=d(\"WASignalOther\").makeBytes(64);d(\"WACryptoDependencies\").getCrypto().getRandomValues(c);return k(a,b,c)}function m(a){var b=a.id,c=a.keyPair;return d(\"WASignalOther\").encodeSignalProto(d(\"WASignalLocalStorageProtocol.pb\").SignedPreKeyRecordStructureSpec,{id:b,publicKey:d(\"WASignalKeys\").serializePubKey(c),privateKey:c.privateKey,signature:a.signature,timestamp:a.ts})}function n(a){try{a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WASignalLocalStorageProtocol.pb\").SignedPreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey,e=a.privateKey,f=a.signature;a=a.timestamp;return b==null||c==null||e==null||f==null||a==null?null:{id:d(\"WASignalKeys\").castToSignedPreKeyId(b),ts:d(\"WALongInt\").numberOrThrowIfTooLarge(a),keyPair:d(\"WASignalKeys\").makeKeyPairFromSerialized(d(\"WASignalOther\").toBytes(e,32),d(\"WASignalKeys\").castToSerializedPubKey(new Uint8Array(c))),signature:d(\"WASignalOther\").toBytes(f,64)}}catch(a){d(\"WALogger\").DEV(i(),a);return null}}function o(a){return new Uint8Array(d(\"WAHex\").parseHex(a))}function p(a){if(a.length===33)return d(\"WASignalKeys\").castToSerializedPubKey(a);else if(a.length===32)return d(\"WASignalKeys\").serializeIdentity(a);else throw c(\"WAErr\")(\"verifyCertificate publicKey incorrect length\")}function q(a,c,d){return(h||(h=b(\"Promise\"))).resolve().then(function(){var b=l(a,c,d),e=m(b);return{plainObject:b,record:e}})}g.signMsg=a;g.verifyMsgSignalVariant=e;g.makeSignature=k;g.makeSignedPreKey=l;g.signSenderKeyMessage=f;g.serializeSignedPreKeyForPrivateStorage=m;g.deserializeSignedPreKey=n;g.convertPublicKeyHexToUint8Array=o;g.convertPublicKeyToSerializedPubKey=p;g.generateSignedPreKey=q}),98);\n__d(\"WAICDCUtils\",[\"WAArmadilloICDC.pb\",\"WABase64\",\"WABinary\",\"WABridge\",\"WACryptoDependencies\",\"WACryptoEd25519\",\"WACryptoUtils\",\"WADevicesState\",\"WAErr\",\"WAGlobals\",\"WAIdentityUtils\",\"WAJids\",\"WALogger\",\"WAOdsEnums\",\"WAProtocolQueue\",\"WAProtocolQueueState\",\"WASignalKeys\",\"WASignalOther\",\"WASignalSignatures\",\"WATimeUtils\",\"decodeProtobuf\",\"encodeProtobuf\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"The number of ICDC failures is higher \",\" than allowed amount \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to wait for user devices: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"flushing ICDC payload with \",\" entries from \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"flushing ICDC payload returned early\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"flushing ICDC payload\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"ICDC timestamp is negative. time: \",\", closkSkew: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"signingDeviceIndex not found. This should never happen. \",\". caller: \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Received ICDC has mismatched missed signingDeviceIndex\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Received ICDC has mismatched timestamp between XML node and byte structure\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Received ICDC has mismatched sequence between XML node and byte structure\"]);q=function(){return a};return a}function a(a,b,c,e){if(a!==e.details.seq){d(\"WALogger\").ERROR(q());return null}if(c!==e.details.timestamp){d(\"WALogger\").ERROR(p());return null}if(e.details.signingDeviceIndex==null){d(\"WALogger\").ERROR(o());return null}var f=e.details.signingDeviceIndex;return{dirty:b,sequence:a,timestamp:c,signingDeviceIndex:f,devices:e.details.devices.map(function(a){return new Uint8Array(a)})}}function r(a){return a.signingDeviceIndex<0||a.signingDeviceIndex>=a.devices.length}function s(a,b){if(r(b))return null;var c=new Set(),e=new Set();b.devices.forEach(function(a){c.add(a.id),e.add(a.identity.toString())});var f=new Set(),g=new Set();a.devicesInfo.forEach(function(a){var b=d(\"WAJids\").extractDeviceId(a.jid);a=d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(a.identity);(!c.has(b)||!e.has(a.toString()))&&(f.add(b),g.add(a.buffer))});return{seq:b.sequence,signingDevice:d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(b.devices[b.signingDeviceIndex].identity).buffer,unknownDevices:Array.from(g),unknownDeviceIds:Array.from(f)}}function e(a,b,c){var d=new Map();c.forEach(function(a){d.set(a.user,a)});c=d.get(a.user);var e=void 0;c!=null&&(e=s(a,c));var f=[],g=[];b.forEach(function(a){var b=d.get(a.user);if(b!=null){b=s(a,b);b!=null&&f.push(b)}g.push(a.user)});return{senderIdentity:(a=e)!=null?a:void 0,recipientIdentities:f,recipientUserJids:g}}function t(a,b,c){if(a==null){d(\"WABridge\").getBridge().fireAndForget(\"event\",\"odsBumpEntityKey\",{entity:d(\"WAOdsEnums\").Entity.ICDC,key:\"missing_icdc_payload\"});return{action:\"none\"}}else if(b==null||a.seq==null||a.signingDevice==null){b==null&&d(\"WABridge\").getBridge().fireAndForget(\"event\",\"odsBumpEntityKey\",{entity:d(\"WAOdsEnums\").Entity.ICDC,key:\"error.missing_stored_icdc\"});(a.seq==null||a.signingDevice==null)&&d(\"WABridge\").getBridge().fireAndForget(\"event\",\"odsBumpEntityKey\",{entity:d(\"WAOdsEnums\").Entity.ICDC,key:\"error.invalid_icdc_payload\"});return{action:\"error\",failureTs:d(\"WATimeUtils\").unixTime(),sync:!0}}var e=a.seq,f=a.signingDevice;if(e===b.sequence){var g=new Set();c.forEach(function(a){return g.add(d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(a).toString())});e=!g.has(new Uint8Array(f).toString());b=a.unknownDevices.some(function(a){return!g.has(new Uint8Array(a).toString())});if(e||b){d(\"WABridge\").getBridge().fireAndForget(\"event\",\"odsBumpEntityKey\",{entity:d(\"WAOdsEnums\").Entity.ICDC,key:\"error.unknow_device\"});return{action:\"error\",failureTs:d(\"WATimeUtils\").unixTime(),sync:!0}}}else{d(\"WABridge\").getBridge().fireAndForget(\"event\",\"odsBumpEntityKey\",{entity:d(\"WAOdsEnums\").Entity.ICDC,key:\"error.incorrect_seq\"});return{action:\"error\",failureTs:d(\"WATimeUtils\").unixTime(),sync:!0}}return{action:\"none\"}}function f(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAArmadilloICDC.pb\").SignedICDCIdentityListSpec,a);var b=a.signature;a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAArmadilloICDC.pb\").ICDCIdentityListSpec,a.details);return{signature:b,details:a}}function u(a){return a.map(function(a){return d(\"WASignalKeys\").serializeIdentity(new Uint8Array(d(\"WABase64\").decodeB64UrlSafe(a)))})}function v(a,b,e,f,g){var h=d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(a.publicKey);e=e.map(function(a){return d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(a)});var i=e.findIndex(function(a){return d(\"WACryptoUtils\").uint8ArraysEqual(a,h)});if(i===-1){d(\"WALogger\").ERROR(n(),f,g);throw c(\"WAErr\")(\"signingDeviceIndex not found\")}f=b==null?1:b+1;g=d(\"WATimeUtils\").unixTime();g<0&&d(\"WALogger\").ERROR(m(),Date.now(),d(\"WATimeUtils\").getClockSkew());b={seq:f,timestamp:g,devices:e,signingDeviceIndex:i};f=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAArmadilloICDC.pb\").ICDCIdentityListSpec,b).readBuffer();g=w(a,d(\"WABinary\").Binary.build(f).readByteArray());e={details:f,signature:g};i=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAArmadilloICDC.pb\").SignedICDCIdentityListSpec,e).readBuffer();return{icdcInfo:b,encodedSignedICDC:i}}function w(a,b){var c=d(\"WASignalOther\").makeBytes(64);d(\"WACryptoDependencies\").getCrypto().getRandomValues(c);var e=new Uint8Array(64);d(\"WACryptoEd25519\").hashSha512(e,b,b.length);e=d(\"WASignalSignatures\").makeSignature(a,b,c);return d(\"WABinary\").Binary.build(e).readBuffer()}var x=4*d(\"WATimeUtils\").HOUR_SECONDS;function y(a){return a==null?!0:!d(\"WATimeUtils\").happenedWithin(a,x)}var z=function(){function a(){this.$1=[]}var c=a.prototype;c.enqueue=function(a){this.$1.push(a)};c.flush=function(a,c,e){var f,g,m,n,o,p,q,r,s,u,v,w,x,y,z,A,B,C,D,E,F,G,H;return b(\"regeneratorRuntime\").async(function(I){while(1)switch(I.prev=I.next){case 0:c.LOG(l()),f=new Map(),(g=this.$1,m=Array.isArray(g),n=0,g=m?g:g[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 3:if(!m){I.next=9;break}if(!(n>=g.length)){I.next=6;break}return I.abrupt(\"break\",18);case 6:o=g[n++];I.next=13;break;case 9:n=g.next();if(!n.done){I.next=12;break}return I.abrupt(\"break\",18);case 12:o=n.value;case 13:a=o,p=a.from,f.set(p,a);case 16:I.next=3;break;case 18:q=Array.from(f.values());if(!(q.length===0)){I.next=24;break}c.LOG(k());return I.abrupt(\"return\");case 24:c.LOG(j(),q.length,Array.from(f.keys()).join(\",\"));case 25:e=new Set(q.map(function(a){a=a.from;return d(\"WAJids\").extractUserJid(a)}));I.next=28;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().loadContacts(Array.from(e)));case 28:r=I.sent,s=new Set(),u=new Set(),v=[],(w=q.slice(),x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 33:if(!x){I.next=39;break}if(!(y>=w.length)){I.next=36;break}return I.abrupt(\"break\",56);case 36:A=w[y++];I.next=43;break;case 39:y=w.next();if(!y.done){I.next=42;break}return I.abrupt(\"break\",56);case 42:A=y.value;case 43:B=A;C=B.icdc;p=B.from;D=B.serverTs;E=d(\"WAJids\").extractUserJid(p);F=r.get(E);G=t(C.senderIdentity,F==null?void 0:F.icdcInfo,(F==null?void 0:(z=F.icdcInfo)==null?void 0:z.devices.map(function(a){return d(\"WASignalKeys\").serializeIdentity(a)}))||[]);if(!(G.action===\"error\")){I.next=54;break}H=function(){var a;G.sync&&s.add(E);var b=G.failureTs;a=((a=F==null?void 0:F.icdcFails)!=null?a:[]).filter(function(a){return a.timeBucket>=d(\"WATimeUtils\").pastUnixTime(d(\"WAGlobals\").getConfig().icdcIntervalInMinutes()*60,b)});if(a.length>0&&d(\"WATimeUtils\").futureUnixTime(d(\"WAGlobals\").getConfig().icdcCooldownIntervalInMinutes()*60,a[a.length-1].timeBucket)>b)return\"continue\";F!=null&&(u.add(E),r.set(E,babelHelpers[\"extends\"]({},F,{icdcFails:[].concat(a,[{timeBucket:b,alert:!0}])})));var c=d(\"WAGlobals\").getConfig().icdcAlertTriggerFailureCounter(),e=a.filter(function(a){return a.alert===!0}).length>=c;e&&(d(\"WALogger\").WARN(h(),a.length,c),v.push({type:\"instruction\",instruction:\"icdcError\",consumerRetries:0,jid:d(\"WAJids\").extractUserJid(p),notificationTs:D,priority:d(\"WAGlobals\").getConfig().isIdleOQM1()?d(\"WAProtocolQueue\").WAProtocolQueuePriorityLow:d(\"WAProtocolQueue\").WAProtocolQueuePriorityHigh}))}();if(!(H===\"continue\")){I.next=54;break}return I.abrupt(\"continue\",54);case 54:I.next=33;break;case 56:s.size>0&&d(\"WADevicesState\").getDevicesState().waitForUserDevices(Array.from(s),\"ICDC\")[\"catch\"](function(a){d(\"WALogger\").ERROR(i(),a)});if(!(u.size>0)){I.next=60;break}I.next=60;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().bulkPutContacts(Array.from(u).flatMap(function(a){a=r.get(a);return a?[a]:[]})));case 60:if(!(v.length>0)){I.next=63;break}I.next=63;return b(\"regeneratorRuntime\").awrap(d(\"WAProtocolQueueState\").persistStanzas(v));case 63:this.$1=[];case 64:case\"end\":return I.stop()}},null,this)};return a}(),A=new z();g.validateAndPrepareICDCFromNotification=a;g.isICDCIndexInvalid=r;g.computeICDCParticipantDevices=e;g.validateICDCInfo=t;g.decodeICDCInfo=f;g.base64DeviceIdentitiesToSerializedPubKeys=u;g.computeICDCInfoForUpload=v;g.isLastSyncTsExpired=y;g.ICDCFlushable=z;g.icdcFlushable=A}),98);\n__d(\"WAConvertRegistrationIdMixin\",[\"WAParsableXmlNode\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return d(\"WAParsableXmlNode\").convertBytesToUint(a.registrationElementValue,4)}g.registrationIdMixin=a}),98);\n__d(\"WAConvertSignedPreKeyMixin\",[\"WAParsableXmlNode\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return{id:d(\"WAParsableXmlNode\").convertBytesToUint(a.skeyIdKeyIDMixin.elementValue,3),pubkey:a.skeyValueKeyDataMixin.elementValue,signature:a.skeySignatureElementValue}}g.convertSignedPreKeyMixin=a}),98);\n__d(\"WASmaxInPreKeysIQErrorResponseMixin\",[\"WAResultOrError\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!c.success)return c;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",c.value);if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!c.success)return c;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",c.value);if(!b.success)return b;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"error\");return!c.success?c:d(\"WAResultOrError\").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);\n__d(\"WASmaxInPreKeysIQErrorBadRequestMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"bad-request\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",400);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);\n__d(\"WASmaxInPreKeysIQErrorFallbackClientMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrString(a,\"text\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").attrIntRange(a,\"code\",400,499);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackClientMixin=a}),98);\n__d(\"WASmaxInPreKeysIQErrorNoValidJIDMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"not-acceptable\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",406);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorNoValidJIDMixin=a}),98);\n__d(\"WASmaxInPreKeysRequestErrorsFetch\",[\"WAResultOrError\",\"WASmaxInPreKeysIQErrorBadRequestMixin\",\"WASmaxInPreKeysIQErrorFallbackClientMixin\",\"WASmaxInPreKeysIQErrorNoValidJIDMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInPreKeysIQErrorBadRequestMixin\").parseIQErrorBadRequestMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorBadRequest\",value:b.value});var c=d(\"WASmaxInPreKeysIQErrorNoValidJIDMixin\").parseIQErrorNoValidJIDMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorNoValidJID\",value:c.value});var e=d(\"WASmaxInPreKeysIQErrorFallbackClientMixin\").parseIQErrorFallbackClientMixin(a);return e.success?d(\"WAResultOrError\").makeResult({name:\"IQErrorFallbackClient\",value:e.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"IQErrorBadRequest\",\"IQErrorNoValidJID\",\"IQErrorFallbackClient\"],[b,c,e])}g.parseRequestErrorsFetch=a}),98);\n__d(\"WASmaxInPreKeysFetchKeyBundlesResponseRequestError\",[\"WAResultOrError\",\"WASmaxInPreKeysIQErrorResponseMixin\",\"WASmaxInPreKeysRequestErrorsFetch\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;a=d(\"WASmaxInPreKeysIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxInPreKeysRequestErrorsFetch\").parseRequestErrorsFetch(c.value);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{errorRequestErrorsFetch:b.value}))}g.parseFetchKeyBundlesResponseRequestError=a}),98);\n__d(\"WASmaxInPreKeysIQErrorFallbackServerMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrString(a,\"text\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").attrIntRange(a,\"code\",500,599);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackServerMixin=a}),98);\n__d(\"WASmaxInPreKeysIQErrorServiceUnavailableMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"service-unavailable\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",503);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);\n__d(\"WASmaxInPreKeysServerErrors\",[\"WAResultOrError\",\"WASmaxInPreKeysIQErrorFallbackServerMixin\",\"WASmaxInPreKeysIQErrorServiceUnavailableMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInPreKeysIQErrorServiceUnavailableMixin\").parseIQErrorServiceUnavailableMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorServiceUnavailable\",value:b.value});var c=d(\"WASmaxInPreKeysIQErrorFallbackServerMixin\").parseIQErrorFallbackServerMixin(a);return c.success?d(\"WAResultOrError\").makeResult({name:\"IQErrorFallbackServer\",value:c.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"IQErrorServiceUnavailable\",\"IQErrorFallbackServer\"],[b,c])}g.parseServerErrors=a}),98);\n__d(\"WASmaxInPreKeysFetchKeyBundlesResponseServerError\",[\"WAResultOrError\",\"WASmaxInPreKeysIQErrorResponseMixin\",\"WASmaxInPreKeysServerErrors\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;a=d(\"WASmaxInPreKeysIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxInPreKeysServerErrors\").parseServerErrors(c.value);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{errorServerErrors:b.value}))}g.parseFetchKeyBundlesResponseServerError=a}),98);\n__d(\"WASmaxInPreKeysEnums\",[\"WAJids\"],(function(a,b,c,d,e,f,g){b={validators:[(a=d(\"WAJids\")).validateDeviceJid,a.validateDeviceJid],typeName:\"DeviceJid|DeviceJid\"};c={validators:[a.validateDeviceJid,a.validateDeviceJid,a.validateInteropDeviceJid,a.validateInteropDeviceJid],typeName:\"DeviceJid|DeviceJid|InteropDeviceJid|InteropDeviceJid\"};e={validators:[a.validateDeviceJid,a.validateDomainJid],typeName:\"DeviceJid|DomainJid\"};f={validators:[a.validateUserJid,a.validateUserJid],typeName:\"UserJid|UserJid\"};g.DEVICEJID_DEVICEJID=b;g.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=c;g.DEVICEJID_DOMAINJID=e;g.USERJID_USERJID=f}),98);\n__d(\"WASmaxInPreKeysIQResultResponseMixin\",[\"WAResultOrError\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!c.success)return c;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",c.value);if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!c.success)return c;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",c.value);if(!b.success)return b;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"result\");return!c.success?c:d(\"WAResultOrError\").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);\n__d(\"WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"user\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").attrString(b.value,\"text\");if(!a.success)return a;b=d(\"WASmaxParseUtils\").attrIntRange(b.value,\"code\",500,599);return!b.success?b:d(\"WAResultOrError\").makeResult({errorText:a.value,errorCode:b.value})}g.parseFetchKeyBundlesUserErrorFallbackMixin=a}),98);\n__d(\"WASmaxInPreKeysFetchKeyBundlesUserErrorMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"user\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").attrString(b.value,\"text\");if(!a.success)return a;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,b.value,\"code\",500);return!b.success?b:d(\"WAResultOrError\").makeResult({errorText:a.value,errorCode:b.value})}g.parseFetchKeyBundlesUserErrorMixin=a}),98);\n__d(\"WASmaxInPreKeysDeviceIdentityMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"device-identity\");if(!a.success)return a;a=d(\"WASmaxParseUtils\").contentBytes(a.value);return!a.success?a:d(\"WAResultOrError\").makeResult({deviceIdentityElementValue:a.value})}g.parseDeviceIdentityMixin=a}),98);\n__d(\"WASmaxInPreKeysKeyDataMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseUtils\").contentBytesRange(a,32,32);return!a.success?a:d(\"WAResultOrError\").makeResult({elementValue:a.value})}g.parseKeyDataMixin=a}),98);\n__d(\"WASmaxInPreKeysIdentityKeyMixin\",[\"WASmaxInPreKeysKeyDataMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"identity\");if(!a.success)return a;a=d(\"WASmaxInPreKeysKeyDataMixin\").parseKeyDataMixin(a.value);return!a.success?a:a}g.parseIdentityKeyMixin=a}),98);\n__d(\"WASmaxInPreKeysKeyTypeMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"type\");if(!a.success)return a;a=d(\"WASmaxParseUtils\").contentLiteralBytes(a.value,new Uint8Array([5]));return!a.success?a:d(\"WAResultOrError\").makeResult({typeElementValue:a.value})}g.parseKeyTypeMixin=a}),98);\n__d(\"WASmaxInPreKeysKeyIDMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"id\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").contentBytesRange(a,3,3);return!b.success?b:d(\"WAResultOrError\").makeResult({elementValue:b.value})}g.parseKeyIDMixin=a}),98);\n__d(\"WASmaxInPreKeysPreKeyMixin\",[\"WAResultOrError\",\"WASmaxInPreKeysKeyDataMixin\",\"WASmaxInPreKeysKeyIDMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"key\");if(!a.success)return a;var b=d(\"WASmaxParseUtils\").flattenedChildWithTag(a.value,\"id\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a.value,\"value\");if(!a.success)return a;b=d(\"WASmaxInPreKeysKeyIDMixin\").parseKeyIDMixin(b.value);if(!b.success)return b;a=d(\"WASmaxInPreKeysKeyDataMixin\").parseKeyDataMixin(a.value);return!a.success?a:d(\"WAResultOrError\").makeResult({keyIdKeyIDMixin:b.value,keyValueKeyDataMixin:a.value})}g.parsePreKeyMixin=a}),98);\n__d(\"WASmaxInPreKeysRegistrationIDMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"registration\");if(!a.success)return a;a=d(\"WASmaxParseUtils\").contentBytesRange(a.value,4,4);return!a.success?a:d(\"WAResultOrError\").makeResult({registrationElementValue:a.value})}g.parseRegistrationIDMixin=a}),98);\n__d(\"WASmaxInPreKeysSignedPreKeyMixin\",[\"WAResultOrError\",\"WASmaxInPreKeysKeyDataMixin\",\"WASmaxInPreKeysKeyIDMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"skey\");if(!a.success)return a;var b=d(\"WASmaxParseUtils\").flattenedChildWithTag(a.value,\"id\");if(!b.success)return b;var c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a.value,\"value\");if(!c.success)return c;a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a.value,\"signature\");if(!a.success)return a;a=d(\"WASmaxParseUtils\").contentBytesRange(a.value,64,64);if(!a.success)return a;b=d(\"WASmaxInPreKeysKeyIDMixin\").parseKeyIDMixin(b.value);if(!b.success)return b;c=d(\"WASmaxInPreKeysKeyDataMixin\").parseKeyDataMixin(c.value);return!c.success?c:d(\"WAResultOrError\").makeResult({skeySignatureElementValue:a.value,skeyIdKeyIDMixin:b.value,skeyValueKeyDataMixin:c.value})}g.parseSignedPreKeyMixin=a}),98);\n__d(\"WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin\",[\"WAResultOrError\",\"WASmaxInPreKeysDeviceIdentityMixin\",\"WASmaxInPreKeysIdentityKeyMixin\",\"WASmaxInPreKeysKeyTypeMixin\",\"WASmaxInPreKeysPreKeyMixin\",\"WASmaxInPreKeysRegistrationIDMixin\",\"WASmaxInPreKeysSignedPreKeyMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"user\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrIntRange,a,\"t\",0,void 0);if(!b.success)return b;var c=d(\"WASmaxParseUtils\").optionalLiteral(d(\"WASmaxParseUtils\").attrString,a,\"is_cloud_api\",\"true\");if(!c.success)return c;var e=d(\"WASmaxInPreKeysRegistrationIDMixin\").parseRegistrationIDMixin(a);if(!e.success)return e;var f=d(\"WASmaxInPreKeysKeyTypeMixin\").parseKeyTypeMixin(a),g=d(\"WASmaxInPreKeysIdentityKeyMixin\").parseIdentityKeyMixin(a);if(!g.success)return g;var h=d(\"WASmaxInPreKeysPreKeyMixin\").parsePreKeyMixin(a),i=d(\"WASmaxInPreKeysSignedPreKeyMixin\").parseSignedPreKeyMixin(a);if(!i.success)return i;a=d(\"WASmaxInPreKeysDeviceIdentityMixin\").parseDeviceIdentityMixin(a);return d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({t:b.value,isCloudApi:c.value},e.value,{keyTypeMixin:f.success?f.value:null},g.value,{preKeyMixin:h.success?h.value:null},i.value,{deviceIdentityMixin:a.success?a.value:null}))}g.parseFetchKeyBundlesUserSuccessMixin=a}),98);\n__d(\"WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup\",[\"WAResultOrError\",\"WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin\",\"WASmaxInPreKeysFetchKeyBundlesUserErrorMixin\",\"WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin\").parseFetchKeyBundlesUserSuccessMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"FetchKeyBundlesUserSuccess\",value:b.value});var c=d(\"WASmaxInPreKeysFetchKeyBundlesUserErrorMixin\").parseFetchKeyBundlesUserErrorMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"FetchKeyBundlesUserError\",value:c.value});var e=d(\"WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin\").parseFetchKeyBundlesUserErrorFallbackMixin(a);return e.success?d(\"WAResultOrError\").makeResult({name:\"FetchKeyBundlesUserErrorFallback\",value:e.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"UserSuccess\",\"UserError\",\"UserErrorFallback\"],[b,c,e])}g.parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup=a}),98);\n__d(\"WASmaxInPreKeysFetchKeyBundlesResponseSuccess\",[\"WAResultOrError\",\"WASmaxInPreKeysEnums\",\"WASmaxInPreKeysIQResultResponseMixin\",\"WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup\",\"WASmaxParseJid\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function h(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"user\");if(!b.success)return b;b=d(\"WASmaxParseJid\").attrJidEnum(a,\"jid\",d(\"WASmaxInPreKeysEnums\").DEVICEJID_DEVICEJID);if(!b.success)return b;a=d(\"WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup\").parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup(a);return!a.success?a:d(\"WAResultOrError\").makeResult({jid:b.value,userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup:a.value})}function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"list\");if(!c.success)return c;a=d(\"WASmaxInPreKeysIQResultResponseMixin\").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxParseUtils\").mapChildrenWithTag(c.value,\"user\",0,1e5,h);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{listUser:b.value}))}g.parseFetchKeyBundlesResponseSuccessListUser=h;g.parseFetchKeyBundlesResponseSuccess=a}),98);\n__d(\"WASmaxAttrs\",[\"WAWap\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){if(b==null)return d(\"WAWap\").DROP_ATTR;else return a(b)}function b(a,b){if(b)return a;else return d(\"WAWap\").DROP_ATTR}g.OPTIONAL=a;g.OPTIONAL_LITERAL=b}),98);\n__d(\"WASmaxChildren\",[\"WADeepEquals\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){if(b==null)return null;else return a(b)}function b(a,b){if(b==null)return null;else if(b)return a()}function c(a,b){if(b)for(var c=1;c<b.length;c++)if(!d(\"WADeepEquals\").deepEqual(b[c],b[0]))throw new Error(\"expected all homogeneous children to be equal, but they were not\");c=h(a,b,0,Infinity);return c}function e(a,b){return i(a,b,0,Infinity)}function h(a,b,c,d){if(b==null){if(c>0)throw new Error(\"expected at least \"+c+\" children, but none provided\");return[]}var e=b.length;if(e<c)throw new Error(\"expected at least \"+c+\" children, but found \"+e);else if(e>d)throw new Error(\"expected at most \"+d+\" children, but found \"+e);return b.map(function(b){return a(b)})}function i(a,b,c,d){if(b===0){if(c>0)throw new Error(\"expected at least \"+c+\" children, but none provided\");return[]}if(b<c)throw new Error(\"expected at least \"+c+\" children, but found \"+b);else if(b>d)throw new Error(\"expected at most \"+d+\" children, but found \"+b);c=[];for(d=0;d<b;d++)c.push(a());return c}g.OPTIONAL_CHILD=a;g.HAS_OPTIONAL_CHILD=b;g.HOMOGENEOUS_CHILD=c;g.HOMOGENEOUS_CHILD_COUNT=e;g.REPEATED_CHILD=h;g.REPEATED_CHILD_COUNT=i}),98);\n__d(\"WASmaxOutPreKeysClientRequestMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"iq\",{id:d(\"WAWap\").generateId(),xmlns:\"encrypt\",to:d(\"WAWap\").S_WHATSAPP_NET});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeClientRequestMixin=a}),98);\n__d(\"WASmaxOutPreKeysFetchKeyBundlesRequest\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxOutPreKeysClientRequestMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.userJid;a=a.hasUserReasonIdentity;b=d(\"WASmaxJsx\").smax(\"user\",{jid:d(\"WAWap\").JID(b),reason:d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"identity\",a)});return b}function a(a){a=a.userArgs;a=d(\"WASmaxOutPreKeysClientRequestMixin\").mergeClientRequestMixin(d(\"WASmaxJsx\").smax(\"iq\",{type:\"get\"},d(\"WASmaxJsx\").smax(\"key\",null,d(\"WASmaxChildren\").REPEATED_CHILD(h,a,1,1e5))));return a}g.makeFetchKeyBundlesRequestKeyUser=h;g.makeFetchKeyBundlesRequest=a}),98);\n__d(\"WASmaxParsingFailure\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,\"SmaxParsingFailure: \"+b)||this;c.name=\"SmaxParsingFailure\";c.reason=b;return c}var c=b.prototype;c.toString=function(){return\"SmaxParsingFailure: \"+this.reason};return b}(babelHelpers.wrapNativeSuper(Error));f.SmaxParsingFailure=a}),66);\n__d(\"WASmaxRpcUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){var c=Object.keys(b).map(function(a){var c=a===\"Request\"?\"<request>\":'<response name=\"'+a+'\">';return\"Tried \"+c+\", but failed with \"+b[a].error+\".\"}).join(\" \");return'Failed to parse incoming stanza of <rpc name=\"'+a+'\">. '+c}f.errorMessageRpcParsing=a}),66);\n__d(\"WASmaxPreKeysFetchKeyBundlesRPC\",[\"WAComms\",\"WASmaxInPreKeysFetchKeyBundlesResponseRequestError\",\"WASmaxInPreKeysFetchKeyBundlesResponseServerError\",\"WASmaxInPreKeysFetchKeyBundlesResponseSuccess\",\"WASmaxOutPreKeysFetchKeyBundlesRequest\",\"WASmaxParsingFailure\",\"WASmaxRpcUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d(\"WASmaxOutPreKeysFetchKeyBundlesRequest\").makeFetchKeyBundlesRequest(a);j.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAComms\").sendSmaxStanza(e,c));case 3:f=j.sent;g=d(\"WASmaxInPreKeysFetchKeyBundlesResponseSuccess\").parseFetchKeyBundlesResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt(\"return\",{name:\"FetchKeyBundlesResponseSuccess\",value:g.value});case 7:h=d(\"WASmaxInPreKeysFetchKeyBundlesResponseRequestError\").parseFetchKeyBundlesResponseRequestError(f,e);if(!h.success){j.next=10;break}return j.abrupt(\"return\",{name:\"FetchKeyBundlesResponseRequestError\",value:h.value});case 10:i=d(\"WASmaxInPreKeysFetchKeyBundlesResponseServerError\").parseFetchKeyBundlesResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt(\"return\",{name:\"FetchKeyBundlesResponseServerError\",value:i.value});case 13:throw new(d(\"WASmaxParsingFailure\").SmaxParsingFailure)(d(\"WASmaxRpcUtils\").errorMessageRpcParsing(\"FetchKeyBundles\",{Success:g,RequestError:h,ServerError:i}));case 14:case\"end\":return j.stop()}},null,this)}g.sendFetchKeyBundlesRPC=a}),98);\n__d(\"WAFetchPreKeyBundlesProtocol\",[\"WAConvertRegistrationIdMixin\",\"WAConvertSignedPreKeyMixin\",\"WAParsableXmlNode\",\"WAResultOrError\",\"WASignalKeys\",\"WASmaxPreKeysFetchKeyBundlesRPC\",\"WATagsLogger\",\"WATimeUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"RequestError: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"ServerError: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"fetched prekey successfully\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"start fetching prekey of \",\"...\"]);k=function(){return a};return a}var l=d(\"WATagsLogger\").TAGS([\"fetchPreKeyBundlesProtocol\"]);function a(a){var c,e,f,g;return b(\"regeneratorRuntime\").async(function(n){while(1)switch(n.prev=n.next){case 0:l.LOG(k(),a.join(\", \"));n.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WASmaxPreKeysFetchKeyBundlesRPC\").sendFetchKeyBundlesRPC({userArgs:a.map(function(a){return{userJid:a,hasUserReasonIdentity:!1}})}));case 3:c=n.sent;n.t0=c.name;n.next=n.t0===\"FetchKeyBundlesResponseSuccess\"?7:n.t0===\"FetchKeyBundlesResponseServerError\"?11:n.t0===\"FetchKeyBundlesResponseRequestError\"?14:17;break;case 7:l.LOG(j());e=new Map();c.value.listUser.map(function(a){var b=a.userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup;b.name===\"FetchKeyBundlesUserSuccess\"&&e.set(a.jid,m(b.value))});return n.abrupt(\"return\",d(\"WAResultOrError\").makeResult(e));case 11:f=c.value.errorServerErrors.name;l.WARN(i(),f);return n.abrupt(\"return\",d(\"WAResultOrError\").makeError({type:\"server-error\",payload:f}));case 14:g=c.value.errorRequestErrorsFetch.name;l.ERROR(h(),g);return n.abrupt(\"return\",d(\"WAResultOrError\").makeError({type:\"request-error\",payload:g}));case 17:case\"end\":return n.stop()}},null,this)}function m(a){var b=d(\"WAConvertRegistrationIdMixin\").registrationIdMixin(a),c=d(\"WASignalKeys\").serializeIdentity(a.elementValue),e=d(\"WAConvertSignedPreKeyMixin\").convertSignedPreKeyMixin(a),f=a.preKeyMixin?n(a.preKeyMixin):null;a=d(\"WATimeUtils\").castToUnixTime(a.t||0);return{keys:{regId:b,identity:c,oneTimeKey:f,signedKey:{id:e.id,signature:e.signature,publicKey:d(\"WASignalKeys\").serializeIdentity(e.pubkey)}},timestamp:a}}function n(a){return{id:d(\"WAParsableXmlNode\").convertBytesToUint(a.keyIdKeyIDMixin.elementValue,3),publicKey:d(\"WASignalKeys\").serializeIdentity(a.keyValueKeyDataMixin.elementValue)}}g.fetchPreKeyBundlesProtocol=a}),98);\n__d(\"WABulkRequestKeys\",[\"WAFetchPreKeyBundlesProtocol\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var c;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WAFetchPreKeyBundlesProtocol\").fetchPreKeyBundlesProtocol(a));case 2:c=e.sent;if(c.success){e.next=5;break}return e.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errRequestKeysParsingFailed\"));case 5:return e.abrupt(\"return\",d(\"WAResultOrError\").makeResult(c.value));case 6:case\"end\":return e.stop()}},null,this)}g.bulkRequestKeys=a}),98);\n__d(\"WALock\",[\"Promise\",\"WAResolvable\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Lock failed for \",\"\"]);i=function(){return a};return a}function a(a){return{lock:function(c,e){var f=new(d(\"WAResolvable\").Resolvable)(),g=c.map(function(a){return[a,new(d(\"WAResolvable\").Resolvable)()]});(h||(h=b(\"Promise\"))).all(g.map(function(b){var c=b[0],d=b[1];return a.enqueue(c,function(){d.resolve();return f.promise})}))[\"catch\"](function(){d(\"WATagsLogger\").TAGS([\"WALock\"]).ERROR(i(),c)});return h.all(g.map(function(a){a[0];a=a[1];return a.promise})).then(function(){return e()})[\"finally\"](function(){f.resolve()})},wait:function(b){return a.wait(b)}}}g.makeLock=a}),98);\n__d(\"WALockMap\",[\"WALock\",\"WAPromiseQueue\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){a===void 0&&(a=-1);a=new(d(\"WAPromiseQueue\").PromiseQueueMap)(a);return d(\"WALock\").makeLock(a)}g.makeLockMap=a}),98);\n__d(\"WASignalSessions\",[\"WABinary\",\"WAErr\",\"WASignalKeys\",\"WASignalOther\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=3;function a(a,b){return i(a,0,b,[])}function i(a,b,c,d){return{ratchetPubKey:a,nextMsgIndex:b,chainKey:c,unusedMsgKeys:d}}function b(a,b){return j(a,0,b)}function j(a,b,c){return{ratchetKey:a,nextMsgIndex:b,chainKey:c}}function k(a,b,c){return{remoteOneTimeId:a,remoteSignedId:b,localOneTimePubKey:c}}function e(a,b){return n(a.local,a.remote,a.rootKey,a.recvChains,a.sendChain,a.initialExchangeInfo,a.prevSendChainHighestIndex,b,a.aliceBaseKey)}function f(a,b,c){return n(a.local,a.remote,a.rootKey,b,c,a.initialExchangeInfo,a.prevSendChainHighestIndex,a.prevSessions,a.aliceBaseKey)}function l(a,b,c,d){c===void 0&&(c=a.sendChain);return n(a.local,a.remote,d,b,c,null,Math.max(a.sendChain.nextMsgIndex-1,0),a.prevSessions,a.aliceBaseKey)}function m(a,b,c,d,e,f,g){return n(a,b,c,d,e,f,0,[],g)}function n(a,b,c,d,e,f,g,h,i){return{local:a,remote:b,rootKey:c,sendChain:e,recvChains:d,initialExchangeInfo:f,prevSendChainHighestIndex:g,prevSessions:h,aliceBaseKey:i}}function o(a,b){b=new(d(\"WABinary\").Binary)(b);var c=d(\"WASignalOther\").readBytes(b,32),e=d(\"WASignalOther\").readBytes(b,32);b=d(\"WASignalOther\").readBytes(b,16);return p(a,c,e,b)}function p(a,b,c,d){return{index:a,cipherKey:b,macKey:c,iv:d}}function q(a){return{senderRatchetKey:a.ratchetPubKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey},messageKeys:a.unusedMsgKeys}}function r(a){var b=a.ratchetKey;return{senderRatchetKey:b.serializedPubKey,senderRatchetKeyPrivate:b.privateKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey}}}function s(a){var b=a.local,c=a.remote,d=a.initialExchangeInfo,e=void 0;if(d){var f=d.remoteOneTimeId;e={preKeyId:f!=null?f:void 0,signedPreKeyId:d.remoteSignedId,baseKey:d.localOneTimePubKey}}return{currentSession:{sessionVersion:h,localIdentityPublic:b.pubKey,remoteIdentityPublic:c.pubKey,rootKey:a.rootKey,previousCounter:a.prevSendChainHighestIndex,senderChain:r(a.sendChain),receiverChains:a.recvChains.map(q),pendingPreKey:e,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey},previousSessions:a.prevSessions}}function t(a){var b=a.local,c=a.remote,e=a.sendChain,f=a.initialExchangeInfo,g=void 0;if(f){var i=f.remoteOneTimeId;g={preKeyId:i!=null?i:void 0,signedPreKeyId:f.remoteSignedId,baseKey:d(\"WASignalOther\").toBuffer(f.localOneTimePubKey)}}return{sessionVersion:h,localIdentityPublic:d(\"WASignalOther\").toBuffer(b.pubKey),remoteIdentityPublic:d(\"WASignalOther\").toBuffer(c.pubKey),rootKey:d(\"WASignalOther\").toBuffer(a.rootKey),previousCounter:a.prevSendChainHighestIndex,senderChain:{senderRatchetKey:d(\"WASignalOther\").toBuffer(e.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:d(\"WASignalOther\").toBuffer(e.ratchetKey.privateKey),chainKey:{index:e.nextMsgIndex,key:d(\"WASignalOther\").toBuffer(e.chainKey)},messageKeys:[]},receiverChains:a.recvChains.map(function(a){return{senderRatchetKey:d(\"WASignalOther\").toBuffer(a.ratchetPubKey),chainKey:{index:a.nextMsgIndex,key:d(\"WASignalOther\").toBuffer(a.chainKey)},messageKeys:a.unusedMsgKeys.map(function(a){return{index:a.index,cipherKey:d(\"WASignalOther\").toBuffer(a.cipherKey),macKey:d(\"WASignalOther\").toBuffer(a.macKey),iv:d(\"WASignalOther\").toBuffer(a.iv)}})}}),pendingPreKey:g,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey==null?void 0:d(\"WASignalOther\").toBuffer(a.aliceBaseKey)}}function u(a){var b=A(a.currentSession,\"currentSession\");return w(b,a.previousSessions)}function v(a){return w(a,[])}function w(a,b){var e=A(a.sessionVersion,\"sessionVersion\");if(e!==h)throw c(\"WAErr\")(\"Signal: bad session version \"+e);e=A(a.senderChain,\"senderChain\");var f=A(e.chainKey,\"senderChain.chainKey\");e=j(d(\"WASignalKeys\").makeSerializedKeyPairFrom(z(e.senderRatchetKeyPrivate,32,\"senderRatchetKeyPrivate\"),y(e.senderRatchetKey,\"senderRatchetKey\")),A(f.index,\"senderChain.chainKey.index\"),z(f.key,32,\"senderChain.chainKey.key\"));f=A(a.receiverChains,\"receiverChains\").map(function(a){var b=A(a.chainKey,\"receiverChains[].chainKey\");return i(y(a.senderRatchetKey,\"receiverChains[].senderRatchetKey\"),A(b.index,\"receiverChains[].chainKey.index\"),z(b.key,32,\"receiverChains[].chainKey.key\"),x(a.messageKeys))});var g={regId:d(\"WASignalOther\").castRegistrationId(A(a.localRegistrationId,\"localRegistrationId\")),pubKey:y(a.localIdentityPublic,\"localIdentityPublic\")},l={regId:d(\"WASignalOther\").castRegistrationId(A(a.remoteRegistrationId,\"remoteRegistrationId\")),pubKey:y(a.remoteIdentityPublic,\"remoteIdentityPublic\")},m=a.pendingPreKey,o=null;if(m){var p=m.preKeyId;o=k(p!=null?d(\"WASignalKeys\").castToPreKeyId(p):null,d(\"WASignalKeys\").castToSignedPreKeyId(A(m.signedPreKeyId,\"pendingPreKey.signedPreKeyId\")),y(m.baseKey,\"pendingPreKey.baseKey\"))}p=a.aliceBaseKey==null?null:y(a.aliceBaseKey,\"aliceBaseKey\");return n(g,l,z(a.rootKey,32,\"rootKey\"),f,e,o,a.previousCounter||0,b,p)}function x(a){return a.map(function(a){return{index:A(a.index,\"messageKeys[].index\"),cipherKey:z(a.cipherKey,32,\"messageKeys[].cipherKey\"),macKey:z(a.macKey,32,\"messageKeys[].macKey\"),iv:z(a.iv,16,\"messageKeys[].iv\")}})}function y(a,b){return d(\"WASignalKeys\").castToSerializedPubKey(new Uint8Array(A(a,b)))}function z(a,b,c){return d(\"WASignalOther\").toBytes(A(a,c),b)}function A(a,b){if(a==null)throw c(\"WAErr\")(\"Signal: protobuf is missing \"+b);return a}g.FORMAT_VERSION=h;g.makeFreshRecvChain=a;g.makeRecvChain=i;g.makeFreshSendChain=b;g.makeSendChain=j;g.makeInitialExchangeInfo=k;g.setPrevSessions=e;g.updateChains=f;g.ratchetSession=l;g.makeFreshSession=m;g.makeSession=n;g.splitMsgKey=o;g.serializeSession=s;g.detachSession=t;g.parseSessionFromRecord=u;g.parseSession=v;g._parseSession=w;g.bytesOrThrow=z;g.definedOrThrow=A}),98);\n__d(\"WASignalWhisperTextProtocol.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={ratchetKey:[1,(d=d(\"WAProtoConst\")).TYPES.BYTES],counter:[2,d.TYPES.UINT32],previousCounter:[3,d.TYPES.UINT32],ciphertext:[4,d.TYPES.BYTES]};b.internalSpec={registrationId:[5,d.TYPES.UINT32],preKeyId:[1,d.TYPES.UINT32],signedPreKeyId:[6,d.TYPES.UINT32],baseKey:[2,d.TYPES.BYTES],identityKey:[3,d.TYPES.BYTES],message:[4,d.TYPES.BYTES]};c.internalSpec={id:[1,d.TYPES.UINT32],baseKey:[2,d.TYPES.BYTES],ratchetKey:[3,d.TYPES.BYTES],identityKey:[4,d.TYPES.BYTES],baseKeySignature:[5,d.TYPES.BYTES]};e.internalSpec={id:[1,d.TYPES.UINT32],iteration:[2,d.TYPES.UINT32],ciphertext:[3,d.TYPES.BYTES]};f.internalSpec={id:[1,d.TYPES.UINT32],iteration:[2,d.TYPES.UINT32],chainKey:[3,d.TYPES.BYTES],signingKey:[4,d.TYPES.BYTES]};h.internalSpec={generation:[1,d.TYPES.UINT32],signature:[2,d.TYPES.BYTES]};g.SignalMessageSpec=a;g.PreKeySignalMessageSpec=b;g.KeyExchangeMessageSpec=c;g.SenderKeyMessageSpec=e;g.SenderKeyDistributionMessageSpec=f;g.DeviceConsistencyCodeMessageSpec=h}),98);\n__d(\"WASignalGroupSession\",[\"WASignalKeys\",\"WASignalSessions\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=5,i=3;function j(a){var b=d(\"WASignalSessions\").definedOrThrow(a.senderSigningKey,\"senderSigningKey\"),c=d(\"WASignalSessions\").definedOrThrow(a.senderMessageKeys,\"senderMessageKeys\"),e=d(\"WASignalSessions\").definedOrThrow(a.senderChainKey,\"senderChainKey\");return{senderSigningKeyPublic:r(b[\"public\"],\"public\"),senderSigningKeyPrivate:b[\"private\"]?d(\"WASignalSessions\").bytesOrThrow(b[\"private\"],32,\"private\"):void 0,senderKeyId:d(\"WASignalSessions\").definedOrThrow(a.senderKeyId,\"senderKeyId\"),unusedMsgKeys:c.map(function(a){return k(d(\"WASignalSessions\").definedOrThrow(a.iteration,\"iteration\"),d(\"WASignalSessions\").bytesOrThrow(a.seed,50,\"seed\"))}),senderKeyChainKey:l(d(\"WASignalSessions\").definedOrThrow(e.iteration,\"iteration\"),d(\"WASignalSessions\").bytesOrThrow(e.seed,32,\"seed\"))}}function a(a,b,c,d,e){return{senderSigningKeyPublic:a,senderSigningKeyPrivate:b,senderKeyChainKey:c,senderKeyId:d,unusedMsgKeys:e==null?[]:e}}function b(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b.senderKeyId});return{senderKeyStates:a.senderKeyStates.map(function(a,d){return d===c?b:a})}}function c(a,b){a=a.senderKeyStates.slice(a.senderKeyStates.length>h-1?1:0);a.push(b);return{senderKeyStates:a}}function e(a){return{senderKeyStates:[a]}}function k(a,b){return{iteration:a,seed:b}}function l(a,b){return{nextMsgIndex:a,chainKey:b}}function f(a){a=d(\"WASignalSessions\").definedOrThrow(a.senderKeyStates,\"senderKeyStates\");return m(a)}function m(a){return n(a)}function n(a){a=a.map(function(a){return j(a)});return{senderKeyStates:a}}function o(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b});return c===-1?void 0:a.senderKeyStates[c]}function p(a){return{senderKeyStates:a.senderKeyStates.map(function(a){return q(a)})}}function q(a){return{senderKeyId:a.senderKeyId,senderChainKey:{iteration:a.senderKeyChainKey.nextMsgIndex,seed:a.senderKeyChainKey.chainKey},senderSigningKey:{\"public\":a.senderSigningKeyPublic,\"private\":a.senderSigningKeyPrivate},senderMessageKeys:a.unusedMsgKeys.map(function(a){var b=a.iteration;a=a.seed;return{iteration:b,seed:a}})}}function r(a,b){return d(\"WASignalKeys\").castToSerializedPubKey(new Uint8Array(d(\"WASignalSessions\").definedOrThrow(a,b)))}function s(a){return a}g.FORMAT_VERSION=i;g.makeSenderKeyState=a;g.updateSessionWithUpdatedSenderKeyState=b;g.updateSessionWithNewSenderKeyState=c;g.makeNewSenderKeySession=e;g.makeSenderKeyMsgKey=k;g.makeSenderKeyChainKey=l;g.parseSessionFromRecord=f;g._parseSession=m;g.makeSenderKeySessionFromRecord=n;g.findSenderKeyState=o;g.serializeSession=p;g.serializeSenderKeyState=q;g.convertFromRawToSenderKeyState=s}),98);\n__d(\"WASignalWhitepaper\",[\"Promise\",\"WABinary\",\"WACryptoDependencies\",\"WASignalGroupSession\",\"WASignalKeys\",\"WASignalOther\",\"WASignalSessions\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=new Uint8Array(32);i.fill(255);var j=new Uint8Array([1]),k=new Uint8Array([2]);function a(a,c,e){var f,g,h,j,k,l,m,q,r,s,t,u,v,w,x,y,z;return b(\"regeneratorRuntime\").async(function(A){while(1)switch(A.prev=A.next){case 0:g=a.regId,h=a.staticKeyPair;j=c.identity;k=c.signedKey.publicKey;l=e.privateKey;m=h.privateKey;q=(f=c.oneTimeKey)==null?void 0:f.publicKey;r=d(\"WABinary\").Binary.build(i,p(m,k),p(l,j),p(l,k),q&&p(l,q)).readByteArray();A.next=9;return b(\"regeneratorRuntime\").awrap(o(r,\"WhisperText\"));case 9:s=A.sent;t=s[0];u=s[1];v=c.ratchetKey;w=d(\"WASignalSessions\").makeFreshRecvChain(v,u);x=d(\"WASignalKeys\").makeSerializedKeyPair();A.next=17;return b(\"regeneratorRuntime\").awrap(n(t,x,v));case 17:y=A.sent;z=d(\"WASignalSessions\").makeInitialExchangeInfo(c.oneTimeKey==null?null:c.oneTimeKey.id,c.signedKey.id,d(\"WASignalKeys\").serializePubKey(e));return A.abrupt(\"return\",d(\"WASignalSessions\").makeFreshSession({regId:g,pubKey:d(\"WASignalKeys\").serializePubKey(h)},{regId:c.regId,pubKey:j},y.rootKey,[w],d(\"WASignalSessions\").makeFreshSendChain(x,y.chainKey),z,d(\"WASignalKeys\").serializePubKey(e)));case 20:case\"end\":return A.stop()}},null,this)}function c(a,c,e,f){var g,h,j,k,l,m,n,p,r,s,t,u,v,w;return b(\"regeneratorRuntime\").async(function(x){while(1)switch(x.prev=x.next){case 0:h=a.regId,j=a.staticKeyPair;k=j.privateKey;l=f.signed.privateKey;m=e;n=c.pubKey;p=(g=f.oneTime)==null?void 0:g.privateKey;r=d(\"WABinary\").Binary.build(i,q(n,l),q(m,k),q(m,l),p&&q(m,p)).readByteArray();x.next=9;return b(\"regeneratorRuntime\").awrap(o(r,\"WhisperText\"));case 9:s=x.sent;t=s[0];u=s[1];v=f.ratchet;w=d(\"WASignalSessions\").makeFreshSendChain(v,u);return x.abrupt(\"return\",d(\"WASignalSessions\").makeSession({regId:h,pubKey:d(\"WASignalKeys\").serializePubKey(j)},c,t,[],w,null,0,[],e));case 15:case\"end\":return x.stop()}},null,this)}function e(a){a=d(\"WASignalGroupSession\").makeSenderKeyState(d(\"WASignalKeys\").serializePubKey(a),a.privateKey,d(\"WASignalGroupSession\").makeSenderKeyChainKey(0,d(\"WASignalKeys\").makeRawSenderKey()),d(\"WASignalOther\").makeSenderKeyId(),[]);return(h||(h=b(\"Promise\"))).resolve(d(\"WASignalGroupSession\").makeNewSenderKeySession(a))}function f(a,c,e,f,g){e=d(\"WASignalGroupSession\").makeSenderKeyState(e,void 0,d(\"WASignalGroupSession\").makeSenderKeyChainKey(c,f),a,[]);c=null;g?c=d(\"WASignalGroupSession\").updateSessionWithNewSenderKeyState(g,e):c=d(\"WASignalGroupSession\").makeNewSenderKeySession(e);return(h||(h=b(\"Promise\"))).resolve(c)}function l(a,c){var e,f,g,i;return b(\"regeneratorRuntime\").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WASignalOther\").makeCryptoKey(c,\"hmac-sha256\"));case 2:e=l.sent;f=function(a){return d(\"WACryptoDependencies\").getCrypto().subtle.sign({name:\"HMAC\",hash:\"SHA-256\"},e,a)};g=f(j).then(function(a){return d(\"WASignalOther\").hkdf(new Uint8Array(a),null,\"WhisperMessageKeys\",80)}).then(function(b){return d(\"WASignalSessions\").splitMsgKey(a,b)});i=f(k).then(function(a){return d(\"WASignalOther\").toBytes(a,32)});return l.abrupt(\"return\",(h||(h=b(\"Promise\"))).all([i,g]));case 7:case\"end\":return l.stop()}},null,this)}function m(a,c){var e,f,g,i;return b(\"regeneratorRuntime\").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WASignalOther\").makeCryptoKey(c,\"hmac-sha256\"));case 2:e=l.sent;f=function(a){return d(\"WACryptoDependencies\").getCrypto().subtle.sign({name:\"HMAC\",hash:\"SHA-256\"},e,a)};g=f(j).then(function(a){return d(\"WASignalOther\").hkdf(new Uint8Array(a),null,\"WhisperGroup\",50)}).then(function(b){return d(\"WASignalGroupSession\").makeSenderKeyMsgKey(a,b)});i=f(k).then(function(a){return d(\"WASignalOther\").toBytes(a,32)});return l.abrupt(\"return\",(h||(h=b(\"Promise\"))).all([i,g]));case 7:case\"end\":return l.stop()}},null,this)}function n(a,c,e){var f,g,h,i,j,k;return b(\"regeneratorRuntime\").async(function(l){while(1)switch(l.prev=l.next){case 0:f=c.privateKey;g=e;h=d(\"WASignalKeys\").ecdh(f,g);l.next=5;return b(\"regeneratorRuntime\").awrap(o(new Uint8Array(h),\"WhisperRatchet\",a));case 5:i=l.sent;j=i[0];k=i[1];return l.abrupt(\"return\",{rootKey:j,chainKey:k});case 9:case\"end\":return l.stop()}},null,this)}function o(a,c,e){var f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:e===void 0&&(e=null);g.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WASignalOther\").hkdf(a,e,c,64));case 3:f=g.sent;return g.abrupt(\"return\",[d(\"WASignalOther\").sliceBytes(f,0,32),d(\"WASignalOther\").sliceBytes(f,32,32)]);case 5:case\"end\":return g.stop()}},null,this)}function p(a,b){return new Uint8Array(d(\"WASignalKeys\").ecdh(a,b))}function q(a,b){return p(b,a)}g.initiateSessionOutgoing=a;g.initiateSessionIncoming=c;g.initiateSenderKeySessionOutgoing=e;g.initiateSenderKeySessionIncoming=f;g.deriveMsgKey=l;g.deriveSenderKeyMsgKey=m;g.calculateRatchet=n}),98);\n__d(\"WASignalCipher\",[\"Promise\",\"WABaseGlobals\",\"WABinary\",\"WACryptoDependencies\",\"WACryptoUtils\",\"WALogger\",\"WAResultOrError\",\"WASignalKeys\",\"WASignalOther\",\"WASignalSessions\",\"WASignalSignatures\",\"WASignalWhisperTextProtocol.pb\",\"WASignalWhitepaper\",\"decodeProtobuf\",\"encodeProtobuf\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"This would only fail if config is not initialised\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"decryptMsgFromSession error \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"deserializePkMsg error \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"deserializeMsg error \",\"\"]);l=function(){return a};return a}var m=40,n=8,o=2e3;function a(a,c){var e,f,g,h,i,j,k,l,m,o,p,q,r,s,t,v,y,z,A,B,C;return b(\"regeneratorRuntime\").async(function(D){while(1)switch(D.prev=D.next){case 0:e=a.sendChain;D.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").deriveMsgKey(e.nextMsgIndex,e.chainKey));case 3:f=D.sent;g=f[0];h=f[1];D.next=8;return b(\"regeneratorRuntime\").awrap(x(h));case 8:i=D.sent;j=i.cipherKey;k=i.macKey;D.next=13;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoDependencies\").getCrypto().subtle.encrypt({name:\"AES-CBC\",iv:h.iv},j,c));case 13:l=D.sent;m=new(d(\"WABinary\").Binary)();m.writeByteArray(a.local.pubKey);m.writeByteArray(a.remote.pubKey);o=m.size();m.writeUint8(u(d(\"WASignalSessions\").FORMAT_VERSION,d(\"WASignalSessions\").FORMAT_VERSION));d(\"encodeProtobuf\").encodeProtobuf(d(\"WASignalWhisperTextProtocol.pb\").SignalMessageSpec,{ratchetKey:e.ratchetKey.serializedPubKey,counter:h.index,previousCounter:a.prevSendChainHighestIndex,ciphertext:l},m);p=m.readByteArray();D.next=23;return b(\"regeneratorRuntime\").awrap(w(k,p));case 23:q=D.sent;r=p.subarray(o);s=d(\"WABinary\").Binary.build(r,new Uint8Array(q,0,n)).readByteArray();y=a.initialExchangeInfo;y!=null?(A=new(d(\"WABinary\").Binary)(),A.writeUint8(u(d(\"WASignalSessions\").FORMAT_VERSION,d(\"WASignalSessions\").FORMAT_VERSION)),d(\"encodeProtobuf\").encodeProtobuf(d(\"WASignalWhisperTextProtocol.pb\").PreKeySignalMessageSpec,{registrationId:a.local.regId,preKeyId:(z=y.remoteOneTimeId)!=null?z:void 0,signedPreKeyId:y.remoteSignedId,baseKey:y.localOneTimePubKey,identityKey:a.local.pubKey,message:s},A),t=\"pkmsg\",v=A.readByteArray()):(t=\"msg\",v=s);B=d(\"WASignalSessions\").makeSendChain(e.ratchetKey,h.index+1,g);C=d(\"WASignalSessions\").updateChains(a,a.recvChains,B);return D.abrupt(\"return\",[C,{type:t,ciphertext:v}]);case 31:case\"end\":return D.stop()}},null,this)}function c(a,c){var e,f,g,h,i,j,k,l,m,n,o,p,q,s;return b(\"regeneratorRuntime\").async(function(t){while(1)switch(t.prev=t.next){case 0:if(!(a==null)){t.next=2;break}return t.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalNoSession\"));case 2:t.next=4;return b(\"regeneratorRuntime\").awrap(r(a,c));case 4:e=t.sent;if(!e.success){t.next=10;break}f=e.value,g=f[0],h=f[1];return t.abrupt(\"return\",d(\"WAResultOrError\").makeResult({newSessionInfo:null,updatedSession:g,plaintext:h}));case 10:i=a.prevSessions,j=e,k=0;case 13:if(!(!j.success&&k<i.length)){t.next=22;break}l=d(\"WASignalSessions\").parseSession(i[k]);t.next=17;return b(\"regeneratorRuntime\").awrap(r(l,c));case 17:m=t.sent,m.success&&((n=m.value,o=n[0],p=n[1]),q=d(\"WASignalSessions\").setPrevSessions(o,[d(\"WASignalSessions\").detachSession(a)].concat(i.slice(0,k),i.slice(k+1))),s=!a||!d(\"WACryptoUtils\").serializedPubKeysEqual(q.remote.pubKey,a.remote.pubKey)?q.remote.pubKey:null,j=d(\"WAResultOrError\").makeResult({newSessionInfo:{newIdentity:s,baseSession:l,usedPreKey:null},updatedSession:q,plaintext:p}));case 19:k++;t.next=13;break;case 22:return t.abrupt(\"return\",j);case 23:case\"end\":return t.stop()}},null,this)}function e(a,b){if(y(a,b))return a;var c=a.prevSessions;for(var e=0;e<c.length;e++){var f=d(\"WASignalSessions\").parseSession(c[e]);if(y(f,b))return d(\"WASignalSessions\").setPrevSessions(f,[d(\"WASignalSessions\").detachSession(a)].concat(c.slice(0,e),c.slice(e+1)))}return null}function f(a,c,e,f){var g,h,i,j,k,l,n,o,p,q,s,t;return b(\"regeneratorRuntime\").async(function(u){while(1)switch(u.prev=u.next){case 0:h=f.localSignedPreKey;if(!(h==null)){u.next=3;break}return u.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalInvalidSignedPreKey\"));case 3:i=d(\"WASignalSignatures\").deserializeSignedPreKey(h);if(!(i==null)){u.next=6;break}return u.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalSignedPreKeyDeserialization\"));case 6:if(!(i.id!==e.localSignedPreKeyId)){u.next=8;break}return u.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalSignedPreKeyIdMismatch\"));case 8:j=null;if(!(e.localOneTimeKeyId!=null)){u.next=18;break}k=f.localOneTimeKey;if(!(k==null)){u.next=13;break}return u.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalInvalidOneTimeKey\"));case 13:j=d(\"WASignalKeys\").deserializePreKey(k);if(!(j==null)){u.next=16;break}return u.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalOneTimeKeyDeserialization\"));case 16:if(!(j.id!==e.localOneTimeKeyId)){u.next=18;break}return u.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalOneTimeKeyMismatch\"));case 18:u.next=20;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").initiateSessionIncoming(a,e.remote,e.sessionBaseKey,{signed:i.keyPair,oneTime:(g=j)==null?void 0:g.keyPair,ratchet:d(\"WASignalKeys\").toSerializedKeyPair(i.keyPair)}));case 20:l=u.sent;n=l.remote.pubKey;o=!c||!d(\"WACryptoUtils\").serializedPubKeysEqual(n,c.remote.pubKey)?n:null;c&&!o&&(l=d(\"WASignalSessions\").setPrevSessions(l,[d(\"WASignalSessions\").detachSession(c)].concat(c.prevSessions.slice(0,m-1))));u.next=26;return b(\"regeneratorRuntime\").awrap(r(l,e));case 26:p=u.sent;if(p.success){u.next=29;break}return u.abrupt(\"return\",p);case 29:q=p.value,s=q[0],t=q[1];return u.abrupt(\"return\",d(\"WAResultOrError\").makeResult({newIdentity:o,baseSession:l,updatedSession:s,plaintext:t}));case 31:case\"end\":return u.stop()}},null,this)}function p(a){var b,c,e=null;try{var f=t(a,d(\"WASignalSessions\").FORMAT_VERSION,n);if(!f.success)return f;f=d(\"decodeProtobuf\").decodeProtobuf(d(\"WASignalWhisperTextProtocol.pb\").SignalMessageSpec,f.value);var g=f.ratchetKey;e=f.counter;c=f.ciphertext;if(g==null||e==null||c==null)return d(\"WAResultOrError\").makeError(\"errSignalDeserializeInvalidProtoFormat\");b=d(\"WASignalKeys\").castToSerializedPubKey(new Uint8Array(g))}catch(a){d(\"WALogger\").DEV(l(),a);return d(\"WAResultOrError\").makeError(\"errSignalDeserializeRatchetKeyBadFormat\")}f={ratchetPubKey:b,counter:e,ciphertext:new Uint8Array(c),versionContentMac:a};return d(\"WAResultOrError\").makeResult(f)}function q(a){a=t(a,d(\"WASignalSessions\").FORMAT_VERSION,0);if(!a.success)return a;var b,c,e,f,g;try{a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WASignalWhisperTextProtocol.pb\").PreKeySignalMessageSpec,a.value);var h=a.registrationId,i=a.preKeyId,j=a.signedPreKeyId,l=a.baseKey,m=a.identityKey;a=a.message;if(h==null||j==null||l==null||m==null||a==null)return d(\"WAResultOrError\").makeError(\"errSignalDeserializePkInvalidProtoFormat\");f=d(\"WASignalKeys\").castToSerializedPubKey(new Uint8Array(l));b={regId:d(\"WASignalOther\").castRegistrationId(h),pubKey:d(\"WASignalKeys\").castToSerializedPubKey(new Uint8Array(m))};e=i!=null?d(\"WASignalKeys\").castToPreKeyId(i):null;c=d(\"WASignalKeys\").castToSignedPreKeyId(j);g=new Uint8Array(a)}catch(a){d(\"WALogger\").DEV(k(),a);return d(\"WAResultOrError\").makeError(\"errSignalDeserializePkKeyBadFormat\")}l=p(g);return!l.success?l:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},l.value,{remote:b,sessionBaseKey:f,localSignedPreKeyId:c,localOneTimeKeyId:e}))}function r(a,c){var e,f,g,h,i,k,l,m,o,p,q,r,t,u,v,y,z,A,B,C,D,E,F,G,H,I;return b(\"regeneratorRuntime\").async(function(J){while(1)switch(J.prev=J.next){case 0:e=c.ratchetPubKey,f=c.counter,g=c.ciphertext,h=c.versionContentMac;i=a.recvChains;k=a.recvChains.findIndex(function(a){return d(\"WACryptoUtils\").serializedPubKeysEqual(a.ratchetPubKey,e)});if(!(k===-1)){J.next=24;break}J.next=6;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").calculateRatchet(a.rootKey,a.sendChain.ratchetKey,e));case 6:o=J.sent;p=d(\"WASignalSessions\").makeFreshRecvChain(e,o.chainKey);J.next=10;return b(\"regeneratorRuntime\").awrap(s(p,f));case 10:q=J.sent;if(q.success){J.next=13;break}return J.abrupt(\"return\",q);case 13:r=q.value;t=d(\"WASignalKeys\").makeSerializedKeyPair();J.next=17;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").calculateRatchet(o.rootKey,t,e));case 17:u=J.sent;v=i.slice(-4);v.push(r.updatedChain);m=r.msgKey;l=d(\"WASignalSessions\").ratchetSession(a,v,d(\"WASignalSessions\").makeFreshSendChain(t,u.chainKey),u.rootKey);J.next=34;break;case 24:J.next=26;return b(\"regeneratorRuntime\").awrap(s(i[k],f));case 26:y=J.sent;if(y.success){J.next=29;break}return J.abrupt(\"return\",y);case 29:z=y.value,A=i.slice(),A[k]=z.updatedChain,m=z.msgKey,l=d(\"WASignalSessions\").updateChains(a,A,a.sendChain);case 34:J.next=36;return b(\"regeneratorRuntime\").awrap(x(m));case 36:B=J.sent;C=B.cipherKey;D=B.macKey;E=d(\"WABinary\").Binary.build(a.remote.pubKey,a.local.pubKey,h.subarray(0,-n)).readByteArray();J.next=42;return b(\"regeneratorRuntime\").awrap(w(D,E));case 42:F=J.sent;G=h.subarray(-n);H=!d(\"WACryptoUtils\").uint8ArraysEqual(new Uint8Array(F,0,n),G);I=null;J.prev=46;J.next=49;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoDependencies\").getCrypto().subtle.decrypt({name:\"AES-CBC\",iv:m.iv},C,g));case 49:I=J.sent;J.next=55;break;case 52:J.prev=52,J.t0=J[\"catch\"](46),d(\"WALogger\").DEV(j(),J.t0);case 55:if(!(H&&I==null)){J.next=59;break}if(!(k===-1)){J.next=58;break}return J.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errInvalidMacInvalidCipherKeyNewChain\"));case 58:return J.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errInvalidMacInvalidCipherKey\"));case 59:if(!H){J.next=61;break}return J.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errInvalidMacWithDecryptedPlaintext\"));case 61:if(!(I==null)){J.next=63;break}return J.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errUnknownInvalidCipherKey\"));case 63:return J.abrupt(\"return\",d(\"WAResultOrError\").makeResult([l,I]));case 64:case\"end\":return J.stop()}},null,this,[[46,52]])}function s(a,c){var e,f,g,h,j,k,l,m,n,p,q,r;return b(\"regeneratorRuntime\").async(function(s){while(1)switch(s.prev=s.next){case 0:e=c-a.nextMsgIndex;f=2e3;try{f=d(\"WABaseGlobals\").getConfig().getSignalFutureMessagesMax()}catch(a){d(\"WALogger\").ERROR(i())}if(!(e>f)){s.next=5;break}return s.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalTooManyMessagesInFuture\"));case 5:g=a.unusedMsgKeys;if(!(e<0)){s.next=11;break}h=g.findIndex(function(a){return a.index===c});if(!(h===-1)){s.next=10;break}return s.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errDuplicateMsg\"));case 10:return s.abrupt(\"return\",d(\"WAResultOrError\").makeResult({msgKey:g[h],updatedChain:d(\"WASignalSessions\").makeRecvChain(a.ratchetPubKey,a.nextMsgIndex,a.chainKey,v(g,h))}));case 11:j=a.nextMsgIndex;s.next=14;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").deriveMsgKey(j,a.chainKey));case 14:k=s.sent;l=k[0];m=k[1];n=null;if(!(e>0)){s.next=32;break}p=e+g.length-o;p>0?(n=g.slice(p),p-=g.length):n=g.slice();q=j+1;case 22:if(!(q<=c)){s.next=32;break}p>0?p--:n.push(m);s.next=26;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").deriveMsgKey(q,l));case 26:r=s.sent,l=r[0],m=r[1];case 29:q++;s.next=22;break;case 32:return s.abrupt(\"return\",d(\"WAResultOrError\").makeResult({msgKey:m,updatedChain:d(\"WASignalSessions\").makeRecvChain(a.ratchetPubKey,c+1,l,n||g)}));case 33:case\"end\":return s.stop()}},null,this)}function t(a,b,c){if(a.length<1)return d(\"WAResultOrError\").makeError(\"errSignalEmptyVersionContentSuffix\");var e=a[0]>>>4;if(e!==b)return e<b?d(\"WAResultOrError\").makeError(\"errSignalLegacyMsg\"):d(\"WAResultOrError\").makeError(\"errSignalInvalidVersion\");e=a.length-c;return e<1?d(\"WAResultOrError\").makeError(\"errSignalContentExceededExpectedLength\"):d(\"WAResultOrError\").makeResult(a.subarray(1,e))}function u(a,b){return(a<<4|b)&255}function v(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}function w(a,b){return d(\"WACryptoDependencies\").getCrypto().subtle.sign(d(\"WASignalOther\").HMAC_SHA256,a,b)}function x(a){return(h||(h=b(\"Promise\"))).all([d(\"WASignalOther\").makeCryptoKey(a.cipherKey,\"aes-cbc\"),d(\"WASignalOther\").makeCryptoKey(a.macKey,\"hmac-sha256\")]).then(function(a){var b=a[0];a=a[1];return{cipherKey:b,macKey:a}})}function y(a,b){a=a.aliceBaseKey;return!a?!1:d(\"WACryptoUtils\").serializedPubKeysEqual(a,b)}g.MAX_UNUSED_KEYS=o;g.encryptMsg=a;g.decryptMsg=c;g.findMatchingSession=e;g.decryptPkMsgWithNewSession=f;g.deserializeMsg=p;g.deserializePkMsg=q;g.decryptMsgFromSession=r;g.readContent=t;g.versionByte=u}),98);\n__d(\"WASignalGroupCipher\",[\"WABaseGlobals\",\"WABinary\",\"WACryptoDependencies\",\"WALogger\",\"WAResultOrError\",\"WASignalCipher\",\"WASignalGroupSession\",\"WASignalKeys\",\"WASignalOther\",\"WASignalSessions\",\"WASignalSignatures\",\"WASignalWhisperTextProtocol.pb\",\"WASignalWhitepaper\",\"decodeProtobuf\",\"encodeProtobuf\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"This would only fail if config is not initialised\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Exception caught during SenderKeyMessageSpec Proto: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"deserializeSenderKeyDistributionMsg error \",\"\"]);j=function(){return a};return a}var k=64;function a(a,c){var e,f,g,h,i,j,k;return b(\"regeneratorRuntime\").async(function(m){while(1)switch(m.prev=m.next){case 0:e=l(a);if(e.success){m.next=3;break}return m.abrupt(\"return\",e);case 3:f=e.value,g=f.senderKeyId,h=f.iteration,i=f.signingKeyPublic,j=f.chainKey;m.next=6;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").initiateSenderKeySessionIncoming(g,h,i,j,c));case 6:k=m.sent;return m.abrupt(\"return\",d(\"WAResultOrError\").makeResult(k));case 8:case\"end\":return m.stop()}},null,this)}function c(a){a=d(\"WASignalGroupSession\").serializeSenderKeyState(a);var b=new(d(\"WABinary\").Binary)();b.writeUint8(d(\"WASignalCipher\").versionByte(d(\"WASignalGroupSession\").FORMAT_VERSION,d(\"WASignalGroupSession\").FORMAT_VERSION));d(\"encodeProtobuf\").encodeProtobuf(d(\"WASignalWhisperTextProtocol.pb\").SenderKeyDistributionMessageSpec,{id:a.senderKeyId,iteration:d(\"WASignalSessions\").definedOrThrow(a.senderChainKey,\"senderChainKey\").iteration,chainKey:d(\"WASignalSessions\").definedOrThrow(a.senderChainKey,\"senderChainKey\").seed,signingKey:d(\"WASignalSessions\").definedOrThrow(a.senderSigningKey,\"senderSigningKey\")[\"public\"]},b);return b.readByteArray()}function e(a,c){var e,f,g,h,i,j,k,l,m,o,p,q,r,s,t;return b(\"regeneratorRuntime\").async(function(u){while(1)switch(u.prev=u.next){case 0:if(!(!a.senderKeyStates||a.senderKeyStates.length===0)){u.next=2;break}return u.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalNoSession\"));case 2:e=a.senderKeyStates[a.senderKeyStates.length-1];u.next=5;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").deriveSenderKeyMsgKey(e.senderKeyChainKey.nextMsgIndex,e.senderKeyChainKey.chainKey));case 5:f=u.sent;g=f[0];h=f[1];u.next=10;return b(\"regeneratorRuntime\").awrap(n(h.seed));case 10:i=u.sent;j=i[0];k=i[1];u.next=15;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoDependencies\").getCrypto().subtle.encrypt({name:\"AES-CBC\",iv:k},j,c));case 15:l=u.sent;m=new(d(\"WABinary\").Binary)();d(\"encodeProtobuf\").encodeProtobuf(d(\"WASignalWhisperTextProtocol.pb\").SenderKeyMessageSpec,{id:e.senderKeyId,iteration:h.iteration,ciphertext:l},m);o=new(d(\"WABinary\").Binary)();o.writeUint8(d(\"WASignalCipher\").versionByte(d(\"WASignalGroupSession\").FORMAT_VERSION,d(\"WASignalGroupSession\").FORMAT_VERSION));o.writeBinary(m);p=d(\"WASignalKeys\").makeKeyPairFromSerialized(d(\"WASignalSessions\").definedOrThrow(e.senderSigningKeyPrivate,\"senderSigningKeyPrivate\"),e.senderSigningKeyPublic);q=d(\"WASignalSignatures\").signSenderKeyMessage(p,o.readByteArray());r=new(d(\"WABinary\").Binary)();r.writeUint8(d(\"WASignalCipher\").versionByte(d(\"WASignalGroupSession\").FORMAT_VERSION,d(\"WASignalGroupSession\").FORMAT_VERSION));r.writeBinary(m);r.writeByteArray(q);s=d(\"WASignalGroupSession\").makeSenderKeyChainKey(h.iteration+1,g);t=d(\"WASignalGroupSession\").updateSessionWithUpdatedSenderKeyState(a,d(\"WASignalGroupSession\").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,s,e.senderKeyId,e.unusedMsgKeys));return u.abrupt(\"return\",d(\"WAResultOrError\").makeResult([t,r.readByteArray()]));case 30:case\"end\":return u.stop()}},null,this)}function f(a,c){var e,f,g,h,i,j,k,l,m,q,r,s,t,u,v;return b(\"regeneratorRuntime\").async(function(w){while(1)switch(w.prev=w.next){case 0:e=c.senderKeyMessageId,f=c.iteration,g=c.ciphertext,h=c.versionContentMac;i=d(\"WASignalGroupSession\").findSenderKeyState(a,e);if(!(i==null)){w.next=4;break}return w.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalNoSession\"));case 4:j=i.senderSigningKeyPublic;k=o(h,j);if(k){w.next=8;break}return w.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalInvalidKey\"));case 8:w.next=10;return b(\"regeneratorRuntime\").awrap(p(i,f));case 10:l=w.sent;if(l.success){w.next=13;break}return w.abrupt(\"return\",l);case 13:m=l.value;q=m.msgKey;r=d(\"WASignalGroupSession\").updateSessionWithUpdatedSenderKeyState(a,m.updatedSenderKeyState);w.next=18;return b(\"regeneratorRuntime\").awrap(n(q.seed));case 18:s=w.sent;t=s[0];u=s[1];w.next=23;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoDependencies\").getCrypto().subtle.decrypt({name:\"AES-CBC\",iv:u},t,g));case 23:v=w.sent;return w.abrupt(\"return\",d(\"WAResultOrError\").makeResult([r,v]));case 25:case\"end\":return w.stop()}},null,this)}function l(a){var b,c,e,f;try{a=d(\"WASignalCipher\").readContent(a,d(\"WASignalGroupSession\").FORMAT_VERSION,0);if(!a.success)return a;a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WASignalWhisperTextProtocol.pb\").SenderKeyDistributionMessageSpec,a.value);b=a.id;c=a.iteration;var g=d(\"WASignalSessions\").bytesOrThrow(a.signingKey,33,\"signingKey\");e=d(\"WASignalKeys\").castToSerializedPubKey(g);f=d(\"WASignalSessions\").bytesOrThrow(a.chainKey,32,\"chainKey\");if(b==null||c==null)return d(\"WAResultOrError\").makeError(\"errSignalGrpInvalidProtoFormat\")}catch(a){d(\"WALogger\").DEV(j(),a);return d(\"WAResultOrError\").makeError(\"errSignalGrpInvalidKeyFormat\")}return d(\"WAResultOrError\").makeResult({senderKeyId:b,iteration:c,signingKeyPublic:e,chainKey:f})}function m(a){if(a.length<1)return d(\"WAResultOrError\").makeError(\"errSignalGrpVersionContentEmpty\");var b=a[0]>>>4;if(b!==d(\"WASignalGroupSession\").FORMAT_VERSION)return b<d(\"WASignalGroupSession\").FORMAT_VERSION?d(\"WAResultOrError\").makeError(\"errSignalLegacyMsg\"):d(\"WAResultOrError\").makeError(\"errSignalInvalidVersion\");if(a.length<1+k)return d(\"WAResultOrError\").makeError(\"errSignalGrpInvalidVersionContentLength\");var c,e,f;try{b=a.subarray(1,-k);b=d(\"decodeProtobuf\").decodeProtobuf(d(\"WASignalWhisperTextProtocol.pb\").SenderKeyMessageSpec,b);c=b.id;e=b.iteration;f=b.ciphertext;if(c==null||e==null||f==null)return d(\"WAResultOrError\").makeError(\"errSignalGrpSenderKeyInvalidProtoFormat\")}catch(a){d(\"WALogger\").ERROR(i(),a);return d(\"WAResultOrError\").makeError(\"errSignalGrpSenderKeyProtoError\")}return d(\"WAResultOrError\").makeResult({senderKeyMessageId:c,iteration:e,ciphertext:new Uint8Array(f),versionContentMac:a})}function n(a){var c,e,f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:c=new(d(\"WABinary\").Binary)(a);e=d(\"WASignalOther\").readBytes(c,16);f=d(\"WASignalOther\").readBytes(c,32);g.next=5;return b(\"regeneratorRuntime\").awrap(d(\"WASignalOther\").makeCryptoKey(f,\"aes-cbc\"));case 5:g.t0=g.sent;g.t1=e;return g.abrupt(\"return\",[g.t0,g.t1]);case 8:case\"end\":return g.stop()}},null,this)}function o(a,b){var c=a.subarray(a.length-k);a=a.subarray(0,a.length-k);return d(\"WASignalSignatures\").verifyMsgSignalVariant(b,a,d(\"WASignalOther\").toBytes(d(\"WASignalOther\").toBuffer(c),64))}function p(a,c){var e,f,g,i,j,k,l,m,n,o,p,r,s;return b(\"regeneratorRuntime\").async(function(t){while(1)switch(t.prev=t.next){case 0:e=a;f=c-e.senderKeyChainKey.nextMsgIndex;g=2e3;try{g=d(\"WABaseGlobals\").getConfig().getSignalFutureMessagesMax()}catch(a){d(\"WALogger\").ERROR(h())}if(!(f>g)){t.next=6;break}return t.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalGrpTooManyMessagesInFuture\"));case 6:i=a.unusedMsgKeys||[];if(!(f<0)){t.next=12;break}j=i.findIndex(function(a){return a.iteration===c});if(!(j===-1)){t.next=11;break}return t.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errDuplicateMsg\"));case 11:return t.abrupt(\"return\",d(\"WAResultOrError\").makeResult({msgKey:i[j],updatedSenderKeyState:d(\"WASignalGroupSession\").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,e.senderKeyChainKey,e.senderKeyId,q(i,j))}));case 12:k=e.senderKeyChainKey.nextMsgIndex;t.next=15;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").deriveSenderKeyMsgKey(k,e.senderKeyChainKey.chainKey));case 15:l=t.sent;m=l[0];n=l[1];o=null;if(!(f>0)){t.next=33;break}p=f+i.length-d(\"WASignalCipher\").MAX_UNUSED_KEYS;p>0?(o=i.slice(p),p-=i.length):o=i.slice();r=k+1;case 23:if(!(r<=c)){t.next=33;break}p>0?p--:o.push(n);t.next=27;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").deriveSenderKeyMsgKey(r,m));case 27:s=t.sent,m=s[0],n=s[1];case 30:r++;t.next=23;break;case 33:return t.abrupt(\"return\",d(\"WAResultOrError\").makeResult({msgKey:n,updatedSenderKeyState:d(\"WASignalGroupSession\").makeSenderKeyState(e.senderSigningKeyPublic,e.senderSigningKeyPrivate,d(\"WASignalGroupSession\").makeSenderKeyChainKey(c+1,m),a.senderKeyId,o||i)}));case 34:case\"end\":return t.stop()}},null,this)}function q(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}g.processSenderKeyDistributionMsg=a;g.createSenderKeyDistributionProto=c;g.encryptSenderKeyMsgWithSession=e;g.decryptSenderKeyMsgFromSession=f;g.deserializeSenderKeyMsg=m}),98);\n__d(\"WACryptoLibrary\",[\"WACryptoUtils\",\"WAJids\",\"WALockMap\",\"WALogger\",\"WAResultOrError\",\"WASignalCipher\",\"WASignalGroupCipher\",\"WASignalGroupSession\",\"WASignalKeys\",\"WASignalOther\",\"WASignalSignatures\",\"WASignalWhitepaper\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"getSessionForRecipient pkmsg signature verification result: \",\"\"]);h=function(){return a};return a}var i=d(\"WALockMap\").makeLockMap(60*1e3),j=[],k=300;function l(a){j.push(a),j.length>=k&&j.shift()}function a(a){a(j),j=[]}function m(a,c){var e,f,g,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:l(\"createOutgoingSession\");e=t(c);f=e.signedKey;j.next=5;return b(\"regeneratorRuntime\").awrap(d(\"WASignalSignatures\").verifyMsgSignalVariant(e.identity,f.publicKey,f.signature));case 5:g=j.sent;d(\"WALogger\").DEV(h(),g);if(g){j.next=10;break}l(\"createOutgoingSession: errSignalInvalidKey\");return j.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalInvalidKey\"));case 10:j.next=12;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").initiateSessionOutgoing(a,e,d(\"WASignalKeys\").makeKeyPair()));case 12:i=j.sent;return j.abrupt(\"return\",d(\"WAResultOrError\").makeResult(i));case 14:case\"end\":return j.stop()}},null,this)}function c(a,c,d,e,f){var g,h,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:g=a.handleNewSession;l(\"establishOutgoingSession\");j.next=4;return b(\"regeneratorRuntime\").awrap(m(c,e));case 4:h=j.sent;if(h.success){j.next=7;break}return j.abrupt(\"return\",h);case 7:i=h.value;return j.abrupt(\"return\",g(d,i,i.remote.pubKey,null,f));case 9:case\"end\":return j.stop()}},null,this)}function e(a,c,e,f){var g=a.loadSession,h=a.handleNewSession;l(\"encryptContent\");return i.lock([d(\"WAJids\").extractUserJid(c)],function(){var a,i,j,k,m,n;return b(\"regeneratorRuntime\").async(function(o){while(1)switch(o.prev=o.next){case 0:a=null;case 1:o.next=3;return b(\"regeneratorRuntime\").awrap(g(c,\"cryptoLibraryEncryptContent\"));case 3:i=o.sent;if(!(i==null)){o.next=7;break}l(\"encryptContent: errSignalInvalidKey\");return o.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errSignalInvalidKey\"));case 7:if(!(f!=null&&!d(\"WACryptoUtils\").uint8ArraysEqual(f,i.remote.pubKey))){o.next=10;break}l(\"encryptContent: identity-mismatch\");return o.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"identity-mismatch\"));case 10:o.next=12;return b(\"regeneratorRuntime\").awrap(d(\"WASignalCipher\").encryptMsg(i,e));case 12:j=o.sent;k=j[0];m=j[1];o.next=17;return b(\"regeneratorRuntime\").awrap(h(c,k,k.remote.pubKey));case 17:n=o.sent,n.success?a=d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},m,{baseKey:k.aliceBaseKey})):n.error;case 19:if(a==null){o.next=1;break}case 20:return o.abrupt(\"return\",a);case 21:case\"end\":return o.stop()}},null,this)})}function f(a,c,e,f,g){var h=a.loadSession,j=a.handleNewSession,k=a.loadSignedPreKey,m=a.loadOneTimePreKey;l(\"decryptContent\");return i.lock([d(\"WAJids\").extractUserJid(e)],function(){var a,i,o,p,q,r,s,t,u,v,w,x;return b(\"regeneratorRuntime\").async(function(y){while(1)switch(y.prev=y.next){case 0:a=!1;y.next=3;return b(\"regeneratorRuntime\").awrap(h(e,\"decryptContent\"));case 3:i=y.sent;if(!(f.type===\"pkmsg\")){y.next=18;break}p=d(\"WASignalCipher\").deserializePkMsg(f.ciphertext);if(p.success){y.next=9;break}l(\"decryptContent: errCryptoDeserialization\");return y.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errCryptoDeserialization\"));case 9:q=p.value;y.next=12;return b(\"regeneratorRuntime\").awrap(n({loadSignedPreKey:k,loadOneTimePreKey:m},c,q,i));case 12:r=y.sent;if(r.success){y.next=15;break}return y.abrupt(\"return\",r);case 15:o=r.value;y.next=30;break;case 18:f.type;s=d(\"WASignalCipher\").deserializeMsg(f.ciphertext);if(s.success){y.next=23;break}l(\"decryptContent: errCryptoDeserialization\");return y.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errCryptoDeserialization\"));case 23:t=s.value;y.next=26;return b(\"regeneratorRuntime\").awrap(d(\"WASignalCipher\").decryptMsg(i,t));case 26:u=y.sent;if(u.success){y.next=29;break}return y.abrupt(\"return\",u);case 29:o=u.value;case 30:v=o,w=v.newSessionInfo;if(!(w&&(w.newIdentity!=null||w.usedPreKey!=null))){y.next=34;break}y.next=34;return b(\"regeneratorRuntime\").awrap(j(e,w.baseSession,w.newIdentity,w.usedPreKey));case 34:if(a){y.next=39;break}x=w==null?void 0:w.baseSession.remote.pubKey;y.next=38;return b(\"regeneratorRuntime\").awrap(g(new Uint8Array(o.plaintext),x));case 38:a=!0;case 39:y.next=41;return b(\"regeneratorRuntime\").awrap(j(e,o.updatedSession,o.updatedSession.remote.pubKey));case 41:return y.abrupt(\"return\",d(\"WAResultOrError\").makeResult());case 42:case\"end\":return y.stop()}},null,this)})}function n(a,c,e,f){var g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,w;return b(\"regeneratorRuntime\").async(function(x){while(1)switch(x.prev=x.next){case 0:g=a.loadSignedPreKey,h=a.loadOneTimePreKey;l(\"decryptPkMsg\");i=f&&d(\"WASignalCipher\").findMatchingSession(f,e.sessionBaseKey);if(!i){x.next=13;break}x.next=6;return b(\"regeneratorRuntime\").awrap(d(\"WASignalCipher\").decryptMsgFromSession(i,e));case 6:j=x.sent;if(j.success){x.next=9;break}return x.abrupt(\"return\",j);case 9:k=j.value,m=k[0],n=k[1];return x.abrupt(\"return\",d(\"WAResultOrError\").makeResult({newSessionInfo:null,updatedSession:m,plaintext:n}));case 13:o=e.localOneTimeKeyId;x.next=16;return b(\"regeneratorRuntime\").awrap(g(e.localSignedPreKeyId));case 16:p=x.sent;if(!(o==null)){x.next=21;break}x.t0=null;x.next=24;break;case 21:x.next=23;return b(\"regeneratorRuntime\").awrap(h(o));case 23:x.t0=x.sent;case 24:q=x.t0;x.next=27;return b(\"regeneratorRuntime\").awrap(d(\"WASignalCipher\").decryptPkMsgWithNewSession(c,f,e,{localSignedPreKey:p,localOneTimeKey:q}));case 27:r=x.sent;if(r.success){x.next=30;break}return x.abrupt(\"return\",r);case 30:s=r.value,t=s.newIdentity,u=s.baseSession,v=s.updatedSession,w=s.plaintext;return x.abrupt(\"return\",d(\"WAResultOrError\").makeResult({newSessionInfo:{newIdentity:t,baseSession:u,usedPreKey:o},updatedSession:v,plaintext:w}));case 32:case\"end\":return x.stop()}},null,this)}function o(c,e,f,g){var h=c.loadSenderKeySession,a=c.saveSenderKeySession;l(\"encryptGroupContent\");return i.lock([e,d(\"WAJids\").extractUserJid(f)],function(){var c,i,j,k,m,n,o,p;return b(\"regeneratorRuntime\").async(function(q){while(1)switch(q.prev=q.next){case 0:c=null;case 1:q.next=3;return b(\"regeneratorRuntime\").awrap(h(e,f));case 3:i=q.sent;if(i.success){q.next=6;break}return q.abrupt(\"return\",d(\"WAResultOrError\").makeError(i.error));case 6:j=i.value;q.next=9;return b(\"regeneratorRuntime\").awrap(d(\"WASignalGroupCipher\").encryptSenderKeyMsgWithSession(j,g));case 9:k=q.sent;if(!k.success){q.next=18;break}m=k.value,n=m[0],o=m[1];q.next=14;return b(\"regeneratorRuntime\").awrap(a(e,f,n));case 14:p=j.senderKeyStates[j.senderKeyStates.length-1];c=d(\"WAResultOrError\").makeResult({ciphertext:{ciphertext:o,type:\"skmsg\"},senderKeyId:p.senderKeyId,senderKeyDistributionProto:d(\"WASignalGroupCipher\").createSenderKeyDistributionProto(d(\"WASignalGroupSession\").convertFromRawToSenderKeyState(p))});q.next=20;break;case 18:l(\"encryptGroupContent: sender-key-no-session\");return q.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"sender-key-no-session\"));case 20:if(c==null){q.next=1;break}case 21:return q.abrupt(\"return\",c);case 22:case\"end\":return q.stop()}},null,this)})}function p(c,e,f,g,h){var j=c.loadSenderKeySession,a=c.saveSenderKeySession;l(\"decryptGroupContent\");return i.lock([e,d(\"WAJids\").extractUserJid(f)],function(){var c,i,k,m,n,o,p,q;return b(\"regeneratorRuntime\").async(function(r){while(1)switch(r.prev=r.next){case 0:c=!1;r.next=3;return b(\"regeneratorRuntime\").awrap(j(e,f));case 3:i=r.sent;if(i.success){r.next=6;break}return r.abrupt(\"return\",d(\"WAResultOrError\").makeError(i.error));case 6:k=d(\"WASignalGroupCipher\").deserializeSenderKeyMsg(g);if(k.success){r.next=10;break}l(\"decryptGroupContent: errCryptoDeserialization\");return r.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errCryptoDeserialization\"));case 10:m=i.value;r.next=13;return b(\"regeneratorRuntime\").awrap(d(\"WASignalGroupCipher\").decryptSenderKeyMsgFromSession(m,k.value));case 13:n=r.sent;if(n.success){r.next=16;break}return r.abrupt(\"return\",n);case 16:o=n.value,p=o[0],q=o[1];if(c){r.next=21;break}r.next=20;return b(\"regeneratorRuntime\").awrap(h(new Uint8Array(q)));case 20:c=!0;case 21:r.next=23;return b(\"regeneratorRuntime\").awrap(a(e,f,p));case 23:return r.abrupt(\"return\",d(\"WAResultOrError\").makeResult());case 24:case\"end\":return r.stop()}},null,this)})}function q(c,e,f,g){var h=c.loadSenderKeySession,a=c.saveSenderKeySession;l(\"saveSenderKeySession\");return i.lock([e,d(\"WAJids\").extractUserJid(f)],function(){var c,i,j,k;return b(\"regeneratorRuntime\").async(function(l){while(1)switch(l.prev=l.next){case 0:c=null;if(!h){l.next=6;break}l.next=4;return b(\"regeneratorRuntime\").awrap(h(e,f));case 4:i=l.sent,c=i.success?i.value:null;case 6:l.next=8;return b(\"regeneratorRuntime\").awrap(d(\"WASignalGroupCipher\").processSenderKeyDistributionMsg(g,c));case 8:j=l.sent;if(j.success){l.next=11;break}return l.abrupt(\"return\",j);case 11:k=j.value;l.next=14;return b(\"regeneratorRuntime\").awrap(a(e,f,k));case 14:return l.abrupt(\"return\",d(\"WAResultOrError\").makeResult());case 15:case\"end\":return l.stop()}},null,this)})}function r(c,e,f,g){var a=c.saveSenderKeySession;l(\"rotateGroupSenderKey\");return i.lock([e,d(\"WAJids\").extractUserJid(f)],function(){var c,h;return b(\"regeneratorRuntime\").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WASignalWhitepaper\").initiateSenderKeySessionOutgoing(g));case 2:c=i.sent;h=c.senderKeyStates[0].senderKeyId;i.next=6;return b(\"regeneratorRuntime\").awrap(a(e,f,c));case 6:return i.abrupt(\"return\",{senderKeyId:h});case 7:case\"end\":return i.stop()}},null,this)})}function s(c,e,f){var g,a,h,i,j,k;return b(\"regeneratorRuntime\").async(function(m){while(1)switch(m.prev=m.next){case 0:g=c.loadSenderKeySession,a=c.saveSenderKeySession;l(\"createSenderKeyDistributionMsg\");m.next=4;return b(\"regeneratorRuntime\").awrap(g(e,f));case 4:h=m.sent;i=h.error;if(!(!h.success&&i===\"errLoadSenderKeySession\")){m.next=15;break}m.next=9;return b(\"regeneratorRuntime\").awrap(d(\"WASignalKeys\").makeKeyPair());case 9:j=m.sent;m.next=12;return b(\"regeneratorRuntime\").awrap(r({saveSenderKeySession:a},e,f,j));case 12:m.next=14;return b(\"regeneratorRuntime\").awrap(g(e,f));case 14:h=m.sent;case 15:if(!h.success){m.next=19;break}k=h.value.senderKeyStates.slice(-1);if(!(k.length>0)){m.next=19;break}return m.abrupt(\"return\",d(\"WAResultOrError\").makeResult(d(\"WASignalGroupCipher\").createSenderKeyDistributionProto(d(\"WASignalGroupSession\").convertFromRawToSenderKeyState(k[0]))));case 19:l(\"createSenderKeyDistributionMsg: errGetSenderKeyProto\");return m.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errGetSenderKeyProto\"));case 21:case\"end\":return m.stop()}},null,this)}function t(a){var b=a.regId,c=a.identity,e=a.signedKey;a=a.oneTimeKey;l(\"sanitizeInitialSessionInfo\");var f=d(\"WASignalKeys\").castToSerializedPubKey(e.publicKey);return{regId:d(\"WASignalOther\").castRegistrationId(b),identity:d(\"WASignalKeys\").castToSerializedPubKey(c),signedKey:{id:d(\"WASignalKeys\").castToSignedPreKeyId(e.id),publicKey:f,signature:d(\"WASignalOther\").ensureSize(e.signature,64)},oneTimeKey:a&&{id:d(\"WASignalKeys\").castToPreKeyId(a.id),publicKey:d(\"WASignalKeys\").castToSerializedPubKey(a.publicKey)},ratchetKey:f}}g.publishLogs=a;g.createOutgoingSession=m;g.establishOutgoingSession=c;g.encryptContent=e;g.decryptContent=f;g.encryptGroupContent=o;g.decryptGroupContent=p;g.saveSenderKeySession=q;g.rotateGroupSenderKey=r;g.createSenderKeyDistributionMsg=s}),98);\n__d(\"WACryptoManager\",[\"MAWLoggerUtils\",\"Promise\",\"WACryptoLibrary\",\"WACryptoUtils\",\"WAErr\",\"WAGlobals\",\"WAJids\",\"WALogger\",\"WANullthrows\",\"WAPromiseQueue\",\"WAResultOrError\",\"WASignalCipher\",\"WASignalGroupSession\",\"WASignalKeys\",\"WASignalLocalStorageProtocol.pb\",\"WASignalOther\",\"WASignalSessions\",\"WASignalSignatures\",\"WATagsLogger\",\"WATimeUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to generate signed prekey with id: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to deserialize signed prekey: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to generate signed prekey \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendMessage] start encryption\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendMessage] sendWrittenMsg bulkEncryptContent\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sessions] Failed to create a session\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sessions] Received keys \",\"\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sessions] Removing session \",\" due to ratchet key\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sessions] fail during key requesting\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sessions] Missing sessions: \",\". Requesting keys\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sessions] No need to establish outgoing sessions\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[sessions] Establish outgoing sessions\"]);t=function(){return a};return a}var u=d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.CryptoManager]),v={type:\"default\"};function a(a){return{flush:function(){return a.storage.savePendingToDatabase().then(function(){})}}}function e(a){return{regInfo:a.regInfo,network:a.network,storage:a.storage}}function w(a,c,e,f,g){var h,i,j,k,l;return b(\"regeneratorRuntime\").async(function(m){while(1)switch(m.prev=m.next){case 0:m.next=2;return b(\"regeneratorRuntime\").awrap(f(c,g));case 2:h=m.sent;if(!(h!=null&&e.type!==\"requestNewSession\")){m.next=13;break}i=h;if(!(e.type===\"default\")){m.next=9;break}return m.abrupt(\"return\",d(\"WAResultOrError\").makeResult(i));case 9:if(!(i.aliceBaseKey!=null&&e.session.baseKey!=null)){m.next=13;break}e.type;if(d(\"WACryptoUtils\").uint8ArraysEqual(e.session.baseKey,i.aliceBaseKey)){m.next=13;break}return m.abrupt(\"return\",d(\"WAResultOrError\").makeResult(i));case 13:if(!(e.type===\"useSession\")){m.next=17;break}j=e.session.keys;m.next=25;break;case 17:e.type;m.next=20;return b(\"regeneratorRuntime\").awrap(a.network.requestKeys(c));case 20:k=m.sent;if(k.success){m.next=23;break}return m.abrupt(\"return\",k);case 23:j=k.value.keys,e.type===\"compareTSAndUseSession\"&&e.session.timestamp>=k.value.timestamp&&(j=e.session.keys);case 25:m.next=27;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoLibrary\").createOutgoingSession(a.regInfo,j));case 27:l=m.sent;if(l.success){m.next=30;break}return m.abrupt(\"return\",l);case 30:return m.abrupt(\"return\",d(\"WAResultOrError\").makeResult(l.value));case 31:case\"end\":return m.stop()}},null,this)}function f(a,b,c,e){return d(\"WACryptoLibrary\").establishOutgoingSession({handleNewSession:a.storage.handleNewSession},a.regInfo,b,c,e)}function x(a,c){var e,f,g,h,i,j,k,l,m,u,v,w;return b(\"regeneratorRuntime\").async(function(x){while(1)switch(x.prev=x.next){case 0:d(\"WALogger\").DEV(t());x.next=3;return b(\"regeneratorRuntime\").awrap(a.storage.loadSessions(c));case 3:e=x.sent;f=c.filter(function(a){return!e.has(a)});if(!(f.length===0)){x.next=8;break}d(\"WALogger\").DEV(s());return x.abrupt(\"return\",e);case 8:d(\"WALogger\").DEV(r(),f.length);x.next=11;return b(\"regeneratorRuntime\").awrap(a.network.bulkRequestKeys(f));case 11:g=x.sent;if(g.success){x.next=15;break}d(\"WALogger\").ERROR(q());return x.abrupt(\"return\",e);case 15:if(!d(\"WAGlobals\").getConfig().useLongSessionDrop()){x.next=33;break}h=e.entries(),i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();case 17:if(!i){x.next=23;break}if(!(j>=h.length)){x.next=20;break}return x.abrupt(\"break\",33);case 20:k=h[j++];x.next=27;break;case 23:j=h.next();if(!j.done){x.next=26;break}return x.abrupt(\"break\",33);case 26:k=j.value;case 27:l=k,m=l[0],u=l[1],u.sendChain.nextMsgIndex>=d(\"WAGlobals\").getConfig().sessionDropIfTooOld()&&(d(\"WALogger\").DEV(p(),m),e[\"delete\"](m));case 31:x.next=17;break;case 33:v=g.value;d(\"WALogger\").DEV(o(),v.size);w=new(d(\"WAPromiseQueue\").PromiseQueue)();v.forEach(function(c,b){w.enqueue(function(){return d(\"WACryptoLibrary\").createOutgoingSession(a.regInfo,c.keys).then(function(a){a.success===!1?d(\"WALogger\").ERROR(n()):e.set(b,a.value)})})});x.next=39;return b(\"regeneratorRuntime\").awrap(w.wait());case 39:return x.abrupt(\"return\",e);case 40:case\"end\":return x.stop()}},null,this)}function y(a,e){var f,g,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:f=Array.from(e.keys());d(\"WALogger\").LOG(m());j.next=4;return b(\"regeneratorRuntime\").awrap(x(a,f));case 4:g=j.sent;i=new Map();d(\"WALogger\").DEV(l());return j.abrupt(\"return\",(h||(h=b(\"Promise\"))).all(Array.from(g.entries()).map(function(f){var g,h,j,k,l,m;return b(\"regeneratorRuntime\").async(function(n){while(1)switch(n.prev=n.next){case 0:h=f[0],j=f[1];n.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WASignalCipher\").encryptMsg(j,c(\"WANullthrows\")((g=e.get(h))==null?void 0:g.plaintext)));case 3:k=n.sent;l=k[0];m=k[1];i.set(h,babelHelpers[\"extends\"]({},m,{baseKey:null}));return n.abrupt(\"return\",a.storage.handleNewSession(h,l,l.remote.pubKey));case 8:case\"end\":return n.stop()}},null,this)})).then(function(){return d(\"WAResultOrError\").makeResult(i)}));case 8:case\"end\":return j.stop()}},null,this)}function z(a,b,c,e,f){return d(\"WACryptoLibrary\").encryptContent({loadSession:function(b){return w(a,b,e,a.storage.loadSession,\"cryptoManagerEncryptContent\").then(function(a){if(a.success===!0)return a.value;else return null})},handleNewSession:a.storage.handleNewSession},b,c,f)}function A(a,b,c,e){return d(\"WACryptoLibrary\").decryptContent({loadSession:a.storage.loadSession,handleNewSession:a.storage.handleNewSession,loadSignedPreKey:a.storage.loadSignedPreKey,loadOneTimePreKey:a.storage.loadOneTimePreKey},a.regInfo,b,c,e)}function B(a,c){var d;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b(\"regeneratorRuntime\").awrap(a.storage.loadSession(c,\"getParticipantInfo\"));case 2:d=e.sent;return e.abrupt(\"return\",d==null?void 0:d.remote);case 4:case\"end\":return e.stop()}},null,this)}function C(a){var e,f,g,h,i,j;return b(\"regeneratorRuntime\").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b(\"regeneratorRuntime\").awrap(a.storage.getLastPreKeyGenerationId());case 2:g=k.sent;h=((e=g==null?void 0:g.lastPreKeyId)!=null?e:0)+1;i=d(\"WASignalKeys\").makePreKeys(h,1)[0];k.next=7;return b(\"regeneratorRuntime\").awrap(a.storage.saveOneTimePreKey({keyId:i.plainObject.id,encoded:i.record}));case 7:j=k.sent;if(!j.success){k.next=10;break}return k.abrupt(\"return\",i.plainObject);case 10:throw c(\"WAErr\")(\"Cannot save one time prekey: \"+j.error+\", LastPreKeyId: \"+((f=g==null?void 0:g.lastPreKeyId)!=null?f:0));case 11:case\"end\":return k.stop()}},null,this)}function D(a,c){var e,f,g;return b(\"regeneratorRuntime\").async(function(h){while(1)switch(h.prev=h.next){case 0:c===void 0&&(c=d(\"WAGlobals\").getConfig().maxPrekeysToUpload());h.next=3;return b(\"regeneratorRuntime\").awrap(a.storage.getLastPreKeyGenerationId());case 3:f=h.sent;g=d(\"WASignalKeys\").makePreKeys(((e=f==null?void 0:f.lastPreKeyId)!=null?e:0)+1,c);return h.abrupt(\"return\",a.storage.savePreKeysGeneration(g.map(function(a){var b=a.plainObject;a=a.record;return{keyId:b.id,encoded:a}})));case 6:case\"end\":return h.stop()}},null,this)}function E(a){return a.storage.loadLatestSignedPreKey().then(function(b){if(b.success===!1){var e;u.TAGS([d(\"MAWLoggerUtils\").Tag.SignedPrekey]).ERROR(k(),b==null?void 0:(e=b.payload)==null?void 0:e.toString());throw c(\"WAErr\")(\"Failed to generate signed prekey: \"+((e=b==null?void 0:(e=b.payload)==null?void 0:e.message)!=null?e:\"\"))}e=b.value;e=d(\"WASignalSignatures\").deserializeSignedPreKey(e);if(e==null){u.TAGS([d(\"MAWLoggerUtils\").Tag.SignedPrekey]).ERROR(j(),b);throw c(\"WAErr\")(\"failed to deserialize signed prekey\")}return F(a,e.id+1)})}function F(a,b){var e=d(\"WASignalSignatures\").makeSignedPreKey(b,d(\"WATimeUtils\").unixTimeMs(),a.regInfo.staticKeyPair);b=d(\"WASignalSignatures\").serializeSignedPreKeyForPrivateStorage(e);return a.storage.saveSignedPreKeyIfNew(e.id,b).then(function(a){if(a.type===\"success\")return d(\"WAResultOrError\").makeResult(e);else{a.type;return d(\"WAResultOrError\").makeResult(a.key)}}).then(function(a){if(!a.success){var b;u.TAGS([d(\"MAWLoggerUtils\").Tag.SignedPrekey]).ERROR(i(),a);throw c(\"WAErr\")(\"Unexpected error when generateSignedPreKeyWithId: \"+((b=a==null?void 0:(b=a.payload)==null?void 0:b.message)!=null?b:a.error))}return a.value})}function G(a,b,c,e){return d(\"WACryptoLibrary\").encryptGroupContent({loadSenderKeySession:a.storage.loadSenderKeySession,saveSenderKeySession:a.storage.saveSenderKeySession},b,c,e)}function H(a,b,c,e,f){return d(\"WACryptoLibrary\").decryptGroupContent({loadSenderKeySession:a.storage.loadSenderKeySession,saveSenderKeySession:a.storage.saveSenderKeySession},b,c,e,f)}function I(a,b,c,e){return d(\"WACryptoLibrary\").saveSenderKeySession({loadSenderKeySession:d(\"WAGlobals\").getConfig().useUpdatedSenderKeySession()?a.storage.loadSenderKeySession:void 0,saveSenderKeySession:a.storage.saveSenderKeySession},b,c,e)}function J(a,c,e){var f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b(\"regeneratorRuntime\").awrap(C(a));case 2:f=g.sent;return g.abrupt(\"return\",d(\"WACryptoLibrary\").rotateGroupSenderKey({saveSenderKeySession:a.storage.saveSenderKeySession},c,e,f.keyPair));case 4:case\"end\":return g.stop()}},null,this)}function K(a){return(h||(h=b(\"Promise\"))).resolve().then(function(){return{regId:d(\"WASignalOther\").makeRegistrationId(a),staticKeyPair:d(\"WASignalKeys\").makeKeyPair(),authKeyPair:d(\"WASignalKeys\").makeKeyPair()}})}function L(a){return d(\"WASignalOther\").encodeSignalProto(d(\"WASignalLocalStorageProtocol.pb\").RecordStructureSpec,d(\"WASignalSessions\").serializeSession(a))}function M(a){return d(\"WASignalOther\").decodeSignalProto(d(\"WASignalLocalStorageProtocol.pb\").RecordStructureSpec,a,d(\"WASignalSessions\").parseSessionFromRecord)}function N(a){return d(\"WASignalOther\").encodeSignalProto(d(\"WASignalLocalStorageProtocol.pb\").SenderKeyRecordStructureSpec,d(\"WASignalGroupSession\").serializeSession(a))}function O(a){return d(\"WASignalOther\").decodeSignalProto(d(\"WASignalLocalStorageProtocol.pb\").SenderKeyRecordStructureSpec,a,d(\"WASignalGroupSession\").parseSessionFromRecord)}function P(a){return a}function Q(a,b){return a+\"|\"+b}function R(a){a=a.split(\"|\");if(a.length!==2)throw c(\"WAErr\")(\"Incorrect ComplexSenderKey\");return{groupId:d(\"WAJids\").unsafeCoerceToGroupJid(a[0]),deviceId:d(\"WAJids\").unsafeCoerceToDeviceJid(a[1])}}g.DEFAULT_SESSION_REQUEST=v;g.cryptoManagerFlushable=a;g.initCryptoManager=e;g.getSessionForRecipient=w;g.establishOutgoingSession=f;g.ensureSessionsExists=x;g.bulkEncryptContent=y;g.encryptContent=z;g.decryptContent=A;g.getParticipantInfo=B;g.generateOneTimePreKey=C;g.generatePreKeys=D;g.generateSignedPreKey=E;g.generateSignedPreKeyWithId=F;g.encryptGroupContent=G;g.decryptGroupContent=H;g.saveSenderKeySession=I;g.rotateGroupSenderKey=J;g.generateRegistrationInfo=K;g.encodeSession=L;g.decodeSession=M;g.encodeSenderKeySession=N;g.decodeSenderKeySession=O;g.castToPreKeyGenerationId=P;g.encodeSenderKey=Q;g.decodeSenderKey=R}),98);\n__d(\"WAHandleFailureUtils\",[\"WABridge\",\"WAGlobals\"],(function(a,b,c,d,e,f,g){\"use strict\";c={GENERIC_FAILURE:\"400\",NOT_AUTHORIZED:\"401\",TEMP_BANNED:\"402\",BANNED:\"403\",CAT_EXPIRED:\"413\",CAT_INVALID:\"414\",NOT_FOUND:\"415\",INTERNAL_ERROR:\"500\",SERVER_UNAVAILABLE:\"503\"};function h(){return d(\"WAGlobals\").getDbImpls().clearSignalAndTempStores()}function a(){return h().then(function(){d(\"WABridge\").getBridge().fireAndForget(\"event\",\"logout\",{})})}function b(){return h().then(function(){d(\"WABridge\").getBridge().fireAndForget(\"event\",\"reregisterDevice\",{})})}g.FAILURE_CODES=c;g.clearRegistrationAndTempData=h;g.deregisterPhone=a;g.reregisterPhone=b}),98);\n__d(\"WASignalEntityStoreV2\",[\"$InternalEnum\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"$InternalEnum\").Mirrored([\"NOT_PERSISTED\",\"PERSIST_IN_PROGRESS\",\"PERSISTED\"]);a=function(){function a(){this.$1=new Map()}var c=a.prototype;c.TEST_ONLY_LOAD_FROM_MEMORY=function(a){return this.$2(a)};c.$2=function(a){a=this.$1.get(a);return a!=null?{entity:a.entity,deleted:a.deleted}:null};c.load=function(a,c){var d,e;return b(\"regeneratorRuntime\").async(function(f){while(1)switch(f.prev=f.next){case 0:d=this.$2(a);if(!(d==null?void 0:d.deleted)){f.next=3;break}return f.abrupt(\"return\",null);case 3:if(!(d!=null&&d.entity!=null)){f.next=5;break}return f.abrupt(\"return\",d.entity);case 5:f.next=7;return b(\"regeneratorRuntime\").awrap(c(a));case 7:e=f.sent;this.$3(a,e);return f.abrupt(\"return\",e);case 10:case\"end\":return f.stop()}},null,this)};c.bulkLoad=function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;return b(\"regeneratorRuntime\").async(function(q){while(1)switch(q.prev=q.next){case 0:d=[],e=new Map(),f=0;case 3:if(!(f<a.length)){q.next=15;break}g=a[f];h=this.$2(g);if(!(h==null)){q.next=9;break}d.push(g);return q.abrupt(\"continue\",12);case 9:if(!h.deleted){q.next=11;break}return q.abrupt(\"continue\",12);case 11:h.entity!=null?e.set(g,h.entity):d.push(g);case 12:f++;q.next=3;break;case 15:q.next=17;return b(\"regeneratorRuntime\").awrap(c(d));case 17:i=q.sent,(j=i.entries(),k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 19:if(!k){q.next=25;break}if(!(l>=j.length)){q.next=22;break}return q.abrupt(\"break\",36);case 22:m=j[l++];q.next=29;break;case 25:l=j.next();if(!l.done){q.next=28;break}return q.abrupt(\"break\",36);case 28:m=l.value;case 29:n=m,o=n[0],p=n[1],e.set(o,p),this.$3(o,p);case 34:q.next=19;break;case 36:return q.abrupt(\"return\",e);case 37:case\"end\":return q.stop()}},null,this)};c.$3=function(a,b){this.$1.set(a,{entity:b,status:g.PERSISTED,deleted:!1})};c.store=function(a,b){this.$1.set(a,{entity:b,status:g.NOT_PERSISTED,deleted:!1})};c.remove=function(a){this.$1.set(a,{entity:null,status:g.NOT_PERSISTED,deleted:!0})};c.pureSnapshot=function(){var a=[],b=Array.from(this.$1.entries()).filter(function(a){a[0];a=a[1];return a.status===g.NOT_PERSISTED}).filter(function(b){var c=b[0];b=b[1];b.deleted&&a.push({id:c});return!b.deleted}).filter(function(a){a[0];a=a[1];return a.entity!=null}).map(function(a){var b=a[0];a=a[1];return{id:b,cachedEntity:a.entity}});return{update:b,remove:a}};c.snapshot=function(){var a=this,b=this.pureSnapshot();b.remove.forEach(function(b){b=b.id;b=a.$1.get(b);b&&(b.status=g.PERSIST_IN_PROGRESS)});b.update.forEach(function(b){b=b.id;b=a.$1.get(b);b&&(b.status=g.PERSIST_IN_PROGRESS)});return b};c.markSnapshotAsCommitted=function(){this.$1.forEach(function(a){a.status===g.PERSIST_IN_PROGRESS&&(a.status=g.PERSISTED)})};c.markSnapshotAsFailed=function(){this.$1.forEach(function(a){a.status===g.PERSIST_IN_PROGRESS&&(a.status=g.NOT_PERSISTED)})};c.clear=function(){this.$1=new Map()};return a}();f.PersistStatus=g;f.SignalEntityStore=a}),66);\n__d(\"WASignalIdentityStore\",[\"Promise\",\"WAJids\",\"WALogger\",\"WASignalEntityStoreV2\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[WASignalIdentityStore] This should never happen.\"]);i=function(){return a};return a}a=function(){function a(){this.$1=new Map(),this.$2=new(d(\"WASignalEntityStoreV2\").SignalEntityStore)()}var c=a.prototype;c.bulkLoadIdentities=function(a){var c=this,d,e,f,g,i,j;return b(\"regeneratorRuntime\").async(function(k){while(1)switch(k.prev=k.next){case 0:d=function(){var a,d,j;return b(\"regeneratorRuntime\").async(function(k){while(1)switch(k.prev=k.next){case 0:if(!f){k.next=6;break}if(!(g>=e.length)){k.next=3;break}return k.abrupt(\"return\",\"break\");case 3:i=e[g++];k.next=10;break;case 6:g=e.next();if(!g.done){k.next=9;break}return k.abrupt(\"return\",\"break\");case 9:i=g.value;case 10:a=i;d=a[0];j=a[1];k.next=15;return b(\"regeneratorRuntime\").awrap(c.loadIdentitiesByUser(d,function(){return(h||(h=b(\"Promise\"))).resolve(j)}));case 15:case\"end\":return k.stop()}},null,this)},(e=a,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 2:k.next=4;return b(\"regeneratorRuntime\").awrap(d());case 4:j=k.sent;if(!(j===\"break\")){k.next=7;break}return k.abrupt(\"break\",9);case 7:k.next=2;break;case 9:return k.abrupt(\"return\",a);case 10:case\"end\":return k.stop()}},null,this)};c.loadIdentitiesByUser=function(a,c){var e,f,g;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:e=this.$1.get(a);if(!(e==null)){j.next=13;break}j.t0=this;j.t1=a;j.next=6;return b(\"regeneratorRuntime\").awrap(c(a));case 6:j.t2=j.sent;f=j.t0.$3.call(j.t0,j.t1,j.t2);g=Array.from(f.keys());this.$1.set(a,new Set(g));return j.abrupt(\"return\",this.$2.bulkLoad(g,function(){return(h||(h=b(\"Promise\"))).resolve(f)}));case 13:return j.abrupt(\"return\",this.$2.bulkLoad(Array.from(e),function(a){a.length>0&&d(\"WALogger\").ERROR(i());return(h||(h=b(\"Promise\"))).resolve(new Map())}));case 14:case\"end\":return j.stop()}},null,this)};c.$3=function(a,b){b=new Map(b);var c=this.$2.pureSnapshot(),e=c.remove;c=c.update;for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h=h.id;b[\"delete\"](h)}for(h=c,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}c=e;e=c.id;c=c.cachedEntity;c!=null&&d(\"WAJids\").extractUserJid(e)===a&&b.set(e,c)}return b};c.store=function(a,b){this.$2.store(a,b);b=d(\"WAJids\").extractUserJid(a);b=this.$1.get(b);b!=null&&b.add(a)};c.remove=function(a){this.$2.remove(a);var b=d(\"WAJids\").extractUserJid(a);b=this.$1.get(b);b!=null&&b[\"delete\"](a)};c.clear=function(){this.$2.clear(),this.$1=new Map()};c.load=function(a,b){return this.$2.load(a,b)};c.bulkLoad=function(a,b){return this.$2.bulkLoad(a,b)};c.snapshot=function(){return this.$2.snapshot()};c.pureSnapshot=function(){return this.pureSnapshot()};c.markSnapshotAsCommitted=function(){this.$2.markSnapshotAsCommitted()};c.markSnapshotAsFailed=function(){this.$2.markSnapshotAsFailed()};return a}();g.SignalIdentityStore=a}),98);\n__d(\"WAInMemorySignalStore\",[\"Promise\",\"WACryptoManager\",\"WACryptoUtils\",\"WAGlobals\",\"WAICDCUtils\",\"WAIdentityUtils\",\"WAJids\",\"WAJobDefinitions\",\"WAJobOrchestratorTypes\",\"WAJobs\",\"WAPromiseQueue\",\"WAProtocolQueue\",\"WAProtocolQueueState\",\"WAResultOrError\",\"WASignalEntityStoreV2\",\"WASignalIdentityStore\",\"WATagsLogger\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Users with unknown devices: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Snapshot save: end\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Snapshot save: start\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Snapshot: \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Removing old identity: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Removing my device identity. This should not happen\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Device notification of one user cannot remove identity the other one \"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Removing session dur to identity mismatch: \",\"\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Device notification of one user cannot remove session the other one\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Receiving an identity for my device but it is different from original one\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Update user devices: userJid: \",\"; new identities: \",\"; previous identities: \",\"}\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);t=function(){return a};return a}var u=d(\"WATagsLogger\").TAGS([\"CryptoManager\",\"InMemorySignalStore\"]);a=function(){function a(a,c){var e=this;this.$10=new(d(\"WAPromiseQueue\").PromiseQueue)();this.loadSession=function(a,b){return e.$1.load(a,function(a){return e.$9.loadSession(a,b)})};this.loadSessions=function(a){return e.$1.bulkLoad(a,function(a){return e.$9.loadSessions(a).then(function(a){return new Map(Array.from(a.entries()).map(function(a){return[a[0],a[1]]}))})}).then(function(a){return new Map(Array.from(a.entries()).map(function(a){return[a[0],a[1]]}))})};this.loadSignedPreKey=function(a){return e.$7.load(a,function(){return e.$9.loadSignedPreKey(a)})};this.bulkLoadIdentities=function(a){return e.$9.bulkLoadIdentities(a).then(function(a){return e.$5.bulkLoadIdentities(a)})};this.loadIdentities=function(a){return e.$5.loadIdentitiesByUser(a,function(){return e.$9.loadIdentities(a)})};this.saveIdentity=function(a,c){return(h||(h=b(\"Promise\"))).resolve(e.storeIdentity(a,c))};this.loadOneTimePreKey=function(a){return e.$6.load(a,function(){return e.$9.loadOneTimePreKey(a)})};this.saveSenderKeySession=function(a,c,d){e.storeSenderKeySession(a,c,d);return(h||(h=b(\"Promise\"))).resolve()};this.saveSignedPreKeyIfNew=function(a,b){return e.$9.saveSignedPreKeyIfNew(a,b)};this.loadSenderKeySession=function(a,c){var f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b(\"regeneratorRuntime\").awrap(e.$8.load(d(\"WACryptoManager\").encodeSenderKey(a,c),function(){var d;return b(\"regeneratorRuntime\").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b(\"regeneratorRuntime\").awrap(e.$9.loadSenderKeySession(a,c));case 2:d=f.sent;return f.abrupt(\"return\",d.success?d.value:null);case 4:case\"end\":return f.stop()}},null,this)}));case 2:f=g.sent;if(!(f==null)){g.next=5;break}return g.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"errLoadSenderKeySession\"));case 5:return g.abrupt(\"return\",d(\"WAResultOrError\").makeResult(f));case 6:case\"end\":return g.stop()}},null,this)};this.handleNewSession=function(a,c,f,g,i){e.storeSession(a,c);f!=null&&e.storeIdentity(a,f);g!=null&&e.removeOneTimePreKey(g);return(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeResult())};this.saveICDC=function(a,c){e.$3.store(a,c);return(h||(h=b(\"Promise\"))).resolve()};this.loadICDC=function(a){return e.$3.load(a,function(){return e.$9.loadICDC(a)})};this.saveDhash=function(a,c){e.$2.store(a,c);return(h||(h=b(\"Promise\"))).resolve()};this.getLastPreKeyGenerationId=function(){return e.$9.getLastPreKeyGenerationId()};this.savePreKeysGeneration=function(a){return e.$9.savePreKeysGeneration(a)};this.getPreKeyGenerationsTimestamps=function(){return e.$9.getPreKeyGenerationsTimestamps()};this.deletePreKeyGenerations=function(a){return e.$9.deletePreKeyGenerations(a)};this.saveOneTimePreKey=function(a){return e.$9.saveOneTimePreKey(a)};this.loadPreKeys=function(a){return e.$9.loadPreKeys(a)};this.loadLatestSignedPreKey=function(){return e.$9.loadLatestSignedPreKey()};this.calculateICDC=function(a){if(a.length===0)return(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeError(\"missing_participants\"));var c=new Set();return(h||(h=b(\"Promise\"))).all(a.map(function(a){var f,g,h,i,j,k,l,m,n,o,p;return b(\"regeneratorRuntime\").async(function(q){while(1)switch(q.prev=q.next){case 0:q.next=2;return b(\"regeneratorRuntime\").awrap(e.loadIdentities(a));case 2:f=q.sent;q.next=5;return b(\"regeneratorRuntime\").awrap(e.loadICDC(a));case 5:g=q.sent;q.next=8;return b(\"regeneratorRuntime\").awrap(e.$9.loadLastSyncTs(a));case 8:h=q.sent;d(\"WAICDCUtils\").isLastSyncTsExpired(h)&&c.add(a);i=new Map(Array.from(f.entries()).map(function(a){var b=a[0];a=a[1];return[d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(a).toString(),b]}));if(!(g==null||d(\"WAICDCUtils\").isICDCIndexInvalid(g))){q.next=14;break}c.add(a);return q.abrupt(\"return\",null);case 14:j=[],(k=g.devices,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 16:if(!l){q.next=22;break}if(!(m>=k.length)){q.next=19;break}return q.abrupt(\"break\",34);case 19:n=k[m++];q.next=26;break;case 22:m=k.next();if(!m.done){q.next=25;break}return q.abrupt(\"break\",34);case 25:n=m.value;case 26:o=n;p=i.get(d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(o).toString());if(!(p==null)){q.next=31;break}c.add(a);return q.abrupt(\"continue\",32);case 31:j.push({id:d(\"WAJids\").extractDeviceId(p),identity:d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(o)});case 32:q.next=16;break;case 34:return q.abrupt(\"return\",{devices:j,sequence:g.sequence,signingDeviceIndex:g.signingDeviceIndex,timestamp:g.timestamp,user:a});case 35:case\"end\":return q.stop()}},null,this)})).then(function(a){var b=a.filter(Boolean);return b.length===0?d(\"WAResultOrError\").makeError(\"invalid_icdc_info\"):d(\"WAResultOrError\").makeResult({icdcInfo:a.filter(Boolean),usersWithMissingICDC:c})})[\"catch\"](function(a){u.ERROR(t(),a);return d(\"WAResultOrError\").makeError(\"invalid_icdc_info\")})};this.$9=a;this.$11=c;this.$5=new(d(\"WASignalIdentityStore\").SignalIdentityStore)();this.$1=new((a=d(\"WASignalEntityStoreV2\")).SignalEntityStore)();this.$2=new a.SignalEntityStore();this.$3=new a.SignalEntityStore();this.$4=new a.SignalEntityStore();this.$6=new a.SignalEntityStore();this.$7=new a.SignalEntityStore();this.$8=new a.SignalEntityStore()}var c=a.prototype;c.storeSession=function(a,b){this.$1.store(a,b)};c.storeIdentity=function(a,b){if(!b)return;this.$5.store(a,b)};c.removeOneTimePreKey=function(a){this.$6.remove(a)};c.storeSenderKeySession=function(a,b,c){this.$8.store(d(\"WACryptoManager\").encodeSenderKey(a,b),c)};c.updateUserDevicesInfo=function(a){var c=this;return(h||(h=b(\"Promise\"))).all(a.map(function(a){var e,f,g,i,j,k,l,t,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;return b(\"regeneratorRuntime\").async(function(O){while(1)switch(O.prev=O.next){case 0:O.next=2;return b(\"regeneratorRuntime\").awrap(c.loadIdentities(a.jid));case 2:e=O.sent,(f=a.devices,g=a.jid,i=a.notificationTs,j=a.dhash,k=a.icdcInfo),u.DEV(s(),g,f.map(function(b){b=b.id;return d(\"WAJids\").toDeviceJid(a.jid,b)}).join(\",\"),Array.from(e.keys()).join(\",\")),l=new Set(e.keys()),t=[],v=[],(w=f,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 9:if(!x){O.next=15;break}if(!(y>=w.length)){O.next=12;break}return O.abrupt(\"break\",41);case 12:z=w[y++];O.next=19;break;case 15:y=w.next();if(!y.done){O.next=18;break}return O.abrupt(\"break\",41);case 18:z=y.value;case 19:A=z;B=A.id;C=A.identity;D=A.model;E=A.platform;F=d(\"WAJids\").toDeviceJid(a.jid,B);G=e.get(F);d(\"WAGlobals\").getMyDeviceJid()===F&&(H=d(\"WACryptoUtils\").uint8ArraysEqual(d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(c.$11.staticKeyPair.publicKey),d(\"WAIdentityUtils\").removeKeyTypeIfNeeded(C)),H||u.ERROR(r()));l[\"delete\"](F);if(!(G==null)){O.next=32;break}v.push({instruction:\"identityAdded\",consumerRetries:0,jid:d(\"WAJids\").extractUserJid(F),type:\"instruction\",device:F,identity:C,model:D,platform:E,notificationTs:i,priority:d(\"WAGlobals\").getConfig().isIdleOQM1()?d(\"WAProtocolQueue\").WAProtocolQueuePriorityLow:d(\"WAProtocolQueue\").WAProtocolQueuePriorityHigh});O.next=39;break;case 32:if(d(\"WACryptoUtils\").uint8ArraysEqual(G,C)){O.next=39;break}if(!(d(\"WAJids\").extractUserJid(F)!==g)){O.next=36;break}u.ERROR(q());return O.abrupt(\"continue\",39);case 36:t.push(F),u.DEV(p(),F),v.push({instruction:\"identityChanged\",consumerRetries:0,jid:d(\"WAJids\").extractUserJid(F),type:\"instruction\",device:F,identity:C,model:D,platform:E,notificationTs:i,priority:d(\"WAGlobals\").getConfig().isIdleOQM1()?d(\"WAProtocolQueue\").WAProtocolQueuePriorityLow:d(\"WAProtocolQueue\").WAProtocolQueuePriorityHigh});case 39:O.next=9;break;case 41:I=[],(J=l,K=Array.isArray(J),L=0,J=K?J:J[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 43:if(!K){O.next=49;break}if(!(L>=J.length)){O.next=46;break}return O.abrupt(\"break\",63);case 46:M=J[L++];O.next=53;break;case 49:L=J.next();if(!L.done){O.next=52;break}return O.abrupt(\"break\",63);case 52:M=L.value;case 53:N=M;if(!(d(\"WAJids\").extractUserJid(N)!==g)){O.next=57;break}u.ERROR(o());return O.abrupt(\"continue\",61);case 57:I.push(N),d(\"WAGlobals\").getMyDeviceJid()===N&&u.ERROR(n()),u.DEV(m(),N),v.push({instruction:\"identityRemoved\",consumerRetries:0,jid:d(\"WAJids\").extractUserJid(N),type:\"instruction\",device:N,notificationTs:i,priority:d(\"WAGlobals\").getConfig().isIdleOQM1()?d(\"WAProtocolQueue\").WAProtocolQueuePriorityLow:d(\"WAProtocolQueue\").WAProtocolQueuePriorityHigh});case 61:O.next=43;break;case 63:return O.abrupt(\"return\",(h||(h=b(\"Promise\"))).all([j!=null?c.saveDhash(g,j):(h||(h=b(\"Promise\"))).resolve(),k!=null?c.saveICDC(g,k):(h||(h=b(\"Promise\"))).resolve()].concat(Array.from(I).map(function(a){return c.deleteIdentity(a)}),[I.concat(t).map(function(a){return c.$12(a)})],f.map(function(b){var a=b.id;b=b.identity;return c.saveIdentity(d(\"WAJids\").toDeviceJid(g,a),b)}))).then(function(){return d(\"WAResultOrError\").makeResult(v)}));case 64:case\"end\":return O.stop()}},null,this)})).then(function(a){a=a.flatMap(function(a){return a.success?a.value:[]});if(a.length>0)return d(\"WAProtocolQueueState\").persistStanzas(a)}).then(function(){})};c.savePendingToDatabase=function(){var a=this,c=this.$13();if(c==null)return(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeResult([]));u.DEV(l(),c);u.LOG(k());return this.$9.bulkSaveSignalData(c).then(function(b){u.LOG(j());a.$14();return b},function(c){a.$15();return(h||(h=b(\"Promise\"))).reject(c)})};c.clear=function(){this.$1.clear(),this.$5.clear(),this.$6.clear(),this.$7.clear(),this.$8.clear(),this.$2.clear(),this.$3.clear()};c.$16=function(a){if(a.length===0)return;u.DEV(i(),a);d(\"WAJobs\").getJobManager().fireAndForget(d(\"WAJobDefinitions\").createStartJobInfo(\"getDevices\",{ignoreDhash:!0,reason:\"UnknownDevice\",scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.LOW},users:new Set(a)}))};c.deleteIdentity=function(a){this.$5.remove(a);return(h||(h=b(\"Promise\"))).resolve()};c.$12=function(a){this.$1.remove(a);return(h||(h=b(\"Promise\"))).resolve()};c.$14=function(){this.$1.markSnapshotAsCommitted(),this.$2.markSnapshotAsCommitted(),this.$3.markSnapshotAsCommitted(),this.$5.markSnapshotAsCommitted(),this.$6.markSnapshotAsCommitted(),this.$7.markSnapshotAsCommitted(),this.$8.markSnapshotAsCommitted()};c.$15=function(){this.$1.markSnapshotAsFailed(),this.$2.markSnapshotAsFailed(),this.$3.markSnapshotAsFailed(),this.$5.markSnapshotAsFailed(),this.$6.markSnapshotAsFailed(),this.$7.markSnapshotAsFailed(),this.$8.markSnapshotAsFailed()};c.$13=function(){var a=this.$1.snapshot(),b=[],c=a.remove.map(function(a){return a.id});a.update.forEach(function(a){var c=a.id;a=a.cachedEntity;if(a==null)return;b.push({id:c,updated:a})});var e=[];this.$8.snapshot().update.forEach(function(a){var b=d(\"WACryptoManager\").decodeSenderKey(a.id),c=b.groupId;b=b.deviceId;a.cachedEntity!=null&&c&&b&&e.push({groupId:c,author:b,updated:a.cachedEntity})});a=this.$5.snapshot();var f=a.remove.map(function(a){return a.id}),g=[];a.update.forEach(function(a){var b=a.id;a=a.cachedEntity;if(a==null)return;g.push({id:b,identity:a})});a=this.$6.snapshot().remove;var h=this.$2.snapshot(),i=[];for(var h=h.update,j=Array.isArray(h),k=0,h=j?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var l;if(j){if(k>=h.length)break;l=h[k++]}else{k=h.next();if(k.done)break;l=k.value}l=l;var m=l.cachedEntity;l=l.id;m!=null&&i.push({id:l,dhash:m})}l=this.$3.snapshot();m=[];for(k=l.update,j=Array.isArray(k),h=0,k=j?k:k[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(j){if(h>=k.length)break;l=k[h++]}else{h=k.next();if(h.done)break;l=h.value}l=l;var n=l.cachedEntity;l=l.id;n!=null&&m.push({id:l,icdc:n})}return b.length===0&&c.length===0&&g.length===0&&e.length===0&&a.length===0&&m.length===0&&i.length===0&&f.length===0?null:{dhashUpdate:i,icdcUpdate:m,identityRemove:f,identityUpdate:g,preKeyRemove:a,senderKeySessionUpdate:e,sessionRemove:c,sessionUpdate:b}};c.warmCache=function(a){var c,e;return b(\"regeneratorRuntime\").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b(\"regeneratorRuntime\").awrap(this.bulkLoadIdentities(a.map(d(\"WAJids\").interpretAsUserJid).filter(Boolean)));case 2:c=f.sent;e=Array.from(c.values()).reduce(function(a,b){return a.concat(Array.from(b.keys()))},[]);f.next=6;return b(\"regeneratorRuntime\").awrap(this.loadSessions(e));case 6:case\"end\":return f.stop()}},null,this)};return a}();g.InMemorySignalStoreImpl=a}),98);\n__d(\"WARequestKeysBatcher\",[\"WAResolvable\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={delayMs:50,maxSize:100};function a(a,b){b=b===void 0?h:b;var c=b.delayMs,e=b.maxSize,f=null;function g(b){f&&f.args===b&&(f=null);return a(b)}return function(a){if(f!=null)f.args.push(a);else{var b=[a],h=new(d(\"WAResolvable\").Resolvable)();a=h.promise.then(g);var i=function(){return void h.resolve(b)},j=setTimeout(i,c);f={args:b,batchPromise:a,run:i,timer:j}}a=f;i=a.args;j=a.batchPromise;var k=i.length-1;if(i.length>=e){clearTimeout((a=f)==null?void 0:a.timer);f.run();f=null}return j.then(function(a){return a[k]})}}g.makeSimpleBatcher=a}),98);\n__d(\"WARequestKeys\",[\"WABulkRequestKeys\",\"WAPromiseManagement\",\"WARequestKeysBatcher\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"WARequestKeysBatcher\").makeSimpleBatcher(function(a){var c;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WABulkRequestKeys\").bulkRequestKeys(a));case 2:c=e.sent;if(!(c.success===!1)){e.next=5;break}return e.abrupt(\"return\",a.map(function(){return c}));case 5:return e.abrupt(\"return\",a.map(function(a){a=c.value.get(a);return a?d(\"WAResultOrError\").makeResult(a):d(\"WAResultOrError\").makeError(\"errRequestKeysNoKeys\")}));case 6:case\"end\":return e.stop()}},null,this)});c=d(\"WAPromiseManagement\").cacheWhilePending(function(a){return a},a);g.requestKeys=c}),98);\n__d(\"WACryptoManagerUtils\",[\"MAWLoggerUtils\",\"Promise\",\"WABulkRequestKeys\",\"WACryptoManager\",\"WAErr\",\"WAGlobals\",\"WAHandleFailureUtils\",\"WAInMemorySignalStore\",\"WALogger\",\"WAPREList\",\"WAPREMetrics\",\"WARequestKeys\",\"WAResultOrError\",\"WASignalKeys\",\"WASignalSignatures\",\"WATagsLogger\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendMessage] Fail encrypt messages\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Cannot generate one time prekey\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Cannot deserialize signed prekey\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"No signed prekey: \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"DecryptMsg error: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"DecryptMsg error: \",\"\"]);n=function(){return a};return a}var o=d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.SignedPrekey]);function a(a){var b=new(d(\"WAInMemorySignalStore\").InMemorySignalStoreImpl)(a.db,a.regInfo),c=p();return{manager:d(\"WACryptoManager\").initCryptoManager({regInfo:a.regInfo,storage:b,network:c}),storage:b}}function p(){return{requestKeys:d(\"WARequestKeys\").requestKeys,bulkRequestKeys:d(\"WABulkRequestKeys\").bulkRequestKeys}}function q(a,b){if(b.success)a==null?void 0:a.endSuccess();else{var c,e=b.error;d(\"WALogger\").WARN(n(),e);switch(e){case\"errDuplicateMsg\":a==null?void 0:a.addPoint(e);a==null?void 0:a.endSuccess();return;case\"errCryptoDeserialization\":case\"errSignalNoSession\":case\"errSignalInvalidMsg\":case\"errInvalidMac\":case\"errSignalInvalidSignedPreKey\":case\"errSignalSignedPreKeyIdMismatch\":case\"errSignalSignedPreKeyDeserialization\":case\"errSignalInvalidOneTimeKey\":case\"errSignalOneTimeKeyMismatch\":case\"errSignalOneTimeKeyDeserialization\":case\"errSignalInvalidKey\":case\"errSignalDecryptionFailed\":case\"errSignalDeserializeInvalidProtoFormat\":case\"errSignalDeserializeRatchetKeyBadFormat\":case\"errSignalDeserializePkInvalidProtoFormat\":case\"errSignalDeserializePkKeyBadFormat\":case\"errSignalTooManyMessagesInFuture\":case\"errSignalEmptyVersionContentSuffix\":case\"errSignalContentExceededExpectedLength\":case\"errSignalGrpInvalidProtoFormat\":case\"errSignalGrpInvalidKeyFormat\":case\"errSignalGrpVersionContentEmpty\":case\"errSignalGrpInvalidVersionContentLength\":case\"errSignalGrpSenderKeyInvalidProtoFormat\":case\"errSignalGrpSenderKeyProtoError\":case\"errSignalGrpTooManyMessagesInFuture\":c=e;break;default:typeof e===\"string\"?c=e:(d(\"WALogger\").ERROR(m(),b),c=\"fail\");break}a==null?void 0:a.endFail(c)}}function e(a,c,e,f,g){var i=null;return d(\"WACryptoManager\").decryptContent(f.cryptoManager,c,{ciphertext:e,type:a},function(a,c){i={plaintext:a,remoteIdentity:c};return(h||(h=b(\"Promise\"))).resolve()}).then(function(a){q(g,a);if(a.success)return d(\"WAResultOrError\").makeResult(i);else return a})}function f(a,c,e,f,g){var i=null;return d(\"WACryptoManager\").decryptGroupContent(f.cryptoManager,a,c,e,function(a){i={plaintext:a};return(h||(h=b(\"Promise\"))).resolve()}).then(function(a){q(g,a);if(a.success)return d(\"WAResultOrError\").makeResult(i);else return a})}function r(a,b){return d(\"WACryptoManager\").getParticipantInfo(b,a)}function s(a){return a.storage.getPreKeyGenerationsTimestamps()}function t(a,b){return b.storage.deletePreKeyGenerations(a)}function u(a,b,c,e){return d(\"WACryptoManager\").saveSenderKeySession(e.cryptoManager,a,b,c)}function v(a){var e,f,g,i,m,n,p,q,r;return b(\"regeneratorRuntime\").async(function(s){while(1)switch(s.prev=s.next){case 0:s.next=2;return b(\"regeneratorRuntime\").awrap(a.storage.loadLatestSignedPreKey());case 2:e=s.sent;if(!(e.success===!1)){s.next=9;break}o.ERROR(l(),(f=(g=e.payload)==null?void 0:g.toString())!=null?f:\"\");if(!(e.error===\"missing-last-signed-prekey-id\")){s.next=8;break}s.next=8;return b(\"regeneratorRuntime\").awrap(d(\"WAHandleFailureUtils\").reregisterPhone());case 8:throw(i=e.payload)!=null?i:c(\"WAErr\")(\"No signed prekey\");case 9:m=d(\"WASignalSignatures\").deserializeSignedPreKey(e.value);if(!(m==null)){s.next=13;break}o.ERROR(k());throw c(\"WAErr\")(\"Cannot deserialize signed prekey\");case 13:s.next=15;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoManager\").generateOneTimePreKey(a));case 15:n=s.sent;if(!(n==null)){s.next=19;break}d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.OneTimePrekey]).ERROR(j());throw c(\"WAErr\")(\"Cannot generate one time prekey\");case 19:p=a.regInfo,q=p.regId,r=p.staticKeyPair;return s.abrupt(\"return\",(h||(h=b(\"Promise\"))).resolve({regId:q,keyType:d(\"WASignalKeys\").KEY_TYPE,publicKey:r.publicKey,signedPreKey:m,preKey:n}));case 21:case\"end\":return s.stop()}},null,this)}function w(a,b,c){var e=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.MESSAGE_ENCRYPTION,{string:{chat:\"group\",jid:a},bool:{useLongSessionDrop:d(\"WAGlobals\").getConfig().useLongSessionDrop()}},void 0);return d(\"WACryptoManager\").encryptGroupContent(c.cryptoManager,a,d(\"WAGlobals\").getMyDeviceJid(),b).then(function(a){if(a.success)e.endSuccess();else{var b=a.error;switch(b){case\"identity-mismatch\":break;default:break}e.endFail(b)}return a})}function x(a,b,c){var e=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.MESSAGE_ENCRYPTION,{string:{chat:\"1:1\",jid:c},bool:{useLongSessionDrop:d(\"WAGlobals\").getConfig().useLongSessionDrop()}},void 0);return d(\"WACryptoManager\").bulkEncryptContent(b.cryptoManager,a).then(function(a){if(a.success)e.endSuccess();else{var b=a.error;switch(b){case\"missing\":case\"mismatch\":case\"runtime-exception\":break;default:break}e.endFail(b)}return a})}function y(a,b,c,e,f,g){var h=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.MESSAGE_ENCRYPTION,{string:{chat:\"1:1\",jid:g},bool:{useLongSessionDrop:d(\"WAGlobals\").getConfig().useLongSessionDrop()}},void 0);return d(\"WACryptoManager\").encryptContent(c.cryptoManager,a,b,e||d(\"WACryptoManager\").DEFAULT_SESSION_REQUEST,f).then(function(a){if(a.success)h.endSuccess();else{var b=a.error;switch(b){case\"identity-mismatch\":case\"errSignalInvalidKey\":break;default:break}h.endFail(b)}return a})}function z(a,b){return d(\"WACryptoManager\").bulkEncryptContent(b.cryptoManager,a).then(function(a){if(a.success===!1){d(\"WALogger\").ERROR(i());return new Map()}return a.value})}function A(a,c){var e;return b(\"regeneratorRuntime\").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoManager\").ensureSessionsExists(c.cryptoManager,a));case 2:e=f.sent;f.next=5;return b(\"regeneratorRuntime\").awrap((h||(h=b(\"Promise\"))).all(Array.from(e.entries()).map(function(a){var b=a[0];a=a[1];return c.cryptoManager.storage.handleNewSession(b,a,a.remote.pubKey)})));case 5:case\"end\":return f.stop()}},null,this)}g.createCryptoManager=a;g.decryptMsg=e;g.decryptGroupMsg=f;g.getParticipantInfo=r;g.getPreKeyGenerationsTimestamps=s;g.deletePreKeyGenerations=t;g.saveSenderKeySession=u;g.getSignalInfoForRetry=v;g.encryptGroupContentWithMetrics=w;g.bulkEncryptMsgWithMetrics=x;g.encryptMsgWithMetrics=y;g.bulkEncrypt=z;g.bulkPreEstablishOutgoingSession=A}),98);\n__d(\"WAScheduleAfterOfflineResume\",[\"Promise\",\"WAGlobals\",\"WALogger\",\"WAOfflineUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"AfterOfflineResume, flush: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"AfterOfflineResume: \",\"\"]);j=function(){return a};return a}function a(){return(h||(h=b(\"Promise\"))).resolve()}var k=new Map();function l(a){setTimeout(function(){return a()[\"catch\"](function(a){return d(\"WALogger\").ERROR(j(),a)})},0)}function c(a){var b=a.code,c=a.id,e=a.combine;a=a.useFirstCallback;var f=d(\"WAGlobals\").getWaOneQueue();if(!f){l(b);return}if(f.getMode()===d(\"WAOfflineUtils\").ServerRPCMode.ONLINE&&!k.has(c)){l(b);return}f=b;if(e===!0&&k.has(c)){b=k.get(c)||[];b.push(f);k.set(c,b);return}if(a!==!0){k.set(c,[f]);return}if(k.has(c))return;else k.set(c,[f])}function e(){var a=k.entries();k=new Map();for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(b){if(c>=a.length)break;e=a[c++]}else{c=a.next();if(c.done)break;e=c.value}e=e;e[0];e=e[1];for(var f=0;f<e.length;f++){var g=e[f];g()[\"catch\"](function(a){return d(\"WALogger\").ERROR(i(),a)})}}}g.noopAction=a;g.scheduleAfterOfflineResume=c;g.flushPostponedActions=e}),98);\n__d(\"WAProtocolQueueLogger\",[\"WAServerRPCLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"WAServerRPCLogger\").logger.TAGS([\"ProtocolQueue\"]);g.logger=a}),98);\n__d(\"MAWProtocolQueueUtils\",[\"MAWGetStorageQplAnnotations\",\"MAWIncomingMsg\",\"WAHashStringToNumber\",\"WAPREList\",\"WAPREMetrics\",\"WAProtocolQueue\",\"WAProtocolQueueLogger\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Cannot remove acked stanzas \",\"\"]);h=function(){return a};return a}var i=50;function a(a){return function(b){b.success&&c(\"promiseDone\")(a(b.value.toAck));return b}}function j(a){var b=a.stanza,e=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.RECEIVE_MESSAGE,d(\"MAWIncomingMsg\").prepareAnnotationsForIncomingMessage({consumerRetries:b.consumerRetries,msg:b.message.details,queueType:b.message.details.offline!=null?\"offline\":\"online\",retryCount:b.message.details.retryCount}),d(\"WAHashStringToNumber\").hashStringToNumber(b.stanzaId.toString()));c(\"promiseDone\")(d(\"MAWGetStorageQplAnnotations\").getStorageQplAnnotations().then(function(a){e.addAnnotations(a)}));e.addPoint(\"consumer_handle_message_stanza_start\");return babelHelpers[\"extends\"]({},a,{receiveFlow:e})}function k(a){return j({decodedMsg:void 0,stanza:a})}function b(a){var b=!1;return d(\"WAProtocolQueue\").protocolQueue().failAck(a,function(a){var c=a.consumerRetries+1;if(c>=i){if(a.type===\"message\"){var e=k(d(\"WAProtocolQueue\").mapProcolQueueMessageV2toV1(a));e.receiveFlow.endFail(\"consumer_retries_exceed_limit\",{\"int\":{consumerRetries:a.consumerRetries}})}b=!0;return}return babelHelpers[\"extends\"]({},a,{consumerRetries:c})}).then(function(){return b})[\"catch\"](function(a){d(\"WAProtocolQueueLogger\").logger.ERROR(h(),a);return!1})}g.makeAckResult=a;g.addMetricToMessage=j;g.addMetricToProtocolMessage=k;g.failAck=b}),98);\n__d(\"WAFrankingNode\",[\"Promise\",\"WAFranking\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Can't handle franking version \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Franking key is missing\"]);j=function(){return a};return a}function a(a,c,e){if(c==null){d(\"WALogger\").ERROR(j());return(h||(h=b(\"Promise\"))).resolve(null)}if(e!=null&&e!==0){d(\"WALogger\").ERROR(i(),e);return(h||(h=b(\"Promise\"))).resolve(null)}return d(\"WAFranking\").genFrankingTag(c,a)}g.genFrankingTagFromMessageApplicationEncode=a}),98);\n__d(\"WAGenReportingMeta\",[\"WAByteArray\",\"WAFranking\",\"WAFrankingNode\",\"WAGlobals\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,c,e){var f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:if(!d(\"WAGlobals\").getConfig().isFrankingEnabled()){g.next=7;break}g.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAFrankingNode\").genFrankingTagFromMessageApplicationEncode(a,c,e));case 3:f=g.sent;return g.abrupt(\"return\",{frankingKey:c,frankingTag:f,frankingVersion:d(\"WAFranking\").getFrankingVersion(e),reportingContent:d(\"WAByteArray\").uint8ArrayToBuffer(a),reportingTag:null});case 7:return g.abrupt(\"return\",{frankingKey:c,frankingTag:null,frankingVersion:d(\"WAFranking\").getFrankingVersion(e),reportingContent:null,reportingTag:null});case 8:case\"end\":return g.stop()}},null,this)}g.genReportingMeta=a}),98);\n__d(\"WACryptoPkcs7\",[\"WACryptoDependencies\",\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=new Uint8Array(1);do d(\"WACryptoDependencies\").getCrypto().getRandomValues(b);while(b[0]===0);h(a,b[0])}function b(a){var b=new Uint8Array(1);d(\"WACryptoDependencies\").getCrypto().getRandomValues(b);h(a,(b[0]&15)+1)}function h(a,b){for(var c=0;c<b;c++)a.writeUint8(b)}function e(a){if(a.length===0)throw c(\"WAErr\")(\"unpadPkcs7 given empty bytes\");var b=a[a.length-1];if(b>a.length)throw c(\"WAErr\")(\"unpadPkcs7 given \"+a.length+\" bytes, but pad is \"+b);return new Uint8Array(a.buffer,a.byteOffset,a.length-b)}g.writeRandomPad=a;g.writeRandomPadMax16=b;g.writePad=h;g.unpadPkcs7=e}),98);\n__d(\"WAAsMessageTransport\",[\"WABinary\",\"WACryptoPkcs7\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c,e,f){f===void 0&&(f=2);var g;b!=null&&(g={destinationJid:b});var h;a!=null&&(h={applicationPayload:{payload:a,version:f}});b=new(d(\"WABinary\").Binary)();d(\"WACryptoPkcs7\").writeRandomPadMax16(b);return{payload:h,protocol:{integral:{padding:b.readBuffer(),dsm:g},ancillary:{skdm:c==null?void 0:c,icdc:e==null?void 0:e}}}}g.asMessageTransport=a}),98);\n__d(\"WAMapUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){return new Map(Array.from(a.entries()).map(function(a){return[a[0],b(a[1],a[0])]}))}f.mapValues=a}),66);\n__d(\"WAMsgTransport.pb\",[\"WACommon.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){var h;a={NOOP:0,UPSERT:1,DELETE:2,UPSERT_AND_DELETE:3};b={};c={};e={};f={};var i={},j={},k={},l={},m={},n={},o={};b.internalSpec={payload:[1,(h=d(\"WAProtoConst\")).TYPES.MESSAGE,c],protocol:[2,h.TYPES.MESSAGE,e]};c.internalSpec={applicationPayload:[1,h.TYPES.MESSAGE,d(\"WACommon.pb\").SubProtocolSpec],futureProof:[3,h.TYPES.ENUM,d(\"WACommon.pb\").FUTURE_PROOF_BEHAVIOR]};e.internalSpec={integral:[1,h.TYPES.MESSAGE,m],ancillary:[2,h.TYPES.MESSAGE,f]};f.internalSpec={skdm:[2,h.TYPES.MESSAGE,l],deviceListMetadata:[3,h.TYPES.MESSAGE,o],icdc:[4,h.TYPES.MESSAGE,j],backupDirective:[5,h.TYPES.MESSAGE,i]};i.internalSpec={messageId:[1,h.TYPES.STRING],actionType:[2,h.TYPES.ENUM,a],supplementalKey:[3,h.TYPES.STRING]};j.internalSpec={senderIdentity:[1,h.TYPES.MESSAGE,k],recipientIdentities:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,k],recipientUserJids:[3,h.FLAGS.REPEATED|h.TYPES.STRING]};k.internalSpec={seq:[1,h.TYPES.INT32],signingDevice:[2,h.TYPES.BYTES],unknownDevices:[3,h.FLAGS.REPEATED|h.TYPES.BYTES],unknownDeviceIds:[4,h.FLAGS.REPEATED|h.TYPES.INT32]};l.internalSpec={groupId:[1,h.TYPES.STRING],axolotlSenderKeyDistributionMessage:[2,h.TYPES.BYTES]};m.internalSpec={padding:[1,h.TYPES.BYTES],dsm:[2,h.TYPES.MESSAGE,n]};n.internalSpec={destinationJid:[1,h.TYPES.STRING],phash:[2,h.TYPES.STRING]};o.internalSpec={senderKeyHash:[1,h.TYPES.BYTES],senderTimestamp:[2,h.TYPES.UINT64],recipientKeyHash:[8,h.TYPES.BYTES],recipientTimestamp:[9,h.TYPES.UINT64]};g.MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE=a;g.MessageTransportSpec=b;g.MessageTransport$PayloadSpec=c;g.MessageTransport$ProtocolSpec=e;g.MessageTransport$Protocol$AncillarySpec=f;g.MessageTransport$Protocol$Ancillary$BackupDirectiveSpec=i;g.MessageTransport$Protocol$Ancillary$ICDCParticipantDevicesSpec=j;g.MessageTransport$Protocol$Ancillary$ICDCParticipantDevices$ICDCIdentityListDescriptionSpec=k;g.MessageTransport$Protocol$Ancillary$SenderKeyDistributionMessageSpec=l;g.MessageTransport$Protocol$IntegralSpec=m;g.MessageTransport$Protocol$Integral$DeviceSentMessageSpec=n;g.DeviceListMetadataSpec=o}),98);\n__d(\"WAProtocolMediaType\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){switch(a){case\"image\":case\"sticker\":case\"gif\":case\"video\":case\"ptt\":case\"audio\":case\"document\":case\"product\":return a;case\"xma-image\":return\"document\";default:return null}}f.castToProtocolMediaType=a}),66);\n__d(\"WAEncNode\",[\"WAAsMessageTransport\",\"WACryptoManagerUtils\",\"WAErr\",\"WAGlobals\",\"WALogger\",\"WAMapUtils\",\"WAMsgTransport.pb\",\"WANullthrows\",\"WAProtocolMediaType\",\"encodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg failed to encrypt message: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg failed to encrypt message: \",\"\"]);i=function(){return a};return a}function a(a,b,e,f){var g=d(\"WAMapUtils\").mapValues(a,function(a,b){var c=a.params;a=a.icdc;var d;switch(c.type){case\"message\":d=j({messageBytes:c.messageBytes,to:b,icdc:a,chat:c.chat,applicationPayloadVersion:c.applicationPayloadVersion});break;case\"appdata\":d=k({messageBytes:c.messageBytes});break;default:c.type,d=l({skdm:c.skdm,icdc:a})}return{plaintext:d}});return d(\"WACryptoManagerUtils\").bulkEncryptMsgWithMetrics(g,b,e).then(function(b){if(!b.success){d(\"WALogger\").ERROR(i(),b.error);return null}return d(\"WAMapUtils\").mapValues(b.value,function(b,e){var g,h=b.type,i=b.ciphertext;b=b.baseKey;g=c(\"WANullthrows\")((g=a.get(e))==null?void 0:g.params);var j=g.type===\"message\"&&g.messageType.type===\"media\"?d(\"WAProtocolMediaType\").castToProtocolMediaType(g.messageType.mediaType):null;return{encType:\"device\",to:e,v:((e=g.messageBytes)==null?void 0:e.version)===\"v2\"?\"2\":\"3\",type:h,mediaType:j,count:f,ciphertext:i,baseKey:b}})})}function b(a,b,c,e,f,g,i){var m;switch(b.type){case\"message\":m=j({messageBytes:b.messageBytes,to:a,icdc:i,chat:b.chat,applicationPayloadVersion:b.applicationPayloadVersion});break;case\"appdata\":m=k({messageBytes:b.messageBytes});break;default:b.type,m=l({skdm:b.skdm,icdc:i})}i=d(\"WACryptoManagerUtils\").encryptMsgWithMetrics(a,m,c,f,g,b==null?void 0:b.chat);return i.then(function(c){var f;if(!c.success){d(\"WALogger\").ERROR(h(),c.error);return null}var g=b.type===\"message\"&&b.messageType.type===\"media\"?d(\"WAProtocolMediaType\").castToProtocolMediaType(b.messageType.mediaType):null,i=c.value,j=i.type;i=i.ciphertext;return{encType:\"device\",to:a,v:((f=b.messageBytes)==null?void 0:f.version)===\"v2\"?\"2\":\"3\",type:j,mediaType:g,count:e,ciphertext:i,baseKey:c.value.baseKey}})}function j(a){var b=a.messageBytes,c=a.to,e=a.icdc,f=a.chat;a=a.applicationPayloadVersion;if(b.version===\"v3\"){var g=null;d(\"WAGlobals\").isPeerDevice(c)&&(g=f);f=d(\"WAAsMessageTransport\").asMessageTransport(b.bytes,g,null,e,a);return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMsgTransport.pb\").MessageTransportSpec,f).readByteArray()}else if(d(\"WAGlobals\").isPeerDevice(c))return b.bytesForPeer;else return b.bytes}function k(a){a=a.messageBytes;if(a.version===\"v3\"){a=d(\"WAAsMessageTransport\").asMessageTransport(a.bytes);return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMsgTransport.pb\").MessageTransportSpec,a).readByteArray()}else throw c(\"WAErr\")(\"Plaintext v2 not supported yet\")}function l(a){var b=a.skdm;a=a.icdc;b=d(\"WAAsMessageTransport\").asMessageTransport(null,null,b,a);return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMsgTransport.pb\").MessageTransportSpec,b).readByteArray()}g.getEncNodes=a;g.getEncNode=b}),98);\n__d(\"WAPhash\",[\"Promise\",\"WABase64\",\"WABinary\",\"WACryptoDependencies\",\"WALogger\",\"WASortedLists\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Calculate pHash -- end\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Calculate pHash -- Start\"]);j=function(){return a};return a}function a(a){d(\"WALogger\").LOG(j());a=d(\"WASortedLists\").sortAndDedupe(a);var c=new(d(\"WABinary\").Binary)();for(var e=0;e<a.length;e++)c.writeString(a[e]);return(h||(h=b(\"Promise\"))).resolve(d(\"WACryptoDependencies\").getCrypto().subtle.digest(\"SHA-256\",c.readByteArray()).then(function(a){d(\"WALogger\").LOG(i());a=new Uint8Array(a,0,6);return\"2:\"+d(\"WABase64\").encodeB64(a)}))}g.calculatePHash=a}),98);\n__d(\"WAEncUserMsg\",[\"Promise\",\"WAEncNode\",\"WAGlobals\",\"WAICDCUtils\",\"WAJids\",\"WAPhash\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WAEncUserMsg -- getParticipantNodes -- receiverEncypted -- FALSE\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WAEncUserMsg -- encrypt - getParticipantNodes -- EMPTY DEVICE JIDS\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WAEncUserMsg -- encrypt -- getParticipantNodes -- START\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WAEncUserMsg -- getParticipantNodes -- EMPTY NODE\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg -- encryptUserMsg -- user message -- DONE\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg -- encryptUserMsg -- user message -- OTHER_RECIPENT_DEVICE_EMPTY\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg -- encryptUserMsg -- user message -- ICDC\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WAEncUserMsg -- no other recipient\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WAEncUserMsg -- no recipient\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg -- encryptUserMsg -- user message -- START\"]);r=function(){return a};return a}var s=d(\"WATagsLogger\").TAGS([\"WAEncUserMsg\"]);function a(a,c,e,f){s.LOG(r());a.length===0&&s.ERROR(q());var g=!1;a.length===1&&(g=a[0].user===d(\"WAGlobals\").getMyUserJid());var i=a.find(function(a){return a.user===d(\"WAGlobals\").getMyUserJid()});i==null&&(i={user:d(\"WAGlobals\").getMyUserJid(),devicesInfo:[]});var j=a.filter(function(a){return a.user!==d(\"WAGlobals\").getMyUserJid()});j.length===0&&c.type!==\"appdata\"&&!g&&s.ERROR(p());g=d(\"WAICDCUtils\").computeICDCParticipantDevices(i,j,e);s.LOG(o());i=a.flatMap(function(a){return a.devicesInfo}).map(function(a){return a.jid});v(a)&&s.LOG(n());return(h||(h=b(\"Promise\"))).all([t(i,c,f,g),d(\"WAPhash\").calculatePHash(i.concat(d(\"WAGlobals\").getMyDeviceJid()))]).then(function(a){var b=a[0];a=a[1];s.LOG(m());return{participants:b,phash:a}})}function c(a,b,c){return t(a,b,c)}function t(a,b,c,d){return u(a,b,c,d).then(function(a){if(a.length===0){s.WARN(l());return}return a})}function e(a,b,c,e,f,g){return d(\"WAEncNode\").getEncNode(a,b,c,e,f,g)}function u(a,b,c,e){var f=!1;s.LOG(k());(b.type!==\"message\"||d(\"WAJids\").interpretAsGroupJid(b.chat)!=null)&&(f=!0);a=d(\"WAEncNode\").getEncNodes(new Map(a.map(function(a){return[a,{params:b,icdc:e}]})),c).then(function(a){if(a==null){s.WARN(j());return[]}b.type===\"message\"&&(f=f||Array.from(a.keys()).some(function(a){return d(\"WAJids\").extractUserJid(a)===b.chat}));return Array.from(a==null?void 0:a.values())});return a.then(function(a){if(f)return a;else{s.ERROR(i());return[]}}).then(function(a){return a.filter(Boolean)})}function v(a){return a.filter(function(a){return a.user!==d(\"WAGlobals\").getMyUserJid()}).flatMap(function(a){return a.devicesInfo}).length===0}g.encryptUserMsg=a;g.encryptGroupFanoutMsg=c;g.encryptDeviceJidMessage=e}),98);\n__d(\"WASmaxMixinGroupExhaustiveError\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name=\"SmaxMixinGroupExhaustiveError\",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));f.SmaxMixinGroupExhaustiveError=a}),66);\n__d(\"WAGetUserDevices\",[\"regeneratorRuntime\"],(function(a,b,c,d,e,f){\"use strict\";function a(a,c){var d;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b(\"regeneratorRuntime\").awrap(c.storage.bulkLoadIdentities(a));case 2:d=e.sent;return e.abrupt(\"return\",Array.from(d).flatMap(function(a){a=a[1];return Array.from(a.keys())}));case 4:case\"end\":return e.stop()}},null,this)}f.getUserDevices=a}),66);\n__d(\"WAEncGroupMsg\",[\"WAAsMessageTransport\",\"WACryptoManager\",\"WACryptoManagerUtils\",\"WAEncUserMsg\",\"WAGetUserDevices\",\"WAGlobals\",\"WAHex\",\"WALogger\",\"WAMsgTransport.pb\",\"WAPhash\",\"WAPromiseQueue\",\"WAProtocolMediaType\",\"WASortedLists\",\"WATimeUtils\",\"encodeProtobuf\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptGroupMsg - end key distribution\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptGroupMsg - start key distribution\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptGroupMsg - Encrypt success\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptGroupMsg - Finish encrypt group content\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptGroupMsg - Finish group fanout msg \"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptGroupMsg - Finish rotate participant info \"]);m=function(){return a};return a}var n=30*d(\"WATimeUtils\").DAY_SECONDS,o=new(d(\"WAPromiseQueue\").PromiseQueue)();function p(a,c,e,f){return o.enqueue(function(){var g,h,i,j,k,l,m,o,p,q;return b(\"regeneratorRuntime\").async(function(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().getSenderKeyStatus(a));case 2:g=r.sent;h=g.ts,i=g.rotateSenderKey,j=g.hasSenderKey;k=g.senderKeyId;l=k==null||i||!d(\"WATimeUtils\").happenedWithin(h,n);r.next=8;return b(\"regeneratorRuntime\").awrap(d(\"WAGetUserDevices\").getUserDevices(c,e.cryptoManager));case 8:m=r.sent;o=new Set(m);if(!(l||k==null)){r.next=20;break}r.next=13;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoManager\").rotateGroupSenderKey(e.cryptoManager,a,d(\"WAGlobals\").getMyDeviceJid()));case 13:p=r.sent;k=p.senderKeyId;r.next=17;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().markSenderKeyAsRotated(a,k,d(\"WATimeUtils\").unixTime()));case 17:f==null?void 0:f.addPoint(\"finish_sk_rotation\");r.next=23;break;case 20:q=new Set(m),(j||[]).forEach(function(a){return q[\"delete\"](a)}),f==null?void 0:f.addPoint(\"no_sk_rotation\",{\"int\":{noRotationNeedsSK:q.size}});case 23:return r.abrupt(\"return\",{senderKeyId:k,needsSenderKey:o,groupParticipants:new Set(m)});case 24:case\"end\":return r.stop()}},null,this)})}function a(a,c,e,f,g,n){var o,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;return b(\"regeneratorRuntime\").async(function(K){while(1)switch(K.prev=K.next){case 0:n==null?void 0:n.addPoint(\"enc_group_start\");K.next=3;return b(\"regeneratorRuntime\").awrap(p(a,c.map(function(a){return a.user}),g,n));case 3:o=K.sent;r=o.senderKeyId;s=o.needsSenderKey;t=o.groupParticipants;d(\"WALogger\").LOG(m());n==null?void 0:n.addPoint(\"rotated_participant_info\");u=null;x=c.flatMap(function(a){return a.devicesInfo}).map(function(a){return a.jid});y=!d(\"WASortedLists\").areEqual(d(\"WASortedLists\").asSortedSet(t),d(\"WASortedLists\").sortAndDedupe(x));z=f.type===\"text\"&&f.isRevoked;A=f.type===\"media\"?d(\"WAProtocolMediaType\").castToProtocolMediaType(f.mediaType):null;if(!(y||z)){K.next=23;break}K.next=17;return b(\"regeneratorRuntime\").awrap(d(\"WAEncUserMsg\").encryptGroupFanoutMsg(x,{type:\"message\",messageBytes:e,messageType:f,chat:a},g));case 17:B=K.sent;B&&!(f.type===\"text\"&&f.isInvisible===!0)&&(v=B,w={encType:\"group\",to:a,v:e.version===\"v3\"?\"3\":\"2\",type:\"skmsg\",mediaType:A,ciphertext:null});d(\"WALogger\").LOG(l());n==null?void 0:n.addPoint(\"finish_group_fanout_msg\");K.next=45;break;case 23:e.version===\"v3\"?(D=d(\"WAAsMessageTransport\").asMessageTransport(e.bytes),C=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMsgTransport.pb\").MessageTransportSpec,D).readByteArray()):C=e.bytes;K.next=26;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoManagerUtils\").encryptGroupContentWithMetrics(a,C,g));case 26:E=K.sent;d(\"WALogger\").LOG(k());n==null?void 0:n.addPoint(\"finish_encrypt_group_content\");if(!E.success){K.next=45;break}d(\"WALogger\").LOG(j());F=E.value;r!==F.senderKeyId&&t.forEach(function(a){return s.add(a)});if(!(s.size>0)){K.next=43;break}G={groupId:a,axolotlSenderKeyDistributionMessage:d(\"WAHex\").bytesToBuffer(F.senderKeyDistributionProto)};d(\"WALogger\").LOG(i());H=x.filter(function(a){return s.has(a)});K.next=39;return b(\"regeneratorRuntime\").awrap(q(H,G,g));case 39:I=K.sent,d(\"WALogger\").LOG(h()),n==null?void 0:n.addPoint(\"finish_skdm_enc_node\"),I.length>0&&(v=I,u={group:a,senderKeyId:F.senderKeyId,knowsSenderKey:new Set(H)});case 43:w={encType:\"group\",to:a,v:e.version===\"v2\"?\"2\":\"3\",type:F.ciphertext.type,mediaType:A,ciphertext:F.ciphertext.ciphertext},f.type===\"text\"&&f.isInvisible===!0&&(w={encType:\"group\",to:a,v:e.version===\"v2\"?\"2\":\"3\",type:\"skmsg\",mediaType:null,ciphertext:null});case 45:K.next=47;return b(\"regeneratorRuntime\").awrap(d(\"WAPhash\").calculatePHash(x.concat(d(\"WAGlobals\").getMyDeviceJid())));case 47:J=K.sent;n==null?void 0:n.addPoint(\"phash_finish\");return K.abrupt(\"return\",{phash:J,participants:v,encNode:w,senderKeyDistributionInfo:u});case 50:case\"end\":return K.stop()}},null,this)}function q(a,b,c){b=d(\"WAAsMessageTransport\").asMessageTransport(null,null,b,null);var e=d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMsgTransport.pb\").MessageTransportSpec,b).readByteArray();return d(\"WACryptoManagerUtils\").bulkEncrypt(new Map(a.map(function(a){return[a,{plaintext:e}]})),c).then(function(a){var b=[];a.forEach(function(a,c){b.push({encType:\"device\",to:c,v:\"3\",type:a.type,ciphertext:a.ciphertext,mediaType:null,count:null,baseKey:null})});return b})}g.encryptGroupMsg=a}),98);\n__d(\"WAGetDeviceIdentityMixin\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a!=null?{deviceIdentityElementValue:a}:null}f.getDeviceIdentityMixin=a}),66);\n__d(\"WAParseFranking\",[\"WAFranking\",\"WAFrankingTypes\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b;if(a==null)return null;b=(b=a.maybeChild(\"franking_tag\"))==null?void 0:b.contentBytes();return{frankingKey:null,frankingTag:b!=null?d(\"WAFrankingTypes\").castToFrankingTag(b):null,reportingTag:(b=a.maybeChild(\"reporting_tag\"))==null?void 0:b.contentBytes(),frankingVersion:d(\"WAFranking\").getFrankingVersion(),reportingContent:null}}g.parseFrankingNode=a}),98);\n__d(\"WASmaxInMessagePublishAckAdminEditMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"edit\",\"3\");return!b.success?b:d(\"WAResultOrError\").makeResult({edit:b.value})}g.parseAckAdminEditMixin=a}),98);\n__d(\"WASmaxInMessagePublishAckAdminRevokeMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"edit\",\"8\");return!b.success?b:d(\"WAResultOrError\").makeResult({edit:b.value})}g.parseAckAdminRevokeMixin=a}),98);\n__d(\"WASmaxInMessagePublishAckMessageEditMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"edit\",\"1\");return!b.success?b:d(\"WAResultOrError\").makeResult({edit:b.value})}g.parseAckMessageEditMixin=a}),98);\n__d(\"WASmaxInMessagePublishAckMessagePinMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"edit\",\"2\");return!b.success?b:d(\"WAResultOrError\").makeResult({edit:b.value})}g.parseAckMessagePinMixin=a}),98);\n__d(\"WASmaxInMessagePublishEnums\",[],(function(a,b,c,d,e,f){a={CBP:\"CBP\",NBP:\"NBP\"};b={delivery:\"delivery\",no_optimization:\"no_optimization\"};c={\"false\":\"false\",\"true\":\"true\"};d={lid:\"lid\",pn:\"pn\"};f.ENUM_CBP_NBP=a;f.ENUM_DELIVERY_NOOPTIMIZATION=b;f.ENUM_FALSE_TRUE=c;f.ENUM_LID_PN=d}),66);\n__d(\"WASmaxInMessagePublishAckPaidConversationMixin\",[\"WAResultOrError\",\"WASmaxInMessagePublishEnums\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function h(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"delivery_context\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrStringEnum(a,\"optimization_goal\",d(\"WASmaxInMessagePublishEnums\").ENUM_DELIVERY_NOOPTIMIZATION);return!b.success?b:d(\"WAResultOrError\").makeResult({optimizationGoal:b.value})}function i(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"source_url\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").contentString(a);return!b.success?b:d(\"WAResultOrError\").makeResult({elementValue:b.value})}function j(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"referral\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").optionalChildWithTag(a,\"source_url\",i);if(!b.success)return b;a=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrString,a,\"source_type\");return!a.success?a:d(\"WAResultOrError\").makeResult({sourceType:a.value,sourceUrl:b.value})}function k(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"origin\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").optionalChildWithTag(a,\"referral\",j);if(!b.success)return b;a=d(\"WASmaxParseUtils\").attrString(a,\"type\");return!a.success?a:d(\"WAResultOrError\").makeResult({type:a.value,referral:b.value})}function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"biz\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").optionalChildWithTag(b.value,\"delivery_context\",h);if(!a.success)return a;var c=d(\"WASmaxParseUtils\").optionalChildWithTag(b.value,\"origin\",k);if(!c.success)return c;var e=d(\"WASmaxParseUtils\").attrString(b.value,\"paid_convo_id\");if(!e.success)return e;var f=d(\"WASmaxParseUtils\").attrStringEnum(b.value,\"pricing_model\",d(\"WASmaxInMessagePublishEnums\").ENUM_CBP_NBP);if(!f.success)return f;var g=d(\"WASmaxParseUtils\").attrStringEnum(b.value,\"billable\",d(\"WASmaxInMessagePublishEnums\").ENUM_FALSE_TRUE);if(!g.success)return g;var i=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrIntRange,b.value,\"expiration_timestamp\",0,void 0);if(!i.success)return i;b=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrString,b.value,\"pricing_category\");return!b.success?b:d(\"WAResultOrError\").makeResult({bizPaidConvoId:e.value,bizPricingModel:f.value,bizBillable:g.value,bizExpirationTimestamp:i.value,bizPricingCategory:b.value,bizDeliveryContext:a.value,bizOrigin:c.value})}g.parseAckPaidConversationBizDeliveryContext=h;g.parseAckPaidConversationBizOriginReferralSourceUrl=i;g.parseAckPaidConversationBizOriginReferral=j;g.parseAckPaidConversationBizOrigin=k;g.parseAckPaidConversationMixin=a}),98);\n__d(\"WASmaxInMessagePublishAckRevokeMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"edit\",\"7\");return!b.success?b:d(\"WAResultOrError\").makeResult({edit:b.value})}g.parseAckRevokeMixin=a}),98);\n__d(\"WASmaxInMessagePublishServerFrankingTagMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"franking\");if(!a.success)return a;a=d(\"WASmaxParseUtils\").flattenedChildWithTag(a.value,\"reporting_tag\");if(!a.success)return a;a=d(\"WASmaxParseUtils\").contentBytesRange(a.value,16,128);return!a.success?a:d(\"WAResultOrError\").makeResult({frankingReportingTagElementValue:a.value})}g.parseServerFrankingTagMixin=a}),98);\n__d(\"WASmaxInMessagePublishAckMixin\",[\"WAResultOrError\",\"WASmaxInMessagePublishAckAdminEditMixin\",\"WASmaxInMessagePublishAckAdminRevokeMixin\",\"WASmaxInMessagePublishAckMessageEditMixin\",\"WASmaxInMessagePublishAckMessagePinMixin\",\"WASmaxInMessagePublishAckPaidConversationMixin\",\"WASmaxInMessagePublishAckRevokeMixin\",\"WASmaxInMessagePublishServerFrankingTagMixin\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!c.success)return c;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",c.value);if(!c.success)return c;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"class\",\"message\");if(!c.success)return c;b=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",b.value);if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrIntRange(a,\"t\",0,void 0);if(!b.success)return b;var e=d(\"WASmaxInMessagePublishAckMessageEditMixin\").parseAckMessageEditMixin(a),f=d(\"WASmaxInMessagePublishAckAdminEditMixin\").parseAckAdminEditMixin(a),g=d(\"WASmaxInMessagePublishAckMessagePinMixin\").parseAckMessagePinMixin(a),h=d(\"WASmaxInMessagePublishAckAdminRevokeMixin\").parseAckAdminRevokeMixin(a),i=d(\"WASmaxInMessagePublishAckRevokeMixin\").parseAckRevokeMixin(a),j=d(\"WASmaxInMessagePublishAckPaidConversationMixin\").parseAckPaidConversationMixin(a);a=d(\"WASmaxInMessagePublishServerFrankingTagMixin\").parseServerFrankingTagMixin(a);return d(\"WAResultOrError\").makeResult({\"class\":c.value,t:b.value,ackMessageEditMixin:e.success?e.value:null,ackAdminEditMixin:f.success?f.value:null,ackMessagePinMixin:g.success?g.value:null,ackAdminRevokeMixin:h.success?h.value:null,ackRevokeMixin:i.success?i.value:null,ackPaidConversationMixin:j.success?j.value:null,serverFrankingTagMixin:a.success?a.value:null})}g.parseAckMixin=a}),98);\n__d(\"WASmaxInMessagePublishApplicationNegativeAckMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrIntRange(a,\"application_error\",0,void 0);return!b.success?b:d(\"WAResultOrError\").makeResult({applicationError:b.value})}g.parseApplicationNegativeAckMixin=a}),98);\n__d(\"WASmaxInMessagePublishMessageNackRetryAttributesMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrIntRange(a,\"backoff\",0,86400);return!b.success?b:d(\"WAResultOrError\").makeResult({backoff:b.value})}g.parseMessageNackRetryAttributesMixin=a}),98);\n__d(\"WASmaxInMessagePublishNegativeAckMixin\",[\"WAResultOrError\",\"WASmaxInMessagePublishAckMixin\",\"WASmaxInMessagePublishApplicationNegativeAckMixin\",\"WASmaxInMessagePublishMessageNackRetryAttributesMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").attrString(a,\"error\");if(!c.success)return c;b=d(\"WASmaxInMessagePublishAckMixin\").parseAckMixin(a,b);if(!b.success)return b;var e=d(\"WASmaxInMessagePublishApplicationNegativeAckMixin\").parseApplicationNegativeAckMixin(a);a=d(\"WASmaxInMessagePublishMessageNackRetryAttributesMixin\").parseMessageNackRetryAttributesMixin(a);return d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({error:c.value},b.value,{applicationNegativeAckMixin:e.success?e.value:null,messageNackRetryAttributesMixin:a.success?a.value:null}))}g.parseNegativeAckMixin=a}),98);\n__d(\"WASmaxInMessagePublishIndividualResponseNegative\",[\"WAResultOrError\",\"WASmaxInMessagePublishNegativeAckMixin\",\"WASmaxParseJid\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseJid\").attrUserJid,a,\"recipient\");if(!c.success)return c;a=d(\"WASmaxInMessagePublishNegativeAckMixin\").parseNegativeAckMixin(a,b);return!a.success?a:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({recipient:c.value},a.value))}g.parseIndividualResponseNegative=a}),98);\n__d(\"WASmaxInMessagePublishAckRcatMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"rcat\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").contentBytes(b.value);return!a.success?a:d(\"WAResultOrError\").makeResult({rcatElementValue:a.value})}g.parseAckRcatMixin=a}),98);\n__d(\"WASmaxInMessagePublishDeviceListStaleMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrString(a,\"phash\");return!b.success?b:d(\"WAResultOrError\").makeResult({phash:b.value})}g.parseDeviceListStaleMixin=a}),98);\n__d(\"WASmaxInMessagePublishIndividualResponseSuccess\",[\"WAResultOrError\",\"WASmaxInMessagePublishAckMixin\",\"WASmaxInMessagePublishAckRcatMixin\",\"WASmaxInMessagePublishDeviceListStaleMixin\",\"WASmaxParseJid\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"ack\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseJid\").attrUserJid,a,\"recipient\");if(!c.success)return c;var e=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseJid\").attrUserJid,a,\"participant\");if(!e.success)return e;b=d(\"WASmaxInMessagePublishAckMixin\").parseAckMixin(a,b);if(!b.success)return b;var f=d(\"WASmaxInMessagePublishDeviceListStaleMixin\").parseDeviceListStaleMixin(a);a=d(\"WASmaxInMessagePublishAckRcatMixin\").parseAckRcatMixin(a);return d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({recipient:c.value,participant:e.value},b.value,{deviceListStaleMixin:f.success?f.value:null,ackRcatMixin:a.success?a.value:null}))}g.parseIndividualResponseSuccess=a}),98);\n__d(\"WASmaxOutMessagePublishAutomatedMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"automated\",null));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeAutomatedMixin=a}),98);\n__d(\"WASmaxOutMessagePublishAuthMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.authVerificationTimestamp;a=a.authEnableRiskCheck;b=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",null,d(\"WASmaxJsx\").smax(\"auth\",{verification_timestamp:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,b),enable_risk_check:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,a)})));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeAuthMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBizAcceptTsMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.bizAcceptTs;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",{accept_ts:d(\"WAWap\").INT(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBizAcceptTsMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBizAutoResponseMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.bizAutoResponse;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",{auto_response:d(\"WAWap\").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBizAutoResponseMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBizCampaignMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.bizCampaignId;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",{campaign_id:d(\"WAWap\").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBizCampaignMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBizMetadataMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c,e=a.metadataAppOwner,f=a.metadataCsidBm,g=a.metadataPaymentBm;a=a.metadataCustomerCategory;e=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",null,d(\"WASmaxJsx\").smax(\"metadata\",{app_owner:(b=d(\"WASmaxAttrs\")).OPTIONAL((c=d(\"WAWap\")).CUSTOM_STRING,e),csid_bm:b.OPTIONAL(c.CUSTOM_STRING,f),payment_bm:b.OPTIONAL(c.CUSTOM_STRING,g),customer_category:b.OPTIONAL(c.CUSTOM_STRING,a)})));return e}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBizMetadataMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBizRolesMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.bizHostStorage,c=a.bizActualActors;a=a.bizPrivacyModeTs;b=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",{host_storage:d(\"WAWap\").INT(b),actual_actors:d(\"WAWap\").INT(c),privacy_mode_ts:d(\"WAWap\").INT(a)}));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBizRolesMixin=a}),98);\n__d(\"WASmaxOutMessagePublishButtonsMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",null,d(\"WASmaxJsx\").smax(\"buttons\",null)));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeButtonsMixin=a}),98);\n__d(\"WASmaxOutMessagePublishExtensionsMetadataMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.capabilityArgs;a=d(\"WASmaxJsx\").smax(\"capabilities\",null,d(\"WASmaxChildren\").REPEATED_CHILD(i,a,1,50));return a}function i(a){a=a.capabilityName;a=d(\"WASmaxJsx\").smax(\"capability\",{name:d(\"WAWap\").CUSTOM_STRING(a)});return a}function j(a){var b=a.capabilitiesArgs,c=a.extensionsMetadataWellVersion,e=a.extensionsMetadataDataApiVersion;a=a.extensionsMetadataFlowMessageVersion;c=d(\"WASmaxJsx\").smax(\"native_flow\",null,d(\"WASmaxJsx\").smax(\"extensions_metadata\",{well_version:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,c),data_api_version:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,e),flow_message_version:d(\"WAWap\").INT(a)},d(\"WASmaxChildren\").OPTIONAL_CHILD(h,b)));return c}function a(a,b){b=j(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeExtensionsMetadataExtensionsMetadataCapabilities=h;g.makeExtensionsMetadataExtensionsMetadataCapabilitiesCapability=i;g.mergeExtensionsMetadataMixin=a}),98);\n__d(\"WASmaxOutMessagePublishNativeFlowMessageTypeMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishExtensionsMetadataMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.nativeFlowName,c=a.nativeFlowV;a=a.extensionsMetadataMixinArgs;b=d(\"WASmaxJsx\").smax(\"interactive\",{type:\"native_flow\"},d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishExtensionsMetadataMixin\").mergeExtensionsMetadataMixin,d(\"WASmaxJsx\").smax(\"native_flow\",{name:d(\"WAWap\").CUSTOM_STRING(b),v:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,c)}),a));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeNativeFlowMessageTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishInteractiveMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishNativeFlowMessageTypeMixin\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.hasInteractiveV1;a=a.nativeFlowMessageTypeMixinArgs;b=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",null,d(\"WASmaxOutMessagePublishNativeFlowMessageTypeMixin\").mergeNativeFlowMessageTypeMixin(d(\"WASmaxJsx\").smax(\"interactive\",{v:d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"1\",b)}),a)));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeInteractiveMixin=a}),98);\n__d(\"WASmaxOutMessagePublishNativeFlowMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.bizNativeFlowName;a=a.bizNativeFlowVersion;b=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",{native_flow_name:d(\"WAWap\").CUSTOM_STRING(b),native_flow_version:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,a)}));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeNativeFlowMixin=a}),98);\n__d(\"WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishButtonsMixin\",\"WASmaxOutMessagePublishInteractiveMixin\",\"WASmaxOutMessagePublishNativeFlowMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isButtons)return d(\"WASmaxOutMessagePublishButtonsMixin\").mergeButtonsMixin(a);if(b.nativeFlow)return d(\"WASmaxOutMessagePublishNativeFlowMixin\").mergeNativeFlowMixin(a,b.nativeFlow);if(b.interactive)return d(\"WASmaxOutMessagePublishInteractiveMixin\").mergeInteractiveMixin(a,b.interactive);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeButtonsOrNativeFlowOrInteractiveMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishConversionRecipientStatusMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.conversionRecipientStatus;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"conversion\",{recipient_status:d(\"WAWap\").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeConversionRecipientStatusMixin=a}),98);\n__d(\"WASmaxOutMessagePublishClickToWhatsAppTypeMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.sourceUrlElementValue;a=d(\"WASmaxJsx\").smax(\"source_url\",null,a);return a}function i(a){var b,c,e=a.sourceUrlArgs,f=a.ctwaConversionSource,g=a.ctwaConversionData,i=a.ctwaSourceType,j=a.ctwaEntryPointConversionSource;a=a.ctwaEntryPointConversionApp;f=d(\"WASmaxJsx\").smax(\"ctwa\",{conversion_source:(b=d(\"WASmaxAttrs\")).OPTIONAL((c=d(\"WAWap\")).CUSTOM_STRING,f),conversion_data:b.OPTIONAL(c.CUSTOM_STRING,g),source_type:b.OPTIONAL(c.CUSTOM_STRING,i),entry_point_conversion_source:b.OPTIONAL(c.CUSTOM_STRING,j),entry_point_conversion_app:b.OPTIONAL(c.CUSTOM_STRING,a)},d(\"WASmaxChildren\").OPTIONAL_CHILD(h,e));return f}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeClickToWhatsAppTypeSourceUrl=h;g.mergeClickToWhatsAppTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishCtwaConversionMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishClickToWhatsAppTypeMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxOutMessagePublishClickToWhatsAppTypeMixin\").mergeClickToWhatsAppTypeMixin(d(\"WASmaxJsx\").smax(\"ctwa\",null),a);return a}function i(a){a=a.ctwaArgs;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxChildren\").OPTIONAL_CHILD(h,a));return a}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeCtwaConversionCtwa=h;g.mergeCtwaConversionMixin=a}),98);\n__d(\"WASmaxOutMessagePublishDeliveryContextMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c,e=a.deliveryContextHsmMaxBid,f=a.deliveryContextOptimizationGoal,g=a.deliveryContextTemplateId,h=a.deliveryContextCampaignId,i=a.deliveryContextSourceType,j=a.deliveryContextTierType,k=a.deliveryContextDeliveryType,l=a.deliveryContextClientToken;a=a.deliveryContextPrice;e=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",null,d(\"WASmaxJsx\").smax(\"delivery_context\",{hsm_max_bid:(b=d(\"WASmaxAttrs\")).OPTIONAL((c=d(\"WAWap\")).INT,e),optimization_goal:b.OPTIONAL(c.CUSTOM_STRING,f),template_id:b.OPTIONAL(c.CUSTOM_STRING,g),campaign_id:b.OPTIONAL(c.CUSTOM_STRING,h),source_type:b.OPTIONAL(c.CUSTOM_STRING,i),tier_type:b.OPTIONAL(c.CUSTOM_STRING,j),delivery_type:b.OPTIONAL(c.CUSTOM_STRING,k),client_token:b.OPTIONAL(c.CUSTOM_STRING,l),price:b.OPTIONAL(c.INT,a)})));return e}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeDeliveryContextMixin=a}),98);\n__d(\"WASmaxOutMessagePublishCapabilitiesMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.hasFeatureV1;a=d(\"WASmaxJsx\").smax(\"feature\",{name:\"full_catalog\",v:d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"1\",a)});return a}function i(a){a=a.featureArgs;a=d(\"WASmaxJsx\").smax(\"hsm\",null,d(\"WASmaxJsx\").smax(\"capabilities\",null,d(\"WASmaxChildren\").OPTIONAL_CHILD(h,a)));return a}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeCapabilitiesCapabilitiesFeature=h;g.mergeCapabilitiesMixin=a}),98);\n__d(\"WASmaxOutMessagePublishHSMReviewMetadataMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c,e=a.anyCategory,f=a.anyTag,g=a.anyId;a=a.anySubTag;e=d(\"WASmaxJsx\").smax(\"smax$any\",{category:(b=d(\"WASmaxAttrs\")).OPTIONAL((c=d(\"WAWap\")).CUSTOM_STRING,e),tag:b.OPTIONAL(c.CUSTOM_STRING,f),id:b.OPTIONAL(c.CUSTOM_STRING,g),sub_tag:b.OPTIONAL(c.CUSTOM_STRING,a)});return e}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeHSMReviewMetadataMixin=a}),98);\n__d(\"WASmaxOutMessagePublishHsmMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishCapabilitiesMixin\",\"WASmaxOutMessagePublishHSMReviewMetadataMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageTtl,c=a.hasHsmV1,e=a.hasHsmButtons1,f=a.hSMReviewMetadataMixinArgs;a=a.capabilitiesMixinArgs;b=d(\"WASmaxJsx\").smax(\"message\",{ttl:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,b)},d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishCapabilitiesMixin\").mergeCapabilitiesMixin,d(\"WASmaxOutMessagePublishHSMReviewMetadataMixin\").mergeHSMReviewMetadataMixin(d(\"WASmaxJsx\").smax(\"hsm\",{v:d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"1\",c),buttons:d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"1\",e)}),f),a));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeHsmMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBizMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishAuthMixin\",\"WASmaxOutMessagePublishBizAcceptTsMixin\",\"WASmaxOutMessagePublishBizAutoResponseMixin\",\"WASmaxOutMessagePublishBizCampaignMixin\",\"WASmaxOutMessagePublishBizMetadataMixin\",\"WASmaxOutMessagePublishBizRolesMixin\",\"WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup\",\"WASmaxOutMessagePublishConversionRecipientStatusMixin\",\"WASmaxOutMessagePublishCtwaConversionMixin\",\"WASmaxOutMessagePublishDeliveryContextMixin\",\"WASmaxOutMessagePublishHsmMixin\"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.hsmMixinArgs,e=a.bizRolesMixinArgs,f=a.bizAutoResponseMixinArgs,g=a.bizAcceptTsMixinArgs,h=a.bizCampaignMixinArgs,i=a.deliveryContextMixinArgs,j=a.authMixinArgs,k=a.conversionRecipientStatusMixinArgs,l=a.ctwaConversionMixinArgs,m=a.bizMetadataMixinArgs;a=a.buttonsOrNativeFlowOrInteractiveMixinGroupArgs;b=(b=d(\"WASmaxMixins\")).optionalMerge(d(\"WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup\").mergeButtonsOrNativeFlowOrInteractiveMixinGroup,b.optionalMerge(d(\"WASmaxOutMessagePublishBizMetadataMixin\").mergeBizMetadataMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishCtwaConversionMixin\").mergeCtwaConversionMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishConversionRecipientStatusMixin\").mergeConversionRecipientStatusMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishAuthMixin\").mergeAuthMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishDeliveryContextMixin\").mergeDeliveryContextMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBizCampaignMixin\").mergeBizCampaignMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBizAcceptTsMixin\").mergeBizAcceptTsMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBizAutoResponseMixin\").mergeBizAutoResponseMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBizRolesMixin\").mergeBizRolesMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishHsmMixin\").mergeHsmMixin,d(\"WASmaxJsx\").smax(\"message\",null),c),e),f),g),h),i),j),k),l),m),a);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBizMixin=a}),98);\n__d(\"WASmaxOutMessagePublishClientFrankingTagMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.frankingTagElementValue;a=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxJsx\").smax(\"franking\",null,d(\"WASmaxJsx\").smax(\"franking_tag\",null,a)));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeClientFrankingTagMixin=a}),98);\n__d(\"WASmaxOutMessagePublishClientReportingTokenMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.reportingTokenElementValue;a=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxJsx\").smax(\"reporting\",null,d(\"WASmaxJsx\").smax(\"reporting_token\",null,a)));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeClientReportingTokenMixin=a}),98);\n__d(\"WASmaxOutMessagePublishDeviceIdentityMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.deviceIdentityElementValue;a=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxJsx\").smax(\"device-identity\",null,a));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeDeviceIdentityMixin=a}),98);\n__d(\"WASmaxOutMessagePublishInternalTestMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.testConfig;a=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxJsx\").smax(\"test\",{config:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeInternalTestMixin=a}),98);\n__d(\"WASmaxOutMessagePublishLIDSessionDeprecationMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaDeprecatedLidSession;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"meta\",{deprecated_lid_session:d(\"WAWap\").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeLIDSessionDeprecationMixin=a}),98);\n__d(\"WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxJsx\").smax(\"meta\",{\"decrypt-fail\":\"hide\"}));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeMetaHideDecryptionPlaceholderMixin=a}),98);\n__d(\"WASmaxOutMessagePublishMulticastMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"multicast\",null));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeMulticastMixin=a}),98);\n__d(\"WASmaxOutMessagePublishNoExtraFanoutMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{device_fanout:\"false\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeNoExtraFanoutMixin=a}),98);\n__d(\"WASmaxOutMessagePublishPreFilledNumberMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"url_number\",null));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergePreFilledNumberMixin=a}),98);\n__d(\"WASmaxOutMessagePublishPreFilledTextMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"url_text\",null));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergePreFilledTextMixin=a}),98);\n__d(\"WASmaxOutMessagePublishSenderIntentMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"meta\",{sender_intent:\"hosted\"}));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeSenderIntentMixin=a}),98);\n__d(\"WASmaxOutMessagePublishRequestIDMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.requestIdElementValue;a=d(\"WASmaxJsx\").smax(\"trace\",null,d(\"WASmaxJsx\").smax(\"request_id\",null,a));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeRequestIDMixin=a}),98);\n__d(\"WASmaxOutMessagePublishTraceIDMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.edgeIdElementValue;a=d(\"WASmaxJsx\").smax(\"edge_id\",null,a);return a}function i(a){var b=a.edgeIdArgs;a=a.traceIdElementValue;a=d(\"WASmaxJsx\").smax(\"trace\",null,d(\"WASmaxJsx\").smax(\"trace_id\",null,a),d(\"WASmaxChildren\").OPTIONAL_CHILD(h,b));return a}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeTraceIDEdgeId=h;g.mergeTraceIDMixin=a}),98);\n__d(\"WASmaxOutMessagePublishRequestOrTraceIDMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishRequestIDMixin\",\"WASmaxOutMessagePublishTraceIDMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.requestID)return d(\"WASmaxOutMessagePublishRequestIDMixin\").mergeRequestIDMixin(a,b.requestID);if(b.traceID)return d(\"WASmaxOutMessagePublishTraceIDMixin\").mergeTraceIDMixin(a,b.traceID);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeRequestOrTraceIDMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishTraceContextMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishRequestOrTraceIDMixinGroup\"],(function(a,b,c,d,e,f,g){function h(a){a=a.requestOrTraceIDMixinGroupArgs;a=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxOutMessagePublishRequestOrTraceIDMixinGroup\").mergeRequestOrTraceIDMixinGroup(d(\"WASmaxJsx\").smax(\"trace\",null),a));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeTraceContextMixin=a}),98);\n__d(\"WASmaxOutMessagePublishVerifiedNameNameMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageVerifiedName;a=d(\"WASmaxJsx\").smax(\"message\",{verified_name:d(\"WAWap\").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeVerifiedNameNameMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBaseMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishAutomatedMixin\",\"WASmaxOutMessagePublishBizMixin\",\"WASmaxOutMessagePublishClientFrankingTagMixin\",\"WASmaxOutMessagePublishClientReportingTokenMixin\",\"WASmaxOutMessagePublishDeviceIdentityMixin\",\"WASmaxOutMessagePublishInternalTestMixin\",\"WASmaxOutMessagePublishLIDSessionDeprecationMixin\",\"WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin\",\"WASmaxOutMessagePublishMulticastMixin\",\"WASmaxOutMessagePublishNoExtraFanoutMixin\",\"WASmaxOutMessagePublishPreFilledNumberMixin\",\"WASmaxOutMessagePublishPreFilledTextMixin\",\"WASmaxOutMessagePublishSenderIntentMixin\",\"WASmaxOutMessagePublishTraceContextMixin\",\"WASmaxOutMessagePublishVerifiedNameNameMixin\"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.deviceIdentityMixinArgs,e=a.hasNoExtraFanout,f=a.hasMulticast,g=a.hasPreFilledText,h=a.hasPreFilledNumber,i=a.hasAutomated,j=a.bizMixinArgs,k=a.verifiedNameNameMixinArgs,l=a.clientFrankingTagMixinArgs,m=a.clientReportingTokenMixinArgs,n=a.internalTestMixinArgs,o=a.hasMetaHideDecryptionPlaceholder,p=a.traceContextMixinArgs,q=a.hasSenderIntent;a=a.lIDSessionDeprecationMixinArgs;b=(b=d(\"WASmaxMixins\")).optionalMerge(d(\"WASmaxOutMessagePublishLIDSessionDeprecationMixin\").mergeLIDSessionDeprecationMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishSenderIntentMixin\").mergeSenderIntentMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishTraceContextMixin\").mergeTraceContextMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin\").mergeMetaHideDecryptionPlaceholderMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishInternalTestMixin\").mergeInternalTestMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishClientReportingTokenMixin\").mergeClientReportingTokenMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishClientFrankingTagMixin\").mergeClientFrankingTagMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishVerifiedNameNameMixin\").mergeVerifiedNameNameMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBizMixin\").mergeBizMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishAutomatedMixin\").mergeAutomatedMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishPreFilledNumberMixin\").mergePreFilledNumberMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishPreFilledTextMixin\").mergePreFilledTextMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishMulticastMixin\").mergeMulticastMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishNoExtraFanoutMixin\").mergeNoExtraFanoutMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishDeviceIdentityMixin\").mergeDeviceIdentityMixin,d(\"WASmaxJsx\").smax(\"message\",null),c),e),f),g),h),i),j),k),l),m),n),o),p),q),a);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBaseMixin=a}),98);\n__d(\"WASmaxOutMessagePublishGroupInviteTargetMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaGroupInvite;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"meta\",{group_invite:d(\"WAWap\").GROUP_JID(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeGroupInviteTargetMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBotFeedbackMessageTypeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"bot\",{type:\"feedback\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBotFeedbackMessageTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncRetryMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.encCount;a=d(\"WASmaxJsx\").smax(\"enc\",{count:d(\"WAWap\").INT(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncRetryMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncPayloadMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.encElementValue;a=d(\"WASmaxJsx\").smax(\"enc\",null,a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncPayloadMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncTypeIndividualMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishEncPayloadMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encType;b=d(\"WASmaxOutMessagePublishEncPayloadMixin\").mergeEncPayloadMixin(d(\"WASmaxJsx\").smax(\"enc\",{type:d(\"WAWap\").CUSTOM_STRING(b)}),a);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncTypeIndividualMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncVersion2Mixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"enc\",{v:\"2\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncVersion2Mixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncVersionFutureproofMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.encV;a=d(\"WASmaxJsx\").smax(\"enc\",{v:d(\"WAWap\").INT(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncVersionFutureproofMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncVersion2OrFutureproofMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishEncVersion2Mixin\",\"WASmaxOutMessagePublishEncVersionFutureproofMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isEncVersion2)return d(\"WASmaxOutMessagePublishEncVersion2Mixin\").mergeEncVersion2Mixin(a);if(b.encVersionFutureproof)return d(\"WASmaxOutMessagePublishEncVersionFutureproofMixin\").mergeEncVersionFutureproofMixin(a,b.encVersionFutureproof);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeEncVersion2OrFutureproofMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishMediaTypeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.encMediatype;a=d(\"WASmaxJsx\").smax(\"enc\",{mediatype:d(\"WAWap\").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeMediaTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBotRequestMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishEncRetryMixin\",\"WASmaxOutMessagePublishEncTypeIndividualMixin\",\"WASmaxOutMessagePublishEncVersion2OrFutureproofMixinGroup\",\"WASmaxOutMessagePublishMediaTypeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toJid,c=a.encRetryMixinArgs,e=a.encTypeIndividualMixinArgs,f=a.mediaTypeMixinArgs;a=a.encVersion2OrFutureproofMixinGroupArgs;b=d(\"WASmaxJsx\").smax(\"to\",{jid:d(\"WAWap\").JID(b)},d(\"WASmaxOutMessagePublishEncVersion2OrFutureproofMixinGroup\").mergeEncVersion2OrFutureproofMixinGroup(d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishMediaTypeMixin\").mergeMediaTypeMixin,d(\"WASmaxOutMessagePublishEncTypeIndividualMixin\").mergeEncTypeIndividualMixin(d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishEncRetryMixin\").mergeEncRetryMixin,d(\"WASmaxJsx\").smax(\"enc\",null),c),e),f),a));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBotRequestMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeMediaMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{type:\"media\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypeMediaMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeTextMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{type:\"text\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypeTextMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishContentTypeMediaMixin\",\"WASmaxOutMessagePublishContentTypeTextMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d(\"WASmaxOutMessagePublishContentTypeTextMixin\").mergeContentTypeTextMixin(a);if(b.isContentTypeMedia)return d(\"WASmaxOutMessagePublishContentTypeMediaMixin\").mergeContentTypeMediaMixin(a);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeContentTypeTextOrMediaMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishBotLocalAutomatedTypeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.botLocalAutomatedType;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"bot\",{local_automated_type:d(\"WAWap\").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBotLocalAutomatedTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBotMessageTypeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.botType;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"bot\",{type:d(\"WAWap\").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBotMessageTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBusinessBotMessageMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.botBizBot;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"bot\",{biz_bot:d(\"WAWap\").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBusinessBotMessageMixin=a}),98);\n__d(\"WASmaxOutMessagePublishProductListMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",null,d(\"WASmaxJsx\").smax(\"list\",{type:\"product_list\"})));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeProductListMixin=a}),98);\n__d(\"WASmaxOutMessagePublishSingleSelectListMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.listV;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"biz\",null,d(\"WASmaxJsx\").smax(\"list\",{type:\"single_select\",v:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,a)})));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeSingleSelectListMixin=a}),98);\n__d(\"WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishProductListMixin\",\"WASmaxOutMessagePublishSingleSelectListMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.singleSelectList)return d(\"WASmaxOutMessagePublishSingleSelectListMixin\").mergeSingleSelectListMixin(a,b.singleSelectList);if(b.isProductList)return d(\"WASmaxOutMessagePublishProductListMixin\").mergeProductListMixin(a);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeSingleSelectOrProductListMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeListFanoutMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaMixin\",\"WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"to\",null,d(\"WASmaxJsx\").smax(\"enc\",{mediatype:\"list\"}));return a}function i(a){var b=a.toCount;a=a.singleSelectOrProductListMixinGroupArgs;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup\").mergeSingleSelectOrProductListMixinGroup,d(\"WASmaxOutMessagePublishContentTypeMediaMixin\").mergeContentTypeMediaMixin(d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"participants\",null,d(\"WASmaxChildren\").HOMOGENEOUS_CHILD_COUNT(h,b)))),a);return b}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeContentTypeListFanoutParticipantsTo=h;g.mergeContentTypeListFanoutMixin=a}),98);\n__d(\"WASmaxOutMessagePublishLiveLocationModeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaLivelocMode;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"meta\",{liveloc_mode:d(\"WAWap\").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeLiveLocationModeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeLiveLocationFanoutDeprecatedMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaMixin\",\"WASmaxOutMessagePublishLiveLocationModeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.encDuration;a=d(\"WASmaxJsx\").smax(\"to\",null,d(\"WASmaxJsx\").smax(\"enc\",{mediatype:\"livelocation\",duration:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,a)}));return a}function i(a){var b=a.toArgs;a=a.liveLocationModeMixinArgs;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishLiveLocationModeMixin\").mergeLiveLocationModeMixin,d(\"WASmaxOutMessagePublishContentTypeMediaMixin\").mergeContentTypeMediaMixin(d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"participants\",null,d(\"WASmaxChildren\").HOMOGENEOUS_CHILD(h,b)))),a);return b}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeContentTypeLiveLocationFanoutDeprecatedParticipantsTo=h;g.mergeContentTypeLiveLocationFanoutDeprecatedMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaMixin\",\"WASmaxOutMessagePublishLiveLocationModeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.encDuration;a=d(\"WASmaxJsx\").smax(\"to\",null,d(\"WASmaxJsx\").smax(\"enc\",{mediatype:\"livelocation\",duration:d(\"WAWap\").INT(a)}));return a}function i(a){var b=a.toArgs;a=a.liveLocationModeMixinArgs;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishLiveLocationModeMixin\").mergeLiveLocationModeMixin,d(\"WASmaxOutMessagePublishContentTypeMediaMixin\").mergeContentTypeMediaMixin(d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"participants\",null,d(\"WASmaxChildren\").HOMOGENEOUS_CHILD(h,b)))),a);return b}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeContentTypeLiveLocationFanoutParticipantsTo=h;g.mergeContentTypeLiveLocationFanoutMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeMedianotifyMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{type:\"medianotify\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypeMedianotifyMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishContentTypeMediaMixin\",\"WASmaxOutMessagePublishContentTypeMedianotifyMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeMedia)return d(\"WASmaxOutMessagePublishContentTypeMediaMixin\").mergeContentTypeMediaMixin(a);if(b.isContentTypeMedianotify)return d(\"WASmaxOutMessagePublishContentTypeMedianotifyMixin\").mergeContentTypeMedianotifyMixin(a);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeContentTypeMediaOrMedianotifyMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishSenderContentBindingMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.senderContentBindingElementValue;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"sender_content_binding\",null,a));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeSenderContentBindingMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup\",\"WASmaxOutMessagePublishSenderContentBindingMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encMediatype,c=a.hasEncStickerTypeAvatar;a=a.encNativeFlowName;b=d(\"WASmaxJsx\").smax(\"to\",null,d(\"WASmaxJsx\").smax(\"enc\",{mediatype:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,b),sticker_type:d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"avatar\",c),native_flow_name:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,a)}));return b}function i(a){var b=a.toArgs,c=a.senderContentBindingMixinArgs;a=a.contentTypeMediaOrMedianotifyMixinGroupArgs;b=d(\"WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup\").mergeContentTypeMediaOrMedianotifyMixinGroup(d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishSenderContentBindingMixin\").mergeSenderContentBindingMixin,d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"participants\",null,d(\"WASmaxChildren\").HOMOGENEOUS_CHILD(h,b))),c),a);return b}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeContentTypeMediaFanoutDeprecatedParticipantsTo=h;g.mergeContentTypeMediaFanoutDeprecatedMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeMediaFanoutMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup\",\"WASmaxOutMessagePublishSenderContentBindingMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encMediatype,c=a.hasEncStickerTypeAvatar;a=a.encNativeFlowName;b=d(\"WASmaxJsx\").smax(\"to\",null,d(\"WASmaxJsx\").smax(\"enc\",{mediatype:d(\"WAWap\").CUSTOM_STRING(b),sticker_type:d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"avatar\",c),native_flow_name:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,a)}));return b}function i(a){var b=a.toArgs,c=a.senderContentBindingMixinArgs;a=a.contentTypeMediaOrMedianotifyMixinGroupArgs;b=d(\"WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup\").mergeContentTypeMediaOrMedianotifyMixinGroup(d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishSenderContentBindingMixin\").mergeSenderContentBindingMixin,d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"participants\",null,d(\"WASmaxChildren\").HOMOGENEOUS_CHILD(h,b))),c),a);return b}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeContentTypeMediaFanoutParticipantsTo=h;g.mergeContentTypeMediaFanoutMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypePollCreationMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{type:\"poll\"},d(\"WASmaxJsx\").smax(\"meta\",{polltype:\"creation\"}));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypePollCreationMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypePollVoteMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{type:\"poll\"},d(\"WASmaxJsx\").smax(\"meta\",{polltype:\"vote\"}));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypePollVoteMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeReactionMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{type:\"reaction\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypeReactionMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypePayMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{type:\"pay\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypePayMixin=a}),98);\n__d(\"WASmaxOutMessagePublishPayNodeTypeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.payType;a=d(\"WASmaxJsx\").smax(\"pay\",{type:d(\"WAWap\").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergePayNodeTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBasePayNodeMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishPayNodeTypeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.payCountry,c=a.payVersion,e=a.payIsFirstSend;b=d(\"WASmaxOutMessagePublishPayNodeTypeMixin\").mergePayNodeTypeMixin(d(\"WASmaxJsx\").smax(\"pay\",{country:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,b),version:d(\"WAWap\").INT(c),is_first_send:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,e)}),a);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBasePayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishLegacyAmountMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.payCurrency;a=a.payAmount;b=d(\"WASmaxJsx\").smax(\"pay\",{currency:d(\"WAWap\").CUSTOM_STRING(b),amount:d(\"WAWap\").CUSTOM_STRING(a)});return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeLegacyAmountMixin=a}),98);\n__d(\"WASmaxOutMessagePublishMoneyMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.moneyValue,c=a.moneyOffset;a=a.moneyCurrency;b=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxJsx\").smax(\"money\",{value:d(\"WAWap\").CUSTOM_STRING(b),offset:d(\"WAWap\").CUSTOM_STRING(c),currency:d(\"WAWap\").CUSTOM_STRING(a)}));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeMoneyMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBasePayNodeMixin\",\"WASmaxOutMessagePublishLegacyAmountMixin\",\"WASmaxOutMessagePublishMoneyMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxOutMessagePublishMoneyMixin\").mergeMoneyMixin(d(\"WASmaxJsx\").smax(\"amount\",null),a);return a}function i(a){var b=a.amountArgs,c=a.payCredentialId,e=a.payDeviceId,f=a.payRequestId,g=a.legacyAmountMixinArgs;c=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishLegacyAmountMixin\").mergeLegacyAmountMixin,d(\"WASmaxOutMessagePublishBasePayNodeMixin\").mergeBasePayNodeMixin(d(\"WASmaxJsx\").smax(\"pay\",{\"credential-id\":d(\"WAWap\").CUSTOM_STRING(c),\"device-id\":d(\"WAWap\").CUSTOM_STRING(e),\"request-id\":d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,f)},d(\"WASmaxChildren\").OPTIONAL_CHILD(h,b)),a),g);return c}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeBaseIndividualPublishSendPayNodeAmount=h;g.mergeBaseIndividualPublishSendPayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishInstallmentMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishMoneyMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxOutMessagePublishMoneyMixin\").mergeMoneyMixin(d(\"WASmaxJsx\").smax(\"due_amount\",null),a);return a}function i(a){a=d(\"WASmaxOutMessagePublishMoneyMixin\").mergeMoneyMixin(d(\"WASmaxJsx\").smax(\"interest\",null),a);return a}function j(a){var b=a.dueAmountArgs,c=a.interestArgs,e=a.installmentMaxCount;a=a.installmentSelectedCount;e=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxJsx\").smax(\"installment\",{max_count:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,e),selected_count:d(\"WAWap\").INT(a)},d(\"WASmaxChildren\").OPTIONAL_CHILD(h,b),d(\"WASmaxChildren\").OPTIONAL_CHILD(i,c)));return e}function a(a,b){b=j(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeInstallmentInstallmentDueAmount=h;g.makeInstallmentInstallmentInterest=i;g.mergeInstallmentMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBeneficiaryMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.beneficiaryName,e=a.beneficiaryAddressLine1,f=a.beneficiaryAddressLine2,g=a.beneficiaryCity,h=a.beneficiaryState,i=a.beneficiaryCountry;a=a.beneficiaryPostalCode;c=d(\"WASmaxJsx\").smax(\"beneficiary\",{name:(b=d(\"WAWap\")).CUSTOM_STRING(c),address_line1:b.CUSTOM_STRING(e),address_line2:d(\"WASmaxAttrs\").OPTIONAL(b.CUSTOM_STRING,f),city:d(\"WASmaxAttrs\").OPTIONAL(b.CUSTOM_STRING,g),state:d(\"WASmaxAttrs\").OPTIONAL(b.CUSTOM_STRING,h),country:b.CUSTOM_STRING(i),postal_code:b.CUSTOM_STRING(a)});return c}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBeneficiaryMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBeneficiariesMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBeneficiaryMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxOutMessagePublishBeneficiaryMixin\").mergeBeneficiaryMixin(d(\"WASmaxJsx\").smax(\"beneficiary\",null),a);return a}function i(a){a=a.beneficiaryArgs;a=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxChildren\").REPEATED_CHILD(h,a,1,5));return a}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeBeneficiariesBeneficiary=h;g.mergeBeneficiariesMixin=a}),98);\n__d(\"WASmaxOutMessagePublishOrderInPaymentMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBeneficiariesMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxOutMessagePublishBeneficiariesMixin\").mergeBeneficiariesMixin(d(\"WASmaxJsx\").smax(\"beneficiaries\",null),a);return a}function i(a){var b,c=a.beneficiariesArgs,e=a.orderId,f=a.orderMessageId,g=a.orderPaymentConfigId;a=a.orderType;e=d(\"WASmaxJsx\").smax(\"smax$any\",null,d(\"WASmaxJsx\").smax(\"order\",{id:(b=d(\"WAWap\")).CUSTOM_STRING(e),message_id:d(\"WASmaxAttrs\").OPTIONAL(b.STANZA_ID,f),payment_config_id:d(\"WASmaxAttrs\").OPTIONAL(b.CUSTOM_STRING,g),type:d(\"WASmaxAttrs\").OPTIONAL(b.CUSTOM_STRING,a)},d(\"WASmaxChildren\").OPTIONAL_CHILD(h,c)));return e}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeOrderInPaymentOrderBeneficiaries=h;g.mergeOrderInPaymentMixin=a}),98);\n__d(\"WASmaxOutMessagePublishPaymentInitiatorMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyPaymentInitiator;a=d(\"WASmaxJsx\").smax(\"smax$any\",{payment_initiator:d(\"WAWap\").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergePaymentInitiatorMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishInstallmentMixin\",\"WASmaxOutMessagePublishOrderInPaymentMixin\",\"WASmaxOutMessagePublishPaymentInitiatorMixin\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.orderInPaymentMixinArgs,c=a.paymentInitiatorMixinArgs;a=a.installmentMixinArgs;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishInstallmentMixin\").mergeInstallmentMixin,d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishPaymentInitiatorMixin\").mergePaymentInitiatorMixin,d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishOrderInPaymentMixin\").mergeOrderInPaymentMixin,d(\"WASmaxJsx\").smax(\"pay\",{\"transaction-type\":\"p2m\"}),b),c),a);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBRPublishSendPayNodeP2MMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"pay\",{\"transaction-type\":\"p2p\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBRPublishSendPayNodeP2PMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin\",\"WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isBRPublishSendPayNodeP2P)return d(\"WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin\").mergeBRPublishSendPayNodeP2PMixin(a);if(b.bRPublishSendPayNodeP2M)return d(\"WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin\").mergeBRPublishSendPayNodeP2MMixin(a,b.bRPublishSendPayNodeP2M);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeBRPublishSendPayNodeP2POrMMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishBRSendPayEloNodeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.eloDeviceSignature,e=a.eloWalletSignature,f=a.eloChallengeId;a=a.eloCardholderVerificationMethod;c=d(\"WASmaxJsx\").smax(\"pay\",null,d(\"WASmaxJsx\").smax(\"elo\",{device_signature:(b=d(\"WAWap\")).CUSTOM_STRING(c),wallet_signature:b.CUSTOM_STRING(e),challenge_id:b.CUSTOM_STRING(f),cardholder_verification_method:b.CUSTOM_STRING(a)}));return c}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBRSendPayEloNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBRPublishSendPayNodeDeprecatedMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup\",\"WASmaxOutMessagePublishBRSendPayEloNodeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.payId,e=a.payPaymentRails,f=a.payTrustedDeviceInfo,g=a.payNonce,h=a.bRSendPayEloNodeMixinArgs;a=a.bRPublishSendPayNodeP2POrMMixinGroupArgs;c=d(\"WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup\").mergeBRPublishSendPayNodeP2POrMMixinGroup(d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishBRSendPayEloNodeMixin\").mergeBRSendPayEloNodeMixin,d(\"WASmaxJsx\").smax(\"pay\",{id:(b=d(\"WAWap\")).CUSTOM_STRING(c),\"payment-rails\":d(\"WASmaxAttrs\").OPTIONAL(b.CUSTOM_STRING,e),\"trusted-device-info\":d(\"WASmaxAttrs\").OPTIONAL(b.CUSTOM_STRING,f),nonce:b.CUSTOM_STRING(g)}),h),a);return c}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBRPublishSendPayNodeDeprecatedMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBRPublishSendPayNodeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup\",\"WASmaxOutMessagePublishBRSendPayEloNodeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.payId,e=a.payPaymentRails,f=a.payTrustedDeviceInfo,g=a.payNonce,h=a.bRSendPayEloNodeMixinArgs;a=a.bRPublishSendPayNodeP2POrMMixinGroupArgs;c=d(\"WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup\").mergeBRPublishSendPayNodeP2POrMMixinGroup(d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishBRSendPayEloNodeMixin\").mergeBRSendPayEloNodeMixin,d(\"WASmaxJsx\").smax(\"pay\",{id:(b=d(\"WAWap\")).CUSTOM_STRING(c),\"payment-rails\":b.CUSTOM_STRING(e),\"trusted-device-info\":b.CUSTOM_STRING(f),nonce:b.CUSTOM_STRING(g)}),h),a);return c}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBRPublishSendPayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishOrderMessageMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.orderOrderId,e=a.orderOrderMessageId,f=a.orderExpiryTs,g=a.orderOrderType;a=a.orderDiscountProgramName;e=d(\"WASmaxJsx\").smax(\"order\",{\"order-id\":(b=d(\"WAWap\")).CUSTOM_STRING(c),\"order-message-id\":(c=d(\"WASmaxAttrs\")).OPTIONAL(b.CUSTOM_STRING,e),\"expiry-ts\":c.OPTIONAL(b.INT,f),\"order-type\":c.OPTIONAL(b.CUSTOM_STRING,g),\"discount-program-name\":c.OPTIONAL(b.CUSTOM_STRING,a)});return e}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeOrderMessageMixin=a}),98);\n__d(\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishOrderMessageMixin\",\"WASmaxOutMessagePublishPaymentInitiatorMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=a.orderArgs;a=d(\"WASmaxJsx\").smax(\"upi\",null,d(\"WASmaxChildren\").OPTIONAL_CHILD(i,a));return a}function i(a){a=d(\"WASmaxOutMessagePublishOrderMessageMixin\").mergeOrderMessageMixin(d(\"WASmaxJsx\").smax(\"order\",null),a);return a}function j(a){var b=a.upiArgs;a=a.paymentInitiatorMixinArgs;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishPaymentInitiatorMixin\").mergePaymentInitiatorMixin,d(\"WASmaxJsx\").smax(\"pay\",{\"transaction-type\":\"p2m\"},d(\"WASmaxChildren\").OPTIONAL_CHILD(h,b)),a);return b}function a(a,b){b=j(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeUPIPublishSendPayNodeP2MUpi=h;g.makeUPIPublishSendPayNodeP2MUpiOrder=i;g.mergeUPIPublishSendPayNodeP2MMixin=a}),98);\n__d(\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.hasPayTransactionTypeP2P;a=d(\"WASmaxJsx\").smax(\"pay\",{\"transaction-type\":d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"p2p\",a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeUPIPublishSendPayNodeP2PMixin=a}),98);\n__d(\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin\",\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.uPIPublishSendPayNodeP2P)return d(\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin\").mergeUPIPublishSendPayNodeP2PMixin(a,b.uPIPublishSendPayNodeP2P);if(b.uPIPublishSendPayNodeP2M)return d(\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin\").mergeUPIPublishSendPayNodeP2MMixin(a,b.uPIPublishSendPayNodeP2M);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeUPIPublishSendPayNodeP2POrMMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishUPIPublishSendPayNodeMixin\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.upiToken;a=d(\"WASmaxJsx\").smax(\"upi\",{token:d(\"WAWap\").CUSTOM_STRING(a)});return a}function i(a){var b,c,e=a.upiArgs,f=a.payId,g=a.payMpin,i=a.payReceiverVpa,j=a.payReceiverVpaId,k=a.paySenderVpa,l=a.paySenderVpaId,m=a.paySeqNo,n=a.payUpiBankInfo,o=a.payMode,p=a.payPurposeCode,q=a.payMcc,r=a.payRefId;a=a.uPIPublishSendPayNodeP2POrMMixinGroupArgs;f=d(\"WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup\").mergeUPIPublishSendPayNodeP2POrMMixinGroup(d(\"WASmaxJsx\").smax(\"pay\",{id:(b=d(\"WASmaxAttrs\")).OPTIONAL((c=d(\"WAWap\")).CUSTOM_STRING,f),mpin:b.OPTIONAL(c.CUSTOM_STRING,g),\"receiver-vpa\":c.CUSTOM_STRING(i),\"receiver-vpa-id\":b.OPTIONAL(c.CUSTOM_STRING,j),\"sender-vpa\":c.CUSTOM_STRING(k),\"sender-vpa-id\":b.OPTIONAL(c.CUSTOM_STRING,l),\"seq-no\":c.CUSTOM_STRING(m),\"upi-bank-info\":c.CUSTOM_STRING(n),mode:b.OPTIONAL(c.CUSTOM_STRING,o),\"purpose-code\":b.OPTIONAL(c.CUSTOM_STRING,p),mcc:b.OPTIONAL(c.CUSTOM_STRING,q),\"ref-id\":b.OPTIONAL(c.CUSTOM_STRING,r)},d(\"WASmaxChildren\").OPTIONAL_CHILD(h,e)),a);return f}function a(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeUPIPublishSendPayNodeUpi=h;g.mergeUPIPublishSendPayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBRPublishSendPayNodeOrBRPublishSendPayNodeDeprecatedOrUPIPublishSendPayNodeMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishBRPublishSendPayNodeDeprecatedMixin\",\"WASmaxOutMessagePublishBRPublishSendPayNodeMixin\",\"WASmaxOutMessagePublishUPIPublishSendPayNodeMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.bRPublishSendPayNode)return d(\"WASmaxOutMessagePublishBRPublishSendPayNodeMixin\").mergeBRPublishSendPayNodeMixin(a,b.bRPublishSendPayNode);if(b.bRPublishSendPayNodeDeprecated)return d(\"WASmaxOutMessagePublishBRPublishSendPayNodeDeprecatedMixin\").mergeBRPublishSendPayNodeDeprecatedMixin(a,b.bRPublishSendPayNodeDeprecated);if(b.uPIPublishSendPayNode)return d(\"WASmaxOutMessagePublishUPIPublishSendPayNodeMixin\").mergeUPIPublishSendPayNodeMixin(a,b.uPIPublishSendPayNode);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeBRPublishSendPayNodeOrBRPublishSendPayNodeDeprecatedOrUPIPublishSendPayNodeMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishIntegrationPublishPayNodeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBRPublishSendPayNodeOrBRPublishSendPayNodeDeprecatedOrUPIPublishSendPayNodeMixinGroup\"],(function(a,b,c,d,e,f,g){function h(a){a=a.bRPublishSendPayNodeOrBRPublishSendPayNodeDeprecatedOrUPIPublishSendPayNodeMixinGroupArgs;a=d(\"WASmaxOutMessagePublishBRPublishSendPayNodeOrBRPublishSendPayNodeDeprecatedOrUPIPublishSendPayNodeMixinGroup\").mergeBRPublishSendPayNodeOrBRPublishSendPayNodeDeprecatedOrUPIPublishSendPayNodeMixinGroup(d(\"WASmaxJsx\").smax(\"pay\",null),a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIntegrationPublishPayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin\",\"WASmaxOutMessagePublishIntegrationPublishPayNodeMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxOutMessagePublishIntegrationPublishPayNodeMixin\").mergeIntegrationPublishPayNodeMixin(d(\"WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin\").mergeBaseIndividualPublishSendPayNodeMixin(d(\"WASmaxJsx\").smax(\"pay\",null),a),a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualNonNoviPublishSendPayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin\").mergeIndividualNonNoviPublishSendPayNodeMixin(d(\"WASmaxJsx\").smax(\"pay\",null),a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualPublishSendPayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualRequestPayNodeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBasePayNodeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.payExpiryTs,c=a.payRequestId;b=d(\"WASmaxOutMessagePublishBasePayNodeMixin\").mergeBasePayNodeMixin(d(\"WASmaxJsx\").smax(\"pay\",{\"expiry-ts\":d(\"WAWap\").CUSTOM_STRING(b),\"request-id\":d(\"WAWap\").CUSTOM_STRING(c)}),a);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualRequestPayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishPayInviteNodeMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.payService;a=d(\"WASmaxJsx\").smax(\"pay\",{type:\"invite\",service:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergePayInviteNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin\",\"WASmaxOutMessagePublishIndividualRequestPayNodeMixin\",\"WASmaxOutMessagePublishPayInviteNodeMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.individualPublishSendPayNode)return d(\"WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin\").mergeIndividualPublishSendPayNodeMixin(a,b.individualPublishSendPayNode);if(b.individualRequestPayNode)return d(\"WASmaxOutMessagePublishIndividualRequestPayNodeMixin\").mergeIndividualRequestPayNodeMixin(a,b.individualRequestPayNode);if(b.payInviteNode)return d(\"WASmaxOutMessagePublishPayInviteNodeMixin\").mergePayInviteNodeMixin(a,b.payInviteNode);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualPublishPayNodeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup\"],(function(a,b,c,d,e,f,g){function h(a){a=a.individualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroupArgs;a=d(\"WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup\").mergeIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup(d(\"WASmaxJsx\").smax(\"pay\",null),a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualPublishPayNodeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishIndividualPublishPayNodeMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxOutMessagePublishIndividualPublishPayNodeMixin\").mergeIndividualPublishPayNodeMixin(d(\"WASmaxJsx\").smax(\"pay\",null),a));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualIndividualPublishPayNodeMessageMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypePayMixin\",\"WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=a.individualIndividualPublishPayNodeMessageMixinArgs;a=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin\").mergeIndividualIndividualPublishPayNodeMessageMixin,d(\"WASmaxOutMessagePublishContentTypePayMixin\").mergeContentTypePayMixin(d(\"WASmaxJsx\").smax(\"message\",null)),a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualContentTypePayIndividualMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentFanoutMixins\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishContentTypeListFanoutMixin\",\"WASmaxOutMessagePublishContentTypeLiveLocationFanoutDeprecatedMixin\",\"WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin\",\"WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin\",\"WASmaxOutMessagePublishContentTypeMediaFanoutMixin\",\"WASmaxOutMessagePublishContentTypeMedianotifyMixin\",\"WASmaxOutMessagePublishContentTypePollCreationMixin\",\"WASmaxOutMessagePublishContentTypePollVoteMixin\",\"WASmaxOutMessagePublishContentTypeReactionMixin\",\"WASmaxOutMessagePublishContentTypeTextMixin\",\"WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d(\"WASmaxOutMessagePublishContentTypeTextMixin\").mergeContentTypeTextMixin(a);if(b.contentTypeMediaFanout)return d(\"WASmaxOutMessagePublishContentTypeMediaFanoutMixin\").mergeContentTypeMediaFanoutMixin(a,b.contentTypeMediaFanout);if(b.contentTypeMediaFanoutDeprecated)return d(\"WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin\").mergeContentTypeMediaFanoutDeprecatedMixin(a,b.contentTypeMediaFanoutDeprecated);if(b.contentTypeLiveLocationFanout)return d(\"WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin\").mergeContentTypeLiveLocationFanoutMixin(a,b.contentTypeLiveLocationFanout);if(b.contentTypeLiveLocationFanoutDeprecated)return d(\"WASmaxOutMessagePublishContentTypeLiveLocationFanoutDeprecatedMixin\").mergeContentTypeLiveLocationFanoutDeprecatedMixin(a,b.contentTypeLiveLocationFanoutDeprecated);if(b.individualContentTypePayIndividual)return d(\"WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin\").mergeIndividualContentTypePayIndividualMixin(a,b.individualContentTypePayIndividual);if(b.contentTypeListFanout)return d(\"WASmaxOutMessagePublishContentTypeListFanoutMixin\").mergeContentTypeListFanoutMixin(a,b.contentTypeListFanout);if(b.isContentTypeReaction)return d(\"WASmaxOutMessagePublishContentTypeReactionMixin\").mergeContentTypeReactionMixin(a);if(b.isContentTypePollCreation)return d(\"WASmaxOutMessagePublishContentTypePollCreationMixin\").mergeContentTypePollCreationMixin(a);if(b.isContentTypePollVote)return d(\"WASmaxOutMessagePublishContentTypePollVoteMixin\").mergeContentTypePollVoteMixin(a);if(b.isContentTypeMedianotify)return d(\"WASmaxOutMessagePublishContentTypeMedianotifyMixin\").mergeContentTypeMedianotifyMixin(a);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeContentFanoutMixins=a}),98);\n__d(\"WASmaxOutMessagePublishLidChatOriginMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.metaOrigin;a=a.metaSharePn;b=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"meta\",{origin:d(\"WAWap\").CUSTOM_STRING(b),share_pn:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,a)}));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeLidChatOriginMixin=a}),98);\n__d(\"WASmaxOutMessagePublishTDeprecatedMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageT;a=d(\"WASmaxJsx\").smax(\"message\",{t:d(\"WAWap\").INT(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeTDeprecatedMixin=a}),98);\n__d(\"WASmaxOutMessagePublishToContentBindingMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toJid;a=a.contentBindingElementValue;b=d(\"WASmaxJsx\").smax(\"to\",{jid:d(\"WAWap\").DEVICE_JID(b)},d(\"WASmaxJsx\").smax(\"content_binding\",null,a));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeToContentBindingMixin=a}),98);\n__d(\"WASmaxOutMessagePublishAvatarStickerTypeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"enc\",{sticker_type:\"avatar\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeAvatarStickerTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishAvatarStickerTypeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encMediatype,c=a.encNativeFlowName;a=a.hasAvatarStickerType;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishAvatarStickerTypeMixin\").mergeAvatarStickerTypeMixin,d(\"WASmaxJsx\").smax(\"enc\",{mediatype:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,b),native_flow_name:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,c)}),a);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncMediaTypeDeprecatedMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncVersion3Mixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"enc\",{v:\"3\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncVersion3Mixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncVersion2Or3MixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishEncVersion2Mixin\",\"WASmaxOutMessagePublishEncVersion3Mixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isEncVersion2)return d(\"WASmaxOutMessagePublishEncVersion2Mixin\").mergeEncVersion2Mixin(a);if(b.isEncVersion3)return d(\"WASmaxOutMessagePublishEncVersion3Mixin\").mergeEncVersion3Mixin(a);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeEncVersion2Or3MixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishToDeviceMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin\",\"WASmaxOutMessagePublishEncTypeIndividualMixin\",\"WASmaxOutMessagePublishEncVersion2Or3MixinGroup\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toJid,c=a.encTypeIndividualMixinArgs,e=a.encMediaTypeDeprecatedMixinArgs;a=a.encVersion2Or3MixinGroupArgs;b=d(\"WASmaxJsx\").smax(\"to\",{jid:d(\"WAWap\").JID(b)},d(\"WASmaxOutMessagePublishEncVersion2Or3MixinGroup\").mergeEncVersion2Or3MixinGroup(d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin\").mergeEncMediaTypeDeprecatedMixin,d(\"WASmaxOutMessagePublishEncTypeIndividualMixin\").mergeEncTypeIndividualMixin(d(\"WASmaxJsx\").smax(\"enc\",null),c),e),a));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeToDeviceMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualIndividualFanoutMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBotLocalAutomatedTypeMixin\",\"WASmaxOutMessagePublishBotMessageTypeMixin\",\"WASmaxOutMessagePublishBusinessBotMessageMixin\",\"WASmaxOutMessagePublishContentFanoutMixins\",\"WASmaxOutMessagePublishLidChatOriginMixin\",\"WASmaxOutMessagePublishTDeprecatedMixin\",\"WASmaxOutMessagePublishToContentBindingMixin\",\"WASmaxOutMessagePublishToDeviceMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toContentBindingMixinArgs;a=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishToContentBindingMixin\").mergeToContentBindingMixin,d(\"WASmaxOutMessagePublishToDeviceMixin\").mergeToDeviceMixin(d(\"WASmaxJsx\").smax(\"to\",null),a),b);return a}function a(){var a=d(\"WASmaxJsx\").smax(\"enc\",null);return a}function i(a){var b,c=a.toArgs,e=a.messageTo,f=a.tDeprecatedMixinArgs,g=a.botMessageTypeMixinArgs,i=a.businessBotMessageMixinArgs,j=a.lidChatOriginMixinArgs,k=a.botLocalAutomatedTypeMixinArgs;a=a.contentFanoutMixinsArgs;b=d(\"WASmaxOutMessagePublishContentFanoutMixins\").mergeContentFanoutMixins((b=d(\"WASmaxMixins\")).optionalMerge(d(\"WASmaxOutMessagePublishBotLocalAutomatedTypeMixin\").mergeBotLocalAutomatedTypeMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishLidChatOriginMixin\").mergeLidChatOriginMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBusinessBotMessageMixin\").mergeBusinessBotMessageMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBotMessageTypeMixin\").mergeBotMessageTypeMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishTDeprecatedMixin\").mergeTDeprecatedMixin,d(\"WASmaxJsx\").smax(\"message\",{to:d(\"WAWap\").JID(e)},d(\"WASmaxJsx\").smax(\"participants\",null,d(\"WASmaxChildren\").REPEATED_CHILD(h,c,1,1997))),f),g),i),j),k),a);return b}function b(a,b){b=i(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeIndividualIndividualFanoutParticipantsTo=h;g.makeIndividualIndividualFanoutEnc=a;g.mergeIndividualIndividualFanoutMixin=b}),98);\n__d(\"WASmaxOutMessagePublishEncListMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"enc\",{mediatype:\"list\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncListMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeListMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaMixin\",\"WASmaxOutMessagePublishEncListMixin\",\"WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup\"],(function(a,b,c,d,e,f,g){function h(a){a=a.singleSelectOrProductListMixinGroupArgs;a=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup\").mergeSingleSelectOrProductListMixinGroup,d(\"WASmaxOutMessagePublishContentTypeMediaMixin\").mergeContentTypeMediaMixin(d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxOutMessagePublishEncListMixin\").mergeEncListMixin(d(\"WASmaxJsx\").smax(\"enc\",null)))),a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypeListMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.encDuration;a=d(\"WASmaxJsx\").smax(\"enc\",{mediatype:\"livelocation\",duration:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncLiveLocationDeprecatedMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncLiveLocationMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.encDuration;a=d(\"WASmaxJsx\").smax(\"enc\",{mediatype:\"livelocation\",duration:d(\"WAWap\").INT(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncLiveLocationMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin\",\"WASmaxOutMessagePublishEncLiveLocationMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.encLiveLocation)return d(\"WASmaxOutMessagePublishEncLiveLocationMixin\").mergeEncLiveLocationMixin(a,b.encLiveLocation);if(b.encLiveLocationDeprecated)return d(\"WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin\").mergeEncLiveLocationDeprecatedMixin(a,b.encLiveLocationDeprecated);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaMixin\",\"WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup\",\"WASmaxOutMessagePublishLiveLocationModeMixin\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.liveLocationModeMixinArgs;a=a.encLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroupArgs;a=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishLiveLocationModeMixin\").mergeLiveLocationModeMixin,d(\"WASmaxOutMessagePublishContentTypeMediaMixin\").mergeContentTypeMediaMixin(d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup\").mergeEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup(d(\"WASmaxJsx\").smax(\"enc\",null),a))),b);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypeLiveLocationSingleMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncMediaTypeMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishAvatarStickerTypeMixin\",\"WASmaxOutMessagePublishMediaTypeMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encNativeFlowName,c=a.hasAvatarStickerType;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishAvatarStickerTypeMixin\").mergeAvatarStickerTypeMixin,d(\"WASmaxOutMessagePublishMediaTypeMixin\").mergeMediaTypeMixin(d(\"WASmaxJsx\").smax(\"enc\",{native_flow_name:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,b)}),a),c);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncMediaTypeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin\",\"WASmaxOutMessagePublishEncMediaTypeMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.encMediaType)return d(\"WASmaxOutMessagePublishEncMediaTypeMixin\").mergeEncMediaTypeMixin(a,b.encMediaType);if(b.encMediaTypeDeprecated)return d(\"WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin\").mergeEncMediaTypeDeprecatedMixin(a,b.encMediaTypeDeprecated);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeMediaSingleMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup\",\"WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup\",\"WASmaxOutMessagePublishSenderContentBindingMixin\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.senderContentBindingMixinArgs,c=a.contentTypeMediaOrMedianotifyMixinGroupArgs;a=a.encMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroupArgs;a=d(\"WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup\").mergeContentTypeMediaOrMedianotifyMixinGroup(d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishSenderContentBindingMixin\").mergeSenderContentBindingMixin,d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup\").mergeEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup(d(\"WASmaxJsx\").smax(\"enc\",null),a)),b),c);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeContentTypeMediaSingleMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentMixins\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishContentTypeListMixin\",\"WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin\",\"WASmaxOutMessagePublishContentTypeMediaSingleMixin\",\"WASmaxOutMessagePublishContentTypePollCreationMixin\",\"WASmaxOutMessagePublishContentTypePollVoteMixin\",\"WASmaxOutMessagePublishContentTypeReactionMixin\",\"WASmaxOutMessagePublishContentTypeTextMixin\",\"WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d(\"WASmaxOutMessagePublishContentTypeTextMixin\").mergeContentTypeTextMixin(a);if(b.contentTypeMediaSingle)return d(\"WASmaxOutMessagePublishContentTypeMediaSingleMixin\").mergeContentTypeMediaSingleMixin(a,b.contentTypeMediaSingle);if(b.contentTypeLiveLocationSingle)return d(\"WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin\").mergeContentTypeLiveLocationSingleMixin(a,b.contentTypeLiveLocationSingle);if(b.individualContentTypePayIndividual)return d(\"WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin\").mergeIndividualContentTypePayIndividualMixin(a,b.individualContentTypePayIndividual);if(b.contentTypeList)return d(\"WASmaxOutMessagePublishContentTypeListMixin\").mergeContentTypeListMixin(a,b.contentTypeList);if(b.isContentTypeReaction)return d(\"WASmaxOutMessagePublishContentTypeReactionMixin\").mergeContentTypeReactionMixin(a);if(b.isContentTypePollCreation)return d(\"WASmaxOutMessagePublishContentTypePollCreationMixin\").mergeContentTypePollCreationMixin(a);if(b.isContentTypePollVote)return d(\"WASmaxOutMessagePublishContentTypePollVoteMixin\").mergeContentTypePollVoteMixin(a);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeContentMixins=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageRecipient;a=d(\"WASmaxJsx\").smax(\"message\",{recipient:d(\"WAWap\").USER_JID(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualIndividualRetryToPeerMixin=a}),98);\n__d(\"WASmaxOutMessagePublishRetryMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishEncRetryMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageT;a=a.encRetryMixinArgs;b=d(\"WASmaxJsx\").smax(\"message\",{t:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,b)},d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishEncRetryMixin\").mergeEncRetryMixin,d(\"WASmaxJsx\").smax(\"enc\",null),a));return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeRetryMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualIndividualRetryMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin\",\"WASmaxOutMessagePublishRetryMixin\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.individualIndividualRetryToPeerMixinArgs;a=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin\").mergeIndividualIndividualRetryToPeerMixin,d(\"WASmaxOutMessagePublishRetryMixin\").mergeRetryMixin(d(\"WASmaxJsx\").smax(\"message\",null),a),b);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualIndividualRetryMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualIndividualSingleContentBindingMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.contentBindingElementValue;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxJsx\").smax(\"content_binding\",null,a));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualIndividualSingleContentBindingMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualIndividualSingleMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBotLocalAutomatedTypeMixin\",\"WASmaxOutMessagePublishBotMessageTypeMixin\",\"WASmaxOutMessagePublishBusinessBotMessageMixin\",\"WASmaxOutMessagePublishContentMixins\",\"WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin\",\"WASmaxOutMessagePublishEncTypeIndividualMixin\",\"WASmaxOutMessagePublishEncVersion2Or3MixinGroup\",\"WASmaxOutMessagePublishIndividualIndividualRetryMixin\",\"WASmaxOutMessagePublishIndividualIndividualSingleContentBindingMixin\",\"WASmaxOutMessagePublishLidChatOriginMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.messageTo,e=a.individualIndividualRetryMixinArgs,f=a.individualIndividualSingleContentBindingMixinArgs,g=a.botMessageTypeMixinArgs,h=a.businessBotMessageMixinArgs,i=a.lidChatOriginMixinArgs,j=a.botLocalAutomatedTypeMixinArgs,k=a.contentMixinsArgs,l=a.encTypeIndividualMixinArgs,m=a.encMediaTypeDeprecatedMixinArgs;a=a.encVersion2Or3MixinGroupArgs;c=d(\"WASmaxOutMessagePublishContentMixins\").mergeContentMixins((b=d(\"WASmaxMixins\")).optionalMerge(d(\"WASmaxOutMessagePublishBotLocalAutomatedTypeMixin\").mergeBotLocalAutomatedTypeMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishLidChatOriginMixin\").mergeLidChatOriginMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBusinessBotMessageMixin\").mergeBusinessBotMessageMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishBotMessageTypeMixin\").mergeBotMessageTypeMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishIndividualIndividualSingleContentBindingMixin\").mergeIndividualIndividualSingleContentBindingMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishIndividualIndividualRetryMixin\").mergeIndividualIndividualRetryMixin,d(\"WASmaxJsx\").smax(\"message\",{to:d(\"WAWap\").JID(c)},d(\"WASmaxOutMessagePublishEncVersion2Or3MixinGroup\").mergeEncVersion2Or3MixinGroup(b.optionalMerge(d(\"WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin\").mergeEncMediaTypeDeprecatedMixin,d(\"WASmaxOutMessagePublishEncTypeIndividualMixin\").mergeEncTypeIndividualMixin(d(\"WASmaxJsx\").smax(\"enc\",null),l),m),a)),e),f),g),h),i),j),k);return c}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualIndividualSingleMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualFanoutMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishIndividualIndividualFanoutMixin\",\"WASmaxOutMessagePublishIndividualIndividualSingleMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.individualIndividualSingle)return d(\"WASmaxOutMessagePublishIndividualIndividualSingleMixin\").mergeIndividualIndividualSingleMixin(a,b.individualIndividualSingle);if(b.individualIndividualFanout)return d(\"WASmaxOutMessagePublishIndividualIndividualFanoutMixin\").mergeIndividualIndividualFanoutMixin(a,b.individualIndividualFanout);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeIndividualIndividualSingleOrIndividualFanoutMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualBotRequestMessageMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBotFeedbackMessageTypeMixin\",\"WASmaxOutMessagePublishBotRequestMixin\",\"WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup\",\"WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualFanoutMixinGroup\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageTo,c=a.contentTypeTextOrMediaMixinGroupArgs,e=a.individualIndividualSingleOrIndividualFanoutMixinGroupArgs,f=a.hasBotFeedbackMessageType;a=a.botRequestMixinArgs;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualFanoutMixinGroup\").mergeIndividualIndividualSingleOrIndividualFanoutMixinGroup,d(\"WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup\").mergeContentTypeTextOrMediaMixinGroup(d(\"WASmaxJsx\").smax(\"message\",{to:d(\"WAWap\").USER_JID(b)},d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishBotFeedbackMessageTypeMixin\").mergeBotFeedbackMessageTypeMixin,d(\"WASmaxJsx\").smax(\"bot\",null,d(\"WASmaxOutMessagePublishBotRequestMixin\").mergeBotRequestMixin(d(\"WASmaxJsx\").smax(\"to\",null),a)),f)),c),e);return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualBotRequestMessageMixin=a}),98);\n__d(\"WASmaxOutMessagePublishBotResponseMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.botEditTargetId,c=a.botSenderTimestampMs;a=a.botEdit;b=d(\"WASmaxJsx\").smax(\"bot\",{edit_target_id:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").STANZA_ID,b),sender_timestamp_ms:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").INT,c),edit:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").CUSTOM_STRING,a)});return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBotResponseMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishContentTypeMediaMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=a.toCount;a=d(\"WASmaxJsx\").smax(\"participants\",null,d(\"WASmaxChildren\").REPEATED_CHILD_COUNT(i,a,2,2));return a}function i(){var a=d(\"WASmaxJsx\").smax(\"to\",null,d(\"WASmaxJsx\").smax(\"enc\",{mediatype:\"image\"}));return a}function j(a){a=a.participantsArgs;a=d(\"WASmaxOutMessagePublishContentTypeMediaMixin\").mergeContentTypeMediaMixin(d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxChildren\").OPTIONAL_CHILD(h,a)));return a}function a(a,b){b=j(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeIndividualContentTypeBotResponseMediaFanoutParticipants=h;g.makeIndividualContentTypeBotResponseMediaFanoutParticipantsTo=i;g.mergeIndividualContentTypeBotResponseMediaFanoutMixin=a}),98);\n__d(\"WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishContentTypeTextMixin\",\"WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d(\"WASmaxOutMessagePublishContentTypeTextMixin\").mergeContentTypeTextMixin(a);if(b.individualContentTypeBotResponseMediaFanout)return d(\"WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin\").mergeIndividualContentTypeBotResponseMediaFanoutMixin(a,b.individualContentTypeBotResponseMediaFanout);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishEncPayloadMixin\"],(function(a,b,c,d,e,f,g){function h(a){a=d(\"WASmaxOutMessagePublishEncPayloadMixin\").mergeEncPayloadMixin(d(\"WASmaxJsx\").smax(\"enc\",{type:\"msmsg\"}),a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeEncTypeMessageSecretMessageMixin=a}),98);\n__d(\"WASmaxOutMessagePublishFromProxyAccountMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.botActualFrom;a=d(\"WASmaxJsx\").smax(\"bot\",{actual_from:d(\"WAWap\").JID(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeFromProxyAccountMixin=a}),98);\n__d(\"WASmaxOutMessagePublishMessageTargetMixin\",[\"WASmaxAttrs\",\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.metaTargetId,c=a.metaTargetSenderJid;a=a.metaTargetChatJid;b=d(\"WASmaxJsx\").smax(\"meta\",{target_id:d(\"WAWap\").STANZA_ID(b),target_sender_jid:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").USER_JID,c),target_chat_jid:d(\"WASmaxAttrs\").OPTIONAL(d(\"WAWap\").JID,a)});return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeMessageTargetMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualBotResponseFanoutMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBotResponseMixin\",\"WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup\",\"WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin\",\"WASmaxOutMessagePublishEncVersion2OrFutureproofMixinGroup\",\"WASmaxOutMessagePublishFromProxyAccountMixin\",\"WASmaxOutMessagePublishMessageTargetMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.toArgs;a=d(\"WASmaxJsx\").smax(\"participants\",null,d(\"WASmaxChildren\").REPEATED_CHILD(i,a,2,2));return a}function i(a){a=a.toJid;a=d(\"WASmaxJsx\").smax(\"to\",{jid:d(\"WAWap\").USER_JID(a)});return a}function j(a){var b,c=a.participantsArgs,e=a.messageTo,f=a.contentTypeTextOrIndividualBotResponseMediaFanoutMixinGroupArgs,g=a.botResponseMixinArgs,i=a.fromProxyAccountMixinArgs,j=a.messageTargetMixinArgs,k=a.encTypeMessageSecretMessageMixinArgs;a=a.encVersion2OrFutureproofMixinGroupArgs;e=d(\"WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup\").mergeContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup((b=d(\"WASmaxJsx\")).smax(\"message\",{to:d(\"WAWap\").USER_JID(e)},d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutMessagePublishFromProxyAccountMixin\").mergeFromProxyAccountMixin,d(\"WASmaxOutMessagePublishBotResponseMixin\").mergeBotResponseMixin(b.smax(\"bot\",null),g),i),d(\"WASmaxOutMessagePublishMessageTargetMixin\").mergeMessageTargetMixin(b.smax(\"meta\",null),j),d(\"WASmaxOutMessagePublishEncVersion2OrFutureproofMixinGroup\").mergeEncVersion2OrFutureproofMixinGroup(d(\"WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin\").mergeEncTypeMessageSecretMessageMixin(b.smax(\"enc\",null),k),a),d(\"WASmaxChildren\").OPTIONAL_CHILD(h,c)),f);return e}function a(a,b){b=j(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeIndividualBotResponseFanoutParticipants=h;g.makeIndividualBotResponseFanoutParticipantsTo=i;g.mergeIndividualBotResponseFanoutMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishIndividualBotRequestMessageMixin\",\"WASmaxOutMessagePublishIndividualBotResponseFanoutMixin\",\"WASmaxOutMessagePublishIndividualIndividualFanoutMixin\",\"WASmaxOutMessagePublishIndividualIndividualSingleMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.individualBotResponseFanout)return d(\"WASmaxOutMessagePublishIndividualBotResponseFanoutMixin\").mergeIndividualBotResponseFanoutMixin(a,b.individualBotResponseFanout);if(b.individualBotRequestMessage)return d(\"WASmaxOutMessagePublishIndividualBotRequestMessageMixin\").mergeIndividualBotRequestMessageMixin(a,b.individualBotRequestMessage);if(b.individualIndividualSingle)return d(\"WASmaxOutMessagePublishIndividualIndividualSingleMixin\").mergeIndividualIndividualSingleMixin(a,b.individualIndividualSingle);if(b.individualIndividualFanout)return d(\"WASmaxOutMessagePublishIndividualIndividualFanoutMixin\").mergeIndividualIndividualFanoutMixin(a,b.individualIndividualFanout);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageRecipient;a=d(\"WASmaxJsx\").smax(\"message\",{recipient:d(\"WAWap\").USER_JID(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIndividualRecipientDeprecaredMixin=a}),98);\n__d(\"WASmaxOutMessagePublishMessageEditMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{edit:\"1\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeMessageEditMixin=a}),98);\n__d(\"WASmaxOutMessagePublishMessagePinMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{edit:\"2\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeMessagePinMixin=a}),98);\n__d(\"WASmaxOutMessagePublishRevokeMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"message\",{edit:\"7\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeRevokeMixin=a}),98);\n__d(\"WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishMessageEditMixin\",\"WASmaxOutMessagePublishMessagePinMixin\",\"WASmaxOutMessagePublishRevokeMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isMessageEdit)return d(\"WASmaxOutMessagePublishMessageEditMixin\").mergeMessageEditMixin(a);if(b.isMessagePin)return d(\"WASmaxOutMessagePublishMessagePinMixin\").mergeMessagePinMixin(a);if(b.isRevoke)return d(\"WASmaxOutMessagePublishRevokeMixin\").mergeRevokeMixin(a);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeMessageEditOrMessagePinOrRevokeMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishRecipientPNMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageRecipientPn;a=d(\"WASmaxJsx\").smax(\"message\",{recipient_pn:d(\"WAWap\").USER_JID(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeRecipientPNMixin=a}),98);\n__d(\"WASmaxOutMessagePublishRecipientUsernameMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageRecipientUsername;a=d(\"WASmaxJsx\").smax(\"message\",{recipient_username:d(\"WAWap\").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeRecipientUsernameMixin=a}),98);\n__d(\"WASmaxOutMessagePublishRecipientPNOrUsernameMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishRecipientPNMixin\",\"WASmaxOutMessagePublishRecipientUsernameMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.recipientPN)return d(\"WASmaxOutMessagePublishRecipientPNMixin\").mergeRecipientPNMixin(a,b.recipientPN);if(b.recipientUsername)return d(\"WASmaxOutMessagePublishRecipientUsernameMixin\").mergeRecipientUsernameMixin(a,b.recipientUsername);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeRecipientPNOrUsernameMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishThreadTypeTagEnumMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaThreadType;a=d(\"WASmaxJsx\").smax(\"meta\",{thread_type:d(\"WAWap\").INT(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeThreadTypeTagEnumMixin=a}),98);\n__d(\"WASmaxOutMessagePublishThreadTypeTagLegacyMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaThreadType;a=d(\"WASmaxJsx\").smax(\"meta\",{thread_type:d(\"WAWap\").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeThreadTypeTagLegacyMixin=a}),98);\n__d(\"WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMessagePublishThreadTypeTagEnumMixin\",\"WASmaxOutMessagePublishThreadTypeTagLegacyMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.threadTypeTagEnum)return d(\"WASmaxOutMessagePublishThreadTypeTagEnumMixin\").mergeThreadTypeTagEnumMixin(a,b.threadTypeTagEnum);if(b.threadTypeTagLegacy)return d(\"WASmaxOutMessagePublishThreadTypeTagLegacyMixin\").mergeThreadTypeTagLegacyMixin(a,b.threadTypeTagLegacy);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeThreadTypeTagEnumOrLegacyMixinGroup=a}),98);\n__d(\"WASmaxOutMessagePublishThreadTypeTagMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup\"],(function(a,b,c,d,e,f,g){function h(a){a=a.threadTypeTagEnumOrLegacyMixinGroupArgs;a=d(\"WASmaxJsx\").smax(\"message\",null,d(\"WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup\").mergeThreadTypeTagEnumOrLegacyMixinGroup(d(\"WASmaxJsx\").smax(\"meta\",null),a));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeThreadTypeTagMixin=a}),98);\n__d(\"WASmaxOutMessagePublishIndividualRequest\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMessagePublishBaseMixin\",\"WASmaxOutMessagePublishGroupInviteTargetMixin\",\"WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup\",\"WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin\",\"WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup\",\"WASmaxOutMessagePublishRecipientPNOrUsernameMixinGroup\",\"WASmaxOutMessagePublishThreadTypeTagMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function a(a){var b,c=a.messageId,e=a.groupInviteTargetMixinArgs,f=a.threadTypeTagMixinArgs,g=a.individualRecipientDeprecaredMixinArgs,h=a.individualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroupArgs,i=a.messageEditOrMessagePinOrRevokeMixinGroupArgs,j=a.recipientPNOrUsernameMixinGroupArgs;b=(b=d(\"WASmaxMixins\")).optionalMerge(d(\"WASmaxOutMessagePublishRecipientPNOrUsernameMixinGroup\").mergeRecipientPNOrUsernameMixinGroup,b.optionalMerge(d(\"WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup\").mergeMessageEditOrMessagePinOrRevokeMixinGroup,d(\"WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup\").mergeIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup(b.optionalMerge(d(\"WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin\").mergeIndividualRecipientDeprecaredMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishThreadTypeTagMixin\").mergeThreadTypeTagMixin,b.optionalMerge(d(\"WASmaxOutMessagePublishGroupInviteTargetMixin\").mergeGroupInviteTargetMixin,d(\"WASmaxOutMessagePublishBaseMixin\").mergeBaseMixin(d(\"WASmaxJsx\").smax(\"message\",{id:d(\"WAWap\").STANZA_ID(c)}),a),e),f),g),h),i),j);return b}g.makeIndividualRequest=a}),98);\n__d(\"WASmaxMessagePublishIndividualRPC\",[\"WAComms\",\"WASmaxInMessagePublishIndividualResponseNegative\",\"WASmaxInMessagePublishIndividualResponseSuccess\",\"WASmaxOutMessagePublishIndividualRequest\",\"WASmaxParsingFailure\",\"WASmaxRpcUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b(\"regeneratorRuntime\").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d(\"WASmaxOutMessagePublishIndividualRequest\").makeIndividualRequest(a);i.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAComms\").sendSmaxStanza(e,c));case 3:f=i.sent;g=d(\"WASmaxInMessagePublishIndividualResponseNegative\").parseIndividualResponseNegative(f,e);if(!g.success){i.next=7;break}return i.abrupt(\"return\",{name:\"IndividualResponseNegative\",value:g.value});case 7:h=d(\"WASmaxInMessagePublishIndividualResponseSuccess\").parseIndividualResponseSuccess(f,e);if(!h.success){i.next=10;break}return i.abrupt(\"return\",{name:\"IndividualResponseSuccess\",value:h.value});case 10:throw new(d(\"WASmaxParsingFailure\").SmaxParsingFailure)(d(\"WASmaxRpcUtils\").errorMessageRpcParsing(\"Individual\",{Negative:g,Success:h}));case 11:case\"end\":return i.stop()}},null,this)}g.sendIndividualRPC=a}),98);\n__d(\"WASendMsgRPC\",[\"WADeprecatedSendIq\",\"WADeprecatedWapParser\",\"WAGetDeviceIdentityMixin\",\"WAJids\",\"WALogger\",\"WAParseFranking\",\"WASmaxMessagePublishIndividualRPC\",\"WATimeUtils\",\"WAWap\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WASendMsgRPC: Wrong media type: \",\"\"]);h=function(){return a};return a}function a(a,c,e,f){var g,h,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;return b(\"regeneratorRuntime\").async(function(T){while(1)switch(T.prev=T.next){case 0:f===void 0&&(f=!1);g=d(\"WAJids\").interpretAsGroupJid(a.protocolMsgId.chat);h=a.messageType.type===\"text\"&&a.messageType.invitedParticipantUserJid!=null;if(!(c.type===\"direct_user\")){T.next=17;break}p={individualIndividualSingle:{messageTo:c.message.to,individualIndividualRetryMixinArgs:l(a.count,c.recipient),contentMixinsArgs:k(a,c.message),encTypeIndividualMixinArgs:m(c.message),encVersion2Or3MixinGroupArgs:n(c.message)}};q={messageId:a.externalId,deviceIdentityMixinArgs:d(\"WAGetDeviceIdentityMixin\").getDeviceIdentityMixin(a.deviceIdentity),hasNoExtraFanout:a.messageType.isInvisible===!0?!0:null,messageEditOrMessagePinOrRevokeMixinGroupArgs:o(a.messageType),clientFrankingTagMixinArgs:(e==null?void 0:e.frankingTag)?{frankingTagElementValue:e.frankingTag}:null,hasMetaHideDecryptionPlaceholder:a.messageType.isInvisible===!0?!0:null,groupInviteTargetMixinArgs:h&&g!=null?{metaGroupInvite:g}:null,individualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroupArgs:p,internalTestMixinArgs:f?{testConfig:\"armadillo_express\"}:null};T.next=8;return b(\"regeneratorRuntime\").awrap(d(\"WASmaxMessagePublishIndividualRPC\").sendIndividualRPC(q));case 8:r=T.sent;if(!(r.name===\"IndividualResponseSuccess\")){T.next=15;break}t=((s=r.value.deviceListStaleMixin)==null?void 0:s.phash)!=null?{type:\"mismatch\",local:null,server:r.value.deviceListStaleMixin.phash}:{type:\"ok\"};u=r.value.serverFrankingTagMixin!=null&&e!=null?babelHelpers[\"extends\"]({},e,{reportingTag:r.value.serverFrankingTagMixin.frankingReportingTagElementValue}):null;return T.abrupt(\"return\",{type:\"success\",ts:d(\"WATimeUtils\").castToUnixTime(r.value.t),phash:t,count:null,reportingMeta:u});case 15:r.name;return T.abrupt(\"return\",{type:\"error\",errorCode:parseInt(r.value.error,10),applicationError:(v=r.value.applicationNegativeAckMixin)==null?void 0:v.applicationError});case 17:w=a.messageType.isInvisible===!0?\"false\":d(\"WAWap\").DROP_ATTR;x=c.participant!=null?d(\"WAWap\").JID(c.participant):d(\"WAWap\").DROP_ATTR;y=c.phash!=null&&c.type===\"group\"?d(\"WAWap\").CUSTOM_STRING(c.phash):d(\"WAWap\").DROP_ATTR;z=a.messageType.type===\"text\"&&a.messageType.isRevoked?d(\"WAWap\").CUSTOM_STRING(\"7\"):d(\"WAWap\").DROP_ATTR;A=!h||g==null?null:d(\"WAWap\").wap(\"meta\",{group_invite:d(\"WAWap\").CUSTOM_STRING(g)});B=f?d(\"WAWap\").wap(\"test\",{config:d(\"WAWap\").CUSTOM_STRING(\"armadillo_express\")}):null;C=a.messageType.isInvisible===!0?d(\"WAWap\").wap(\"meta\",{\"decrypt-fail\":\"hide\"}):null;D=a.deviceIdentity!=null?d(\"WAWap\").wap(\"device-identity\",null,a.deviceIdentity):null;E=(e==null?void 0:e.frankingTag)!=null?d(\"WAWap\").wap(\"franking\",null,d(\"WAWap\").wap(\"franking_tag\",null,e.frankingTag)):null;F=null;c.participants!=null&&(F=d(\"WAWap\").wap(\"participants\",null,c.participants.map(function(a){return i(a)})));G=null;c.message!=null&&(G=i(c.message,!0));H=d(\"WAWap\").wap(\"message\",{device_fanout:w,edit:z,id:d(\"WAWap\").CUSTOM_STRING(a.externalId),participant:x,phash:y,to:d(\"WAWap\").JID(c.messageTo),type:d(\"WAWap\").CUSTOM_STRING(a.messageType.type)},A,E,F,G,C,D,B);T.next=33;return b(\"regeneratorRuntime\").awrap(d(\"WADeprecatedSendIq\").deprecatedSendStanzaAndReturnAck(H,{id:a.externalId,\"class\":\"message\",from:c.messageTo,participant:c.participant!=null?c.participant:null}));case 33:I=T.sent;J=j.parse(I);if(!J.success){T.next=46;break}K=J.success,L=K.errorCode,M=K.applicationError;if(!(L==null)){T.next=43;break}O=J.success,P=O.ts,Q=O.phash,R=O.count;S=e!=null?babelHelpers[\"extends\"]({},e,{reportingTag:(N=J.success.reportingMeta)==null?void 0:N.reportingTag}):null;return T.abrupt(\"return\",{type:\"success\",ts:P,phash:Q==null||Q===c.phash?{type:\"ok\"}:{type:\"mismatch\",local:c.phash,server:Q},count:R,reportingMeta:S});case 43:return T.abrupt(\"return\",{type:\"error\",errorCode:L,applicationError:M});case 44:T.next=47;break;case 46:return T.abrupt(\"return\",{type:\"parsing_error\"});case 47:case\"end\":return T.stop()}},null,this)}function i(a,b){b===void 0&&(b=!1);var c=d(\"WAWap\").wap(\"enc\",{count:a.count!=null?d(\"WAWap\").INT(a.count):d(\"WAWap\").DROP_ATTR,mediatype:a.mediaType!=null?d(\"WAWap\").CUSTOM_STRING(a.mediaType):d(\"WAWap\").DROP_ATTR,type:d(\"WAWap\").CUSTOM_STRING(a.type),v:d(\"WAWap\").CUSTOM_STRING(a.v)},a.ciphertext);if(b||a.encType===\"group\")return c;else return d(\"WAWap\").wap(\"to\",{jid:d(\"WAWap\").DEVICE_JID(a.to)},c)}var j=new(c(\"WADeprecatedWapParser\"))(\"sendMsgAck\",function(a){a.assertTag(\"ack\");return{count:a.maybeAttrInt(\"count\"),errorCode:a.maybeAttrInt(\"error\"),phash:a.maybeAttrString(\"phash\"),applicationError:a.maybeAttrInt(\"application_error\"),ts:a.attrTime(\"t\"),reportingMeta:d(\"WAParseFranking\").parseFrankingNode(a.maybeChild(\"franking\"))}});function k(a,b){if(a.messageType.type===\"reaction\")return{isContentTypeReaction:!0};if(a.messageType.type===\"text\")return{isContentTypeText:!0};a.messageType.type;if(b.mediaType!=null){b={contentTypeMediaOrMedianotifyMixinGroupArgs:{isContentTypeMedia:!0},encMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroupArgs:{encMediaType:{encMediatype:b.mediaType}}};return{contentTypeMediaSingle:b}}d(\"WALogger\").ERROR(h(),a.messageType.mediaType);return{isContentTypeText:!0}}function l(a,b){a=a!=null?{encCount:a}:null;b=b!=null?{messageRecipient:b}:null;return{encRetryMixinArgs:a,individualIndividualRetryToPeerMixinArgs:b}}function m(a){return{encType:a.type,encElementValue:a.ciphertext}}function n(a){return a.v===\"2\"?{isEncVersion2:!0}:{isEncVersion3:!0}}function o(a){return a.type===\"text\"&&a.isRevoked?{isRevoke:!0}:null}g.sendStanza=a;g.createEncWapNode=i}),98);\n__d(\"WASendMsgUtil\",[\"Promise\",\"WABridge\",\"WADevicesState\",\"WAEncGroupMsg\",\"WAEncUserMsg\",\"WAGlobals\",\"WAJids\",\"WAJobDefinitions\",\"WAJobs\",\"WALogger\",\"WAMsgType\",\"WAOdsEnums\",\"WAResultOrError\",\"WASendMsgRPC\",\"WAServerMediaType\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendMessage ack success is true, error: \",\", chatType:\",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendMessage ack success is false, chatType:\",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Got phash mismatch, local[\",\"] server[\",\"]\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg -- encryptChatMessage -- finish encrypt group message\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg -- encryptChatMessage -- group message\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error during send message post-processing. Err: \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"MAWSendMsg Failed to encrypt message for \",\" message\"]);o=function(){return a};return a}var p=10002;function a(a,c,e){var f,g,i,j,k,l,m,q,r,z,A,B,C;return b(\"regeneratorRuntime\").async(function(D){while(1)switch(D.prev=D.next){case 0:e===void 0&&(e=!1);w(a,c);m=e?3:2;q=function(b){return a.type===\"chat\"?t(a,c,m,{cryptoManager:b}):s(a,{cryptoManager:b},m)};D.next=6;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return q(a)},{operationType:\"encrypt\",flush:!0}));case 6:r=D.sent;z=r.success?r.value.type:r.error;x(z,c);if(!(r.success===!1)){D.next=13;break}c==null?void 0:c.endFail(\"fail_encrypt\");d(\"WALogger\").ERROR(o(),z);return D.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"encryption-error\"));case 13:A=r.value;c==null?void 0:c.addPoint(\"sending_stanza\",{\"int\":{ciphertextByteLength:(f=(g=(i=A.message)==null?void 0:(j=i.ciphertext)==null?void 0:j.length)!=null?g:(k=A.participants)==null?void 0:(l=k[0].ciphertext)==null?void 0:l.length)!=null?f:0}});D.next=17;return b(\"regeneratorRuntime\").awrap(d(\"WASendMsgRPC\").sendStanza(a,A,a.reportingMeta,e));case 17:B=D.sent;c==null?void 0:c.addPoint(\"ack_returned\");if(!(B.type===\"success\")){D.next=30;break}D.prev=20;D.next=23;return b(\"regeneratorRuntime\").awrap((h||(h=b(\"Promise\"))).all([u(a,A,B,c),v(A,c)]));case 23:return D.abrupt(\"return\",d(\"WAResultOrError\").makeResult({baseKey:(C=A.message)==null?void 0:C.baseKey,reportingMeta:null,serverTs:B.ts}));case 26:D.prev=26;D.t0=D[\"catch\"](20);d(\"WALogger\").ERROR(n(),D.t0.message);return D.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"unknown-error\"));case 30:B.type;y(B,z,c);if(!(B.applicationError===p)){D.next=35;break}D.next=35;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().handleReachabilityErrorAdminMsg(a.chat));case 35:return D.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"unknown-error\"));case 36:case\"end\":return D.stop()}},null,this,[[20,26]])}function q(a){return d(\"WADevicesState\").getDevicesState().reset([a]).then(function(){return d(\"WADevicesState\").getDevicesState().waitForUserDevices([a],\"SendMsgUtil_recoverUser\",!0)})}function r(a){return d(\"WAJids\").switchOnChatJidType(a,{interopUser:q,msgrUser:q,lidUser:q,phoneUser:q,group:function(a){return d(\"WAJobs\").getJobManager().waitUntilPersisted(d(\"WAJobDefinitions\").createStartJobInfo(\"queryGroups\",{type:\"array\",groups:[a]}))}})}function s(a,c,e){var f,g,h,i,j,k,l,m;return b(\"regeneratorRuntime\").async(function(n){while(1)switch(n.prev=n.next){case 0:f=a.chat,g=a.to,h=a.messageBytes,i=a.messageType,j=a.count,k=a.sessionInfo,l=a.identityKey;n.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAEncUserMsg\").encryptDeviceJidMessage(g,{type:\"message\",chat:f,messageBytes:h,messageType:i,applicationPayloadVersion:e},c,j,k,l));case 3:m=n.sent;return n.abrupt(\"return\",d(\"WAJids\").switchOnUserChatJidType(f,{user:function(b){return m!=null?d(\"WAResultOrError\").makeResult({type:\"direct_user\",messageTo:a.to,message:m,recipient:d(\"WAGlobals\").isPeerDevice(a.to)?b:null}):d(\"WAResultOrError\").makeError(\"direct_user\")},group:function(b){return m!=null?d(\"WAResultOrError\").makeResult({type:\"direct_group\",messageTo:b,participant:a.to,message:m}):d(\"WAResultOrError\").makeError(\"direct_group\")}}));case 5:case\"end\":return n.stop()}},null,this)}function t(a,c,e,f){var g=a.recipients,h=a.messageBytes,i=a.messageType,j=a.chat,k=a.icdcInfo;return d(\"WAJids\").switchOnUserChatJidType(j,{user:function(a){var c,j;return b(\"regeneratorRuntime\").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WAEncUserMsg\").encryptUserMsg(g,{type:\"message\",messageBytes:h,messageType:i,chat:a,applicationPayloadVersion:e},k,f));case 2:c=l.sent;j=c.participants;if(!(j!=null&&j.length>0)){l.next=6;break}return l.abrupt(\"return\",d(\"WAResultOrError\").makeResult({type:\"user\",messageTo:a,participants:j,phash:c.phash}));case 6:return l.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"user\"));case 7:case\"end\":return l.stop()}},null,this)},group:function(a){var e,j,k;return b(\"regeneratorRuntime\").async(function(n){while(1)switch(n.prev=n.next){case 0:d(\"WALogger\").LOG(m());n.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAEncGroupMsg\").encryptGroupMsg(a,g,h,i,f,c));case 3:e=n.sent;d(\"WALogger\").LOG(l());j=e.participants,k=e.encNode;if(!(j==null&&k==null)){n.next=8;break}return n.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"group\"));case 8:return n.abrupt(\"return\",d(\"WAResultOrError\").makeResult({type:\"group\",messageTo:a,participants:j,message:k,senderKeyDistributionInfo:e.senderKeyDistributionInfo,phash:e.phash}));case 9:case\"end\":return n.stop()}},null,this)}})}function c(a){var b=d(\"WAServerMediaType\").getMediaType(a),c=a===d(\"WAMsgType\").MSG_TYPE.REVOKED;if(b!=null)return{mediaType:b,type:\"media\"};else if(a===d(\"WAMsgType\").MSG_TYPE.SK_DISTRIBUTION)return{isInvisible:!0,isRevoked:!1,type:\"text\"};else return{isRevoked:c,type:\"text\"}}function u(a,c,e,f){var g,h;return b(\"regeneratorRuntime\").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(e.type!==\"success\")){i.next=2;break}return i.abrupt(\"return\");case 2:g=e.phash;if(!(g.type===\"mismatch\")){i.next=11;break}i.next=6;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().writeDebugMsg(a.chat,\"Outgoing msg \"+a.externalId+\" got a phash mismatch: local[\"+((h=g.local)!=null?h:\"undefined\")+\"] server[\"+g.server+\"]\"));case 6:d(\"WALogger\").LOG(k(),g.local,g.server);d(\"WABridge\").getBridge().fireAndForget(\"event\",\"odsBumpEntityKey\",{entity:d(\"WAOdsEnums\").Entity.PHASH_MISMATCH,key:c.type});i.next=10;return b(\"regeneratorRuntime\").awrap(r(a.chat));case 10:f==null?void 0:f.addPoint(\"participant_recovery_finished\");case 11:case\"end\":return i.stop()}},null,this)}function v(a,c){var e,f,g,h;return b(\"regeneratorRuntime\").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(a.senderKeyDistributionInfo!=null)){i.next=5;break}e=a.senderKeyDistributionInfo,f=e.group,g=e.senderKeyId,h=e.knowsSenderKey;i.next=4;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().markSenderKeyAsSent(f,g,h));case 4:c==null?void 0:c.addPoint(\"mark_sender_key_sent\");case 5:case\"end\":return i.stop()}},null,this)}function w(a,b){var c=0;a.type===\"chat\"&&(c=a.recipients.reduce(function(a,b){return a+b.devicesInfo.length},0));var d=a.messageType.type===\"text\"&&a.messageType.isRevoked;d=d?\"revoke\":a.messageType.type;b==null?void 0:b.addPoint(\"start_encrypt\",{string:{sentMessageType:d},\"int\":{numDevices:c},bool:{isInvisibleMsg:a.messageType.type===\"text\"&&a.messageType.isInvisible===!0}})}function x(a,b){b==null?void 0:b.addPoint(\"finish_encrypt\",{string:{chatType:a}})}function y(a,b,c){if(a.type===\"success\")return;a.type===\"parsing_error\"&&(d(\"WALogger\").ERROR(j(),b),c==null?void 0:c.addPoint(\"ack_parse_fail\"));var e=a.errorCode;a=a.applicationError;a===p&&(c==null?void 0:c.addPoint(\"reachability_error_code\"));d(\"WALogger\").ERROR(i(),e,b);e!=null&&(c==null?void 0:c.addPoint(\"ack_success_error_\"+e));c==null?void 0:c.endFail(\"failed\")}g.sendMessage=a;g.getMessageTypeFromMsg=c}),98);\n__d(\"WASentBytesCache\",[\"WAErr\",\"WAGlobals\",\"WAJids\",\"WAMsg\",\"WAScheduleAfterOfflineResume\",\"WATagsLogger\",\"WATimeUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"EB Upload Queue is already initialized\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"It fails to bulkLoadIdentities: \",\"\"]);i=function(){return a};return a}var j=d(\"WATagsLogger\").TAGS([\"SentBytesCache\"]),k=30*24*60*60,l=function(){function a(a){var b=this;this.$1=a;d(\"WAScheduleAfterOfflineResume\").scheduleAfterOfflineResume({code:function(){return b.$2()},combine:!0,id:\"pruneSentBytesCache\"})}var c=a.prototype;c.loadSentBytes=function(a){return this.$1.loadSentBytes(a)};c.getMsgsForRetry=function(a){var c,e,f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:c=Array.from(new Set(a.map(function(a){a=a.deviceJid;return d(\"WAJids\").extractUserJid(a)})));e=new Map();g.prev=2;g.next=5;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.bulkLoadIdentities(c)},{operationType:\"retries_load_identities\",flush:!1,afterInit:!0}));case 5:e=g.sent;g.next=11;break;case 8:g.prev=8,g.t0=g[\"catch\"](2),j.ERROR(i(),g.t0.toString());case 11:g.next=13;return b(\"regeneratorRuntime\").awrap(this.loadSentBytes(a.map(function(a){a=a.protocolMsgId;return d(\"WAMsg\").craftWAMsgIdString({author:a.author,chat:a.chat,externalId:a.externalId})})));case 13:f=g.sent;return g.abrupt(\"return\",a.map(function(a){var b=a.deviceJid,c=a.protocolMsgId,g=d(\"WAMsg\").craftWAMsgIdString({author:c.author,chat:c.chat,externalId:c.externalId});c=(c=e.get(d(\"WAJids\").extractUserJid(b)))==null?void 0:c.get(b);if(c==null)return{type:\"unauthorized\"};b=f.find(function(a){return a.waMsgId===g});if(b==null)return{type:\"missing\"};else if(!d(\"WATimeUtils\").happenedWithin(b.ts,k))return{type:\"unauthorized\"};return{frankingKey:b.frankingKey,frankingVersion:b.frankingVersion,messageBytes:b.messageBytes,messageType:b.messageType,protocolMsgId:b.protocolMsgId,retryCount:a.retryCount+1,type:\"unacked\"}}));case 15:case\"end\":return g.stop()}},null,this,[[2,8]])};c.saveSentBytes=function(a){return this.$1.saveSentBytes(a)};c.$2=function(){var a=this;return this.$1.loadExpired(d(\"WATimeUtils\").pastUnixTime(k)).then(function(b){return a.$1.deleteSentBytes(b)})};return a}(),m=null;function a(){if(m==null)throw c(\"WAErr\")(\"SentBytesCache is not initialized\");return m}function e(a){m!=null&&j.ERROR(h());a=new l(a);m=a;return a}g.SentBytesCache=l;g.sentBytesCache=a;g.initSentBytesCache=e}),98);\n__d(\"WACryptoCurve25519Dependencies\",[\"Promise\",\"WACryptoPrimitives\",\"WASignalKeys\",\"WASignalOther\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(){return(h||(h=b(\"Promise\"))).resolve().then(function(){return d(\"WASignalKeys\").makeKeyPair()})}function c(a,c){return(h||(h=b(\"Promise\"))).resolve().then(function(){return d(\"WACryptoPrimitives\").scalarMult(d(\"WASignalOther\").ensureSize(c,32),d(\"WASignalOther\").ensureSize(a,32)).buffer})}e={generateIdentityKeyPair:a,calculateAgreement:c};g.calculateAgreement=c;g.CURVE25519_SIGNAL_DEPENDENCIES=e}),98);\n__d(\"WACryptoSha256\",[\"Promise\",\"WABase64\",\"WACryptoDependencies\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){return(h||(h=b(\"Promise\"))).resolve(d(\"WACryptoDependencies\").getCrypto().subtle.digest({name:\"SHA-256\"},a))}function j(a){return(h||(h=b(\"Promise\"))).resolve(i(a).then(d(\"WABase64\").encodeB64))}function a(a){return j(k(a))}function k(a){var b=new ArrayBuffer(a.length),c=new Uint8Array(b);for(var d=0,e=a.length;d<e;d++)c[d]=a.charCodeAt(d);return b}g.sha256=i;g.sha256Base64=j;g.sha256Str=a}),98);\n__d(\"WATypedArraysConcat\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b,c){c===void 0&&(c=0);c=b.reduce(function(a,b){return a+b.length},c);var d=new a(c),e=0;b.forEach(function(a){d.set(a,e),e+=a.length});return d}f.concatTypedArrays=a}),66);\n__d(\"WACryptoAesCbc\",[\"Promise\",\"WABinary\",\"WACryptoDependencies\",\"WAErr\",\"WATypedArraysCast\",\"WATypedArraysConcat\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=16,j=1024,k=16,l=1024*1024,m=i*l;l=function(){function a(a,b,c,e){this.$4=null;this.$6=!1;this.$1=a;this.$2=b;this.$3=c;var f={name:\"AES-CBC\",iv:e};this.$5=d(\"WACryptoDependencies\").getCrypto().subtle.importKey(\"raw\",c,\"AES-CBC\",!1,[b]).then(function(a){return{algo:f,key:a}})}var b=a.prototype;b.append=function(a){var b=this;this.$7(\"append\");var c=this.$4;if(c){c.writeByteArray(a);if(c.size()>j){var e=c.size()%i;e=c.readByteArray(c.size()-e);c.size()||(this.$4=null)}else e=null}else if(a.length>j){c=a.length%i;!c?e=a:(this.$4=new(d(\"WABinary\").Binary)(a),e=this.$4.readByteArray(a.length-c))}else this.$4=new(d(\"WABinary\").Binary)(a),e=null;var f=e;f&&(this.$5=this.$5.then(function(a){var c=a.key;a=a.algo;if(b.$2===\"encrypt\")return d(\"WACryptoDependencies\").getCrypto().subtle.encrypt(a,c,f).then(function(a){b.$1.writeByteArray(new Uint8Array(a,0,a.byteLength-i));return new Uint8Array(a,a.byteLength-2*i,i)});else{var e=f.slice(-i);return d(\"WACryptoDependencies\").getCrypto().subtle.decrypt(a,c,f).then(function(a){b.$1.writeBuffer(a);return e})}}).then(function(a){var c={name:\"AES-CBC\",iv:a};return d(\"WACryptoDependencies\").getCrypto().subtle.importKey(\"raw\",b.$3,\"AES-CBC\",!1,[b.$2]).then(function(a){return{algo:c,key:a}})}));return this.$5.then(function(){})};b.finalize=function(a){var b=this;this.$7(\"finalize\");var c;if(this.$4){var e=this.$4;a&&e.writeByteArray(a);c=e.readByteArray();this.$4=null}else a&&(c=a);if(c){var f=c;return this.$5.then(function(a){var c=a.algo;a=a.key;if(b.$2===\"encrypt\")return d(\"WACryptoDependencies\").getCrypto().subtle.encrypt(c,a,f);else return d(\"WACryptoDependencies\").getCrypto().subtle.decrypt(c,a,f)}).then(function(a){b.$1.writeBuffer(a)})}else return this.$5.then(function(){})};b.$7=function(a){if(this.$6)throw c(\"WAErr\")(\"AesCbcStream.\"+a+\" called after finalize\")};return a}();function n(a){return{name:\"AES-CBC\",iv:d(\"WATypedArraysCast\").castTypedArrays(Uint8Array,a)}}function o(a){return d(\"WACryptoDependencies\").getCrypto().subtle.importKey(\"raw\",d(\"WATypedArraysCast\").castTypedArrays(Uint8Array,a),\"AES-CBC\",!1,[\"encrypt\"])}function p(a){if(a)return d(\"WATypedArraysCast\").castTypedArrays(Uint8Array,a);a=new Uint8Array(k);d(\"WACryptoDependencies\").getCrypto().getRandomValues(a);return a}function q(a){a=a.byteLength;var b=i-a%i;return Number.isNaN(b)?a:a+b}function r(a,c,e){var f=n(c);return(h||(h=b(\"Promise\"))).resolve(d(\"WACryptoDependencies\").getCrypto().subtle.importKey(\"raw\",d(\"WATypedArraysCast\").castTypedArrays(Uint8Array,a),\"AES-CBC\",!1,[\"decrypt\"])).then(function(a){return d(\"WACryptoDependencies\").getCrypto().subtle.decrypt(f,a,e)})}function a(a,c){return(h||(h=b(\"Promise\"))).resolve().then(function(){var b=c.slice(0,k),d=c.slice(k);return r(a,b,d)})}function e(a,c,e){return(h||(h=b(\"Promise\"))).resolve().then(function(){var f=p(e),g=n(f);return(h||(h=b(\"Promise\"))).resolve(o(a)).then(function(a){return d(\"WACryptoDependencies\").getCrypto().subtle.encrypt(g,a,c)}).then(function(a){return d(\"WATypedArraysConcat\").concatTypedArrays(Uint8Array,[f,new Uint8Array(a)]).buffer})})}function f(a,d,e,f){var g,h,j,k,l,n,r,t,u,v,w,x,y;return b(\"regeneratorRuntime\").async(function(z){while(1)switch(z.prev=z.next){case 0:f===void 0&&(f=m);if(!(f%i!==0)){z.next=3;break}throw c(\"WAErr\")(\"chunkSize must be a multiple of \"+i+\", \"+f+\" received\");case 3:z.next=5;return b(\"regeneratorRuntime\").awrap(o(a));case 5:g=z.sent,h=new Uint8Array(d),j=Math.ceil(h.byteLength\/f),k=p(e),l=new Uint8Array(q(h)+k.byteLength),l.set(k),(n=0,r=k);case 12:if(!(n<j)){z.next=26;break}u=n===j-1;v=n*f;t=h.subarray(v,v+f);z.next=18;return b(\"regeneratorRuntime\").awrap(s(u,t,r,g));case 18:w=z.sent,x=w.encryptedChunk,y=w.nextIv,l.set(x,k.byteLength+n*f),r=y;case 23:n++;z.next=12;break;case 26:return z.abrupt(\"return\",l.buffer);case 27:case\"end\":return z.stop()}},null,this)}function s(a,c,e,f){var g,h;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoDependencies\").getCrypto().subtle.encrypt(n(e),f,c).then(function(b){return a?new Uint8Array(b):new Uint8Array(b).subarray(0,-i)}));case 2:g=j.sent;h=g.slice(-i);return j.abrupt(\"return\",{encryptedChunk:g,nextIv:h});case 5:case\"end\":return j.stop()}},null,this)}g.AES_CBC_BLOCK_SIZE=i;g.AesCbcStream=l;g.importRawKey=o;g.getIv=p;g.aesCbcDecrypt=r;g.aesCbcDecryptSplit=a;g.aesCbcEncrypt=e;g.aesCbcEncryptWithChunking=f;g.aesCbcEncryptChunk=s}),98);\n__d(\"WAMemoizeCache\",[],(function(a,b,c,d,e,f){\"use strict\";var g=[];function a(){g.forEach(function(a){return a.clear()})}function h(){var a=new Map();g.push(a);return a}function b(a,b){var c;return function(){c||(c=h());var d=b.apply(void 0,arguments),e=c.get(d);e==null&&(e=a.apply(void 0,arguments),c.set(d,e));return e}}f.clearAllMemoizeCache=a;f.MemoizeCache=h;f.memoizeWithArgs=b}),66);\n__d(\"WAGetKeysForUpload\",[\"MAWLoggerUtils\",\"WAResultOrError\",\"WASignalKeys\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to deserialize prekey received from the db\"]);h=function(){return a};return a}var i=d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.PrekeyGenerateAndUpload,d(\"MAWLoggerUtils\").Tag.SignedPrekey]);function a(a,b){return a.storage.loadPreKeys(b).then(function(b){var c=b.preKeys;b=b.signedPreKey;var e=[];c.forEach(function(a){a=d(\"WASignalKeys\").deserializePreKey(a);a==null?i.ERROR(h()):e.push(a)});return d(\"WAResultOrError\").makeResult({regInfo:a.regInfo,keyType:d(\"WASignalKeys\").KEY_TYPE,preKeys:e,signedPreKey:b})})}g.getKeysForUpload=a}),98);\n__d(\"MAWComms\",[\"MAWCommsConfig\",\"MAWMockServerShell\",\"MAWODSProxy\",\"MAWQplProxy\",\"MAWServerRPC\",\"WAComms\",\"WAGzip\",\"WAInitAndGetAuthKeyPair\",\"WAOdsEnums\",\"WAResolvable\",\"WASendPresenceStatusProtocol\",\"WATagsLogger\",\"asyncToGeneratorRuntime\",\"promiseDone\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"openChatSocket retried\"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){var e=!1,f=new(d(\"WAResolvable\").Resolvable)();void d(\"MAWQplProxy\").measurePerfInQPL(c(\"qpl\")._(1056839232,\"112\"),\"wai_connection\",function(){return f.promise});a=(yield d(\"WAInitAndGetAuthKeyPair\").initAndGetAuthKeyPair(a));a=(yield d(\"MAWCommsConfig\").getCommsConfig({authKeyPair:a,handleConnectionChange:function(a){a===\"in_handshake\"?e===!1?(e=!0,d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(1056839232,\"112\"),\"wai_in_handshake\")):d(\"WATagsLogger\").TAGS([\"backend\"]).LOG(h()):a===\"connected\"?(void b.newConnection(),f.resolve(),d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.WA_CONNECTIVITY,key:\"success\"}),e=!1):a===\"disconnected\"&&(void b.connectionDropped(),d(\"MAWQplProxy\").sendQPLBoolAnnotationThroughBridge(c(\"qpl\")._(1056839232,\"112\"),\"didWAIConnectionDisconnect\",!0),e=!1,d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.WA_CONNECTIVITY,key:\"disconnected\"}))},handleOptimisticConnectionChange:function(a){a===\"connected\"?c(\"promiseDone\")(d(\"WASendPresenceStatusProtocol\").sendPresenceStatusProtocol({status:\"available\"})):a===\"disconnected\"&&c(\"promiseDone\")(d(\"WASendPresenceStatusProtocol\").sendPresenceStatusProtocol({status:\"unavailable\"}))}}));d(\"WAComms\").startComms(d(\"MAWServerRPC\").makeServerRPC().handleStanza,a,d(\"WAGzip\").gzipInflate,!d(\"MAWMockServerShell\").isMockServerMode);d(\"MAWMockServerShell\").isMockServerMode&&d(\"MAWMockServerShell\").getMockServer!=null&&(yield d(\"MAWMockServerShell\").getMockServer().waitForInit(),void b.newConnection(),f.resolve())});return i.apply(this,arguments)}g.startComms=a}),98);\n__d(\"MAWMediaPreviewDownloadManager\",[\"WAResolvable\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=1e4,i=[],j=new Map();function a(a){if(j.has(a))return;k();var b=new(d(\"WAResolvable\").Resolvable)();j.set(a,b);i.push(a)}function b(a){return j.get(a)}function c(a){j[\"delete\"](a)}function k(){if(i.length>=h){var a=i.shift();j[\"delete\"](a)}}function e(){i=[],j.clear()}g.markMediaPreviewAsDownloading=a;g.getMediaPreviewDownloadingResolvable=b;g.removeMediaPreviewDownloadingResolvable=c;g.clear=e}),98);\n__d(\"MAWHandleMediaPreviewBeforeDownloadApi\",[\"MAWMediaPreviewDownloadManager\",\"Promise\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=function(a){d(\"MAWMediaPreviewDownloadManager\").markMediaPreviewAsDownloading(a);return(h||(h=b(\"Promise\"))).resolve()};g.handleMediaPreviewBeforeDownload=a}),98);\n__d(\"WAMediaHkdfInfo\",[\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){switch(a){case\"document\":return\"WhatsApp Document Keys\";case\"image\":case\"sticker\":case\"xma-image\":return\"WhatsApp Image Keys\";case\"video\":case\"gif\":return\"WhatsApp Video Keys\";case\"audio\":case\"ptt\":return\"WhatsApp Audio Keys\";case\"md-app-state\":return\"WhatsApp App State Keys\";case\"md-msg-hist\":return\"WhatsApp History Keys\";default:throw c(\"WAErr\")(\"getMediaHkdfInfo: unexpected media type \"+a)}}function b(){return\"Messenger Preview Keys\"}g.getMediaHkdfInfo=a;g.getPreviewMediaHkdfInfo=b}),98);\n__d(\"WAMediaCrypto\",[\"Promise\",\"WABase64\",\"WABinary\",\"WACryptoAesCbc\",\"WACryptoDependencies\",\"WACryptoHkdf\",\"WACryptoHmac\",\"WACryptoSha256\",\"WACryptoUtils\",\"WACustomError\",\"WAErr\",\"WALogger\",\"WAMediaCryptoSidecar\",\"WAMediaHkdfInfo\",\"WAMediaUtils\",\"WAPREList\",\"WAPREMetrics\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"WAMediaCrypto::downloadAndDecrypt\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Processing scan \",\"\"]);j=function(){return a};return a}var k=d(\"WACustomError\").customError(\"HmacValidationError\",!1);function l(a,b){return d(\"WACryptoHkdf\").extractAndExpand(new Uint8Array(a),b,112).then(function(a){return{iv:new Uint8Array(a,0,16),cipherKey:new Uint8Array(a,16,32),hmacKey:new Uint8Array(a,48,32),refKey:new Uint8Array(a,80,32)}})}function m(a,b){b=d(\"WAMediaHkdfInfo\").getMediaHkdfInfo(b);return l(a,b)}function n(a){var b=d(\"WAMediaHkdfInfo\").getPreviewMediaHkdfInfo();return l(a,b)}function a(a){var c,d,e;return b(\"regeneratorRuntime\").async(function(f){while(1)switch(f.prev=f.next){case 0:c=new Map();f.next=3;return b(\"regeneratorRuntime\").awrap(n(a));case 3:d=f.sent;c.set(\"preview\",d);e=[\"document\",\"image\",\"video\",\"audio\",\"md-app-state\",\"md-msg-hist\"];f.next=8;return b(\"regeneratorRuntime\").awrap((h||(h=b(\"Promise\"))).all(e.map(function(b){return m(a,b).then(function(a){c.set(b,a)})})));case 8:return f.abrupt(\"return\",c);case 9:case\"end\":return f.stop()}},null,this)}function e(a){switch(a){case\"image\":case\"video\":return a;default:throw c(\"WAErr\")(\"Unsupported PreviewMediaType: \"+a)}}var o=16,p=16,q=10,r=64*1024;function s(a,c,e,f,g){var i,j,k,l,m,n,s,t,u,v,w,x,y,z,A;return b(\"regeneratorRuntime\").async(function(B){while(1)switch(B.prev=B.next){case 0:i=new(d(\"WABinary\").Binary)(),i.ensureCapacity(p+f.size+o+q),i.writeByteArray(c),j=new(d(\"WACryptoAesCbc\").AesCbcStream)(i,\"encrypt\",a,c),k=0,l=k+r;case 6:if(!(l<f.size)){B.next=17;break}m=f.slice(k,l);B.next=10;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaUtils\").blobToArrayBuffer(m));case 10:n=B.sent;B.next=13;return b(\"regeneratorRuntime\").awrap(j.append(new Uint8Array(n)));case 13:k=l;l+=r;B.next=6;break;case 17:B.next=19;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaUtils\").blobToArrayBuffer(f.slice(k)));case 19:s=B.sent;B.next=22;return b(\"regeneratorRuntime\").awrap(j.finalize(new Uint8Array(s)));case 22:t=i.peek(function(a){return a.readByteArray()});B.next=25;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoHmac\").encodeKeySha256(e));case 25:u=B.sent;B.next=28;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoHmac\").sign(u,t));case 28:v=B.sent;i.writeByteArray(new Uint8Array(v,0,q));w=i.readByteArray();x=w.subarray(p);B.next=34;return b(\"regeneratorRuntime\").awrap((h||(h=b(\"Promise\"))).all([d(\"WACryptoDependencies\").getCrypto().subtle.digest(\"SHA-256\",x),d(\"WAMediaCryptoSidecar\").shouldHaveStreamingSidecar(g)?d(\"WAMediaCryptoSidecar\").calculateStreamingSidecar(u,w):void 0]));case 34:y=B.sent;z=y[0];A=y[1];return B.abrupt(\"return\",{ciphertext:x,ciphertextHash:z,sidecar:A,ivCiphertext:t});case 38:case\"end\":return B.stop()}},null,this)}function f(a,c,e){var f,g;return b(\"regeneratorRuntime\").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoHmac\").encodeKeySha256(a));case 2:f=h.sent;g=d(\"WABinary\").Binary.build(c,e).readByteArray();return h.abrupt(\"return\",d(\"WACryptoHmac\").sign(f,g));case 5:case\"end\":return h.stop()}},null,this)}function t(a,c,e,f,g){var h,i,j,l,m;return b(\"regeneratorRuntime\").async(function(n){while(1)switch(n.prev=n.next){case 0:if(10<=g.length&&g.length<=32){n.next=2;break}throw new k(\"Bad hmac size \"+g.length);case 2:h=d(\"WABinary\").Binary.build(c,e).readByteArray();n.next=5;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoHmac\").hmacSha256(f,h).then(function(a){return new Uint8Array(a)}));case 5:i=n.sent;j=i.slice(0,g.length);if(w(j,g)){n.next=9;break}throw new k(\"hmacAndDecrypt hmac mismatch\");case 9:n.next=11;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoAesCbc\").aesCbcDecrypt(a,c,e));case 11:l=n.sent;n.next=14;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoDependencies\").getCrypto().subtle.digest(\"SHA-256\",l));case 14:m=n.sent;return n.abrupt(\"return\",{plaintextHash:d(\"WABase64\").encodeB64UrlSafe(new Uint8Array(m)),plaintext:l});case 16:case\"end\":return n.stop()}},null,this)}function u(a,b,c,e,f){if(!(10<=f.length&&f.length<=32))throw new k(\"Bad hmac size \"+f.length);var g=c.subarray(0,c.byteLength-o);g=d(\"WABinary\").Binary.build(b,g).readByteArray();e=d(\"WACryptoHmac\").hmacSha256(e,g).then(function(a){return new Uint8Array(a)});return e.then(function(a){a=a.slice(0,f.length);if(!d(\"WACryptoUtils\").uint8ArraysEqual(a,f))throw new k(\"hmacAndDecrypt hmac mismatch\")}).then(function(){return d(\"WACryptoAesCbc\").aesCbcDecrypt(a,b,c)}).then(function(a){return new Uint8Array(a)}).then(function(a){var b=a.subarray(0,a.byteLength-2);return d(\"WACryptoSha256\").sha256(b).then(function(a){return{plaintext:b,plaintextHash:d(\"WABase64\").encodeB64UrlSafe(new Uint8Array(a))}})})}function v(a,c,e,f,g,h){var i,k,l,m,n,p,q,r,t,v,w,x,y,z,A,B,C,D;return b(\"regeneratorRuntime\").async(function(E){while(1)switch(E.prev=E.next){case 0:i=new(d(\"WABinary\").Binary)();k=[];for(l=0;l<g;l++)k.push(new Uint8Array(h.sidecar.slice(l*10,(l+1)*10)));m=0;n=c;p=0;q=0;case 7:if(!(q<g)){E.next=30;break}d(\"WALogger\").DEV(j(),q);r=h.alignedScanLengths[q];t=m+r;v=e.slice(m,t);w=new Uint8Array(v.slice(r-o,r));E.next=15;return b(\"regeneratorRuntime\").awrap(s(a,w,f,new Blob([2,2]),\"image\"));case 15:x=E.sent;y=new(d(\"WABinary\").Binary)(v);y.writeByteArray(x.ciphertext.slice(0,o));z=y.readByteArray();E.next=21;return b(\"regeneratorRuntime\").awrap(u(a,n,z,f,k[q]));case 21:A=E.sent,B=A.plaintext,i.write(B),m+=r,n=w,p+=h.scanLengths[q];case 27:q++;E.next=7;break;case 30:C=i.readBuffer(p);E.next=33;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoSha256\").sha256(C));case 33:D=E.sent;return E.abrupt(\"return\",{plaintextHash:d(\"WABase64\").encodeB64UrlSafe(new Uint8Array(D)),plaintext:C});case 35:case\"end\":return E.stop()}},null,this)}function w(a,b){if(a.length!==b.length)return!1;var c=1,d=a.length;for(var e=0;e<d;e++)c&=a[e]===b[e]?1:0;return c!==0}function x(a,e,f,g,j,k,l){var m,n,o,p,q,r,s,u,v,w,x;return b(\"regeneratorRuntime\").async(function(y){while(1)switch(y.prev=y.next){case 0:d(\"WALogger\").DEV(i());m=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.DOWNLOAD_AND_DECRYPT);y.prev=2;m.addPoint(\"download_start\");y.next=6;return b(\"regeneratorRuntime\").awrap(fetch(a));case 6:n=y.sent;m.addPoint(\"download_end\");y.next=15;break;case 10:y.prev=10;y.t0=y[\"catch\"](2);m.addPoint(\"download_end\");m.endFail(\"download_error\");throw c(\"WAErr\")(\"download_error\");case 15:if(!(n.status!==200)){y.next=18;break}m.endFail(\"http_status_\"+n.status);throw c(\"WAErr\")(\"http_status=\"+n.status);case 18:m.endSuccess();y.next=21;return b(\"regeneratorRuntime\").awrap(n.arrayBuffer());case 21:o=y.sent;if(!(o.byteLength<j+k)){y.next=25;break}m.endFail(\"bad_ciphertext_size\");throw c(\"WAErr\")(\"bad_ciphertext_size\");case 25:p=o.byteLength-k;q=new Uint8Array(o,p);r=q.slice(0,k);s=new Uint8Array(o,0,p);y.next=31;return b(\"regeneratorRuntime\").awrap(t(f,e,s,g,q));case 31:u=y.sent;v=u.plaintext;w=u.plaintextHash;l(new Uint8Array(v));x=new Uint8Array(d(\"WABase64\").decodeB64UrlSafe(w));return y.abrupt(\"return\",(h||(h=b(\"Promise\"))).resolve({tail:r,plaintextHash:x,hmac:q}));case 37:case\"end\":return y.stop()}},null,this,[[2,10]])}g.HmacValidationError=k;g.computeMediaKeys=m;g.computeMediaKeysForPreview=n;g.deprecated_getAllCommonComputedMediaKeys=a;g.convertServerMediaTypeToPreviewMediaType=e;g.IV_LENGTH=p;g.HMAC_LENGTH=q;g.encryptAndHmac=s;g.hmacCiphertext=f;g.hmacAndDecrypt=t;g.decryptPartialChunks=v;g.downloadAndDecrypt=x}),98);\n__d(\"WAAlignChunkLengthsToMultipleOfAesBlockSize\",[],(function(a,b,c,d,e,f){\"use strict\";function g(a){return parseInt((a+15)\/16,10)*16}function a(a,b){var c=[],d=0,e=0,f=0;for(var h=0;h<a.length;++h){d+=a[h];if(h===a.length-1&&b!=null){d>e?c.push(b-e):(c.pop(),c.push(b-f));break}else if(d>e){var i=g(d-e);f=e;c.push(i);e+=i}}return c}f.alignChunkSizeToMultipleAesBlockSize=g;f.alignChunkLengthsToMultipleOfAesBlockSize=a}),66);\n__d(\"WAProgressiveJpegAlignScanLengths\",[\"WAAlignChunkLengthsToMultipleOfAesBlockSize\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){return d(\"WAAlignChunkLengthsToMultipleOfAesBlockSize\").alignChunkLengthsToMultipleOfAesBlockSize(a.map(function(a){return a}),b).map(function(a){return a})}function b(a){return a}g.progressiveJpegAlignChunkLengthsToMultipleOfAesBlockSize=a;g.toProgressiveJpegAlignedScanLength=b}),98);\n__d(\"WAProgressiveJpegGetPJpegDetails\",[\"WAMediaCrypto\",\"WAProgressiveJpegAlignScanLengths\",\"WAProgressiveJpegGetScanLengths\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,c,e){var f,g,i,j;return b(\"regeneratorRuntime\").async(function(k){while(1)switch(k.prev=k.next){case 0:f=c.byteLength-d(\"WAMediaCrypto\").IV_LENGTH;g=d(\"WAProgressiveJpegGetScanLengths\").getProgressiveJpegScanLengths(a);i=d(\"WAProgressiveJpegAlignScanLengths\").progressiveJpegAlignChunkLengthsToMultipleOfAesBlockSize(g,f);k.next=5;return b(\"regeneratorRuntime\").awrap(h(i,c,e));case 5:j=k.sent;return k.abrupt(\"return\",{scanLengths:g,sidecar:j});case 7:case\"end\":return k.stop()}},null,this)}function h(a,c,e){var f,g,h,i,j,k,l,m,n;return b(\"regeneratorRuntime\").async(function(o){while(1)switch(o.prev=o.next){case 0:f=new Uint8Array(a.length*10),g=0,h=0,i=c.slice(0,16),j=c.slice(16),k=0;case 6:if(!(k<a.length)){o.next=19;break}l=a[k];h=g+l;m=j.subarray(g,h);o.next=12;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaCrypto\").hmacCiphertext(e,i,m));case 12:n=o.sent.slice(0,10),f.set(new Uint8Array(n),k*10),i=m.slice(m.length-16,m.length),g=h;case 16:k++;o.next=6;break;case 19:return o.abrupt(\"return\",f.buffer);case 20:case\"end\":return o.stop()}},null,this)}function i(a){if(a.scanLengths.length===0)return!1;return a.scanLengths.length*10!==a.sidecar.byteLength?!1:!0}function c(a,b){var c=0;if(b===0)return 0;for(var d=0;d<b;d++){var e=a[d];e!=null&&(c+=e)}return c}function e(a){if(a.progressiveJpegDetails==null)return null;return!i(a.progressiveJpegDetails)?null:{scanLengths:a.progressiveJpegDetails.scanLengths,sidecar:a.progressiveJpegDetails.sidecar}}g.getProgressiveJpegDetails=a;g.isValidProgressiveJpegDetails=i;g.getTotalByteSizeForScan=c;g.maybeGetProgressiveJpegDetailsUsingMediaEntry=e}),98);\n__d(\"MAWDownloadDownloadablePreview\",[\"MAWDownloadMedia\",\"MAWExternalId\",\"MAWGlobals\",\"MAWHandleMediaPreviewBeforeDownloadApi\",\"MAWLoggerUtils\",\"WAJids\",\"WAMediaCrypto\",\"WAPREList\",\"WAPREMetrics\",\"WAProgressiveJpegGetPJpegDetails\",\"WebStorageEstimator\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"finished downloading\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"failed to download media. Reason: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"media: mediaPreview - unsupported preview media type \",\" - \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"media: mediaPreview - mediaEntryData \",\" is incomplete for media preview\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"DownloadableThumbnail exists. Attempting to download.\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"No downloadableThumbnail. Skipping...\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"thumbnail_available: \",\"\"]);n=function(){return a};return a}var o=d(\"MAWDownloadMedia\").mediaDownloadLogger.TAGS([d(\"MAWLoggerUtils\").Tag.MediaPreview]);function a(a,b,c,d){return p.apply(this,arguments)}function p(){p=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c,e){var f=e.downloadableThumbnail,g=f==null?void 0:f.directPath,p=g!=null;o.LOG(n(),p);if(f==null||g==null){o.LOG(m());return null}o.LOG(l());p=f.fileEncSha256;var q=f.fileSha256,r=f.mediaKey;f=f.objectId;if(g==null||p==null||q==null||r==null){o.ERROR(k(),e);return}var s=d(\"WAJids\").switchOnMsgrChatJidType(a.chat,{group:function(){return\"group\"},user:function(){return\"user\"}}),t=d(\"WAProgressiveJpegGetPJpegDetails\").maybeGetProgressiveJpegDetailsUsingMediaEntry(e),u=(yield d(\"WebStorageEstimator\").estimateStorage());t=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.MEDIA_DOWNLOAD,{bool:{duplicateDirectPath:g===e.directPath,isMediaFallbackToAlternativeHmacSaltsEnabled:d(\"MAWGlobals\").getConfig().isMediaFallbackToAlternativeHmacSaltsEnabled(),isPreview:!0,isProgressiveJpeg:t!=null},\"int\":{storageQuota:(u==null?void 0:u.quota)||0,storageUsage:(u==null?void 0:u.usage)||0},string:{chat_type:s,downloadEntry:\"downloadable-preview\",e2eePlatform:d(\"MAWExternalId\").getPlatform(a.externalId),jid:a.chat,mediaType:e.serverMediaType}});var v;try{v=d(\"WAMediaCrypto\").convertServerMediaTypeToPreviewMediaType(c)}catch(a){o.ERROR(j(),c,a);t.endFail(\"preview-unsupported-type\");return}yield d(\"MAWHandleMediaPreviewBeforeDownloadApi\").handleMediaPreviewBeforeDownload(b);u=(yield d(\"MAWDownloadMedia\").downloadMediaImpl(a,b,t,{messageType:v,type:\"preview\"},g,p,q,r,f,null,e));if(u.success===!1)o.ERROR(i(),u.error),t.endFail(u.error);else{o.LOG(h());t.endSuccess();return u.value}});return p.apply(this,arguments)}g.maybeDownloadDownloadablePreview=a}),98);\n__d(\"MAWGetMediaPlaintextApi\",[\"MAWIndexedDb\",\"MAWMediaUtils\",\"MAWOptimisticUploadManager\",\"MAWTransactionMode\",\"Promise\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Media blob does not exist for the given hashedPlaintextHash\"]);i=function(){return a};return a}a=function(a){var c=d(\"MAWOptimisticUploadManager\").getOptimisticUploadManager();c=c.get(a);if(c==null)return j(a);else return(h||(h=b(\"Promise\"))).resolve(c.file)};function j(a){return d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:d(\"MAWTransactionMode\").READONLY},\"getMediaPlaintextFromDb\",function(a){return function(b){b=d(\"MAWMediaUtils\").genHMACPlaintextHash(b);return a.chunk.where(\"hashedPlaintextHash\").equals(b).first().then(function(a){if(!a){d(\"WALogger\").WARN(i());return null}return new Blob([a.blobData],{type:a.mimetype})})}})(a)}g.getMediaPlaintext=a}),98);\n__d(\"WADecryptMedia\",[\"WAGlobals\",\"WAMediaCrypto\",\"WAResultOrError\",\"WATagsLogger\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Download Plaintext Success\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Download Plaintext Error \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Using default plaintext verifier\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" is not a working hmac salt.\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Found a working hmac salt using \",\".\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Trying \",\" as an alternative hmac salt.\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Encountered enc-hash-mismatch - looking for a potential working hmac salt\"]);n=function(){return a};return a}var o=d(\"WATagsLogger\").TAGS([\"WADecryptMedia\"]);function p(a,c,e,f){var g,h,i,j,p,q,r,s,t,u,v;return b(\"regeneratorRuntime\").async(function(w){while(1)switch(w.prev=w.next){case 0:o.WARN(n());g=e.type===\"preview\"?\"preview\":e.mediaType;w.next=4;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaCrypto\").deprecated_getAllCommonComputedMediaKeys(f));case 4:h=w.sent,(j=h,p=Array.isArray(j),q=0,j=p?j:j[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 6:if(!p){w.next=12;break}if(!(q>=j.length)){w.next=9;break}return w.abrupt(\"break\",39);case 9:r=j[q++];w.next=16;break;case 12:q=j.next();if(!q.done){w.next=15;break}return w.abrupt(\"break\",39);case 15:r=q.value;case 16:s=r;t=s[0];u=s[1];w.prev=19;if(!(t===g)){w.next=22;break}return w.abrupt(\"continue\",37);case 22:o.LOG(m(),t);w.t0=d(\"WAResultOrError\").makeResult;w.next=26;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaCrypto\").hmacAndDecrypt(u.cipherKey,u.iv,a,u.hmacKey,c));case 26:w.t1=w.sent;v=w.t0(w.t1);i={hmacAndDecryptResult:v,alternativeHmacSaltUsed:t};o.LOG(l(),t);return w.abrupt(\"return\",i);case 33:w.prev=33;w.t2=w[\"catch\"](19);o.LOG(k(),t);return w.abrupt(\"continue\",37);case 37:w.next=6;break;case 39:return w.abrupt(\"return\",{hmacAndDecryptResult:d(\"WAResultOrError\").makeError(\"enc-hash-mismatch\")});case 40:case\"end\":return w.stop()}},null,this,[[19,33]])}function a(a){var c,e,f,g,k,l,m,n,q,r,s,t,u,v;return b(\"regeneratorRuntime\").async(function(w){while(1)switch(w.prev=w.next){case 0:c=a.ciphertextHmac,e=a.mediaKey,f=a.mediaTypeDetails,g=a.plaintextHash;o.LOG(j());k=c.byteLength-d(\"WAMediaCrypto\").HMAC_LENGTH;l=new Uint8Array(c,k);m=new Uint8Array(c,0,k);f.type===\"preview\"?n=d(\"WAMediaCrypto\").computeMediaKeysForPreview(e):n=d(\"WAMediaCrypto\").computeMediaKeys(e,f.mediaType);r=null;w.next=9;return b(\"regeneratorRuntime\").awrap(n.then(function(a){var b=a.iv,c=a.cipherKey;a=a.hmacKey;return d(\"WAMediaCrypto\").hmacAndDecrypt(c,b,m,a,l)}).then(d(\"WAResultOrError\").makeResult)[\"catch\"](function(a){o.ERROR(i(),a);if(a instanceof d(\"WAMediaCrypto\").HmacValidationError)return d(\"WAResultOrError\").makeError(\"enc-hash-mismatch\");else return d(\"WAResultOrError\").makeError(\"decryption-error\")}));case 9:q=w.sent;if(!(d(\"WAGlobals\").getConfig().isMediaFallbackToAlternativeHmacSaltsEnabled()===!0&&q.success===!1&&q.error===\"enc-hash-mismatch\")){w.next=16;break}w.next=13;return b(\"regeneratorRuntime\").awrap(p(m,l,f,e));case 13:s=w.sent,q=s.hmacAndDecryptResult,r=s.alternativeHmacSaltUsed;case 16:if(q.success){w.next=18;break}return w.abrupt(\"return\",q);case 18:t=q.value,u=t.plaintext,v=t.plaintextHash;if(!(g!==v)){w.next=21;break}return w.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"hash-mismatch\"));case 21:o.LOG(h());return w.abrupt(\"return\",d(\"WAResultOrError\").makeResult({plaintext:u,alternativeHmacSaltUsed:r}));case 23:case\"end\":return w.stop()}},null,this)}g.decryptMedia=a}),98);\n__d(\"WADecimalStringMod\",[\"WAErr\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is not a valid decimal string']);i=function(){return a};return a}function a(a,b){if(!\/^\\d+$\/.test(a)){d(\"WALogger\").ERROR(i(),a);throw c(\"WAErr\")(\"decimalStringMod is given an invalid decimal string\")}var e=a.length;if(e<16||e===16&&a<=\"9007199254740991\")return Number(a)%b;if(e>20||e===20&&a>\"18446744073709551615\"){d(\"WALogger\").ERROR(h(),a);throw c(\"WAErr\")(\"decimalStringMod is given value over 64 bits\")}e=0;for(var f=0;f<a.length;f++){var g=Number(a[f]);e=(e*10+g)%b}return e}g.decimalStringMod=a}),98);\n__d(\"WACreateGetVcaEnabledBucket\",[\"WAArrayBufferUtils\",\"WADecimalStringMod\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"mediaRouteSelection: can't get fbId from mediaDirectPath\"]);h=function(){return a};return a}function a(a,b){return function(){return b==null?null:d(\"WAArrayBufferUtils\").arrayBufferMod(a,b)+100}}function b(a,b){return function(){if(b==null)return null;var c=a.split(\"\/\");c=c[c.length-1];c=c.split(\"_\")[1];if(!\/^\\d+$\/.test(c))return null;if(c==null){d(\"WALogger\").ERROR(h());return null}else return d(\"WADecimalStringMod\").decimalStringMod(c,b)+100}}g.createGetVcaEnabledBucket=a;g.msgrCreateGetVcaEnabledBucket=b}),98);\n__d(\"WAExtractNcHotTimestamp\",[\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){if(a==null)return null;a=h(a);if(a.has(\"_nc_hot\")){a=parseInt(a.get(\"_nc_hot\"),10);return Number.isInteger(a)?d(\"WATimeUtils\").castToUnixTime(a):null}else return null}function h(a){a=a.split(\"?\");return new URLSearchParams(a.length===2?a[1]:\"\")}g.extractNcHotTimestamp=a}),98);\n__d(\"WAMediaConnParser\",[\"WADeprecatedWapParser\",\"WAServerMediaType\"],(function(a,b,c,d,e,f,g){\"use strict\";a=new(c(\"WADeprecatedWapParser\"))(\"mediaConnParser\",function(a){a=a.child(\"media_conn\");var b=j(a);return{hosts:b,authToken:a.attrString(\"auth\"),authTokenExpiryTs:a.attrFutureTime(\"auth_ttl\"),routesExpiryTs:a.attrFutureTime(\"ttl\"),maxBuckets:a.attrInt(\"max_buckets\"),maxManualRetry:(b=a.maybeAttrInt(\"max_manual_retry\",0,4))!=null?b:3,maxAutoDownloadRetry:(b=a.maybeAttrInt(\"max_auto_download_retry\",0,4))!=null?b:3}});function h(a){var b;return!a.hasAttr(\"fallback_hostname\")?void 0:{domain:a.attrString(\"fallback_hostname\"),\"class\":a.maybeAttrString(\"fallback_class\"),ip4:(b=a.maybeAttrString(\"fallback_ip4\"))!=null?b:void 0,ip6:(b=a.maybeAttrString(\"fallback_ip6\"))!=null?b:void 0}}function i(a){var b;return{domain:a.attrString(\"hostname\"),fallback:h(a),uploadable:k(a,\"upload\"),downloadable:k(a,\"download\"),isFallback:a.maybeAttrString(\"type\")===\"fallback\",downloadBuckets:(b=(b=a.maybeChild(\"download_buckets\"))==null?void 0:b.mapChildren(function(a){return parseInt(a.tag(),10)}))!=null?b:[],\"class\":a.maybeAttrString(\"class\"),ip4:(b=a.maybeAttrString(\"ip4\"))!=null?b:void 0,ip6:(b=a.maybeAttrString(\"ip6\"))!=null?b:void 0}}function j(a){return a.mapChildrenWithTag(\"host\",i)}function k(a,b){if(a.hasChild(b))return a.child(b).mapChildren(function(a){a=a.tag();return d(\"WAServerMediaType\").castToServerMediaType(a)}).filter(Boolean);else return d(\"WAServerMediaType\").SERVER_MEDIA}g.mediaConnParser=a}),98);\n__d(\"WAGatherMediaInfo\",[\"WADeprecatedSendIq\",\"WAErrors\",\"WALogger\",\"WAMediaConnParser\",\"WAPromiseManagement\",\"WAPromiseRetryLoop\",\"WAResultOrError\",\"WAWap\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"gatherMediaInfo error \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"gatherMediaInfo got \",\" hosts\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"gatherMediaInfo got client error: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"gatherMediaInfo got \",\" seconds backoff\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"gatherMediaInfo failure \",\"\"]);l=function(){return a};return a}var m=507;b=d(\"WAPromiseManagement\").cacheWhilePending(function(){return\"gatherMediaInfo\"},a);function a(){var a=new(d(\"WAPromiseRetryLoop\").PromiseRetryLoop)({name:\"gatherMediaInfo\",timer:{jitter:.25,max:987e3,algo:{type:\"fibonacci\",first:6e3,second:12e3},relativeDelay:!0},code:o});a.start();return a.promise()}var n=60;function o(a){var b;b=(b=d(\"WAWap\")).wap(\"iq\",{to:b.S_WHATSAPP_NET,xmlns:\"w:m\",type:\"set\",id:b.generateId()},b.wap(\"media_conn\",null));return d(\"WADeprecatedSendIq\").deprecatedSendIqIfConnectedWithin(b,d(\"WAMediaConnParser\").mediaConnParser,n).then(function(b){if(!b.success){d(\"WALogger\").LOG(l(),b);if(b.errorCode===m){var c=b.errorBackoff;d(\"WALogger\").LOG(k(),c);a(d(\"WAResultOrError\").makeError({type:\"backoff\",backoffMs:c*1e3}))}else b.errorCode<500&&(d(\"WALogger\").LOG(j(),b.errorCode),a(d(\"WAResultOrError\").makeError({type:\"client-error\",code:b.errorCode,text:b.errorText})))}else d(\"WALogger\").LOG(i(),b.result.hosts.length),a(d(\"WAResultOrError\").makeResult(b.result))})[\"catch\"](function(b){b instanceof d(\"WAErrors\").Disconnected?a(d(\"WAResultOrError\").makeError(\"disconnected\")):d(\"WALogger\").ERROR(h(),b)})}g.gatherMediaInfo=b}),98);\n__d(\"WAMediaRouteSelection\",[\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=null,c=null,e=null,f=a.hosts,g=a.operation,h=a.mediaType;if(a.operation===\"download\"){var i=a.catHotTimespan,j=a.ncHot;a=a.getVcaEnabledBucket;var k=new Map();f.forEach(function(a){a.downloadBuckets.forEach(function(b){k.set(b,a)})});var l=k.get(0);i>0&&j!=null&&d(\"WATimeUtils\").happenedWithin(d(\"WATimeUtils\").castToUnixTime(j),i)?b=1:a&&(b=a());j=null;b!=null&&(j=k.get(b));((i=j)==null?void 0:i.downloadable.includes(h))?c=j:(l==null?void 0:l.downloadable.includes(h))&&(c=l)}for(a=0;a<f.length;a++){i=f[a];g===\"upload\"&&i.uploadable.includes(h)?c==null?c=i:i.isFallback&&e==null&&(e=i):g===\"download\"&&i.downloadable.includes(h)&&(c==null?c=i:i.isFallback&&e==null&&(e=i));if(c!=null&&e!=null)break}return{selectedHost:c,fallbackHost:e,bucket:b}}g.mediaRouteSelection=a}),98);\n__d(\"WAGetMediaRoute\",[\"$InternalEnum\",\"Promise\",\"WACreateGetVcaEnabledBucket\",\"WAExtractNcHotTimestamp\",\"WAGatherMediaInfo\",\"WAMediaRouteSelection\",\"WAPromiseManagement\",\"WAResultOrError\",\"WATagsLogger\",\"WATimeUtils\",\"WAWorkerGlobalScope\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error occurred on gather after backoff expiry: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Can not get mediaAccess: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"mediaAccess has gone, gather a new one\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"mediaAccess has gone, but we are still locked by backoff\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error occurred during authTTL automatic refresh: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"AuthTTL approaching expiry, refreshing MediaAccess routes\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error: no media host\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to get mediaAccess: \",\"\"]);p=function(){return a};return a}var q=d(\"WATagsLogger\").TAGS([\"GetMediaRoute\"]),r=!0,s=86400,t=b(\"$InternalEnum\")({Fresh:\"fresh\",Cached:\"cached\",Stale:\"stale\"}),u=null,v=!1,w=null;function a(a,c){var e,f,g,h,i,j,k,l,m;return b(\"regeneratorRuntime\").async(function(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return b(\"regeneratorRuntime\").awrap(A());case 2:e=n.sent;if(e.success){n.next=7;break}q.ERROR(p(),e.error);c==null?void 0:c.addPoint(\"get_media_access_failed\",{string:{mediaAccessStatus:e.error}});return n.abrupt(\"return\",e);case 7:c==null?void 0:c.addAnnotations({string:{mediaAccessStatus:e.value.state}});f=e.value.mediaAccess,g=f.authToken,h=f.hosts,i=f.maxBuckets;j=a.operation===\"upload\"?d(\"WAMediaRouteSelection\").mediaRouteSelection({operation:\"upload\",mediaType:a.serverMediaType,hosts:h}):d(\"WAMediaRouteSelection\").mediaRouteSelection({operation:\"download\",mediaType:a.serverMediaType,hosts:h,catHotTimespan:s,ncHot:d(\"WAExtractNcHotTimestamp\").extractNcHotTimestamp(a.directPath),getVcaEnabledBucket:r?d(\"WACreateGetVcaEnabledBucket\").msgrCreateGetVcaEnabledBucket(a.directPath,i):void 0}),k=j.selectedHost,l=j.fallbackHost,m=j.bucket;if(!(k==null)){n.next=13;break}q.ERROR(o());return n.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"no-host\"));case 13:return n.abrupt(\"return\",d(\"WAResultOrError\").makeResult({authToken:g,selectedHost:k,fallbackHost:l,bucket:m}));case 14:case\"end\":return n.stop()}},null,this)}function x(){var a=w;a!=null&&(d(\"WAWorkerGlobalScope\").workerGlobalScope.clearTimeout(a),w=null)}function y(a){x();var b=Math.max(a.authTokenExpiryTs-d(\"WATimeUtils\").unixTime(),0);if(b<=5*60)return;var c=d(\"WATimeUtils\").pastUnixTime(5*60,a.authTokenExpiryTs);b=d(\"WATimeUtils\").pastUnixTime(Math.floor(b*.2),a.authTokenExpiryTs);a=c<b?c:b;c=d(\"WATimeUtils\").cappedMillisecondsUntil(a);b=Math.floor(Math.random()*d(\"WATimeUtils\").MINUTE_MILLISECONDS);a=d(\"WAWorkerGlobalScope\").workerGlobalScope.setTimeout(function(){q.LOG(n()),z()[\"catch\"](function(a){q.ERROR(m(),a)})},c+b);w=a}var z=d(\"WAPromiseManagement\").cacheWhilePending(function(){return\"all\"},function(){var a,c,e;return b(\"regeneratorRuntime\").async(function(f){while(1)switch(f.prev=f.next){case 0:if(!v){f.next=3;break}q.LOG(l());return f.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"backoff\"));case 3:q.LOG(k());x();f.next=7;return b(\"regeneratorRuntime\").awrap(d(\"WAGatherMediaInfo\").gatherMediaInfo());case 7:a=f.sent;if(!a.success){f.next=14;break}u=a.value;y(a.value);return f.abrupt(\"return\",d(\"WAResultOrError\").makeResult({mediaAccess:a.value,state:t.Fresh}));case 14:c=a.error;e=c===\"disconnected\"?\"disconnected\":c.type;q.WARN(j(),e);if(!(c===\"disconnected\"||c.type===\"client-error\")){f.next=21;break}return f.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"disconnected\"));case 21:c.type;v=!0;d(\"WAWorkerGlobalScope\").workerGlobalScope.setTimeout(function(){v=!1,z()[\"catch\"](function(a){q.ERROR(i(),a)})},c.backoffMs);return f.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"backoff\"));case 25:case\"end\":return f.stop()}},null,this)}),A=function(){var a=u;if(a==null)return z();if(d(\"WATimeUtils\").isInFuture(a.routesExpiryTs))return(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeResult({mediaAccess:a,state:t.Cached}));var c=z();return d(\"WATimeUtils\").isInFuture(a.authTokenExpiryTs)?(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeResult({mediaAccess:a,state:t.Stale})):c};function c(){u=null,v=!1,x()}g.getMediaRoute=a;g.clearCachedMediaAccessForTest=c}),98);\n__d(\"WASmaxInMmsdIQErrorResponseMixin\",[\"WAResultOrError\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!c.success)return c;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",c.value);if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!c.success)return c;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",c.value);if(!b.success)return b;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"error\");return!c.success?c:d(\"WAResultOrError\").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);\n__d(\"WASmaxInMmsdEnums\",[],(function(a,b,c,d,e,f){a={0:\"0\",1:\"1\"};b={400:\"400\",401:\"401\",404:\"404\",408:\"408\",409:\"409\",415:\"415\",426:\"426\",429:\"429\"};c={500:\"500\",501:\"501\",502:\"502\",503:\"503\",507:\"507\"};d={fallback:\"fallback\",primary:\"primary\"};e={\"false\":\"false\",\"true\":\"true\"};var g={fna:\"fna\",pop:\"pop\"};f.ENUM_0_1=a;f.ENUM_400_401_404_408_409_415_426_429=b;f.ENUM_500_501_502_503_507=c;f.ENUM_FALLBACK_PRIMARY=d;f.ENUM_FALSE_TRUE=e;f.ENUM_FNA_POP=g}),66);\n__d(\"WASmaxInMmsdRequestErrorMixin\",[\"WAResultOrError\",\"WASmaxInMmsdEnums\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrString(a,\"text\");if(!b.success)return b;var c=d(\"WASmaxParseUtils\").attrStringEnum(a,\"code\",d(\"WASmaxInMmsdEnums\").ENUM_400_401_404_408_409_415_426_429);if(!c.success)return c;a=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrIntRange,a,\"backoff\",0,10800);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:c.value,backoff:a.value})}g.parseRequestErrorMixin=a}),98);\n__d(\"WASmaxInMmsdResignCdnUrlResponseClientError\",[\"WAResultOrError\",\"WASmaxInMmsdIQErrorResponseMixin\",\"WASmaxInMmsdRequestErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;c=d(\"WASmaxInMmsdRequestErrorMixin\").parseRequestErrorMixin(c.value);if(!c.success)return c;a=d(\"WASmaxInMmsdIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);return!a.success?a:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({errorRequestErrorMixin:c.value},a.value))}g.parseResignCdnUrlResponseClientError=a}),98);\n__d(\"WASmaxInMmsdServerErrorMixin\",[\"WAResultOrError\",\"WASmaxInMmsdEnums\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrString(a,\"text\");if(!b.success)return b;var c=d(\"WASmaxParseUtils\").attrStringEnum(a,\"code\",d(\"WASmaxInMmsdEnums\").ENUM_500_501_502_503_507);if(!c.success)return c;a=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrIntRange,a,\"backoff\",0,10800);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:c.value,backoff:a.value})}g.parseServerErrorMixin=a}),98);\n__d(\"WASmaxInMmsdResignCdnUrlResponseServerError\",[\"WAResultOrError\",\"WASmaxInMmsdIQErrorResponseMixin\",\"WASmaxInMmsdServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;c=d(\"WASmaxInMmsdServerErrorMixin\").parseServerErrorMixin(c.value);if(!c.success)return c;a=d(\"WASmaxInMmsdIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);return!a.success?a:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({errorServerErrorMixin:c.value},a.value))}g.parseResignCdnUrlResponseServerError=a}),98);\n__d(\"WASmaxInMmsdIQResultResponseMixin\",[\"WAResultOrError\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!c.success)return c;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",c.value);if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!c.success)return c;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",c.value);if(!b.success)return b;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"result\");return!c.success?c:d(\"WAResultOrError\").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);\n__d(\"WASmaxInMmsdResignCdnUrlResponseSuccess\",[\"WAResultOrError\",\"WASmaxInMmsdIQResultResponseMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"cdn_url_resign\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").attrString(c.value,\"direct_path\");if(!c.success)return c;a=d(\"WASmaxInMmsdIQResultResponseMixin\").parseIQResultResponseMixin(a,b);return!a.success?a:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({cdnUrlResignDirectPath:c.value},a.value))}g.parseResignCdnUrlResponseSuccess=a}),98);\n__d(\"WASmaxOutMmsdBaseIQGetRequestMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"iq\",{id:d(\"WAWap\").generateId(),type:\"get\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);\n__d(\"WASmaxOutMmsdIQRequestCommonMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"iq\",{xmlns:\"w:m\",to:d(\"WAWap\").S_WHATSAPP_NET});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeIQRequestCommonMixin=a}),98);\n__d(\"WASmaxOutMmsdResignCdnUrlResignWithHandleParamsMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.cdnUrlResignHandle;a=d(\"WASmaxJsx\").smax(\"cdn_url_resign\",{handle:d(\"WAWap\").CUSTOM_STRING(a),use_case_hint:\"wa_stickers\"});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeResignCdnUrlResignWithHandleParamsMixin=a}),98);\n__d(\"WASmaxOutMmsdResignCdnUrlResignWithObjectIdAndFBIdParamsMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.cdnUrlResignFbid;a=a.cdnUrlResignObjectId;b=d(\"WASmaxJsx\").smax(\"cdn_url_resign\",{fbid:d(\"WAWap\").CUSTOM_STRING(b),object_id:d(\"WAWap\").CUSTOM_STRING(a),use_case_hint:\"fb_encrypted_backup\"});return b}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeResignCdnUrlResignWithObjectIdAndFBIdParamsMixin=a}),98);\n__d(\"WASmaxOutMmsdResignWithResignCdnUrlObjectIdAndFBIdOrResignCdnUrlHandleParamsMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutMmsdResignCdnUrlResignWithHandleParamsMixin\",\"WASmaxOutMmsdResignCdnUrlResignWithObjectIdAndFBIdParamsMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.resignCdnUrlResignWithObjectIdAndFBIdParams)return d(\"WASmaxOutMmsdResignCdnUrlResignWithObjectIdAndFBIdParamsMixin\").mergeResignCdnUrlResignWithObjectIdAndFBIdParamsMixin(a,b.resignCdnUrlResignWithObjectIdAndFBIdParams);if(b.resignCdnUrlResignWithHandleParams)return d(\"WASmaxOutMmsdResignCdnUrlResignWithHandleParamsMixin\").mergeResignCdnUrlResignWithHandleParamsMixin(a,b.resignCdnUrlResignWithHandleParams);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeResignWithResignCdnUrlObjectIdAndFBIdOrResignCdnUrlHandleParamsMixinGroup=a}),98);\n__d(\"WASmaxOutMmsdResignCdnUrlResignParamsMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutMmsdResignWithResignCdnUrlObjectIdAndFBIdOrResignCdnUrlHandleParamsMixinGroup\"],(function(a,b,c,d,e,f,g){function h(a){a=a.resignWithResignCdnUrlObjectIdAndFBIdOrResignCdnUrlHandleParamsMixinGroupArgs;a=d(\"WASmaxOutMmsdResignWithResignCdnUrlObjectIdAndFBIdOrResignCdnUrlHandleParamsMixinGroup\").mergeResignWithResignCdnUrlObjectIdAndFBIdOrResignCdnUrlHandleParamsMixinGroup(d(\"WASmaxJsx\").smax(\"cdn_url_resign\",null),a);return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeResignCdnUrlResignParamsMixin=a}),98);\n__d(\"WASmaxOutMmsdResignCdnUrlRequest\",[\"WASmaxJsx\",\"WASmaxOutMmsdBaseIQGetRequestMixin\",\"WASmaxOutMmsdIQRequestCommonMixin\",\"WASmaxOutMmsdResignCdnUrlResignParamsMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function a(a){var b=a.cdnUrlResignSignDuration;a=a.resignCdnUrlResignParamsMixinArgs;b=d(\"WASmaxOutMmsdIQRequestCommonMixin\").mergeIQRequestCommonMixin(d(\"WASmaxOutMmsdBaseIQGetRequestMixin\").mergeBaseIQGetRequestMixin(d(\"WASmaxJsx\").smax(\"iq\",null,d(\"WASmaxOutMmsdResignCdnUrlResignParamsMixin\").mergeResignCdnUrlResignParamsMixin(d(\"WASmaxJsx\").smax(\"cdn_url_resign\",{sign_duration:d(\"WAWap\").INT(b)}),a))));return b}g.makeResignCdnUrlRequest=a}),98);\n__d(\"WASmaxMmsdResignCdnUrlRPC\",[\"WAComms\",\"WASmaxInMmsdResignCdnUrlResponseClientError\",\"WASmaxInMmsdResignCdnUrlResponseServerError\",\"WASmaxInMmsdResignCdnUrlResponseSuccess\",\"WASmaxOutMmsdResignCdnUrlRequest\",\"WASmaxParsingFailure\",\"WASmaxRpcUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d(\"WASmaxOutMmsdResignCdnUrlRequest\").makeResignCdnUrlRequest(a);j.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAComms\").sendSmaxStanza(e,c));case 3:f=j.sent;g=d(\"WASmaxInMmsdResignCdnUrlResponseSuccess\").parseResignCdnUrlResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt(\"return\",{name:\"ResignCdnUrlResponseSuccess\",value:g.value});case 7:h=d(\"WASmaxInMmsdResignCdnUrlResponseClientError\").parseResignCdnUrlResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt(\"return\",{name:\"ResignCdnUrlResponseClientError\",value:h.value});case 10:i=d(\"WASmaxInMmsdResignCdnUrlResponseServerError\").parseResignCdnUrlResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt(\"return\",{name:\"ResignCdnUrlResponseServerError\",value:i.value});case 13:throw new(d(\"WASmaxParsingFailure\").SmaxParsingFailure)(d(\"WASmaxRpcUtils\").errorMessageRpcParsing(\"ResignCdnUrl\",{Success:g,ClientError:h,ServerError:i}));case 14:case\"end\":return j.stop()}},null,this)}g.sendResignCdnUrlRPC=a}),98);\n__d(\"WAGetResignedCdnUrl\",[\"WAAssertUnreachable\",\"WAErrorMessage\",\"WALogger\",\"WAPromiseRetryLoop\",\"WAResultOrError\",\"WASmaxMmsdResignCdnUrlRPC\",\"WASmaxParsingFailure\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"requestCdnResignedUrl - Unknown Error \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"requestCdnResignedUrl - Error thrown whilst parsing SMAX response - \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Direct path signature expired. objectId: \",\", fbid: \",\".\"]);j=function(){return a};return a}var k=\"507\",l=259200;function a(a){var b=a.objectId;a=a.fbid;b=new(d(\"WAPromiseRetryLoop\").PromiseRetryLoop)({name:\"requestCdnResignedUrl\",timer:{jitter:.25,max:987e3,algo:{type:\"fibonacci\",first:6e3,second:12e3},relativeDelay:!0},code:m({objectId:b,fbid:a})});b.start();return b.promise()}function m(a){var b=a.objectId,e=a.fbid;return function(a){d(\"WALogger\").LOG(j(),b,e);return d(\"WASmaxMmsdResignCdnUrlRPC\").sendResignCdnUrlRPC({cdnUrlResignSignDuration:l,resignCdnUrlResignParamsMixinArgs:{resignWithResignCdnUrlObjectIdAndFBIdOrResignCdnUrlHandleParamsMixinGroupArgs:{resignCdnUrlResignWithObjectIdAndFBIdParams:{cdnUrlResignFbid:e,cdnUrlResignObjectId:b}}}}).then(function(b){switch(b.name){case\"ResignCdnUrlResponseSuccess\":return a(d(\"WAResultOrError\").makeResult({directPath:b.value.cdnUrlResignDirectPath}));case\"ResignCdnUrlResponseClientError\":return a(d(\"WAResultOrError\").makeError({type:\"client-error\",text:b.value.errorRequestErrorMixin.text}));case\"ResignCdnUrlResponseServerError\":if(b.value.errorServerErrorMixin.code!==k)return;return a(d(\"WAResultOrError\").makeError({type:\"server-error\",text:b.value.errorServerErrorMixin.text,backoff:b.value.errorServerErrorMixin.backoff}));default:throw c(\"WAAssertUnreachable\")(b.name)}})[\"catch\"](function(b){var c=d(\"WAErrorMessage\").maybeGetMessageFromError(b);if(b instanceof d(\"WASmaxParsingFailure\").SmaxParsingFailure){d(\"WALogger\").ERROR(i(),c);return a(d(\"WAResultOrError\").makeError({type:\"smax-parsing-error\"}))}else{d(\"WALogger\").ERROR(h(),c);return}})}}g.getCdnResignedUrl=a}),98);\n__d(\"WAMediaQplHelper\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){if(a==null||a<0||a>100*1024*1024)return\"invalid_size\";else if(a<=1*1024)return\"size lower than 1 KB\";else if(a<=100*1024)return\"size between 1 KB and 100 KB\";else if(a<=1*1024*1024)return\"size between 100 KB and 1 MB\";else if(a<=10*1024*1024)return\"size between 1 and 10 MB\";else if(a<=50*1024*1024)return\"size between 10 and 50 MB\";else return\"size above 50 MB\"}f.convertIntegerSizeToStringBucket=a}),66);\n__d(\"WAHttpDownloadMedia\",[\"WAErrorMessage\",\"WALogger\",\"WAMediaQplHelper\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Download Media Error: can not resume from offset\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpDownloadMedia: fail to parse request body: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpDownloadMedia: fail to parse request body \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Fetch Media HTTP status \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpDownloadMedia: fail to initiate fetch: \",\", message: \",\"\"]);l=function(){return a};return a}var m=\"URL signature expired\";function a(a,c){var e,f,g,n,o;return b(\"regeneratorRuntime\").async(function(p){while(1)switch(p.prev=p.next){case 0:p.prev=0;p.next=3;return b(\"regeneratorRuntime\").awrap(fetch(a,{method:\"GET\",mode:\"cors\",cache:\"no-store\"}));case 3:e=p.sent;p.next=12;break;case 6:p.prev=6;p.t0=p[\"catch\"](0);f=d(\"WAErrorMessage\").maybeGetMessageFromError(p.t0);d(\"WALogger\").WARN(l(),p.t0,f);c==null?void 0:c.addAnnotations({bool:{threwFetchError:!0}});throw p.t0;case 12:g=e.headers.get(\"content-length\");n=e,o=n.status;d(\"WALogger\").LOG(k(),o);c==null?void 0:c.addAnnotations({string:{ciphertextMediaSizeBucket:g!=null?d(\"WAMediaQplHelper\").convertIntegerSizeToStringBucket(Number(g)):null},\"int\":{httpStatus:o}});p.t1=o;p.next=p.t1===200?19:p.t1===206?19:p.t1===401?20:p.t1===403?21:p.t1===404?22:p.t1===410?22:p.t1===408?23:p.t1===416?24:p.t1===429?26:p.t1===507?26:27;break;case 19:return p.abrupt(\"return\",e.arrayBuffer().then(function(a){return d(\"WAResultOrError\").makeResult(a)})[\"catch\"](function(a){c==null?void 0:c.addPoint(\"response_array_buffer_error\");d(\"WALogger\").ERROR(j(),a);return d(\"WAResultOrError\").makeError(\"body-network-error\")}));case 20:return p.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"access-expired\"));case 21:return p.abrupt(\"return\",e.text().then(function(a){return a===m?d(\"WAResultOrError\").makeError(\"signature-expired\"):d(\"WAResultOrError\").makeError(\"access-expired\")})[\"catch\"](function(a){d(\"WALogger\").ERROR(i(),a);return d(\"WAResultOrError\").makeError(\"access-expired\")}));case 22:return p.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"media-not-found\"));case 23:return p.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"server-timeout\"));case 24:d(\"WALogger\").ERROR(h());return p.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"request-error\"));case 26:return p.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"download-throttled\"));case 27:if(!(o>=400&&o<500)){p.next=29;break}return p.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"request-error\"));case 29:return p.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"unspecified-http-error\"));case 30:case\"end\":return p.stop()}},null,this,[[0,6]])}g.httpDownloadMedia=a}),98);\n__d(\"WAMediaOperationsRetrier\",[\"WALogger\",\"WAPromiseBackoffs\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"MediaOperationsRetrier:\",\" wait for internet, attempt = \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Running retrier\"]);i=function(){return a};return a}var j=4,k={algo:{type:\"constant\",delay:1e3},jitter:0};a=function(){function a(a,b,c){this.$1=a,this.routesInfo=b,this.$2=d(\"WAPromiseBackoffs\").createPromiseTimer(k),this.$3=0,this.$4=!1,this.$5=c}var c=a.prototype;c.run=function(a,c){var e,f,g,k;return b(\"regeneratorRuntime\").async(function(l){while(1)switch(l.prev=l.next){case 0:if(!(this.$3<j)){l.next=29;break}d(\"WALogger\").DEV(i());l.next=4;return b(\"regeneratorRuntime\").awrap(this.$2());case 4:e=void 0;if(!(this.$3>0)){l.next=12;break}e=this.$3>=j-2&&!this.$4;d(\"WALogger\").LOG(h(),this.$1,this.$3);l.next=10;return b(\"regeneratorRuntime\").awrap(this.$5==null?void 0:this.$5());case 10:l.next=13;break;case 12:e=!1;case 13:f=this.routesInfo;if(f){l.next=16;break}return l.abrupt(\"return\",null);case 16:g=f.host;e&&f.fallbackHost&&(g=f.fallbackHost);l.next=20;return b(\"regeneratorRuntime\").awrap(a(g,f.authToken,this.$3,c));case 20:k=l.sent;if(!k.success){l.next=25;break}return l.abrupt(\"return\",k.value);case 25:++this.$3,this.$4=k.error.progressMade;case 27:l.next=0;break;case 29:return l.abrupt(\"return\",null);case 30:case\"end\":return l.stop()}},null,this)};return a}();g.MAX_ATTEMPTS=j;g.BACKOFF_OPTIONS=k;g.MediaOperationsRetrier=a}),98);\n__d(\"WAHttpUtils\",[\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,d){if(!\/^https:\\\/\\\/[-\\w.]+\\.\\w+$\/.test(a))throw c(\"WAErr\")('buildUrl given invalid host \"'+a+'\"');if(!b.startsWith(\"\/\"))throw c(\"WAErr\")('buildUrl given invalid path \"'+b+'\"');var e=d;d=\"\"+a+b;if(!e)return d;a=Object.keys(e).map(function(a){var b=e[a];b instanceof ArrayBuffer&&(b=new Uint8Array(b));b=b instanceof Uint8Array?Array.prototype.slice.call(b).map(function(a){return\"%\"+a.toString(16)}).join(\"\"):encodeURIComponent(b.toString());return encodeURIComponent(a)+\"=\"+b});if(a.length>0){b=a.join(\"&\");return d.includes(\"?\")?d+\"&\"+b:d+\"?\"+b}else return d}g.buildUrl=a}),98);\n__d(\"WAMediaUrl\",[\"WABase64\",\"WAGlobals\",\"WAHttpUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=1;function a(a,b,c,e,f,g,i){var j=d(\"WAGlobals\").getConfig().mediaUploadRoot();c=d(\"WABase64\").encodeB64UrlSafe(c);b=d(\"WABase64\").encodeB64UrlSafe(b);f={auth:f,token:b};g&&(f.resume=h);i!=null&&i>0&&(f.bytestart=i);return d(\"WAHttpUtils\").buildUrl(\"https:\/\/\"+e,j+\"\/\"+a+\"\/\"+c,f)}function b(a,b,c,e,f,g,h){b=d(\"WABase64\").encodeB64UrlSafe(b);b={hash:b,mode:e};f!=null&&(b._nc_cat=f);g!=null&&g>=0&&(b.bytestart=g);h!=null&&h>0&&(b.byteend=h);return d(\"WAHttpUtils\").buildUrl(\"https:\/\/\"+c,a,b)}g.RESUME_PARAM=h;g.buildUploadUrl=a;g.buildDownloadUrl=b}),98);\n__d(\"WADownloadCiphertext\",[\"WAAssertUnreachable\",\"WABase64\",\"WAComms\",\"WACryptoSha256\",\"WACryptoUtils\",\"WAGetMediaRoute\",\"WAGetResignedCdnUrl\",\"WAGlobals\",\"WAHttpDownloadMedia\",\"WALogger\",\"WAMediaOperationsRetrier\",\"WAMediaUrl\",\"WAPromiseDelays\",\"WAPromiseManagement\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Download Plaintext failed: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"downloadMedia given up\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"downloadCiphertext http download exception: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"result to generate a new cdn url was throttled (507)\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Cannot generate a new cdn url: missing objectId or fbid\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Download Media Error: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Downloading ciphertext for hash: \",\"\"]);n=function(){return a};return a}function a(a){var e,f,g,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;return b(\"regeneratorRuntime\").async(function(H){while(1)switch(H.prev=H.next){case 0:e=a.mediaTypeDetails,f=a.fileEncSha256,g=a.directPath,p=a.plaintextHash,q=a.objectId,r=a.fbid,s=a.pathRedirected,t=a.eventFlow,u=a.fromBytes,v=a.toBytes;d(\"WALogger\").LOG(n(),p);w=e.type===\"regular\"?e.mediaType:\"preview\";t==null?void 0:t.addPoint(\"get_media_route_start\");H.next=6;return b(\"regeneratorRuntime\").awrap(d(\"WAGetMediaRoute\").getMediaRoute({operation:\"download\",serverMediaType:w,fileEncSha256:f,directPath:g},t));case 6:x=H.sent;t==null?void 0:t.addPoint(\"get_media_route_finish\");if(x.success){H.next=10;break}return H.abrupt(\"return\",x);case 10:y=x.value,z=y.selectedHost,A=y.fallbackHost,B=y.authToken,C=y.bucket;D=new(d(\"WAMediaOperationsRetrier\").MediaOperationsRetrier)(\"download\",{host:{domain:z.domain,\"class\":z[\"class\"]},fallbackHost:A&&{domain:A.domain,\"class\":A[\"class\"]},authToken:B,timeElapsed:null},d(\"WAGlobals\").getConfig().isMediaWaitForConnectionOnRetryEnabled()===!0?d(\"WAComms\").waitForConnection:void 0);H.next=14;return b(\"regeneratorRuntime\").awrap(D.run(function(a){a=a.domain;a=d(\"WAMediaUrl\").buildDownloadUrl(g,f,a,\"manual\",C,u,v);return d(\"WAHttpDownloadMedia\").httpDownloadMedia(a,t).then(function(c){var a,e,f,g,h;return b(\"regeneratorRuntime\").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!c.success){i.next=4;break}return i.abrupt(\"return\",d(\"WAResultOrError\").makeResult(c));case 4:a=c.error;d(\"WALogger\").LOG(m(),a);i.t0=a;i.next=i.t0===\"signature-expired\"?9:i.t0===\"server-timeout\"?37:i.t0===\"unspecified-http-error\"?37:38;break;case 9:if(!(q==null||r==null)){i.next=12;break}d(\"WALogger\").LOG(l());return i.abrupt(\"return\",d(\"WAResultOrError\").makeResult(d(\"WAResultOrError\").makeError(\"signature-expired-and-resign-failed-no-ids\")));case 12:i.next=14;return b(\"regeneratorRuntime\").awrap(d(\"WAGetResignedCdnUrl\").getCdnResignedUrl({objectId:q,fbid:r}));case 14:e=i.sent;if(e.success){i.next=30;break}t==null?void 0:t.addPoint(\"resign_cdn_url_fail\",{string:{resignCdnErrorType:e.error.type,resignCdnError:e.error.text}});f=d(\"WAResultOrError\").makeResult(d(\"WAResultOrError\").makeError(\"signature-expired-and-resign-failed-cdn-url\"));i.t1=e.error.type;i.next=i.t1===\"client-error\"?21:i.t1===\"server-error\"?22:28;break;case 21:return i.abrupt(\"return\",f);case 22:if(!(e.error.backoff!=null)){i.next=27;break}g=e.error.backoff;t==null?void 0:t.addPoint(\"resign_cdn_url_backoff\");d(\"WALogger\").LOG(k());return i.abrupt(\"return\",d(\"WAPromiseDelays\").delayMs(g).then(function(){return d(\"WAResultOrError\").makeResult(d(\"WAResultOrError\").makeError(\"signature-expired\"))}));case 27:return i.abrupt(\"return\",f);case 28:e.error.type;return i.abrupt(\"return\",f);case 30:e.success;t==null?void 0:t.addPoint(\"resign_cdn_url_success\");h=e.value.directPath;if(!(s!=null)){i.next=36;break}i.next=36;return b(\"regeneratorRuntime\").awrap(s(h));case 36:return i.abrupt(\"return\",d(\"WAResultOrError\").makeResult(d(\"WAResultOrError\").makeError(\"signature-expired\")));case 37:return i.abrupt(\"return\",d(\"WAResultOrError\").makeError({progressMade:!0}));case 38:return i.abrupt(\"return\",d(\"WAResultOrError\").makeResult(d(\"WAResultOrError\").makeError(a)));case 39:case\"end\":return i.stop()}},null,this)})[\"catch\"](function(a){d(\"WALogger\").WARN(j(),a);return d(\"WAResultOrError\").makeError({progressMade:!1})})}));case 14:E=H.sent;if(!(E==null)){H.next=18;break}d(\"WALogger\").WARN(i());return H.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"max-attempts-exceeded\"));case 18:if(!(E.success===!1)){H.next=31;break}F=E.error;d(\"WALogger\").WARN(h(),F);H.t0=F;H.next=H.t0===\"signature-expired\"?24:H.t0===\"signature-expired-and-resign-failed-cdn-url\"?24:H.t0===\"signature-expired-and-resign-failed-no-ids\"?24:H.t0===\"media-not-found\"?24:H.t0===\"download-throttled\"?24:H.t0===\"request-error\"?24:H.t0===\"access-expired\"?25:H.t0===\"body-network-error\"?26:27;break;case 24:return H.abrupt(\"return\",d(\"WAResultOrError\").makeError(F));case 25:return H.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"disconnected\"));case 26:return H.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"request-error\"));case 27:F;throw c(\"WAAssertUnreachable\")(F);case 29:H.next=44;break;case 31:G=E.value;H.t1=!o(u,v);if(!H.t1){H.next=40;break}H.t2=d(\"WACryptoUtils\").arrayBuffersEqual;H.next=37;return b(\"regeneratorRuntime\").awrap(d(\"WACryptoSha256\").sha256(G));case 37:H.t3=H.sent,H.t4=f,H.t1=!H.t2(H.t3,H.t4);case 40:if(!H.t1){H.next=42;break}return H.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"ciphertext-hash-mismatch\"));case 42:t==null?void 0:t.addPoint(\"download_finish\",{\"int\":{byteLength:G.byteLength},bool:{isPartialDownload:o(u,v)}});return H.abrupt(\"return\",d(\"WAResultOrError\").makeResult(G));case 44:case\"end\":return H.stop()}},null,this)}e=d(\"WAPromiseManagement\").cacheWhilePending(function(a){var b=a.fileEncSha256,c=a.fromBytes;a=a.toBytes;return d(\"WABase64\").encodeB64UrlSafe(b)+\"-\"+((b=c)!=null?b:\"X\")+\"-\"+((c=a)!=null?c:\"X\")},a);function o(a,b){return a!=null&&a>0?!0:b!=null}g.cachedDownloadCiphertext=e}),98);\n__d(\"WADownloadAndDecryptMedia\",[\"WADecryptMedia\",\"WADownloadCiphertext\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var c,e,f,g,h,i,j,k,l,m,n;return b(\"regeneratorRuntime\").async(function(o){while(1)switch(o.prev=o.next){case 0:c=a.mediaTypeDetails,e=a.fileEncSha256,f=a.directPath,g=a.mediaKey,h=a.plaintextHash,i=a.objectId,j=a.fbid,k=a.pathRedirected,l=a.eventFlow;o.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WADownloadCiphertext\").cachedDownloadCiphertext({mediaTypeDetails:c,fileEncSha256:e,directPath:f,objectId:i,fbid:j,pathRedirected:k,eventFlow:l,plaintextHash:h}));case 3:m=o.sent;if(!(m.success!==!0)){o.next=6;break}return o.abrupt(\"return\",m);case 6:o.next=8;return b(\"regeneratorRuntime\").awrap(d(\"WADecryptMedia\").decryptMedia({mediaKey:g,mediaTypeDetails:c,plaintextHash:h,ciphertextHmac:m.value}));case 8:n=o.sent;if(!(n.success!==!0)){o.next=11;break}return o.abrupt(\"return\",n);case 11:n.value.alternativeHmacSaltUsed!=null&&(l==null?void 0:l.addAnnotations({string:{alternativeHmacSaltUsed:n.value.alternativeHmacSaltUsed}}));return o.abrupt(\"return\",d(\"WAResultOrError\").makeResult(n.value.plaintext));case 13:case\"end\":return o.stop()}},null,this)}g.downloadAndDecryptMedia=a}),98);\n__d(\"WAParseWav\",[\"WAResultOrError\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=new DataView(a);if(b.getUint32(0)!==1380533830||b.getUint32(8)!==1463899717)return d(\"WAResultOrError\").makeError(\"invalid-wav\");if(a.byteLength<44)return d(\"WAResultOrError\").makeError(\"invalid-wav\");a=b.getUint16(22,!0);b=b.getUint32(24,!0);return d(\"WAResultOrError\").makeResult({numChannels:a,sampleRate:b})}g.parseWav=a}),98);\n__d(\"MAWDownloadMedia\",[\"MAWDownloadDownloadablePreview\",\"MAWDownloadProgressiveJpegPreview\",\"MAWGetMediaPlaintextApi\",\"MAWGlobals\",\"MAWLoggerUtils\",\"MAWUpdateMediaEntryForMsgApi\",\"Promise\",\"WADownloadAndDecryptMedia\",\"WAErrorMessage\",\"WAJids\",\"WAMediaCrypto\",\"WAMediaQplHelper\",\"WAMediaUtils\",\"WAParseWav\",\"WAProgressiveJpegGetPJpegDetails\",\"WAResultOrError\",\"WATagsLogger\",\"asyncToGeneratorRuntime\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"ptt is not wav format\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"downloadMedia: enc-hash-mismatch\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"downloadMedia: enc-hash-mismatch. chatType: \",\", mediaTypeDetailsType: \",\", mediaTypeDetailsValue: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"media already exists in db, skipping download\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"mediaPreviewPromise state: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"media: mediaPreview - unsupported preview media type \",\" - \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"mediaEntry is incomplete\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" is not downloaded\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to download media due to runtime-error: \",\"\"]);q=function(){return a};return a}var r=d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.MediaDownload,d(\"MAWLoggerUtils\").Tag.MessageReceive]),s=function(a,c,e,f){return t(a,c,e,f)[\"catch\"](function(a){a=d(\"WAErrorMessage\").maybeGetMessageFromError(a);r.ERROR(q(),a);return(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeError(\"runtime-error\"))})},t=function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c,e){var f,g=c.directPath,h=c.fbid,i=c.fileEncSha256,j=c.fileSha256,k=c.mediaKey,l=c.objectId,q=c.serverMediaType;e==null?void 0:e.addPoint(\"downloading_media\",{string:{mediaType:q}});if(g==null||i==null||j==null||k==null||q==null){r.WARN(p(),c);r.ERROR(o());return d(\"WAResultOrError\").makeError(\"media-entry-invalid\")}if((c==null?void 0:(f=c.downloadableThumbnail)==null?void 0:f.directPath)!=null){e==null?void 0:e.addAnnotations({bool:{duplicateDirectPath:(c==null?void 0:(f=c.downloadableThumbnail)==null?void 0:f.directPath)===g,hasDownloadableThumbnail:!0}})}f=d(\"WAProgressiveJpegGetPJpegDetails\").maybeGetProgressiveJpegDetailsUsingMediaEntry(c);e==null?void 0:e.addAnnotations({bool:{isProgressiveJpeg:f!=null}});f=w({hash:b,mediaEntry:c,progressiveJpegDetails:f,protocolMsgId:a,serverMediaType:q});void f.then(function(c){if(c!=null){var e;try{e=d(\"WAMediaCrypto\").convertServerMediaTypeToPreviewMediaType(q)}catch(a){r.ERROR(n(),q,a);return}return d(\"MAWGlobals\").getDbImpls().handleMediaPreviewDownload(b,c,e,a)}});g=(yield u(a,b,e,{mediaType:q,type:\"regular\"},g,i,j,k,l,h,c));i=(yield x(f));r.LOG(m(),i);(c==null?void 0:(j=c.downloadableThumbnail)==null?void 0:j.directPath)!=null&&(e==null?void 0:e.addAnnotations({string:{mediaPreviewPromiseState:i}}));return g.success?d(\"WAResultOrError\").makeResult({mimeType:d(\"WAMediaUtils\").getMimeTypeFromServerMediaType(q),plaintext:g.value}):g});return function(b,c,d,e){return a.apply(this,arguments)}}();function u(a,b,c,d,e,f,g,h,i,j,k){return v.apply(this,arguments)}function v(){v=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,e,f,g,h,m,n,o,p,q,t){var u=d(\"WAMediaUtils\").toPlaintextHash(n);if(c(\"gkx\")(\"33150\")){n=(yield d(\"MAWGetMediaPlaintextApi\").getMediaPlaintext(u));if(n!=null){r.LOG(l());f==null?void 0:f.addAnnotations({bool:{downloadSkipped:!0}});n=(yield d(\"WAMediaUtils\").blobToArrayBuffer(n));return d(\"WAResultOrError\").makeResult(n)}}f==null?void 0:f.addAnnotations({bool:{downloadSkipped:!1}});n=(yield d(\"WADownloadAndDecryptMedia\").downloadAndDecryptMedia({directPath:h,eventFlow:f,fbid:q,fileEncSha256:m,mediaKey:o,mediaTypeDetails:g,objectId:p,pathRedirected:function(){var c=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(b){var c=function(){return d(\"WAMediaUtils\").encodeMediaEntryWithUpdatedPath(t,b)};yield d(\"MAWUpdateMediaEntryForMsgApi\").updateMediaEntryForMsg(u,a,c,p,t.serverMediaType)});function e(a){return c.apply(this,arguments)}return e}(),plaintextHash:u}));if(n.success===!1){h=n.error;switch(h){case\"signature-expired\":return c(\"gkx\")(\"378\")&&g.type===\"preview\"?d(\"WAResultOrError\").makeError(h):s(a,e,t,f).then(function(a){return a.success?d(\"WAResultOrError\").makeResult(a.value.plaintext):a});case\"signature-expired-and-resign-failed-cdn-url\":case\"signature-expired-and-resign-failed-no-ids\":case\"media-not-found\":return d(\"WAResultOrError\").makeError(h);case\"enc-hash-mismatch\":q=d(\"WAJids\").switchOnMsgrChatJidType(a.chat,{group:function(a){return\"group\"},user:function(a){return\"user\"}});r.WARN(k(),q,g.type,g.type===\"regular\"?g.mediaType:g.messageType);r.ERROR(j());return d(\"WAResultOrError\").makeError(h);default:h;return d(\"WAResultOrError\").makeError(h)}}else{m=n.value;if(g.type===\"regular\"&&g.mediaType===\"ptt\"){o=d(\"WAParseWav\").parseWav(m);!o.success?r.DEV(i()):f==null?void 0:f.addAnnotations({\"int\":{pttNumChannels:o.value.numChannels,pttSampleRate:o.value.sampleRate}})}f==null?void 0:f.addPoint(\"download_media_success\",{string:{media_size:d(\"WAMediaQplHelper\").convertIntegerSizeToStringBucket(m.byteLength)}});return d(\"WAResultOrError\").makeResult(m)}});return v.apply(this,arguments)}function w(a){var b=a.hash,c=a.mediaEntry,e=a.progressiveJpegDetails,f=a.protocolMsgId,g=a.serverMediaType;return e==null||!d(\"MAWGlobals\").getConfig().isProgressiveJpegSendReceiveEnabled()?d(\"MAWDownloadDownloadablePreview\").maybeDownloadDownloadablePreview(f,b,g,c):d(\"MAWDownloadProgressiveJpegPreview\").maybeDownloadProgressiveJpegPreview(f,b,g,c,e).then(function(a){return a.success!==!0?d(\"MAWDownloadDownloadablePreview\").maybeDownloadDownloadablePreview(f,b,g,c):a.value})}function x(a){var c={};return(h||(h=b(\"Promise\"))).race([a,c]).then(function(a){return a===c?\"pending\":\"fulfilled\"},function(){return\"rejected\"})}g.mediaDownloadLogger=r;g.downloadMedia=s;g.downloadMediaImpl=u}),98);\n__d(\"WADownloadProgressiveJpegPlaintext\",[\"WABinary\",\"WADownloadCiphertext\",\"WAMediaCrypto\",\"WAProgressiveJpegAlignScanLengths\",\"WAProgressiveJpegGetPJpegDetails\",\"WAResultOrError\",\"WATagsLogger\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Partial Download Plaintext Success\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Download Plaintext Error \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Using progressiveJpeg decryptAndVerify\"]);j=function(){return a};return a}var k=d(\"WATagsLogger\").TAGS([\"DownloadProgressiveJpeg\"]);function a(a){var c,e,f,g,h,i,j,k,m,n,o,p,q,r;return b(\"regeneratorRuntime\").async(function(s){while(1)switch(s.prev=s.next){case 0:c=a.mediaTypeDetails,e=a.fileEncSha256,f=a.directPath,g=a.mediaKey,h=a.eventFlow,i=a.pathRedirected,j=a.pjpegDetails,k=a.targetScan,m=a.plaintextHash;n=d(\"WAProgressiveJpegAlignScanLengths\").progressiveJpegAlignChunkLengthsToMultipleOfAesBlockSize(j.scanLengths);o=babelHelpers[\"extends\"]({},j,{alignedScanLengths:n});p=l(g,c,k,o);q=d(\"WAProgressiveJpegGetPJpegDetails\").getTotalByteSizeForScan(n,k);s.next=7;return b(\"regeneratorRuntime\").awrap(d(\"WADownloadCiphertext\").cachedDownloadCiphertext({mediaTypeDetails:c,fileEncSha256:e,directPath:f,pathRedirected:i,fromBytes:0,toBytes:q-1,eventFlow:h,plaintextHash:m}));case 7:r=s.sent;if(!(r.success!==!0)){s.next=10;break}return s.abrupt(\"return\",r);case 10:return s.abrupt(\"return\",p(r.value));case 11:case\"end\":return s.stop()}},null,this)}function l(a,c,e,f){return function(g,l){var n,o,p;return b(\"regeneratorRuntime\").async(function(q){while(1)switch(q.prev=q.next){case 0:k.LOG(j());n=new Uint8Array(g);c.type===\"preview\"?l=d(\"WAMediaCrypto\").computeMediaKeysForPreview(a):l=d(\"WAMediaCrypto\").computeMediaKeys(a,c.mediaType);q.next=5;return b(\"regeneratorRuntime\").awrap(l.then(function(a){var b=a.iv,c=a.cipherKey;a=a.hmacKey;return d(\"WAMediaCrypto\").decryptPartialChunks(c,b,n,a,e,f)}).then(d(\"WAResultOrError\").makeResult)[\"catch\"](function(a){k.ERROR(i(),a);if(a instanceof d(\"WAMediaCrypto\").HmacValidationError)return d(\"WAResultOrError\").makeError(\"enc-hash-mismatch\");else return d(\"WAResultOrError\").makeError(\"decryption-error\")}));case 5:o=q.sent;if(o.success){q.next=8;break}return q.abrupt(\"return\",o);case 8:k.LOG(h());p=m(o.value.plaintext);return q.abrupt(\"return\",d(\"WAResultOrError\").makeResult(p));case 11:case\"end\":return q.stop()}},null,this)}}function m(a){a=new(d(\"WABinary\").Binary)(a);a.writeBytes(255,217);return a.readBuffer()}g.downloadProgressiveJpegPlaintext=a}),98);\n__d(\"MAWDownloadProgressiveJpegPreview\",[\"MAWDownloadMedia\",\"MAWExternalId\",\"MAWHandleMediaPreviewBeforeDownloadApi\",\"MAWLoggerUtils\",\"WADownloadProgressiveJpegPlaintext\",\"WAGlobals\",\"WAJids\",\"WAPREList\",\"WAPREMetrics\",\"WAResultOrError\",\"WebStorageEstimator\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Finished progressiveJpeg preview download\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Starting progressiveJpeg preview download\"]);i=function(){return a};return a}var j=d(\"MAWDownloadMedia\").mediaDownloadLogger.TAGS([d(\"MAWLoggerUtils\").Tag.MediaPreview]),k=3;function a(a,b,c,d,e){return l.apply(this,arguments)}function l(){l=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c,e,f){var g=e.directPath,l=e.fileEncSha256,m=e.mediaKey;if(g==null||l==null||m==null)return d(\"WAResultOrError\").makeError(\"pjpeg-failed\");yield d(\"MAWHandleMediaPreviewBeforeDownloadApi\").handleMediaPreviewBeforeDownload(b);var n=d(\"WAJids\").switchOnMsgrChatJidType(a.chat,{group:function(){return\"group\"},user:function(){return\"user\"}}),o=(yield d(\"WebStorageEstimator\").estimateStorage());o=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.MEDIA_DOWNLOAD,{bool:{isMediaFallbackToAlternativeHmacSaltsEnabled:d(\"WAGlobals\").getConfig().isMediaFallbackToAlternativeHmacSaltsEnabled(),isPreview:!0,isProgressiveJpeg:!0},\"int\":{storageQuota:(o==null?void 0:o.quota)||0,storageUsage:(o==null?void 0:o.usage)||0},string:{chat_type:n,downloadEntry:\"progressiveJpeg-preview\",e2eePlatform:d(\"MAWExternalId\").getPlatform(a.externalId),jid:a.chat,mediaType:e.serverMediaType}},void 0);j.LOG(i());n=(yield d(\"WADownloadProgressiveJpegPlaintext\").downloadProgressiveJpegPlaintext({directPath:g,eventFlow:o,fileEncSha256:l,mediaKey:m,mediaTypeDetails:{mediaType:c,type:\"regular\"},pjpegDetails:f,plaintextHash:b,targetScan:k}));if(!n.success){o.endFail(n.error);return d(\"WAResultOrError\").makeError(\"pjpeg-failed\")}a=n.value;j.LOG(h());o.endSuccess();return d(\"WAResultOrError\").makeResult(a)});return l.apply(this,arguments)}g.maybeDownloadProgressiveJpegPreview=a}),98);\n__d(\"MAWDownloadManager\",[],(function(a,b,c,d,e,f){\"use strict\";var g=1e4;a=function(){function a(){this.$1=[],this.$2=new Map()}var b=a.prototype;b.setToDownloadManager=function(a,b){this.$3(),this.$2.set(a,b),this.$1.push(a)};b.getFromDownloadManager=function(a){return this.$2.get(a)};b.removeFromMediaDownloadManager=function(a){this.$2[\"delete\"](a);var b=this.$1.filter(function(b){return b!==a});this.setDownloadManagerQueue(b)};b.setDownloadManagerQueue=function(a){this.$1=a};b.$3=function(){if(this.$1.length>=g){var a=this.$1.shift();this.$2[\"delete\"](a)}};return a}();f.DownloadManager=a}),66);\n__d(\"MAWMediaDownloadManager\",[\"MAWDownloadManager\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=new(d(\"MAWDownloadManager\").DownloadManager)();function a(a,b){h.setToDownloadManager(a,b)}function b(a){return h.getFromDownloadManager(a)}function c(a){h.removeFromMediaDownloadManager(a)}g.setToMediaDownloadManager=a;g.getFromMediaDownloadManager=b;g.removeFromMediaDownloadManager=c}),98);\n__d(\"MAWHandleMediaDownloadApi\",[\"MAWBridgeTypesCreators\",\"MAWDbChunkTxns\",\"MAWDbMediaTxns\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbXMATxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWLoggerUtils\",\"MAWMediaDownloadManager\",\"MAWMediaUtils\",\"MAWMsgType\",\"MAWTransactionMode\",\"Promise\",\"WAArmadilloXMA.pb\",\"WAResultOrError\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Media is null when storing downloaded blob\"]);i=function(){return a};return a}var j=d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.MediaDownload,d(\"MAWLoggerUtils\").Tag.MessageReceive]);c=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(a=d(\"MAWTransactionMode\")).READWRITE,media:a.READWRITE,messages:a.READONLY,threads:a.READONLY,xma:a.READONLY},\"handleMediaDownload\",function(a){return function(c,e,f,g){var l=d(\"MAWMediaUtils\").genHMACPlaintextHash(c);return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,g),a.media.where(\"hashedPlaintextHash\").equals(l).first(),d(\"MAWDbChunkTxns\").getOrCreateMediaChunk(a,c,f,e)]).then(function(c){var g=c[0],l=c[1];c[2];if(l==null){j.ERROR(i());return d(\"WAResultOrError\").makeError(\"missing-media-on-save\")}c=d(\"MAWMediaDownloadManager\").getFromMediaDownloadManager(l.mediaId);c!=null&&(c((h||(h=b(\"Promise\"))).resolve(new Blob([f],{type:e}))),d(\"MAWMediaDownloadManager\").removeFromMediaDownloadManager(l.mediaId));return k(a,g).then(function(b){if(!b){b=l.msgIds.map(d(\"MAWDbMsg\").getThreadIdFromMsgId);return a.threads.bulkGet(b).then(function(a){a.forEach(function(a){a!=null&&d(\"MAWIndexedDb\").afterTransaction({tag:\"NewMedia\",value:d(\"MAWBridgeTypesCreators\").createBridgeMedia(a.chatId,a.jid,l,!0,g==null?void 0:g.sortOrderMs)})})})}else return d(\"MAWDbMediaTxns\").updateMedia(a,l,{size:f.byteLength})}).then(function(){return d(\"WAResultOrError\").makeResult()})})}});function k(a,b){var c;if(b==null)return d(\"MAWDexieTable\").dexieResolve(!1);return b.type===d(\"MAWMsgType\").MSG_TYPE.XMA||((c=b.quote)==null?void 0:c.content.xmaMessageType)===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY?d(\"MAWDexieTable\").dexieResolve(!0):d(\"MAWDbXMATxns\").maybeGetXMAFromAssociatedMsgId(a,b.msgId).then(function(a){return a!=null})}g.handleMediaDownload=c}),98);\n__d(\"MAWMediaRetryInfo\",[],(function(a,b,c,d,e,f){\"use strict\";var g=new Map();function a(a,b){g.set(a,b)}function b(a){return g.get(a)}function c(a){g.has(a)&&g[\"delete\"](a)}f.setRetriedMediaInfo=a;f.getRetriedMediaInfo=b;f.clearRetriedMediaInfo=c}),66);\n__d(\"MAWHandleEchoMediaMsgsRestoreV2\",[\"EchoMessage\",\"EchoMessageMediaFieldUtils\",\"LSDataTraceCheckPoint\",\"LSDataTraceType\",\"LSIntEnum\",\"MAWAsConsumerApplication\",\"MAWBridge\",\"MAWBridgeTypesCreators\",\"MAWCastToMsgrServerMediaType\",\"MAWDbChunkTxns\",\"MAWDbMediaTxns\",\"MAWDownloadMedia\",\"MAWEBBackendQPLUtils\",\"MAWFrontendMediaUtils\",\"MAWGlobals\",\"MAWHandleMediaDownloadApi\",\"MAWIndexedDb\",\"MAWJids\",\"MAWMediaManagementTxns\",\"MAWMediaRetryInfo\",\"MAWMediaUtils\",\"MAWQplProxy\",\"MAWSupportedDocumentTypes\",\"MAWTraceUtils\",\"MAWTransactionMode\",\"Promise\",\"WABase64\",\"WAHashStringToNumber\",\"WAJids\",\"WALogger\",\"WAMediaUtils\",\"WAPREList\",\"WAPREMetrics\",\"WATagsLogger\",\"WATimeUtils\",\"WebStorageEstimator\",\"asyncToGeneratorRuntime\",\"gkx\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Cannot find the media entry for message with mediaKey \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Cannot find the media entry for message with mediaKey \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] media for message: \",\" is already downloaded on the device\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Unable to construct downloadableThumbnail from previewMediaData: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Encrypted hash cannot be null for non-XMA attachments\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Cannot download media - document extension is disallowed\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Cannot download media - media content type null\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] media entry is missing from index db. It is required to retry download by resigning cdn url\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"isPointRestore: \",\"\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] media download failed with error: \",\" \",\" when downloading. Message timestamp: \",\"\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Retry download media as signature has expired and should be renewed\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] media download complete\"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] downloading media from MI directly\"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] start media download from whatsapp infra\"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Encrypted hash is null - unable to download thumbnail\"]);x=function(){return a};return a}var y=\"media_restore\";function z(a){var c=D(a);return c.then(function(c){var d=new Map();a.forEach(function(a){var b=c.get(a);b=b==null?void 0:b.blobData;d.set(a,b)});return(i||(i=b(\"Promise\"))).resolve(d)})}function A(a){switch(a){case d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.IMAGE_JPEG:return\"image\/jpeg\";case d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.IMAGE_PNG:return\"image\/png\";case d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.STICKER:return\"image\/webp\";case d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.GIF:return\"image\/gif\";case d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.AUDIO_MP4:return\"audio\/mp4\";case d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.AUDIO_WAV:return\"audio\/wav\";case d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.XMA:return\"xma\"}}function a(a,b,c,d){return B.apply(this,arguments)}function B(){B=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,e,f,g){if(a.length===0)return(i||(i=b(\"Promise\"))).resolve();var q=[],r=[],s=new Map(),t=new Map();a.map(function(a){var c=a.mediaData,e=a.messageTimestamp,f=E(c.plaintextHash),g=c.attachmentObjectId,h=c.attachmentType,j=c.backupEntFbid,k=c.directPath,l=c.filename,u=c.height,v=c.mediaContentType,w=c.mediaKeyTimestamp,x=c.mediaPlayableDuration,y=c.previewContentHeight,z=c.previewContentType,B=c.previewContentWidth,C=c.size;c=c.width;var D=d(\"WAMediaUtils\").stringToPlaintextHash(f),I=d(\"MAWMediaUtils\").genHMACPlaintextHash(D);r.push(I);v=v!=null?d(\"MAWFrontendMediaUtils\").getMediaTypeAndServerMediaTypeFromBlob(v,a.isXMA):z!=null?d(\"MAWFrontendMediaUtils\").getMediaTypeAndServerMediaTypeFromBlob(A(z)):null;if(v==null){d(\"WALogger\").ERROR(p());return(i||(i=b(\"Promise\"))).resolve()}if(h===d(\"EchoMessageMediaFieldUtils\").AttachmentType.DOCUMENT&&!d(\"MAWSupportedDocumentTypes\").isAllowedType(l)){d(\"WALogger\").ERROR(o());return(i||(i=b(\"Promise\"))).resolve()}z=a.mediaData.encryptedHash;if(z==null&&!a.isXMA){d(\"WALogger\").ERROR(n());return(i||(i=b(\"Promise\"))).resolve()}h=v.mediaType;v=v.serverMediaType;g=d(\"WAMediaUtils\").stringToDeliveryObjectId(g);j=j!=null?d(\"WAMediaUtils\").stringToBackupEntFbid(j):void 0;var J=a.threadJId,K=F({filename:l,height:u,mediaPlayableDuration:x,mediaType:h,previewContentHeight:y,previewContentWidth:B,width:c});t.set(g,{filename:l,height:u,mediaPlayableDuration:x,mediaType:h,messageTimestamp:e,plaintextHash:D,previewContentHeight:y,previewContentWidth:B,serverMediaType:v,threadJId:J,width:c});u=null;if(a.previewMediaData!=null)try{u=H(a.previewMediaData)}catch(a){d(\"WALogger\").ERROR(m(),a)}if(z!=null){x=G(f,z,a.mediaData.mediaKey,k,w,v,l,j,g,u);q.push({entry:x,fbId:j,hashedPlaintextHash:I,isXMAShare:a.isXMA,mediaInfo:K,mediaType:h,msgId:a.msgId,objectId:g,plaintextHash:D,size:(e=C)!=null?e:0})}B=(y=s.get(I))!=null?y:[];B.push(a);s.set(I,B)});var u=(yield C(q,e,f));a=(yield z(r));a.forEach(function(a,b){var e=s.get(b);e==null?void 0:e.forEach(function(e){if(e==null)return;if(a!=null){d(\"WALogger\").LOG(l(),e.externalId);var f=u.find(function(a){return a.plaintextHash===e.mediaData.plaintextHash});if(f==null){d(\"WALogger\").LOG(k(),e.mediaData.mediaKey);return}d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"NewMedia\",value:d(\"MAWBridgeTypesCreators\").createBridgeMedia(e.chatId,e.threadJId,f,!0)}]});return}f=d(\"MAWTraceUtils\").startNewTrace((h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceType\").ENCRYPTED_BACKUPS_MEDIA_RESTORE),y);d(\"MAWTraceUtils\").recordCheckpointForTrace(f,h.ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_RESTORE_START),[],!1);var i=t.get(d(\"WAMediaUtils\").stringToDeliveryObjectId(e.mediaData.attachmentObjectId));if(e==null||i==null)return;var m=i.filename,n=i.height,o=i.mediaPlayableDuration,p=i.mediaType,r=i.messageTimestamp,s=i.plaintextHash,v=i.previewContentHeight,w=i.previewContentWidth,x=i.serverMediaType,z=i.threadJId;i=i.width;var A=d(\"WAJids\").extractUserId(d(\"MAWJids\").toUserJid(e.threadJId));x=d(\"MAWCastToMsgrServerMediaType\").castToMsgrServerMediaType(x,e.isXMA);if(x!=null){x={attachmentFbId:e.mediaData.backupEntFbid,attachmentObjectId:d(\"WAMediaUtils\").stringToDeliveryObjectId(e.mediaData.attachmentObjectId),chatId:e.chatId,mediaType:x,messageId:e.externalId,messageTimeStamp:e.messageTimestamp,productType:d(\"MAWGlobals\").getConfig().productTypeForEBAttachments,threadId:A,threadJid:z};A=q.find(function(a){return a.hashedPlaintextHash===b});A=A==null?void 0:A.entry;if(A==null){d(\"WALogger\").ERROR(j(),e.mediaData.mediaKey);return}void I({author:e.author,directPath:e.mediaData.directPath,echoMsg:e.echoMsg,externalId:e.externalId,filename:m,hashedPlaintextHash:b,height:n,isXMA:e.isXMA,mediaPlayableDuration:o,mediaType:p,messageTimestamp:r,plaintextHash:s,previewContentHeight:v,previewContentWidth:w,threadJId:z,width:i},f,x,void 0,d(\"WAMediaUtils\").decodeMediaEntryData(A),g)}})})});return B.apply(this,arguments)}var C=(e=d(\"MAWIndexedDb\")).makeMsgrTransactor({media:(f=d(\"MAWTransactionMode\")).READWRITE,mediaBackup:f.READWRITE,messages:f.READWRITE},\"restoreLinkMedias\",function(a){return function(b,c,e){return d(\"MAWMediaManagementTxns\").bulkLinkMedia(a,b,c,e)}}),D=e.makeMsgrTransactor({chunk:f.READONLY},\"getChunksByHash\",function(a){return function(b){return d(\"MAWDbChunkTxns\").maybeBulkGetChunksFromHash(a,b)}});function E(a){if(a.endsWith(\"=\")){var b=\"\";for(var c=0;c<a.length;c++){var d=a.charAt(c);if(d===\"=\")return b;b+=d}}return a}function F(a){var b=a.height,c=a.mediaType,e=a.width,f=a.previewContentHeight,g=a.previewContentWidth,h=a.mediaPlayableDuration;a=a.filename;return{validatedAudioInfo:c===\"Ptt\"&&h!=null?{duration:h,mimetype:d(\"MAWAsConsumerApplication\").AUDIO_MIME_TYPE,played:!1}:null,validatedDocumentFileInfo:c===\"DocumentFile\"?{filename:a,mimetype:d(\"MAWAsConsumerApplication\").FILE_MIME_TYPE}:null,validatedImageInfo:c===\"Image\"?{height:b,jpegThumbnailHeight:f,jpegThumbnailWidth:g,width:e}:c===\"Gif\"||c===\"Sticker\"?{height:b,jpegThumbnailHeight:b,jpegThumbnailWidth:e,width:e}:null,validatedVideoInfo:c===\"Video\"?{height:b,jpegThumbnailHeight:f,jpegThumbnailWidth:g,mimetype:d(\"MAWAsConsumerApplication\").VIDEO_MIME_TYPE,width:e}:null}}function G(a,b,c,e,f,g,h,i,j,k){a=d(\"WABase64\").decodeB64UrlSafe(a,!0);b=d(\"WABase64\").decodeB64UrlSafe(b,!0);c=d(\"WABase64\").decodeB64UrlSafe(c,!0);return d(\"WAMediaUtils\").rawDataToMediaEntry(a,b,c,e,d(\"WATimeUtils\").castToUnixTime(f),g,j!=null?j:void 0,i!=null?i:void 0,k!=null?k:void 0,h)}function H(a){var b=a.attachmentObjectId,c=a.directPath,e=a.encryptedHash,f=a.mediaKey,g=a.mediaKeyTimestamp;a=a.plaintextHash;if(e==null){d(\"WALogger\").ERROR(x());return}else{g=d(\"WATimeUtils\").castToUnixTime(g);f=d(\"WAMediaUtils\").castToMediaKey(d(\"WABase64\").decodeB64UrlSafe(f,!0));a=d(\"WABase64\").decodeB64UrlSafe(a,!0);e=d(\"WABase64\").decodeB64UrlSafe(e,!0);return{directPath:c,fileEncSha256:e,fileSha256:a,mediaKey:f,mediaKeyTimestamp:g,objectId:b}}}var I=function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,e,f,g,i){var j,k;d(\"WALogger\").LOG(w());var l=a.author,m=a.externalId,n=a.filename,o=a.hashedPlaintextHash,p=a.height,q=a.mediaPlayableDuration,r=a.mediaType,x=a.messageTimestamp,y=a.plaintextHash,z=a.previewContentHeight,A=a.previewContentWidth,B=a.threadJId,C=a.width,D=d(\"WAJids\").switchOnMsgrChatJidType(B,{group:function(a){return\"group\"},user:function(a){return\"user\"}});j=((j=(j=d(\"MAWMediaRetryInfo\").getRetriedMediaInfo(m))==null?void 0:j.isXMA)!=null?j:!1)||((j=a==null?void 0:a.isXMA)!=null?j:!1);k=((k=d(\"MAWMediaRetryInfo\").getRetriedMediaInfo(m))==null?void 0:(k=k.echoMsg)==null?void 0:k.serializationOrigin)||(a==null?void 0:(k=a.echoMsg)==null?void 0:k.serializationOrigin)||d(\"EchoMessage\").EchoSerializationOriginType.UNKNOWN;var E=(yield d(\"WebStorageEstimator\").estimateStorage());D=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.MEDIA_DOWNLOAD,{bool:{isRetryFromMI:e==null,isXMA:j,pathMismatch:f!==g.directPath},\"int\":{storageQuota:(E==null?void 0:E.quota)||0,storageUsage:(E==null?void 0:E.usage)||0},string:{chat_type:D,downloadEntry:\"handleEchoMediaMsgsRestore\",oldDirectPath:(j=a==null?void 0:a.oldDirectPath)!=null?j:\"\",origin:k,restorationCdnUrl:(E=f)!=null?E:\"\"}});if(e!=null&&c(\"gkx\")(\"23960\")){d(\"WALogger\").LOG(v());d(\"MAWMediaRetryInfo\").setRetriedMediaInfo(m,a);return J(m,e,b)}j={author:l,chat:B,externalId:m};k=(yield d(\"MAWDownloadMedia\").downloadMedia(j,y,g,D));if(k.success){f=k.value;E=f.mimeType;l=f.plaintext;yield d(\"MAWHandleMediaDownloadApi\").handleMediaDownload(y,E,l,j);D.endSuccess();d(\"MAWMediaRetryInfo\").clearRetriedMediaInfo(m);B=F({filename:n,height:p,mediaPlayableDuration:q,mediaType:r,previewContentHeight:z,previewContentWidth:A,width:C});yield K(o,B);d(\"WALogger\").LOG(u());d(\"MAWTraceUtils\").recordSuccessAndFlushForTraceId(b,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_RESTORE_SUCCESS),[]);e==null&&b!=null&&d(\"MAWQplProxy\").sendQPLSuccessThroughBridge(c(\"qpl\")._(521485815,\"2166\"),void 0,d(\"WAHashStringToNumber\").hashStringToNumber(b))}else{g=k.error;L(g)&&e?(D.addPoint(\"eb_resign_requested\"),D.endSuccess(),d(\"WALogger\").WARN(t()),d(\"MAWMediaRetryInfo\").setRetriedMediaInfo(m,a),yield J(m,e,b,i)):(D.endFail(g),d(\"WALogger\").ERROR(s(),m,g,x),d(\"MAWMediaRetryInfo\").clearRetriedMediaInfo(m),d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(b,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_RESTORE_FAILURE),[],\"media download failed with error: \"+g),d(\"MAWEBBackendQPLUtils\").logMediaRestoreFromMIQPLEndFailure(b,\"media_download_failure\"))}});return function(b,c,d,e,f,g){return a.apply(this,arguments)}}(),J=e.makeMsgrTransactor({media:f.READONLY,mediaBackup:f.READONLY},\"invokeRestoreAccessCheckSprocToDownloadAttachment\",function(a){return function(b,e,f,g){var i=d(\"WAMediaUtils\").stringToDeliveryObjectId(e.attachmentObjectId);return d(\"MAWDbMediaTxns\").maybeGetMediaFromObjectId(a,i).then(function(a){if(a){var i;if(f!=null&&e!=null){var j;a=d(\"WAHashStringToNumber\").hashStringToNumber(f);j={bool:{isPointRestore:(j=g)!=null?j:!1},string:{mediaType:e.mediaType}};i=d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(521485815,\"2166\"),j,a)}d(\"WATagsLogger\").TAGS([\"labyrinth_web\",\"media_restore\",(j=f)!=null?j:\"\"]).LOG(r(),g);g===!0?i!=null&&i.endSuccess():d(\"MAWIndexedDb\").afterTransaction({tag:\"ResignAttachmentCDNUrl\",value:{backupEntFbid:e.attachmentFbId,chatId:e.chatId.toString(),deliveryObjectId:e.attachmentObjectId,mediaType:e.mediaType,messageId:b,productType:d(\"MAWGlobals\").getConfig().productTypeForEBAttachments,sortOrder:e.messageTimeStamp,threadId:e.threadId,threadJid:e.threadJid,traceId:f}})}else d(\"WALogger\").ERROR(q()),d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(f,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_RESTORE_FAILURE),[],\"media entry is missing from index db. It is required to retry download by resigning cdn url\")})}}),K=e.makeMsgrTransactor({media:f.READWRITE,messages:f.READWRITE},\"updateMediaWithDownloadedChunkBlob\",function(a){return function(b,c){return d(\"MAWMediaManagementTxns\").updateMediaEntryWithValidatedMediaInfo(a,b,c)}}),L=function(a){switch(a){case\"signature-expired\":case\"signature-expired-and-resign-failed-no-ids\":case\"signature-expired-and-resign-failed-cdn-url\":return!0;case\"hash-mismatch\":case\"ciphertext-hash-mismatch\":case\"enc-hash-mismatch\":case\"decryption-error\":case\"max-attempts-exceeded\":case\"request-error\":case\"download-throttled\":case\"media-not-found\":case\"media-entry-invalid\":case\"no-media-entry-no-message\":case\"no-media-entry-missing-messages\":case\"no-media-entry-by-plaintext-hash\":case\"no-host\":case\"backoff\":case\"disconnected\":case\"missing-media-on-save\":case\"runtime-error\":return!1;default:a;return!0}};g.downloadMediaAndWriteToMediaStore=a;g.handleDownloadMedia=I;g.invokeRestoreAccessCheckSprocToDownloadAttachment=J;g.isResignCDNError=L}),98);\n__d(\"MAWAcceptGroupInvite\",[\"MAWDbChatId\",\"MAWGlobals\",\"MAWJids\",\"WADeprecatedSendIq\",\"WADeprecatedWapParser\",\"WAJids\",\"WALogger\",\"WAPersistedJobManager\",\"WATimeUtils\",\"WAWap\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"acceptGroupInvite failed to get group invite info \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"acceptGroupInvite failed to get group jid for \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"acceptGroupInvite failed to get thread jid for \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"acceptGroupInvite called\"]);k=function(){return a};return a}var l=new(c(\"WADeprecatedWapParser\"))(\"getAcceptGroupInviteResponse\",function(a){a.assertTag(\"iq\"),a.assertAttr(\"type\",\"result\")});a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"saveAndPassOff\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){d(\"WALogger\").LOG(k());var b=a.chatId,c=a.inviteCode,e=a.invitedParticipantUserId,f=a.inviteExpirationTs;a=a.inviterUserId;b=d(\"MAWDbChatId\").unsafeCoerceToChatId(b);a=d(\"MAWJids\").toUserJid(a);e=d(\"MAWJids\").toUserJid(e);var g=(yield d(\"MAWGlobals\").getDbImpls().getThreadJidByChatId(b)),m;if(c!=null&&f!=null){if(g==null){d(\"WALogger\").DEV(j(),b);return!1}m=d(\"WAJids\").interpretAsGroupJid(g);if(m==null){d(\"WALogger\").DEV(i(),g);return!1}c=c;f=f}else{b=(yield d(\"MAWGlobals\").getDbImpls().getGroupInvite(b,a,e));if(!b.success){d(\"WALogger\").DEV(h(),b.error);return!1}m=b.value.groupJid;c=b.value.groupInvite.inviteCode;f=b.value.groupInvite.inviteExpirationTs}b=d(\"WAWap\").wap(\"iq\",{id:d(\"WAWap\").generateId(),to:d(\"WAWap\").GROUP_JID(m),type:\"set\",xmlns:\"w:g2\"},d(\"WAWap\").wap(\"accept\",{admin:d(\"WAWap\").USER_JID(a),code:d(\"WAWap\").CUSTOM_STRING(c),expiration:d(\"WAWap\").LONG_INT(f)}));m=(yield d(\"WADeprecatedSendIq\").deprecatedSendIq(b,l));if(!m.success){a=m.errorCode.toString().startsWith(\"5\");if(a)throw new(d(\"WAPersistedJobManager\").RetryOnBackoff)({algo:{first:d(\"WATimeUtils\").HOUR_MILLISECONDS\/60,type:\"exponential\"},jitter:.1});return!1}g!=null&&(yield d(\"MAWGlobals\").getDbImpls().removeGroupInvites(g,e));return!0});return function(b){return a.apply(this,arguments)}}()).end();g.acceptGroupInvite=a}),98);\n__d(\"WAGetDevices\",[\"Promise\",\"WADevicesState\",\"WAJobs\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"fetchAndSaveDevices: \",\"\"]);i=function(){return a};return a}function j(a,c,e){e===void 0&&(e=!1);d(\"WALogger\").LOG(i(),c);return(h||(h=b(\"Promise\"))).resolve().then(function(){if(e)return d(\"WADevicesState\").getDevicesState().reset(Array.from(a))}).then(function(){return d(\"WADevicesState\").getDevicesState().waitForUserDevices(Array.from(a),\"getDevices job: \"+c,e)})}a=d(\"WAJobs\").getPersistedJobsApi().definePersistedJob().finalStep(\"getDevices\",function(a){var b=a.users,c=a.reason;a=a.ignoreDhash;return j(b,c,a)}).end();g.fetchAndSaveDevices=j;g.getDevices=a}),98);\n__d(\"MAWCreateGroupInvitesStep\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"WAAddGroupParticipantsApi\",\"WAGetDevices\",\"WAJids\",\"asyncToGeneratorRuntime\",\"isGroupInvitesEnabled\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,e,f){f===void 0&&(f=!0);if(!c(\"isGroupInvitesEnabled\")()||e.length===0)return[];var g=e.map(function(a){return a.user}),h=e.map(function(a){return{addressable:!0,type:\"invitedParticipant\",user:a.user}});yield d(\"WAGetDevices\").fetchAndSaveDevices(new Set(g),\"create-group-invite\");f||(yield d(\"WAAddGroupParticipantsApi\").addGroupParticipants(null,a,d(\"WAJids\").AUTHOR_ME,h,!0));e.forEach(function(c){var e=c.user,f=c.inviteCode;c=c.expiration;d(\"MAWGlobals\").getJobManager().fireAndForget(d(\"MAWJobDefinitions\").jobSerializers.sendGroupInviteMsg({expiration:c,groupJid:a,inviteCode:f,invitedParticipantUserJid:e,inviterUserJid:b}))});return h});return h.apply(this,arguments)}g.createGroupInvitesStep=a}),98);\n__d(\"WASmaxInGroupsIQErrorBadRequestMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"bad-request\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",400);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorFallbackClientMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrString(a,\"text\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").attrIntRange(a,\"code\",400,499);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackClientMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorForbiddenMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"forbidden\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",403);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorItemNotFoundMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"item-not-found\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",404);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorItemNotFoundMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorLockedMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"locked\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",423);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorLockedMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorNotAllowedMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"not-allowed\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",405);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAllowedMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorNotAuthorizedMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"not-authorized\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",401);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAuthorizedMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorRateOverlimitMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"rate-overlimit\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",429);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);\n__d(\"WASmaxInGroupsAddParticipantsClientErrors\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorBadRequestMixin\",\"WASmaxInGroupsIQErrorFallbackClientMixin\",\"WASmaxInGroupsIQErrorForbiddenMixin\",\"WASmaxInGroupsIQErrorItemNotFoundMixin\",\"WASmaxInGroupsIQErrorLockedMixin\",\"WASmaxInGroupsIQErrorNotAllowedMixin\",\"WASmaxInGroupsIQErrorNotAuthorizedMixin\",\"WASmaxInGroupsIQErrorRateOverlimitMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsIQErrorBadRequestMixin\").parseIQErrorBadRequestMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorBadRequest\",value:b.value});var c=d(\"WASmaxInGroupsIQErrorItemNotFoundMixin\").parseIQErrorItemNotFoundMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorItemNotFound\",value:c.value});var e=d(\"WASmaxInGroupsIQErrorNotAuthorizedMixin\").parseIQErrorNotAuthorizedMixin(a);if(e.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorNotAuthorized\",value:e.value});var f=d(\"WASmaxInGroupsIQErrorForbiddenMixin\").parseIQErrorForbiddenMixin(a);if(f.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorForbidden\",value:f.value});var g=d(\"WASmaxInGroupsIQErrorRateOverlimitMixin\").parseIQErrorRateOverlimitMixin(a);if(g.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorRateOverlimit\",value:g.value});var h=d(\"WASmaxInGroupsIQErrorNotAllowedMixin\").parseIQErrorNotAllowedMixin(a);if(h.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorNotAllowed\",value:h.value});var i=d(\"WASmaxInGroupsIQErrorLockedMixin\").parseIQErrorLockedMixin(a);if(i.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorLocked\",value:i.value});var j=d(\"WASmaxInGroupsIQErrorFallbackClientMixin\").parseIQErrorFallbackClientMixin(a);return j.success?d(\"WAResultOrError\").makeResult({name:\"IQErrorFallbackClient\",value:j.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"IQErrorBadRequest\",\"IQErrorItemNotFound\",\"IQErrorNotAuthorized\",\"IQErrorForbidden\",\"IQErrorRateOverlimit\",\"IQErrorNotAllowed\",\"IQErrorLocked\",\"IQErrorFallbackClient\"],[b,c,e,f,g,h,i,j])}g.parseAddParticipantsClientErrors=a}),98);\n__d(\"WASmaxInGroupsIQErrorResponseMixin\",[\"WAResultOrError\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!c.success)return c;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",c.value);if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!c.success)return c;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",c.value);if(!b.success)return b;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"error\");return!c.success?c:d(\"WAResultOrError\").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);\n__d(\"WASmaxInGroupsAddParticipantsResponseClientError\",[\"WAResultOrError\",\"WASmaxInGroupsAddParticipantsClientErrors\",\"WASmaxInGroupsIQErrorResponseMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;a=d(\"WASmaxInGroupsIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxInGroupsAddParticipantsClientErrors\").parseAddParticipantsClientErrors(c.value);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{errorAddParticipantsClientErrors:b.value}))}g.parseAddParticipantsResponseClientError=a}),98);\n__d(\"WASmaxInGroupsIQErrorFallbackServerMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrString(a,\"text\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").attrIntRange(a,\"code\",500,599);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackServerMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorInternalServerErrorMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"internal-server-error\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",500);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorPartialServerErrorMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"partial-server-error\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",530);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorPartialServerErrorMixin=a}),98);\n__d(\"WASmaxInGroupsIQErrorServiceUnavailableMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"service-unavailable\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",503);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);\n__d(\"WASmaxInGroupsServerErrors\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorFallbackServerMixin\",\"WASmaxInGroupsIQErrorInternalServerErrorMixin\",\"WASmaxInGroupsIQErrorPartialServerErrorMixin\",\"WASmaxInGroupsIQErrorServiceUnavailableMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsIQErrorInternalServerErrorMixin\").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorInternalServerError\",value:b.value});var c=d(\"WASmaxInGroupsIQErrorServiceUnavailableMixin\").parseIQErrorServiceUnavailableMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorServiceUnavailable\",value:c.value});var e=d(\"WASmaxInGroupsIQErrorPartialServerErrorMixin\").parseIQErrorPartialServerErrorMixin(a);if(e.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorPartialServerError\",value:e.value});var f=d(\"WASmaxInGroupsIQErrorFallbackServerMixin\").parseIQErrorFallbackServerMixin(a);return f.success?d(\"WAResultOrError\").makeResult({name:\"IQErrorFallbackServer\",value:f.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"IQErrorInternalServerError\",\"IQErrorServiceUnavailable\",\"IQErrorPartialServerError\",\"IQErrorFallbackServer\"],[b,c,e,f])}g.parseServerErrors=a}),98);\n__d(\"WASmaxInGroupsBaseServerErrorMixin\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorResponseMixin\",\"WASmaxInGroupsServerErrors\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;a=d(\"WASmaxInGroupsIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxInGroupsServerErrors\").parseServerErrors(c.value);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{errorServerErrors:b.value}))}g.parseBaseServerErrorMixin=a}),98);\n__d(\"WASmaxInGroupsAddParticipantsResponseServerError\",[\"WASmaxInGroupsBaseServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxInGroupsBaseServerErrorMixin\").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseAddParticipantsResponseServerError=a}),98);\n__d(\"WASmaxInGroupsParticipantConflictMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"409\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantConflictMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantGroupJoinRequestMixin\",[\"WAResultOrError\",\"WASmaxInGroupsEnums\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"membership_approval_request\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"421\");if(!a.success)return a;b=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrStringEnum,b.value,\"error\",d(\"WASmaxInGroupsEnums\").ENUM_304_419);return!b.success?b:d(\"WAResultOrError\").makeResult({error:a.value,membershipApprovalRequestError:b.value})}g.parseParticipantGroupJoinRequestMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantHasInvalidPNMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"404\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantHasInvalidPNMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantInBanListMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"402\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantInBanListMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantNotAcceptableMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"406\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantNotAcceptableMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantNotAuthorizedMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"401\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantNotAuthorizedMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantRequestCodeCanBeSentMixin\",[\"WAResultOrError\",\"WASmaxInGroupsParticipantNotAddressableMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"add_request\");if(!b.success)return b;var c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"403\");if(!c.success)return c;var e=d(\"WASmaxParseUtils\").attrString(b.value,\"code\");if(!e.success)return e;b=d(\"WASmaxParseUtils\").attrIntRange(b.value,\"expiration\",0,void 0);if(!b.success)return b;a=d(\"WASmaxInGroupsParticipantNotAddressableMixin\").parseParticipantNotAddressableMixin(a);return d(\"WAResultOrError\").makeResult({error:c.value,addRequestCode:e.value,addRequestExpiration:b.value,participantNotAddressableMixin:a.success?a.value:null})}g.parseParticipantRequestCodeCanBeSentMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantRequestCodeCannotBeCreatedForLegalConcernsMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"451\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantRequestCodeCannotBeCreatedForLegalConcernsMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantResourceConstraintMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"500\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantResourceConstraintMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantResourceLimitMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"419\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantResourceLimitMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantTemporarilyBlockedFromDefaultSubGroupMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"417\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantTemporarilyBlockedFromDefaultSubGroupMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantTemporarilyBlockedMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"408\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantTemporarilyBlockedMixin=a}),98);\n__d(\"WASmaxInGroupsAddParticipantsParticipantMixins\",[\"WAResultOrError\",\"WASmaxInGroupsParticipantConflictMixin\",\"WASmaxInGroupsParticipantGroupJoinRequestMixin\",\"WASmaxInGroupsParticipantHasInvalidPNMixin\",\"WASmaxInGroupsParticipantInBanListMixin\",\"WASmaxInGroupsParticipantNotAcceptableMixin\",\"WASmaxInGroupsParticipantNotAddressableMixin\",\"WASmaxInGroupsParticipantNotAuthorizedMixin\",\"WASmaxInGroupsParticipantRequestCodeCanBeSentMixin\",\"WASmaxInGroupsParticipantRequestCodeCannotBeCreatedForLegalConcernsMixin\",\"WASmaxInGroupsParticipantResourceConstraintMixin\",\"WASmaxInGroupsParticipantResourceLimitMixin\",\"WASmaxInGroupsParticipantTemporarilyBlockedFromDefaultSubGroupMixin\",\"WASmaxInGroupsParticipantTemporarilyBlockedMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsParticipantGroupJoinRequestMixin\").parseParticipantGroupJoinRequestMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantGroupJoinRequest\",value:b.value});var c=d(\"WASmaxInGroupsParticipantNotAuthorizedMixin\").parseParticipantNotAuthorizedMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantNotAuthorized\",value:c.value});var e=d(\"WASmaxInGroupsParticipantInBanListMixin\").parseParticipantInBanListMixin(a);if(e.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantInBanList\",value:e.value});var f=d(\"WASmaxInGroupsParticipantRequestCodeCanBeSentMixin\").parseParticipantRequestCodeCanBeSentMixin(a);if(f.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantRequestCodeCanBeSent\",value:f.value});var g=d(\"WASmaxInGroupsParticipantRequestCodeCannotBeCreatedForLegalConcernsMixin\").parseParticipantRequestCodeCannotBeCreatedForLegalConcernsMixin(a);if(g.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantRequestCodeCannotBeCreatedForLegalConcerns\",value:g.value});var h=d(\"WASmaxInGroupsParticipantHasInvalidPNMixin\").parseParticipantHasInvalidPNMixin(a);if(h.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantHasInvalidPN\",value:h.value});var i=d(\"WASmaxInGroupsParticipantTemporarilyBlockedMixin\").parseParticipantTemporarilyBlockedMixin(a);if(i.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantTemporarilyBlocked\",value:i.value});var j=d(\"WASmaxInGroupsParticipantConflictMixin\").parseParticipantConflictMixin(a);if(j.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantConflict\",value:j.value});var k=d(\"WASmaxInGroupsParticipantResourceLimitMixin\").parseParticipantResourceLimitMixin(a);if(k.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantResourceLimit\",value:k.value});var l=d(\"WASmaxInGroupsParticipantResourceConstraintMixin\").parseParticipantResourceConstraintMixin(a);if(l.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantResourceConstraint\",value:l.value});var m=d(\"WASmaxInGroupsParticipantNotAcceptableMixin\").parseParticipantNotAcceptableMixin(a);if(m.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantNotAcceptable\",value:m.value});var n=d(\"WASmaxInGroupsParticipantNotAddressableMixin\").parseParticipantNotAddressableMixin(a);if(n.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantNotAddressable\",value:n.value});var o=d(\"WASmaxInGroupsParticipantTemporarilyBlockedFromDefaultSubGroupMixin\").parseParticipantTemporarilyBlockedFromDefaultSubGroupMixin(a);return o.success?d(\"WAResultOrError\").makeResult({name:\"ParticipantTemporarilyBlockedFromDefaultSubGroup\",value:o.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"ParticipantGroupJoinRequest\",\"ParticipantNotAuthorized\",\"ParticipantInBanList\",\"ParticipantRequestCodeCanBeSent\",\"ParticipantRequestCodeCannotBeCreatedForLegalConcerns\",\"ParticipantHasInvalidPN\",\"ParticipantTemporarilyBlocked\",\"ParticipantConflict\",\"ParticipantResourceLimit\",\"ParticipantResourceConstraint\",\"ParticipantNotAcceptable\",\"ParticipantNotAddressable\",\"ParticipantTemporarilyBlockedFromDefaultSubGroup\"],[b,c,e,f,g,h,i,j,k,l,m,n,o])}g.parseAddParticipantsParticipantMixins=a}),98);\n__d(\"WASmaxInGroupsAddParticipantsParticipantAddedResponseMixin\",[\"WAResultOrError\",\"WASmaxInGroupsAddParticipantsParticipantMixins\",\"WASmaxInGroupsPhoneNumberMixin\",\"WASmaxParseJid\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseJid\").attrUserJid(a,\"jid\");if(!b.success)return b;var c=d(\"WASmaxInGroupsPhoneNumberMixin\").parsePhoneNumberMixin(a);a=d(\"WASmaxInGroupsAddParticipantsParticipantMixins\").parseAddParticipantsParticipantMixins(a);return d(\"WAResultOrError\").makeResult({jid:b.value,phoneNumberMixin:c.success?c.value:null,addParticipantsParticipantMixins:a.success?a.value:null})}g.parseAddParticipantsParticipantAddedResponseMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantRequestCodeCanBeSentOrRequestCodeCannotBeCreatedForLegalConcernsOrHasInvalidPNMixinGroup\",[\"WAResultOrError\",\"WASmaxInGroupsParticipantHasInvalidPNMixin\",\"WASmaxInGroupsParticipantRequestCodeCanBeSentMixin\",\"WASmaxInGroupsParticipantRequestCodeCannotBeCreatedForLegalConcernsMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsParticipantRequestCodeCanBeSentMixin\").parseParticipantRequestCodeCanBeSentMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantRequestCodeCanBeSent\",value:b.value});var c=d(\"WASmaxInGroupsParticipantRequestCodeCannotBeCreatedForLegalConcernsMixin\").parseParticipantRequestCodeCannotBeCreatedForLegalConcernsMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantRequestCodeCannotBeCreatedForLegalConcerns\",value:c.value});var e=d(\"WASmaxInGroupsParticipantHasInvalidPNMixin\").parseParticipantHasInvalidPNMixin(a);return e.success?d(\"WAResultOrError\").makeResult({name:\"ParticipantHasInvalidPN\",value:e.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"ParticipantRequestCodeCanBeSent\",\"ParticipantRequestCodeCannotBeCreatedForLegalConcerns\",\"ParticipantHasInvalidPN\"],[b,c,e])}g.parseParticipantRequestCodeCanBeSentOrRequestCodeCannotBeCreatedForLegalConcernsOrHasInvalidPNMixinGroup=a}),98);\n__d(\"WASmaxInGroupsNonRegisteredWaUserParticipantErrorLidResponseMixin\",[\"WAResultOrError\",\"WASmaxInGroupsParticipantRequestCodeCanBeSentOrRequestCodeCannotBeCreatedForLegalConcernsOrHasInvalidPNMixinGroup\",\"WASmaxInGroupsPhoneNumberMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxInGroupsPhoneNumberMixin\").parsePhoneNumberMixin(a);if(!b.success)return b;a=d(\"WASmaxInGroupsParticipantRequestCodeCanBeSentOrRequestCodeCannotBeCreatedForLegalConcernsOrHasInvalidPNMixinGroup\").parseParticipantRequestCodeCanBeSentOrRequestCodeCannotBeCreatedForLegalConcernsOrHasInvalidPNMixinGroup(a);return!a.success?a:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},b.value,{participantRequestCodeCanBeSentOrRequestCodeCannotBeCreatedForLegalConcernsOrHasInvalidPNMixinGroup:a.value}))}g.parseNonRegisteredWaUserParticipantErrorLidResponseMixin=a}),98);\n__d(\"WASmaxInGroupsAddParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup\",[\"WAResultOrError\",\"WASmaxInGroupsAddParticipantsParticipantAddedResponseMixin\",\"WASmaxInGroupsNonRegisteredWaUserParticipantErrorLidResponseMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsAddParticipantsParticipantAddedResponseMixin\").parseAddParticipantsParticipantAddedResponseMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"AddParticipantsParticipantAddedResponse\",value:b.value});var c=d(\"WASmaxInGroupsNonRegisteredWaUserParticipantErrorLidResponseMixin\").parseNonRegisteredWaUserParticipantErrorLidResponseMixin(a);return c.success?d(\"WAResultOrError\").makeResult({name:\"NonRegisteredWaUserParticipantErrorLidResponse\",value:c.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"ParticipantAddedResponse\",\"NonRegisteredWaUserParticipantErrorLidResponse\"],[b,c])}g.parseAddParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup=a}),98);\n__d(\"WASmaxInGroupsAddParticipantsResponseSuccess\",[\"WAResultOrError\",\"WASmaxInGroupsAddParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup\",\"WASmaxInGroupsGroupAddressingModeMixin\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function h(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxInGroupsAddParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup\").parseAddParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup(a);return!b.success?b:d(\"WAResultOrError\").makeResult({addParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup:b.value})}function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"add\");if(!c.success)return c;var e=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!e.success)return e;e=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",e.value);if(!e.success)return e;e=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"result\");if(!e.success)return e;b=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",b.value);if(!b.success)return b;b=d(\"WASmaxInGroupsGroupAddressingModeMixin\").parseGroupAddressingModeMixin(a);a=d(\"WASmaxParseUtils\").mapChildrenWithTag(c.value,\"participant\",1,19999,h);return!a.success?a:d(\"WAResultOrError\").makeResult({type:e.value,groupAddressingModeMixin:b.success?b.value:null,addParticipant:a.value})}g.parseAddParticipantsResponseSuccessAddParticipant=h;g.parseAddParticipantsResponseSuccess=a}),98);\n__d(\"WASmaxOutGroupsBaseIQSetRequestMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxJsx\").smax(\"iq\",{id:d(\"WAWap\").generateId(),type:\"set\"});return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);\n__d(\"WASmaxOutGroupsBaseSetGroupMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutGroupsBaseIQSetRequestMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqTo;a=d(\"WASmaxOutGroupsBaseIQSetRequestMixin\").mergeBaseIQSetRequestMixin(d(\"WASmaxJsx\").smax(\"iq\",{to:d(\"WAWap\").GROUP_JID(a),xmlns:\"w:g2\"}));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBaseSetGroupMixin=a}),98);\n__d(\"WASmaxOutGroupsPhoneNumberMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyPhoneNumber;a=d(\"WASmaxJsx\").smax(\"smax$any\",{phone_number:d(\"WAWap\").USER_JID(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergePhoneNumberMixin=a}),98);\n__d(\"WASmaxOutGroupsAddParticipantsRequest\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutGroupsBaseSetGroupMixin\",\"WASmaxOutGroupsPhoneNumberMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){var b=a.participantJid;a=a.phoneNumberMixinArgs;b=d(\"WASmaxMixins\").optionalMerge(d(\"WASmaxOutGroupsPhoneNumberMixin\").mergePhoneNumberMixin,d(\"WASmaxJsx\").smax(\"participant\",{jid:d(\"WAWap\").USER_JID(b)}),a);return b}function a(a){var b=a.participantArgs;b=d(\"WASmaxOutGroupsBaseSetGroupMixin\").mergeBaseSetGroupMixin(d(\"WASmaxJsx\").smax(\"iq\",null,d(\"WASmaxJsx\").smax(\"add\",null,d(\"WASmaxChildren\").REPEATED_CHILD(h,b,1,1024))),a);return b}g.makeAddParticipantsRequestAddParticipant=h;g.makeAddParticipantsRequest=a}),98);\n__d(\"WASmaxGroupsAddParticipantsRPC\",[\"WAComms\",\"WASmaxInGroupsAddParticipantsResponseClientError\",\"WASmaxInGroupsAddParticipantsResponseServerError\",\"WASmaxInGroupsAddParticipantsResponseSuccess\",\"WASmaxOutGroupsAddParticipantsRequest\",\"WASmaxParsingFailure\",\"WASmaxRpcUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d(\"WASmaxOutGroupsAddParticipantsRequest\").makeAddParticipantsRequest(a);j.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAComms\").sendSmaxStanza(e,c));case 3:f=j.sent;g=d(\"WASmaxInGroupsAddParticipantsResponseSuccess\").parseAddParticipantsResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt(\"return\",{name:\"AddParticipantsResponseSuccess\",value:g.value});case 7:h=d(\"WASmaxInGroupsAddParticipantsResponseClientError\").parseAddParticipantsResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt(\"return\",{name:\"AddParticipantsResponseClientError\",value:h.value});case 10:i=d(\"WASmaxInGroupsAddParticipantsResponseServerError\").parseAddParticipantsResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt(\"return\",{name:\"AddParticipantsResponseServerError\",value:i.value});case 13:throw new(d(\"WASmaxParsingFailure\").SmaxParsingFailure)(d(\"WASmaxRpcUtils\").errorMessageRpcParsing(\"AddParticipants\",{Success:g,ClientError:h,ServerError:i}));case 14:case\"end\":return j.stop()}},null,this)}g.sendAddParticipantsRPC=a}),98);\n__d(\"MAWAddGroupParticipants\",[\"MAWCreateGroupInvitesStep\",\"MAWGlobals\",\"MAWODSProxy\",\"WAAddGroupParticipantsApi\",\"WAGlobals\",\"WAGroupInviteUtils\",\"WAJids\",\"WALogger\",\"WAOdsEnums\",\"WAResultOrError\",\"WASmaxGroupsAddParticipantsRPC\",\"WATimeUtils\",\"asyncToGeneratorRuntime\",\"nullthrows\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to add participant: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to add participant: \",\"\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"addGroupParticipants\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.group;a=a.users;var e=d(\"WAGlobals\").getJidUtilsApi(),f=e.toUserJid;e=a.map(function(a){return f(a)});if(e.length===0)return d(\"WAResultOrError\").makeResult({groupJid:b,participants:[]});a=(yield d(\"WASmaxGroupsAddParticipantsRPC\").sendAddParticipantsRPC({iqTo:b,participantArgs:e.map(function(a){return{participantJid:a}})}));d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_ADD_PARTICIPANT,key:a.name===\"AddParticipantsResponseSuccess\"?\"success\":\"fail\"});if(a.name===\"AddParticipantsResponseClientError\"){e=a.value.errorAddParticipantsClientErrors.name;d(\"WALogger\").ERROR(i(),e);return d(\"WAResultOrError\").makeError(e)}if(a.name===\"AddParticipantsResponseServerError\"){e=a.value.errorServerErrors.name;d(\"WALogger\").ERROR(h(),e);return d(\"WAResultOrError\").makeError(e)}a.name;e=a.value.addParticipant.filter(function(a){a=a.addParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup;a=a.value.addParticipantsParticipantMixins;return(a==null?void 0:a.value.error)==null}).map(function(a){a=a.addParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup;a=a.value;var b=a.addParticipantsParticipantMixins;a=a.jid;a=c(\"nullthrows\")(a);return{addressable:(b==null?void 0:b.name)!==\"ParticipantNotAddressable\",type:\"participant\",user:a}});yield d(\"WAAddGroupParticipantsApi\").addGroupParticipants(null,b,d(\"WAJids\").AUTHOR_ME,e,!0);a=(yield d(\"MAWCreateGroupInvitesStep\").createGroupInvitesStep(b,d(\"WAGlobals\").getMyUserJid(),a.value.addParticipant.map(function(a){a=a.addParticipantsParticipantAddedOrNonRegisteredWaUserParticipantErrorLidResponseMixinGroup;a=a.value;var b=a.addParticipantsParticipantMixins;a=a.jid;a=c(\"nullthrows\")(a);return(b==null?void 0:b.name)===\"ParticipantRequestCodeCanBeSent\"?{expiration:d(\"WATimeUtils\").castToUnixTime(b.value.addRequestExpiration),inviteCode:d(\"WAGroupInviteUtils\").toInviteCode(b.value.addRequestCode),user:a}:void 0}).filter(Boolean),!1));e=[].concat(e,a);a=(yield d(\"MAWGlobals\").getJobResultConvertersImpls().convertAddGroupParticipantsResult==null?void 0:d(\"MAWGlobals\").getJobResultConvertersImpls().convertAddGroupParticipantsResult(b,e));return a?d(\"WAResultOrError\").makeResult(a):d(\"WAResultOrError\").makeResult({groupJid:b,participants:e})});return function(b){return a.apply(this,arguments)}}()).end();g.addGroupParticipants=a}),98);\n__d(\"MAWBackupMessageWithMedia\",[\"LSDataTraceCheckPoint\",\"LSIntEnum\",\"MAWDbMsgTxns\",\"MAWEBSwitch\",\"MAWEBUploadTrackingUtils\",\"MAWGetMediaByObjectId\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWTraceUtils\",\"MAWTransactionMode\",\"MAWUploadMessagesBackup\",\"WALogger\",\"WASortedLists\",\"asyncToGeneratorRuntime\",\"err\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] No affected messages for media\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] No mediaBackup entry found for fbid: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] No media entry found for fbid: \",\"\"]);k=function(){return a};return a}var l=d(\"MAWIndexedDb\").makeMsgrTransactor({messages:d(\"MAWTransactionMode\").READONLY},\"getMsgsByMsgIds\",function(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d(\"MAWDbMsgTxns\").getMsgsByMsgIds.apply(void 0,[a].concat(c))}});function m(a,b,c){return n.apply(this,arguments)}function n(){n=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,e){if(!c(\"MAWEBSwitch\").isEnabled())return;var f=null;if(!c(\"gkx\")(\"23919\")){var g=(yield d(\"MAWGetMediaByObjectId\").getMediaByObjectId(b));if(!g.success){d(\"WALogger\").ERROR(k(),a);d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(e,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_FAILURE),[],\"No media entry found\");throw c(\"err\")(\"No media entry found\")}f=g.value.msgIds}else{g=(yield d(\"MAWGetMediaByObjectId\").getMediaBackupByObjectId(b));if(!g.success){d(\"WALogger\").ERROR(j(),a);d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(e,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_FAILURE),[],\"No media entry found\");throw c(\"err\")(\"No mediaBackup entry found\")}g.value.msgId!=null&&(f=d(\"WASortedLists\").asSortedSet(new Set([g.value.msgId])))}if(f==null||f.length===0){d(\"WALogger\").ERROR(i());d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(e,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_FAILURE),[],\"No affected messages for media\");throw c(\"err\")(\"No affected messages for media\")}b=(yield l(f));var m=new Map();b.forEach(function(a){if(d(\"MAWEBUploadTrackingUtils\").isUploadSupported(a)){var b=d(\"MAWEBUploadTrackingUtils\").genInstanceKeyOnly();m.set(a.externalId,b);d(\"MAWEBUploadTrackingUtils\").startUploadTracking(a.externalId,a.type,\"media\",b)}});yield d(\"MAWUploadMessagesBackup\").uploadUniqueMessage(b,void 0,void 0,void 0,m);d(\"MAWTraceUtils\").recordCheckpointForTrace(e,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_SUCCESS),[],!1);d(\"MAWTraceUtils\").recordCheckpointForTrace(e,h.ofNumber(c(\"LSDataTraceCheckPoint\").FLOW_END_AND_FLUSH),[],!0)});return n.apply(this,arguments)}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"backup\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.backupEntFbid,c=a.deliveryObjectId;a=a.traceId;yield m(b,c,a)});return function(b){return a.apply(this,arguments)}}()).end();g.processUpload=m;g.backupMessageWithMedia=a}),98);\n__d(\"MAWCreateGroupStep\",[\"MAWCreateGroupInvitesStep\",\"MAWSendSenderKeyDistributionMsg\",\"WADeprecatedSendIq\",\"WADeprecatedWapParser\",\"WAGlobals\",\"WAGroupParserUtils\",\"WAJobDefinitions\",\"WAJobOrchestratorTypes\",\"WAJobs\",\"WALogger\",\"WAPREList\",\"WAPREMetrics\",\"WAResultOrError\",\"WAScheduleAfterOfflineResume\",\"WATimeUtils\",\"WAWap\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to create group: \",\"\"]);h=function(){return a};return a}var i=new(c(\"WADeprecatedWapParser\"))(\"createGroupResponse\",function(a){a.assertTag(\"iq\");return d(\"WAGroupParserUtils\").parseGroupNode(a.child(\"group\"))});function a(a,b,c,d){return j.apply(this,arguments)}function j(){j=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c,e){var f=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.CREATE_GROUP,{\"int\":{users:c.length}}),g=d(\"WAGlobals\").getJidUtilsApi(),h=g.toUserJid;g=c.map(function(a){return h(a)});c=(yield k(a,b,g,f,e==null?void 0:e.deduplicationKey));f.addPoint(\"finish_send_create_group_stanza\");if(!c.success)return c;var i=c.value.group;f.addPoint(\"start_create_group\");yield d(\"WAGlobals\").getDbImpls().createGroup(i,\"added\",d(\"WATimeUtils\").unixTime(),null,a,e);f.addPoint(\"finish_create_group\");d(\"WAScheduleAfterOfflineResume\").scheduleAfterOfflineResume({code:function(){return d(\"MAWSendSenderKeyDistributionMsg\").maybePreEstablishSessionsAndSendSenderKeyDistributionMsg(i.jid,i.participants.map(function(a){return a.success?a.value.user:null}).filter(Boolean))},id:i.jid+\"-e2e-session\"});b=i.participants.map(function(a){return a.success?a.value.user:void 0}).filter(Boolean);yield d(\"WAJobs\").getJobManager().waitUntilPersisted(d(\"WAJobDefinitions\").createStartJobInfo(\"getDevices\",{ignoreDhash:!1,reason:\"create-group\",scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.LOW},users:new Set(b)}));f.addPoint(\"persist_get_devices_create_group\");yield d(\"MAWCreateGroupInvitesStep\").createGroupInvitesStep(i.jid,(g=i.creator)!=null?g:d(\"WAGlobals\").getMyUserJid(),i.participants.map(function(a){return!a.success&&a.error.errorCode===403?{expiration:a.error.expiration,inviteCode:a.error.code,user:a.error.user}:void 0}).filter(Boolean));f.addPoint(\"finish_create_group_invites_step\");c=d(\"WAJobs\").getJobResultConvertersImpls().convertCreateGroupResult;a=c?yield c(i):{group:i,type:\"default\"};f.endSuccess();return d(\"WAResultOrError\").makeResult(a)});return j.apply(this,arguments)}function k(a,b,c,e,f){var g;c=c.map(function(a){return d(\"WAWap\").wap(\"participant\",{jid:d(\"WAWap\").USER_JID(a)})});g=(g=d(\"WAWap\")).wap(\"iq\",{id:g.generateId(),to:g.G_US,type:\"set\",xmlns:\"w:g2\"},g.wap(\"create\",{id:a!=null?d(\"WAWap\").CUSTOM_STRING(a):d(\"WAWap\").DROP_ATTR,key:f!=null?d(\"WAWap\").CUSTOM_STRING(f):d(\"WAWap\").DROP_ATTR,subject:b!=null?d(\"WAWap\").CUSTOM_STRING(b):d(\"WAWap\").DROP_ATTR},c));return d(\"WADeprecatedSendIq\").deprecatedSendIq(g,i).then(function(a){if(!a.success){d(\"WALogger\").ERROR(h(),a.errorCode);e.endFail(\"fail_send_create_group_stanza\",{\"int\":{errorCode:a.errorCode}});return d(\"WAResultOrError\").makeError(a.errorText)}return d(\"WAResultOrError\").makeResult({group:a.result,type:\"default\"})})}g.createGroupStep=a}),98);\n__d(\"MAWCreateGroup\",[\"MAWCreateGroupStep\",\"MAWGlobals\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"createGroup\",function(a){var b=a.extras,c=a.key,e=a.subject;a=a.users;return d(\"MAWCreateGroupStep\").createGroupStep(c,e,a,b)}).end();g.createGroup=a}),98);\n__d(\"MAWDeleteGroups\",[\"MAWGlobals\",\"WAJids\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"deleteGroups\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.groups;yield d(\"MAWGlobals\").getDbImpls().deleteGroups(a.map(function(a){return{deleter:d(\"WAJids\").AUTHOR_ME,group:a}}))});return function(b){return a.apply(this,arguments)}}()).end();g.deleteGroups=a}),98);\n__d(\"MAWDeleteMsgsForMe\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"deleteMsgsForMe: \",\"\"]);h=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"saveAndPassOff\",function(a){a=a.msgIds;d(\"WALogger\").DEV(h(),a);a=a.map(function(a){return{protocolMsgId:a,type:\"delete_for_me\"}});a=a.map(function(a){return{messageAction:a}});a={actions:a,type:\"meta_sync\"};return d(\"MAWGlobals\").getJobManager().waitUntilCompleted(d(\"MAWJobDefinitions\").jobSerializers.sendAppData({contents:a})).then(function(){return void 0})}).end();g.deleteMsgsForMe=a}),98);\n__d(\"MAWDeleteThread\",[\"MAWDbChatId\",\"MAWGlobals\",\"MAWJobDefinitions\",\"WALogger\",\"WAPREList\",\"WAPREMetrics\",\"WATimeUtils\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"deleteThread job: \",\"\"]);h=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"saveAndPassOff\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.chatId;d(\"WALogger\").DEV(h(),a);var b=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.DELETE_THREAD,void 0,a);a=d(\"MAWDbChatId\").unsafeCoerceToChatId(a);a=(yield d(\"MAWGlobals\").getDbImpls().getThreadInfoForDeletion(a));var c=a.newestMsgTs!=null?d(\"WATimeUtils\").futureUnixTime(1,a.newestMsgTs):void 0;a={chatJid:a.chatJid,messageRange:{lastMessageTimestamp:c,messages:[]},type:\"chat_delete\"};c={actions:[{chatAction:a}],type:\"meta_sync\"};return d(\"MAWGlobals\").getJobManager().waitUntilCompleted(d(\"MAWJobDefinitions\").jobSerializers.sendAppData({contents:c})).then(function(){b.endSuccess()})[\"catch\"](function(){b.endFail(\"delete_thread_failed\")})});return function(b){return a.apply(this,arguments)}}()).end();g.deleteThread=a}),98);\n__d(\"WASmaxInGroupsIQErrorBlockedIntegrityEnforcementMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"blocked-integrity-enforcement\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",486);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorBlockedIntegrityEnforcementMixin=a}),98);\n__d(\"WASmaxInGroupsPromoteDemoteClientErrors\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorBadRequestMixin\",\"WASmaxInGroupsIQErrorBlockedIntegrityEnforcementMixin\",\"WASmaxInGroupsIQErrorFallbackClientMixin\",\"WASmaxInGroupsIQErrorForbiddenMixin\",\"WASmaxInGroupsIQErrorItemNotFoundMixin\",\"WASmaxInGroupsIQErrorLockedMixin\",\"WASmaxInGroupsIQErrorNotAuthorizedMixin\",\"WASmaxInGroupsIQErrorRateOverlimitMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsIQErrorRateOverlimitMixin\").parseIQErrorRateOverlimitMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorRateOverlimit\",value:b.value});var c=d(\"WASmaxInGroupsIQErrorBlockedIntegrityEnforcementMixin\").parseIQErrorBlockedIntegrityEnforcementMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorBlockedIntegrityEnforcement\",value:c.value});var e=d(\"WASmaxInGroupsIQErrorBadRequestMixin\").parseIQErrorBadRequestMixin(a);if(e.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorBadRequest\",value:e.value});var f=d(\"WASmaxInGroupsIQErrorItemNotFoundMixin\").parseIQErrorItemNotFoundMixin(a);if(f.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorItemNotFound\",value:f.value});var g=d(\"WASmaxInGroupsIQErrorNotAuthorizedMixin\").parseIQErrorNotAuthorizedMixin(a);if(g.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorNotAuthorized\",value:g.value});var h=d(\"WASmaxInGroupsIQErrorForbiddenMixin\").parseIQErrorForbiddenMixin(a);if(h.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorForbidden\",value:h.value});var i=d(\"WASmaxInGroupsIQErrorLockedMixin\").parseIQErrorLockedMixin(a);if(i.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorLocked\",value:i.value});var j=d(\"WASmaxInGroupsIQErrorFallbackClientMixin\").parseIQErrorFallbackClientMixin(a);return j.success?d(\"WAResultOrError\").makeResult({name:\"IQErrorFallbackClient\",value:j.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"IQErrorRateOverlimit\",\"IQErrorBlockedIntegrityEnforcement\",\"IQErrorBadRequest\",\"IQErrorItemNotFound\",\"IQErrorNotAuthorized\",\"IQErrorForbidden\",\"IQErrorLocked\",\"IQErrorFallbackClient\"],[b,c,e,f,g,h,i,j])}g.parsePromoteDemoteClientErrors=a}),98);\n__d(\"WASmaxInGroupsPromoteDemoteResponseClientError\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorResponseMixin\",\"WASmaxInGroupsPromoteDemoteClientErrors\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;a=d(\"WASmaxInGroupsIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxInGroupsPromoteDemoteClientErrors\").parsePromoteDemoteClientErrors(c.value);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{errorPromoteDemoteClientErrors:b.value}))}g.parsePromoteDemoteResponseClientError=a}),98);\n__d(\"WASmaxInGroupsPromoteDemoteResponseServerError\",[\"WASmaxInGroupsBaseServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxInGroupsBaseServerErrorMixin\").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parsePromoteDemoteResponseServerError=a}),98);\n__d(\"WASmaxInGroupsIQResultResponseMixin\",[\"WAResultOrError\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!c.success)return c;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",c.value);if(!c.success)return c;c=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!c.success)return c;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",c.value);if(!b.success)return b;c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"result\");return!c.success?c:d(\"WAResultOrError\").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);\n__d(\"WASmaxInGroupsPromoteDemoteResponseSuccessDemote\",[\"WAResultOrError\",\"WASmaxInGroupsEnums\",\"WASmaxInGroupsGroupAddressingModeMixin\",\"WASmaxInGroupsIQResultResponseMixin\",\"WASmaxInGroupsPhoneNumberMixin\",\"WASmaxParseJid\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function h(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseJid\").attrUserJid(a,\"jid\");if(!b.success)return b;var c=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrStringEnum,a,\"error\",d(\"WASmaxInGroupsEnums\").ENUM_404_406);if(!c.success)return c;a=d(\"WASmaxInGroupsPhoneNumberMixin\").parsePhoneNumberMixin(a);return d(\"WAResultOrError\").makeResult({jid:b.value,error:c.value,phoneNumberMixin:a.success?a.value:null})}function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"demote\");if(!c.success)return c;b=d(\"WASmaxInGroupsIQResultResponseMixin\").parseIQResultResponseMixin(a,b);if(!b.success)return b;a=d(\"WASmaxInGroupsGroupAddressingModeMixin\").parseGroupAddressingModeMixin(a);c=d(\"WASmaxParseUtils\").mapChildrenWithTag(c.value,\"participant\",0,1024,h);return!c.success?c:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},b.value,{groupAddressingModeMixin:a.success?a.value:null,demoteParticipant:c.value}))}g.parsePromoteDemoteResponseSuccessDemoteDemoteParticipant=h;g.parsePromoteDemoteResponseSuccessDemote=a}),98);\n__d(\"WASmaxInGroupsPromoteDemoteResponseSuccessPromote\",[\"WAResultOrError\",\"WASmaxInGroupsEnums\",\"WASmaxInGroupsGroupAddressingModeMixin\",\"WASmaxInGroupsIQResultResponseMixin\",\"WASmaxInGroupsPhoneNumberMixin\",\"WASmaxParseJid\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function h(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseJid\").attrUserJid(a,\"jid\");if(!b.success)return b;var c=d(\"WASmaxParseUtils\").optionalLiteral(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"admin\");if(!c.success)return c;var e=d(\"WASmaxParseUtils\").optional(d(\"WASmaxParseUtils\").attrStringEnum,a,\"error\",d(\"WASmaxInGroupsEnums\").ENUM_404_419);if(!e.success)return e;a=d(\"WASmaxInGroupsPhoneNumberMixin\").parsePhoneNumberMixin(a);return d(\"WAResultOrError\").makeResult({jid:b.value,type:c.value,error:e.value,phoneNumberMixin:a.success?a.value:null})}function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"promote\");if(!c.success)return c;b=d(\"WASmaxInGroupsIQResultResponseMixin\").parseIQResultResponseMixin(a,b);if(!b.success)return b;a=d(\"WASmaxInGroupsGroupAddressingModeMixin\").parseGroupAddressingModeMixin(a);c=d(\"WASmaxParseUtils\").mapChildrenWithTag(c.value,\"participant\",0,1024,h);return!c.success?c:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},b.value,{groupAddressingModeMixin:a.success?a.value:null,promoteParticipant:c.value}))}g.parsePromoteDemoteResponseSuccessPromotePromoteParticipant=h;g.parsePromoteDemoteResponseSuccessPromote=a}),98);\n__d(\"WASmaxOutGroupsPromoteDemoteRequest\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxOutGroupsBaseSetGroupMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.participantJid;a=d(\"WASmaxJsx\").smax(\"participant\",{jid:d(\"WAWap\").USER_JID(a)});return a}function i(a){a=a.participantArgs;a=d(\"WASmaxJsx\").smax(\"promote\",null,d(\"WASmaxChildren\").REPEATED_CHILD(h,a,0,1024));return a}function j(a){a=a.participantJid;a=d(\"WASmaxJsx\").smax(\"participant\",{jid:d(\"WAWap\").USER_JID(a)});return a}function k(a){a=a.participantArgs;a=d(\"WASmaxJsx\").smax(\"demote\",null,d(\"WASmaxChildren\").REPEATED_CHILD(j,a,0,1024));return a}function a(a){var b=a.promoteArgs,c=a.demoteArgs;b=d(\"WASmaxOutGroupsBaseSetGroupMixin\").mergeBaseSetGroupMixin(d(\"WASmaxJsx\").smax(\"iq\",null,d(\"WASmaxChildren\").OPTIONAL_CHILD(i,b),d(\"WASmaxChildren\").OPTIONAL_CHILD(k,c)),a);return b}g.makePromoteDemoteRequestPromoteParticipant=h;g.makePromoteDemoteRequestPromote=i;g.makePromoteDemoteRequestDemoteParticipant=j;g.makePromoteDemoteRequestDemote=k;g.makePromoteDemoteRequest=a}),98);\n__d(\"WASmaxGroupsPromoteDemoteRPC\",[\"WAComms\",\"WASmaxInGroupsPromoteDemoteResponseClientError\",\"WASmaxInGroupsPromoteDemoteResponseServerError\",\"WASmaxInGroupsPromoteDemoteResponseSuccessDemote\",\"WASmaxInGroupsPromoteDemoteResponseSuccessPromote\",\"WASmaxOutGroupsPromoteDemoteRequest\",\"WASmaxParsingFailure\",\"WASmaxRpcUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i,j;return b(\"regeneratorRuntime\").async(function(k){while(1)switch(k.prev=k.next){case 0:e=d(\"WASmaxOutGroupsPromoteDemoteRequest\").makePromoteDemoteRequest(a);k.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAComms\").sendSmaxStanza(e,c));case 3:f=k.sent;g=d(\"WASmaxInGroupsPromoteDemoteResponseSuccessPromote\").parsePromoteDemoteResponseSuccessPromote(f,e);if(!g.success){k.next=7;break}return k.abrupt(\"return\",{name:\"PromoteDemoteResponseSuccessPromote\",value:g.value});case 7:h=d(\"WASmaxInGroupsPromoteDemoteResponseSuccessDemote\").parsePromoteDemoteResponseSuccessDemote(f,e);if(!h.success){k.next=10;break}return k.abrupt(\"return\",{name:\"PromoteDemoteResponseSuccessDemote\",value:h.value});case 10:i=d(\"WASmaxInGroupsPromoteDemoteResponseClientError\").parsePromoteDemoteResponseClientError(f,e);if(!i.success){k.next=13;break}return k.abrupt(\"return\",{name:\"PromoteDemoteResponseClientError\",value:i.value});case 13:j=d(\"WASmaxInGroupsPromoteDemoteResponseServerError\").parsePromoteDemoteResponseServerError(f,e);if(!j.success){k.next=16;break}return k.abrupt(\"return\",{name:\"PromoteDemoteResponseServerError\",value:j.value});case 16:throw new(d(\"WASmaxParsingFailure\").SmaxParsingFailure)(d(\"WASmaxRpcUtils\").errorMessageRpcParsing(\"PromoteDemote\",{SuccessPromote:g,SuccessDemote:h,ClientError:i,ServerError:j}));case 17:case\"end\":return k.stop()}},null,this)}g.sendPromoteDemoteRPC=a}),98);\n__d(\"WAPromoteDemoteGroupParticipantProtocol\",[\"WAErr\",\"WALogger\",\"WAResultOrError\",\"WASmaxGroupsPromoteDemoteRPC\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"error sending promote group participants iq: \",\", \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"error sending promote group participants iq: \",\", \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Demoting participants, but got promotion response\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Promoting participants, but got demotion response\"]);k=function(){return a};return a}function a(a){var e,f,g;return b(\"regeneratorRuntime\").async(function(h){while(1)switch(h.prev=h.next){case 0:e=a.group,f=a.participants;h.next=3;return b(\"regeneratorRuntime\").awrap(l({group:e,demoteArgs:null,promoteArgs:{participantArgs:f.map(function(a){return{participantJid:a}})}}));case 3:g=h.sent;if(g.success){h.next=6;break}return h.abrupt(\"return\",g);case 6:if(!(g.value.type===\"promote\")){h.next=8;break}return h.abrupt(\"return\",d(\"WAResultOrError\").makeResult(g.value));case 8:d(\"WALogger\").ERROR(k());throw c(\"WAErr\")(\"Promoting participants, but got demotion response\");case 10:case\"end\":return h.stop()}},null,this)}function e(a){var e,f,g;return b(\"regeneratorRuntime\").async(function(h){while(1)switch(h.prev=h.next){case 0:e=a.group,f=a.participants;h.next=3;return b(\"regeneratorRuntime\").awrap(l({group:e,promoteArgs:null,demoteArgs:{participantArgs:f.map(function(a){return{participantJid:a}})}}));case 3:g=h.sent;if(g.success){h.next=6;break}return h.abrupt(\"return\",g);case 6:if(!(g.value.type===\"demote\")){h.next=8;break}return h.abrupt(\"return\",d(\"WAResultOrError\").makeResult(g.value));case 8:d(\"WALogger\").ERROR(j());throw c(\"WAErr\")(\"Demoting participants, but got promotion response\");case 10:case\"end\":return h.stop()}},null,this)}function l(a){var c,e,f,g,j,k,l,m,n,o,p,q;return b(\"regeneratorRuntime\").async(function(r){while(1)switch(r.prev=r.next){case 0:c=a.group,e=a.promoteArgs,f=a.demoteArgs;r.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WASmaxGroupsPromoteDemoteRPC\").sendPromoteDemoteRPC({promoteArgs:e,demoteArgs:f,iqTo:c}));case 3:g=r.sent;r.t0=g.name;r.next=r.t0===\"PromoteDemoteResponseSuccessPromote\"?7:r.t0===\"PromoteDemoteResponseSuccessDemote\"?9:r.t0===\"PromoteDemoteResponseClientError\"?11:14;break;case 7:j=g.value.promoteParticipant.map(function(a){var b=a.error;return{user:a.jid,result:b==null?d(\"WAResultOrError\").makeResult():d(\"WAResultOrError\").makeError(b)}});return r.abrupt(\"return\",d(\"WAResultOrError\").makeResult({type:\"promote\",participants:j}));case 9:k=g.value.demoteParticipant.map(function(a){var b=a.error;return{user:a.jid,result:b==null?d(\"WAResultOrError\").makeResult():d(\"WAResultOrError\").makeError(b)}});return r.abrupt(\"return\",d(\"WAResultOrError\").makeResult({type:\"demote\",participants:k}));case 11:l=g.value.errorPromoteDemoteClientErrors.value,m=l.code,n=l.text;d(\"WALogger\").WARN(i(),m,n);return r.abrupt(\"return\",d(\"WAResultOrError\").makeError({type:\"client-error\",code:m}));case 14:g.name;o=g.value.errorServerErrors.value,p=o.code,q=o.text;d(\"WALogger\").WARN(h(),p,q);return r.abrupt(\"return\",d(\"WAResultOrError\").makeError({type:\"server-error\",code:p}));case 18:case\"end\":return r.stop()}},null,this)}g.promoteGroupParticipantsProtocol=a;g.demoteGroupParticipantsProtocol=e}),98);\n__d(\"MAWDemoteGroupParticipants\",[\"MAWGlobals\",\"MAWODSProxy\",\"WAChangeGroupParticipantAdminStatusApi\",\"WAGlobals\",\"WAJids\",\"WAOdsEnums\",\"WAPromoteDemoteGroupParticipantProtocol\",\"WAResultOrError\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"demoteGroupParticipants\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.group;a=a.users;var c=d(\"WAGlobals\").getJidUtilsApi(),e=c.toUserJid;c=a.map(function(a){return e(a)});if(c.length===0)return d(\"WAResultOrError\").makeResult({groupJid:b,participants:[],type:\"default\"});a=(yield d(\"WAPromoteDemoteGroupParticipantProtocol\").demoteGroupParticipantsProtocol({group:b,participants:c}));if(!a.success){d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_DEMOTE_PARTICIPANT,key:\"fail\"});return d(\"WAResultOrError\").makeError(a.error.type)}d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_DEMOTE_PARTICIPANT,key:\"success\"});c=a.value.participants.filter(function(a){a=a.result;return a.success}).map(function(a){a=a.user;return{addressable:!1,type:\"participant\",user:a}})||[];yield d(\"WAChangeGroupParticipantAdminStatusApi\").changeGroupParticipantAdminStatus(null,b,d(\"WAJids\").AUTHOR_ME,c,\"participant\");a=(yield d(\"MAWGlobals\").getJobResultConvertersImpls().convertDemoteGroupParticipantsResult==null?void 0:d(\"MAWGlobals\").getJobResultConvertersImpls().convertDemoteGroupParticipantsResult(b,c));return a?d(\"WAResultOrError\").makeResult(a):d(\"WAResultOrError\").makeResult({groupJid:b,participants:c,type:\"default\"})});return function(b){return a.apply(this,arguments)}}()).end();g.demoteGroupParticipants=a}),98);\n__d(\"MAWDeletedMsgApi\",[\"MAWIndexedDb\",\"MAWTransactionMode\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWIndexedDb\").makeMsgrTransactor({deletedMessages:d(\"MAWTransactionMode\").READONLY},\"getDeletedMsgByProtocolIdApi\",function(a){return function(b){return a.deletedMessages.get(babelHelpers[\"extends\"]({},b))}});g.getDeletedMsgByProtocolIdApi=a}),98);\n__d(\"MAWGetDecodedMediaEntry\",[\"MAWGetMediaKnownEntriesApi\",\"WALogger\",\"WAMediaUtils\",\"WAResultOrError\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"No media entry: messages_number=\",\", numMsgsForMedia=\",\"\"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){b=(yield d(\"MAWGetMediaKnownEntriesApi\").getMediaKnownEntries(b));if(b.success===!1)return b;b=b.value;var c=b.missingMessages,e=b.msgMap;b=b.numEntries;a=e.get(a);if(a!=null)return d(\"WAResultOrError\").makeResult(d(\"WAMediaUtils\").decodeMediaEntryData(a));if(c.length>0)return d(\"WAResultOrError\").makeError(\"no-media-entry-missing-messages\");else{d(\"WALogger\").ERROR(h(),e.values().length,b);return d(\"WAResultOrError\").makeError(\"no-media-entry-no-message\")}});return i.apply(this,arguments)}g.getDecodedMediaEntry=a}),98);\n__d(\"MAWGetMostRescentDecodedMediaEntry\",[\"MAWDbMediaTxns\",\"MAWIndexedDb\",\"MAWTransactionMode\",\"WAMediaUtils\",\"WAResultOrError\",\"WATagsLogger\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"No media entry\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"No existing media entry found for plaintextHash \",\". Returning new MsgMap.\"]);i=function(){return a};return a}var j=d(\"WATagsLogger\").TAGS([\"getMostRecentDecodedMediaEntry\"]),k=d(\"MAWIndexedDb\").makeMsgrTransactor({media:d(\"MAWTransactionMode\").READONLY},\"getMediaKnownEntries\",function(a){return function(b){return d(\"MAWDbMediaTxns\").maybeGetMediaFromPlaintextHash(a,b).then(function(a){if(!a){j.LOG(i(),b);return d(\"WAResultOrError\").makeError(\"no-media-by-plaintext-hash\")}a=Array.from(a.mediaEntries.values());return d(\"WAResultOrError\").makeResult(a)})}});function a(a){return l.apply(this,arguments)}function l(){l=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=(yield k(a));if(a.success===!1)return a;var b=null;for(a of a.value){var c,e=d(\"WAMediaUtils\").decodeMediaEntryData(a);(((c=b)==null?void 0:c.mediaKeyTimestamp)==null||e.mediaKeyTimestamp!=null&&e.mediaKeyTimestamp>b.mediaKeyTimestamp)&&(b=e)}if(b!=null)return d(\"WAResultOrError\").makeResult(b);j.ERROR(h());return d(\"WAResultOrError\").makeError(\"no-media-entry\")});return l.apply(this,arguments)}g.getMostRecentDecodedMediaEntry=a}),98);\n__d(\"MAWDownloadAndHandleMedia\",[\"MAWAckLevel\",\"MAWDbDeletedMessages\",\"MAWDbMsgTxns\",\"MAWDeletedMsgApi\",\"MAWDownloadMedia\",\"MAWExternalId\",\"MAWGetDecodedMediaEntry\",\"MAWGetMostRescentDecodedMediaEntry\",\"MAWGetStorageQplAnnotations\",\"MAWGlobals\",\"MAWHandleMediaDownloadApi\",\"MAWIndexedDb\",\"MAWLoggerUtils\",\"MAWTransactionMode\",\"WAJids\",\"WAPREList\",\"WAPREMetrics\",\"WATagsLogger\",\"asyncToGeneratorRuntime\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to download media: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to download media for msg \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"downloadAndHandleMedia: Failed to get DecodedMediaEntry - reason: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"downloadAndHandleMedia: Missing msgId in Db - reason: \",\" msgType: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"DownloadAndHandleMedia: \",\" hash with \",\" msgId\"]);l=function(){return a};return a}var m=d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.MediaDownload,d(\"MAWLoggerUtils\").Tag.MessageReceive]);a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"downloadAndHandleMedia\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.hash,e=a.metricInstanceKeys,f=a.msgType,g=a.protocolMsgId;a=a.qplEntryPoint;var o=d(\"WAJids\").switchOnMsgrChatJidType(g.chat,{group:function(){return\"group\"},user:function(){return\"user\"}});e=e==null?void 0:e.get(d(\"WAPREList\").PRE_METRIC.RECEIVE_MESSAGE);var q=e!=null?d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.RECEIVE_MESSAGE,{},e):void 0;m.LOG(l(),b,g);q==null?void 0:q.addPoint(\"start_media_download\");e=(yield d(\"MAWGlobals\").getDbImpls().getMsgIdByProtocolMsgId(g));if(!e.success){if(c(\"gkx\")(\"23965\")&&(yield n(g))){q==null?void 0:q.endSuccess();return}q==null?void 0:q.endFail(e.error);m.ERROR(k(),e.error,f);return}var r=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.MEDIA_DOWNLOAD,{string:{chat_type:o,downloadEntry:a,e2eePlatform:d(\"MAWExternalId\").getPlatform(g.externalId),jid:g.chat,msgType:f}}),s={addAnnotations:function(a){r.addAnnotations(a),q==null?void 0:q.addAnnotations(a)},addPoint:function(a,b){r.addPoint(a,b),q==null?void 0:q.addPoint(a,b)},endFail:function(a,b){r.endFail(a,b),q==null?void 0:q.endFail(a,b)},endSuccess:function(a){r.endSuccess(a),q==null?void 0:q.endSuccess(a)}};void d(\"MAWGetStorageQplAnnotations\").getStorageQplAnnotations().then(function(a){s.addAnnotations(a)});o=e.value;a=d(\"MAWGlobals\").getConfig().useMostRecentMediaEntryForDownload()?yield d(\"MAWGetMostRescentDecodedMediaEntry\").getMostRecentDecodedMediaEntry(b):yield d(\"MAWGetDecodedMediaEntry\").getDecodedMediaEntry(g,b);if(!a.success){s.endFail(a.error);m.ERROR(j(),a.error);yield p(o);return}f=(yield d(\"MAWDownloadMedia\").downloadMedia(g,b,a.value,s));if(f.success){e=f.value;a=e.mimeType;e=e.plaintext;yield d(\"MAWHandleMediaDownloadApi\").handleMediaDownload(b,a,e,g);s.endSuccess()}else s.endFail(f.error),m.LOG(i(),o),m.ERROR(h(),f.error),yield p(o)});return function(b){return a.apply(this,arguments)}}()).end();function n(a){return o.apply(this,arguments)}function o(){o=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=(yield d(\"MAWDeletedMsgApi\").getDeletedMsgByProtocolIdApi(a));return!a?!1:a.reason===d(\"MAWDbDeletedMessages\").DbDeletedMsgReasonEnum.ChatDelete||a.reason===d(\"MAWDbDeletedMessages\").DbDeletedMsgReasonEnum.Revoke});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b;yield d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(b=d(\"MAWTransactionMode\")).READONLY,media:b.READONLY,messages:b.READWRITE,xma:b.READONLY},\"downloadMedia\",function(a){return function(b,c){return d(\"MAWDbMsgTxns\").updateSystemAck(a,b,c)}})(a,d(\"MAWAckLevel\").ACK.failed)});return q.apply(this,arguments)}g.downloadAndHandleMedia=a}),98);\n__d(\"MAWDownloadAndRestoreMedia\",[\"LSDataTraceCheckPoint\",\"LSIntEnum\",\"MAWEBBackendQPLUtils\",\"MAWGetMediaByObjectId\",\"MAWGlobals\",\"MAWHandleEchoMediaMsgsRestoreV2\",\"MAWHandleMediaDownloadAndRestoreApi\",\"MAWTraceUtils\",\"WALogger\",\"WAMediaUtils\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] downloadAndRestoreMedia job completed\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] download metadata is missing\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] media not found in the media table\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] cdn url mismatch between media entry direct path and restoration cdn url\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] media entry is missing for msgId\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] downloadAndRestoreMedia job started\"]);n=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"downloadAndRestoreMedia\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.deliveryObjectId,e=a.restorationCdnUrl;a=a.traceId;d(\"WALogger\").LOG(n());var f=(yield d(\"MAWHandleMediaDownloadAndRestoreApi\").writeCdnUrlAndBakeDownloadPayload(b,e));if(f){var g=(yield d(\"MAWGetMediaByObjectId\").getMediaBackupByObjectId(b));b=(yield d(\"MAWGetMediaByObjectId\").getMediaByObjectId(b));if(b.success&&g.success){b=b.value.mediaEntries.get(g.value.msgId);if(!b){d(\"WALogger\").ERROR(m());d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(a,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_RESTORE_FAILURE),[],\"Media entry data missing for deliveryObjectId\");d(\"MAWEBBackendQPLUtils\").logMediaRestoreFromMIQPLEndFailure(a,\"media_entry_missing\");return}else{g=d(\"WAMediaUtils\").decodeMediaEntryData(b);b=g==null?void 0:g.directPath;b!==e&&d(\"WALogger\").ERROR(l());d(\"MAWEBBackendQPLUtils\").logMediaRestoreFromMIQPLPoint(a,\"download_media_start\");yield d(\"MAWHandleEchoMediaMsgsRestoreV2\").handleDownloadMedia(f,a,void 0,e,g)}}else{d(\"WALogger\").ERROR(k());d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(a,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_RESTORE_FAILURE),[],\"Media data missing for deliveryObjectId\");return}}else d(\"WALogger\").ERROR(j()),d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(a,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_RESTORE_FAILURE),[],\"Download metadata is missing\"),d(\"MAWEBBackendQPLUtils\").logMediaRestoreFromMIQPLEndFailure(a,\"media_entry_missing\");d(\"WALogger\").LOG(i())});return function(b){return a.apply(this,arguments)}}()).end();g.downloadAndRestoreMedia=a}),98);\n__d(\"MAWWriteForwardedMsgApi\",[\"MAWAckLevel\",\"MAWBridgeTypesCreators\",\"MAWBridgeXMA\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbXMATxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWJidUtils\",\"MAWMediaManagementTxns\",\"MAWMsgType\",\"MAWTransactionMode\",\"MAWWriteMsgTxns\",\"MAWXMAManagementTxns\",\"MAWXMAUtils\",\"WAJids\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";b=d(\"MAWIndexedDb\").makeMsgrAndSignalTransactor({chunk:(a=d(\"MAWTransactionMode\")).READONLY,groupInfo:a.READONLY,identity:a.READONLY,media:a.READWRITE,mediaBackup:a.READWRITE,messages:a.READWRITE,participants:a.READONLY,receipts:a.READWRITE,threads:a.READWRITE,xma:a.READWRITE},\"writeForwardedMsg\",function(a){return function(b,c,e,f,g,k,l,m){k===void 0&&(k=!1);return d(\"MAWDexieTable\").dexieAll([a.threads.get({jid:c}),d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,e),a.messages.where(\"externalId\").equals(b).toArray()]).then(function(c){var n=c[0],o=c[1];c=c[2];if(n==null)return{type:\"missing_thread\"};if(o==null)return{type:\"missing_msg\"};if(o.ephemeralSetting!=null&&o.ephemeralSetting.ephemeralExpirationInSec!==0)return{type:\"forwarding_ephemeral_msg\"};c=c.find(function(a){return a.thread===n.chatId&&a.author===d(\"WAJids\").AUTHOR_ME});if(c!=null)return c.ack>=d(\"MAWAckLevel\").ACK.sent?{msgId:c.msgId,protocolMsgId:{author:d(\"WAJids\").AUTHOR_ME,chat:n.jid,externalId:c.externalId},type:\"already_sent\"}:{msgId:c.msgId,protocolMsgId:{author:d(\"WAJids\").AUTHOR_ME,chat:n.jid,externalId:c.externalId},type:\"not_sent\"};else{c={ack:d(\"MAWAckLevel\").ACK.clock,altIndex:void 0,author:d(\"WAJids\").AUTHOR_ME,ephemeralSetting:g!=null?g:void 0,externalId:b,forwardingScore:((c=o.forwardingScore)!=null?c:0)+1,isForwarded:o.author!==d(\"WAJids\").AUTHOR_ME,mediaId:o.mediaId,msgContent:o.type===\"Text\"?o.msgContent:void 0,specialTextSize:o.specialTextSize,thread:n.chatId,threadJid:n.jid,ts:f};var p=h(o.type,c,o.type===\"Text\"?o.msgContent:{content:\"\"},o.xmaMessageType);return d(\"MAWWriteMsgTxns\").writeMsg(a,p,n,{isFirstMsg:k,openMessageParticipantCount:l,participantCount:m}).then(function(b){return d(\"MAWDexieTable\").dexieAll([j(a,e,b,o,n.chatId,n.jid),i(a,o.mediaId,b,o,n.chatId,n.jid)]).then(function(a){return{msgId:b.msgId,protocolMsgId:{author:d(\"WAJids\").AUTHOR_ME,chat:n.jid,externalId:p.externalId},type:\"not_sent\"}})})}})}});function h(a,b,e,f){switch(a){case\"Text\":return babelHelpers[\"extends\"]({},b,{msgContent:e,type:d(\"MAWMsgType\").MSG_TYPE.TEXT});case\"Image\":return babelHelpers[\"extends\"]({},b,{type:d(\"MAWMsgType\").MSG_TYPE.IMAGE});case\"Video\":return babelHelpers[\"extends\"]({},b,{type:d(\"MAWMsgType\").MSG_TYPE.VIDEO});case\"Ptt\":return babelHelpers[\"extends\"]({},b,{type:d(\"MAWMsgType\").MSG_TYPE.PTT});case\"Gif\":return babelHelpers[\"extends\"]({},b,{type:d(\"MAWMsgType\").MSG_TYPE.GIF});case\"Sticker\":return babelHelpers[\"extends\"]({},b,{type:d(\"MAWMsgType\").MSG_TYPE.STICKER});case\"DocumentFile\":return babelHelpers[\"extends\"]({},b,{type:d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE});case\"XMA\":if(f==null)throw c(\"err\")(\"XMA type is null in forward msg\");return babelHelpers[\"extends\"]({},b,{type:d(\"MAWMsgType\").MSG_TYPE.XMA,xmaMessageType:f});default:throw c(\"err\")(\"Should not be forwarding a message of type: \"+a)}}function i(a,b,e,f,g,h){b=b!=null?a.media.get({mediaId:b}):d(\"MAWDexieTable\").dexieResolve(null);return b.then(function(b){if(b==null&&d(\"MAWDbMsg\").isMediaMsg(e))throw c(\"err\")(\"Could not find media of forwarded message\");return b!=null?d(\"MAWMediaManagementTxns\").linkMedia(a,e,b.plaintextHash,b.mediaType,b.size,b.mediaEntries.get(f.msgId),{validatedAudioInfo:b.validatedAudioInfo,validatedDocumentFileInfo:b.validatedDocumentFileInfo,validatedImageInfo:b.validatedImageInfo,validatedVideoInfo:b.validatedVideoInfo},null,null,!1).then(function(a){a!=null&&d(\"MAWIndexedDb\").afterTransaction({tag:\"NewMedia\",value:d(\"MAWBridgeTypesCreators\").createBridgeMedia(g,h,a,!0)})}):d(\"MAWDexieTable\").dexieResolve()})}function j(a,b,e,f,g,h){return!d(\"MAWXMAUtils\").isXMAShare(f.xmaMessageType)?d(\"MAWDexieTable\").dexieResolve():d(\"MAWDbXMATxns\").maybeGetXMAFromProtocolMsgId(a,b).then(function(b){if(b==null)return;var i=b.defaultPreviewMediaId,j=b.faviconMediaId,k=b.headerMediaId,l=Array.from(new Set([i,j,k].filter(Boolean)));l=l.map(function(b){return a.media.get(b).then(function(a){if(a==null)throw c(\"err\")(\"Could not find media of forwarded xma message\");return a})});return d(\"MAWDexieTable\").dexieAll(l).then(function(l){l=l.map(function(b){return d(\"MAWMediaManagementTxns\").linkMedia(a,e,b.plaintextHash,b.mediaType,b.size,b.mediaEntries.get(f.msgId),{validatedAudioInfo:b.validatedAudioInfo,validatedDocumentFileInfo:null,validatedImageInfo:b.validatedImageInfo,validatedVideoInfo:b.validatedVideoInfo},void 0,void 0,!0)});return d(\"MAWDexieTable\").dexieAll(l).then(function(l){l=l.reduce(function(a,b){return a.set(b.mediaId,b)},new Map());var m=i==null?void 0:l.get(i);if(i==null&&!d(\"MAWXMAUtils\").isXMAExternalLinkShare(f.xmaMessageType))throw c(\"err\")(\"Preview Media is missing\");l=d(\"MAWJidUtils\").maybeToProtocolMsgId(e.author,h,e.externalId);if(l==null)throw c(\"err\")(\"ProtocolMsgId is null for forward XMA Share\");return d(\"MAWXMAManagementTxns\").saveXMA(a,i,k,j,b.targetType,e.msgId,void 0,l,{defaultCTA:b.defaultCTA,headerTitle:b.headerTitle,maxSubtitleNumOfLines:b.maxSubtitleNumOfLines,maxTitleNumOfLines:b.maxTitleNumOfLines,overlayDescription:b.overlayDescription,overlayIconGlyph:b.overlayIconGlyph,overlayTitle:b.overlayTitle,subtitleText:b.subtitleText,targetExpiringAtSec:b.targetExpiringAtSec,targetId:b.targetId,targetUsername:b.targetUsername,titleText:b.titleText,xmaLayoutType:b.xmaLayoutType}).then(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"NewXMA\",value:d(\"MAWBridgeXMA\").createBridgeXMA(g,m,a)})})})})})}g.writeForwardedMsg=b}),98);\n__d(\"WASendMsgUtilV2\",[\"Promise\",\"WABaseGlobals\",\"WADevicesState\",\"WAErr\",\"WAGenReportingMeta\",\"WAGlobals\",\"WAJids\",\"WAJobDefinitions\",\"WAJobOrchestratorTypes\",\"WAJobs\",\"WALogger\",\"WAMsg\",\"WAResultOrError\",\"WASendMsgUtil\",\"WASentBytesCache\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error loading current device identity \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg failed to save sent bytes to cache: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Triggering getDevices for users with missing icdc info.\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to calculate ICDC info for message with id \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Trying to send a message with no recipients\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Trying to send a message that does not have a receipt in db\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to save receipt for message with error \",\"\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Error during get devices before sending: \",\"\"]);p=function(){return a};return a}function q(a){return(h||(h=b(\"Promise\"))).resolve()}function r(a,b){return d(\"WADevicesState\").getDevicesState().waitForUserDevices(Array.from(new Set([a,d(\"WABaseGlobals\").getMyUserJid()])),\"GetDevicesBeforeSend: \"+b)}function s(a,c){return d(\"WAJids\").switchOnChatJidType(a,{group:function(a){return q(a)},interopUser:function(a){return r(a,c)},lidUser:function(a){return r(a,c)},msgrUser:function(a){return r(a,c)},phoneUser:function(a){return r(a,c)}})[\"catch\"](function(a){d(\"WALogger\").ERROR(p(),a);return(h||(h=b(\"Promise\"))).resolve()})}function t(a,c){var e,f,g,h,i,j,k,l;return b(\"regeneratorRuntime\").async(function(m){while(1)switch(m.prev=m.next){case 0:e=a.messagePayload;f={author:e.protocolMsgId.author,chat:e.protocolMsgId.chat,externalId:e.protocolMsgId.externalId};m.next=4;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().loadReceipt(f));case 4:g=m.sent;if(!g.success){m.next=7;break}return m.abrupt(\"return\",g);case 7:c==null?void 0:c.addPoint(\"get_devices_before_send_start\");m.next=10;return b(\"regeneratorRuntime\").awrap(s(e.protocolMsgId.chat,\"prepareReceipt\"));case 10:c==null?void 0:c.addPoint(\"get_devices_before_send_end\");m.next=13;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().loadThreadParticipants(e.protocolMsgId.chat));case 13:h=m.sent;m.next=16;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.bulkLoadIdentities(h)},{flush:!1,afterInit:!0,operationType:\"prepare_receipt_load_identities\"}).then(function(a){var b=new Map();for(var a=a,c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(c){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];for(var f=f,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];if(j===d(\"WAGlobals\").getMyDeviceJid())continue;b.set(j,{pubKey:i})}}return b}));case 16:i=m.sent;j=new Set();k=new Map();l={permittedIdentitiesPerDevice:i,recipientDevices:j,statusTsPerUser:k,id:f};m.next=22;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().saveReceipt(l)[\"catch\"](function(a){d(\"WALogger\").ERROR(o(),a);return d(\"WAResultOrError\").makeError(\"missing-receipt\")}));case 22:return m.abrupt(\"return\",d(\"WAResultOrError\").makeResult(l));case 23:case\"end\":return m.stop()}},null,this)}function a(a,c){var e,f,g,i,o,p,q,r,s,w,x,y,z,A,B,C,D,E,F,G,H,I;return b(\"regeneratorRuntime\").async(function(J){while(1)switch(J.prev=J.next){case 0:e=a.messagePayload,f=a.sendIdentity,g=f===void 0?!1:f,i=a.isInstamadillo,o=i===void 0?!1:i;J.next=3;return b(\"regeneratorRuntime\").awrap(t({messagePayload:e},c));case 3:p=J.sent;if(!(p.success===!1)){J.next=7;break}d(\"WALogger\").ERROR(n());return J.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"missing-receipt\"));case 7:q=p.value;r=e.frankingKey,s=e.frankingVersion,w=e.messageBytes,x=e.messageType,y=e.protocolMsgId;z=u(q.permittedIdentitiesPerDevice);A=x.type===\"text\"&&x.invitedParticipantUserJid!=null?z.filter(function(a){return a.user===x.invitedParticipantUserJid||a.user===d(\"WABaseGlobals\").getMyUserJid()}):z;c==null?void 0:c.addPoint(\"recipients-calculated\",{\"int\":{recipientsCount:A.length},string:{msgType:x.type}});B=x.type===\"text\"&&x.invitedParticipantUserJid!=null?x.invitedParticipantUserJid:y.chat;if(!(A.length===0)){J.next=16;break}d(\"WALogger\").ERROR(m());return J.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"no-recipients\"));case 16:J.next=18;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getWaOneQueue().enqueue(function(d){var e,a,c;return b(\"regeneratorRuntime\").async(function(f){while(1)switch(f.prev=f.next){case 0:e=d.cryptoManager;f.next=3;return b(\"regeneratorRuntime\").awrap(e.storage.calculateICDC(A.map(function(a){return a.user})));case 3:a=f.sent;if(!g){f.next=10;break}f.next=7;return b(\"regeneratorRuntime\").awrap(v(e));case 7:f.t0=f.sent;f.next=11;break;case 10:f.t0=null;case 11:c=f.t0;return f.abrupt(\"return\",{icdcInfoResult:a,deviceIdentity:c});case 13:case\"end\":return f.stop()}},null,this)},{operationType:\"calc_icdc\",flush:!0,afterInit:!0}));case 18:C=J.sent;D=C.icdcInfoResult;E=C.deviceIdentity;D.success===!1&&d(\"WALogger\").ERROR(l(),y.externalId);F=D.success?D.value:{icdcInfo:[],usersWithMissingICDC:new Set()},G=F.icdcInfo,H=F.usersWithMissingICDC;if(!(H.size>0)){J.next=27;break}d(\"WALogger\").LOG(k());J.next=27;return b(\"regeneratorRuntime\").awrap(d(\"WAJobs\").getJobManager().waitUntilPersisted(d(\"WAJobDefinitions\").createStartJobInfo(\"getDevices\",{ignoreDhash:!0,reason:\"missing-icdc-info\",scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.HIGH},users:H})));case 27:J.next=29;return b(\"regeneratorRuntime\").awrap(x.isRevoked===!0?(h||(h=b(\"Promise\"))).resolve(null):d(\"WAGenReportingMeta\").genReportingMeta(w.bytes,r,s));case 29:I=J.sent;return J.abrupt(\"return\",d(\"WASendMsgUtil\").sendMessage({type:\"chat\",messageBytes:w,chat:B,deviceIdentity:E,messageType:x,protocolMsgId:y,externalId:y.externalId,icdcInfo:G,recipients:A,reportingMeta:I},c,o).then(function(a){if(a.success)return d(\"WASentBytesCache\").sentBytesCache().saveSentBytes({ts:a.value.serverTs,frankingKey:r,frankingVersion:s,messageBytes:w,messageType:x,protocolMsgId:y,waMsgId:d(\"WAMsg\").craftWAMsgIdString({author:y.author,chat:y.chat,externalId:y.externalId})})[\"catch\"](function(a){d(\"WALogger\").ERROR(j(),a)}).then(function(){return d(\"WAResultOrError\").makeResult({baseKey:a.value.baseKey,reportingMeta:I,serverTs:a.value.serverTs})});else return a}));case 31:case\"end\":return J.stop()}},null,this)}function u(a){var b=new Map();a.forEach(function(a,c){a=a.pubKey;var e=d(\"WAJids\").extractUserJid(c);a={identity:a,jid:c};c=b.get(e)||[];c.push(a);b.set(e,c)});return Array.from(b,function(a){var b=a[0];a=a[1];return{devicesInfo:a,user:b}})}function v(a){var e,f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:g.prev=0;g.next=3;return b(\"regeneratorRuntime\").awrap(a.storage.loadIdentities(d(\"WABaseGlobals\").getMyUserJid()));case 3:e=g.sent;f=e.get(d(\"WAGlobals\").getMyDeviceJid());if(!(f!=null)){g.next=7;break}return g.abrupt(\"return\",f);case 7:throw c(\"WAErr\")(\"missing-identity\");case 10:g.prev=10,g.t0=g[\"catch\"](0),d(\"WALogger\").ERROR(i(),g.t0);case 13:case\"end\":return g.stop()}},null,this,[[0,10]])}g.getDevicesBeforeSend=s;g.sendChatMessage=a}),98);\n__d(\"MAWForwardMsg\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWQplProxy\",\"MAWWriteForwardedMsgApi\",\"MWQPLMarkers\",\"WAJobOrchestratorTypes\",\"WALogger\",\"WASendMsgUtilV2\",\"asyncToGeneratorRuntime\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"forwardMsg cannot forward an ephemeral message\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"forwardMsg cannot forward a non-existent message\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"forwardMsg cannot send to a non-existent thread\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"forwardMsg already sent message\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"forwardMsg: \",\"\"]);l=function(){return a};return a}var m=function(a){return function(b){if(a==null)return;d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(25313175,\"1551\"),b,{instanceKey:a})}};a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"saveAndPassOff\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){var e=a.chatJid,f=a.ephemeralSetting,g=a.externalId;a=a.protocolMsgId;b=b.args;d(\"WALogger\").DEV(l(),e);var n=m(b==null?void 0:b.s2sInstanceKey);yield d(\"WASendMsgUtilV2\").getDevicesBeforeSend(e,\"ForwadMsg\");g=(yield d(\"MAWWriteForwardedMsgApi\").writeForwardedMsg(g,e,a,c.jobStartTime,f));if(g.type===\"already_sent\"){d(\"WALogger\").LOG(k());return}else if(g.type===\"missing_thread\"){d(\"WALogger\").LOG(j());return}else if(g.type===\"missing_msg\"){d(\"WALogger\").LOG(i());return}else if(g.type===\"forwarding_ephemeral_msg\"){d(\"WALogger\").LOG(h());return}n(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.FORWARDED_MESSAGE_WRITTEN);yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:g.protocolMsgId,s2sInstanceKey:b==null?void 0:b.s2sInstanceKey,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"message\"}))});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.forwardMsg=a}),98);\n__d(\"MAWGetSpams\",[\"MAWGlobals\",\"WADeprecatedSendIq\",\"WADeprecatedWapParser\",\"WALogger\",\"WAPersistedJobManager\",\"WATimeUtils\",\"WAWap\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"getSpams result: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"getSpams called\"]);i=function(){return a};return a}var j=new(c(\"WADeprecatedWapParser\"))(\"getSpamsResponse\",function(a){a.assertTag(\"iq\"),a.assertFromServer(),a.assertAttr(\"type\",\"result\")});a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"getSpams\",b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a;d(\"WALogger\").LOG(i());a=(a=d(\"WAWap\")).wap(\"iq\",{id:a.generateId(),to:a.S_WHATSAPP_NET,type:\"get\",xmlns:\"fbid:thread\"},a.wap(\"spam_request\",null));a=(yield d(\"WADeprecatedSendIq\").deprecatedSendIq(a,j));d(\"WALogger\").LOG(h(),a);if(!a.success){a=a.errorCode.toString().startsWith(\"5\");if(a)throw new(d(\"WAPersistedJobManager\").RetryOnBackoff)({algo:{first:d(\"WATimeUtils\").HOUR_MILLISECONDS\/60,type:\"exponential\"},jitter:.1});return!1}return!0})).end();g.getSpams=a}),98);\n__d(\"MAWProcessFutureproofMsgApi\",[\"MAWConvertFutureproofMsgTxns\",\"MAWDbMsgTxns\",\"MAWDbMsgTypeVersionTxns\",\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWMsgType\",\"MAWTransactionMode\",\"MAWUnstoredContentToUnstoredDbContentUtils\",\"WAArrayZip\",\"WADecodeIncomingMsg\",\"WAJids\",\"WALogger\",\"WAParseV3Protocol\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs doesn't support system message for \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs called for instamadillo\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs called for ephemeral setting msg\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs called for skdm\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs tried to decode non plaintext v3 message \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs get a futureproof message for \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs got error for message \",\", delete this message\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs thread for \",\" no longer exists\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs get a futureproof message for \",\"\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs got error for message \",\", delete this message\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"processFutureProofMsgs thread for \",\" no longer exists\"]);r=function(){return a};return a}var s=d(\"WAParseV3Protocol\").createV3ProtocolParser();b=d(\"MAWIndexedDb\").makeMsgrTransactor({appMeta:(a=d(\"MAWTransactionMode\")).READWRITE,chunk:a.READONLY,groupInfo:a.READONLY,media:a.READWRITE,mediaBackup:a.READWRITE,messages:a.READWRITE,threads:a.READWRITE,xma:a.READONLY},\"processFutureProofMsgs\",function(a){return function(b){return d(\"MAWDbMsgTypeVersionTxns\").getMsgTypeVersion(a).then(function(c){var e=[];if(c!=null&&c<b){d(\"MAWDbMsgTypeVersionTxns\").updateMsgTypeVersion(a,b);return d(\"MAWDbMsgTxns\").getFutureProofMsgs(a).then(function(b){return d(\"MAWDexieTable\").dexieAll(b.map(function(b){return d(\"MAWDbThreadTxns\").getThread(a,b.thread).then(function(c){if(!c.success){d(\"WALogger\").WARN(r(),b.thread);return}c=c.value;var f=t(b,c.jid);if(!f||d(\"WAJids\").isAuthorSystem(f.author))return;if(f.msg.type===\"error\"){d(\"WALogger\").WARN(q(),b.msgId);return d(\"MAWDbMsgTxns\").deleteDbMsg(a,b.rowId).then(function(){})}f=s(f.msg,c.jid,f.externalId,f.author,f.ts);f=d(\"MAWUnstoredContentToUnstoredDbContentUtils\").unstoredContentToUnstoredDbContent(babelHelpers[\"extends\"]({unstoredXMA:null},f));var g=f.unstoredDbMedia;f=f.unstoredDbMsg;if(!f)return;if(f.type===d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF){d(\"WALogger\").WARN(p(),b.msgId);return}return d(\"MAWConvertFutureproofMsgTxns\").convertFutureproofMsg(a,f,b,g,c).then(function(a){a!=null&&e.push(a)})})}))}).then(function(){return e})}else if(c==null)return d(\"MAWDbMsgTypeVersionTxns\").addMsgTypeVersion(a,1).then(function(){return e});return e})}});c=d(\"MAWIndexedDb\").makeMsgrTransactor({appMeta:a.READWRITE,chunk:a.READONLY,deletedMessages:a.READWRITE,groupInfo:a.READONLY,media:a.READWRITE,mediaBackup:a.READWRITE,messages:a.READWRITE,threads:a.READWRITE,xma:a.READONLY},\"bulkProcessFutureProofMsgs\",function(a){return function(b){return d(\"MAWDbMsgTypeVersionTxns\").getMsgTypeVersion(a).then(function(c){if(c!=null&&c<b){d(\"MAWDbMsgTypeVersionTxns\").updateMsgTypeVersion(a,b);var e=[],f=new Map();return d(\"MAWDbMsgTxns\").getFutureProofMsgs(a).then(function(b){return d(\"MAWDbThreadTxns\").getThreads(a,b.map(function(a){return a.thread})).then(function(a){d(\"WAArrayZip\").zip(b,a).forEach(function(a){var b=a[0];a=a[1];if(a==null){d(\"WALogger\").WARN(o(),b.thread);return}var c=t(b,a.jid);if(!c||d(\"WAJids\").isAuthorSystem(c.author))return;if(c.msg.type===\"error\")d(\"WALogger\").WARN(n(),b.msgId),e.push(b);else{c=s(c.msg,a.jid,c.externalId,c.author,c.ts);c=d(\"MAWUnstoredContentToUnstoredDbContentUtils\").unstoredContentToUnstoredDbContent(babelHelpers[\"extends\"]({unstoredXMA:null},c));var g=c.unstoredDbMedia;c=c.unstoredDbMsg;if(!c)return;if(c.type===d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF){d(\"WALogger\").WARN(m(),b.msgId);return}f.set(b.msgId,{dbMsg:b,thread:a,unstoredDbMedia:g,unstoredDbMsg:c})}})}).then(function(){return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").deleteMessages(a,e),d(\"MAWConvertFutureproofMsgTxns\").bulkConvertFutureproofMsgs(a,f)]).then(function(a){a[0];a=a[1];return a.filter(Boolean)})})})}else if(c==null)return d(\"MAWDbMsgTypeVersionTxns\").addMsgTypeVersion(a,1).then(function(){return[]});return[]})}});function t(a,b){var c=d(\"WADecodeIncomingMsg\").decodeIncomingMsg(new Uint8Array(a.msgContent.protobuf),\"v3\",a.author===d(\"WAJids\").AUTHOR_ME?b:null);if(c.version!==\"v3\"){d(\"WALogger\").WARN(l(),a.msgId);return null}else if(c.type===\"skdm\"||c.type===\"msgWithSKDM\"){d(\"WALogger\").WARN(k());return null}else if(c.type===\"ephemeral\"){d(\"WALogger\").WARN(j());return null}else if(c.type===\"instamadillo\"){d(\"WALogger\").WARN(i());return null}var e=a.author;if(d(\"WAJids\").isAuthorSystem(e)){d(\"WALogger\").WARN(h(),a.msgId);return null}return{author:e,chat:b,externalId:a.externalId,msg:c,ts:a.ts}}g.processFutureProofMsgs=b;g.bulkProcessFutureProofMsgs=c}),98);\n__d(\"MAWHandleFutureProofMsg\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWProcessFutureproofMsgApi\",\"Promise\",\"asyncToGeneratorRuntime\",\"promiseDone\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=c(\"qex\")._(\"401\")?yield d(\"MAWProcessFutureproofMsgApi\").bulkProcessFutureProofMsgs(d(\"MAWGlobals\").getConfig().supportedTypesVersion()):yield d(\"MAWProcessFutureproofMsgApi\").processFutureProofMsgs(d(\"MAWGlobals\").getConfig().supportedTypesVersion()),e=[];a.forEach(function(a){e.push(d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").jobSerializers.downloadAndHandleMedia(a.protocolMsgId,a.plaintextHash,\"MAWHandleFutureproofMsg\")))});c(\"promiseDone\")((h||(h=b(\"Promise\"))).all(e))});return function(){return a.apply(this,arguments)}}();e=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"checkMessageTypeUpdateAndHandleMsg\",a).end();g.handleFutureproofMsg=e}),98);\n__d(\"MAWHandleSpamMsg\",[\"MAWGlobals\",\"WALogger\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handleSpamMsg processed spam msgs\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"handleSpamMsg starts processing spam msgs\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"updateAndHandleMsg\",b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){d(\"WALogger\").DEV(i()),yield d(\"MAWGlobals\").getDbImpls().processSpamMsgs(),d(\"WALogger\").DEV(h())})).end();g.handleSpamMsg=a}),98);\n__d(\"MAWDeletePersonalSenderKeyStatusApi\",[\"MAWDbPersonalSenderKeyStatusTxns\",\"MAWIndexedDb\",\"MAWTransactionMode\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWIndexedDb\").makeSignalTransactor({personalSenderKeyStatuses:d(\"MAWTransactionMode\").READWRITE},\"deletePersonalSenderKeyStatus\",function(a){return function(b){return d(\"MAWDbPersonalSenderKeyStatusTxns\").bulkDeletePersonalSenderKeyStatus(a,b)}});g.deletePersonalSenderKeyStatus=a}),98);\n__d(\"MAWLeaveGroupsApi\",[\"MAWDbGroupInfoTxns\",\"MAWDbParticipantTxns\",\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWTransactionMode\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWIndexedDb\").makeMsgrTransactor({groupInfo:d(\"MAWTransactionMode\").READONLY,participants:d(\"MAWTransactionMode\").READWRITE,threads:d(\"MAWTransactionMode\").READWRITE},\"leaveGroups\",function(a){return function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return h.apply(void 0,[a].concat(c))}});function h(a,b){var c=b.groupJids;return d(\"MAWDbGroupInfoTxns\").getGroupInfos(a,c).then(function(b){b=b.filter(Boolean);b=b.map(function(a){return a.threadId});var e=d(\"MAWGlobals\").getMyUserJid();return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbParticipantTxns\").bulkDeleteParticipantAcrossThreads(a,c,e),d(\"MAWDbThreadTxns\").archiveThreads(a,b,!0)]).then(function(){})})}g.leaveGroups=a}),98);\n__d(\"WASmaxInGroupsLeaveClientErrors\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorBadRequestMixin\",\"WASmaxInGroupsIQErrorFallbackClientMixin\",\"WASmaxInGroupsIQErrorForbiddenMixin\",\"WASmaxInGroupsIQErrorItemNotFoundMixin\",\"WASmaxInGroupsIQErrorLockedMixin\",\"WASmaxInGroupsIQErrorNotAuthorizedMixin\",\"WASmaxInGroupsIQErrorRateOverlimitMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsIQErrorRateOverlimitMixin\").parseIQErrorRateOverlimitMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorRateOverlimit\",value:b.value});var c=d(\"WASmaxInGroupsIQErrorBadRequestMixin\").parseIQErrorBadRequestMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorBadRequest\",value:c.value});var e=d(\"WASmaxInGroupsIQErrorItemNotFoundMixin\").parseIQErrorItemNotFoundMixin(a);if(e.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorItemNotFound\",value:e.value});var f=d(\"WASmaxInGroupsIQErrorNotAuthorizedMixin\").parseIQErrorNotAuthorizedMixin(a);if(f.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorNotAuthorized\",value:f.value});var g=d(\"WASmaxInGroupsIQErrorForbiddenMixin\").parseIQErrorForbiddenMixin(a);if(g.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorForbidden\",value:g.value});var h=d(\"WASmaxInGroupsIQErrorLockedMixin\").parseIQErrorLockedMixin(a);if(h.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorLocked\",value:h.value});var i=d(\"WASmaxInGroupsIQErrorFallbackClientMixin\").parseIQErrorFallbackClientMixin(a);return i.success?d(\"WAResultOrError\").makeResult({name:\"IQErrorFallbackClient\",value:i.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"IQErrorRateOverlimit\",\"IQErrorBadRequest\",\"IQErrorItemNotFound\",\"IQErrorNotAuthorized\",\"IQErrorForbidden\",\"IQErrorLocked\",\"IQErrorFallbackClient\"],[b,c,e,f,g,h,i])}g.parseLeaveClientErrors=a}),98);\n__d(\"WASmaxInGroupsLeaveResponseClientError\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorResponseMixin\",\"WASmaxInGroupsLeaveClientErrors\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;a=d(\"WASmaxInGroupsIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxInGroupsLeaveClientErrors\").parseLeaveClientErrors(c.value);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{errorLeaveClientErrors:b.value}))}g.parseLeaveResponseClientError=a}),98);\n__d(\"WASmaxInGroupsLeaveResponseServerError\",[\"WASmaxInGroupsBaseServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxInGroupsBaseServerErrorMixin\").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseLeaveResponseServerError=a}),98);\n__d(\"WASmaxInGroupsLeaveGroupNotAllowedMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"group\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"405\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseLeaveGroupNotAllowedMixin=a}),98);\n__d(\"WASmaxInGroupsLeaveGroupServerErrorMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"group\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"500\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseLeaveGroupServerErrorMixin=a}),98);\n__d(\"WASmaxInGroupsLeaveGroupNotAllowedOrServerErrorMixinGroup\",[\"WAResultOrError\",\"WASmaxInGroupsLeaveGroupNotAllowedMixin\",\"WASmaxInGroupsLeaveGroupServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsLeaveGroupNotAllowedMixin\").parseLeaveGroupNotAllowedMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"LeaveGroupNotAllowed\",value:b.value});var c=d(\"WASmaxInGroupsLeaveGroupServerErrorMixin\").parseLeaveGroupServerErrorMixin(a);return c.success?d(\"WAResultOrError\").makeResult({name:\"LeaveGroupServerError\",value:c.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"LeaveGroupNotAllowed\",\"LeaveGroupServerError\"],[b,c])}g.parseLeaveGroupNotAllowedOrServerErrorMixinGroup=a}),98);\n__d(\"WASmaxInGroupsLeaveLinkedGroupsBadRequestMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"linked_groups\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"400\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseLeaveLinkedGroupsBadRequestMixin=a}),98);\n__d(\"WASmaxInGroupsLeaveLinkedGroupsNotAllowedMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"linked_groups\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"405\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseLeaveLinkedGroupsNotAllowedMixin=a}),98);\n__d(\"WASmaxInGroupsLeaveLinkedGroupsServerErrorMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"linked_groups\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"500\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseLeaveLinkedGroupsServerErrorMixin=a}),98);\n__d(\"WASmaxInGroupsLeaveLinkedGroupsBadRequestOrNotAllowedOrServerErrorMixinGroup\",[\"WAResultOrError\",\"WASmaxInGroupsLeaveLinkedGroupsBadRequestMixin\",\"WASmaxInGroupsLeaveLinkedGroupsNotAllowedMixin\",\"WASmaxInGroupsLeaveLinkedGroupsServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsLeaveLinkedGroupsBadRequestMixin\").parseLeaveLinkedGroupsBadRequestMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"LeaveLinkedGroupsBadRequest\",value:b.value});var c=d(\"WASmaxInGroupsLeaveLinkedGroupsNotAllowedMixin\").parseLeaveLinkedGroupsNotAllowedMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"LeaveLinkedGroupsNotAllowed\",value:c.value});var e=d(\"WASmaxInGroupsLeaveLinkedGroupsServerErrorMixin\").parseLeaveLinkedGroupsServerErrorMixin(a);return e.success?d(\"WAResultOrError\").makeResult({name:\"LeaveLinkedGroupsServerError\",value:e.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"LeaveLinkedGroupsBadRequest\",\"LeaveLinkedGroupsNotAllowed\",\"LeaveLinkedGroupsServerError\"],[b,c,e])}g.parseLeaveLinkedGroupsBadRequestOrNotAllowedOrServerErrorMixinGroup=a}),98);\n__d(\"WASmaxInGroupsParentGroupMixin\",[\"WAResultOrError\",\"WASmaxParseJid\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxParseJid\").attrGroupJid(a,\"parent_group_jid\");return!a.success?a:d(\"WAResultOrError\").makeResult({parentGroupJid:a.value})}g.parseParentGroupMixin=a}),98);\n__d(\"WASmaxInGroupsLeaveResponseSuccess\",[\"WAResultOrError\",\"WASmaxInGroupsIQResultResponseMixin\",\"WASmaxInGroupsLeaveGroupNotAllowedOrServerErrorMixinGroup\",\"WASmaxInGroupsLeaveLinkedGroupsBadRequestOrNotAllowedOrServerErrorMixinGroup\",\"WASmaxInGroupsParentGroupMixin\",\"WASmaxParseJid\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function h(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"group\");if(!b.success)return b;b=d(\"WASmaxParseJid\").attrGroupJid(a,\"id\");if(!b.success)return b;a=d(\"WASmaxInGroupsLeaveGroupNotAllowedOrServerErrorMixinGroup\").parseLeaveGroupNotAllowedOrServerErrorMixinGroup(a);return d(\"WAResultOrError\").makeResult({id:b.value,leaveGroupNotAllowedOrServerErrorMixinGroup:a.success?a.value:null})}function i(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"linked_groups\");if(!b.success)return b;b=d(\"WASmaxInGroupsParentGroupMixin\").parseParentGroupMixin(a);if(!b.success)return b;a=d(\"WASmaxInGroupsLeaveLinkedGroupsBadRequestOrNotAllowedOrServerErrorMixinGroup\").parseLeaveLinkedGroupsBadRequestOrNotAllowedOrServerErrorMixinGroup(a);return d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},b.value,{leaveLinkedGroupsBadRequestOrNotAllowedOrServerErrorMixinGroup:a.success?a.value:null}))}function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"leave\");if(!c.success)return c;a=d(\"WASmaxInGroupsIQResultResponseMixin\").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxParseUtils\").mapChildrenWithTag(c.value,\"group\",0,1024,h);if(!b.success)return b;c=d(\"WASmaxParseUtils\").mapChildrenWithTag(c.value,\"linked_groups\",0,1024,i);return!c.success?c:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{leaveGroup:b.value,leaveLinkedGroups:c.value}))}g.parseLeaveResponseSuccessLeaveGroup=h;g.parseLeaveResponseSuccessLeaveLinkedGroups=i;g.parseLeaveResponseSuccess=a}),98);\n__d(\"WASmaxOutGroupsBaseSetServerMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutGroupsBaseIQSetRequestMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(){var a=d(\"WASmaxOutGroupsBaseIQSetRequestMixin\").mergeBaseIQSetRequestMixin(d(\"WASmaxJsx\").smax(\"iq\",{to:d(\"WAWap\").G_US,xmlns:\"w:g2\"}));return a}function a(a){var b=h();return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeBaseSetServerMixin=a}),98);\n__d(\"WASmaxOutGroupsParentGroupMixin\",[\"WASmaxJsx\",\"WASmaxMixins\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyParentGroupJid;a=d(\"WASmaxJsx\").smax(\"smax$any\",{parent_group_jid:d(\"WAWap\").GROUP_JID(a)});return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeParentGroupMixin=a}),98);\n__d(\"WASmaxOutGroupsLeaveLeaveGroupsRequestMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutGroupsParentGroupMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.groupId;a=d(\"WASmaxJsx\").smax(\"group\",{id:d(\"WAWap\").GROUP_JID(a)});return a}function i(a){a=d(\"WASmaxOutGroupsParentGroupMixin\").mergeParentGroupMixin(d(\"WASmaxJsx\").smax(\"linked_groups\",null),a);return a}function j(a){var b=a.groupArgs;a=a.linkedGroupsArgs;b=d(\"WASmaxJsx\").smax(\"leave\",null,[].concat(d(\"WASmaxChildren\").REPEATED_CHILD(h,b,1,1024),d(\"WASmaxChildren\").REPEATED_CHILD(i,a,0,1024)));return b}function a(a,b){b=j(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeLeaveLeaveGroupsRequestGroup=h;g.makeLeaveLeaveGroupsRequestLinkedGroups=i;g.mergeLeaveLeaveGroupsRequestMixin=a}),98);\n__d(\"WASmaxOutGroupsLeaveLeaveLinkedGroupsRequestMixin\",[\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxMixins\",\"WASmaxOutGroupsParentGroupMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.groupId;a=d(\"WASmaxJsx\").smax(\"group\",{id:d(\"WAWap\").GROUP_JID(a)});return a}function i(a){a=d(\"WASmaxOutGroupsParentGroupMixin\").mergeParentGroupMixin(d(\"WASmaxJsx\").smax(\"linked_groups\",null),a);return a}function j(a){var b=a.groupArgs;a=a.linkedGroupsArgs;b=d(\"WASmaxJsx\").smax(\"leave\",null,[].concat(d(\"WASmaxChildren\").REPEATED_CHILD(h,b,0,1024),d(\"WASmaxChildren\").REPEATED_CHILD(i,a,1,1024)));return b}function a(a,b){b=j(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.makeLeaveLeaveLinkedGroupsRequestGroup=h;g.makeLeaveLeaveLinkedGroupsRequestLinkedGroups=i;g.mergeLeaveLeaveLinkedGroupsRequestMixin=a}),98);\n__d(\"WASmaxOutGroupsLeaveLeaveLinkedOrLeaveGroupsRequestMixinGroup\",[\"WASmaxMixinGroupExhaustiveError\",\"WASmaxOutGroupsLeaveLeaveGroupsRequestMixin\",\"WASmaxOutGroupsLeaveLeaveLinkedGroupsRequestMixin\"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.leaveLeaveLinkedGroupsRequest)return d(\"WASmaxOutGroupsLeaveLeaveLinkedGroupsRequestMixin\").mergeLeaveLeaveLinkedGroupsRequestMixin(a,b.leaveLeaveLinkedGroupsRequest);if(b.leaveLeaveGroupsRequest)return d(\"WASmaxOutGroupsLeaveLeaveGroupsRequestMixin\").mergeLeaveLeaveGroupsRequestMixin(a,b.leaveLeaveGroupsRequest);throw new(d(\"WASmaxMixinGroupExhaustiveError\").SmaxMixinGroupExhaustiveError)()}g.mergeLeaveLeaveLinkedOrLeaveGroupsRequestMixinGroup=a}),98);\n__d(\"WASmaxOutGroupsLeaveRequest\",[\"WASmaxJsx\",\"WASmaxOutGroupsBaseSetServerMixin\",\"WASmaxOutGroupsLeaveLeaveLinkedOrLeaveGroupsRequestMixinGroup\"],(function(a,b,c,d,e,f,g){function a(a){a=a.leaveLeaveLinkedOrLeaveGroupsRequestMixinGroupArgs;a=d(\"WASmaxOutGroupsBaseSetServerMixin\").mergeBaseSetServerMixin(d(\"WASmaxJsx\").smax(\"iq\",null,d(\"WASmaxOutGroupsLeaveLeaveLinkedOrLeaveGroupsRequestMixinGroup\").mergeLeaveLeaveLinkedOrLeaveGroupsRequestMixinGroup(d(\"WASmaxJsx\").smax(\"leave\",null),a)));return a}g.makeLeaveRequest=a}),98);\n__d(\"WASmaxGroupsLeaveRPC\",[\"WAComms\",\"WASmaxInGroupsLeaveResponseClientError\",\"WASmaxInGroupsLeaveResponseServerError\",\"WASmaxInGroupsLeaveResponseSuccess\",\"WASmaxOutGroupsLeaveRequest\",\"WASmaxParsingFailure\",\"WASmaxRpcUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d(\"WASmaxOutGroupsLeaveRequest\").makeLeaveRequest(a);j.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAComms\").sendSmaxStanza(e,c));case 3:f=j.sent;g=d(\"WASmaxInGroupsLeaveResponseSuccess\").parseLeaveResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt(\"return\",{name:\"LeaveResponseSuccess\",value:g.value});case 7:h=d(\"WASmaxInGroupsLeaveResponseServerError\").parseLeaveResponseServerError(f,e);if(!h.success){j.next=10;break}return j.abrupt(\"return\",{name:\"LeaveResponseServerError\",value:h.value});case 10:i=d(\"WASmaxInGroupsLeaveResponseClientError\").parseLeaveResponseClientError(f,e);if(!i.success){j.next=13;break}return j.abrupt(\"return\",{name:\"LeaveResponseClientError\",value:i.value});case 13:throw new(d(\"WASmaxParsingFailure\").SmaxParsingFailure)(d(\"WASmaxRpcUtils\").errorMessageRpcParsing(\"Leave\",{Success:g,ServerError:h,ClientError:i}));case 14:case\"end\":return j.stop()}},null,this)}g.sendLeaveRPC=a}),98);\n__d(\"MAWLeaveGroups\",[\"MAWDeletePersonalSenderKeyStatusApi\",\"MAWGlobals\",\"MAWLeaveGroupsApi\",\"MAWODSProxy\",\"WAOdsEnums\",\"WASmaxGroupsLeaveRPC\",\"asyncToGeneratorRuntime\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.groups;if(a.length===0)return;a=(yield d(\"WASmaxGroupsLeaveRPC\").sendLeaveRPC({leaveLeaveLinkedOrLeaveGroupsRequestMixinGroupArgs:{leaveLeaveGroupsRequest:{groupArgs:a.map(function(a){return{groupId:a}})}}}));if(a.name!==\"LeaveResponseSuccess\"){d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_LEAVE_PARTICIPANT,key:\"fail\"});throw c(\"err\")(\"Failed to parse leaveGroups response\")}d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_LEAVE_PARTICIPANT,key:\"success\"});a=a.value;a=a.leaveGroup.map(function(a){return a.id});yield d(\"MAWLeaveGroupsApi\").leaveGroups({groupJids:a});yield d(\"MAWDeletePersonalSenderKeyStatusApi\").deletePersonalSenderKeyStatus(a)});return i.apply(this,arguments)}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"leaveGroups\",function(a){a=a.groups;return h({groups:a})}).end();g.leaveGroupsStep=h;g.leaveGroups=a}),98);\n__d(\"MAWMarkThreadAsRead\",[\"MAWDbMsgTxns\",\"MAWEphemeralGatingUtil\",\"MAWGetUnreadMsgsApi\",\"MAWGetUnreadMsgsApi__DONOTUSE\",\"MAWGlobals\",\"MAWMarkReadReceiptsSentUpToApi\",\"MAWMarkThreadAsReadUpToApi\",\"MAWMessageRequestUtils\",\"MAWUpdateEphemeralityOnMarkMsgsFromOtherAsReadApi\",\"Promise\",\"WADeprecatedSendIq\",\"WAJids\",\"WALogger\",\"WAPromiseQueue\",\"WAWap\",\"asyncToGeneratorRuntime\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"markThreadAsRead skips sending receipts for \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"markThreadAsRead skips sending receipts for \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"markThreadAsRead skips sending receipts for \",\"\"]);k=function(){return a};return a}var l=256,m=new(d(\"WAPromiseQueue\").PromiseQueueMap)();a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"markThreadAsRead\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,c,e){var f=a.chatJid;c=a.isReadReceiptsDisabled;var g=c===void 0?!1:c;c=a.relationship;a=a.upTo;var h=e.interruptJob,o=e.jobStartTime;e=(yield d(\"MAWMarkThreadAsReadUpToApi\").markThreadAsReadUpTo(f,a));if(c!=null&&d(\"MAWMessageRequestUtils\").isInboxRequest(e.folder,c)){d(\"WALogger\").DEV(k(),f);return h()}if(e.type===\"missing\"){d(\"WALogger\").DEV(j(),f);return h()}if(!e.isReadReceiptExpectedToBeSent){d(\"WALogger\").DEV(i(),f);return h()}e.type;return m.enqueue(String(f),b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=!0;while(a){var b=d(\"MAWDbMsgTxns\").IS_SORT_ORDER_COMPARISON_ENABLED?yield d(\"MAWGetUnreadMsgsApi\").getUnreadMsgs(f,l,g):yield d(\"MAWGetUnreadMsgsApi__DONOTUSE\").getUnreadMsgs__DONOTUSE(f,l,g);if(b.type!==\"found\"){b.type;break}var c=b.loadedUpTo,e=b.unreadMsgs;yield n(e,o);d(\"MAWEphemeralGatingUtil\").isSendBasedDisappearingMessageEnabled()||(yield d(\"MAWUpdateEphemeralityOnMarkMsgsFromOtherAsReadApi\").updateEphemeralityOnMarkMsgsFromOtherAsRead(e,o));yield d(\"MAWMarkReadReceiptsSentUpToApi\").markReadReceiptsSentUpTo(f,c);a=b.maybeMore}}))});return function(b,c,d){return a.apply(this,arguments)}}()).end();function n(a,e){if(a.length===0)return(h||(h=b(\"Promise\"))).resolve();var f=a[0].chat;return d(\"WAJids\").switchOnChatJidType(f,{group:function(c){var g=d(\"WAWap\").GROUP_JID(c),i=new Map();a.forEach(function(a){var b=a.author,c=i.get(b)||[];c.push(a.externalId);i.set(b,c)});var j=[];i.forEach(function(a,b){j.push(o(g,f,a,b,e))});return(h||(h=b(\"Promise\"))).all(j)},interopUser:function(a){throw c(\"err\")(\"InteropUserJid is not supported yet\")},lidUser:function(a){throw c(\"err\")(\"LidUserJid is not supported yet\")},msgrUser:function(b){b=d(\"WAWap\").USER_JID(b);var c=a.map(function(a){return a.externalId});return o(b,f,c,null,e)},phoneUser:function(a){throw c(\"err\")(\"PhoneUserJid is not supported yet\")}}).then(function(){})}function o(a,b,c,e,f){var g=null;c.length>1&&(g=d(\"WAWap\").wap(\"list\",null,c.slice(1).map(function(a){return d(\"WAWap\").wap(\"item\",{id:d(\"WAWap\").CUSTOM_STRING(a)})})));c=c[0];f=d(\"WAWap\").wap(\"receipt\",{id:d(\"WAWap\").CUSTOM_STRING(c),participant:e!=null?d(\"WAWap\").USER_JID(e):d(\"WAWap\").DROP_ATTR,t:d(\"WAWap\").CUSTOM_STRING(String(f)),to:a,type:\"read\"},g);return d(\"WADeprecatedSendIq\").deprecatedSendStanzaAndWaitForAck(f,{\"class\":\"receipt\",from:b,id:c,participant:e!=null?d(\"WAJids\").defaultDeviceJidForUser(e):null,type:\"read\"})}g.markThreadAsRead=a}),98);\n__d(\"MAWPromoteGroupParticipants\",[\"MAWGlobals\",\"MAWODSProxy\",\"WAChangeGroupParticipantAdminStatusApi\",\"WAGlobals\",\"WAJids\",\"WAOdsEnums\",\"WAPromoteDemoteGroupParticipantProtocol\",\"WAResultOrError\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"promoteGroupParticipants\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.group;a=a.users;var c=d(\"WAGlobals\").getJidUtilsApi(),e=c.toUserJid;c=a.map(function(a){return e(a)});if(c.length===0)return d(\"WAResultOrError\").makeResult({groupJid:b,participants:[],type:\"default\"});a=(yield d(\"WAPromoteDemoteGroupParticipantProtocol\").promoteGroupParticipantsProtocol({group:b,participants:c}));if(!a.success){d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_PROMOTE_PARTICIPANT,key:\"fail\"});return d(\"WAResultOrError\").makeError(a.error.type)}d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_PROMOTE_PARTICIPANT,key:\"success\"});c=a.value.participants.filter(function(a){a=a.result;return a.success}).map(function(a){a=a.user;return{addressable:!0,type:\"participant\",user:a}})||[];yield d(\"WAChangeGroupParticipantAdminStatusApi\").changeGroupParticipantAdminStatus(null,b,d(\"WAJids\").AUTHOR_ME,c,\"admin\");a=(yield d(\"MAWGlobals\").getJobResultConvertersImpls().convertPromoteGroupParticipantsResult==null?void 0:d(\"MAWGlobals\").getJobResultConvertersImpls().convertPromoteGroupParticipantsResult(b,c));return a?d(\"WAResultOrError\").makeResult(a):d(\"WAResultOrError\").makeResult({groupJid:b,participants:c,type:\"default\"})});return function(b){return a.apply(this,arguments)}}()).end();g.promoteGroupParticipants=a}),98);\n__d(\"WASmaxInGroupsIQErrorPayloadTooLargeMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"payload-too-large\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",413);return!a.success?a:d(\"WAResultOrError\").makeResult({text:b.value,code:a.value})}g.parseIQErrorPayloadTooLargeMixin=a}),98);\n__d(\"WASmaxInGroupsRemoveParticipantsClientErrors\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorBadRequestMixin\",\"WASmaxInGroupsIQErrorFallbackClientMixin\",\"WASmaxInGroupsIQErrorForbiddenMixin\",\"WASmaxInGroupsIQErrorItemNotFoundMixin\",\"WASmaxInGroupsIQErrorLockedMixin\",\"WASmaxInGroupsIQErrorNotAuthorizedMixin\",\"WASmaxInGroupsIQErrorPayloadTooLargeMixin\",\"WASmaxInGroupsIQErrorRateOverlimitMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsIQErrorRateOverlimitMixin\").parseIQErrorRateOverlimitMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorRateOverlimit\",value:b.value});var c=d(\"WASmaxInGroupsIQErrorPayloadTooLargeMixin\").parseIQErrorPayloadTooLargeMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorPayloadTooLarge\",value:c.value});var e=d(\"WASmaxInGroupsIQErrorBadRequestMixin\").parseIQErrorBadRequestMixin(a);if(e.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorBadRequest\",value:e.value});var f=d(\"WASmaxInGroupsIQErrorItemNotFoundMixin\").parseIQErrorItemNotFoundMixin(a);if(f.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorItemNotFound\",value:f.value});var g=d(\"WASmaxInGroupsIQErrorNotAuthorizedMixin\").parseIQErrorNotAuthorizedMixin(a);if(g.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorNotAuthorized\",value:g.value});var h=d(\"WASmaxInGroupsIQErrorForbiddenMixin\").parseIQErrorForbiddenMixin(a);if(h.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorForbidden\",value:h.value});var i=d(\"WASmaxInGroupsIQErrorLockedMixin\").parseIQErrorLockedMixin(a);if(i.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorLocked\",value:i.value});var j=d(\"WASmaxInGroupsIQErrorFallbackClientMixin\").parseIQErrorFallbackClientMixin(a);return j.success?d(\"WAResultOrError\").makeResult({name:\"IQErrorFallbackClient\",value:j.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"IQErrorRateOverlimit\",\"IQErrorPayloadTooLarge\",\"IQErrorBadRequest\",\"IQErrorItemNotFound\",\"IQErrorNotAuthorized\",\"IQErrorForbidden\",\"IQErrorLocked\",\"IQErrorFallbackClient\"],[b,c,e,f,g,h,i,j])}g.parseRemoveParticipantsClientErrors=a}),98);\n__d(\"WASmaxInGroupsRemoveParticipantsResponseClientError\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorResponseMixin\",\"WASmaxInGroupsRemoveParticipantsClientErrors\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;a=d(\"WASmaxInGroupsIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxInGroupsRemoveParticipantsClientErrors\").parseRemoveParticipantsClientErrors(c.value);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{errorRemoveParticipantsClientErrors:b.value}))}g.parseRemoveParticipantsResponseClientError=a}),98);\n__d(\"WASmaxInGroupsRemoveParticipantsResponseServerError\",[\"WASmaxInGroupsBaseServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxInGroupsBaseServerErrorMixin\").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseRemoveParticipantsResponseServerError=a}),98);\n__d(\"WASmaxInGroupsParticipantNotAllowedMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"405\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantNotAllowedMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantNotInGroupMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"404\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseParticipantNotInGroupMixin=a}),98);\n__d(\"WASmaxInGroupsRemoveParticipantsLinkedGroupsServerErrorMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"error\",\"500\");return!b.success?b:d(\"WAResultOrError\").makeResult({error:b.value})}g.parseRemoveParticipantsLinkedGroupsServerErrorMixin=a}),98);\n__d(\"WASmaxInGroupsParticipantNotInGroupOrParticipantNotAllowedOrParticipantNotAcceptableOrRemoveParticipantsLinkedGroupsServerErrorMixinGroup\",[\"WAResultOrError\",\"WASmaxInGroupsParticipantNotAcceptableMixin\",\"WASmaxInGroupsParticipantNotAllowedMixin\",\"WASmaxInGroupsParticipantNotInGroupMixin\",\"WASmaxInGroupsRemoveParticipantsLinkedGroupsServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsParticipantNotInGroupMixin\").parseParticipantNotInGroupMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantNotInGroup\",value:b.value});var c=d(\"WASmaxInGroupsParticipantNotAllowedMixin\").parseParticipantNotAllowedMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantNotAllowed\",value:c.value});var e=d(\"WASmaxInGroupsParticipantNotAcceptableMixin\").parseParticipantNotAcceptableMixin(a);if(e.success)return d(\"WAResultOrError\").makeResult({name:\"ParticipantNotAcceptable\",value:e.value});var f=d(\"WASmaxInGroupsRemoveParticipantsLinkedGroupsServerErrorMixin\").parseRemoveParticipantsLinkedGroupsServerErrorMixin(a);return f.success?d(\"WAResultOrError\").makeResult({name:\"RemoveParticipantsLinkedGroupsServerError\",value:f.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"ParticipantNotInGroup\",\"ParticipantNotAllowed\",\"ParticipantNotAcceptable\",\"RemoveParticipantsLinkedGroupsServerError\"],[b,c,e,f])}g.parseParticipantNotInGroupOrParticipantNotAllowedOrParticipantNotAcceptableOrRemoveParticipantsLinkedGroupsServerErrorMixinGroup=a}),98);\n__d(\"WASmaxInGroupsRemoveParticipantsResponseSuccess\",[\"WAResultOrError\",\"WASmaxInGroupsGroupAddressingModeMixin\",\"WASmaxInGroupsParticipantNotInGroupOrParticipantNotAllowedOrParticipantNotAcceptableOrRemoveParticipantsLinkedGroupsServerErrorMixinGroup\",\"WASmaxInGroupsPhoneNumberMixin\",\"WASmaxParseJid\",\"WASmaxParseReference\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function h(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"participant\");if(!b.success)return b;b=d(\"WASmaxParseJid\").attrUserJid(a,\"jid\");if(!b.success)return b;var c=d(\"WASmaxInGroupsPhoneNumberMixin\").parsePhoneNumberMixin(a);a=d(\"WASmaxInGroupsParticipantNotInGroupOrParticipantNotAllowedOrParticipantNotAcceptableOrRemoveParticipantsLinkedGroupsServerErrorMixinGroup\").parseParticipantNotInGroupOrParticipantNotAllowedOrParticipantNotAcceptableOrRemoveParticipantsLinkedGroupsServerErrorMixinGroup(a);return d(\"WAResultOrError\").makeResult({jid:b.value,phoneNumberMixin:c.success?c.value:null,participantNotInGroupOrParticipantNotAllowedOrParticipantNotAcceptableOrRemoveParticipantsLinkedGroupsServerErrorMixinGroup:a.success?a.value:null})}function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"remove\");if(!c.success)return c;var e=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"to\"]);if(!e.success)return e;e=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"from\",e.value);if(!e.success)return e;e=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"type\",\"result\");if(!e.success)return e;b=d(\"WASmaxParseReference\").attrStringFromReference(b,[\"id\"]);if(!b.success)return b;b=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"id\",b.value);if(!b.success)return b;b=d(\"WASmaxParseUtils\").optionalLiteral(d(\"WASmaxParseUtils\").attrString,c.value,\"linked_groups\",\"true\");if(!b.success)return b;a=d(\"WASmaxInGroupsGroupAddressingModeMixin\").parseGroupAddressingModeMixin(a);c=d(\"WASmaxParseUtils\").mapChildrenWithTag(c.value,\"participant\",1,1024,h);return!c.success?c:d(\"WAResultOrError\").makeResult({type:e.value,removeLinkedGroups:b.value,groupAddressingModeMixin:a.success?a.value:null,removeParticipant:c.value})}g.parseRemoveParticipantsResponseSuccessRemoveParticipant=h;g.parseRemoveParticipantsResponseSuccess=a}),98);\n__d(\"WASmaxOutGroupsRemoveParticipantsRequest\",[\"WASmaxAttrs\",\"WASmaxChildren\",\"WASmaxJsx\",\"WASmaxOutGroupsBaseSetGroupMixin\",\"WAWap\"],(function(a,b,c,d,e,f,g){function h(a){a=a.participantJid;a=d(\"WASmaxJsx\").smax(\"participant\",{jid:d(\"WAWap\").USER_JID(a)});return a}function a(a){var b=a.participantArgs,c=a.hasRemoveLinkedGroupsTrue;c=d(\"WASmaxOutGroupsBaseSetGroupMixin\").mergeBaseSetGroupMixin(d(\"WASmaxJsx\").smax(\"iq\",null,d(\"WASmaxJsx\").smax(\"remove\",{linked_groups:d(\"WASmaxAttrs\").OPTIONAL_LITERAL(\"true\",c)},d(\"WASmaxChildren\").REPEATED_CHILD(h,b,1,1024))),a);return c}g.makeRemoveParticipantsRequestRemoveParticipant=h;g.makeRemoveParticipantsRequest=a}),98);\n__d(\"WASmaxGroupsRemoveParticipantsRPC\",[\"WAComms\",\"WASmaxInGroupsRemoveParticipantsResponseClientError\",\"WASmaxInGroupsRemoveParticipantsResponseServerError\",\"WASmaxInGroupsRemoveParticipantsResponseSuccess\",\"WASmaxOutGroupsRemoveParticipantsRequest\",\"WASmaxParsingFailure\",\"WASmaxRpcUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d(\"WASmaxOutGroupsRemoveParticipantsRequest\").makeRemoveParticipantsRequest(a);j.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAComms\").sendSmaxStanza(e,c));case 3:f=j.sent;g=d(\"WASmaxInGroupsRemoveParticipantsResponseSuccess\").parseRemoveParticipantsResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt(\"return\",{name:\"RemoveParticipantsResponseSuccess\",value:g.value});case 7:h=d(\"WASmaxInGroupsRemoveParticipantsResponseClientError\").parseRemoveParticipantsResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt(\"return\",{name:\"RemoveParticipantsResponseClientError\",value:h.value});case 10:i=d(\"WASmaxInGroupsRemoveParticipantsResponseServerError\").parseRemoveParticipantsResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt(\"return\",{name:\"RemoveParticipantsResponseServerError\",value:i.value});case 13:throw new(d(\"WASmaxParsingFailure\").SmaxParsingFailure)(d(\"WASmaxRpcUtils\").errorMessageRpcParsing(\"RemoveParticipants\",{Success:g,ClientError:h,ServerError:i}));case 14:case\"end\":return j.stop()}},null,this)}g.sendRemoveParticipantsRPC=a}),98);\n__d(\"MAWRemoveGroupParticipants\",[\"MAWGlobals\",\"MAWODSProxy\",\"WAGlobals\",\"WAJids\",\"WALogger\",\"WAOdsEnums\",\"WAPREList\",\"WAPREMetrics\",\"WARemoveGroupParticipantsApi\",\"WAResultOrError\",\"WASmaxGroupsRemoveParticipantsRPC\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to remove a participant: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to remove participants: \",\"\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"sendIq\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){b=a.group;c=a.users;var e=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.REMOVE_PARTICIPANTS,{\"int\":{removedParticipants:c.length}});a=d(\"WAGlobals\").getJidUtilsApi();var f=a.toUserJid;a=c.map(function(a){return f(a)});var g=[];if(a.length>0){c=function(a){d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_REMOVE_PARTICIPANT,key:\"fail\"}),d(\"WALogger\").ERROR(i(),j.name),e.endFail(\"send_iq_fail \"+a)};var j=(yield d(\"WASmaxGroupsRemoveParticipantsRPC\").sendRemoveParticipantsRPC({hasRemoveLinkedGroupsTrue:!1,iqTo:b,participantArgs:a.map(function(a){return{participantJid:a}})}));e.addPoint(\"finish_send_iq\");switch(j.name){case\"RemoveParticipantsResponseClientError\":a=j.value.errorRemoveParticipantsClientErrors.name;c(a);return d(\"WAResultOrError\").makeError(a);case\"RemoveParticipantsResponseServerError\":a=j.value.errorServerErrors.name;c(a);return d(\"WAResultOrError\").makeError(a);case\"RemoveParticipantsResponseSuccess\":d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.GROUP_REMOVE_PARTICIPANT,key:\"success\"}),j.value.removeParticipant.forEach(function(a){var b=a.jid;a=a.participantNotInGroupOrParticipantNotAllowedOrParticipantNotAcceptableOrRemoveParticipantsLinkedGroupsServerErrorMixinGroup;a==null?g.push({addressable:!0,type:\"nonparticipant\",user:b}):d(\"WALogger\").ERROR(h(),a.name)})}}e.addPoint(\"start_remove_participant_txn\");yield d(\"WARemoveGroupParticipantsApi\").removeGroupParticipants(null,b,d(\"WAJids\").AUTHOR_ME,g,!0);e.addPoint(\"finish_remove_participant_txn\");c=(yield d(\"MAWGlobals\").getJobResultConvertersImpls().convertRemoveGroupParticipantsResult==null?void 0:d(\"MAWGlobals\").getJobResultConvertersImpls().convertRemoveGroupParticipantsResult(b,g));e.endSuccess();return c?d(\"WAResultOrError\").makeResult(c):d(\"WAResultOrError\").makeResult({groupJid:b,participants:g})});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.removeGroupParticipants=a}),98);\n__d(\"MAWReportUserSpam\",[\"I64\",\"MAWGlobals\",\"MAWJids\",\"MAWSpamReportUtils\",\"WADeprecatedSendIq\",\"WAGetGroupInfo\",\"WAGlobals\",\"WAJids\",\"WAResultOrError\",\"WAWap\",\"asyncToGeneratorRuntime\",\"err\",\"isStringNullOrEmpty\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=30;a=[\"impersonation\"];e=[\"ig_user_impersonation\"];var j=Array.of.apply(Array,a.concat(e));f=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"reportUserSpam\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var e=a.chatJid,f=a.context,g=a.frxParams,h=a.frxTags,k=a.isIgd,o=a.openMsgs,p=a.reportedMessageId,q=a.spamFlow,r=a.userJid;a=(h==null?void 0:h.some(function(a){return j.includes(a)}))===!0;var s=a?[]:yield d(\"MAWGlobals\").getDbImpls().getLastMsgsInChatForSpamReport(e,i);a=null;if(h!=null){if(h.length===0)throw c(\"err\")(\"spam reasons should not be an empty array\");a=d(\"WAWap\").wap(\"tagset\",null,h.map(function(a){return d(\"WAWap\").wap(\"tag\",{value:d(\"WAWap\").CUSTOM_STRING(a)})}))}h=null;c(\"isStringNullOrEmpty\")(g)||(h=d(\"WAWap\").wap(\"parameters\",null,g));g=null;f!=null&&(g=d(\"WAWap\").wap(\"context\",null,f));var t=null;(a!=null||g!=null||h!=null)&&(t=d(\"WAWap\").wap(\"frx\",null,a,g,h));var u=l(o,e,r);f=(yield d(\"WAJids\").switchOnMsgrChatJidType(e,{group:function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=d(\"WAWap\").DROP_ATTR,c=d(\"WAWap\").DROP_ATTR,e=(yield d(\"WAGetGroupInfo\").getGroupInfo(a));e!=null&&e.subject!=null&&e.subject.content!=null&&(b=d(\"WAWap\").CUSTOM_STRING(e.subject.content));e!=null&&e.inviter!=null&&(c=d(\"WAWap\").USER_JID(e.inviter));return m(s,a,r,c,b,q,t,u,k,p)});function c(b){return a.apply(this,arguments)}return c}(),user:function(){return n(s,r,q,t,u,k,p)}}));d(\"WADeprecatedSendIq\").deprecatedCastStanza(f);return d(\"WAResultOrError\").makeResult()});return function(b){return a.apply(this,arguments)}}()).end();function k(a,b){var c=a.flat();if(a.length<i){var d;a=i-a.length;if(a<((d=b==null?void 0:b.length)!=null?d:0)){c=[].concat(((d=b)!=null?d:[]).slice(0,a),c)}else{c=[].concat((d=b)!=null?d:[],c)}}return c}function l(a,b,c){return((a=a)!=null?a:[]).map(function(a){var e=d(\"MAWJids\").toUserJid((h||(h=d(\"I64\"))).to_string(a.senderId));if(d(\"WAJids\").interpretAsGroupJid(b)!=null)return d(\"MAWSpamReportUtils\").formatLSDbMsgForSpamReport(a,null,d(\"WAJids\").toGroupJid(b),e);else{var f=(h||(h=d(\"I64\"))).equal(a.senderId,(h||(h=d(\"I64\"))).of_string(d(\"WAJids\").userIdFromJid(d(\"WAGlobals\").getMyUserJid())))?c:d(\"WAGlobals\").getMyUserJid();return d(\"MAWSpamReportUtils\").formatLSDbMsgForSpamReport(a,f,null,e)}})}function m(a,b,c,e,f,g,h,i,j,l){a=a.map(function(a){return d(\"MAWSpamReportUtils\").getformattedMsgsForSpamReport(a.msg,a.mediaInfo,a.editHistory,null,b,d(\"MAWSpamReportUtils\").getAuthorAsJidForSpam(a.msg),j,l!=null&&((a=a.msg)==null?void 0:a.msgId)===l)});a=k(a,i);return(i=d(\"WAWap\")).wap(\"iq\",{id:i.generateId(),to:i.S_WHATSAPP_NET,type:\"set\",xmlns:\"spam\"},i.wap(\"spam_list\",{jid:i.GROUP_JID(b),reportee:i.USER_JID(c),source:e,spam_flow:i.CUSTOM_STRING(g),subject:f},a),h)}function n(a,b,c,e,f,g,h){a=a.map(function(a){return d(\"MAWSpamReportUtils\").getformattedMsgsForSpamReport(a.msg,a.mediaInfo,a.editHistory,d(\"MAWSpamReportUtils\").getRecipientAsJidForSpam(a.msg,b),null,d(\"MAWSpamReportUtils\").getAuthorAsJidForSpam(a.msg),g,h!=null&&((a=a.msg)==null?void 0:a.msgId)===h)}).filter(function(a){return a!=null});a=k(a,f);return(f=d(\"WAWap\")).wap(\"iq\",{id:f.generateId(),to:f.S_WHATSAPP_NET,type:\"set\",xmlns:\"spam\"},f.wap(\"spam_list\",{jid:f.USER_JID(b),reportee:f.USER_JID(b),spam_flow:f.CUSTOM_STRING(c)},a),e)}g.reportUserSpam=f}),98);\n__d(\"MAWRerevokePendingStanzas\",[\"MAWBuildIncomingMsgs\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWJidUtils\",\"MAWMsgType\",\"MAWRemoveExpiredUnsendMsgsContent\",\"MAWTransactionMode\",\"MAWWriteRevokeMessageTxns\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"echoSerialization\",function(){return h()}).end();var h=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(b=d(\"MAWTransactionMode\")).READWRITE,deletedMessages:b.READWRITE,editMsgHistory:b.READWRITE,groupInfo:b.READWRITE,media:b.READWRITE,mediaBackup:b.READWRITE,messages:b.READWRITE,pendingStanzas:b.READWRITE,reactions:b.READWRITE,threads:b.READWRITE,xma:b.READWRITE},\"reRevokeMsgs\",function(a){return function(){return a.pendingStanzas.toArray().then(function(b){b=b.map(function(b){var c;if(((c=b.pendingContent)==null?void 0:c.type)===\"Revoked\"){var e=b==null?void 0:(c=b.pendingContent)==null?void 0:c.content;c=d(\"MAWJidUtils\").maybeToProtocolMsgId(e.author,e.threadJid,e.revokedExternalId);return c==null||e==null?d(\"MAWDexieTable\").dexieResolve():d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,c),a.threads.get({jid:c.chat})]).then(function(c){var f=c[0];c=c[1];if(f==null||c==null)return d(\"MAWDexieTable\").dexieResolve();var g=e.ts+d(\"WATimeUtils\").castToUnixTime(d(\"MAWBuildIncomingMsgs\").REVOKE_CONTENT_EXPIRATION_IN_SEC);g=babelHelpers[\"extends\"]({},f,{externalId:e.externalId,msgContent:d(\"MAWDbMsg\").getMsgContent(f),originalTs:f.ts,revokedExternalId:e.revokedExternalId,ts:e.ts,type:d(\"MAWMsgType\").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:d(\"WATimeUtils\").castToUnixTime(g)});return d(\"MAWDexieTable\").dexieAll([d(\"MAWWriteRevokeMessageTxns\").markExistingMsgRevoked(a,f,g,c,!0),a.pendingStanzas[\"delete\"](b.rowId)])})}return d(\"MAWDexieTable\").dexieResolve()});return d(\"MAWDexieTable\").dexieAll(b).then(function(){return d(\"MAWRemoveExpiredUnsendMsgsContent\").removeExpiredUnsendMsgsContentTxn(a)})})}});g.rerevokeMsgs=a;g.reRevokeMsgs=h}),98);\n__d(\"WASendAppDataFanoutProtocol\",[\"WAAsMessageApplication\",\"WABridge\",\"WAConvertAppData\",\"WAEncUserMsg\",\"WAErrorMessage\",\"WAGetCurrentUserDeviceInfoApi\",\"WAGlobals\",\"WAMsgApplication.pb\",\"WAOdsEnums\",\"WAResultOrError\",\"WASmaxAppdataPublishPeerRPC\",\"WATagsLogger\",\"encodeProtobuf\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to send appdata. Error: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Got phash mismatch on appdata, local[\",\"] server[\",\"]\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to fetch current device public identity key\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Attempting to send an appData stanza to more than the allowed \",\" devices\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Attempting to send an appData stanza to \",\" devices\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Sending appdata, externalId: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to send appdata to devices with error: \",\"\"]);n=function(){return a};return a}var o=d(\"WATagsLogger\").TAGS([\"sendAppDataFanout\"]);function a(a,b,c,e){e===void 0&&(e=\"checkPhash\");return p(a,b,c,e)[\"catch\"](function(a){a=d(\"WAErrorMessage\").maybeGetMessageFromError(a);o.ERROR(n(),a);return d(\"WAResultOrError\").makeError(\"runtime-error\")})}function p(a,c,e,f){var g,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;return b(\"regeneratorRuntime\").async(function(G){while(1)switch(G.prev=G.next){case 0:f===void 0&&(f=\"checkPhash\");o.LOG(m(),c);g=d(\"WAConvertAppData\").convertAppData(a);n={bytes:d(\"WAAsMessageApplication\").castToMessageApplicationBytes(d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMsgApplication.pb\").MessageApplicationSpec,g).readByteArray()),version:\"v3\"};p=[];q=Array.from(e.entries()).map(function(a){var b=a[0];a=a[1];return{identity:a.pubKey,jid:b}});r=d(\"WAGlobals\").getConfig().maxAppDataRecipients();q.length>r&&(o.WARN(l(),q.length),o.ERROR(k(),r),q=q.slice(0,r));s=[{devicesInfo:q,user:d(\"WAGlobals\").getMyUserJid()}];G.next=11;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return d(\"WAEncUserMsg\").encryptUserMsg(s,{messageBytes:n,type:\"appdata\"},[],{cryptoManager:a})},{operationType:\"encrypt\",flush:!0}));case 11:t=G.sent;u=t.phash;v=!1;t.participants!=null&&t.participants.forEach(function(a){a.type===\"pkmsg\"&&(v=!0),p.push({toJid:a.to,encTypeIndividualMixinArgs:{encType:a.type,encElementValue:a.ciphertext},encVersionFutureproofMixinArgs:{encV:parseInt(a.v,10)}})});w={appdataTo:d(\"WAGlobals\").getMyUserJid(),toArgs:p};x={peerPeerFanout:w};y=void 0;if(!v){G.next=27;break}G.next=21;return b(\"regeneratorRuntime\").awrap(d(\"WAGetCurrentUserDeviceInfoApi\").getCurrentUserDeviceInfo());case 21:z=G.sent;A=z==null?void 0:z.identityKey;if(!(A==null)){G.next=26;break}o.ERROR(j());return G.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"no-public-identity\"));case 26:y={deviceIdentityElementValue:A};case 27:B={appdataDeviceListCheck:f===\"checkPhash\"?\"true\":\"false\"};C={appdataId:c,peerPeerFanoutOrPeerSingleMixinGroupArgs:x,deviceIdentityMixinArgs:y,withDeviceListCheckMixinArgs:B};G.next=31;return b(\"regeneratorRuntime\").awrap(d(\"WASmaxAppdataPublishPeerRPC\").sendPeerRPC(C));case 31:D=G.sent;G.t0=D.name;G.next=G.t0===\"PeerResponseSuccess\"?35:43;break;case 35:F=(E=D.value.deviceListStaleMixin)==null?void 0:E.phash;if(!(F!=null&&u!=null&&F!==u)){G.next=42;break}o.LOG(i(),u,F);d(\"WABridge\").getBridge().fireAndForget(\"event\",\"odsBumpEntityKey\",{entity:d(\"WAOdsEnums\").Entity.PHASH_MISMATCH,key:\"appdata\"});return G.abrupt(\"return\",d(\"WAResultOrError\").makeResult({phashMismatch:!0}));case 42:return G.abrupt(\"return\",d(\"WAResultOrError\").makeResult({phashMismatch:!1}));case 43:D.name;o.ERROR(h(),D.value.error);return G.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"ack-failure\"));case 46:case\"end\":return G.stop()}},null,this)}g.sendAppDataToDevicesProtocol=a}),98);\n__d(\"MAWResendWrittenAppData\",[\"MAWGlobals\",\"WAGetDevices\",\"WALogger\",\"WASendAppDataFanoutProtocol\",\"WATimeUtils\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenAppData(\",\"): too old, dropping\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"resendWrittenAppData not sending message: \",\"\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"resendWrittenAppData\",{code:function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.appDataExternalId;yield d(\"WAGetDevices\").fetchAndSaveDevices(new Set([d(\"MAWGlobals\").getMyUserJid()]),\"resend-written-app-data\");var b=(yield d(\"MAWGlobals\").getDbImpls().getAppDataForResend(a));if(b.type!==\"not_sent\"){d(\"WALogger\").LOG(i(),b.type);return}b=(yield d(\"WASendAppDataFanoutProtocol\").sendAppDataToDevicesProtocol(b.appData,a,b.permittedIdentitiesPerDevice,\"dontCheckPhash\"));b.success===!1&&(yield d(\"MAWGlobals\").getDbImpls().markAppDataSendFailed(a))});function c(b){return a.apply(this,arguments)}return c}(),stopRetryIf:{onStopRetry:function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.appDataExternalId;d(\"WALogger\").LOG(h(),a);yield d(\"MAWGlobals\").getDbImpls().markAppDataDropped(a)});function c(b){return a.apply(this,arguments)}return c}(),timePassedSeconds:d(\"WATimeUtils\").DAY_SECONDS}}).end();g.resendWrittenAppData=a}),98);\n__d(\"MAWRestoreMessagesFromEchoDocuments\",[\"MAWBridge\",\"MAWHandleEchoMsgsRestoreApiV2\",\"MAWUpdateClientRestoreStatusOperationType\",\"Promise\",\"WALogger\",\"WAResultOrError\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Encountered unhandled exception while running job restoreMessagesFromEncryptedBackups: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Job restoreMessagesFromEncryptedBackups, thread: \",\", messages count: \",\"\"]);j=function(){return a};return a}function a(a){var c=a.hasMoreAfter,e=a.hasMoreBefore,f=a.instanceKey,g=a.isPointQuery,k=a.messages,l=a.minMsgId,m=a.optimisticMsgs,n=a.startSortKey,o=a.taskSource,p=a.threadId;a=a.traceId;var q={messageIds:[],pendingRestoreSortKeys:[]};q=d(\"WAResultOrError\").makeResult(q);try{d(\"WALogger\").LOG(j(),p,k.length);return d(\"MAWHandleEchoMsgsRestoreApiV2\").handleEchoMsgsBulkRestore(p,k,g,e,c,l,a,n,f,m,o)}catch(a){d(\"WALogger\").ERROR(i(),a)}finally{n==null&&d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"UpdateClientRestoreStatus\",value:{action:d(\"MAWUpdateClientRestoreStatusOperationType\").markCompleteClientRestoreStatus,ebPrefetch:!1,threadId:p}}]})}return(h||(h=b(\"Promise\"))).resolve(q)}g.restoreEchoMsgs=a}),98);\n__d(\"MAWRestoreMessagesFromEncryptedBackups\",[\"MAWGlobals\",\"MAWRestoreMessagesFromEchoDocuments\",\"Promise\",\"WAGlobals\",\"WAResultOrError\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"decodeAndRestoreMessages\",function(a){var c=a.hasMoreAfter,e=a.hasMoreBefore,f=a.instanceKey,g=a.isPointQuery,i=a.messages,j=a.minMsgId,k=a.optimisticMsgs,l=a.startSortKey,m=a.taskSource,n=a.threadId;a=a.traceId;var o={messageIds:[],pendingRestoreSortKeys:[]};o=d(\"WAResultOrError\").makeResult(o);return!d(\"WAGlobals\").getConfig().useEbRestoreQueue()?d(\"MAWRestoreMessagesFromEchoDocuments\").restoreEchoMsgs({hasMoreAfter:c,hasMoreBefore:e,instanceKey:f,isPointQuery:g,messages:i,minMsgId:j,optimisticMsgs:k,startSortKey:l,taskSource:m,threadId:n,traceId:a}):(h||(h=b(\"Promise\"))).resolve(o)}).end();g.restoreMessagesFromEncryptedBackups=a}),98);\n__d(\"MAWRestoreProtobufMsgsForThread\",[\"MAWDbMsgTxns\",\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWThreadSnippetBuildTxns\",\"MAWTransactionMode\",\"MAWWriteMsgSideEffectTxns\",\"MAWWriteMsgTxns\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Starting restore for protobuf msg with external id \",\" chatjid \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"unstoredDbMsg cannot both be missing for external id \",\" chat jid \",\"\"]);i=function(){return a};return a}b=d(\"MAWIndexedDb\").makeMsgrTransactor({groupInfo:(a=d(\"MAWTransactionMode\")).READWRITE,messages:a.READWRITE,participants:a.READWRITE,threads:a.READWRITE},\"handleProtobufMessageRestore\",function(a){return function(b,c,e,f,g,k,l,m){f=f.unstoredDbMsg;var n=e.jid;if(f==null){d(\"WALogger\").ERROR(i(),c,n);return d(\"MAWDexieTable\").dexieResolve()}d(\"WALogger\").LOG(h(),c,n);return j(a,c,b,f,e,g,k,l,m)}});function j(a,b,c,e,f,g,h,i,j){var k=f.chatId;return d(\"MAWDbMsgTxns\").maybeGetMsgByExternalId(a,b,k,c).then(function(b){if(b==null){var c=babelHelpers[\"extends\"]({},babelHelpers[\"extends\"]({},e,{thread:f.chatId,threadJid:f.jid}));return d(\"MAWWriteMsgTxns\").writeMsg(a,c,f,{},!0,g,h,i,j).then(function(b){return d(\"MAWDbThreadTxns\").getThread(a,f.chatId).then(function(e){if(e.success){var f=e.value;return d(\"MAWDexieTable\").dexieAll([d(\"MAWWriteMsgSideEffectTxns\").updateParticipantTimestampsForMsg(a,c),d(\"MAWThreadSnippetBuildTxns\").refreshThreadSnippet(a,f)]).then(function(){return{dbMsg:b,updatedThread:f}})}})})}})}g.handleProtobufMessageRestore=b}),98);\n__d(\"MAWWriteReactionMsgApi\",[\"MAWIndexedDb\",\"MAWTransactionMode\",\"MAWWriteReactionTxns\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";b=d(\"MAWIndexedDb\").makeMsgrAndSignalTransactor({groupInfo:(a=d(\"MAWTransactionMode\")).READONLY,identity:a.READONLY,media:a.READONLY,messages:a.READONLY,participants:a.READONLY,reactions:a.READWRITE,receipts:a.READWRITE,threads:a.READWRITE},\"writeReactionMsg\",function(a){return function(b,c,e,f,g){g===void 0&&(g=d(\"WAJids\").AUTHOR_ME);var h=e.groupingKey,i=e.reaction,j=e.reactToAuthor;e=e.reactToExternalId;var k={author:g,externalId:b,groupingKey:h,reaction:i,reactToAuthor:j,reactToExternalId:e,ts:f};return a.threads.get({jid:c}).then(function(b){return b==null?\"missing_thread\":d(\"MAWWriteReactionTxns\").writeReaction(a,k,b)}).then(function(a){return a===\"missing_thread\"?{type:\"missing_thread\"}:{msgId:a.reactionId,protocolMsgId:{author:g,chat:c,externalId:a.externalId},type:\"not_sent\"}})}});g.writeReactionMsg=b}),98);\n__d(\"MAWHandleEchoProtobufsRestoreApi\",[\"EchoMessageMediaFieldUtils\",\"LSMEBTaskCreationSource\",\"MAWBridgeEventTransmitter\",\"MAWBridgeMsg\",\"MAWDexieTable\",\"MAWHandleEchoMediaMsgsRestoreV2\",\"MAWHandleEchoMsgsRestoreApiV2\",\"MAWIndexedDb\",\"MAWJids\",\"MAWJobDefinitions\",\"MAWLoadReplyMediaTxns\",\"MAWRestoreMsgsTxns\",\"MAWRestoreProtobufMsgsForThread\",\"MAWTransactionMode\",\"MAWUnstoredContentToUnstoredDbContentUtils\",\"MAWUpdateQuotedMsgTxns\",\"MAWWriteReactionMsgApi\",\"MessageBackupSupplementalKeyGenerator\",\"Promise\",\"WAAckLevel\",\"WAArmadilloBackupMessage.pb\",\"WABase64\",\"WAConsumerApplication.pb\",\"WAGlobals\",\"WAJids\",\"WALogger\",\"WAMediaTransport.pb\",\"WAMediaUtils\",\"WAMessageKey\",\"WAMsgApplication.pb\",\"WAMsgType\",\"WAParseConsumerMessageProtocol\",\"WAParseMessageApplication\",\"WAStanzaUtils\",\"WATimeUtils\",\"decodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Cannot download media - timestamp cannot be null\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"cannot support message type for protobuf restore - reverting to echo restore\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Protobuf restore initiated for \",\" messages. isPointRestore: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Parsed message application subprotocol type is not of type consumer message - unable to restore\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Message contains unparseable message application - unable to restore message\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Unable to retrieve decoded protobuf consumer application object from backup message\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Unable to decode required fields from protobuf - unable to restore msg\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Invalid attachment type, cannot restore attachment\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Unsupported media type, cannot get mimetype for attachment\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Invalid reaction text in the protobuf restore\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Failed to create db msg from protobuf\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] Missing required fields, unable to create db msg from protobuf for thread jid \",\" and otid \",\"\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth][web] text content cannot be null for msg type text - unable to restore msg\"]);u=function(){return a};return a}var v=new Set(),w=new Set(),x=new Map(),y=new Map(),z=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(e=d(\"MAWTransactionMode\")).READONLY,media:e.READONLY,messages:e.READWRITE,xma:e.READONLY},\"associateQuotedMessagesForRestoredDbMsgs\",function(a){return function(b,c){return d(\"MAWDexieTable\").dexieAll(b.map(function(b){return d(\"MAWUpdateQuotedMsgTxns\").associateQuotedMessage(a,c,b,!0).then(function(b){b!=null&&b.length>0&&b.forEach(function(b){return d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsgQuote(a,b).then(function(a){a!=null&&d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(b,void 0,a)})})})})})).then(function(){return d(\"MAWDexieTable\").dexieResolve()})}});function A(a,b,c){c={author:c,chat:b,externalId:a};return c}function B(a,b){var c=a.metadata;a=a.reactionData;if(c!=null&&a!=null){c=c.senderId;if(c!=null)return a.map(function(a){var c=a.ts,e=a.senderId;if(e==null)return;e=d(\"MAWJids\").toUserJid(e);e=e===d(\"WAGlobals\").getMyUserJid()?d(\"WAJids\").AUTHOR_ME:e;var f=e===d(\"WAJids\").AUTHOR_ME?d(\"WAAckLevel\").ACK.SENT:d(\"WAAckLevel\").ACK.RECEIVED;return E(e,b,a.reaction,f,c)})}}function C(a,b,c,e,f,g){if(a===d(\"WAMsgType\").MSG_TYPE.TEXT)if(f==null){d(\"WALogger\").ERROR(u());return}else{f={ack:c===d(\"WAJids\").AUTHOR_ME?d(\"WAAckLevel\").ACK.SENT:d(\"WAAckLevel\").ACK.RECEIVED,forwardingScore:0,id:e,msgContent:{content:f,mentionedJids:g!=null?g.map(d(\"WAJids\").validateUserJid).filter(Boolean):void 0},ts:b,type:d(\"WAMsgType\").MSG_TYPE.TEXT};return f}else if(a===d(\"WAMsgType\").MSG_TYPE.VIDEO){g={ack:c===d(\"WAJids\").AUTHOR_ME?d(\"WAAckLevel\").ACK.SENT:d(\"WAAckLevel\").ACK.RECEIVED,forwardingScore:0,id:e,mediaId:void 0,ts:b,type:d(\"WAMsgType\").MSG_TYPE.VIDEO};return g}else if(a===d(\"WAMsgType\").MSG_TYPE.GIF){f={ack:c===d(\"WAJids\").AUTHOR_ME?d(\"WAAckLevel\").ACK.SENT:d(\"WAAckLevel\").ACK.RECEIVED,forwardingScore:0,id:e,mediaId:void 0,ts:b,type:d(\"WAMsgType\").MSG_TYPE.GIF};return f}else if(a===d(\"WAMsgType\").MSG_TYPE.IMAGE){g={ack:c===d(\"WAJids\").AUTHOR_ME?d(\"WAAckLevel\").ACK.SENT:d(\"WAAckLevel\").ACK.RECEIVED,forwardingScore:0,id:e,mediaId:void 0,ts:b,type:d(\"WAMsgType\").MSG_TYPE.IMAGE};return g}else if(a===d(\"WAMsgType\").MSG_TYPE.STICKER){f={ack:c===d(\"WAJids\").AUTHOR_ME?d(\"WAAckLevel\").ACK.SENT:d(\"WAAckLevel\").ACK.RECEIVED,forwardingScore:0,id:e,mediaId:void 0,ts:b,type:d(\"WAMsgType\").MSG_TYPE.STICKER};return f}else if(a===d(\"WAMsgType\").MSG_TYPE.PTT){g={ack:c===d(\"WAJids\").AUTHOR_ME?d(\"WAAckLevel\").ACK.SENT:d(\"WAAckLevel\").ACK.RECEIVED,forwardingScore:0,id:e,mediaId:void 0,ts:b,type:d(\"WAMsgType\").MSG_TYPE.PTT};return g}}function D(a,b){var c=a.metadata,e=a.msgType;if(c!=null&&e!=null){var f,g=c.timestampMs,h=c.messageId;c=c.senderId;f=(f=a.decodedPayload)==null?void 0:f.text;if(g!=null&&typeof g===\"number\"&&h!=null&&c!=null){g=d(\"WATimeUtils\").castMilliSecondsToUnixTime(g);c=d(\"MAWJids\").toUserJid(c);var i=d(\"WAStanzaUtils\").toStanzaId(h),j=c===d(\"WAGlobals\").getMyUserJid()?d(\"WAJids\").AUTHOR_ME:c,k=A(i,b,c);g=C(e,g,j,k,f,(e=a.decodedPayload)==null?void 0:e.mentionedJid);if(g==null){d(\"WALogger\").ERROR(t(),b,i);return}j={unstoredMedia:void 0,unstoredMsg:g,unstoredQuotedMedia:void 0,unstoredXMA:void 0};k=d(\"MAWUnstoredContentToUnstoredDbContentUtils\").unstoredContentToUnstoredDbContent(j);f=x.get(h);if(k.unstoredDbMsg!=null){a=k.unstoredDbMsg;a.author!=null&&d(\"WAGlobals\").getMyUserJid()===a.author&&a.author!==d(\"WAJids\").AUTHOR_SYSTEM&&(a.author=d(\"WAJids\").AUTHOR_ME);f!=null&&(a.quoteExternalId=d(\"WAStanzaUtils\").toStanzaId(f));e={authorJid:c,stanzaId:i,unstoredDbContent:k};return e}}}d(\"WALogger\").ERROR(s())}function E(a,b,c,e,f){a=d(\"WAParseConsumerMessageProtocol\").interpretAsNonSystemAuthor(a);var g=d(\"WAMessageKey\").extractProtocolMessageId(b,a,c.key),h=c.groupingKey;c=c.text;c=d(\"WAParseConsumerMessageProtocol\").validReactionMessageText(c);if(!c.success){d(\"WALogger\").WARN(r());return}return{ack:e,groupingKey:h,id:{author:a,chat:b,externalId:g.externalId},reaction:c.value,reactToAuthor:g.author,reactToExternalId:g.externalId,ts:f,type:d(\"WAMsgType\").MSG_TYPE.REACTION}}function F(a){switch(a){case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.IMAGE:return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.IMAGE_JPEG;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.GIF:return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.GIF;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.STICKER:return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.STICKER;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.VIDEO:return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.AUDIO_MP4;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.AUDIO:return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.AUDIO_WAV;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.XMA_IMAGE:return d(\"EchoMessageMediaFieldUtils\").EchoMessageMediaPreviewType.IMAGE_JPEG;default:return null}}function G(a){switch(a){case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.IMAGE:return d(\"EchoMessageMediaFieldUtils\").AttachmentType.IMAGE;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.GIF:return d(\"EchoMessageMediaFieldUtils\").AttachmentType.GIF;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.STICKER:return d(\"EchoMessageMediaFieldUtils\").AttachmentType.STICKER;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.VIDEO:return d(\"EchoMessageMediaFieldUtils\").AttachmentType.VIDEO;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.AUDIO:return d(\"EchoMessageMediaFieldUtils\").AttachmentType.PTT;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.XMA_IMAGE:return d(\"EchoMessageMediaFieldUtils\").AttachmentType.XMA;default:return null}}function H(a){var b;switch(a){case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.IMAGE:b=\"image\/jpeg\";break;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.AUDIO:b=\"audio\/wav\";break;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.VIDEO:b=\"video\/mp4\";break;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.GIF:b=\"image\/gif\";break;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.STICKER:b=\"image\/webp\";break;case d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.XMA_IMAGE:b=\"image\/jpeg\";break;default:d(\"WALogger\").ERROR(q())}return b}function I(a,b){var c,e,f,g,h,i;b=b;var j=a.ancillary;a=a.integral;c=a==null?void 0:(c=a.transport)==null?void 0:(c=c.integral)==null?void 0:c.fileSha256;e=a==null?void 0:(e=a.transport)==null?void 0:(e=e.integral)==null?void 0:e.fileEncSha256;f=a==null?void 0:(f=a.transport)==null?void 0:(f=f.integral)==null?void 0:f.mediaKey;g=(a==null?void 0:(g=a.transport)==null?void 0:(g=g.integral)==null?void 0:g.mediaKeyTimestamp)!=null?typeof (a==null?void 0:(g=a.transport)==null?void 0:g.integral.mediaKeyTimestamp)===\"number\"?a==null?void 0:(g=a.transport)==null?void 0:g.integral.mediaKeyTimestamp:void 0:void 0;var k=j==null?void 0:j.gifPlayback;k!=null&&k&&(b=d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.GIF);k=a==null?void 0:(k=a.transport)==null?void 0:(k=k.ancillary)==null?void 0:(k=k.thumbnail)==null?void 0:k.thumbnailHeight;h=a==null?void 0:(h=a.transport)==null?void 0:(h=h.ancillary)==null?void 0:(h=h.thumbnail)==null?void 0:h.thumbnailWidth;var l=F(b),m=G(b);if(m===null){d(\"WALogger\").ERROR(p());return}a={attachmentObjectId:a==null?void 0:(i=a.transport)==null?void 0:(i=i.ancillary)==null?void 0:i.objectId,attachmentType:m,directPath:a==null?void 0:(i=a.transport)==null?void 0:(m=i.integral)==null?void 0:m.directPath,encryptedHash:e!=null?d(\"WAMediaUtils\").toPlaintextHash(e):void 0,height:j==null?void 0:j.height,mediaKey:f!=null?d(\"WABase64\").encodeB64UrlSafe(f):void 0,mediaKeyTimestamp:g,mediaPlayableDuration:j==null?void 0:j.seconds,plaintextHash:c!=null?d(\"WAMediaUtils\").toPlaintextHash(c):void 0,width:j==null?void 0:j.width,xAttachmentType:b,xContentType:\"full\"};i=H(b);i!=null&&(a.mediaContentType=i);l!=null&&(a.previewContentType=l,a.previewContentHeight=k,a.previewContentWidth=h);return d(\"EchoMessageMediaFieldUtils\").convertMediaMetadataDetailsToMediaMetadata(a)}function J(a){var b=L(a);b=b==null?void 0:(b=b.payload)==null?void 0:b.content;var c={metadata:a.metadata,reactionData:[],unknownFieldCount:a.$$unknownFieldCount},e;a=(a=a.metadata)==null?void 0:a.messageId;if(b!=null){if(b.messageText!=null){c.msgType=d(\"WAMsgType\").MSG_TYPE.TEXT;c.decodedPayload=b.messageText;return c}else if(b.audioMessage!=null){var f;f=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAMediaTransport.pb\").AudioTransportSpec,(f=b.audioMessage)==null?void 0:(f=f.audio)==null?void 0:f.payload);e=I(f,d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.AUDIO);c.msgType=d(\"WAMsgType\").MSG_TYPE.PTT}else if(b.videoMessage!=null){f=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAMediaTransport.pb\").VideoTransportSpec,(f=b.videoMessage)==null?void 0:(f=f.video)==null?void 0:f.payload);e=I(f,d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.VIDEO);e!=null&&e.xAttachmentType===d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.GIF?c.msgType=d(\"WAMsgType\").MSG_TYPE.GIF:c.msgType=d(\"WAMsgType\").MSG_TYPE.VIDEO}else if(b.imageMessage!=null){f=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAMediaTransport.pb\").ImageTransportSpec,(f=b.imageMessage)==null?void 0:(f=f.image)==null?void 0:f.payload);e=I(f,d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.IMAGE);c.msgType=d(\"WAMsgType\").MSG_TYPE.IMAGE}else if(b.stickerMessage!=null){f=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAMediaTransport.pb\").StickerTransportSpec,(f=b.stickerMessage)==null?void 0:(b=f.sticker)==null?void 0:b.payload);e=I(f,d(\"EchoMessageMediaFieldUtils\").EchoMessageActMediaAttachmentType.STICKER);c.msgType=d(\"WAMsgType\").MSG_TYPE.STICKER}if(e!=null&&a!=null){y.set(d(\"WAStanzaUtils\").toStanzaId(a),e);return c}d(\"WALogger\").ERROR(o())}d(\"WALogger\").ERROR(n());return void 0}function K(a){if(a.payload!=null){a=L(a);return a==null?void 0:(a=a.payload)==null?void 0:(a=a.content)==null?void 0:a.reactionMessage}}function L(a){var b;b=(b=a.metadata)==null?void 0:b.messageId;a=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAMsgApplication.pb\").MessageApplicationSpec,a.payload);var c=d(\"WAParseMessageApplication\").parseMessageApplication(a);if(c.type===\"error\"){d(\"WALogger\").ERROR(m());return}if(c.subprotocolType!==\"consumerMessage\"){d(\"WALogger\").ERROR(l());return}a=a.metadata;a=a==null?void 0:a.quotedMessage;a=a==null?void 0:a.stanzaId;b!=null&&a!=null&&(w.has(a)||v.add(a),x.set(b,a));return d(\"decodeProtobuf\").decodeProtobufWithUnknowns(d(\"WAConsumerApplication.pb\").ConsumerApplicationSpec,c.payload)}function M(a){return a.map(function(a){var b=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAArmadilloBackupMessage.pb\").BackupMessageSpec,a.toplevelProtobuf.decryptedProtobuf);b=J(b);var c=a.supplementalProtobufs;if(b!=null)for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];if(!d(\"MessageBackupSupplementalKeyGenerator\").isSupplementalProtobufAReaction(h))continue;var i=d(\"decodeProtobuf\").decodeProtobuf(d(\"WAArmadilloBackupMessage.pb\").BackupMessageSpec,g.decryptedProtobuf);i=K(i);h=d(\"MessageBackupSupplementalKeyGenerator\").getSupplementalSenderId(h);i!=null&&h!=null&&b.reactionData.push({reaction:i,senderId:h,ts:d(\"WATimeUtils\").castMilliSecondsToUnixTime(g.protobufTimestampMS)})}w.add(a.otid);return b})}function N(a,b,e,f,g){return z(a,e).then(function(){b!=null&&(v.forEach(function(a){d(\"MAWBridgeEventTransmitter\").issuePointQueryOutsideTxn(a,b,void 0,c(\"LSMEBTaskCreationSource\").EB_POINT_QUERY_IN_ACT,g)}),v.clear(),x.clear(),w.clear(),y.clear());if(f)return d(\"MAWHandleEchoMsgsRestoreApiV2\").deleteMessages(a)})}function a(a,c,e,f,g,l,m,n,o,p,q){d(\"WALogger\").LOG(k(),e.length,f);if(e.length>0){var r=q.map(function(a){return d(\"MAWJobDefinitions\").toEncodedEchoMessage(a)}),s=c;return d(\"MAWHandleEchoMsgsRestoreApiV2\").getThread(c).then(function(a){return a?P(a).then(function(k){if(k)return d(\"MAWHandleEchoMsgsRestoreApiV2\").handleEchoMsgsBulkRestore(c,r,!1,g,l,m,void 0,void 0,p,void 0,void 0).then(function(){return(h||(h=b(\"Promise\"))).resolve()});var n=a.jid;k=M(e);var o=!1;for(var q=k,t=Array.isArray(q),u=0,q=t?q:q[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var v;if(t){if(u>=q.length)break;v=q[u++]}else{u=q.next();if(u.done)break;v=u.value}v=v;if(v==null){o=!0;break}}if(o){d(\"WALogger\").LOG(j());w.clear();return d(\"MAWHandleEchoMsgsRestoreApiV2\").handleEchoMsgsBulkRestore(c,r,!1,g,l,m,void 0,void 0,p,void 0,void 0).then(function(){return(h||(h=b(\"Promise\"))).resolve()})}var x=a,z=[],A=k.length;return k.reduce(function(b,c){return b.then(function(){if(c!=null){var b=D(c,n);if(b!=null)return d(\"MAWRestoreProtobufMsgsForThread\").handleProtobufMessageRestore(b.authorJid,b.stanzaId,x,b.unstoredDbContent,g,l,f,A--).then(function(b){var e=b==null?void 0:b.updatedThread;b=b==null?void 0:b.dbMsg;e!==void 0&&(x=e);if(b!=null){z.push(b);if(y.has(b.externalId)){e=b.sortOrderMs;var g=d(\"WAParseConsumerMessageProtocol\").interpretAsNonSystemAuthor(b.author),h=y.get(b.externalId);if(e==null)d(\"WALogger\").ERROR(i());else if(h!=null&&b.mediaId==null){g={author:g,chatId:b.thread,echoMsg:void 0,externalId:b.externalId,isXMA:!1,mediaData:h,messageTimestamp:e,msgId:b.msgId,previewMediaData:void 0,threadJId:b.threadJid};void d(\"MAWHandleEchoMediaMsgsRestoreV2\").downloadMediaAndWriteToMediaStore([g],a.chatId,n,f)}}}return O(c,n)})}})},(h||(h=b(\"Promise\"))).resolve()).then(function(){return Q(z).then(function(b){return N(b.filter(Boolean),s,a.chatId,f,n)})})}):(h||(h=b(\"Promise\"))).resolve()})}return(h||(h=b(\"Promise\"))).resolve()}function O(a,c){var e=B(a,c);a=a.metadata;if(e!=null&&a!=null){var f=a.messageId;e.filter(Boolean).map(function(a){var b=a.ts;if(b!=null&&f!=null){var e=d(\"WAStanzaUtils\").toStanzaId(f);return d(\"MAWWriteReactionMsgApi\").writeReactionMsg(e,c,{groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,reactToExternalId:a.reactToExternalId},b)}});return(h||(h=b(\"Promise\"))).resolve()}}var P=d(\"MAWIndexedDb\").makeMsgrTransactor({dyiBatch:e.READWRITE},\"checkDyiInProgressTransactor\",function(a){return function(b){return d(\"MAWRestoreMsgsTxns\").checkIfBatchInProgress(a,b)}}),Q=d(\"MAWIndexedDb\").makeMsgrTransactor({messages:e.READWRITE},\"getUpdatedMsgAfterMediaDownload\",function(a){return function(b){b=b.map(function(a){return a.rowId});return a.messages.bulkGet(b)}});g.associateQuotedMessagesForRestoredDbMsgsTransactor=z;g.handleProtobufsRestore=a}),98);\n__d(\"MAWRestoreProtobufsFromEncryptedBackups\",[\"MAWBridge\",\"MAWGlobals\",\"MAWHandleEchoProtobufsRestoreApi\",\"MAWUpdateClientRestoreStatusOperationType\",\"Promise\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Encountered unhandled exception while running job restoreProtobufsFromEncryptedBackups: \",\"\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"decodeAndRestoreMessages\",function(a){var c=a.echoMessages,e=a.hasMoreAfter,f=a.hasMoreBefore,g=a.instanceKey,j=a.isPointQuery,k=a.messages,l=a.minMsgId,m=a.referenceTimestamp,n=a.requestId,o=a.threadId;a=a.transportKey;try{return d(\"MAWHandleEchoProtobufsRestoreApi\").handleProtobufsRestore(a,o,k,j,f,e,l,n,m,g,c)}catch(a){d(\"WALogger\").ERROR(i(),a)}finally{m==null&&d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"UpdateClientRestoreStatus\",value:{action:d(\"MAWUpdateClientRestoreStatusOperationType\").markCompleteClientRestoreStatus,ebPrefetch:!1,threadId:o}}]});return(h||(h=b(\"Promise\"))).resolve()}}).end();g.restoreProtobufsFromEncryptedBackups=a}),98);\n__d(\"MAWRevokeMsgsApi\",[\"MAWAckLevel\",\"MAWBuildIncomingMsgs\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWTransactionMode\",\"MAWWriteRevokeMessageTxns\",\"WAJids\",\"WATimeUtils\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";b=d(\"MAWIndexedDb\").makeMsgrAndSignalTransactor({deletedMessages:(a=d(\"MAWTransactionMode\")).READWRITE,groupInfo:a.READWRITE,identity:a.READONLY,messages:a.READWRITE,participants:a.READWRITE,reactions:a.READWRITE,receipts:a.READWRITE,threads:a.READWRITE,xma:a.READONLY},\"revokeMsgs\",function(a){return function(b,e){return d(\"MAWDexieTable\").dexieAll(b.filter(function(a){return a.author===d(\"WAJids\").AUTHOR_ME}).map(function(b){return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,b).then(function(c){return c==null?d(\"MAWDbMsgTxns\").maybeGetRevokedMsgByProtocolMsgId(a,b):c}),d(\"MAWDexieTable\").dexieResolve(b)])})).then(function(b){return d(\"MAWDexieTable\").dexieAll(b.map(function(b){var f=b[0];b=b[1];if(f==null)return;if(f.type===\"Revoked\"){b={author:d(\"WAJids\").AUTHOR_ME,chat:b.chat,externalId:f.externalId};return b}var g=d(\"MAWGlobals\").getDependencies().generateExternalId();return a.threads.get(f.thread).then(function(b){var h;if(b==null)return;h={ack:d(\"MAWAckLevel\").ACK.clock,altIndex:void 0,author:d(\"WAJids\").AUTHOR_ME,externalId:g,mediaId:f.mediaId,msgContent:d(\"MAWDbMsg\").getMsgContent(f),msgId:f.msgId,originalTs:c(\"justknobx\")._(\"1753\")?f.ts:(h=f.serverTs)!=null?h:f.ts,quote:f.quote,reportingMeta:f.reportingMeta,revokedExternalId:f.externalId,rowId:f.rowId,sortOrderMs:f.sortOrderMs,thread:f.thread,threadJid:b.jid,ts:e,type:\"Revoked\",unsendMsgContentDeleteTs:d(\"WATimeUtils\").castToUnixTime(e+d(\"MAWBuildIncomingMsgs\").REVOKE_CONTENT_EXPIRATION_IN_SEC),xmaMessageType:f.xmaMessageType};return d(\"MAWDexieTable\").dexieAll([d(\"MAWWriteRevokeMessageTxns\").markExistingMsgRevoked(a,f,h,b)]).then(function(){var a={author:d(\"WAJids\").AUTHOR_ME,chat:b.jid,externalId:g};return a})})}).filter(Boolean))})}});g.revokeMsgs=b}),98);\n__d(\"MAWRevokeMsg\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWRevokeMsgsApi\",\"Promise\",\"WAJids\",\"WAJobOrchestratorTypes\",\"WALogger\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"revokeMsg: \",\"\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"revokeMsg\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,c,e){var f=a.msgIds;d(\"WALogger\").DEV(i(),JSON.stringify(f));c=(yield d(\"MAWRevokeMsgsApi\").revokeMsgs(f,e.jobStartTime));var g=[];a=c.map(function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){b=f[b];a!=null&&!d(\"WAJids\").isAuthorSystem(a.author)&&(g.push({deleting:a,original:b}),yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:a,referencedOriginalExternalId:b.externalId,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"revoke\"})))});return function(b,c){return a.apply(this,arguments)}}());yield (h||(h=b(\"Promise\"))).all(a);return g});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.revokeMsgs=a}),98);\n__d(\"MAWWriteOutgoingAppDataApi\",[\"MAWAckLevel\",\"MAWDbIdentityTxns\",\"MAWDexieTable\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWODSProxy\",\"MAWThreadTypes\",\"MAWTransactionMode\",\"MAWUpdateDevicesForUserApi\",\"MAWWriteMetaSyncsTxns\",\"WAJids\",\"WAOdsEnums\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWIndexedDb\").makeMsgrAndSignalTransactor(babelHelpers[\"extends\"]({appData:d(\"MAWTransactionMode\").READWRITE,identity:d(\"MAWTransactionMode\").READONLY},d(\"MAWThreadTypes\").ThreadRelatedTablesPermissions),\"writeOutgoingAppData\",function(a){return function(b,c,e){return a.appData.get({externalId:b}).then(function(f){if(f!=null)if(f.ack>=d(\"MAWAckLevel\").ACK.sent)return d(\"MAWDexieTable\").dexieResolve({appDataExternalId:b,devices:Array.from(f.recipientDevices),type:\"already_sent\"});else return d(\"MAWDexieTable\").dexieResolve({appDataExternalId:b,devices:Array.from(f.recipientDevices),type:\"not_sent\"});var g=e.contents,h=e.deviceIds;g.type===\"meta_sync\"?f=d(\"MAWDexieTable\").dexieAll(g.actions.map(function(b){b.messageAction&&b.messageAction.type===\"delete_for_me\"&&d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.C2C_META_SYNC,key:\"delete_for_me\"});return d(\"MAWWriteMetaSyncsTxns\").handleMetaSyncAction(a,b)})):(g.type,f=d(\"MAWDexieTable\").dexieAll([]));return d(\"MAWDexieTable\").dexieAll([d(\"MAWUpdateDevicesForUserApi\").getAllDeviceJidsForUser(a,d(\"MAWGlobals\").getMyUserJid()),f]).then(function(a){a=a[0];if(h==null)return a;else{var b=new Set(h);return a.filter(function(a){return b.has(d(\"WAJids\").extractDeviceId(a))})}}).then(function(b){return d(\"MAWDbIdentityTxns\").getIdentitiesForDevices(a,b)}).then(function(e){var f=d(\"MAWGlobals\").getMyDeviceJid();e[\"delete\"](f);return e.size===0?{type:\"no_devices\"}:a.appData.add({ack:d(\"MAWAckLevel\").ACK.clock,contents:g,externalId:b,permittedIdentitiesPerDevice:e,recipientDevices:new Set(e.keys()),sendPartial:h!=null,ts:c}).then(function(){return{appDataExternalId:b,devices:Array.from(e.keys()),type:\"not_sent\"}})})})}});g.writeOutgoingAppData=a}),98);\n__d(\"MAWSendAppData\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWWriteOutgoingAppDataApi\",\"WALogger\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"no other devices\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendAppData already sent message\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"saveAndPassOff\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){b=a.args;a=a.externalId;a=(yield d(\"MAWWriteOutgoingAppDataApi\").writeOutgoingAppData(a,c.jobStartTime,b));if(a.type===\"already_sent\"){d(\"WALogger\").LOG(i());return a}else if(a.type===\"no_devices\"){d(\"WALogger\").LOG(h());return a}else{a.type;yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").jobSerializers.sendWrittenAppData(a.appDataExternalId));return a}});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.sendAppData=a}),98);\n__d(\"MAWWriteEditMsgApi\",[\"MAWIndexedDb\",\"MAWTransactionMode\",\"MAWWriteEditTxns\"],(function(a,b,c,d,e,f,g){\"use strict\";b=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(a=d(\"MAWTransactionMode\")).READONLY,editMsgHistory:a.READWRITE,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE,xma:a.READONLY},\"writeEditMsg\",function(a){return function(b,c,e){c={args:c,externalId:b,ts:e};return d(\"MAWWriteEditTxns\").writeEdit(a,c).then(function(a){return a})}});g.writeEditMsg=b}),98);\n__d(\"MAWSendEditMsg\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWWriteEditMsgApi\",\"WAJobOrchestratorTypes\",\"WALogger\",\"asyncToGeneratorRuntime\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendEditMsg already sent a message\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendEditMsg cannot edit to a non-existent message\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendEditMsg cannot send to a non-existent thread\"]);j=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"sendEditMsg\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,e){if(!d(\"MAWGlobals\").getConfig().isEditMessageSendEnabled())throw c(\"err\")(\"Edit message send feature is disabled.\");b=(yield d(\"MAWWriteEditMsgApi\").writeEditMsg(a.externalId,a.args,e.jobStartTime));if(!b.success){b.error===\"missing_thread\"?d(\"WALogger\").ERROR(j()):b.error===\"missing_msg\"?d(\"WALogger\").ERROR(i()):b.error===\"already_sent\"&&d(\"WALogger\").ERROR(h());return}yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:b.value.protocolMsgId,referencedOriginalExternalId:b.value.originalMsgExternalId,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"edit\"}))});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.sendEditMsg=a}),98);\n__d(\"MAWGetSyncResponseBackoffInfoByJidApi\",[\"MAWIndexedDb\",\"MAWTransactionMode\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWIndexedDb\").makeMsgrTransactor({ephemeralSettings:d(\"MAWTransactionMode\").READONLY},\"getSyncResponseBackoffInfoByJid\",function(a){return function(b){return a.ephemeralSettings.get({userJid:b}).then(function(a){return a==null?null:a.ephemeralSyncResponseBackoffInfo})}});g.getSyncResponseBackoffInfoByJid=a}),98);\n__d(\"MAWSendEphemeralSettingMsg\",[\"MAWGetSyncResponseBackoffInfoByJidApi\",\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWLoggerUtils\",\"MAWMsgType\",\"MAWWriteOutgoingMsgApi\",\"WAJids\",\"WAJobOrchestratorTypes\",\"WASendMsgUtilV2\",\"WATagsLogger\",\"WATimeUtils\",\"asyncToGeneratorRuntime\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendMsg cannot send to a non-existent thread\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendMsg already sent message\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"send ephemeral setting message: chatJid \",\", type \",\", externalId \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"ephemeral sync response backed off\"]);k=function(){return a};return a}var l=d(\"WATagsLogger\").TAGS([d(\"MAWLoggerUtils\").Tag.Ephemeral,d(\"MAWLoggerUtils\").Tag.SettingSync]);a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"sendEphemeralSettingMsg\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,e){b=a.args;var f=a.chatJid;a=a.externalId;if(b.isForSyncResponse){var g=(yield d(\"WAJids\").switchOnMsgrChatJidType(f,{group:function(){throw c(\"err\")(\"ChatJid is not supposed to be a group\")},user:function(a){return d(\"MAWGetSyncResponseBackoffInfoByJidApi\").getSyncResponseBackoffInfoByJid(a)}}));if(m(e.jobStartTime,g)){l.LOG(k());return}}g=b.isForSyncResponse?d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE;yield d(\"WASendMsgUtilV2\").getDevicesBeforeSend(f,\"SendEphemeralSettings\");e=(yield d(\"MAWWriteOutgoingMsgApi\").writeOutgoingMsg(a,f,e.jobStartTime,b,g));l.LOG(j(),f,g,a);if(e.type===\"already_sent\"){l.LOG(i());return}else if(e.type===\"missing_thread\"){l.LOG(h());return}yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:e.protocolMsgId,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"message\"}))});return function(b,c,d){return a.apply(this,arguments)}}()).end();function m(a,b){if(b==null)return!1;var c=b.syncResponseRetries;b=b.syncResponseSentTs;switch(c){case 1:return d(\"WATimeUtils\").happenedWithinAt(a,b,3*60);case 2:return d(\"WATimeUtils\").happenedWithinAt(a,b,15*60);default:return!0}}g.sendEphemeralSettingMsg=a}),98);\n__d(\"MAWSendGroupInviteMsg\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWMsgType\",\"WAJobOrchestratorTypes\",\"WALogger\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendGroupInviteMsg cannot send to a non-existent thread\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendGroupInviteMsg already sent message\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendGroupInviteMsg for group \",\" to invited user \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendGroupInviteMsg failed to store a new group invite\"]);k=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"saveAndPassOff\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){b=a.args;var e=a.externalId,f=(yield d(\"MAWGlobals\").getDbImpls().writeGroupInvite(b.groupJid,{expiration:b.expiration,inviteCode:b.inviteCode,invitedParticipantUserJid:b.invitedParticipantUserJid,inviterUserJid:b.inviterUserJid}));if(!f.success){d(\"WALogger\").LOG(k());return}c=(yield d(\"MAWGlobals\").getDbImpls().writeOutgoingMsg(e,b.groupJid,c.jobStartTime,babelHelpers[\"extends\"]({},b,{groupName:(e=f.value)!=null?e:void 0}),d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE));d(\"WALogger\").DEV(j(),a.args.groupJid,a.args.invitedParticipantUserJid);if(c.type===\"already_sent\"){d(\"WALogger\").LOG(i());return}else if(c.type===\"missing_thread\"){d(\"WALogger\").LOG(h());return}yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:c.protocolMsgId,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"message\"}))});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.sendGroupInviteMsg=a}),98);\n__d(\"MAWStartMediaUploaQplFlow\",[\"MAWGetStorageQplAnnotations\",\"WAJids\",\"WAMediaQplHelper\",\"WAPREList\",\"WAPREMetrics\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=a.chatJid,e=a.fileSize,f=a.serverMediaType;a=a.uploadEntry;var g=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.MEDIA_UPLOAD,{string:{chat_type:d(\"WAJids\").switchOnMsgrChatJidType(b,{group:function(){return\"group\"},user:function(){return\"user\"}}),jid:b,media_size:d(\"WAMediaQplHelper\").convertIntegerSizeToStringBucket(e),media_type:f,upload_entry:a}},void 0);c(\"promiseDone\")(d(\"MAWGetStorageQplAnnotations\").getStorageQplAnnotations().then(function(a){g.addAnnotations(a)}));return g}g.startMediaUploaQplFlow=a}),98);\n__d(\"WAHttpResumeCheck\",[\"WALogger\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpResumeCheck: fail to parse request body \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpResumeCheck: resume is NaN: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpResumeCheck: object_id is missing\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpResumeCheck: direct_path is missing\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpResumeCheck: response status \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpResumeCheck: fail to initiate fetch \",\"\"]);m=function(){return a};return a}function a(a){var c,e,f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:g.prev=0;g.next=3;return b(\"regeneratorRuntime\").awrap(fetch(a,{method:\"POST\",mode:\"cors\",cache:\"no-cache\",headers:{\"Content-Type\":\"text\/plain\"}}));case 3:c=g.sent;g.next=10;break;case 6:g.prev=6;g.t0=g[\"catch\"](0);d(\"WALogger\").ERROR(m(),g.t0);throw g.t0;case 10:e=c,f=e.status;d(\"WALogger\").LOG(l(),f);g.t1=f;g.next=g.t1===200?15:g.t1===404?16:g.t1===408?17:g.t1===429?18:g.t1===507?18:19;break;case 15:return g.abrupt(\"return\",c.json().then(function(a){var b=a.resume,c=a.direct_path;a=a.object_id;if(b===\"complete\"){if(c==null){d(\"WALogger\").ERROR(k());return d(\"WAResultOrError\").makeResult({type:\"media-not-found\"})}if(a==null){d(\"WALogger\").ERROR(j());return d(\"WAResultOrError\").makeResult({type:\"media-not-found\"})}return d(\"WAResultOrError\").makeResult({type:\"media-found\",directPath:c,objectId:a})}c=parseInt(b,10);if(c===0)return d(\"WAResultOrError\").makeResult({type:\"media-not-found\"});if(Number.isNaN(c)){d(\"WALogger\").ERROR(i(),b);return d(\"WAResultOrError\").makeResult({type:\"media-not-found\"})}return d(\"WAResultOrError\").makeResult({type:\"media-partial-found\",resumeFromBytes:c})})[\"catch\"](function(a){d(\"WALogger\").ERROR(h(),a);return d(\"WAResultOrError\").makeError(\"body-network-error\")}));case 16:return g.abrupt(\"return\",d(\"WAResultOrError\").makeResult({type:\"media-not-found\"}));case 17:return g.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"server-timeout\"));case 18:return g.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"upload-throttled\"));case 19:if(!(f>=400&&f<500)){g.next=21;break}return g.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"request-error\"));case 21:return g.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"unspecified-http-error\"));case 22:case\"end\":return g.stop()}},null,this,[[0,6]])}g.httpResumeCheck=a}),98);\n__d(\"WACheckCiphertextInServer\",[\"WAHttpResumeCheck\",\"WAMediaUrl\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,c,e,f){return f.run(function(f,g){var h,i,j;return b(\"regeneratorRuntime\").async(function(k){while(1)switch(k.prev=k.next){case 0:h=d(\"WAMediaUrl\").buildUploadUrl(a,e,c,f.domain,g,!0);k.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAHttpResumeCheck\").httpResumeCheck(h));case 3:i=k.sent;if(!i.success){k.next=8;break}return k.abrupt(\"return\",d(\"WAResultOrError\").makeResult(i));case 8:j=i.error;k.t0=j;k.next=k.t0===\"server-timeout\"?12:k.t0===\"unspecified-http-error\"?12:13;break;case 12:return k.abrupt(\"return\",d(\"WAResultOrError\").makeError({progressMade:!0}));case 13:return k.abrupt(\"return\",d(\"WAResultOrError\").makeResult(d(\"WAResultOrError\").makeError(j)));case 14:case\"end\":return k.stop()}},null,this)}).then(function(a){return(a=a)!=null?a:d(\"WAResultOrError\").makeError(\"max-attempts-exceeded\")})}g.checkCiphertextInServer=a}),98);\n__d(\"WACreateRetrier\",[\"WAComms\",\"WAGetMediaRoute\",\"WAGlobals\",\"WAMediaOperationsRetrier\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,c){var e,f,g,h,i,j;return b(\"regeneratorRuntime\").async(function(k){while(1)switch(k.prev=k.next){case 0:c==null?void 0:c.addPoint(\"get_media_route_start\");k.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAGetMediaRoute\").getMediaRoute({operation:\"upload\",serverMediaType:a},c));case 3:e=k.sent;c==null?void 0:c.addPoint(\"get_media_route_finish\");if(e.success){k.next=7;break}return k.abrupt(\"return\",e);case 7:f=e.value,g=f.selectedHost,h=f.fallbackHost,i=f.authToken;j=new(d(\"WAMediaOperationsRetrier\").MediaOperationsRetrier)(\"upload\",{host:{domain:g.domain,\"class\":g[\"class\"]},fallbackHost:h&&{domain:h.domain,\"class\":h[\"class\"]},authToken:i,timeElapsed:null},d(\"WAGlobals\").getConfig().isMediaWaitForConnectionOnRetryEnabled()===!0?d(\"WAComms\").waitForConnection:void 0);return k.abrupt(\"return\",d(\"WAResultOrError\").makeResult(j));case 10:case\"end\":return k.stop()}},null,this)}g.createUploadRetrier=a}),98);\n__d(\"WAHttpRegularUploadMedia\",[\"WAErr\",\"WALogger\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpRegularUploadMedia: fail to parse request body \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Fetch Media HTTP status \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"HttpRegularUploadMedia: fail to initiate fetch \",\"\"]);j=function(){return a};return a}function a(a,e){var f,g,k;return b(\"regeneratorRuntime\").async(function(l){while(1)switch(l.prev=l.next){case 0:l.prev=0;l.next=3;return b(\"regeneratorRuntime\").awrap(fetch(a,{method:\"POST\",mode:\"cors\",cache:\"no-store\",headers:{\"Content-Type\":\"text\/plain\"},body:new Blob([e])}));case 3:f=l.sent;l.next=10;break;case 6:l.prev=6;l.t0=l[\"catch\"](0);d(\"WALogger\").ERROR(j(),l.t0);throw l.t0;case 10:g=f,k=g.status;d(\"WALogger\").LOG(i(),k);l.t1=k;l.next=l.t1===200?15:l.t1===408?16:l.t1===413?17:l.t1===415?18:l.t1===429?19:l.t1===507?19:20;break;case 15:return l.abrupt(\"return\",f.json().then(function(a){if(!Object.prototype.hasOwnProperty.call(a,\"direct_path\"))throw c(\"WAErr\")(\"direct_path not available in wa upload http response\");if(typeof a.direct_path!==\"string\")throw c(\"WAErr\")('directPath: \"'+a.direct_path+'\" is not a string');if(a.object_id&&typeof a.object_id!==\"string\")throw c(\"WAErr\")('objectId: \"'+a.object_id+'\" is not a string');if(a.handle&&typeof a.handle!==\"string\")throw c(\"WAErr\")('handle: \"'+a.handle+'\" is not a string');a={directPath:a.direct_path,objectId:a.object_id,handle:a.handle};return d(\"WAResultOrError\").makeResult(a)})[\"catch\"](function(a){d(\"WALogger\").ERROR(h(),a);return d(\"WAResultOrError\").makeError(\"body-network-error\")}));case 16:return l.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"server-timeout\"));case 17:return l.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"payload-too-large\"));case 18:return l.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"invalid-media\"));case 19:return l.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"upload-throttled\"));case 20:if(!(k>=400&&k<500)){l.next=22;break}return l.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"request-error\"));case 22:return l.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"unspecified-http-error\"));case 23:case\"end\":return l.stop()}},null,this,[[0,6]])}g.httpRegularUploadMedia=a}),98);\n__d(\"WAEncryptAndUploadPlaintext\",[\"WABase64\",\"WAGlobals\",\"WAHttpRegularUploadMedia\",\"WAHttpResumeCheck\",\"WALogger\",\"WAMediaCrypto\",\"WAMediaUrl\",\"WAMediaUtils\",\"WAProgressiveJpegGetPJpegDetails\",\"WAResultOrError\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext: upload success \",\" \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext given up\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext error: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext error: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext: start upload media to \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext: error during retrier \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext: Found valid progressiveJpeg details. Adding to media entry.\"]);n=function(){return a};return a}function a(a){var c,e,f,g,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q;return b(\"regeneratorRuntime\").async(function(R){while(1)switch(R.prev=R.next){case 0:c=a.mediaTypeDetails,e=a.plaintextHash,f=a.plaintext,g=a.mediaKey,o=a.mediaKeyTimestamp,p=a.uploadToken,a._size,q=a.uploadRetrier,r=a.updateMediaEntry,s=a.mediaUploadQplFlow,t=a.filename,u=a.fromOffset,v=u===void 0?0:u;if(!(c.type===\"preview\")){R.next=11;break}R.next=4;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaCrypto\").computeMediaKeysForPreview(g));case 4:A=R.sent;w=A.iv;x=A.cipherKey;y=A.hmacKey;z=\"preview\";R.next=18;break;case 11:R.next=13;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaCrypto\").computeMediaKeys(g,c.mediaType));case 13:B=R.sent,w=B.iv,x=B.cipherKey,y=B.hmacKey,z=c.mediaType;case 18:R.next=20;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaCrypto\").encryptAndHmac(x,w,y,f,z));case 20:C=R.sent;D=C.ciphertext;E=C.ciphertextHash;F=C.sidecar;G=C.ivCiphertext;H=null;if(!(z===\"image\")){R.next=41;break}R.t0=b(\"regeneratorRuntime\");R.t1=d(\"WAProgressiveJpegGetPJpegDetails\").getProgressiveJpegDetails;R.t2=Uint8Array;R.next=32;return b(\"regeneratorRuntime\").awrap(d(\"WAMediaUtils\").blobToArrayBuffer(f));case 32:R.t3=R.sent;R.t4=new R.t2(R.t3);R.t5=G;R.t6=y;R.t7=R.t1(R.t4,R.t5,R.t6);R.next=39;return R.t0.awrap.call(R.t0,R.t7);case 39:I=R.sent,d(\"WAProgressiveJpegGetPJpegDetails\").isValidProgressiveJpegDetails(I)&&d(\"WAGlobals\").getConfig().isProgressiveJpegSendReceiveEnabled()&&(d(\"WALogger\").LOG(n()),H=I);case 41:J={fileSha256:d(\"WABase64\").decodeB64UrlSafe(e),fileEncSha256:E,mediaKey:g,mediaKeyTimestamp:o,serverMediaType:z,uploadToken:p,sidecar:F,filename:t,progressiveJpegDetails:H};R.next=44;return b(\"regeneratorRuntime\").awrap(r(J));case 44:R.next=46;return b(\"regeneratorRuntime\").awrap(q.run(function(a,c,e){var f,g,h,i,n,o;return b(\"regeneratorRuntime\").async(function(q){while(1)switch(q.prev=q.next){case 0:f=a.domain;g=v;if(!(e>0)){q.next=19;break}q.prev=3;h=d(\"WAMediaUrl\").buildUploadUrl(z,p,E,f,c,!0);q.next=7;return b(\"regeneratorRuntime\").awrap(d(\"WAHttpResumeCheck\").httpResumeCheck(h));case 7:i=q.sent;if(!i.success){q.next=14;break}n=i.value;if(!(n.type===\"media-found\")){q.next=13;break}s==null?void 0:s.addAnnotations({bool:{existingMediaFound:!0}});return q.abrupt(\"return\",d(\"WAResultOrError\").makeResult(d(\"WAResultOrError\").makeResult({directPath:n.directPath,objectId:null,handle:null})));case 13:n.type===\"media-partial-found\"&&(g=n.resumeFromBytes);case 14:q.next=19;break;case 16:q.prev=16,q.t0=q[\"catch\"](3),d(\"WALogger\").ERROR(m(),q.t0);case 19:g>0&&g<D.byteLength?(s==null?void 0:s.addAnnotations({\"int\":{fromOffset:g},bool:{continuedFromOffset:!0}}),K=D.subarray(g)):K=D;o=d(\"WAMediaUrl\").buildUploadUrl(z,p,E,f,c,!1,g);d(\"WALogger\").LOG(l(),o);return q.abrupt(\"return\",d(\"WAHttpRegularUploadMedia\").httpRegularUploadMedia(o,K).then(function(a){if(a.success){s==null?void 0:s.addPoint(\"upload_finish\",{\"int\":{byteLength:K.byteLength,attempt:e}});return d(\"WAResultOrError\").makeResult(a)}else{a=a.error;d(\"WALogger\").LOG(k(),a);switch(a){case\"server-timeout\":case\"unspecified-http-error\":return d(\"WAResultOrError\").makeError({progressMade:!0});default:return d(\"WAResultOrError\").makeResult(d(\"WAResultOrError\").makeError(a))}}})[\"catch\"](function(a){d(\"WALogger\").ERROR(j(),a);return d(\"WAResultOrError\").makeError({progressMade:!1})}));case 23:case\"end\":return q.stop()}},null,this,[[3,16]])}));case 46:L=R.sent;if(!(L==null)){R.next=51;break}d(\"WALogger\").WARN(i());s==null?void 0:s.endFail(\"maxAttemptsExceeded\");return R.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"max-attempts-exceeded\"));case 51:if(!(L.success===!1)){R.next=54;break}s==null?void 0:s.endFail(L.error);return R.abrupt(\"return\",L);case 54:M=L.value,N=M.directPath,O=M.objectId,P=M.handle;R.next=57;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().getDownloadableThumbnailForMedia(e));case 57:Q=R.sent;J=babelHelpers[\"extends\"]({},J,{directPath:N,downloadableThumbnail:Q,handle:P,objectId:O});R.next=61;return b(\"regeneratorRuntime\").awrap(r(J));case 61:d(\"WALogger\").LOG(h(),{directPath:N},{objectId:O});s==null?void 0:s.endSuccess();return R.abrupt(\"return\",d(\"WAResultOrError\").makeResult(J));case 64:case\"end\":return R.stop()}},null,this)}g.encryptAndUploadPlaintext=a}),98);\n__d(\"WAIsMediaKeyReusable\",[\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=2*d(\"WATimeUtils\").DAY_SECONDS;function a(a){var b=Math.floor(Math.random()*d(\"WATimeUtils\").DAY_SECONDS);return a!=null&&d(\"WATimeUtils\").happenedWithin(a,h+b)}g.MMS_MEDIA_KEY_TTL=h;g.isMediaKeyReusable=a}),98);\n__d(\"WAFindReusableMediaEntry\",[\"WAGlobals\",\"WAIsMediaKeyReusable\",\"WAMediaUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){return d(\"WAGlobals\").getDbImpls().getMediaKnownEntries(a).then(function(a){if(b==null)return null;a=a.get(b);if(a==null)return null;a=d(\"WAMediaUtils\").decodeMediaEntryData(a);var c=a.fileEncSha256,e=a.mediaKey,f=a.mediaKeyTimestamp,g=a.uploadToken;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"fileEncSha256\",\"mediaKey\",\"mediaKeyTimestamp\",\"uploadToken\"]);return e!=null&&g!=null&&c!=null&&f!=null&&d(\"WAIsMediaKeyReusable\").isMediaKeyReusable(f)?babelHelpers[\"extends\"]({},a,{fileEncSha256:c,mediaKey:e,mediaKeyTimestamp:f,uploadToken:g}):null})}g.findReusableMediaEntryForArmadillo=a}),98);\n__d(\"WAUploadMedia\",[\"WABase64\",\"WACheckCiphertextInServer\",\"WACreateRetrier\",\"WAEncryptAndUploadPlaintext\",\"WAFindReusableMediaEntry\",\"WAGlobals\",\"WALogger\",\"WAMediaUtils\",\"WAResultOrError\",\"WATimeUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext: no plaintext\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"uploadMedia: media is not on the server, start uploading\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext: no plaintext\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"uploadMedia: media is partially on the server, start uploading from byteOffset \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"uploadMedia: media is on the server\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"uploadMedia: resume\/exist check exhausted available retries\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"uploadMedia: async upload\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"encryptAndUploadPlaintext: no plaintext\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"uploadMedia: no media entry found, need to upload media\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"uploadMedia: fail to gather media routes\"]);q=function(){return a};return a}a=function(a){var c,e,f,g,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;return b(\"regeneratorRuntime\").async(function(T){while(1)switch(T.prev=T.next){case 0:a.chatJid,c=a.filename,e=a.hash,f=a.mediaTypeDetails,g=a.protocolMsgId,s=a.size,t=a.uploadMediaFlow;f.type===\"regular\"?u=f.mediaType:u=\"preview\";T.next=4;return b(\"regeneratorRuntime\").awrap(d(\"WACreateRetrier\").createUploadRetrier(u,t));case 4:v=T.sent;if(v.success){T.next=9;break}d(\"WALogger\").WARN(q());t==null?void 0:t.endFail(\"failToGatherMediaRoutes\");return T.abrupt(\"return\",v);case 9:w=v.value;x=r(g,e);T.next=13;return b(\"regeneratorRuntime\").awrap(d(\"WAFindReusableMediaEntry\").findReusableMediaEntryForArmadillo(e,g));case 13:y=T.sent;if(!(y==null)){T.next=27;break}d(\"WALogger\").LOG(p());z=d(\"WAMediaUtils\").createMediaKey();A=d(\"WAMediaUtils\").createUploadToken();B=d(\"WATimeUtils\").unixTime();T.next=21;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().getMediaPlaintext(e));case 21:C=T.sent;if(!(C==null)){T.next=26;break}d(\"WALogger\").ERROR(o());t==null?void 0:t.endFail(\"missingPlaintext\");return T.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"no-plaintext\"));case 26:return T.abrupt(\"return\",d(\"WAEncryptAndUploadPlaintext\").encryptAndUploadPlaintext({_size:s,filename:c,mediaKey:z,mediaKeyTimestamp:B,mediaTypeDetails:f,mediaUploadQplFlow:t,plaintext:C,plaintextHash:e,updateMediaEntry:x,uploadRetrier:w,uploadToken:A}));case 27:D=y.directPath,E=y.downloadableThumbnail,F=y.fileEncSha256,G=y.fileSha256,H=y.mediaKey,I=y.mediaKeyTimestamp,J=y.objectId,K=y.uploadToken;L={directPath:D,downloadableThumbnail:E,fileEncSha256:F,filename:c,fileSha256:G||d(\"WABase64\").decodeB64UrlSafe(e),mediaKey:H,mediaKeyTimestamp:I,objectId:J,serverMediaType:u,uploadToken:K};if(!(D!=null)){T.next=35;break}d(\"WALogger\").LOG(n());T.next=33;return b(\"regeneratorRuntime\").awrap(x(L));case 33:t==null?void 0:t.endSuccess({bool:{reused_media_entry:!0}});return T.abrupt(\"return\",d(\"WAResultOrError\").makeResult(L));case 35:T.next=37;return b(\"regeneratorRuntime\").awrap(d(\"WACheckCiphertextInServer\").checkCiphertextInServer(u,F,K,w));case 37:M=T.sent;if(M.success){T.next=42;break}d(\"WALogger\").WARN(m());t==null?void 0:t.endFail(\"failToUpload\");return T.abrupt(\"return\",M);case 42:N=M.value;if(!(N.type===\"media-found\")){T.next=53;break}d(\"WALogger\").LOG(l());t==null?void 0:t.addAnnotations({bool:{existingMediaFound:!0}});O=babelHelpers[\"extends\"]({},L,{directPath:N.directPath,objectId:N.objectId});T.next=49;return b(\"regeneratorRuntime\").awrap(x(O));case 49:t==null?void 0:t.endSuccess({bool:{reused_media_entry:!0}});return T.abrupt(\"return\",d(\"WAResultOrError\").makeResult(O));case 53:if(!(N.type===\"media-partial-found\")){T.next=64;break}d(\"WALogger\").LOG(k(),N.resumeFromBytes);P=N.resumeFromBytes;T.next=58;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().getMediaPlaintext(e));case 58:Q=T.sent;if(!(Q==null)){T.next=63;break}d(\"WALogger\").ERROR(j());t==null?void 0:t.endFail(\"missingPlaintext\");return T.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"no-plaintext\"));case 63:return T.abrupt(\"return\",d(\"WAEncryptAndUploadPlaintext\").encryptAndUploadPlaintext({_size:s,filename:c,fromOffset:P,mediaKey:H,mediaKeyTimestamp:I,mediaTypeDetails:f,mediaUploadQplFlow:t,plaintext:Q,plaintextHash:e,updateMediaEntry:x,uploadRetrier:w,uploadToken:K}));case 64:d(\"WALogger\").LOG(i());R=d(\"WATimeUtils\").unixTime();T.next=68;return b(\"regeneratorRuntime\").awrap(d(\"WAGlobals\").getDbImpls().getMediaPlaintext(e));case 68:S=T.sent;if(!(S==null)){T.next=73;break}d(\"WALogger\").ERROR(h());t==null?void 0:t.endFail(\"missingPlaintext\");return T.abrupt(\"return\",d(\"WAResultOrError\").makeError(\"no-plaintext\"));case 73:return T.abrupt(\"return\",d(\"WAEncryptAndUploadPlaintext\").encryptAndUploadPlaintext({_size:s,filename:c,mediaKey:H,mediaKeyTimestamp:R,mediaTypeDetails:f,mediaUploadQplFlow:t,plaintext:S,plaintextHash:e,updateMediaEntry:x,uploadRetrier:w,uploadToken:K}));case 74:case\"end\":return T.stop()}},null,this)};function r(a,b){return function(c){var e=d(\"WAMediaUtils\").encodeMediaEntryForUpload(c);if(a==null)return d(\"WAGlobals\").getDbImpls().updateMediaEntryForOptimisticUpload(b,function(){return e},c==null?void 0:c.objectId,c==null?void 0:c.serverMediaType);else return d(\"WAGlobals\").getDbImpls().updateMediaEntryForMsg(b,a,function(){return e},c==null?void 0:c.objectId,c==null?void 0:c.serverMediaType)}}g.uploadMedia=a}),98);\n__d(\"MAWSendMsg\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWMsgType\",\"MAWODSProxy\",\"MAWQplProxy\",\"MAWWriteOutgoingMsgApi\",\"Promise\",\"WAGlobals\",\"WAJobOrchestratorTypes\",\"WALogger\",\"WAOdsEnums\",\"WASendMsgUtilV2\",\"asyncToGeneratorRuntime\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendMsg cannot send to a non-existent thread\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendMsg already sent message\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendMsg: \",\"\"]);k=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"writeToDb\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,e,f){e=a.args;var g=a.chatJid;a=a.externalId;d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(25313175,\"1551\"),\"received_message_in_wajob\",{instanceKey:e.s2sInstanceKey});d(\"WAGlobals\").getConfig().offlineProcessingState()!==\"idle\"&&d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.MSG_SEND,key:\"offline\"});yield d(\"WASendMsgUtilV2\").getDevicesBeforeSend(g,\"sendMsg\");a=(yield d(\"MAWWriteOutgoingMsgApi\").writeOutgoingMsg(a,g,f.jobStartTime,e,d(\"MAWMsgType\").MSG_TYPE.TEXT));d(\"WALogger\").DEV(k(),g);if(a.type===\"already_sent\")d(\"WALogger\").LOG(j()),d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(25313175,\"1551\"),\"message_already_sent_to_backend\",{instanceKey:e.s2sInstanceKey});else if(a.type===\"missing_thread\"){d(\"WALogger\").LOG(i());d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(25313175,\"1551\"),\"failed_message_missing_thread\",{instanceKey:e.s2sInstanceKey});return(h||(h=b(\"Promise\"))).reject(\"sendMsg sends a message to a non-existent thread\")}else yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:a.protocolMsgId,s2sInstanceKey:e.s2sInstanceKey,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"message\"})),d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(25313175,\"1551\"),\"successful_message_sent_to_backend\",{instanceKey:e.s2sInstanceKey})});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.sendMsg=a}),98);\n__d(\"MAWSendRavenActionMsg\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWMsgType\",\"WAJobOrchestratorTypes\",\"WALogger\",\"WASendMsgUtilV2\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendRavenActionMsg cannot send to a non-existent thread\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendRavenActionMsg already sent message\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"sendRavenActionMsg\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){b=a.args;var e=a.chatJid;a=a.externalId;yield d(\"MAWGlobals\").getDbImpls().modifyRavenMsg(b.ravenProtocolMsgId);yield d(\"WASendMsgUtilV2\").getDevicesBeforeSend(e,\"sendRavenActionMsg\");a=(yield d(\"MAWGlobals\").getDbImpls().writeOutgoingMsg(a,e,c.jobStartTime,b,d(\"MAWMsgType\").MSG_TYPE.RAVEN_ACTION));if(a.type===\"already_sent\"){d(\"WALogger\").LOG(i());return}else if(a.type===\"missing_thread\"){d(\"WALogger\").LOG(h());return}yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:a.protocolMsgId,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"message\"}))});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.sendRavenActionMsg=a}),98);\n__d(\"MAWSendReactionMsg\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"MAWWriteReactionMsgApi\",\"WALogger\",\"WASendMsgUtilV2\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendReactionMsg cannot react to a non-existent message\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendReactionMsg cannot send to a non-existent thread\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendReactionMsg already sent message\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendReactionMsg: \",\"\"]);k=function(){return a};return a}function l(a){return a===\"\\u2764\\ufe0f\"?\"\\u2764\":a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"saveAndPassOff\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){b=a.args;var e=a.chatJid;a=a.externalId;d(\"WALogger\").DEV(k(),e);var f=b.reaction,g=b.reactToProtocolMsgId;f=l(f);var m=d(\"MAWGlobals\").getJidUtilsApi();m=m.toUserJid;m=m(b.reactToAuthor);yield d(\"WASendMsgUtilV2\").getDevicesBeforeSend(e,\"sendReactionMsg\");b=(yield d(\"MAWWriteReactionMsgApi\").writeReactionMsg(a,e,{groupingKey:f,reaction:f,reactToAuthor:m,reactToExternalId:g.externalId},c.jobStartTime));if(b.type===\"already_sent\"){d(\"WALogger\").LOG(j());return}else if(b.type===\"missing_thread\"){d(\"WALogger\").LOG(i());return}else if(b.type===\"missing_msg\"){d(\"WALogger\").LOG(h());return}yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:b.protocolMsgId,type:\"reaction\"}))});return function(b,c,d){return a.apply(this,arguments)}}()).end();g.sendReactionMsg=a}),98);\n__d(\"MAWSendWrittenAppData\",[\"MAWGlobals\",\"MAWJobDefinitions\",\"WALogger\",\"WASendAppDataFanoutProtocol\",\"WATimeUtils\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenAppData(\",\"): too old, dropping\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenAppData not sending message: \",\"\"]);i=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"encryptAndSend\",{code:function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.appDataExternalId;var b=(yield d(\"MAWGlobals\").getDbImpls().getAppData(a));if(b.type!==\"not_sent\"){d(\"WALogger\").LOG(i(),b.type);return{type:\"error\"}}b=(yield d(\"WASendAppDataFanoutProtocol\").sendAppDataToDevicesProtocol(b.appData,a,b.permittedIdentitiesPerDevice,b.sendPartial?\"dontCheckPhash\":\"checkPhash\"));if(b.success===!0){b.value.phashMismatch===!0&&(yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").jobSerializers.resendWrittenAppData(a)));yield d(\"MAWGlobals\").getDbImpls().markAppDataSent(a);return{type:\"success\"}}else{yield d(\"MAWGlobals\").getDbImpls().markAppDataSendFailed(a);return{type:\"error\"}}});function c(b){return a.apply(this,arguments)}return c}(),stopRetryIf:{onStopRetry:function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.appDataExternalId;d(\"WALogger\").LOG(h(),a);yield d(\"MAWGlobals\").getDbImpls().markAppDataDropped(a);return{type:\"error\"}});function c(b){return a.apply(this,arguments)}return c}(),timePassedSeconds:d(\"WATimeUtils\").DAY_SECONDS}}).end();g.sendWrittenAppData=a}),98);\n__d(\"MAWGetEditMsgForSending\",[\"MAWAckLevel\",\"MAWAsMessageApplication\",\"MAWDbEditMsgHistoryTxns\",\"MAWDbMsgTxns\",\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWJidUtils\",\"MAWTransactionMode\",\"WAJids\",\"WALogger\",\"WAResultOrError\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendEditMsg] Failed to get originalMsg\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendEditMsg] Failed to get thread (success:\",\")\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendEditMsg] Failed to get originalMsgProtocolMsgId\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendEditMsg] Failed to get edit history\"]);k=function(){return a};return a}b=d(\"MAWIndexedDb\").makeMsgrAndSignalTransactor({editMsgHistory:(a=d(\"MAWTransactionMode\")).READONLY,messages:a.READONLY,participants:a.READONLY,reactions:a.READONLY,threads:a.READONLY},\"getEditMsgForSending\",function(a){return function(b,e){return l(a,b,e).then(function(a){if(!a.success)return{type:a.error};a=a.value.msg;var e=d(\"MAWAsMessageApplication\").asEditMessageApplication(a);if(d(\"WAJids\").isAuthorSystem(a.author))throw c(\"err\")(\"This cannot happen because there are no system edit\");return{dbMsg:a,editOriginalExternalId:a.originalMsgExternalId,messageApplication:e,messageType:{isRevoked:!1,type:\"text\"},protocolMsgId:b,type:\"unsent\"}})}});function l(a,b,c){return d(\"MAWDbEditMsgHistoryTxns\").getEditHistoryMsgByEditedProtocolMsgId(a,b,c).then(function(b){if(b==null){d(\"WALogger\").ERROR(k());return d(\"WAResultOrError\").makeError(\"missing_history\")}else if(b.sendStatus!=null&&b.sendStatus>d(\"MAWAckLevel\").ACK.clock)return d(\"WAResultOrError\").makeError(\"sent\");var c=d(\"MAWJidUtils\").maybeToProtocolMsgId(b.author,b.threadJid,b.originalMsgExternalId);if(c==null){d(\"WALogger\").ERROR(j());return d(\"WAResultOrError\").makeError(\"missing_msg\")}return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbThreadTxns\").getThreadByJid(a,b.threadJid),d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,c)]).then(function(a){var c=a[0];a=a[1];if(!c.success){d(\"WALogger\").ERROR(i(),c.success);return d(\"WAResultOrError\").makeError(\"missing_thread\")}if(a==null){d(\"WALogger\").ERROR(h());return d(\"WAResultOrError\").makeError(\"missing_msg\")}return a.ack>d(\"MAWAckLevel\").ACK.clock?d(\"WAResultOrError\").makeError(\"sent\"):d(\"WAResultOrError\").makeResult({msg:b,thread:c.value})})})}g.getEditMsgForSending=b}),98);\n__d(\"MAWGetMsgForSendingApi\",[\"MAWAckLevel\",\"MAWAsMessageApplication\",\"MAWDbGroupInviteTxns\",\"MAWDbMediaTxns\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbParticipantTxns\",\"MAWDbThreadTxns\",\"MAWDbUnrenderedMsgTxns\",\"MAWDbXMATxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWMsgType\",\"MAWSendMsgUtil\",\"MAWTransactionMode\",\"MAWXMAUtils\",\"WAJids\",\"WALogger\",\"WAResultOrError\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendMsg] Failed to get XMA: isXma: \",\", type: \",\" \"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendMsg] Failed to get thread (success:\",\")\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SendMsg] Failed to get message\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg \",\" -- MAWGetMsgForSendingAPI -- Done\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg \",\" -- MAWGetMsgForSendingAPI -- Unrecognized type \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg \",\" -- MAWGetMsgForSendingAPI -- Error: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg \",\" -- MAWGetMsgForSendingAPI -- Entering\"]);n=function(){return a};return a}b=d(\"MAWIndexedDb\").makeMsgrTransactor({groupInvites:(a=d(\"MAWTransactionMode\")).READONLY,media:a.READONLY,messages:a.READONLY,participants:a.READONLY,reactions:a.READONLY,threads:a.READONLY,unrenderedMessages:a.READONLY,xma:a.READONLY},\"getMsgForSending\",function(a){return function(b){return o(a,b).then(function(a){d(\"WALogger\").LOG(n(),b);if(!a.success){d(\"WALogger\").LOG(m(),b,a.error);return{type:a.error}}a=a.value;var e=a.contactsInThread,f=a.groupInvite,g=a.isReplyMsg,h=a.media,i=a.msg,j=a.thread;a=a.xmaPayload;if(!d(\"MAWDbMsg\").NO_CONTENT_MESSAGE_TYPES_ALLOWLIST.includes(i.type)&&!d(\"MAWDbMsg\").isContentMsg(i)){d(\"WALogger\").LOG(l(),b,i.type);throw c(\"err\")(\"We do not support message sending with \"+i.type+\" type\")}var o=d(\"MAWAsMessageApplication\").asMessageApplication(i,h,f,a),p=null;i.type===d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE&&f?p={invitedParticipantUserJid:f.inviteeJid,isRevoked:!1,type:\"text\"}:p=d(\"MAWSendMsgUtil\").getMessageTypeFromMsg(i.type);if(d(\"WAJids\").isAuthorSystem(i.author))throw c(\"err\")(\"A system message cannot be sent\");d(\"WALogger\").LOG(k(),b);return{contactsInThread:e,dbMsg:i,isReplyMsg:g,isXMAMsg:a!=null,media:h,messageApplication:o,messageType:p,protocolMsgId:{author:i.author,chat:j.jid,externalId:a!=null&&a.associatedMessage!=null?a.associatedMessage.externalId:i.externalId},type:\"unsent\"}})}});function o(a,b){return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,b),d(\"MAWDbUnrenderedMsgTxns\").maybeGetUnrenderedMsgByProtocolMsgId(a,b)]).then(function(c){var e=c[0];c=c[1];var f=c.value,g=e||f;if(g==null){d(\"WALogger\").ERROR(j());return d(\"WAResultOrError\").makeError(\"missing_msg\")}else if(g.ack>d(\"MAWAckLevel\").ACK.clock)return d(\"WAResultOrError\").makeError(\"sent\");var k=d(\"MAWXMAUtils\").maybeXMAMessage(e),l=g.quote!=null;return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbThreadTxns\").getThread(a,g.thread),e?d(\"MAWDbMediaTxns\").getAndCheckMediaFromMsg(a,e):d(\"MAWDexieTable\").dexieResolve(d(\"WAResultOrError\").makeResult()),c.success?d(\"MAWDbGroupInviteTxns\").getAndCheckGroupInviteFromMsg(a,c.value):d(\"MAWDexieTable\").dexieResolve(),k?d(\"MAWDbXMATxns\").maybeGetXMAPayloadFromProtocolMsgId(a,b):null,d(\"MAWDbParticipantTxns\").getParticipantsInThread(a,g.threadJid).then(function(a){return a.map(function(a){return a.userJid})})]).then(function(a){var b=a[0],c=a[1],e=a[2],f=a[3];a=a[4];if(!c.success)return c;if(!b.success){d(\"WALogger\").ERROR(i(),b.success);return d(\"WAResultOrError\").makeError(\"missing_thread\")}if(f!=null&&!f.success){d(\"WALogger\").ERROR(h(),k,g.type);return d(\"WAResultOrError\").makeError(\"missing_xma\")}c=c.value;b=b.value;return d(\"WAResultOrError\").makeResult({contactsInThread:a,groupInvite:e,isReplyMsg:l,media:c,msg:g,thread:b,xmaPayload:f!=null?f.value:null})})})}g.getMsgForSending=b}),98);\n__d(\"MAWGetReactionForSending\",[\"MAWAckLevel\",\"MAWAsMessageApplication\",\"MAWDbReactionsTxns\",\"MAWDbThreadTxns\",\"MAWIndexedDb\",\"MAWTransactionMode\",\"WAJids\",\"WAResultOrError\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b){return d(\"MAWDbReactionsTxns\").getReaction(a,b).then(function(b){if(b==null)return d(\"WAResultOrError\").makeError(\"missing\");else if(b.ack>d(\"MAWAckLevel\").ACK.clock)return d(\"WAResultOrError\").makeError(\"sent\");return d(\"MAWDbThreadTxns\").getThreadByJid(a,b.threadJid).then(function(a){return!a.success?d(\"WAResultOrError\").makeError(a.error):d(\"WAResultOrError\").makeResult({msg:b})})})}a=d(\"MAWIndexedDb\").makeMsgrTransactor({reactions:d(\"MAWTransactionMode\").READONLY,threads:d(\"MAWTransactionMode\").READONLY},\"getReactionForSending\",function(a){return function(b){return h(a,b).then(function(a){if(!a.success)return{type:a.error};a=a.value.msg;var b=d(\"MAWAsMessageApplication\").asReactionMessageApplication(a);if(d(\"WAJids\").isAuthorSystem(a.author))throw c(\"err\")(\"This cannot happen because there are no system reactions\");return{chat:a.threadJid,dbMsg:a,externalId:a.externalId,messageApplication:b,messageType:{isInvisible:!0,type:\"reaction\"},protocolMsgId:{author:a.author,chat:a.threadJid,externalId:a.externalId},type:\"unsent\"}})}});g.getReactionForSending=a}),98);\n__d(\"MAWMarkEditMsgDroppedApi\",[\"FBLogger\",\"MAWAckLevel\",\"MAWBridgeMsg\",\"MAWBridgeTypesCreators\",\"MAWDbEditMsgHistoryTxns\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWJidUtils\",\"MAWThreadSnippetForTextMsg\",\"MAWTransactionMode\",\"WAGlobals\",\"WAJids\",\"WALogger\",\"WAMsgType\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgDropped] editMsgHistory updated\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgDropped] originalMsg is not a text message\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgDropped] thread is null\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgDropped] newestEditedMsg is not the newest edit\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgDropped] originalMsg or editHistoryMsg is null\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgDropped] originalProtocolMsgId is null\"]);m=function(){return a};return a}a=d(\"MAWIndexedDb\").makeMsgrTransactor({editMsgHistory:d(\"MAWTransactionMode\").READWRITE,messages:d(\"MAWTransactionMode\").READWRITE,threads:d(\"MAWTransactionMode\").READWRITE},\"markEditMsgDropped\",function(a){return function(b,e){var f=d(\"MAWJidUtils\").maybeToProtocolMsgId(b.author,b.chat,e);if(f==null){d(\"WALogger\").ERROR(m());return d(\"MAWDexieTable\").dexieResolve()}return d(\"MAWDexieTable\").dexieAll([a.threads.get({jid:b.chat}),d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,f),d(\"MAWDbEditMsgHistoryTxns\").maybeGetEditMsgHistoryFromProtocolMsgId(a,f),a.messages.where(\"quoteExternalId\").equals(e).toArray()]).then(function(e){var f=e[0],g=e[1],m=e[2];e=e[3];var n=m.sort(function(a,b){return b.editTs-a.editTs}),o=m.find(function(a){return a.editExternalId===b.externalId}),p=n[1];if(g==null||p==null||o==null){d(\"WALogger\").ERROR(l());return}if(o.editExternalId!==n[0].editExternalId){d(\"WALogger\").ERROR(k());return}if(f==null){d(\"WALogger\").ERROR(j());return}if(g.type!==d(\"WAMsgType\").MSG_TYPE.TEXT){d(\"WALogger\").ERROR(i());return}var q=babelHelpers[\"extends\"]({},g,{ack:d(\"MAWAckLevel\").ACK.sent,editCount:((n=g.editCount)!=null?n:0)-1,msgContent:p.msgContent}),r=d(\"WAGlobals\").getMyUserJid(),s=[];n=e.find(function(a){var c;return(((c=a.quote)==null?void 0:c.content.author)===d(\"WAJids\").AUTHOR_ME||((c=a.quote)==null?void 0:c.content.author)===r)&&a.threadJid===b.chat});if(n!=null){e=n.quote;var t=n.quoteExternalId;if(e==null)c(\"FBLogger\")(\"messenger_e2ee_web\").warn(\"[markEditMsgDropped] Failed to get the quoted content for a msg that has been quoted.\",t);else{t=babelHelpers[\"extends\"]({},n,{quote:babelHelpers[\"extends\"]({},e,{content:babelHelpers[\"extends\"]({},e.content,{msgContent:babelHelpers[\"extends\"]({},q.msgContent)})})});s.push(t)}}n=[];g.editCount===1&&m.length===2&&n.push(p.editMsgHistoryId);n.push(o.editMsgHistoryId);return d(\"MAWDexieTable\").dexieAll([a.messages.put(q),a.editMsgHistory.bulkDelete(n)]).then(function(){d(\"WALogger\").LOG(h());d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(q)});s.forEach(function(a){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(a)})});if(f.newestMsg!=null&&f.newestMsg===g.msgId){var a=d(\"WAJids\").userIdFromJid(d(\"WAGlobals\").getMyUserJid()),b=c(\"MAWThreadSnippetForTextMsg\")(q,a,d(\"WAJids\").interpretAsGroupJid(f.jid)!=null),e=b.snippetParams;b=b.snippetType;d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadUpdated\",value:d(\"MAWBridgeTypesCreators\").createBridgeUpdatedThread({snippetParams:e,snippetSenderContactId:a,snippetType:b,threadId:f.chatId,threadJid:f.jid})})}})})}});g.markEditMsgDropped=a}),98);\n__d(\"MAWMarkEditMsgSentApi\",[\"ArmadilloDataTraceType\",\"MAWAckLevel\",\"MAWBridgeMsg\",\"MAWBridgeTrace\",\"MAWBridgeTraceEvent\",\"MAWDbEditMsgHistory\",\"MAWDbEditMsgHistoryTxns\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWIndexedDb\",\"MAWJidUtils\",\"MAWLoadReplyMediaTxns\",\"MAWTransactionMode\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgSent] editMsgHistory updated\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgSent] on incoming message\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgSent] editMsgHistory has already been sent\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgSent] originalMsg or editHistoryMsg is null\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[markEditMsgSent] originalProtocolMsgId is null\"]);l=function(){return a};return a}b=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(a=d(\"MAWTransactionMode\")).READONLY,editMsgHistory:a.READWRITE,media:a.READONLY,messages:a.READWRITE,xma:a.READONLY},\"markMsgSent\",function(a){return function(b,e,f,g){var m=d(\"MAWJidUtils\").maybeToProtocolMsgId(b.author,b.chat,e);if(m==null){d(\"WALogger\").ERROR(l());return d(\"MAWDexieTable\").dexieResolve()}return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,m),d(\"MAWDbEditMsgHistoryTxns\").maybeGetEditMsgHistoryFromProtocolMsgId(a,m)]).then(function(l){var m=l[0];l=l[1];var n=l.find(function(a){return a.editExternalId===e}),o=l.find(function(a){return a.editExternalId===b.externalId});if(m==null||n==null||(o==null?void 0:o.editExternalId)==null){d(\"WALogger\").ERROR(k());return}if(o.sendStatus!=null&&o.sendStatus>d(\"MAWAckLevel\").ACK.clock&&m.ack>d(\"MAWAckLevel\").ACK.clock){d(\"WALogger\").LOG(j());return}if(o.author!==d(\"WAJids\").AUTHOR_ME){d(\"WALogger\").ERROR(i());return}d(\"MAWIndexedDb\").afterTransaction({tag:\"UpdateTrace\",value:d(\"MAWBridgeTrace\").createBridgeUpdateTraceData([o.editExternalId],c(\"MAWBridgeTraceEvent\").ReceivedSent,d(\"ArmadilloDataTraceType\").armadilloMessageSend)});var p=[];if(l.length===2&&m.editCount===1){l=babelHelpers[\"extends\"]({},n,{sendStatus:d(\"MAWAckLevel\").ACK.sent});p.push(l)}n=babelHelpers[\"extends\"]({},o,{editTs:f,sendStatus:d(\"MAWAckLevel\").ACK.sent});p.push(n);var q=p.map(function(a){return babelHelpers[\"extends\"]({},a,{editMsgHistoryId:d(\"MAWDbEditMsgHistory\").convertToEditMsgHistoryId64(a.editMsgHistoryId),originalMsgId:m.msgId})}),r=babelHelpers[\"extends\"]({},m,{ack:d(\"MAWAckLevel\").ACK.sent});g!=null&&(r.reportingMeta=g);return d(\"MAWDexieTable\").dexieAll([a.editMsgHistory.bulkPut(p),a.messages.put(r),d(\"MAWLoadReplyMediaTxns\").getReplyMediaForMsgQuote(a,r)]).then(function(a){a[0];a=a[2];d(\"WALogger\").LOG(h());d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(r,void 0,a)});d(\"MAWIndexedDb\").afterTransaction({tag:\"EditMsgHistoryAdded\",value:q})})})}});g.markEditMsgSent=b}),98);\n__d(\"MAWMarkMsgDroppedApi\",[\"MAWAckLevel\",\"MAWDbMsgTxns\",\"MAWIndexedDb\",\"MAWTransactionMode\"],(function(a,b,c,d,e,f,g){\"use strict\";b=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(a=d(\"MAWTransactionMode\")).READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE,xma:a.READONLY},\"markMsgDropped\",function(a){return function(b){return d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,b).then(function(b){return b==null?\"missing\":d(\"MAWDbMsgTxns\").updateSystemAck(a,b.msgId,d(\"MAWAckLevel\").ACK.expired).then(function(a){return a==null?\"missing\":a.ack<=d(\"MAWAckLevel\").ACK.clock?\"dropped\":\"sent\"})})}});g.markMsgDropped=b}),98);\n__d(\"MAWMarkMsgSentApi\",[\"ArmadilloDataTraceType\",\"I64\",\"MAWAckLevel\",\"MAWBridgeTrace\",\"MAWBridgeTraceEvent\",\"MAWBridgeTypesCreators\",\"MAWCalculateBumpTimestampMs\",\"MAWDbMsg\",\"MAWDbMsgTxns\",\"MAWDbThread\",\"MAWDbThreadTxns\",\"MAWDbUnrenderedMsgTxns\",\"MAWDexieTable\",\"MAWEphemeralGatingUtil\",\"MAWEphemeralMsgTxns\",\"MAWEphemeralSettingsTxns\",\"MAWIndexedDb\",\"MAWMsgType\",\"MAWThreadSnippetBuildTxns\",\"MAWTransactionMode\",\"WALogger\",\"WATimeUtils\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Thread missing from DB\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Found both regular and unrendered message with the same protocol msg ID\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Msg missing from DB\"]);k=function(){return a};return a}b=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(a=d(\"MAWTransactionMode\")).READONLY,ephemeralSettings:a.READWRITE,groupInfo:a.READONLY,media:a.READONLY,messages:a.READWRITE,threads:a.READWRITE,unrenderedMessages:a.READWRITE,xma:a.READONLY},\"markMsgSent\",function(a){return function(b,e,f){return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").maybeGetMsgByProtocolMsgId(a,b),d(\"MAWDbUnrenderedMsgTxns\").maybeGetUnrenderedMsgByProtocolMsgId(a,b)]).then(function(g){var l=g[0];g=g[1];if(l==null&&!g.success){d(\"WALogger\").LOG(k());return}else if(l!=null){d(\"MAWIndexedDb\").afterTransaction({tag:\"UpdateTrace\",value:d(\"MAWBridgeTrace\").createBridgeUpdateTraceData([l.externalId],c(\"MAWBridgeTraceEvent\").ReceivedSent,d(\"ArmadilloDataTraceType\").armadilloMessageSend)});g.success&&d(\"WALogger\").ERROR(j());var m=l.ack<d(\"MAWAckLevel\").ACK.sent;return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").updateSystemAck(a,l.msgId,d(\"MAWAckLevel\").ACK.sent,e,f),d(\"MAWDbThreadTxns\").getThread(a,l.thread)]).then(function(b){var f=b[0];b=b[1];if(!b.success){d(\"WALogger\").ERROR(i());return}var g=b.value,j=d(\"WATimeUtils\").castUnixTimeToMillisTime(e);b=babelHelpers[\"extends\"]({},g,{lastReadMsgTs:j,newestMsgTs:j,threadOrder:d(\"MAWDbThread\").craftThreadOrder(j,g.jid)});b=m?d(\"MAWDbThreadTxns\").updateThread(a,b):d(\"MAWDexieTable\").dexieResolve();return d(\"MAWDexieTable\").dexieAll([d(\"MAWEphemeralGatingUtil\").isSendBasedDisappearingMessageEnabled()?d(\"MAWEphemeralMsgTxns\").markEphemeralMessageAsSent(a,f):d(\"MAWEphemeralMsgTxns\").maybeUpdateEphemeralMessageWhenMarkedSent(a,f,e),b]).then(function(){if(l.altIndex!==d(\"MAWDbMsg\").SPAM_ALT_INDEX&&l.altIndex!==d(\"MAWDbMsg\").FUTUREPROOF_SPAM_ALT_INDEX&&m)if(!c(\"gkx\")(\"23996\"))d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumpedServer\",value:{description:\"markMsgSent\",isCurrentDeviceSendingMsg:!0,lastActivityTs:j,lastMsgExternalId:f?(h||(h=d(\"I64\"))).of_string_opt(f.externalId):void 0,threadId:g.chatId,threadJid:g.jid}});else return d(\"MAWThreadSnippetBuildTxns\").buildThreadSnippet(a,l,g).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;var e=l.externalId!==void 0?(h||(h=d(\"I64\"))).of_string_opt(l.externalId):void 0;e=d(\"MAWCalculateBumpTimestampMs\").calculateBumpTimestampMs(j,e);d(\"MAWIndexedDb\").afterTransaction({tag:\"ThreadBumpedV2\",value:d(\"MAWBridgeTypesCreators\").createBridgeBumpedThreadV2({bumpTimestampMs:e,description:\"markMsgSent\",isMessageAuthorMe:!0,snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:g.chatId,threadJid:g.jid})})})})})}else if(g.success){var n=g.value;return d(\"MAWDbUnrenderedMsgTxns\").updateSystemAckForUnrenderedMsg(a,n.msgId,d(\"MAWAckLevel\").ACK.sent).then(function(){if(n.type===d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE)return d(\"MAWEphemeralSettingsTxns\").updateContactWhenEphemeralSettingChangeMarkedSent(a,b.chat,e)})}}).then(function(){})}});g.markMsgSent=b}),98);\n__d(\"MAWSendWrittenMsg\",[\"FBLogger\",\"I64\",\"MAWEBSwitch\",\"MAWEBUploadTrackingUtils\",\"MAWGetEditMsgForSending\",\"MAWGetMsgForSendingApi\",\"MAWGetReactionForSending\",\"MAWGlobals\",\"MAWMarkEditMsgDroppedApi\",\"MAWMarkEditMsgSentApi\",\"MAWMarkMsgDroppedApi\",\"MAWMarkMsgSentApi\",\"MAWMsgType\",\"MAWSendMsgUtil\",\"MAWSharedEbUploadQueue\",\"MessageBackupDirectiveGenerator\",\"WAAsMessageApplication\",\"WAFrankingTypes\",\"WAGenReportingMeta\",\"WAJids\",\"WALogger\",\"WAMsgApplication.pb\",\"WAPREList\",\"WAPREMetrics\",\"WAResultOrError\",\"WASendMsgUtilV2\",\"asyncToGeneratorRuntime\",\"encodeProtobuf\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg END \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg END \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg not sending message: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg(\",\"): drop result: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendWrittenMsg(\",\"): too old, dropping\"]);n=function(){return a};return a}e=24*60*60;function o(a,b){return p.apply(this,arguments)}function p(){p=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){d(\"WALogger\").LOG(l(),a.protocolMsgId);var e=null;b.addPoint(\"get_msg_for_sending\",{string:{type:a.type}});if(a.type===\"message\"||a.type===\"revoke\")e=(yield d(\"MAWGetMsgForSendingApi\").getMsgForSending(a.protocolMsgId));else if(a.type===\"reaction\")e=(yield d(\"MAWGetReactionForSending\").getReactionForSending(a.protocolMsgId));else if(a.type===\"edit\")e=(yield d(\"MAWGetEditMsgForSending\").getEditMsgForSending(a.protocolMsgId,a.referencedOriginalExternalId));else{a.type;throw c(\"err\")(\"This cannot happen because type has `message` as default argument but flow does not know that\")}if(e.type!==\"unsent\"){d(\"WALogger\").LOG(k(),e.type);b.endFail(e.type);return d(\"WAResultOrError\").makeError(\"unknown-error\")}a=e;e=a.dbMsg;var f=a.editOriginalExternalId,g=a.isReplyMsg,m=a.isXMAMsg,n=a.messageApplication,o=a.messageType;a=a.protocolMsgId;b.addPoint(\"message-fetched-from-db\",{bool:{isEditMsg:f!=null,isReplyMsg:g,isXMAMsg:m},string:{msgType:o.type}});g={bytes:d(\"WAAsMessageApplication\").castToMessageApplicationBytes(d(\"encodeProtobuf\").encodeProtobuf(d(\"WAMsgApplication.pb\").MessageApplicationSpec,n).readByteArray()),version:\"v3\"};m=(yield d(\"WASendMsgUtilV2\").sendChatMessage({messagePayload:{frankingKey:((m=n.metadata)==null?void 0:m.frankingKey)?d(\"WAFrankingTypes\").castToFrankingKey(new Uint8Array((m=n.metadata)==null?void 0:m.frankingKey)):null,frankingVersion:(m=n.metadata)==null?void 0:m.frankingVersion,messageBytes:g,messageType:o,protocolMsgId:a}},b));m.success===!1&&(b==null?void 0:b.addPoint(\"send-msg-v2-failed\",{string:{errorType:m.error,msgType:e.type}}));if(m.success===!1)b.endFail(m.error),f!=null?yield d(\"MAWMarkEditMsgDroppedApi\").markEditMsgDropped(a,f):yield d(\"MAWMarkMsgDroppedApi\").markMsgDropped(a),d(\"WALogger\").ERROR(j(),m.error);else{f!=null?yield r({editOriginalExternalId:f,protocolMsgId:a,reportingMeta:m.value.reportingMeta,serverTs:m.value.serverTs},b):yield s({protocolMsgId:a,reportingMeta:m.value.reportingMeta,serverTs:m.value.serverTs},b);b.endSuccess();d(\"WALogger\").LOG(i(),m.success);if(c(\"MAWEBSwitch\").isEnabled()&&d(\"MAWGlobals\").getConfig().useEbUploadQueue())try{if(e!=null&&!d(\"WAJids\").isAuthorSystem(e.author)){o=n==null?void 0:n.metadata;f=d(\"MessageBackupDirectiveGenerator\").createMessageBackupDirectiveFromDbMsg(e);f!=null&&(d(\"MAWEBUploadTrackingUtils\").maybeStartTrackingForUploadQueue(a,\"send\",0,q(e)),yield d(\"MAWSharedEbUploadQueue\").putMsgsToEbUpload([{backupDirective:f,messageApplication:g.bytes,msgId:a,originalMsgProtocolId:f.originalMsgProtocolId.externalId!==a.externalId?f.originalMsgProtocolId:void 0,reportingMeta:yield d(\"WAGenReportingMeta\").genReportingMeta(g.bytes,(o==null?void 0:o.frankingKey)?d(\"WAFrankingTypes\").castToFrankingKey(new Uint8Array(o==null?void 0:o.frankingKey)):null,o==null?void 0:o.frankingVersion),senderId:(h||(h=d(\"I64\"))).of_string(d(\"WAJids\").authorToUserId(a.author,d(\"WAJids\").extractUserId(d(\"MAWGlobals\").getMyUserJid()))),serverTs:m.value.serverTs}]))}}catch(a){c(\"FBLogger\")(\"labyrinth_web\").mustfix(\"Failed to decode message application and add to EB upload queue\")}}if(m.success===!1)throw c(\"err\")(\"sendWrittenMsg error\");return m});return p.apply(this,arguments)}function q(a){if(a.reactToExternalId!=null)return d(\"MAWMsgType\").MSG_TYPE.REACTION;return a.editMsgHistoryId!=null?d(\"MAWMsgType\").MSG_TYPE.EDIT_ACTION:a.type}f=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"encryptAndSend\",{code:function(a,b,c){a.s2sInstanceKey!=null&&d(\"MAWSendMsgUtil\").addS2SInstanceKey(a.s2sInstanceKey);b=d(\"WAPREMetrics\").startMetric(d(\"WAPREList\").PRE_METRIC.SEND_MESSAGE,{bool:{afterCrash:c.afterCrash,isSenderKeyPredistriubtionEnabled:d(\"MAWGlobals\").getConfig().isSenderKeyPredistributionEnabled()},string:{jid:a.protocolMsgId.chat}},a.s2sInstanceKey);return o(a,b)},stopRetryIf:{onStopRetry:function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=a.protocolMsgId;d(\"WALogger\").LOG(n(),a);var b=(yield d(\"MAWMarkMsgDroppedApi\").markMsgDropped(a));d(\"WALogger\").LOG(m(),a,b);return d(\"WAResultOrError\").makeError(\"too-many-retries\")});function c(b){return a.apply(this,arguments)}return c}(),timePassedSeconds:e}}).end();function a(a){if(a.reactToExternalId!=null)return a.reactToExternalId;if(a.originalMsgExternalId!=null)return a.originalMsgExternalId;switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.EDIT_ACTION:return a.originalMsgExternalId;case d(\"MAWMsgType\").MSG_TYPE.REACTION:return a.reactToExternalId;default:return null}}function r(a,b){var c=a.editOriginalExternalId,e=a.protocolMsgId,f=a.reportingMeta;a=a.serverTs;return d(\"MAWMarkEditMsgSentApi\").markEditMsgSent(e,c,a,f).then(function(){b==null?void 0:b.addPoint(\"mark_edit_msg_sent\")})}function s(a,b){var c=a.protocolMsgId,e=a.reportingMeta;a=a.serverTs;return d(\"MAWMarkMsgSentApi\").markMsgSent(c,a,e).then(function(){b==null?void 0:b.addPoint(\"mark_msg_sent\")})}g.sendWrittenMsg=f;g.getTopLevelOfflineThreadingId=a}),98);\n__d(\"MAWFetchAndEmitThreadApi\",[\"MAWIndexedDb\",\"MAWThreadFetchAndEmitTxns\",\"MAWTransactionMode\"],(function(a,b,c,d,e,f,g){\"use strict\";b=d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(a=d(\"MAWTransactionMode\")).READONLY,editMsgHistory:a.READONLY,groupInfo:a.READWRITE,groupInvites:a.READONLY,media:a.READONLY,messages:a.READWRITE,participants:a.READWRITE,reactions:a.READONLY,threads:a.READWRITE,xma:a.READONLY},\"fetchAndEmitThread\",function(a){return function(b,c){c===void 0&&(c=\"fetchAndEmitThreadInTxn\");return d(\"MAWThreadFetchAndEmitTxns\").fetchAndEmitThread(a,b,void 0,void 0,c)}});g.fetchAndEmitThreadInTxn=b}),98);\n__d(\"MAWGetParticipantsInThreadApi\",[\"MAWDbParticipantTxns\",\"MAWIndexedDb\",\"MAWTransactionMode\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWIndexedDb\").makeMsgrTransactor({participants:d(\"MAWTransactionMode\").READONLY},\"getParticipantsInThread\",function(a){return function(b){return d(\"MAWDbParticipantTxns\").getParticipantsInThread(a,b)}});g.getParticipantsInThreadInTxn=a}),98);\n__d(\"MAWSendXMAShareMsg\",[\"MAWAckLevel\",\"MAWBridgeMsg\",\"MAWBridgeXMA\",\"MAWDbMsgTxns\",\"MAWDexieTable\",\"MAWExpiredXMACleaner\",\"MAWFetchAndEmitThreadApi\",\"MAWFrontendMediaUtils\",\"MAWGetParticipantsInThreadApi\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWJobDefinitions\",\"MAWMediaManagementTxns\",\"MAWMediaUtils\",\"MAWMsgType\",\"MAWMsgUtil\",\"MAWOptimisticUploadManager\",\"MAWQplProxy\",\"MAWSendMediaMsg\",\"MAWStartMediaUploaQplFlow\",\"MAWTransactionMode\",\"MAWVault\",\"MAWXMAManagementTxns\",\"MAWXMAUtils\",\"MWQPLMarkers\",\"Promise\",\"WAArmadilloXMA.pb\",\"WAJids\",\"WAJobOrchestratorTypes\",\"WALogger\",\"WAMediaUtils\",\"WAUploadMedia\",\"asyncToGeneratorRuntime\",\"err\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to upload media xma\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"MAWSendXMAShareMsg - Message missing in db\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to send xma - missing thread\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"MAWSendXMAShareMsg - Associated Message missing in db\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to send xma associated msg - missing thread\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"MAWSendXMAShareMsg - Missing thread with jid: \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"MAWSendXMAShareMsg - XMAMessageType is null\"]);o=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"sendXMAShareMsg\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,e,f){e=function(b,c){c===void 0&&(c={}),a.args.s2sUserFlowQPLEvent!=null&&d(\"MAWQplProxy\").sendQplPointThroughBridge(a.args.s2sUserFlowQPLEvent,b,{annotations:c,instanceKey:a.args.s2sInstanceKey})};var g=function(b,c){c===void 0&&(c={}),a.args.s2sUserFlowQPLEvent!=null&&d(\"MAWQplProxy\").sendQPLFailThroughBridge(a.args.s2sUserFlowQPLEvent,b,c,a.args.s2sInstanceKey)};e(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.RECEIVED_MESSAGE_IN_WAJOB);var p=Boolean(a.associatedMsgContent)&&a.associatedMsgContent!=null?d(\"MAWVault\").vault(a.associatedMsgContent):void 0,q=void 0,t=a.associatedMsgContentExternalId,u=a.args.xmaMessageType;if(u==null){d(\"WALogger\").ERROR(o());return}yield d(\"MAWFetchAndEmitThreadApi\").fetchAndEmitThreadInTxn(a.chatJid,\"sendXMAShareMsg\");var v=(yield d(\"MAWGlobals\").getDbImpls().getThreadIdByJid(a.chatJid));if(v==null){g(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.FAILED_MISSING_THREAD_IN_DB);d(\"WALogger\").ERROR(n(),a.chatJid);return}if(c(\"gkx\")(\"23945\")){var w=(yield d(\"MAWGetParticipantsInThreadApi\").getParticipantsInThreadInTxn(a.chatJid));w=w.map(function(a){return a.userJid});yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"getDevices\",{ignoreDhash:!0,reason:\"send-xma-share-msg\",users:new Set(w)}))}e(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.WRITING_XMA_TO_DB);var x=(yield d(\"MAWGlobals\").getDbImpls().writeOutgoingMsg(a.xmaMsgExternalId,a.chatJid,f.jobStartTime,a.args,d(\"MAWMsgType\").MSG_TYPE.XMA));if(p!=null&&t!=null){w=babelHelpers[\"extends\"]({},a.args,{content:p});e(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.WRITING_MESSAGE_TO_DB);p=(yield d(\"MAWGlobals\").getDbImpls().writeOutgoingMsg(t,a.chatJid,f.jobStartTime,w,d(\"MAWMsgType\").MSG_TYPE.TEXT));if(p.type===\"missing_thread\"){g(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.FAILED_MESSAGE_MISSING_THREAD);d(\"WALogger\").ERROR(m());return}t=(yield d(\"MAWGlobals\").getDbImpls().getMsgIdByProtocolMsgId(p.protocolMsgId));if(!t.success){g(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.FAILED_MISSING_ASSOCIATED_MESSAGE_IN_DB);d(\"WALogger\").ERROR(l());return}q=t.value}if(x.type===\"missing_thread\"){d(\"WALogger\").ERROR(k());g(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.FAILED_MISSING_THREAD_IN_WRITING_XMA);return}f=(yield d(\"MAWGlobals\").getDbImpls().getMsgIdByProtocolMsgId(x.protocolMsgId));if(!f.success){g(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.FAILED_MISSING_XMA_MESSAGE_IN_DB);d(\"WALogger\").ERROR(j());return}var y=f.value;w=a.previewFile;p=a.headerFile;t=a.faviconFile;g=babelHelpers[\"extends\"]({},a.xmaArgs,{overlayIconGlyph:(g=a.xmaArgs.overlayIconGlyph)!=null?g:d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE,xmaLayoutType:(f=a.xmaArgs.xmaLayoutType)!=null?f:d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.SINGLE});f=(yield s(w,p,t,y,u,q,v,x.protocolMsgId,g,a.chatJid,a.args.offlineAttachmentId));e(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.SAVED_XMA_CONTENT_IN_DB);w=g.targetExpiringAtSec;p=d(\"MAWXMAUtils\").isXMAExpired(!1,w);if(!p&&w!=null)d(\"MAWExpiredXMACleaner\").addNewExpiredXMACleanerTimestamp(w);else if(p){t=(yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:x.protocolMsgId,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"message\"})));e(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.SUCCESSFUL_MESSAGE_SENT_TO_BACKEND,{bool:{isExpired:p}});return t}var z=d(\"MAWOptimisticUploadManager\").getOptimisticUploadManager();u=(yield r(f,a.chatJid,x.protocolMsgId,z));e(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.SUCCESSFUL_UPLOAD_MEDIA_TO_BACKEND);q=u.filter(function(a){return!a.uploadResult.success}).length;if(q>0){d(\"WALogger\").ERROR(i());return d(\"MAWMsgUtil\").updateSystemAckWithTxn(y,d(\"MAWAckLevel\").ACK.failed)}v=u.map(function(b){var c=b.uploadResult;b=b.media;return d(\"MAWSendMediaMsg\").maybePersistMediaEntry(b.plaintextHash,y,a.chatJid,x.protocolMsgId.externalId,c==null?void 0:(c=c.value)==null?void 0:c.objectId,d(\"MAWMediaUtils\").getServerMediaTypeFromMediaType(b.mediaType,\"xma-media\"))});yield (h||(h=b(\"Promise\"))).all(v);e(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.SAVING_XMA_UPLOAD_RESULT_IN_DB);yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"sendWrittenMsg\",{protocolMsgId:x.protocolMsgId,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION},type:\"message\"}));e(d(\"MWQPLMarkers\").MESSAGE_SEND_TO_SENT.SUCCESSFUL_MESSAGE_SENT_TO_BACKEND);u.forEach(function(a){z[\"delete\"](a.media.plaintextHash)})});return function(b,c,d){return a.apply(this,arguments)}}()).end();function p(a,b,c,d,e,f){return q.apply(this,arguments)}function q(){q=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c,e,f,g){g=g.get(a);g=g==null?void 0:g.optimisticUploadPromise;if(g!=null)return g;g=(yield d(\"MAWStartMediaUploaQplFlow\").startMediaUploaQplFlow({chatJid:b,fileSize:f,serverMediaType:e,uploadEntry:\"sendXMAShareMsg\"}));return d(\"WAUploadMedia\").uploadMedia({chatJid:b,hash:a,mediaTypeDetails:{mediaType:e,type:\"regular\"},protocolMsgId:c,size:f,uploadMediaFlow:g})});return q.apply(this,arguments)}function r(a,c,e,f){a=[a.previewDbMedia,a.faviconDbMedia,a.headerDbMedia].filter(Boolean);a=a.reduce(function(a,b){a.includes(b.plaintextHash)||a.push(b);return a},[]);a=a.map(function(a){var b=d(\"MAWMediaUtils\").getServerMediaTypeFromMediaType(a.mediaType,\"xma-media\");return p(a.plaintextHash,c,e,b,a.size,f).then(function(b){return{media:a,uploadResult:b}})});return(h||(h=b(\"Promise\"))).all(a)}function s(a,b,c,d,e,f,g,h,i,j,k){return t.apply(this,arguments)}function t(){t=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,c,d,e,f,g,i,j,k,l,m){a=(yield (h||(h=b(\"Promise\"))).all([u(a),u(c),u(d)]));c=a[0];d=a[1];a=a[2];return w(e,c,d,a,f,g,i,j,k,l,m)});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){if(a==null)return a;var b=a.file,e=d(\"MAWFrontendMediaUtils\").getMediaTypeAndServerMediaTypeFromBlob(b.type,!0),f=e.mediaType;e=e.serverMediaType;var g=(yield d(\"MAWMediaUtils\").genBlobHashes(b)),h=g[0];g=g[1];if(f!==\"Image\")throw c(\"err\")(\"Expected Image when sending XMA share\");var i=(yield d(\"WAMediaUtils\").blobToArrayBuffer(b));return{blobArrayBuffer:i,file:b,hashedPlaintextHash:g,mediaInfo:{validatedAudioInfo:null,validatedDocumentFileInfo:null,validatedImageInfo:{height:a.height,width:a.width},validatedVideoInfo:null},mediaType:f,plaintextHash:h,serverMediaType:e}});return v.apply(this,arguments)}function w(a,b,c,e,f,g,h,i,j,k,l){var m;return d(\"MAWIndexedDb\").makeMsgrTransactor({chunk:(m=d(\"MAWTransactionMode\")).READWRITE,media:m.READWRITE,mediaBackup:m.READWRITE,messages:m.READWRITE,unrenderedMessages:m.READWRITE,xma:m.READWRITE},\"saveXMAMediaAndMetadata\",function(m){return function(){var n=new Map();b!=null&&n.set(b.plaintextHash,d(\"MAWMediaManagementTxns\").attachHashAndSaveMedia(m,i,b.blobArrayBuffer,b.plaintextHash,void 0,void 0,b.mediaType,b.mediaInfo,b.file,!0));if(c!=null){var o=n.get(c.plaintextHash);o==null&&n.set(c.plaintextHash,d(\"MAWMediaManagementTxns\").attachHashAndSaveMedia(m,i,c.blobArrayBuffer,c.plaintextHash,void 0,void 0,c.mediaType,c.mediaInfo,c.file,!0))}if(e!=null){o=n.get(e.plaintextHash);o==null&&n.set(e.plaintextHash,d(\"MAWMediaManagementTxns\").attachHashAndSaveMedia(m,i,e.blobArrayBuffer,e.plaintextHash,void 0,void 0,e.mediaType,e.mediaInfo,e.file,!0))}o=Array.from(n.values());return d(\"MAWDexieTable\").dexieAll([d(\"MAWDbMsgTxns\").maybeGetMsg(m,g),d(\"MAWDexieTable\").dexieAll(o)]).then(function(n){var o=n[0];n=n[1];n=n.reduce(function(a,b){return a.set(b.plaintextHash,b)},new Map());var p=b!=null?n.get(b.plaintextHash):void 0,q=c!=null?n.get(c.plaintextHash):void 0,r=e!=null?n.get(e.plaintextHash):void 0,s=d(\"MAWDexieTable\").dexieResolve();return d(\"MAWXMAManagementTxns\").saveXMA(m,p==null?void 0:p.mediaId,q==null?void 0:q.mediaId,r==null?void 0:r.mediaId,f,a,g,i,j,l).then(function(a){d(\"MAWXMAUtils\").isXMAStoryReply(f)&&o!=null?s=x(m,k,a,p,o):d(\"MAWIndexedDb\").afterTransaction({tag:\"NewXMA\",value:d(\"MAWBridgeXMA\").createBridgeXMA(h,p,a)});return s.then(function(){return{faviconDbMedia:r,headerDbMedia:q,previewDbMedia:p}})})})}})()}function x(a,b,e,f,g){var h=d(\"WAJids\").interpretAsUserJid(b);if(h==null)throw c(\"err\")(\"this is a flow check, participant jid can not be null\");var i=e.defaultCTA;i=i==null?void 0:i.nativeUrl;h={author:h,externalId:e.externalId,mediaId:f==null?void 0:f.mediaId,sourceId:i,ts:void 0,type:d(\"MAWMsgType\").MSG_TYPE.XMA,xmaMessageType:e.targetType};f={content:h,remoteJid:b};if(g.type!==d(\"MAWMsgType\").MSG_TYPE.TEXT)throw c(\"err\")(\"flow check, this message type is only in text type\");var j=babelHelpers[\"extends\"]({},g,{quote:f});return a.messages.put(j).then(function(){d(\"MAWIndexedDb\").afterTransaction({tag:\"MsgUpdated\",value:d(\"MAWBridgeMsg\").createBridgeMsg(j)})})}g.sendXMAShareMsg=a}),98);\n__d(\"WASmaxInGroupsIQErrorNotAcceptableMixin\",[\"WAResultOrError\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function h(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"field\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").attrString(a,\"name\");if(!b.success)return b;a=d(\"WASmaxParseUtils\").attrString(a,\"reason\");return!a.success?a:d(\"WAResultOrError\").makeResult({name:b.value,reason:a.value})}function a(a){var b=d(\"WASmaxParseUtils\").assertTag(a,\"error\");if(!b.success)return b;b=d(\"WASmaxParseUtils\").optionalChildWithTag(a,\"field\",h);if(!b.success)return b;var c=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrString,a,\"text\",\"not-acceptable\");if(!c.success)return c;a=d(\"WASmaxParseUtils\").literal(d(\"WASmaxParseUtils\").attrInt,a,\"code\",406);return!a.success?a:d(\"WAResultOrError\").makeResult({text:c.value,code:a.value,field:b.value})}g.parseIQErrorNotAcceptableField=h;g.parseIQErrorNotAcceptableMixin=a}),98);\n__d(\"WASmaxInGroupsSetSubjectClientErrors\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorBadRequestMixin\",\"WASmaxInGroupsIQErrorFallbackClientMixin\",\"WASmaxInGroupsIQErrorForbiddenMixin\",\"WASmaxInGroupsIQErrorItemNotFoundMixin\",\"WASmaxInGroupsIQErrorLockedMixin\",\"WASmaxInGroupsIQErrorNotAcceptableMixin\",\"WASmaxInGroupsIQErrorNotAuthorizedMixin\",\"WASmaxInGroupsIQErrorRateOverlimitMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a){var b=d(\"WASmaxInGroupsIQErrorBadRequestMixin\").parseIQErrorBadRequestMixin(a);if(b.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorBadRequest\",value:b.value});var c=d(\"WASmaxInGroupsIQErrorItemNotFoundMixin\").parseIQErrorItemNotFoundMixin(a);if(c.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorItemNotFound\",value:c.value});var e=d(\"WASmaxInGroupsIQErrorNotAuthorizedMixin\").parseIQErrorNotAuthorizedMixin(a);if(e.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorNotAuthorized\",value:e.value});var f=d(\"WASmaxInGroupsIQErrorForbiddenMixin\").parseIQErrorForbiddenMixin(a);if(f.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorForbidden\",value:f.value});var g=d(\"WASmaxInGroupsIQErrorNotAcceptableMixin\").parseIQErrorNotAcceptableMixin(a);if(g.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorNotAcceptable\",value:g.value});var h=d(\"WASmaxInGroupsIQErrorLockedMixin\").parseIQErrorLockedMixin(a);if(h.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorLocked\",value:h.value});var i=d(\"WASmaxInGroupsIQErrorRateOverlimitMixin\").parseIQErrorRateOverlimitMixin(a);if(i.success)return d(\"WAResultOrError\").makeResult({name:\"IQErrorRateOverlimit\",value:i.value});var j=d(\"WASmaxInGroupsIQErrorFallbackClientMixin\").parseIQErrorFallbackClientMixin(a);return j.success?d(\"WAResultOrError\").makeResult({name:\"IQErrorFallbackClient\",value:j.value}):d(\"WASmaxParseUtils\").errorMixinDisjunction(a,[\"IQErrorBadRequest\",\"IQErrorItemNotFound\",\"IQErrorNotAuthorized\",\"IQErrorForbidden\",\"IQErrorNotAcceptable\",\"IQErrorLocked\",\"IQErrorRateOverlimit\",\"IQErrorFallbackClient\"],[b,c,e,f,g,h,i,j])}g.parseSetSubjectClientErrors=a}),98);\n__d(\"WASmaxInGroupsSetSubjectResponseClientError\",[\"WAResultOrError\",\"WASmaxInGroupsIQErrorResponseMixin\",\"WASmaxInGroupsSetSubjectClientErrors\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxParseUtils\").flattenedChildWithTag(a,\"error\");if(!c.success)return c;a=d(\"WASmaxInGroupsIQErrorResponseMixin\").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d(\"WASmaxInGroupsSetSubjectClientErrors\").parseSetSubjectClientErrors(c.value);return!b.success?b:d(\"WAResultOrError\").makeResult(babelHelpers[\"extends\"]({},a.value,{errorSetSubjectClientErrors:b.value}))}g.parseSetSubjectResponseClientError=a}),98);\n__d(\"WASmaxInGroupsSetSubjectResponseServerError\",[\"WASmaxInGroupsBaseServerErrorMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxInGroupsBaseServerErrorMixin\").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseSetSubjectResponseServerError=a}),98);\n__d(\"WASmaxInGroupsSetSubjectResponseSuccess\",[\"WASmaxInGroupsIQResultResponseMixin\",\"WASmaxParseUtils\"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d(\"WASmaxParseUtils\").assertTag(a,\"iq\");if(!c.success)return c;c=d(\"WASmaxInGroupsIQResultResponseMixin\").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseSetSubjectResponseSuccess=a}),98);\n__d(\"WASmaxOutGroupsSetSubjectChangeSubjectMixin\",[\"WASmaxJsx\",\"WASmaxMixins\"],(function(a,b,c,d,e,f,g){function h(a){a=a.subjectElementValue;a=d(\"WASmaxJsx\").smax(\"iq\",null,d(\"WASmaxJsx\").smax(\"subject\",null,a));return a}function a(a,b){b=h(b);return d(\"WASmaxMixins\").mergeStanzas(a,b)}g.mergeSetSubjectChangeSubjectMixin=a}),98);\n__d(\"WASmaxOutGroupsSetSubjectRequest\",[\"WASmaxJsx\",\"WASmaxOutGroupsBaseSetGroupMixin\",\"WASmaxOutGroupsSetSubjectChangeSubjectMixin\"],(function(a,b,c,d,e,f,g){function a(a){a=d(\"WASmaxOutGroupsSetSubjectChangeSubjectMixin\").mergeSetSubjectChangeSubjectMixin(d(\"WASmaxOutGroupsBaseSetGroupMixin\").mergeBaseSetGroupMixin(d(\"WASmaxJsx\").smax(\"iq\",null),a),a);return a}g.makeSetSubjectRequest=a}),98);\n__d(\"WASmaxGroupsSetSubjectRPC\",[\"WAComms\",\"WASmaxInGroupsSetSubjectResponseClientError\",\"WASmaxInGroupsSetSubjectResponseServerError\",\"WASmaxInGroupsSetSubjectResponseSuccess\",\"WASmaxOutGroupsSetSubjectRequest\",\"WASmaxParsingFailure\",\"WASmaxRpcUtils\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d(\"WASmaxOutGroupsSetSubjectRequest\").makeSetSubjectRequest(a);j.next=3;return b(\"regeneratorRuntime\").awrap(d(\"WAComms\").sendSmaxStanza(e,c));case 3:f=j.sent;g=d(\"WASmaxInGroupsSetSubjectResponseSuccess\").parseSetSubjectResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt(\"return\",{name:\"SetSubjectResponseSuccess\",value:g.value});case 7:h=d(\"WASmaxInGroupsSetSubjectResponseClientError\").parseSetSubjectResponseClientError(f,e);if(!h.success){j.next=10;break}return j.abrupt(\"return\",{name:\"SetSubjectResponseClientError\",value:h.value});case 10:i=d(\"WASmaxInGroupsSetSubjectResponseServerError\").parseSetSubjectResponseServerError(f,e);if(!i.success){j.next=13;break}return j.abrupt(\"return\",{name:\"SetSubjectResponseServerError\",value:i.value});case 13:throw new(d(\"WASmaxParsingFailure\").SmaxParsingFailure)(d(\"WASmaxRpcUtils\").errorMessageRpcParsing(\"SetSubject\",{Success:g,ClientError:h,ServerError:i}));case 14:case\"end\":return j.stop()}},null,this)}g.sendSetSubjectRPC=a}),98);\n__d(\"MAWSetGroupSubject\",[\"MAWGlobals\",\"WALogger\",\"WAResultOrError\",\"WASmaxGroupsSetSubjectRPC\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to change subject: \",\"\"]);h=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"sendSetSubjectRPC\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.group;a=a.subject;b=(yield d(\"WASmaxGroupsSetSubjectRPC\").sendSetSubjectRPC({iqTo:b,subjectElementValue:a}));if(b.name===\"SetSubjectResponseSuccess\")return d(\"WAResultOrError\").makeResult();b.name;d(\"WALogger\").ERROR(h(),b.name);return d(\"WAResultOrError\").makeError(b.name)});return function(b){return a.apply(this,arguments)}}()).end();g.setGroupSubject=a}),98);\n__d(\"MAWUpdateBackupEntFbidForMedia\",[\"LSDataTraceCheckPoint\",\"LSIntEnum\",\"MAWDbMediaTxns\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWJobDefinitions\",\"MAWMediaBackupTxns\",\"MAWMediaManagementTxns\",\"MAWTraceUtils\",\"MAWTransactionMode\",\"Promise\",\"WAJobOrchestratorTypes\",\"WALogger\",\"WAMediaUtils\",\"asyncToGeneratorRuntime\",\"err\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Caught Error in updateBackupEntForFbid job for objectId \",\": \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] media is null for deliveryObjectId provided\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Caught Error in makeMsgrTransactor while updating the media object with fbid \",\": \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] backupEntFbid is empty\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] deliveryObjectId is empty\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Caught Error in updateBackupEntForFbid job for objectId \",\"\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] mediaBackup is null for deliveryObjectId provided\"]);p=function(){return a};return a}var q=d(\"MAWIndexedDb\").makeMsgrTransactor({media:d(\"MAWTransactionMode\").READWRITE,mediaBackup:d(\"MAWTransactionMode\").READWRITE},\"updateBackupEntFbidInMediaBackup\",function(a){return function(b,c,d){return r(a,b,c,d)}});function r(a,b,e,f){return d(\"MAWDbMediaTxns\").maybeGetMediaBackupRowFromObjectId(a,b).then(function(g){if(g==null){d(\"WALogger\").ERROR(p());throw c(\"err\")(\"mediaBackup is null for deliveryObjectId provided\")}return d(\"MAWDbMediaTxns\").maybeGetMediaFromMediaId(a,g.mediaId).then(function(c){if(c!=null){var f=d(\"MAWMediaManagementTxns\").updateBackupFbidInMediaEntries(c,b,e);f=babelHelpers[\"extends\"]({},c,{fbid:e,mediaEntries:f});return a.media.update(f.mediaId,f).then(function(){if(c.msgIds.length>0)return d(\"MAWMediaBackupTxns\").linkMediaBackup(a,c.mediaId,g.msgId,b,e)})}})[\"catch\"](function(a){d(\"WALogger\").ERROR(o(),a),d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(f,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_FAILURE),[],\"Caught Error in updateBackupEntForFbid job\")}).then(function(){})})}function s(a,e,f){if(a==null||a.length===0){d(\"WALogger\").ERROR(n());d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(f,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_FAILURE),[],\"deliveryObjectId is empty\");return(h||(h=b(\"Promise\"))).reject(c(\"err\")(\"deliveryObjectId is empty\"))}if(e==null||e.length===0){d(\"WALogger\").ERROR(m());d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(f,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_FAILURE),[],\"backupEntFbid is empty\");return(h||(h=b(\"Promise\"))).reject(c(\"err\")(\"backupEntFbid is empty\"))}if(c(\"gkx\")(\"23919\"))if(a!=null&&e!=null)return q(a,e,f);else return(h||(h=b(\"Promise\"))).resolve();else return d(\"MAWIndexedDb\").makeMsgrTransactor({media:d(\"MAWTransactionMode\").READWRITE,mediaBackup:d(\"MAWTransactionMode\").READONLY},\"updateBackupEntFbid\",function(b){return function(){return d(\"MAWDbMediaTxns\").maybeGetMediaFromObjectId(b,a).then(function(g){if(g!=null){var h=d(\"MAWMediaManagementTxns\").updateBackupFbidInMediaEntries(g,a,e);g=babelHelpers[\"extends\"]({},g,{fbid:e,mediaEntries:h});return b.media.update(g.mediaId,g)[\"catch\"](function(a){d(\"WALogger\").ERROR(l(),e,a),d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(f,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_FAILURE),[],\"Caught Error in makeMsgrTransactor while updating the media object with fbid\")}).then(function(){})}else{d(\"WALogger\").ERROR(k());throw c(\"err\")(\"media is null for deliveryObjectId provided\")}})[\"catch\"](function(b){d(\"WALogger\").ERROR(j(),a,b),d(\"MAWTraceUtils\").recordFailureAndFlushForTraceId(f,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").LABYRINTH_MEDIA_BACKUP_FAILURE),[],\"Caught Error in updateBackupEntForFbid job\")})}})()}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"writeToDb\",function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.backupEntFbid,c=a.deliveryObjectId;a=a.traceId;yield s(d(\"WAMediaUtils\").stringToDeliveryObjectId(c),d(\"WAMediaUtils\").stringToBackupEntFbid(b));yield d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").createStartJobInfo(\"backupMessageWithMedia\",{backupEntFbid:b,deliveryObjectId:c,scheduleConfig:{priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.LOW},traceId:a}))});return function(b){return a.apply(this,arguments)}}()).end();g.updateBackupEntFbidInMediaBackupTxn=r;g.updateBackupEntFbid=s;g.updateBackupEntFbidForMedia=a}),98);\n__d(\"MAWUploadRetroactiveMessageBatch\",[\"MAWGlobals\",\"MAWUploadRetroactiveMessageBatchApi\",\"WALogger\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"cannot upload retroactive message batch - null dbMsgArray\"]);h=function(){return a};return a}a=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"uploadRetroactiveMessageBatch\",function(a){var b=a.chatId;a=a.dbMsgArray;a!=null?c(\"promiseDone\")(d(\"MAWUploadRetroactiveMessageBatchApi\").uploadRetroactiveMessageBatch(b,a)):d(\"WALogger\").ERROR(h())}).end();g.uploadRetroactiveMessageBatch=a}),98);\n__d(\"MAWUploadRetroactiveThreadsAndMessages\",[\"MAWDbMsgTxns\",\"MAWDbThreadTxns\",\"MAWDexieTable\",\"MAWEBSwitch\",\"MAWGlobals\",\"MAWIndexedDb\",\"MAWJobDefinitions\",\"MAWTransactionMode\",\"Promise\",\"WALogger\",\"gkx\",\"promiseDone\",\"setTimeout\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] The user is not eligible for EB\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Retroactive backups failed - no threads containing messages to upload\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Initiating job: upload retroactive backups\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] thread.newestMsg is null - retroactive message uploads for thread \",\" cannot proceed\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Unknown error with retroactive uploads}\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Error with retroactive uploads, err: \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] thread.newestMsg is null - retroactive message uploads for thread \",\" cannot proceed\"]);o=function(){return a};return a}var p=50,q=200,r=new Map(),s=new Map(),t=new Map();function u(a,b,c,e){return d(\"MAWDbMsgTxns\").getMsgsFromOffset(a,b.chatId,e,p,c,!1).then(function(c){var e;c=c.msgs;(e=r.get(b.chatId))==null?void 0:e.push(c);return c.length===p?u(a,b,!1,c[c.length-1].msgId):d(\"MAWDexieTable\").dexieResolve()})}function v(a,b){var e=r.get(b);if(e!=null){var f=e[a];c(\"promiseDone\")(d(\"MAWGlobals\").getJobManager().waitUntilPersisted(d(\"MAWJobDefinitions\").jobSerializers.uploadRetroactiveMessageBatch(f,void 0,void 0,b)));a<e.length-1&&c(\"setTimeout\")(function(){return v(a+1,b)},q)}}function w(a,b,e){if(e!=null)return u(a,b,!0,e).then(function(){c(\"setTimeout\")(function(){return v(0,b.chatId)},q);return d(\"MAWDexieTable\").dexieResolve()});else{d(\"WALogger\").ERROR(o(),b.chatId);return d(\"MAWDexieTable\").dexieResolve()}}function x(a){return d(\"MAWDbThreadTxns\").getAllThreadsForUser(a,d(\"MAWGlobals\").getMyUserJid()).then(function(a){a.forEach(function(a){r.set(a.chatId,[]),s.set(a.chatId,a),t.set(a.chatId,a.newestMsg)});return a})[\"catch\"](function(a){a instanceof Error?d(\"WALogger\").ERROR(n(),a):d(\"WALogger\").ERROR(m())})}var y=d(\"MAWIndexedDb\").makeMsgrTransactor({participants:(a=d(\"MAWTransactionMode\")).READONLY,threads:a.READONLY},\"getBackupThreads\",function(a){return function(){return x(a)}});function z(a,b){return a.retroactiveBackupsState.count().then(function(c){if(c===0){var e=[];b.forEach(function(a){a.newestMsg!=null?e.push({msgId:a.newestMsg,threadId:a.chatId}):d(\"WALogger\").ERROR(l(),a.chatId)});return a.retroactiveBackupsState.bulkAdd(e).then(function(){})}else{var f=[];return a.retroactiveBackupsState.each(function(a){f.push(a.threadId),t.set(a.threadId,a.msgId)}).then(function(){var a=[];r.forEach(function(b,c){f.includes(c)||a.push(c)});a.forEach(function(a){r[\"delete\"](a),s[\"delete\"](a),t[\"delete\"](a)})})}})}var A=d(\"MAWIndexedDb\").makeMsgrTransactor({media:a.READONLY,messages:a.READONLY,participants:a.READONLY,reactions:a.READONLY,threads:a.READONLY,xma:a.READONLY},\"uploadBackupMessagesForThread\",function(a){return function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return w.apply(void 0,[a].concat(c))}}),B=d(\"MAWIndexedDb\").makeMsgrTransactor({retroactiveBackupsState:a.READWRITE},\"writeRetroactiveBackupsState\",function(a){return function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return z.apply(void 0,[a].concat(c))}});e=d(\"MAWGlobals\").getPersistedJobsApi().definePersistedJob().finalStep(\"uploadAllThreadsAndMessages\",function(){d(\"WALogger\").LOG(k());if(c(\"gkx\")(\"23914\")){c(\"MAWEBSwitch\").set(!0);return y().then(function(a){if(a!=null)return B(a).then(function(){s.forEach(function(a,b){a=s.get(b);a!=null&&c(\"promiseDone\")(A(a,t.get(b)))})});else{d(\"WALogger\").ERROR(j());return(h||(h=b(\"Promise\"))).resolve()}})}else{d(\"WALogger\").WARN(i());return(h||(h=b(\"Promise\"))).resolve()}}).end();g.uploadRetroactiveThreadsAndMessages=e}),98);\n__d(\"WAPushNotificationsSetup\",[\"WADeprecatedSendIq\",\"WADeprecatedWapParser\",\"WAWap\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=new(c(\"WADeprecatedWapParser\"))(\"pushResult\",function(a){a.assertAttr(\"type\",\"result\")});function a(a,b,c){var e;return d(\"WADeprecatedSendIq\").deprecatedSendIq((e=d(\"WAWap\")).wap(\"iq\",{id:e.generateId(),to:e.S_WHATSAPP_NET,type:\"set\",xmlns:\"urn:xmpp:whatsapp:push\"},e.wap(\"config\",{appid:e.CUSTOM_STRING(a),deviceid:e.CUSTOM_STRING(b),platform:e.CUSTOM_STRING(c)})),h)}g.setupPushNotifications=a}),98);\n__d(\"WASendPushNotificationConfig\",[\"WAJobs\",\"WALogger\",\"WAPushNotificationsSetup\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Push notification setup failed\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"sendPushNotificationSetup\"]);i=function(){return a};return a}a=d(\"WAJobs\").getPersistedJobsApi().definePersistedJob().finalStep(\"sendPushNotificationSetup\",function(a){var c,e,f,g;return b(\"regeneratorRuntime\").async(function(j){while(1)switch(j.prev=j.next){case 0:c=a.appId,e=a.deviceId,f=a.platform;d(\"WALogger\").LOG(i());j.next=4;return b(\"regeneratorRuntime\").awrap(d(\"WAPushNotificationsSetup\").setupPushNotifications(c,e,f));case 4:g=j.sent,g.success||d(\"WALogger\").ERROR(h());case 6:case\"end\":return j.stop()}},null,this)}).end();g.sendPushNotificationSetup=a}),98);\n__d(\"MAWJobHandlers\",[\"MAWAcceptGroupInvite\",\"MAWAddGroupParticipants\",\"MAWBackupMessageWithMedia\",\"MAWCreateGroup\",\"MAWCreateJobNotImplemented\",\"MAWDeleteGroups\",\"MAWDeleteMsgsForMe\",\"MAWDeleteThread\",\"MAWDemoteGroupParticipants\",\"MAWDownloadAndHandleMedia\",\"MAWDownloadAndRestoreMedia\",\"MAWForwardMsg\",\"MAWGetCurrentUserDeviceList\",\"MAWGetSpams\",\"MAWHandleFutureProofMsg\",\"MAWHandleSpamMsg\",\"MAWLeaveGroups\",\"MAWMarkThreadAsRead\",\"MAWPromoteGroupParticipants\",\"MAWRemoveGroupParticipants\",\"MAWReportUserSpam\",\"MAWRerevokePendingStanzas\",\"MAWResendWrittenAppData\",\"MAWRestoreMessagesFromEncryptedBackups\",\"MAWRestoreProtobufsFromEncryptedBackups\",\"MAWRevokeMsg\",\"MAWSendAppData\",\"MAWSendEditMsg\",\"MAWSendEphemeralSettingMsg\",\"MAWSendGroupInviteMsg\",\"MAWSendMediaMsg\",\"MAWSendMsg\",\"MAWSendRavenActionMsg\",\"MAWSendReactionMsg\",\"MAWSendWrittenAppData\",\"MAWSendWrittenMsg\",\"MAWSendXMAShareMsg\",\"MAWSetGroupSubject\",\"MAWUpdateBackupEntFbidForMedia\",\"MAWUploadMessagesBackup\",\"MAWUploadRetroactiveMessageBatch\",\"MAWUploadRetroactiveThreadsAndMessages\",\"MAWUploadRetryStatusUtil\",\"WAComputeAndUploadICDCInfo\",\"WAGenerateAndUploadPreKeys\",\"WAGetDevices\",\"WANotifyDeviceChange\",\"WAQueryGroups\",\"WARemoveDevice\",\"WARequestPreKeyDigest\",\"WARotateSignedPreKey\",\"WASendPushNotificationConfig\",\"WASyncAbProps\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return{acceptGroupInvite:d(\"MAWAcceptGroupInvite\").acceptGroupInvite,addGroupParticipants:d(\"MAWAddGroupParticipants\").addGroupParticipants,backupMessageWithMedia:d(\"MAWBackupMessageWithMedia\").backupMessageWithMedia,computeAndUploadICDCInfo:d(\"WAComputeAndUploadICDCInfo\").computeAndUploadICDCInfo,createGroup:d(\"MAWCreateGroup\").createGroup,deleteGroups:d(\"MAWDeleteGroups\").deleteGroups,deleteMsgsForMe:d(\"MAWDeleteMsgsForMe\").deleteMsgsForMe,deleteThread:d(\"MAWDeleteThread\").deleteThread,demoteGroupParticipants:d(\"MAWDemoteGroupParticipants\").demoteGroupParticipants,downloadAndHandleMedia:d(\"MAWDownloadAndHandleMedia\").downloadAndHandleMedia,downloadAndRestoreMedia:d(\"MAWDownloadAndRestoreMedia\").downloadAndRestoreMedia,forwardMsg:d(\"MAWForwardMsg\").forwardMsg,generateAndUploadPreKeys:d(\"WAGenerateAndUploadPreKeys\").generateAndUploadPreKeys,getCurrentUserDeviceList:d(\"MAWGetCurrentUserDeviceList\").getCurrentUserDeviceList,getDevices:d(\"WAGetDevices\").getDevices,getSpams:d(\"MAWGetSpams\").getSpams,handleFutureproofMsg:d(\"MAWHandleFutureProofMsg\").handleFutureproofMsg,handleSpamMsg:d(\"MAWHandleSpamMsg\").handleSpamMsg,igdReportUserSpam:[],igdSendMsg:[],leaveGroups:d(\"MAWLeaveGroups\").leaveGroups,markThreadAsRead:d(\"MAWMarkThreadAsRead\").markThreadAsRead,notifyDeviceChange:d(\"WANotifyDeviceChange\").notifyDeviceChange,postBackupWriteCompletionHook:d(\"MAWUploadRetryStatusUtil\").postBackupWriteCompletionHook,promoteGroupParticipants:d(\"MAWPromoteGroupParticipants\").promoteGroupParticipants,queryGroups:d(\"WAQueryGroups\").queryGroups,removeDevice:d(\"WARemoveDevice\").removeDeviceJob,removeGroupParticipants:d(\"MAWRemoveGroupParticipants\").removeGroupParticipants,reportUserSpam:d(\"MAWReportUserSpam\").reportUserSpam,requestAllSyncdMissingKeys:[],requestPreKeyDigest:d(\"WARequestPreKeyDigest\").requestPreKeyDigest,rerevokeMsgs:d(\"MAWRerevokePendingStanzas\").rerevokeMsgs,resendWrittenAppData:d(\"MAWResendWrittenAppData\").resendWrittenAppData,restoreMessagesFromEncryptedBackups:d(\"MAWRestoreMessagesFromEncryptedBackups\").restoreMessagesFromEncryptedBackups,restoreProtobufsFromEncryptedBackups:d(\"MAWRestoreProtobufsFromEncryptedBackups\").restoreProtobufsFromEncryptedBackups,revokeMsgs:d(\"MAWRevokeMsg\").revokeMsgs,rotateSignedPreKey:d(\"WARotateSignedPreKey\").rotateSignedPreKey,sendAppData:d(\"MAWSendAppData\").sendAppData,sendEditMsg:d(\"MAWSendEditMsg\").sendEditMsg,sendEphemeralSettingMsg:d(\"MAWSendEphemeralSettingMsg\").sendEphemeralSettingMsg,sendGroupInviteMsg:d(\"MAWSendGroupInviteMsg\").sendGroupInviteMsg,sendMediaMsg:d(\"MAWSendMediaMsg\").sendMediaMsg,sendMsg:d(\"MAWSendMsg\").sendMsg,sendPushNotificationSetup:d(\"WASendPushNotificationConfig\").sendPushNotificationSetup,sendRavenActionMsg:d(\"MAWSendRavenActionMsg\").sendRavenActionMsg,sendReactionMsg:d(\"MAWSendReactionMsg\").sendReactionMsg,sendWrittenAppData:d(\"MAWSendWrittenAppData\").sendWrittenAppData,sendWrittenMsg:d(\"MAWSendWrittenMsg\").sendWrittenMsg,sendXMAShareMsg:d(\"MAWSendXMAShareMsg\").sendXMAShareMsg,setGroupSubject:d(\"MAWSetGroupSubject\").setGroupSubject,startInstamadilloDYI:d(\"MAWCreateJobNotImplemented\").createNotImplementedJob(\"startInstamadilloDYI\"),syncAbProps:d(\"WASyncAbProps\").syncAbProps,syncdSyncAllCollections:[],updateBackupEntFbidForMedia:d(\"MAWUpdateBackupEntFbidForMedia\").updateBackupEntFbidForMedia,uploadMessagesBackup:d(\"MAWUploadMessagesBackup\").uploadMessagesBackup,uploadRetroactiveMessageBatch:d(\"MAWUploadRetroactiveMessageBatch\").uploadRetroactiveMessageBatch,uploadRetroactiveThreadsAndMessages:d(\"MAWUploadRetroactiveThreadsAndMessages\").uploadRetroactiveThreadsAndMessages}}g.getJobHandlers=a}),98);\n__d(\"MAWBackend\",[\"MAWAbProps\",\"MAWBridge\",\"MAWCOP\",\"MAWComms\",\"MAWDebug\",\"MAWDebugDefineFunctions\",\"MAWDefinePersistedJob\",\"MAWDeleteExpiredMsgsApi\",\"MAWDeleteForMeMsgContentCleaner\",\"MAWDyiBatchRestoreDataSync\",\"MAWEbRestoreQueue\",\"MAWEbUploadQueue\",\"MAWEphemeralCleaner\",\"MAWExpiredXMACleaner\",\"MAWExternalId\",\"MAWFTSDataSync\",\"MAWGetWorkerStatusApi\",\"MAWGlobals\",\"MAWJobHandlers\",\"MAWMailboxUploadDataSync\",\"MAWMessageReceiveReliabilityLogger\",\"MAWMockServerShell\",\"MAWPREListeners\",\"MAWPendingStanzaCleaner\",\"MAWPersistedQueueApi\",\"MAWRunInTransaction\",\"MAWSentBytesCacheApi\",\"MAWSharedEbUploadQueue\",\"MAWSharedOfflineResumeStats\",\"MAWSharedOfflineResumeUINotifier\",\"MAWTaskDefinitions\",\"MAWUnsendMsgContentCleaner\",\"Promise\",\"WAArrayBufferUtils\",\"WACryptoManager\",\"WACryptoManagerUtils\",\"WADanglingQueue\",\"WADebugTools\",\"WADeviceNotificationFlushable\",\"WADevicesState\",\"WAErr\",\"WAFetchAndSaveDevices\",\"WAGetClockSkewApi\",\"WAICDCUtils\",\"WAJids\",\"WAMessageLoggingPublisher\",\"WAOfflineUtils\",\"WAOneQueue\",\"WAPassiveMode\",\"WAPersistedJobManagerV2\",\"WAProtocolQueue\",\"WAResolvable\",\"WAScheduleAfterOfflineResume\",\"WASentBytesCache\",\"WATagsLogger\",\"WATimeUtils\",\"asyncToGeneratorRuntime\",\"gkx\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Worker inited\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[S406998] Invalid userJid reason: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"deviceJid: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"initWAInfra\"]);l=function(){return a};return a}b(\"MAWDebug\");var m=d(\"WATagsLogger\").TAGS([\"backend\"]);function a(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,e,f,g,n){m.LOG(l());m.LOG(k(),a.deviceJid);var o=new(d(\"WAResolvable\").Resolvable)(),p=new(d(\"WAResolvable\").Resolvable)(),q=d(\"WACryptoManagerUtils\").createCryptoManager(g.crypto);d(\"WADevicesState\").initDevicesState({fetchAndSaveDevices:function(a,b,c){for(var e of a)d(\"MAWExternalId\").isStnazaId(d(\"WAJids\").userIdFromJid(e))&&m.ERROR(j(),b);return d(\"WAFetchAndSaveDevices\").fetchAndSaveDevicesWithResults(new Set(a),c)}});var r=new(d(\"WAPersistedJobManagerV2\").PersistedJobManager)({accessors:g.jobPersistenceAccessors,deprecatedJobs:{removeCurrentDevice:\"NOOP\"},isRestartAfterCrash:!1,listeners:{onJobFinished:function(a,b,c,e){d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"onJobFinished\",{id:a,originalArgs:c,result:e,type:b},!0);return null},onJobStarted:function(){}},offlineQueueCompletePromise:p,unfinishedJobEntries:o.promise.then(function(){return g.jobPersistenceAccessors.loadAllJobs()})});d(\"MAWMessageReceiveReliabilityLogger\").subscribeToIncomingMessageEvents(d(\"WAMessageLoggingPublisher\").messageLoggingPublisher);var s=d(\"WAProtocolQueue\").initProtocolQueue(d(\"MAWPersistedQueueApi\").dexieApiForPersistedQueue()),t=new(d(\"WAOneQueue\").WAOneQueue)({cryptoManager:q.manager,flushables:[d(\"WAICDCUtils\").icdcFlushable,d(\"WADeviceNotificationFlushable\").deviceNotificationFlushable,d(\"WAProtocolQueue\").protocolQueueFlushable(s),d(\"WACryptoManager\").cryptoManagerFlushable(q.manager)],mode:d(\"WAOfflineUtils\").ServerRPCMode.INIT});d(\"MAWCOP\").cop.subscribeToOfflineQueue(t,s);d(\"WADanglingQueue\").initDanglingQueue(d(\"MAWPersistedQueueApi\").dexieApiForPersistedQueue());d(\"MAWEbRestoreQueue\").initEbRestoreQueue();d(\"MAWSharedEbUploadQueue\").initEbUploadQueue();d(\"MAWGlobals\").setGlobals({activeThreadKey:null,config:n,crypto:q,db:g.dbCallbacks,dependencies:{generateExternalId:d(\"MAWExternalId\").generateExternalId},fbCat:d(\"WAArrayBufferUtils\").stringToArrayBuffer(a.fbCat),hmacKey:e,jidUtils:g.jidUtils,jobResultConverter:g.jobResultConverters,myJids:{deviceJid:a.deviceJid,userJid:a.userJid},offlineResumeStats:new(d(\"MAWSharedOfflineResumeStats\").MAWSharedOfflineResumeStats)(t,d(\"WAPassiveMode\").passiveModeNotifier,d(\"MAWCOP\").cop,d(\"WAMessageLoggingPublisher\").messageLoggingPublisher),persistedJobs:{api:g.persistedJobs,manager:r},runInTransaction:d(\"MAWRunInTransaction\").runInTransaction,waOneQueue:t});d(\"MAWSharedOfflineResumeUINotifier\").offlineResumeUINotifier.subscribeToWAEvents(t);d(\"MAWSharedOfflineResumeUINotifier\").offlineResumeUINotifier.subscribeToMawEvents(d(\"MAWCOP\").cop);d(\"MAWSharedOfflineResumeUINotifier\").offlineResumeUINotifier.subscribeToMessageEvents(d(\"WAMessageLoggingPublisher\").messageLoggingPublisher);d(\"MAWEphemeralCleaner\").startEphemeralCleaner({backendFns:{getNextTs:g.dbCallbacks.getNextDeletionTs,purgeEnabled:function(){return!0},removeExpired:function(){return d(\"MAWDeleteExpiredMsgsApi\").deleteExpiredMsgs().then(function(a){return a.length>0?d(\"MAWDeleteExpiredMsgsApi\").deleteReceipts(a).then(function(){return a.length}):a.length})}},uiFns:{getNextTs:g.dbCallbacks.getNextExpirationTs,purgeEnabled:function(){return!0},removeExpired:g.dbCallbacks.removeExpiredMsgsFromUI}});d(\"MAWUnsendMsgContentCleaner\").startUnsendMsgContentCleaner({getNextTs:g.dbCallbacks.getNextDeleteUnsendContentTs,purgeEnabled:function(){return!0},removeExpired:g.dbCallbacks.removeExpiredUnsendMsgsContent});d(\"MAWDeleteForMeMsgContentCleaner\").startDeleteForMeMsgContentCleaner({getNextTs:g.dbCallbacks.getNextDeleteDFMContentTs,purgeEnabled:function(){return!0},removeExpired:g.dbCallbacks.removeExpiredDFMMsgsContent});d(\"MAWPendingStanzaCleaner\").startPendingStanzaCleaner({getNextTs:g.dbCallbacks.getNextDeletePendingStanzaTs,purgeEnabled:function(){return!0},removeExpired:g.dbCallbacks.removeExpiredPendingStanzas});d(\"MAWExpiredXMACleaner\").startExpiredXMACleaner({getNextTs:g.dbCallbacks.getNextExpiredXMATs,purgeEnabled:function(){return!0},removeExpired:g.dbCallbacks.removeExpiredXMAMsgsContent});d(\"MAWDefinePersistedJob\").setMsgrJobImplementations(d(\"MAWJobHandlers\").getJobHandlers());d(\"WAScheduleAfterOfflineResume\").scheduleAfterOfflineResume({code:function(){p.resolve();return(h||(h=b(\"Promise\"))).resolve()},id:\"task-scheduler\"});d(\"MAWMockServerShell\").isMockServerMode||c(\"promiseDone\")(o.promise.then(function(){return d(\"MAWTaskDefinitions\").registerTasks(p.promise)}));f.setHandlers(\"backend\",babelHelpers[\"extends\"]({},g.bridgeHandlers,{initMockServer:function(a){return d(\"MAWMockServerShell\").getMockServer==null?(h||(h=b(\"Promise\"))).reject(\"Mock server is not available. Make sure you use worker v2\"):d(\"MAWMockServerShell\").getMockServer().init(a)},runJobFireAndForget:function(a){return o.promise.then(function(){return r.fireAndForget(a)})},runJobWaitUntilCompleted:function(a){return o.promise.then(function(){return r.waitUntilCompleted(a)})},runJobWaitUntilPersisted:function(a){return o.promise.then(function(){return r.waitUntilPersisted(a)})},runMock:function(a){return d(\"MAWMockServerShell\").getMockServer==null?(h||(h=b(\"Promise\"))).reject(\"Mock server is not available. Make sure you use worker v2\"):d(\"MAWMockServerShell\").getMockServer().runMock(a)},setMockVariables:function(a){if(d(\"MAWMockServerShell\").getMockServer==null)throw c(\"WAErr\")(\"Mock server is not available. Make sure you use worker v2\");d(\"MAWMockServerShell\").getMockServer().setVariables(a.variables)}}));d(\"MAWPREListeners\").initializeWAPREMetrics();c(\"promiseDone\")(d(\"MAWFTSDataSync\").initFTS());d(\"MAWMailboxUploadDataSync\").initMailboxUpload();d(\"MAWDyiBatchRestoreDataSync\").initDyiBatchUpload();s=(yield d(\"WAGetClockSkewApi\").getClockSkew());n=s.clockSkew;d(\"WATimeUtils\").setClockSkew(n);yield d(\"MAWAbProps\").initAbProps();c(\"gkx\")(\"23903\")&&d(\"WADebugTools\").initDebugFunctions(d(\"MAWDebugDefineFunctions\").getAllDebugFunctions());return d(\"MAWComms\").startComms(a.regInfo,t).then(function(){d(\"WASentBytesCache\").initSentBytesCache(d(\"MAWSentBytesCacheApi\").sentBytesCacheApi)}).then(function(){m.LOG(i());d(\"MAWGetWorkerStatusApi\").updateWorkerStatus(\"success\");return o.resolve()}).then(function(){d(\"MAWEbUploadQueue\").listenForEbUploadQueueFlush()})});return n.apply(this,arguments)}g.startMAWBackend=a}),98);\n__d(\"MAWSignalIndexedDb\",[\"MAWCurrentUser\",\"MAWErrorObject\",\"MAWExceededStorageQuota\",\"MAWGetWorkerStatusApi\",\"MAWIndexedDbMetadata\",\"MAWLowLevelApiTypes\",\"MAWQplProxy\",\"MAWTransactionMode\",\"Promise\",\"WALogger\",\"WAWorkerGlobalScope\",\"err\",\"promiseDone\",\"qex\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[SignalDb initialization] upgradeneeded is triggered in another worker. This should not happen.\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[JOB] Setting up the jobs database\"]);j=function(){return a};return a}var k=null,l=null,m=\"jobs\";function n(){return c(\"qex\")._(\"940\")}function o(){if(k==null)throw c(\"err\")(\"SignalDB IndexDB should've been initialized\");return k}function p(){if(l==null)throw c(\"err\")(\"SignalDB IndexDB should've been initialized\");return l.then(function(){return o()})}function a(){return k!=null}var q=[function(a){a=a.target.result;a=a.createObjectStore(m,{autoIncrement:!0,keyPath:\"jobId\"});a.createIndex(\"uniqKey\",\"uniqKey\")},function(){},function(){}];function e(a){l=null;k=null;return r(a).then(function(){return k.version})}function r(a){if(l!=null)return l;if(k!=null)return(h||(h=b(\"Promise\"))).resolve();var c=d(\"MAWCurrentUser\").getID(),e=d(\"MAWIndexedDbMetadata\").signalDbName(c),f=(a=(c=a)!=null?c:n())!=null?a:q.length;d(\"MAWGetWorkerStatusApi\").setDatabaseStatus(e,d(\"MAWLowLevelApiTypes\").DatabaseState.Initializing);d(\"MAWGetWorkerStatusApi\").setDatabaseApi(e,\"native\");l=new(h||(h=b(\"Promise\")))(function(a,b){d(\"WALogger\").LOG(j());var c=indexedDB.open(e,f);c.onupgradeneeded=function(a){d(\"MAWGetWorkerStatusApi\").setDatabaseStatus(e,d(\"MAWLowLevelApiTypes\").DatabaseState.Upgrading);for(var b=0;b<q.length;b++){var c=q[b],f=b+1;s(a,f)&&c(a)}};c.onsuccess=function(b){var c=b.target.result;d(\"MAWGetWorkerStatusApi\").setDatabaseStatus(e,d(\"MAWLowLevelApiTypes\").DatabaseState.Open);c.onversionchange=function(){var a;d(\"WALogger\").ERROR(i());c.close();(a=d(\"WAWorkerGlobalScope\").workerGlobalScope.location)==null?void 0:a.reload==null?void 0:a.reload()};k=c;a()};c.onerror=function(){d(\"MAWGetWorkerStatusApi\").setDatabaseStatus(e,d(\"MAWLowLevelApiTypes\").DatabaseState.Error),b(c.error)}});return l}function s(a,b){var c=a.newVersion;a=a.oldVersion;return a<b&&c>=b}function t(a){return a===d(\"MAWTransactionMode\").READWRITE?\"readwrite\":\"readonly\"}function f(a,b,e,f){var g=t(b);return function(b){return function(){for(var h=arguments.length,i=new Array(h),j=0;j<h;j++)i[j]=arguments[j];var m=f!=null?d(\"MAWQplProxy\").startQplUserFlow(f):null,n=function f(h){return p().then(function(c){var e=function(b){b=c.transaction(a,b!=null?t(b):g,{durability:\"relaxed\"});d(\"MAWExceededStorageQuota\").listenToQuotaExceededError(b);return b.objectStore(a)};return b.apply(void 0,[e].concat(i))}).then(function(a){m==null?void 0:m.endSuccess();return a})[\"catch\"](function(b){m==null?void 0:m.endFail(\"job_transaction_fail\");b=d(\"MAWErrorObject\").getErrorObject(b);if((b==null?void 0:b.name)===\"InvalidStateError\"&&h===1){l=null;k=null;c(\"promiseDone\")(r());return f(h-1)}throw c(\"unrecoverableViolation\")(e+\":\"+a+\" - Error performing transaction in signalDB transactor v2\",\"messenger_e2ee_web\",b?{error:b}:{})})};return n(1)}}}g.getSignalDbVersion=n;g.getSignalDB=o;g.isSignalDBInitted=a;g.dbMigrations=q;g.makeSignalDbIgnoringPreviousCreations=e;g.makeSignalDB=r;g.makeSignalMsgrTransactor=f}),98);\n__d(\"MAWMediaSizeCheck\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a>100*1024}f.isMinSizeForImagePreviewGeneration=a}),66);\n__d(\"MAWOptimisticUploadMedia\",[\"MAWFrontendMediaUtils\",\"MAWGlobals\",\"MAWMediaSizeCheck\",\"MAWMediaUtils\",\"MAWOptimisticUploadManager\",\"MAWStartMediaUploaQplFlow\",\"WALogger\",\"WAMediaCrypto\",\"WAMediaUtils\",\"WAResultOrError\",\"WAUploadMedia\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"optimisticUploadMedia: fileUploadResult success, setting with previewPlaintextHash\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"optimisticUploadMedia: previewUploadResult success\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"optimisticUploadMedia: preview uploading\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"optimisticUploadMedia: thumbnail_exists: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"optimisticUploadMedia: File is already being uploaded\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"optimisticUploadMedia: fileUploadResult success\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"optimisticUploadMedia: file uploading\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Expected chatJid in optimisticUploadMedia\"]);o=function(){return a};return a}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){var e=(yield d(\"MAWMediaUtils\").hashBlob(a));e=d(\"WAMediaUtils\").toPlaintextHash(e);var f=d(\"MAWOptimisticUploadManager\").getOptimisticUploadManager();f=f.get(e);if(f!=null)return d(\"WAResultOrError\").makeError(\"already_uploading\");if(b==null){d(\"WALogger\").ERROR(o());return d(\"WAResultOrError\").makeError(\"missing_chat_jid\")}f=c.type===\"regular\"?c.mediaType:\"preview\";var g=(yield d(\"MAWStartMediaUploaQplFlow\").startMediaUploaQplFlow({chatJid:b,fileSize:a.size,serverMediaType:f,uploadEntry:\"optimisticUploadMedia\"}));b=d(\"WAUploadMedia\").uploadMedia({chatJid:b,filename:f===\"document\"?a.name:void 0,hash:e,mediaTypeDetails:c,protocolMsgId:null,size:a.size,uploadMediaFlow:g});return d(\"WAResultOrError\").makeResult({plaintextHash:e,uploadPromise:b})});return q.apply(this,arguments)}function a(a){return r.apply(this,arguments)}function r(){r=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=a.file,c=a.threadId;a=a.thumbnail;var e=d(\"MAWOptimisticUploadManager\").getOptimisticUploadManager();c=(yield d(\"MAWGlobals\").getDbImpls().getThreadJidByChatId(c));var f=d(\"MAWFrontendMediaUtils\").getMediaTypeAndServerMediaTypeFromBlob(b.type);f=f.serverMediaType;d(\"WALogger\").LOG(n());var g=(yield p(b,c,{mediaType:f,type:\"regular\"}));if(g.success===!0)d(\"WALogger\").LOG(m()),e.set(g.value.plaintextHash,{file:b,optimisticUploadPromise:g.value.uploadPromise,previewPlaintextHash:null});else{var o=g.error;switch(o){case\"already_uploading\":d(\"WALogger\").LOG(l());break;case\"missing_chat_jid\":break}}o=null;d(\"WALogger\").LOG(k(),a!=null);if(a&&s(f,b.size)){d(\"WALogger\").LOG(j());c=(yield p(a,c,{messageType:d(\"WAMediaCrypto\").convertServerMediaTypeToPreviewMediaType(f),type:\"preview\"}));c.success===!0&&(d(\"WALogger\").LOG(i()),o=c.value.plaintextHash,e.set(c.value.plaintextHash,{file:a,optimisticUploadPromise:c.value.uploadPromise}),g.success===!0&&(d(\"WALogger\").LOG(h()),e.set(g.value.plaintextHash,{file:b,optimisticUploadPromise:g.value.uploadPromise,previewPlaintextHash:o})))}});return r.apply(this,arguments)}function s(a,b){if(a!==\"image\")return!0;a;return d(\"MAWMediaSizeCheck\").isMinSizeForImagePreviewGeneration(b)}g.optimisticUploadMedia=a;g.shouldUploadPreview=s}),98);\n__d(\"MAWLowLevelApiImpl\",[\"MAWBulkSaveSignalDataApi\",\"MAWCommonLowLevelApiBridgeHandlers\",\"MAWCommonLowLevelApiDbCallbacks\",\"MAWCommonLowLevelApiLogWrapper\",\"MAWConvertCreateGroupResultApi\",\"MAWDefinePersistedJob\",\"MAWDeletePreKeyGenerationsApi\",\"MAWGetLastPreKeyGenerationIdApi\",\"MAWGetPreKeyGenerationsTimestampsApi\",\"MAWJids\",\"MAWJobPersistenceAccessorsApi\",\"MAWLoadAllJobsApi\",\"MAWLoadICDCApi\",\"MAWLoadIdentitiesApi\",\"MAWLoadLastSyncTsApi\",\"MAWLoadLatestSignedPreKeyApi\",\"MAWLoadOneTimePreKeyApi\",\"MAWLoadPreKeysApi\",\"MAWLoadSenderKeySessionApi\",\"MAWLoadSignedPreKeyApi\",\"MAWSaveOneTimePreKeyApi\",\"MAWSavePreKeysGenerationApi\",\"MAWSaveSignedPreKeyIfNewApi\",\"MAWSessionApi\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return{bridgeHandlers:babelHelpers[\"extends\"]({},d(\"MAWCommonLowLevelApiBridgeHandlers\").commonBridgeHandlers),crypto:{db:d(\"MAWCommonLowLevelApiLogWrapper\").lowLevelApiLogWrapper({bulkLoadIdentities:d(\"MAWLoadIdentitiesApi\").bulkLoadIdentities,bulkSaveSignalData:d(\"MAWBulkSaveSignalDataApi\").bulkSaveSignalData,deletePreKeyGenerations:d(\"MAWDeletePreKeyGenerationsApi\").deletePreKeyGenerations,getLastPreKeyGenerationId:d(\"MAWGetLastPreKeyGenerationIdApi\").getLastPreKeyGenerationId,getPreKeyGenerationsTimestamps:d(\"MAWGetPreKeyGenerationsTimestampsApi\").getPreKeyGenerationsTimestamps,loadICDC:d(\"MAWLoadICDCApi\").loadICDC,loadIdentities:d(\"MAWLoadIdentitiesApi\").loadIdentities,loadLastSyncTs:d(\"MAWLoadLastSyncTsApi\").loadLastSyncTs,loadLatestSignedPreKey:d(\"MAWLoadLatestSignedPreKeyApi\").loadLatestSignedPreKey,loadOneTimePreKey:d(\"MAWLoadOneTimePreKeyApi\").loadOneTimePreKey,loadPreKeys:d(\"MAWLoadPreKeysApi\").loadPreKeys,loadSenderKeySession:d(\"MAWLoadSenderKeySessionApi\").loadSenderKeySession,loadSession:d(\"MAWSessionApi\").loadSession,loadSessions:d(\"MAWSessionApi\").bulkLoadSession,loadSignedPreKey:d(\"MAWLoadSignedPreKeyApi\").loadSignedPreKey,saveOneTimePreKey:d(\"MAWSaveOneTimePreKeyApi\").saveOneTimePreKey,savePreKeysGeneration:d(\"MAWSavePreKeysGenerationApi\").savePreKeysGeneration,saveSignedPreKeyIfNew:d(\"MAWSaveSignedPreKeyIfNewApi\").saveSignedPreKeyIfNew}),regInfo:a},dbCallbacks:d(\"MAWCommonLowLevelApiDbCallbacks\").dbCallbacks,jidUtils:d(\"MAWJids\").jidUtils,jobPersistenceAccessors:d(\"MAWJobPersistenceAccessorsApi\").getJobPersistenceAccessors(),jobResultConverters:{convertCreateGroupResult:d(\"MAWConvertCreateGroupResultApi\").convertCreateGroupResult},loadAllJobs:d(\"MAWLoadAllJobsApi\").loadAllJobs,persistedJobs:d(\"MAWDefinePersistedJob\").persistedJobsApi}}g.makeLowLevelApi=a}),98);\n__d(\"MAWMainWebWorkerConfig\",[\"MAWBaseConfig\",\"MAWConstants\",\"MAWCurrentUser\",\"MAWDeviceRegistrationTypes\",\"MAWEphemeralConsts\",\"MAWGK\",\"MAWParseXMAFBConfig\",\"MAWTransactionsConfig\",\"WorkerUtils\",\"getOrchestratorVersion\",\"gkx\",\"isStickerEnabled\",\"isUseridAnnotationEnabled\",\"justknobx\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=1;a=babelHelpers[\"extends\"]({},c(\"MAWBaseConfig\"),{armadilloWebProcessFutureproof:function(){return c(\"MAWGK\").armadillo_web_process_futureproof},batchSize:function(){return c(\"justknobx\")._(\"1866\")},defaultUnknownContactText:function(){return d(\"MAWConstants\").FB_UNKNOWN_USER},ephemeralMaxDeletionWindowForUnseenMessage:function(){return d(\"MAWEphemeralConsts\").ephemeralMaxDelectionWindowForUnseenMessage},getDevicesBeforeSend:function(){return c(\"gkx\")(\"23971\")},getSignalFutureMessagesMax:function(){return c(\"gkx\")(\"4280\")?c(\"justknobx\")._(\"847\"):2e3},handleICDCInProtocol:function(){return c(\"gkx\")(\"33007\")},icdcAlertTriggerFailureCounter:function(){return c(\"justknobx\")._(\"1970\")},icdcCooldownIntervalInMinutes:function(){return c(\"justknobx\")._(\"1971\")},icdcIntervalInMinutes:function(){return c(\"justknobx\")._(\"1972\")},isDeviceRegistrationDomainUniquenessEnabled:function(){return c(\"gkx\")(\"23969\")},isDocumentReceiveEnabled:function(){return!c(\"gkx\")(\"23924\")},isEditMessageSendEnabled:function(){return!0},isEmployee:d(\"MAWCurrentUser\").isEmployee,isEphemeralMessagesEnabled:function(){return!0},isFrankingDropOnInvalid:function(){return c(\"gkx\")(\"23973\")},isFrankingDropOnMissing:function(){return c(\"gkx\")(\"23974\")},isFrankingEnabled:function(){return c(\"justknobx\")._(\"1347\")},isGifEnabled:function(){return c(\"justknobx\")._(\"1147\")},isICDCErrorEnabled:function(){return c(\"gkx\")(\"23975\")},isMediaFallbackToAlternativeHmacSaltsEnabled:function(){return c(\"gkx\")(\"23976\")},isMediaLoggingEnabled:function(){return c(\"gkx\")(\"23970\")},isMediaWaitForConnectionOnRetryEnabled:function(){return c(\"gkx\")(\"23977\")},isPollsFallbackExperienceEnabled:function(){return c(\"gkx\")(\"23978\")},isPreEstablishSessionEnabled:function(){return c(\"gkx\")(\"23979\")},isProgressiveJpegSendReceiveEnabled:function(){return c(\"gkx\")(\"23980\")},isRavenMessagesEnabled:function(){return!0},isSenderKeyPredistributionEnabled:function(){return c(\"gkx\")(\"23981\")},isSharedWorkerContext:function(){return(h||(h=d(\"WorkerUtils\"))).isSharedWorkerContext()},isStickerEnabled:c(\"isStickerEnabled\"),isUnsupportedMessagesRedesignEnabled:function(){return c(\"gkx\")(\"1564\")},isUseridAnnotationEnabled:c(\"isUseridAnnotationEnabled\"),maxAppDataRecipients:function(){return d(\"MAWConstants\").MAX_APPDATA_RECIPIENTS},maxUsersForNotifyDeviceChange:function(){return d(\"MAWDeviceRegistrationTypes\").MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE},mediaUploadRoot:function(){return\"\/wa-msgr\/mms\"},messageRetryCountLimit:function(){return d(\"MAWConstants\").MESSAGE_RETRY_COUNT_LIMIT},orchestratorVersion:function(){return c(\"getOrchestratorVersion\")()},productTypeForEBAttachments:\"msgr\",sessionDropIfTooOld:function(){return c(\"justknobx\")._(\"2240\")},supportedTypesVersion:function(){return c(\"MAWGK\").armadillo_web_process_futureproof?i+1:i},supportedXMATargetTypes:function(){return d(\"MAWParseXMAFBConfig\").FB_SUPPORTED_TARGET_TYPES},transactions:d(\"MAWTransactionsConfig\").transactions,useCryptoManagerV2:function(){return!0},useEbUploadQueue:function(){return c(\"gkx\")(\"23936\")||c(\"qex\")._(\"919\")===!0},useLongSessionDrop:function(){return c(\"gkx\")(\"1244\")},useMostRecentMediaEntryForDownload:function(){return c(\"justknobx\")._(\"1891\")}});b=a;g[\"default\"]=b}),98);\n__d(\"WorkerBanzaiLazyQueueChannelWorker\",[\"BanzaiLazyQueue\",\"WorkerFuncChannel\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=d(\"WorkerFuncChannel\").importChannel({queuePost:null},a,\"banzai_lazyqueue_channel\");c(\"BanzaiLazyQueue\").onQueue.add(function(){h(b)});h(b)}function h(a){c(\"BanzaiLazyQueue\").flushQueue().forEach(function(b){a.queuePost.apply(a,b)})}g.init=a}),98);\n__d(\"WorkerSelf\",[\"WorkerBanzaiLazyQueueChannelWorker\",\"WorkerFuncChannel\",\"WorkerQPLChannel\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){d(\"WorkerFuncChannel\").activateChannels(a,\"worker\",\"client\"),d(\"WorkerBanzaiLazyQueueChannelWorker\").init(a),d(\"WorkerQPLChannel\").setMessagePort(a)}g.init=a}),98);\n__d(\"IGDLegacyTLCMainWebWorker\",[\"MAWBackend\",\"MAWCommonMainWebWorker\",\"MAWLowLevelApiImpl\",\"MAWMainWebWorkerConfig\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){self.Env=self.Env||{};a=new(d(\"MAWCommonMainWebWorker\").BridgeAdaptor)((a=a)!=null?a:self,\"IGDAWMainWebWorker\");d(\"MAWCommonMainWebWorker\").initWorker(a,d(\"MAWLowLevelApiImpl\").makeLowLevelApi,c(\"MAWMainWebWorkerConfig\"),d(\"MAWBackend\").startMAWBackend)}g[\"default\"]=a}),98);\n__d(\"WorkerBootstrap\",[\"HasteSupportData\",\"ServerJSDefine\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){Object.keys(a).forEach(function(b){c(\"ServerJSDefine\").handleDefine(b,[],a[b],-1,null)})}function a(a,c){var f,g;a.hsdp&&d(\"HasteSupportData\").handle(a.hsdp);var i=(f=(g=a.jsmods)!=null?g:a.dynamicModules)!=null?f:{};h(i);var j=b.call(null,c);a.rds!=null&&a.rds.length>0&&e.call(null,a.rds,function(){});if(typeof j===\"function\"||j!==null)try{for(var k=arguments.length,l=new Array(k>2?k-2:0),m=2;m<k;m++)l[m-2]=arguments[m];j.apply(void 0,l)}catch(a){}}function f(a){a=a;if(typeof a===\"function\"||a!==null)try{a()}catch(a){}}g.initDynamicModules=h;g.start=a;g.startServerJS=f}),98);\n__d(\"CurrentSharedWorker\",[\"HasteSupportData\",\"SharedWorkerStatusLock\",\"WorkerBootstrap\",\"emptyFunction\",\"err\",\"structuredClone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null,i=[],j=new Set(),k=[],l=!1,m=!1,n=null,o=!1,p=d(\"SharedWorkerStatusLock\").getStatusLock();self.setTimeout(function(){if(!o){try{var a;(a=j.values().next().value)==null?void 0:a.postMessage({type:\"self-terminate\",response:{from:\"bundle\"}})}catch(a){v(a)}self.close()}},3e5);function q(){m=!0,n=null,h!==null&&(i.forEach(function(a){return a()}),i=[])}function r(a,c){var f=a.data;if(typeof f===\"object\"&&(f==null?void 0:f.type)===\"execute-worker\"){var g=!l;if(!l&&f.args instanceof Array){var k=f.args[0],t=k.hsdp,u=k.jsmods,v=k.dynamicModules;k=k.rds;t!=null&&d(\"HasteSupportData\").handle(t);d(\"WorkerBootstrap\").initDynamicModules((u=(t=u)!=null?t:v)!=null?u:{});k!=null&&k.length>0&&e.call(null,k,function(){});p.init();l=!0;n!=null&&(n(),q())}try{t=b.call(b,\"SiteData\");j.size>1&&c.postMessage({type:\"execute-worker-imports\",response:{}});c.postMessage({type:\"execute-worker-ack\",response:{firstInit:g,workerRevision:t.client_revision,spinMode:t.spin,spinTime:t.__spin_t}});o=!0}catch(a){c.postMessage({type:\"execute-worker-ack\",response:{firstInit:g,errorGettingSiteData:a.message}})}}else if(typeof f===\"object\"&&(f==null?void 0:f.type)===\"sw-get-rev\")try{v=b.call(b,\"SiteData\");c.postMessage({type:\"sw-get-rev\",response:{workerRevision:v.client_revision,spinMode:v.spin,spinTime:v.__spin_t}})}catch(a){c.postMessage({type:\"sw-get-rev\",response:{error:a.message}})}else if(typeof f===\"object\"&&(f==null?void 0:f.type)===\"sw-shutdown\"){u=Array.isArray(f.args)?f.args[0]:null;p.release();typeof u===\"object\"&&(u==null?void 0:u.upgrade)===!0?s({type:\"sw-shutdown\",response:{reason:\"requested-upgrade\",workerID:self.worker_id,isInitialized:o}}):typeof u===\"object\"&&typeof (u==null?void 0:u.reason)===\"string\"?s({type:\"sw-shutdown\",response:{reason:u==null?void 0:u.reason,workerID:self.worker_id,isInitialized:o}}):s({type:\"sw-shutdown\",response:{workerID:self.worker_id,isInitialized:o}});self.close()}else if(typeof f===\"object\"&&(f==null?void 0:f.type)===\"sw-uptime-tracking\"){t=typeof (f==null?void 0:f.args)===\"object\"?(k=f.args)==null?void 0:k.trackerID:null;c.postMessage({type:\"sw-uptime-tracking\",response:{trackerID:t}})}else typeof f===\"object\"&&(f==null?void 0:f.type)===\"ww-hrp-init\"&&j.size>1?c.postMessage({type:\"ww-hrp-init\",response:{}}):h!==null&&m?h(f):i.push(function(){return r(a,c)})}function a(a){var b=h==null;h=(a=a)!=null?a:c(\"emptyFunction\");b&&m&&(i.forEach(function(a){return a()}),i=[])}function s(a,b){j.forEach(function(c){c.postMessage(a,b)})}function f(a){if(l){a();q();return}n=a}[\"log\",\"error\",\"info\",\"debug\",\"warn\"].forEach(function(a){if(self.console[a]==null)throw c(\"err\")('\"'+a+'\" is not a valid console method.');var b=self.console[a];self.console[a]=function(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];b.apply(void 0,e);var g=!1;try{c(\"structuredClone\")!=null&&c(\"structuredClone\")(e),g=!0}catch(a){}if(!g){s({type:\"console\",response:{method:\"error\",args:[\"DataCloneError: Failed to forward console message from web worker due to args not being serializable.\"]}});return}s({type:\"console\",response:{method:a,args:e}})}});try{var t=self.shared_worker_bootstrap_buffer==null?void 0:self.shared_worker_bootstrap_buffer();if(t!=null){var u=t.ports;t=t.messages;u==null?void 0:u.forEach(function(a){try{a.addEventListener(\"message\",function(b){return r(b,a)}),j.add(a)}catch(a){v(a)}});t==null?void 0:t.forEach(function(a){try{r(a.e,a.port)}catch(a){v(a)}})}}catch(a){v(a)}function v(a){try{s({type:\"sw-uncaught-error\",e:{message:a.message,lineno:a.lineno,colno:a.colno,filename:a.filename,error:a.error}})}catch(a){}}self.addEventListener(\"error\",function(a){if(j.size===0){k.push(a);return}v(a)});self.addEventListener(\"connect\",function(a){var b=a.ports[0];b.postMessage({type:\"connection-ack\",response:{from:\"bundle\",workerID:self.worker_id}});b.addEventListener(\"message\",function(a){return r(a,b)});b.start();j.add(b);k.length>0&&(k.forEach(v),k.splice(0,k.length))});g.setMessageHandler=a;g.postMessage=s;g.onInitComplete=f}),98);\n__d(\"CurrentSharedWorkerAdapter\",[\"CurrentSharedWorker\",\"FBLogger\"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var b=a.prototype;b.addEventListener=function(a,b,e){switch(a){case\"message\":d(\"CurrentSharedWorker\").setMessageHandler(function(a){return b({data:a})});break;case\"error\":break;default:c(\"FBLogger\")(\"worker\").mustfix(\"Unexpected message type %\",a)}};b.removeEventListener=function(a,b,e){switch(a){case\"message\":d(\"CurrentSharedWorker\").setMessageHandler(null);break;case\"error\":break;default:c(\"FBLogger\")(\"worker\").mustfix(\"Unexpected message type %\",a)}};b.postMessage=function(a,b){d(\"CurrentSharedWorker\").postMessage(a,b)};return a}();g.CurrentSharedWorkerAdapter=a}),98);\n__d(\"CurrentWorkerMessagePort\",[\"CurrentSharedWorkerAdapter\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null;function a(){if(h==null)if(\"SharedWorkerGlobalScope\"in self&&self instanceof self.SharedWorkerGlobalScope)h=new(d(\"CurrentSharedWorkerAdapter\").CurrentSharedWorkerAdapter)();else if(\"DedicatedWorkerGlobalScope\"in self&&self instanceof self.DedicatedWorkerGlobalScope)h=self;else throw new Error(\"CurrentWorkerAdapter: Unsupported worker type\");return h}g.getMessagePort=a}),98);\n__d(\"SharedWorkerBootstrap\",[\"CurrentSharedWorker\",\"CurrentWorkerMessagePort\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){h(function(){return b.call(null,a)})}function c(a){h(function(){return a})}function h(a){d(\"CurrentSharedWorker\").onInitComplete(function(){var b=a();if(typeof b===\"function\"||b!==null)try{b(d(\"CurrentWorkerMessagePort\").getMessagePort())}catch(a){}})}g.start=a;g.startServerJS=c}),98);\n__d(\"SharedOrWebWorkerBootstrapInit\",[\"SharedWorkerBootstrap\",\"WorkerBootstrap\"],(function(a,b,c,d,e,f){\"use strict\";function a(a){\"SharedWorkerGlobalScope\"in self&&self instanceof self.SharedWorkerGlobalScope?b(\"SharedWorkerBootstrap\").startServerJS(a):b(\"WorkerBootstrap\").startServerJS(a)}f.startServerJS=a}),66);\/*FB_PKG_DELIM*\/\n__d(\"IntlVariations\",[],(function(a,b,c,d,e,f){e.exports={BITMASK_NUMBER:28,BITMASK_GENDER:3,NUMBER_ZERO:16,NUMBER_ONE:4,NUMBER_TWO:8,NUMBER_FEW:20,NUMBER_MANY:12,NUMBER_OTHER:24,GENDER_MALE:1,GENDER_FEMALE:2,GENDER_UNKNOWN:3}}),null);\n__d(\"usePartialViewImpression\",[\"useVisibilityObserver\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=a.onImpressionEnd;a=a.onImpressionStart;return c(\"useVisibilityObserver\")({onHidden:b,onVisible:a,options:{hiddenWhenCSSStyleHidden:!0,hiddenWhenZeroArea:!0}})}g[\"default\"]=a}),98);\n__d(\"CometOfflineTracing\",[\"NetworkStatus\"],(function(a,b,c,d,e,f,g){\"use strict\";d=\"sessionOfflineStatusCount\";var h=0,i=!1;function a(){if(i)return;i=!0;c(\"NetworkStatus\").onChange(function(a){a=a.online;a||h++})}function b(){return h}g.OFFLINE_NETWORK_STATUS_ANNOTATION=d;g.initialize=a;g.getOfflineCount=b}),98);\n__d(\"cometAsyncRequestHeaders\",[],(function(a,b,c,d,e,f){\"use strict\";var g=[];function a(){return g.reduce(function(a,b){b=b();return Object.assign(b,a)},{})}function b(a){g.push(a)}f.getHeaders=a;f.registerHeaderProvider=b}),66);\n__d(\"PolarisAppInstallConstants\",[\"keyMirror\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"keyMirror\")({\"default\":null,instagramlitecarbon:null,openinapp:null});b=[\"postPage\",\"profilePage\",\"tagPage\",\"locationPage\",\"feedPage\",\"exploreLandingPage\",\"ActivityFeedPage\"];g.APP_BANNER_VARIANTS=a;g.ALLOWLISTED_PAGE_IDS=b}),98);\n__d(\"FBJSON\",[],(function(a,b,c,d,e,f){a=JSON.parse;b=JSON.stringify;f.parse=a;f.stringify=b}),66);\n__d(\"isPlainObject\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return Object.prototype.toString.call(a)===\"[object Object]\"}f[\"default\"]=a}),66);\n__d(\"CookieStore\",[\"CookieCoreLoggingConfig\",\"FBLogger\",\"Random\",\"gkx\",\"performanceNow\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=window.I_AM_CORE_COOKIE_INFRASTRUCTURE_AND_NEED_TO_ACCESS_COOKIES!=null?window.I_AM_CORE_COOKIE_INFRASTRUCTURE_AND_NEED_TO_ACCESS_COOKIES():null,j={set:function(a){document.cookie=a},get:function(){return document.cookie}};function k(){return i!=null?i:j}function l(a,b,c,d,e,f,g,h){return b+\"=\"+encodeURIComponent(c)+\"; \"+(f!==0&&f!==void 0&&f!==null?\"expires=\"+new Date(a+f).toUTCString()+\"; \":\"\")+\"path=\"+d+\"; domain=\"+e+(g?\"; secure\":\"\")+(h?\"; SameSite=\"+h:\"\")}function m(a,b,c){return a+\"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=\"+b+\"; domain=\"+c}function n(){if(c(\"CookieCoreLoggingConfig\").sampleRate>0){var a=(h||(h=c(\"performanceNow\")))(),b=k().get();a=h()-a;var d=a>c(\"CookieCoreLoggingConfig\").maximumIgnorableStallMs&&c(\"Random\").coinflip(1\/c(\"CookieCoreLoggingConfig\").sampleRate);d&&c(\"FBLogger\")(\"cookie_infra\").addMetadata(\"COOKIE_INFRA\",\"WALL_TIME\",String(a)).warn(\"Cookie read exceeded %s milliseconds.\",c(\"CookieCoreLoggingConfig\").maximumIgnorableStallMs);return b}else return k().get()}var o=function(){function a(){this.$1=0}var b=a.prototype;b.setCookie=function(a,b,c,d,e,f,g,h){k().set(l(a,b,c,d,e,f,g,h))};b.clearCookie=function(a,b,c){k().set(m(a,b,c))};b.getCookie=function(a){var b;this.$1++;b=(b=n())==null?void 0:b.match(\"(?:^|;\\\\s*)\"+a+\"=(.*?)(?:;|$)\");return b?decodeURIComponent(b[1]):null};return a}(),p=10*1e3,q=function(){function a(){this.$1={},this.$2=0,this.$3=0,this.$4=0}var b=a.prototype;b.setCookie=function(a,b,c,d,e,f,g,h){k().set(l(a,b,c,d,e,f,g,h)),this.$1[b]={value:c,updated:a}};b.clearCookie=function(a,b,c){k().set(m(a,b,c)),this.$1[a]={value:null,updated:Date.now()}};b.getCookie=function(a){a=this.$5(a);a=a.cookie;return a};b.$5=function(a){var b=Date.now(),c=this.$1[a];if(!c){if(this.$2+p<b){this.$6();return{cookie:this.$5(a).cookie,hit:!1}}this.$3++;return{cookie:null,hit:!0}}if(c.updated+p<b){this.$6();return{cookie:this.$5(a).cookie,hit:!1}}this.$3++;return{cookie:c.value,hit:!0}};b.$6=function(){var a;this.$4++;a=(a=(a=n())==null?void 0:a.split(\";\"))!=null?a:[];this.$2=Date.now();this.$1={};for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d=d.match(\"\\\\s*([^=]+)=(.*)\");if(!d)continue;this.$1[d[1]]={value:decodeURIComponent(d[2]),updated:this.$2}}};return a}();function a(){return c(\"gkx\")(\"20940\")?new q():new o()}g.newCookieStore=a;g.CookieCacheForTest=q;g.CookieStoreSlowForTest=o}),98);\n__d(\"CookieCore\",[\"CookieCoreConfig\",\"CookieDomain\",\"CookieStore\"],(function(a,b,c,d,e,f,g){var h=\/_js_(.*)\/,i;function j(){i||(i=d(\"CookieStore\").newCookieStore());return i}function k(){return\".\"+c(\"CookieDomain\").domain}function l(a){return window.self!==window.top?!1:!0}function m(a,b){if(!r(a))return;n(a,b,t(a),u(a),s(a),v(a))}function a(a,b,c){if(!r(a))return;n(a,b,t(a),u(a),s(a),v(a),c)}function n(a,b,c,d,e,f,g){var h=Date.now();if(c!=null)if(c>h)c-=h;else if(c===1){o(a,d,g);return}j().setCookie(h,a,b,d,(h=g)!=null?h:k(),c,e,f)}function b(a,b){if(!l(a))return;m(a,b)}function e(a,b,c,d,e,f){if(!l(a))return;n(a,b,c,d,e,null,f)}function o(a,b,c){b===void 0&&(b=\"\/\");b=b||\"\/\";j().clearCookie(a,b,(a=c)!=null?a:k())}function f(a){return!r(a)?null:j().getCookie(a)}function p(a){return{insecure:a.i||!1,path:a.p||\"\/\",ttlSeconds:a.t||0,sameSite:a.s||\"None\"}}function q(a){if(c(\"CookieCoreConfig\")[a]!==void 0)return p(c(\"CookieCoreConfig\")[a]);a=a.match(h);return a&&a.length>1?q(a[1]):null}function r(a){return q(a)!==null}function s(a){a=q(a);return a==null?!0:!a.insecure}function t(a){a=q(a);return a==null?null:a.ttlSeconds*1e3}function u(a){a=q(a);return a==null?\"\/\":a.path}function v(a){a=q(a);return a==null||a.sameSite==null?null:a.sameSite}g.set=m;g.setWithDomain_FOR_MESSENGER_LS_ONLY=a;g.setWithoutChecks=n;g.setIfFirstPartyContext=b;g.setWithoutChecksIfFirstPartyContext=e;g.clear=o;g.get=f}),98);\n__d(\"OdsWebBatchFalcoEvent\",[\"FalcoLoggerInternal\",\"getFalcoLogPolicy_DO_NOT_USE\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"getFalcoLogPolicy_DO_NOT_USE\")(\"1838142\");b=d(\"FalcoLoggerInternal\").create(\"ods_web_batch\",a);e=b;g[\"default\"]=e}),98);\n__d(\"FalcoConsentChecker\",[],(function(a,b,c,d,e,f){\"use strict\";function g(a,b,c,d){var e;switch(typeof d){case\"string\":e=a[String(d)];return!e?!1:e<=b;case\"number\":return g(a,b,c,c[Number(d)]);default:e=!1;if(Array.isArray(d)){var f=d[0];for(var h=1;h<d.length;h++){e=g(a,b,c,d[h]);if(e){if(f===\"or\")return!0}else if(f===\"and\")return!1}}return e}}f[\"default\"]=g}),66);\n__d(\"pageID\",[\"WebSession\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"WebSession\").getPageId_DO_NOT_USE();g[\"default\"]=a}),98);\n__d(\"WebStorageMutex\",[\"WebStorage\",\"clearTimeout\",\"pageID\",\"setTimeout\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=null,j=!1,k=c(\"pageID\");function l(){j||(j=!0,i=(h||(h=c(\"WebStorage\"))).getLocalStorage());return i}a=function(){function a(a){this.name=a}a.testSetPageID=function(a){k=a};var b=a.prototype;b.$2=function(){var a,b=l();if(!b)return k;b=b.getItem(\"mutex_\"+this.name);b=((a=b)!=null?a:\"\").split(\":\");return b&&parseInt(b[1],10)>=Date.now()?b[0]:null};b.$3=function(a){var b=l();if(!b)return;a=a==null?1e3:a;a=Date.now()+a;(h||(h=c(\"WebStorage\"))).setItemGuarded(b,\"mutex_\"+this.name,k+\":\"+a)};b.hasLock=function(){return this.$2()===k};b.lock=function(a,b,d){var e=this;this.$1&&c(\"clearTimeout\")(this.$1);k===(this.$2()||k)&&this.$3(d);this.$1=c(\"setTimeout\")(function(){e.$1=null;var c=e.hasLock()?a:b;c&&c(e)},0)};b.unlock=function(){this.$1&&c(\"clearTimeout\")(this.$1);var a=l();a&&this.hasLock()&&a.removeItem(\"mutex_\"+this.name)};return a}();g[\"default\"]=a}),98);\n__d(\"guid\",[],(function(a,b,c,d,e,f){function a(){if(typeof crypto===\"object\"&&typeof crypto.getRandomValues===\"function\"&&typeof String.prototype.padStart===\"function\"){var a=crypto.getRandomValues(new Uint32Array(2));return\"f\"+a[0].toString(16).padStart(8,\"0\")+a[1].toString(16).padStart(8,\"0\")}return\"f\"+(Math.random()*(1<<30)).toString(16).replace(\".\",\"\")}f[\"default\"]=a}),66);\n__d(\"PersistedQueue\",[\"AnalyticsCoreData\",\"BaseEventEmitter\",\"ExecutionEnvironment\",\"Run\",\"WebStorage\",\"WebStorageMutex\",\"cr:8958\",\"err\",\"guid\",\"nullthrows\",\"performanceAbsoluteNow\",\"requestAnimationFrame\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k,l=24*60*60*1e3,m=30*1e3,n=new(c(\"BaseEventEmitter\"))(),o;function p(a){a===void 0&&(a=!1);if(o===void 0){var b;if(((b=(h||(h=c(\"AnalyticsCoreData\"))).queue_activation_experiment)!=null?b:!1)&&a)try{return(i||(i=c(\"WebStorage\"))).getLocalStorageForRead()}catch(a){return null}b=\"check_quota\";try{a=(i||(i=c(\"WebStorage\"))).getLocalStorage();a?(a.setItem(b,b),a.removeItem(b),o=a):o=null}catch(a){o=null}}return o}function q(a){var b=a.prev,c=a.next;c&&(c.prev=b);b&&(b.next=c);a.next=null;a.prev=null}function r(a){return{item:a,next:null,prev:null}}function s(a,b){return a+\"^$\"+((a=b==null?void 0:b.queueNameSuffix)!=null?a:\"\")}var t={},u={},v={},w=!1;a=function(){function a(a,b){var d,e=this;this.$7=0;this.$3=a;this.$5=(d=b==null?void 0:b.queueNameSuffix)!=null?d:\"\";this.$15=b==null?void 0:b.application;this.$4=s(a,b);this.$11=this.$4+\"^$\"+c(\"guid\")();this.$14=!1;if(b){this.$8=(d=b.max_age_in_ms)!=null?d:l;this.$12=b.migrate;this.$13=b.onLoad}else this.$8=l;this.$9=[n.addListener(\"active\",function(){(e.$10!=null||!e.$14)&&(e.$14=!0,e.$10=null,e.$16())}),n.addListener(\"inactive\",function(){e.$10==null&&(e.$10=Date.now(),e.$17())})];((j||(j=c(\"ExecutionEnvironment\"))).canUseDOM||(j||(j=c(\"ExecutionEnvironment\"))).isInWorker)&&c(\"requestAnimationFrame\")(function(){return e.$16()})}var d=a.prototype;d.isActive=function(){var a=this.$10;if(a==null)return!0;if(Date.now()-a>m){this.$10=null;n.emit(\"active\",null);return!0}return!1};d.$16=function(){this.$18(),this.$19()};d.$17=function(){this.$20()};d.getFullName=function(){return this.$4};d.getQueueNameSuffix=function(){return this.$5};a.isQueueActivateExperiment=function(){return w};a.setOnQueueActivateExperiment=function(){w=!0};a.create=function(b,d){var e=s(b,d);if(e in t)throw c(\"err\")(\"Duplicate queue created: \"+b);d=new a(b,d);t[e]=d;v[b]?v[b].push(d):v[b]=[d];e=u[b];e&&d.setHandler(e);return d};a.setHandler=function(a,b){if(v[a]){var c=v[a];for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f.setHandler(b)}}u[a]=b};d.destroy=function(){this.$9.forEach(function(a){return a.remove()})};a.destroy=function(a,b){a=s(a,b);t[a].destroy();delete t[a]};d.setHandler=function(a){this.$6=a;this.$19();return this};d.$19=function(){this.$7>0&&this.$6&&this.$6(this)};d.length=function(){return this.$7};d.enumeratedLength=function(){return this.$21().length};a.isPersistenceAllowed=function(){var a=p();return!a?!1:!0};a.getSuffixesForKey=function(a){var b=[];try{var c=p(!0);if(!c)return b;a=a+\"^$\";for(var d=0;d<c.length;d++){var e=c.key(d);if(typeof e===\"string\"&&e.startsWith(\"mutex_falco_\"))c.removeItem(e);else if(typeof e===\"string\"&&e.startsWith(a)){e=e.split(\"^$\");if(e.length>2){e=e[1];b.push(e)}else b.push(\"\")}}}catch(a){}return b};d.$18=function(){var d,e=this,a=p(!0);if(!a)return;var f=this.$4+\"^$\";d=new(c(\"WebStorageMutex\"))((d=this.$15)!=null?d:f);var g=this.$12,h=this.$13;d.lock(function(d){var i=Date.now()-e.$8;try{for(var j=0;j<a.length;j++){var k=a.key(j);if(typeof k===\"string\"&&k.startsWith(f)){var l=a.getItem(k);a.removeItem(k);if(l!=null&&l.startsWith(\"{\")){k=b(\"cr:8958\").parse(c(\"nullthrows\")(l));if(k.ts>i)try{for(var l=k.items,k=Array.isArray(l),m=0,l=k?l:l[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var n;if(k){if(m>=l.length)break;n=l[m++]}else{m=l.next();if(m.done)break;n=m.value}n=n;g!=null?g(n):n;n=h!=null?h(n):n;e.$22(n)}}catch(a){}}}}}catch(a){}d.unlock();e.$19()})};d.$20=function(){var a=p();if(!a)return;var d=this.$21();if(d.length===0){a.getItem(this.$11)!=null&&a.removeItem(this.$11);return}(i||(i=c(\"WebStorage\"))).setItemGuarded(a,this.$11,b(\"cr:8958\").stringify({items:d.map(function(a){return a}),ts:(k||(k=c(\"performanceAbsoluteNow\")))()}))};d.$21=function(){var a=this.$1,b=[];if(!a)return b;do b.push(a.item);while(a=a.prev);return b.reverse()};d.markItemAsCompleted=function(a){var b=a.prev;q(a);this.$1===a&&(this.$1=b);this.$7--;this.isActive()||this.$20()};d.markItemAsFailed=function(a){q(a);var b=this.$2;if(b){var c=b.prev;c&&(c.next=a,a.prev=c);a.next=b;b.prev=a}this.$2=a;this.isActive()&&this.$19()};d.markItem=function(a,b){b?this.markItemAsCompleted(a):this.markItemAsFailed(a)};d.$22=function(a){a=r(a);var b=this.$1;b&&(b.next=a,a.prev=b);this.$1=a;this.$2||(this.$2=a);this.$7++};d.wrapAndEnqueueItem=function(a){this.$22(a),this.isActive()?this.$19():this.$20()};d.dequeueItem=function(){if(this.$10!=null)return null;var a=this.$2;if(!a)return null;this.$2=a.next;return a};return a}();a.eventEmitter=n;if((j||(j=c(\"ExecutionEnvironment\"))).canUseDOM){var x=d(\"Run\").maybeOnBeforeUnload(function(){n.emit(\"inactive\",null),x==null?void 0:x.remove()},!1);if(!x)var y=d(\"Run\").onUnload(function(){n.emit(\"inactive\",null),y.remove()})}g[\"default\"]=a}),98);\n__d(\"ServerTime\",[\"ServerTimeData\"],(function(a,b,c,d,e,f,g){var h,i=0;f=0;var j=null;h=(h=(typeof window!==\"undefined\"?window:self).performance)==null?void 0:h.timing;if(h){var k=h.requestStart;h=h.domLoading;if(k&&h){var l=c(\"ServerTimeData\").timeOfResponseStart-c(\"ServerTimeData\").timeOfRequestStart;k=h-k-l;f=k\/2;l=h-c(\"ServerTimeData\").timeOfResponseStart-f;h=Math.max(50,k*.8);Math.abs(l)>h&&(i=l,j=Date.now())}}else d(c(\"ServerTimeData\").serverTime);function a(){return Date.now()-i}function b(){return i}function d(a){a=Date.now()-a;Math.abs(i-a)>6e4&&(i=a,j=Date.now())}function e(){return j===null?null:Date.now()-j}f=a;k=b;g.getMillis=a;g.getOffsetMillis=b;g.update=d;g.getMillisSinceLastUpdate=e;g.get=f;g.getSkew=k}),98);\n__d(\"FalcoLoggerInternal\",[\"AnalyticsCoreData\",\"BaseEventEmitter\",\"FBLogger\",\"FalcoConsentChecker\",\"FalcoUtils\",\"PersistedQueue\",\"Promise\",\"Random\",\"ServerTime\",\"nullthrows\",\"performanceAbsoluteNow\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k=d(\"FalcoUtils\").getTaggedBitmap(33),l=d(\"FalcoUtils\").getTaggedBitmap(0),m=500*1024*.6,n=new Map(),o=new Set([\"cmcd_messenger_web_logging_event\",\"javascript_web_error\",\"comet_redblock\"]);function p(a){var b;a.tags=d(\"FalcoUtils\").xorBitmap((b=a.tags)!=null?b:[0,0],k);return a}function a(a,b){var d;d=(d=c(\"PersistedQueue\").getSuffixesForKey(a))!=null?d:[];d.push(b);for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g,h;if(e){if(f>=d.length)break;h=d[f++]}else{f=d.next();if(f.done)break;h=f.value}h=h;var j=a+\"^$\"+h;if(n.has(j))continue;g=((g=(i||(i=c(\"AnalyticsCoreData\"))).use_falco_as_mutex_key)!=null?g:!1)?c(\"PersistedQueue\").create(a,{onLoad:p,queueNameSuffix:h,application:\"falco\"}):c(\"PersistedQueue\").create(a,{onLoad:p,queueNameSuffix:h});n.set(j,g)}return c(\"nullthrows\")(n.get(a+\"^$\"+b))}f=d(\"FalcoUtils\").identityToString((i||(i=c(\"AnalyticsCoreData\"))).identity);var q=a(\"falco_queue_log\",f),r=a(\"falco_queue_immediately\",f),s=a(\"falco_queue_critical\",f),t=new(c(\"BaseEventEmitter\"))(),u=new(c(\"BaseEventEmitter\"))(),v={};function w(a,b,e){var f=c(\"Random\").coinflip(b.r);if(!f){d(\"FalcoUtils\").bumpODSMetrics(e,\"event.filters.sampling\",1);return!1}f=b.c;if(f!=null&&(i||(i=c(\"AnalyticsCoreData\"))).consents!=null){b=x(f,(i||(i=c(\"AnalyticsCoreData\"))).consents,a);if(!b){d(\"FalcoUtils\").bumpODSMetrics(e,\"event.filters.consent\",1);return!1}}return!0}function x(a,b,d){var e=v[a];e==null&&(e=v[a]=JSON.parse(a));return c(\"FalcoConsentChecker\")(b,d,e,e[0])}function y(){return(j||(j=c(\"performanceAbsoluteNow\")))()-d(\"ServerTime\").getOffsetMillis()}function z(a,b,d,e,f,g){A(a,b,d,e,f,g);if((i||(i=c(\"AnalyticsCoreData\"))).enable_observer){a=babelHelpers[\"extends\"]({name:a,time:b,sampled:d,getData:f,policy:e},g&&{getPrivacyContext:g});t.emit(\"event\",a)}}function A(a,b,d,e,f,g){if((i||(i=c(\"AnalyticsCoreData\"))).enable_cmcd_observer&&!o.has(a)){a=babelHelpers[\"extends\"]({name:a,time:b,sampled:d,getData:f,policy:e},g&&{getPrivacyContext:g});u.emit(\"cmcd_detection_event\",a)}}function B(a,b,e,f,g,h){g=JSON.stringify(g);if(g.length>m){d(\"FalcoUtils\").bumpODSMetrics(a,\"event.filters.exceeded_size\",1);c(\"FBLogger\")(\"falco\",\"oversized_message:\"+a).warn('Dropping event \"%s\" due to exceeding the max size %s at %s',a,m,g.length);return}h.wrapAndEnqueueItem({name:a,policy:b,time:e,extra:g,privacyContext:f,tags:d(\"FalcoUtils\").xorBitmap([0,0],l)});d(\"FalcoUtils\").bumpODSMetrics(a,\"event.captured\",1)}function C(a,b,c,e,f){try{var g=y();d(\"FalcoUtils\").bumpODSMetrics(a,\"event.logged\",1);var h=w(g,b,a);if(h){var i=e(),j=c&&c();B(a,b,g,j,i,f)}z(a,g,h,b,e,c)}catch(a){E(a)}}function D(a,c,e,f,g){try{var i=y();d(\"FalcoUtils\").bumpODSMetrics(a,\"event.logged\",1);var j=w(i,c,a);if(j){var k=f(),l=(h||(h=b(\"Promise\"))).resolve(e&&e());return h.all([k,l]).then(function(b){var d=b[0],e=b[1];B(a,c,i,e,d,g);z(a,i,j,c,function(){return d},e&&function(){return e})})}else{z(a,i,j,c,f,e);return(h||(h=b(\"Promise\"))).resolve()}}catch(a){return(h||(h=b(\"Promise\"))).reject(a)}}function E(a){var b=c(\"FBLogger\")(\"falco\");a instanceof Error?b.catching(a).warn(\"Error while attempting to log to Falco\"):b.warn(\"Caught non-error while attempting to log to Falco: %s\",JSON.stringify(a))}function e(a,b){return{log:function(c,d){C(a,b,d,c,q)},logAsync:function(c,d){D(a,b,d,c,q)[\"catch\"](E)},logImmediately:function(c,d){C(a,b,d,c,r)},logCritical:function(c,d){C(a,b,d,c,s)},logRealtimeEvent:function(c,d){C(a,b,d,c,s)}}}g.observable=t;g.cmcdObservable=u;g.create=e}),98);\n__d(\"FalcoUtils\",[\"AnalyticsCoreData\",\"ODS\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=\"ods_web_batch\";function a(a){if(a){var b=a.fbIdentity,c=a.appScopedIdentity;a=a.claim;var d=\"\";if(b){var e=b.accountId;b=b.actorId;d=e+\"^#\"+b+\"^#\"}else c!==void 0&&(d=\"^#^#\"+c);return d+\"^#\"+a}return\"\"}function b(a){return a>30?[0,1<<a-30]:[1<<a,0]}function e(a,b){return[a[0]|b[0],a[1]|b[1]]}function f(a,b,e){if(a===j)return;(i||(i=d(\"ODS\"))).bumpEntityKey(7173,\"entities.ff_js_web.\"+a+\".\"+(h||(h=c(\"AnalyticsCoreData\"))).app_id+\".\"+((a=(h||(h=c(\"AnalyticsCoreData\"))).app_version)!=null?a:\"0\")+\".\"+h.push_phase,b,e)}g.identityToString=a;g.getTaggedBitmap=b;g.xorBitmap=e;g.bumpODSMetrics=f}),98);\n__d(\"ODS\",[\"ExecutionEnvironment\",\"OdsWebBatchFalcoEvent\",\"Random\",\"Run\",\"clearTimeout\",\"gkx\",\"setTimeout\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){var h,i,j=(h||(h=c(\"ExecutionEnvironment\"))).canUseDOM||(h||c(\"ExecutionEnvironment\")).isInWorker,k={};function l(a,b,c,d,e){var f;d===void 0&&(d=1);e===void 0&&(e=1);var g=(f=k[b])!=null?f:null;if(g!=null&&g<=0)return;i=i||{};var h=i[a]||(i[a]={}),j=h[b]||(h[b]={}),l=j[c]||(j[c]=[0,null]),m=Number(d),o=Number(e);g>0&&(m\/=g,o\/=g);if(!isFinite(m)||!isFinite(o))return;l[0]+=m;if(arguments.length>=5){var p=l[1];p==null&&(p=0);l[1]=p+o}n()}var m;function n(){if(m!=null)return;m=c(\"setTimeout\")(function(){o()},c(\"gkx\")(\"20935\")?13e3\/2:5e3)}function a(a,b){if(!j)return;k[a]=d(\"Random\").random()<b?b:0}function b(a,b,c,d){d===void 0&&(d=1);if(!j)return;l(a,b,c,d)}function e(a,b,c,d,e){d===void 0&&(d=1);e===void 0&&(e=1);if(!j)return;l(a,b,c,d,e)}function o(a){a===void 0&&(a=\"normal\");if(!j)return;c(\"clearTimeout\")(m);m=null;if(i==null)return;var b=i;i=null;function d(){return{batch:b}}a===\"critical\"?c(\"OdsWebBatchFalcoEvent\").logCritical(d):c(\"OdsWebBatchFalcoEvent\").log(d)}j&&d(\"Run\").onUnload(function(){o(\"critical\")});g.setEntitySample=a;g.bumpEntityKey=b;g.bumpFraction=e;g.flush=o}),98);\n__d(\"Cookie\",[\"CookieConsent\",\"CookieCore\",\"InitialCookieConsent\",\"ODS\"],(function(a,b,c,d,e,f,g){var h,i,j;function k(a){if(!(j||(j=c(\"CookieConsent\"))).hasConsent(1)){(h||(h=d(\"ODS\"))).bumpEntityKey(798,\"defer_cookies\",\"set.\"+a);return!1}return!0}function l(){return!(i||(i=c(\"InitialCookieConsent\"))).noCookies}function a(a,b){if(!l()||!k(a))return;d(\"CookieCore\").set(a,b)}function b(a,b){if(!l())return;d(\"CookieCore\").set(a,b)}function e(a,b,c,e,f,g){if(!l()||!k(a))return;d(\"CookieCore\").setWithoutChecks(a,b,c,e,f,null,g)}a={clear:(f=d(\"CookieCore\")).clear,get:f.get,set:a,setIfFirstPartyContext:f.setIfFirstPartyContext,setWithoutCheckingUserConsent_DANGEROUS:b,setWithoutChecks:e,setWithoutChecksIfFirstPartyContext:f.setWithoutChecksIfFirstPartyContext};g[\"default\"]=a}),98);\n__d(\"Deferred\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g;(g||(g=b(\"Promise\"))).resolve();a=function(){function a(a){var c=this;a=a||g||(g=b(\"Promise\"));this.$1=!1;this.$2=new a(function(a,b){c.$3=a,c.$4=b})}var c=a.prototype;c.getPromise=function(){return this.$2};c.resolve=function(a){this.$1=!0,this.$3(a)};c.reject=function(a){this.$1=!0,this.$4(a)};c.isSettled=function(){return this.$1};return a}();f[\"default\"]=a}),66);\n__d(\"isObject\",[],(function(a,b,c,d,e,f){function a(a){var b=typeof a;return b===\"function\"||b===\"object\"&&!!a}f[\"default\"]=a}),66);\n__d(\"isStringNullOrEmpty\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a==null||a===\"\"}f[\"default\"]=a}),66);\n__d(\"memoizeOneWithArgs\",[\"areEqual\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){b===void 0&&(b=h||(h=c(\"areEqual\")));var d,e,f=!1;return function(){for(var c=arguments.length,g=new Array(c),h=0;h<c;h++)g[h]=arguments[h];if(f&&b(g,d))return e;d=g;e=a.apply(void 0,g);f=!0;return e}}g[\"default\"]=a}),98);\n__d(\"padNumber\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){a=a.toString();return a.length>=b?a:\"0\".repeat(b-a.length)+a}f[\"default\"]=a}),66);\n__d(\"DateConsts\",[],(function(a,b,c,d,e,f){var g=1e3;c=60;d=60;e=24;var h=7,i=12,j=1e3,k=30.43,l=4.333,m=365.242,n=c*d,o=n*e,p=o*h,q=o*m,r=g*c,s=r*d,t=g*o,u=t*h,v=t*m,w={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6};Object.freeze(w);function a(a,b){return new Date(a,b,0).getDate()}function b(){return Date.now()\/g}var x={instantRange:{since:-864e10,until:864e10+1}};f.MS_PER_SEC=g;f.SEC_PER_MIN=c;f.MIN_PER_HOUR=d;f.HOUR_PER_DAY=e;f.DAYS_PER_WEEK=h;f.MONTHS_PER_YEAR=i;f.US_PER_MS=j;f.AVG_DAYS_PER_MONTH=k;f.AVG_WEEKS_PER_MONTH=l;f.AVG_DAYS_PER_YEAR=m;f.SEC_PER_HOUR=n;f.SEC_PER_DAY=o;f.SEC_PER_WEEK=p;f.SEC_PER_YEAR=q;f.MS_PER_MIN=r;f.MS_PER_HOUR=s;f.MS_PER_DAY=t;f.MS_PER_WEEK=u;f.MS_PER_YEAR=v;f.DAYS=w;f.getDaysInMonth=a;f.getCurrentTimeInSeconds=b;f[\"private\"]=x}),66);\n__d(\"CurrentUser\",[\"Cookie\",\"CurrentUserInitialData\"],(function(a,b,c,d,e,f){var g,h={getID:function(){return(g||(g=b(\"CurrentUserInitialData\"))).USER_ID},getAccountID:function(){return(g||(g=b(\"CurrentUserInitialData\"))).ACCOUNT_ID},getPossiblyNonFacebookUserID:function(){var a;return(a=(g||(g=b(\"CurrentUserInitialData\"))).NON_FACEBOOK_USER_ID)!=null?a:this.getID()},getEIMU:function(){var a;return(a=(g||(g=b(\"CurrentUserInitialData\"))).IG_USER_EIMU)!=null?a:\"0\"},getEmployeeWorkUserID:function(){return(g||(g=b(\"CurrentUserInitialData\"))).WORK_USER_ID},getName:function(){return(g||(g=b(\"CurrentUserInitialData\"))).NAME},getShortName:function(){return(g||(g=b(\"CurrentUserInitialData\"))).SHORT_NAME},getEPOU:function(){var a;return(a=(g||(g=b(\"CurrentUserInitialData\"))).EPOU_ID)!=null?a:\"0\"},getEOCPU:function(){var a;return(a=(g||(g=b(\"CurrentUserInitialData\"))).EOCPU_ID)!=null?a:\"0\"},isLoggedIn:function(){return h.getPossiblyNonFacebookUserID()!==\"0\"},isLoggedInNow:function(){var a;if(!h.isLoggedIn())return!1;if((g||(g=b(\"CurrentUserInitialData\"))).IS_INTERN_SITE)return!0;if((g||(g=b(\"CurrentUserInitialData\"))).IS_ENTERPRISE_USER||(g||(g=b(\"CurrentUserInitialData\"))).IS_IMAGINE_USER||(g||(g=b(\"CurrentUserInitialData\"))).IS_INSTAGRAM_USER||(g||(g=b(\"CurrentUserInitialData\"))).IS_META_SPARK_USER||(g||(g=b(\"CurrentUserInitialData\"))).IS_OCULUS_USER||(g||(g=b(\"CurrentUserInitialData\"))).IS_TOGETHER_APP_USER||(g||(g=b(\"CurrentUserInitialData\"))).IS_WORK_MESSENGER_CALL_GUEST_USER||(g||(g=b(\"CurrentUserInitialData\"))).IS_WORK_USER||(g||(g=b(\"CurrentUserInitialData\"))).IS_WORKROOMS_USER)return!0;if((g||(g=b(\"CurrentUserInitialData\"))).ORIGINAL_USER_ID!=null&&(g||(g=b(\"CurrentUserInitialData\"))).ORIGINAL_USER_ID!=\"\")return(g||(g=b(\"CurrentUserInitialData\"))).ORIGINAL_USER_ID===b(\"Cookie\").get(\"c_user\");return(g||(g=b(\"CurrentUserInitialData\"))).IS_BUSINESS_DOMAIN===!0?(g||(g=b(\"CurrentUserInitialData\"))).USER_ID==b(\"Cookie\").get(\"c_user\"):(g||(g=b(\"CurrentUserInitialData\"))).USER_ID===((a=b(\"Cookie\").get(\"i_user\"))!=null?a:b(\"Cookie\").get(\"c_user\"))},isEmployee:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_EMPLOYEE},isTestUser:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_TEST_USER},hasWorkUser:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).HAS_WORK_USER},isWorkUser:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_WORK_USER},isWorkroomsUser:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_WORKROOMS_USER},isGray:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_GRAY},isUnderage:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_UNDERAGE},isMessengerOnlyUser:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_MESSENGER_ONLY_USER},isDeactivatedAllowedOnMessenger:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_DEACTIVATED_ALLOWED_ON_MESSENGER},isMessengerCallGuestUser:function(){return!!(g||(g=b(\"CurrentUserInitialData\"))).IS_MESSENGER_CALL_GUEST_USER},isBusinessPersonAccount:function(){return(g||(g=b(\"CurrentUserInitialData\"))).IS_BUSINESS_PERSON_ACCOUNT},hasSecondaryBusinessPerson:function(){return(g||(g=b(\"CurrentUserInitialData\"))).HAS_SECONDARY_BUSINESS_PERSON},getAppID:function(){return(g||(g=b(\"CurrentUserInitialData\"))).APP_ID},isFacebookWorkAccount:function(){return(g||(g=b(\"CurrentUserInitialData\"))).IS_FACEBOOK_WORK_ACCOUNT},getPageMessagingMailboxId:function(){var a;return String((a=(g||(g=b(\"CurrentUserInitialData\"))).PAGE_MESSAGING_MAILBOX_ID)!=null?a:\"0\")}};e.exports=h}),null);\n__d(\"objectEntries\",[],(function(a,b,c,d,e,f){function a(a){return Object.entries(a)}f[\"default\"]=a}),66);\n__d(\"MetaConfig\",[\"invariant\",\"BanzaiLazyQueue\",\"ExecutionEnvironment\",\"MetaConfigMap\"],(function(a,b,c,d,e,f,g,h){\"use strict\";var i,j={};a={_:function(a){var b=c(\"MetaConfigMap\").get(a);b!=null||h(0,57910,a);var e=b.value;b=b.log_id;b!=null&&j[a]!==!0&&((i||(i=c(\"ExecutionEnvironment\"))).isInBrowser&&d(\"BanzaiLazyQueue\").queuePost(\"metaconfig_exposure\",{identifier:a,log_id:b}),j[a]=!0);return e}};b=a;g[\"default\"]=b}),98);\n__d(\"RDFDRequireDeferredReference\",[\"RequireDeferredReference\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c(\"RequireDeferredReference\"));g[\"default\"]=a}),98);\n__d(\"RDRequireDeferredReference\",[\"RequireDeferredReference\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.disableForSSR_DO_NOT_USE=function(){this.$RDRequireDeferredReference1=!1};var c=b.prototype;c.isAvailableInSSR_DO_NOT_USE=function(){return this.constructor.$RDRequireDeferredReference1};return b}(c(\"RequireDeferredReference\"));a.$RDRequireDeferredReference1=!0;g[\"default\"]=a}),98);\n__d(\"qpl\",[\"QPLHasteSupportDataStorage\",\"recoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={};a={_:function(a,b){var d=h[b];if(d==null){var e=c(\"QPLHasteSupportDataStorage\").get(b);e==null?(c(\"recoverableViolation\")(\"Failed to find a Haste-supplied config for the QPL event \"+(\"identified by token `\"+b+\"`.\"),\"staticresources\"),d={i:a}):d=babelHelpers[\"extends\"]({i:a},e);h[b]=d}return d}};b=a;g[\"default\"]=b}),98);\n__d(\"requireDeferred\",[\"RDRequireDeferredReference\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={};function i(a,b){h[a]=b}function j(a){return h[a]}function a(a){var b=j(a);if(b)return b;b=new(c(\"RDRequireDeferredReference\"))(a);i(a,b);return b}g[\"default\"]=a}),98);\n__d(\"requireDeferredForDisplay\",[\"RDFDRequireDeferredReference\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return new(c(\"RDFDRequireDeferredReference\"))(a)}g[\"default\"]=a}),98);\n__d(\"Locale\",[\"SiteData\"],(function(a,b,c,d,e,f){function a(){return b(\"SiteData\").is_rtl}e.exports={isRTL:a}}),null);\n__d(\"IntlCLDRNumberType01\",[\"IntlVariations\"],(function(a,b,c,d,e,f,g){\"use strict\";a={getVariation:function(a){return c(\"IntlVariations\").NUMBER_OTHER}};b=a;g[\"default\"]=b}),98);\n__d(\"IntlCLDRNumberType05\",[\"IntlVariations\"],(function(a,b,c,d,e,f,g){\"use strict\";a={getVariation:function(a){if(a===1)return c(\"IntlVariations\").NUMBER_ONE;else return c(\"IntlVariations\").NUMBER_OTHER}};b=a;g[\"default\"]=b}),98);\n__d(\"IntlCLDRNumberType09\",[\"IntlVariations\"],(function(a,b,c,d,e,f,g){\"use strict\";a={getVariation:function(a){if(a===1)return c(\"IntlVariations\").NUMBER_ONE;else return c(\"IntlVariations\").NUMBER_OTHER}};b=a;g[\"default\"]=b}),98);\n__d(\"PerfFalcoEvent\",[\"FalcoLoggerInternal\",\"getFalcoLogPolicy_DO_NOT_USE\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"getFalcoLogPolicy_DO_NOT_USE\")(\"1744178\");b=d(\"FalcoLoggerInternal\").create(\"perf\",a);e=b;g[\"default\"]=e}),98);\n__d(\"Qe2JsExposureFalcoEvent\",[\"FalcoLoggerInternal\",\"getFalcoLogPolicy_DO_NOT_USE\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"getFalcoLogPolicy_DO_NOT_USE\")(\"1837559\");b=d(\"FalcoLoggerInternal\").create(\"qe2_js_exposure\",a);e=b;g[\"default\"]=e}),98);\n__d(\"USIDFlag\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){a=b(\"$InternalEnum\")({HTTP_HEADER_SESSION:\"HH\",LOCAL_STORAGE_FAILURE:\"LSF\",SERVER_GENERATED_SESSION:\"SGS\",SERVER_PARSE_FAILURE:\"SPF\",SESSION_STORAGE_FAILURE:\"SSF\",UNKNOWN_VERSION_FAILURE:\"UVF\",UNKOWN_DATA_FAILURE:\"UDF\"});c=a;f[\"default\"]=c}),66);\n__d(\"ServerHTML.react\",[\"react\"],(function(a,b,c,d,e,f,g){var h,i=h||d(\"react\");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.elementRef=i.createRef(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.render=function(){var a=this.props,b=a.blob;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"blob\"]);return typeof b===\"string\"?i.jsx(\"div\",babelHelpers[\"extends\"]({},a,{ref:this.elementRef,children:b})):i.jsx(\"div\",babelHelpers[\"extends\"]({},a,{ref:this.elementRef,dangerouslySetInnerHTML:b}))};return b}(i.Component);g[\"default\"]=a}),98);\n__d(\"USIDUtils\",[\"Cookie\",\"Random\",\"WebStorage\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=4294967295,j=36,k=\"usidt\",l=\"usida\",m=1,n=6;function a(){var a=[];(h||(h=c(\"WebStorage\"))).isLocalStorageQuotaExceeded()&&a.push(\"LSF\");(h||(h=c(\"WebStorage\"))).isSessionStorageQuotaExceeded()&&a.push(\"SSF\");return a}function o(a){var b=Math.floor(Date.now()\/1e3),c=Math.floor(d(\"Random\").random()*i);a=a+Number(b&i).toString(j)+c.toString(j);return a}function p(a,b,c){if(a==null)return{ver:m,id:o(c)};a=a.getItem(b);if(a==null)return{ver:m,id:o(c)};b=JSON.parse(a);return b.ver!==m?{ver:m,id:o(c)}:b}function q(a,b,d){if(a==null)return;(h||(h=c(\"WebStorage\"))).setItemGuarded(a,b,JSON.stringify(d))}function r(a,b){if(c(\"Cookie\")==null)return{ver:m,id:o(b)};a=c(\"Cookie\").get(a);if(a==null||a==\"\")return{ver:m,id:o(b)};var d;try{d=JSON.parse(a)}catch(b){d=JSON.parse(atob(a))}return d.ver!==m?{ver:m,id:o(b)}:d}function s(a,b){if(c(\"Cookie\")==null)return;c(\"Cookie\").set(a,btoa(JSON.stringify(b)))}function b(){var a=p((h||(h=c(\"WebStorage\"))).getSessionStorageForRead(),k,\"T\");return a.id}function e(a){q((h||(h=c(\"WebStorage\"))).getSessionStorage(),k,{ver:m,id:a})}function t(){var a,b=r(l,\"A\");return{id:b.id,time:(a=b.time)!=null?a:0,startTime:(a=b.startTime)!=null?a:0}}function f(a){s(l,{ver:m,id:a.id,time:a.time});var b=t();return b.id===a.id&&b.time===a.time}g.VERSION=n;g.getFlags=a;g.generateId=o;g.getExistingTabId=b;g.writeTabId=e;g.getExistingActivityInfo=t;g.writeActivityInfo=f}),98);\n__d(\"USIDCore\",[\"DateConsts\",\"USIDUtils\",\"asyncParams\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=30,i=d(\"DateConsts\").MIN_PER_HOUR*5,j=2,k=\"__usid\";function l(){return Math.floor(Date.now()\/d(\"DateConsts\").MS_PER_SEC)}a=function(){function a(a,b,c,e,f,g){this.$1=a;this.$2=b;this.$3=c;this.$8=e;this.$9=f;this.$4=g.activityTrigger;this.$5=((b=g.activityTimeoutInMin)!=null?b:h)*60;this.$6=((c=g.activityMaxTimeInMin)!=null?c:i)*60;this.$7=((e=g.activityCacheTimeoutInMin)!=null?e:j)*60;this.$10=0;d(\"USIDUtils\").writeTabId(a);this.triggerActivity()}var b=a.prototype;b.getFlags=function(){return this.$9};b.getRequestVersion=function(){return this.$8};b.getSessionVersion=function(){return d(\"USIDUtils\").VERSION};b.getTabId=function(){return this.$1};b.getPageId=function(){return this.$2};b.getTransitionId=function(){return this.$3};b.getActivityId=function(){var a=this.$11();return a.id};b.getActivityTimeOut=function(){var a=d(\"USIDUtils\").getExistingActivityInfo(),b=l();return this.$5-(b-a.time)};b.getActivityMaxTime=function(){var a=d(\"USIDUtils\").getExistingActivityInfo(),b=l();return this.$6-(b-a.startTime)};b.getSessionID=function(){return this.getTabId()+\":\"+this.getPageId()+\":\"+this.getTransitionId()+\"-\"+this.getActivityId()};b.serializeForRequest=function(){this.$4===\"request\"&&this.triggerActivity();return this.$12()};b.$12=function(){var a=this.getSessionVersion(),b=this.getSessionID(),c=this.getRequestVersion(),d=this.getFlags().join(\",\");return a+\"-\"+b+\"-RV=\"+c+\":F=\"+d};b.contextData=function(){return{usid_override:\"\"}};b.$11=function(){var a=d(\"USIDUtils\").getExistingActivityInfo(),b=this.$13(a);b&&this.$14(a);return a};b.$14=function(a){a=d(\"USIDUtils\").writeActivityInfo(a);a&&d(\"asyncParams\").add(k,this.$12())};b.$13=function(a){var b=l();if(b-a.time>this.$5){a.id=d(\"USIDUtils\").generateId(\"A\");a.time=b;a.startTime=b;return!0}return!1};b.triggerActivity=function(){var a=l();if(a-this.$10>this.$7){var b=this.$11();b.time=a;this.$14(b);this.$10=a}};b.nextTransition=function(){this.triggerActivity(),this.$3++};return a}();g[\"default\"]=a}),98);\n__d(\"USID\",[\"USIDCore\",\"USIDMetadata\",\"USIDUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null,i=function(a){if(h!=null)return h;var b=d(\"USIDUtils\").getExistingTabId(),e=c(\"USIDMetadata\").page_id,f=c(\"USIDMetadata\").transition_id,g=c(\"USIDMetadata\").version,i=d(\"USIDUtils\").getFlags();h=new(c(\"USIDCore\"))(b,e,f,g,i,a);return h};a=function(){return i({activityTrigger:\"request\"})};b={init:i,get:a};g[\"default\"]=b}),98);\n__d(\"CurrentLocale\",[\"IntlCurrentLocale\"],(function(a,b,c,d,e,f,g){\"use strict\";a={get:function(){return c(\"IntlCurrentLocale\").code}};b=a;g[\"default\"]=b}),98);\n__d(\"PerfXSharedFields\",[\"CurrentLocale\",\"Locale\",\"SiteData\"],(function(a,b,c,d,e,f,g){var h=typeof window!==\"undefined\"?window:self,i={addCommonValues:function(a){var b=h==null?void 0:h.navigator;try{b&&typeof b.hardwareConcurrency===\"number\"&&(a.num_cores=Math.floor(b.hardwareConcurrency)),b&&b.deviceMemory&&(a.ram_gb=b.deviceMemory),b&&b.connection&&(typeof b.connection.downlink===\"number\"&&(a.downlink_megabits=b.connection.downlink),typeof b.connection.effectiveType===\"string\"&&(a.effective_connection_type=b.connection.effectiveType),typeof b.connection.rtt===\"number\"&&(a.rtt_ms=b.connection.rtt))}catch(a){if(a.message!==\"can't access dead object\")throw a}a.client_push_phase=c(\"SiteData\").push_phase;a.client_revision=c(\"SiteData\").client_revision;c(\"SiteData\").server_revision!=null&&(a.server_revision=c(\"SiteData\").server_revision);a.locale=c(\"CurrentLocale\").get();a.isRTL=Number(c(\"Locale\").isRTL());return a},getCommonData:function(){var a={};i.addCommonValues(a);return a}};a=i;g[\"default\"]=a}),98);\n__d(\"QE2Logger\",[\"Qe2JsExposureFalcoEvent\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={};function a(a,b){D(a,(a=b)!=null?a:\"\",9)}function b(a,b){D(a,(a=b)!=null?a:\"\",9,!0)}function d(a){D(a,\"\",4)}function e(a){D(a,\"\",32)}function f(a){D(a,\"\",32,!0)}function i(a){D(a,\"\",54)}function j(a,b){D(a,b,3)}function k(a){D(a,\"\",5)}function l(a){D(a,\"\",5,!0)}function m(a){D(a,\"\",31)}function n(a){D(a,\"\",98)}function o(a,b){D(a,b,7)}function p(a,b){D(a,b,55)}function q(a,b){D(a,b,17)}function r(a,b){D(a,b,25)}function s(a,b){D(a,b,8)}function t(a,b){D(a,b,22)}function u(a,b){D(a,b,27)}function v(a,b){D(a,b,0)}function w(a,b){D(a,(a=b)!=null?a:\"\",89)}function x(a,b){D(a,(a=b)!=null?a:\"\",89,!0)}function y(a,b){D(a,b,60)}function z(a,b){D(a,b,90)}function A(a,b){D(a,b,144)}function B(a,b,c){D(a,b,c)}function C(a,b,c){D(a,b,c,!0)}function D(a,b,d,e){var f=a+\"|\"+b;if(h[f])return;e===!0?c(\"Qe2JsExposureFalcoEvent\").logImmediately(function(){return{universe:a,unit_id:b,unit_type:d}}):c(\"Qe2JsExposureFalcoEvent\").log(function(){return{universe:a,unit_id:b,unit_type:d}});h[f]=!0}g.logExposureForUser=a;g.logExposureForUserImmediately=b;g.logExposureForIGDjangoUser=d;g.logExposureForIGUser=e;g.logExposureForIGUserImmediately=f;g.logExposureForIGWebCookie=i;g.logExposureForEmail=j;g.logExposureForDatr=k;g.logExposureForDatrImmediately=l;g.logExposureForOculusLoggedOut=m;g.logExposureForOculusLoggedOutCookieID=n;g.logExposureForPage=o;g.logExposureForPaymentAccountID=p;g.logExposureForBusiness=q;g.logExposureForGroup=r;g.logExposureForPhoneNumber=s;g.logExposureForScimCompanyID=t;g.logExposureForAnalyticsEntityID=u;g.logExposureForAdAccountID=v;g.logExposureForActingAccount=w;g.logExposureForActingAccountImmediately=x;g.logExposureForMixedUserAndPage=y;g.logExposureForCommerceMerchantSettings=z;g.logExposureForShopifyApplicationInstallationID=A;g.logExposure=B;g.logExposureImmediately=C}),98);\n__d(\"QPLEvent\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a.i}function b(a){return(a=a.r)!=null?a:0}function c(a){return(a=a.m)!=null?a:1}f.getMarkerId=a;f.getSampleRate=b;f.getSamplingMethod=c}),66);\n__d(\"QPLTimestamp\",[],(function(a,b,c,d,e,f){\"use strict\";function g(a){if(a===0)return\"0\";a=a.toFixed(6).split(\".\",2);var b=a[0];a=a[1];return b===\"0\"?a.replace(\/^0+\/,\"\"):b+a}function a(a,b){b=b-a;return g(b)}f.timestampToSerializedNanoseconds=g;f.calculateDurationAsNanoseconds=a}),66);\n__d(\"crc32\",[],(function(a,b,c,d,e,f){function b(a){var b=-1;for(var c=0,d=a.length;c<d;c++)b=b>>>8^g[(b^a.charCodeAt(c))&255];return~b}var g=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];a.Int32Array!==void 0&&(g=new Int32Array(g));f[\"default\"]=b}),66);\n__d(\"QPLUtils\",[\"crc32\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){return c(\"crc32\")(a)>>>0}function a(a){return a!=null?h(a):0}g.unsignedCrc32=h;g.deriveInstanceKey=a}),98);\n__d(\"QuickPerformanceLoggerTypes\",[],(function(a,b,c,d,e,f){\"use strict\";a=1;b=3;f.EVENT_BASED_SAMPLING=a;f.USER_BASED_SAMPLING=b}),66);\n__d(\"uuidv4\",[],(function(a,b,c,d,e,f){\"use strict\";function a(){var a;a=(a=self)==null?void 0:(a=a.crypto)==null?void 0:a.randomUUID;return typeof a===\"function\"?self.crypto.randomUUID():\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\/[xy]\/g,function(a){var b=Math.random()*16|0;a=a===\"x\"?b:b&3|8;return a.toString(16)})}f[\"default\"]=a}),66);\n__d(\"QPLCore\",[\"QPLEvent\",\"QPLTimestamp\",\"QPLUtils\",\"QuickPerformanceLoggerTypes\",\"uuidv4\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a,b,c,d){var e=b[a];if(!e||Object.entries(e).length===0)return null;var f={};Object.keys(e).forEach(function(a){var b=e[a];b==null||b.length===0?delete e[a]:d?f[a]=d(b):f[a]=b});return b={},b[a]=babelHelpers[\"extends\"]({},c&&c[a],f),b}function j(a,b){if(a==null)return b;var c=babelHelpers[\"extends\"]({},b,i(\"string\",a,b),i(\"int\",a,b,Math.trunc),i(\"double\",a,b),i(\"bool\",a,b),i(\"string_array\",a,b),i(\"int_array\",a,b,function(a){return a.map(Math.trunc)}),i(\"double_array\",a,b),i(\"bool_array\",a,b));Object.keys(c).forEach(function(a){var b=c[a];(b==null||Object.entries(b).length===0)&&delete c[a]});return Object.entries(c).length!==0?c:null}function k(a,b){var c={};o.isMarkerTracked(b)&&(c.tracked_for_loss=!0);typeof b.absoluteTimeOrigin===\"number\"&&(c.absolute_time_origin_ns=d(\"QPLTimestamp\").timestampToSerializedNanoseconds(b.absoluteTimeOrigin));b=babelHelpers[\"extends\"]({},a,c);return b}function l(a,b){if(!b)return a;var c={};b.string&&(c.annotations=b.string);b[\"int\"]&&(c.annotations_int=b[\"int\"]);b[\"double\"]&&(c.annotations_double=b[\"double\"]);b.bool&&(c.annotations_bool=b.bool);b.string_array&&(c.annotations_string_array=b.string_array);b.int_array&&(c.annotations_int_array=b.int_array);b.double_array&&(c.annotations_double_array=b.double_array);b.bool_array&&(c.annotations_bool_array=b.bool_array);return babelHelpers[\"extends\"]({},a,c)}var m=new Map([[d(\"QuickPerformanceLoggerTypes\").EVENT_BASED_SAMPLING,\"random_sampling\"],[d(\"QuickPerformanceLoggerTypes\").USER_BASED_SAMPLING,\"per_user\"]]);function n(a,b){if(a===0)return!1;if(a<=1)return!0;return typeof b===\"string\"?d(\"QPLUtils\").unsignedCrc32(b)%a===0:Math.random()*a<=1}var o=function(){function a(a){this.$2=1;this.$3=100;this.$4=new Map();this.$5=new Map();this.$6=null;this.$8=new Map();this.activeMarkers=new Map();this.$1=a;this.$7=a.logger;this.$5=(a=a.listenersWithMarker)!=null?a:new Map();this.$9=new Map()}var b=a.prototype;b.getMarker=function(a,b){a=this.$10((h||(h=d(\"QPLEvent\"))).getMarkerId(a));if(!a)return null;a=a.get(b);return!a?null:a};b.isMarkerOn=function(a,b){b===void 0&&(b=0);a=this.$10((h||(h=d(\"QPLEvent\"))).getMarkerId(a));if(!a)return!1;a=a.get(b);return!!a};a.isMarkerTracked=function(a){return a.trackedForLoss===!0||a.type===2};b.$10=function(a){return this.activeMarkers.get(a)};b.addMarker=function(a,b,c){var d=this.activeMarkers.get(a);d||(d=new Map(),this.activeMarkers.set(a,d));d.set(b,c)};b.deleteMarker=function(a,b){(a=this.activeMarkers.get(a))==null?void 0:a[\"delete\"](b)};b.markerStart=function(b,c,e,f){c===void 0&&(c=0);e===void 0&&(e=this.currentTimestamp());f=f===void 0?{}:f;var g=f.cancelExisting;g=g===void 0?!1:g;var i=f.cancelOnUnload;i=i===void 0?!1:i;var j=f.trackedForLoss;j=j===void 0?!1:j;var k=f.type;k=k===void 0?1:k;var l=f.samplingBasis;l=l===void 0?null:l;var m=f.qplInternalDoNotUseAbsoluteTimeOrigin;f=f.timeoutMS;f=f===void 0?null:f;var n=this.getMarker(b,c);if(n){n=Math.round(e-n.timestamp);g&&(this.markerAnnotate(b,{string:{cancelType:\"DUPLICATE_EVENT\"},\"int\":{time_between_markers_ms:n}},{instanceKey:c}),this.markerEnd(b,4,c,e))}g=this.$11(b,l);n=g[0];l=g[1];g=g[2];var o={event:b,passesSampling:n,timestamp:e,sampleRate:l,samplingMethod:g,points:[],cancelOnUnload:i,trackedForLoss:j,type:k};typeof m===\"number\"&&(o.absoluteTimeOrigin=m);this.$4.forEach(function(a){a.onMarkerStart&&a.onMarkerStart(b,c,e)});this.$5.forEach(function(a){a.onMarkerStartWithMarker(b,c,e,o)});n&&(this.addMarker((h||(h=d(\"QPLEvent\"))).getMarkerId(b),c,o),f!=null&&this.$12(b,c,f));n&&a.isMarkerTracked(o)&&this.$13({marker_id:27787271,action_id:51,sample_rate:1,annotations_int:{tracked_marker_id:(h||(h=d(\"QPLEvent\"))).getMarkerId(b)},marker_type:1});n&&this.$4.forEach(function(a){a.onMarkerStarted&&a.onMarkerStarted(b,c,e)})};b.$14=function(a,b){var c=this.$9.get(a);c==null?void 0:c[\"delete\"](b);(c==null?void 0:c.size)===0&&this.$9[\"delete\"](a)};b.$15=function(a,b,c){this.$9.has(a)||this.$9.set(a,new Map());a=this.$9.get(a);a==null?void 0:a.set(b,c)};b.$16=function(a,b){var c,d;c=(c=this.$9.get(a))==null?void 0:c.get(b);if(!c)return;if(!((d=this.$1.runtimeAbstractionLayer)==null?void 0:d.clearTimeout))return;this.$1.runtimeAbstractionLayer.clearTimeout(c);this.$14(a,b)};b.$12=function(a,b,c){var e,f=this,g=(h||(h=d(\"QPLEvent\"))).getMarkerId(a);this.$16(g,b);if(!((e=this.$1.runtimeAbstractionLayer)==null?void 0:e.setTimeout))return;e=(e=this.$1.runtimeAbstractionLayer)==null?void 0:e.setTimeout(function(){f.$4.forEach(function(c){c.onTimeoutEvent!=null&&c.onTimeoutEvent({event:a,instanceKey:b})}),f.$14(g,b),f.markerEnd(a,113,b)},c);this.$15(g,b,e)};b.markerAnnotate=function(a,b,c){c=c===void 0?{}:c;c=c.instanceKey;var d=c===void 0?0:c;this.$4.forEach(function(c){Object.keys(b).forEach(function(e){var f=b[e];if(!f)return;Object.keys(f).forEach(function(b){c.onAnnotation&&c.onAnnotation(a,d,b,f[b])})})});c=this.getMarker(a,d);if(!c)return;c.annotations=j(b,c.annotations)};b.markerPoint=function(a,b,c){c=c===void 0?{}:c;var d=c.instanceKey,e=d===void 0?0:d,f=c.data;d=c.timestamp;var g=d===void 0?this.currentTimestamp():d;this.$4.forEach(function(c){c.onMarkerPoint&&c.onMarkerPoint(a,e,b,f,g)});c=this.getMarker(a,e);if(!c)return;d={name:b,timeSinceStart:Math.trunc(g-c.timestamp)};var h=j(f);h&&(d.data=h);c.points.push(d)};b.markerEnd=function(a,b,c,e){c===void 0&&(c=0);e===void 0&&(e=this.currentTimestamp());var f=this.getMarker(a,c);if(!f){this.$4.forEach(function(d){var f={durationMs:0};d.onMarkerEnd&&d.onMarkerEnd(b,a,c,e,f)});return}var g={marker_id:(h||(h=d(\"QPLEvent\"))).getMarkerId(a),action_id:b,instance_id:c,sample_rate:f.sampleRate,method:m.get(f.samplingMethod),duration_ns:d(\"QPLTimestamp\").calculateDurationAsNanoseconds(f.timestamp,e),points:f.points,metadata:{application_analytics:{time_since_qpl_module_init:e-this.$1.moduleLoadTimestamp}},marker_type:f.type,flags:1,unique_marker_id_debug_only:f.uniqueMarkerDebugId};g=l(g,f.annotations);var i=k(g,f);this.$4.forEach(function(d){var g={durationMs:f?e-f.timestamp:0,logData:i};d.onMarkerEnd&&d.onMarkerEnd(b,a,c,e,g)});f.passesSampling&&(f.timestampIsApproximate!==!0&&this.$13(i),this.$6===(h||(h=d(\"QPLEvent\"))).getMarkerId(a)&&this.$1.onDebuggingIdEnded&&this.$1.onDebuggingIdEnded(),this.$16((h||(h=d(\"QPLEvent\"))).getMarkerId(a),c));this.deleteMarker(h.getMarkerId(a),c)};b.markerDrop=function(a,b){b===void 0&&(b=0);this.deleteMarker((h||(h=d(\"QPLEvent\"))).getMarkerId(a),b);var c=this.currentTimestamp();this.$4.forEach(function(d){d.onMarkerDrop&&d.onMarkerDrop(a,b,c)})};b.markEvent=function(a,b,c,e){e=e===void 0?{}:e;var f=e.timestamp,g=f===void 0?this.currentTimestamp():f,i=e.annotations;this.$4.forEach(function(b){b.onMarkEvent&&b.onMarkEvent({event:a,timestamp:g,annotations:i})});if((f=this.$1.quickLogConfigHelper)==null?void 0:f.isKillswitchOn())return;e=this.$11(a);f=e[0];var k=e[1];e=e[2];if(!f)return;f=j(typeof i===\"function\"?i():i);k={marker_id:(h||(h=d(\"QPLEvent\"))).getMarkerId(a),action_id:51,instance_id:0,sample_rate:k,method:m.get(e),da_type:b,da_level:c,metadata:{application_analytics:{time_since_qpl_module_init:g-this.$1.moduleLoadTimestamp}},marker_type:1,flags:1};this.$13(l(k,f))};b.dropAllMarkers=function(){this.activeMarkers.clear()};b.setAlwaysOnSampleRate=function(a,b){this.$8.set(a,b)};b.setDefaultSampleRate=function(a){this.$3=a};b.currentTimestamp=function(){return this.$1.performanceNow()};b.enableDebug=function(a){this.$6=a};b.disableDebug=function(){this.$6=null};b.addListener=function(a){var b=this,c=this.$2++;this.$4.set(c,a);return{dispose:function(){b.$4[\"delete\"](c)}}};b.$11=function(a,b){if(this.$1.unsampleAllEvents&&this.$1.unsampleAllEvents()||this.$6===(h||(h=d(\"QPLEvent\"))).getMarkerId(a))return[!0,1,d(\"QuickPerformanceLoggerTypes\").EVENT_BASED_SAMPLING];var c=(h||(h=d(\"QPLEvent\"))).getSampleRate(a),e=h.getSamplingMethod(a);if(this.$8.get(a)==null&&c!==0&&e===d(\"QuickPerformanceLoggerTypes\").USER_BASED_SAMPLING){var f;return[!0,(f=c)!=null?f:1,d(\"QuickPerformanceLoggerTypes\").USER_BASED_SAMPLING]}f=(a=(f=this.$8.get(a))!=null?f:c)!=null?a:this.$3;a=(c=e)!=null?c:d(\"QuickPerformanceLoggerTypes\").EVENT_BASED_SAMPLING;e=n(f,b);return[e,f,a]};b.$13=function(a){this.$4.forEach(function(b){b.onUploadEvent&&b.onUploadEvent(a)});var b=this.$1.decorateEventBeforeUpload?this.$1.decorateEventBeforeUpload(a):a;this.$1.sendEvent(a,b)};b.getActiveMarkerIds=function(a){var b=a.type,c=new Set();this.activeMarkers.forEach(function(a,d){a.forEach(function(a){if(a.type===b){c.add(d);return}})});return Array.from(c)};b.forEachMarkerInstance=function(a,b){a=this.$10(a);if(!a)return;for(var a=a.entries(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];b(f,e.event)}};b.getMarkerStartTs=function(a,b){b=b===void 0?{}:b;b=b.instanceKey;b=b===void 0?0:b;a=this.getMarker(a,b);if(!a)return;return a.timestamp};b.markerLogDebugPoints=function(a,b){b=b===void 0?{}:b;b=b.instanceKey;b=b===void 0?0:b;var e=(h||(h=d(\"QPLEvent\"))).getMarkerId(a);e=this.getMarker(a,b);if(!e)return;a=c(\"uuidv4\")();e.uniqueMarkerDebugId=a};return a}();o.normalizeAnnotations=j;g[\"default\"]=o}),98);\n__d(\"QPLInspector\",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=[],this.$2={}}var b=a.prototype;b.appendLog=function(a){for(var b in this.$2){if(!Object.prototype.hasOwnProperty.call(this.$2,b)||a.marker_id!==b)continue;this.$2[a.marker_id].forEach(function(b){return b(a)})}this.$1.push(a)};b.dumpLogs=function(){return this.$1};b.addListener=function(a,b){Object.prototype.hasOwnProperty.call(this.$2,a)||(this.$2[a]=[]),this.$2[a].push(b),this.$1.forEach(function(c){c.marker_id===a&&b(c)})};b.removeListener=function(a,b){b=this.$2[a].indexOf(b);b!==-1&&this.$2[a].splice(b,1)};return a}();b=new a();f[\"default\"]=b}),66);\n__d(\"QuickPerformanceLogger\",[\"Arbiter\",\"Env\",\"FBLogger\",\"PerfFalcoEvent\",\"PerfXSharedFields\",\"Promise\",\"QPLCore\",\"QPLEvent\",\"QPLInspector\",\"Run\",\"USID\",\"WebStorage\",\"cr:1984081\",\"cr:686\",\"gkx\",\"performanceAbsoluteNow\",\"performanceNavigationStart\",\"performanceNow\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k,l,m,n=typeof window!==\"undefined\"?window:self;function o(a){var b=c(\"PerfXSharedFields\").getCommonData();b={memory_stats:{total_mem:b.ram_gb!=null?b.ram_gb*1073741824:null},network_stats:{downlink_megabits:b.downlink_megabits,network_subtype:b.effective_connection_type,rtt_ms:b.rtt_ms},sitedata_info:{client_push_phase:b.client_push_phase,client_revision:b.client_revision,server_revision:b.server_revision},locale_info:{locale:b.locale,isRTL:b.isRTL}};c(\"gkx\")(\"20836\")&&(b.workplace_info={is_gemini:c(\"gkx\")(\"21050\")});if(c(\"gkx\")(\"21051\")&&typeof n.__sapienzMetadataCallback__===\"function\"){var d=n.__sapienzMetadataCallback__();b.sapienz={request_id:String(d.requestId),config_name:String(d.configName)}}c(\"gkx\")(\"21052\")&&(b.usid={usid_override:c(\"USID\").get().serializeForRequest()});return babelHelpers[\"extends\"]({},a,{metadata:babelHelpers[\"extends\"]({},a.metadata,b)})}function p(a,b,c){return{i:a,m:c,r:b}}function q(a,d){return new(m||(m=b(\"Promise\")))(function(){var b=d||a;typeof n.__je2e_recordQPLMarker===\"function\"&&n.__je2e_recordQPLMarker(b);(i||(i=c(\"Env\"))).enable_qplinspector===!0&&c(\"QPLInspector\").appendLog(b);c(\"gkx\")(\"21053\")||c(\"gkx\")(\"20935\")||c(\"gkx\")(\"21054\")||c(\"gkx\")(\"1624\")?c(\"PerfFalcoEvent\").logImmediately(function(){return b}):c(\"gkx\")(\"21055\")?c(\"PerfFalcoEvent\").logCritical(function(){return b}):c(\"PerfFalcoEvent\").log(function(){return b})})}function r(a){a=babelHelpers[\"extends\"]({},a,{config_type:c(\"gkx\")(\"21056\")?\"alpha_beta\":\"prod\"});return o(a)}function s(){return(i||(i=c(\"Env\"))).enable_qplinspector===!0||typeof n.__je2e_recordQPLMarker===\"function\"||c(\"gkx\")(\"21057\")}function t(){c(\"Arbiter\").inform(\"qpl_debugger_finished\")}var u=(j||(j=c(\"performanceAbsoluteNow\")))();typeof n.__je2e_felabsTracePlugin_setQplInit===\"function\"&&n.__je2e_felabsTracePlugin_setQplInit((k||(k=c(\"performanceNow\")))());var v={debug:function(a,b,c){},warn:function(a){c(\"FBLogger\")(\"qpl\").blameToPreviousDirectory().warn(a)}},w=\"qpl\";a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b;b=a.call(this,{decorateEventBeforeUpload:r,unsampleAllEvents:s,onDebuggingIdEnded:t,performanceNow:j||(j=c(\"performanceAbsoluteNow\")),moduleLoadTimestamp:u,logger:v,sendEvent:q,runtimeAbstractionLayer:{setTimeout:n.setTimeout,clearTimeout:n.clearTimeout},debugLoggingEnabled:(i||(i=c(\"Env\"))).qpl_debug_logging})||this;var e=c(\"gkx\")(\"21055\")?c(\"gkx\")(\"21058\")?function(a){return d(\"Run\").onBeforeUnload(a,!1)}:d(\"Run\").onBeforeUnload:d(\"Run\").onUnload;e(function(){b.$QuickPerformanceLogger$p_1(),b.$QuickPerformanceLogger$p_2(706,{respectUnloadPolicy:!0,timestamp:b.currentTimestamp()})});b.$QuickPerformanceLogger$p_3();b.initQplFlipperPlugin();b.initQplSapienzPlugin();return b}var f=e.prototype;f.$QuickPerformanceLogger$p_3=function(){var a=this,b=(l||(l=c(\"WebStorage\"))).getSessionStorageForRead();if(!b){this.$QuickPerformanceLogger$p_4(\"#loadSavedState\",\"sessionStorage is not available\");return}var d=b.getItem(w);if(d==null)return;b.removeItem(w);b=JSON.parse(d);if(b==null){this.$QuickPerformanceLogger$p_4(\"#loadSavedState\",\"Saved state failed to deserialize\");return}if(b.markers==null||b.markers.length===0){this.$QuickPerformanceLogger$p_4(\"#loadSavedState\",\"No saved markers found\");return}b.markers.forEach(function(b){var c=b[0],d=b[1];b=b[2];a.addMarker(c,d,b);a.$QuickPerformanceLogger$p_4(\"#loadSavedState\",\"Marker \"+c+\" (instanceKey: \"+d+\") resumed\")})};f.$QuickPerformanceLogger$p_1=function(){var a=this,b=[];this.activeMarkers.forEach(function(a,c){a.forEach(function(a,d){a.resumeAfterNavigation===!0&&(delete a.resumeAfterNavigation,b.push([c,d,a]))})});if(b.length>0){var d={markers:b},e=(l||(l=c(\"WebStorage\"))).getSessionStorage();e=l.setItemGuarded(e,w,JSON.stringify(d));e&&(b.forEach(function(b){var c=b[0],d=b[1];b=b[2];c=p(c,b.sampleRate,b.samplingMethod);a.markerEnd(c,96,d)}),this.$QuickPerformanceLogger$p_4(\"#storeSavedState\",\"Failed to store saved state: \"+e.message),c(\"FBLogger\")(\"qpl\").catching(e).warn(\"Failed to store QPL state: \"+JSON.stringify(d,null,2)));b.forEach(function(b){var c=b[0];b=b[1];a.deleteMarker(c,b)})}};f.markerStoreBeforeNavigation=function(a,b){b=b===void 0?{}:b;b=b.instanceKey;b=b===void 0?0:b;var c=(h||(h=d(\"QPLEvent\"))).getMarkerId(a);a=this.getMarker(a,b);if(!a){this.$QuickPerformanceLogger$p_4(\"markerStoreBeforeNavigation\",\"Failed to set marker to store on page unload. Could not find marker \"+c+\", instancekey=\"+b);return}a.resumeAfterNavigation=!0;this.$QuickPerformanceLogger$p_4(\"markerStoreBeforeNavigation\",\"Set marker \"+c+\" to store on page unload, instancekey=\"+b)};f.markerStartFromNavStart=function(a,b,d){b===void 0&&(b=0);d=d===void 0?{}:d;var e=d.cancelExisting;e=e===void 0?!1:e;var f=d.cancelOnUnload;f=f===void 0?!1:f;var g=d.trackedForLoss;g=g===void 0?!1:g;var h=d.type;h=h===void 0?1:h;d=d.qplInternalDoNotUseConvertToTimeOnServer;var i=c(\"performanceNavigationStart\")();d=typeof d===\"function\"?d(i):void 0;this.markerStart(a,b,i,{cancelExisting:e,cancelOnUnload:f,trackedForLoss:g,type:h,qplInternalDoNotUseAbsoluteTimeOrigin:d});if(c(\"performanceNavigationStart\").isPolyfilled){i=this.getMarker(a,b);i&&(i.timestampIsApproximate=!0)}};f.$QuickPerformanceLogger$p_2=function(a,b){var c=this;b=b===void 0?{}:b;var d=b.timestamp,e=b.respectUnloadPolicy;this.activeMarkers.forEach(function(b,f){b.forEach(function(b,g){if(!e||b.cancelOnUnload===!0){b=p(f,b.sampleRate,b.samplingMethod);c.markerEnd(b,a,g,d)}})})};f.$QuickPerformanceLogger$p_4=function(a,b,c){v.debug(a,b,c)};f.initQplFlipperPlugin=function(){b(\"cr:686\")!=null&&this.addListener(b(\"cr:686\").qplFlipperPlugin.listener())};f.initQplSapienzPlugin=function(){b(\"cr:1984081\")!=null&&this.addListener(b(\"cr:1984081\").getQplSapienzListener())};return e}(c(\"QPLCore\"));e=new a();f.exports=e}),34);\n__d(\"QPLAddCometRequestHeaders\",[\"QuickPerformanceLogger\",\"cr:6895\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(){b(\"cr:6895\").registerHeaderProvider(function(){var a=(h||(h=c(\"QuickPerformanceLogger\"))).getActiveMarkerIds({type:2});if(a.length>0){var b={};b[\"X-FB-QPL-Active-Flows\"]=a.sort().join(\",\");return b}return{}})}g[\"default\"]=a}),98);\n__d(\"QPLJoinUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b,c,d){var e;e=(e=d==null?void 0:d.instanceKey)!=null?e:0;d=(d=d==null?void 0:d.timestamp)!=null?d:a.getMarkerStartTs(b,{instanceKey:e});a.markerAnnotate(b,{string:(a={},a.join_id=c,a),\"int\":(b={},b.qpl_join__absolute_time_origin_ms=d,b),bool:(c={},c.qpl_join__use_absolute_alignment=!0,c)},{instanceKey:e})}function b(a,b,c,d){var e;d=(d=d==null?void 0:d.instanceKey)!=null?d:0;a.markerAnnotate(b,{string:(e={},e.qpl_join__source=\"client\",e)},{instanceKey:d});a.markerAnnotate(b,{string:(e={},e.join_id=c,e)},{instanceKey:d})}function c(a,b,c,d){a.markerPoint(b,\"join_request_\"+c,{instanceKey:(b=d==null?void 0:d.instanceKey)!=null?b:0,timestamp:(b=d==null?void 0:d.timestamp)!=null?b:a.currentTimestamp(),data:c!=null?{string:{__key:c}}:null})}function d(a,b,c,d){var e;e=(e=d==null?void 0:d.instanceKey)!=null?e:0;d=(d=d==null?void 0:d.timestamp)!=null?d:a.currentTimestamp();a.markerPoint(b,\"join_response_\"+c,{instanceKey:e,timestamp:d,data:c!=null?{string:{__key:c}}:null})}f.setAbsoluteAlignment=a;f.setJoinId=b;f.markJoinRequest=c;f.markJoinResponse=d}),66);\n__d(\"ErrorMetadata\",[\"fb-error\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.addGlobalMetadata=function(b,c,d){a.addGlobalMetadata.call(this,b,c,d)};return b}(c(\"fb-error\").ErrorMetadata);g[\"default\"]=a}),98);\n__d(\"QPLUserFlow\",[\"ErrorMetadata\",\"ErrorPubSub\",\"QPLEvent\",\"QPLJoinUtils\",\"QuickPerformanceLogger\",\"cr:1752405\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k=typeof window!==\"undefined\"?window:self;function l(a,b){if(b===null){var c;return(c=a)!=null?c:null}a=(c=a)!=null?c:{};a.string||(a.string={});a.string.uf_debug_info=b;return a}a=function(){function a(){var a=this;b(\"cr:1752405\")();(j||(j=c(\"ErrorPubSub\"))).unshiftListener(function(b){if(b.type!==\"fatal\")return;var d=a.getActiveFlowIDs();if(d.length===0)return;var e=new(c(\"ErrorMetadata\"))();e.clearEntries();d.forEach(function(a){e.addEntry(\"QPL\",\"ACTIVE_FLOW_ID\",a.toString())});d=e.format();b.metadata?b.metadata=[].concat(b.metadata,d):b.metadata=d});this.$1=new Map()}var e=a.prototype;e.$2=function(a,b,c,e,f){var g=this,i;if(e==null)return;e=k.setTimeout(function(){f!=null&&f(a,b,c),g.endTimeout(a,{instanceKey:b,joinID:c})},e);this.$1.has((h||(h=d(\"QPLEvent\"))).getMarkerId(a))||this.$1.set((h||(h=d(\"QPLEvent\"))).getMarkerId(a),new Map());(i=this.$1.get((h||(h=d(\"QPLEvent\"))).getMarkerId(a)))==null?void 0:i.set(b,e)};e.start=function(a,b){b=b===void 0?{}:b;var e=b.instanceKey;e=e===void 0?0:e;var f=b.annotations,g=b.cancelExisting;g=g===void 0?!1:g;var h=b.cancelOnUnload;h=h===void 0?!0:h;var j=b.timestamp,k=b.trackedForLoss;k=k===void 0?!0:k;var l=b.joinID,m=b.timeoutInMs,n=b.onFlowTimeout;b=b.qplInternalDoNotUseAbsoluteTimeOrigin;(i||(i=c(\"QuickPerformanceLogger\"))).markerStart(a,e,j,{cancelExisting:g,cancelOnUnload:h,trackedForLoss:k,type:2,samplingBasis:l,qplInternalDoNotUseAbsoluteTimeOrigin:b});this.$2(a,e,l,m,n);f&&(i||(i=c(\"QuickPerformanceLogger\"))).markerAnnotate(a,f,{instanceKey:e});l!=null&&(d(\"QPLJoinUtils\").setJoinId(i||(i=c(\"QuickPerformanceLogger\")),a,l,{instanceKey:e}),d(\"QPLJoinUtils\").markJoinRequest(i,a,l,{instanceKey:e}))};e.startFromNavStart=function(a,b){b=b===void 0?{}:b;var d=b.instanceKey;d=d===void 0?0:d;var e=b.annotations,f=b.cancelExisting;f=f===void 0?!1:f;var g=b.cancelOnUnload;g=g===void 0?!0:g;var h=b.trackedForLoss;h=h===void 0?!0:h;var j=b.joinID,k=b.timeoutInMs,l=b.onFlowTimeout;b=b.qplInternalDoNotUseConvertToTimeOnServer;(i||(i=c(\"QuickPerformanceLogger\"))).markerStartFromNavStart(a,d,{cancelExisting:f,cancelOnUnload:g,trackedForLoss:h,type:2,samplingBasis:j,qplInternalDoNotUseConvertToTimeOnServer:b});this.$2(a,d,j,k,l);e&&(i||(i=c(\"QuickPerformanceLogger\"))).markerAnnotate(a,e,{instanceKey:d})};e.endSuccess=function(a,b){b=b===void 0?{}:b;var c=b.instanceKey;c=c===void 0?0:c;var d=b.annotations,e=b.joinID;b=b.timestamp;this.$3(a,2,c,e,d,b)};e.endFailure=function(a,b,c){c=c===void 0?{}:c;var d=c.instanceKey;d=d===void 0?0:d;var e=c.debugInfo,f=c.annotations,g=c.joinID,h=c.timestamp;c=c.error;this.markError(a,b,{debugInfo:e,instanceKey:d,error:c});this.$3(a,3,d,g,f,h)};e.endValidationFailure_DO_NOT_USE=function(a,b){b=b===void 0?{}:b;var c=b.instanceKey;c=c===void 0?0:c;var d=b.debugInfo,e=b.annotations,f=b.joinID;b=b.timestamp;this.markError(a,\"validation_failed\",{debugInfo:d,instanceKey:c});this.$3(a,7952,c,f,e,b)};e.endTimeout=function(a,b){b=b===void 0?{}:b;var c=b.instanceKey;c=c===void 0?0:c;var d=b.annotations,e=b.joinID;b=b.timestamp;this.$3(a,113,c,e,d,b)};e.endCancel=function(a,b){b=b===void 0?{}:b;var c=b.instanceKey;c=c===void 0?0:c;var d=b.cancelReason;d=d===void 0?4:d;var e=b.annotations,f=b.joinID;b=b.timestamp;this.$3(a,d,c,f,e,b)};e.$3=function(a,b,e,f,g,j){var l;l=(l=this.$1.get((h||(h=d(\"QPLEvent\"))).getMarkerId(a)))==null?void 0:l.get(e);if(l!=null){k.clearTimeout(l);(l=this.$1.get((h||(h=d(\"QPLEvent\"))).getMarkerId(a)))==null?void 0:l[\"delete\"](e)}g&&(i||(i=c(\"QuickPerformanceLogger\"))).markerAnnotate(a,g,{instanceKey:e});f!=null&&(j!=null?d(\"QPLJoinUtils\").markJoinResponse(i||(i=c(\"QuickPerformanceLogger\")),a,f,{instanceKey:e,timestamp:j}):d(\"QPLJoinUtils\").markJoinResponse(i||(i=c(\"QuickPerformanceLogger\")),a,f,{instanceKey:e}));j!=null?(i||(i=c(\"QuickPerformanceLogger\"))).markerEnd(a,b,e,j):(i||(i=c(\"QuickPerformanceLogger\"))).markerEnd(a,b,e)};e.addAnnotations=function(a,b,d){d=d===void 0?{}:d;d=d.instanceKey;(i||(i=c(\"QuickPerformanceLogger\"))).markerAnnotate(a,b,{instanceKey:d})};e.addPoint=function(a,b,d){d=d===void 0?{}:d;var e=d.instanceKey,f=d.debugInfo,g=d.data;d=d.timestamp;f=l(g,(g=f)!=null?g:null);(i||(i=c(\"QuickPerformanceLogger\"))).markerPoint(a,b,{data:f,instanceKey:e,timestamp:d})};e.markError=function(a,b,d){d=d===void 0?{}:d;var e=d.debugInfo,f=d.instanceKey;d=d.error;(i||(i=c(\"QuickPerformanceLogger\"))).markerAnnotate(a,babelHelpers[\"extends\"]({},this.$4(d),{bool:(d={},d.uf_has_error=!0,d)}),{instanceKey:f});this.addPoint(a,b,{debugInfo:e,instanceKey:f})};e.storeBeforeNavigation=function(a,b){b=b===void 0?{}:b;b=b.instanceKey;b=b===void 0?0:b;(i||(i=c(\"QuickPerformanceLogger\"))).markerStoreBeforeNavigation(a,{instanceKey:b})};e.getActiveFlowIDs=function(){return(i||(i=c(\"QuickPerformanceLogger\"))).getActiveMarkerIds({type:2})};e.$4=function(a){var b;if(a==null)return{};var c={\"int\":{},string:{}};c.string.uf_error_name=a.name;a=a;(a==null?void 0:(b=a.source)==null?void 0:b.code)!=null&&(c[\"int\"].uf_graphql_error_code=a==null?void 0:a.source.code);if((a==null?void 0:(b=a.source)==null?void 0:(b=b.exception)==null?void 0:b[\"class\"])!=null){c.string.uf_graphql_exception_class=a==null?void 0:(b=a.source)==null?void 0:(a=b.exception)==null?void 0:a[\"class\"]}return c};return a}();e=new a();g[\"default\"]=e}),98);\n__d(\"randomInt\",[\"invariant\"],(function(a,b,c,d,e,f,g,h){function a(a,b){a=b===void 0?[0,a]:[a,b];b=a[0];a=a[1];a>b||h(0,1180,a,b);return Math.floor(b+Math.random()*(a-b))}g[\"default\"]=a}),98);\n__d(\"ReactDOMComet\",[\"cr:1108857\",\"cr:1294159\",\"cr:734\",\"qex\"],(function(a,b,c,d,e,f,g){e=b(\"cr:734\")?b(\"cr:734\")(b(\"cr:1294159\").createPortal):b(\"cr:1294159\").createPortal;function a(a,d){return b(\"cr:1294159\").createRoot(a,babelHelpers[\"extends\"]({},d,{unstable_concurrentUpdatesByDefault:c(\"qex\")._(\"723\")?!1:(a=d==null?void 0:d.unstable_concurrentUpdatesByDefault)!=null?a:!1}))}function d(a,d,e){return b(\"cr:1294159\").hydrateRoot(a,d,babelHelpers[\"extends\"]({onRecoverableError:function(a){if(a!=null&&typeof a.message===\"string\"){var b=a.message;if(b.indexOf(\"The server could not finish this Suspense boundary\")!==-1||b.indexOf(\"Minified React error #419;\")!==-1||b.indexOf(\"This Suspense boundary received an update\")!==-1||b.indexOf(\"Minified React error #421;\")!==-1)return}typeof reportError===\"function\"&&reportError(a)}},e,{unstable_concurrentUpdatesByDefault:c(\"qex\")._(\"723\")?!1:(a=e==null?void 0:e.unstable_concurrentUpdatesByDefault)!=null?a:!1}))}g.createPortal=e;g.unstable_batchedUpdates=b(\"cr:1294159\").unstable_batchedUpdates;g.flushSync=b(\"cr:1294159\").flushSync;g.createRoot=a;g.hydrateRoot=d;g.unstable_createEventHandle=b(\"cr:1294159\").unstable_createEventHandle;g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b(\"cr:1294159\").__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;g.version=b(\"cr:1294159\").version;g.useFormStatus=b(\"cr:1294159\").useFormStatus;g.useFormState=b(\"cr:1294159\").useFormState}),98);\n__d(\"relay-runtime\/handlers\/connection\/ConnectionInterface\",[],(function(a,b,c,d,e,f){\"use strict\";var g={after:!0,before:!0,find:!0,first:!0,last:!0,surrounds:!0},h={CURSOR:\"cursor\",EDGES:\"edges\",END_CURSOR:\"endCursor\",HAS_NEXT_PAGE:\"hasNextPage\",HAS_PREV_PAGE:\"hasPreviousPage\",NODE:\"node\",PAGE_INFO_TYPE:\"PageInfo\",PAGE_INFO:\"pageInfo\",START_CURSOR:\"startCursor\"};a={inject:function(a){h=a},get:function(){return h},isConnectionCall:function(a){return Object.prototype.hasOwnProperty.call(g,a.name)}};e.exports=a}),null);\n__d(\"relay-runtime\/util\/RelayFeatureFlags\",[],(function(a,b,c,d,e,f){\"use strict\";a={ENABLE_CLIENT_EDGES:!1,ENABLE_VARIABLE_CONNECTION_KEY:!1,ENABLE_RELAY_RESOLVERS:!1,ENABLE_GETFRAGMENTIDENTIFIER_OPTIMIZATION:!1,ENABLE_FRIENDLY_QUERY_NAME_GQL_URL:!1,ENABLE_LOAD_QUERY_REQUEST_DEDUPING:!0,ENABLE_DO_NOT_WRAP_LIVE_QUERY:!1,ENABLE_NOTIFY_SUBSCRIPTION:!1,BATCH_ASYNC_MODULE_UPDATES_FN:null,ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT:!1,MAX_DATA_ID_LENGTH:null,STRING_INTERN_LEVEL:0,LOG_MISSING_RECORDS_IN_PROD:!1,ENABLE_LOOSE_SUBSCRIPTION_ATTRIBUTION:!1,ENABLE_OPERATION_TRACKER_OPTIMISTIC_UPDATES:!1,ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE:!1,ENABLE_FIELD_ERROR_HANDLING:!1,ENABLE_FIELD_ERROR_HANDLING_THROW_BY_DEFAULT:!1,ENABLE_FIELD_ERROR_HANDLING_CATCH_DIRECTIVE:!1,PROCESS_OPTIMISTIC_UPDATE_BEFORE_SUBSCRIPTION:!1};e.exports=a}),null);\n__d(\"relay-runtime\/util\/StringInterner\",[],(function(a,b,c,d,e,f){\"use strict\";var g=new Map(),h=1,i=a(),j=\"\\t\",k=\"\\v\";function a(){var a=new Set();for(var b=0;b<10;++b)a.add(b.toString());return a}function l(a){return a[0]===j&&i.has(a[1])||a[0]===k?k+a:a}function b(a,b){if(b==null||a.length<b)return l(a);b=g.get(a);if(b!=null)return b;b=j+h++;g.set(a,b);return b}e.exports={intern:b}}),null);\n__d(\"relay-runtime\/store\/ClientID\",[\"relay-runtime\/util\/RelayFeatureFlags\",\"relay-runtime\/util\/StringInterner\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/util\/StringInterner\").intern,h=\"client:\";function a(a,c,d){a=b(\"relay-runtime\/util\/RelayFeatureFlags\").STRING_INTERN_LEVEL<=0?a:g(a,b(\"relay-runtime\/util\/RelayFeatureFlags\").MAX_DATA_ID_LENGTH);a=a+\":\"+c;d!=null&&(a+=\":\"+d);a.indexOf(h)!==0&&(a=h+a);return a}function c(a){return a.indexOf(h)===0}var i=0;function d(){return h+\"local:\"+i++}function f(a,b,c){a=\"\"+h+a+\":\"+b;c!=null&&(a+=\":\"+c);return a}e.exports={generateClientID:a,generateClientObjectClientID:f,generateUniqueClientID:d,isClientID:c}}),null);\n__d(\"relay-runtime\/util\/RelayConcreteNode\",[],(function(a,b,c,d,e,f){\"use strict\";a={ACTOR_CHANGE:\"ActorChange\",CONDITION:\"Condition\",CLIENT_COMPONENT:\"ClientComponent\",CLIENT_EDGE_TO_SERVER_OBJECT:\"ClientEdgeToServerObject\",CLIENT_EDGE_TO_CLIENT_OBJECT:\"ClientEdgeToClientObject\",CLIENT_EXTENSION:\"ClientExtension\",DEFER:\"Defer\",CONNECTION:\"Connection\",FRAGMENT:\"Fragment\",FRAGMENT_SPREAD:\"FragmentSpread\",INLINE_DATA_FRAGMENT_SPREAD:\"InlineDataFragmentSpread\",INLINE_DATA_FRAGMENT:\"InlineDataFragment\",INLINE_FRAGMENT:\"InlineFragment\",LINKED_FIELD:\"LinkedField\",LINKED_HANDLE:\"LinkedHandle\",LITERAL:\"Literal\",LIST_VALUE:\"ListValue\",LOCAL_ARGUMENT:\"LocalArgument\",MODULE_IMPORT:\"ModuleImport\",ALIASED_FRAGMENT_SPREAD:\"AliasedFragmentSpread\",ALIASED_INLINE_FRAGMENT_SPREAD:\"AliasedInlineFragmentSpread\",RELAY_RESOLVER:\"RelayResolver\",RELAY_LIVE_RESOLVER:\"RelayLiveResolver\",REQUIRED_FIELD:\"RequiredField\",OBJECT_VALUE:\"ObjectValue\",OPERATION:\"Operation\",REQUEST:\"Request\",ROOT_ARGUMENT:\"RootArgument\",SCALAR_FIELD:\"ScalarField\",SCALAR_HANDLE:\"ScalarHandle\",SPLIT_OPERATION:\"SplitOperation\",STREAM:\"Stream\",TYPE_DISCRIMINATOR:\"TypeDiscriminator\",UPDATABLE_QUERY:\"UpdatableQuery\",VARIABLE:\"Variable\"};e.exports=a}),null);\n__d(\"relay-runtime\/util\/RelayDefaultHandleKey\",[],(function(a,b,c,d,e,f){\"use strict\";e.exports={DEFAULT_HANDLE_KEY:\"\"}}),null);\n__d(\"relay-runtime\/util\/getRelayHandleKey\",[\"invariant\",\"relay-runtime\/util\/RelayDefaultHandleKey\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/util\/RelayDefaultHandleKey\").DEFAULT_HANDLE_KEY;function a(a,b,c){if(b&&b!==h)return\"__\"+b+\"_\"+a;c!=null||g(0,3311);return\"__\"+c+\"_\"+a}e.exports=a}),null);\n__d(\"relay-runtime\/util\/stableCopy\",[],(function(a,b,c,d,e,f){\"use strict\";function g(a){if(!a||typeof a!==\"object\")return a;if(Array.isArray(a))return a.map(g);var b=Object.keys(a).sort(),c={};for(var d=0;d<b.length;d++)c[b[d]]=g(a[b[d]]);return c}e.exports=g}),null);\n__d(\"relay-runtime\/store\/RelayStoreUtils\",[\"invariant\",\"relay-runtime\/util\/RelayConcreteNode\",\"relay-runtime\/util\/getRelayHandleKey\",\"relay-runtime\/util\/stableCopy\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=(i=b(\"relay-runtime\/util\/RelayConcreteNode\")).VARIABLE,k=i.LITERAL,l=i.OBJECT_VALUE,m=i.LIST_VALUE;i=\"__errors\";var n=\"__module_component_\",o=\"__module_operation_\";function p(a,b){if(a.kind===j)return t(a.variableName,b);else if(a.kind===k)return a.value;else if(a.kind===l){var c={};a.fields.forEach(function(a){c[a.name]=p(a,b)});return c}else if(a.kind===m){var d=[];a.items.forEach(function(a){a!=null?d.push(p(a,b)):null});return d}}function q(a,b,c){var d={};c&&(d[v.FRAGMENT_POINTER_IS_WITHIN_UNMATCHED_TYPE_REFINEMENT]=!0);a&&a.forEach(function(a){d[a.name]=p(a,b)});return d}function a(a,c){var d=a.dynamicKey,e=a.handle,f=a.key,g=a.name,h=a.args,i=a.filters;a=b(\"relay-runtime\/util\/getRelayHandleKey\")(e,f,g);e=null;h&&i&&h.length!==0&&i.length!==0&&(e=h.filter(function(a){return i.indexOf(a.name)>-1}));d&&(e=e!=null?[d].concat(e):[d]);if(e===null)return a;else return s(a,q(e,c))}function c(a,b){if(a.storageKey)return a.storageKey;var c=r(a);a=a.name;return c&&c.length!==0?s(a,q(c,b)):a}function r(a){if(a.kind===\"RelayResolver\"||a.kind===\"RelayLiveResolver\"){if(a.args==null){var b;return(b=a.fragment)==null?void 0:b.args}return((b=a.fragment)==null?void 0:b.args)==null?a.args:a.args.concat(a.fragment.args)}b=typeof a.args===\"undefined\"?void 0:a.args;return b}function d(a,c){return s(a,(h||(h=b(\"relay-runtime\/util\/stableCopy\")))(c))}function s(a,b){if(!b)return a;var c=[];for(var d in b)if(Object.prototype.hasOwnProperty.call(b,d)){var e=b[d];if(e!=null){c.push(d+\":\"+((e=JSON.stringify(e))!=null?e:\"undefined\"))}}return c.length===0?a:a+(\"(\"+c.join(\",\")+\")\")}function t(a,c){Object.prototype.hasOwnProperty.call(c,a)||g(0,5557,a);return(h||(h=b(\"relay-runtime\/util\/stableCopy\")))(c[a])}function f(a){return\"\"+n+a}function u(a){return\"\"+o+a}var v={ACTOR_IDENTIFIER_KEY:\"__actorIdentifier\",CLIENT_EDGE_TRAVERSAL_PATH:\"__clientEdgeTraversalPath\",FRAGMENTS_KEY:\"__fragments\",FRAGMENT_OWNER_KEY:\"__fragmentOwner\",FRAGMENT_POINTER_IS_WITHIN_UNMATCHED_TYPE_REFINEMENT:\"$isWithinUnmatchedTypeRefinement\",FRAGMENT_PROP_NAME_KEY:\"__fragmentPropName\",MODULE_COMPONENT_KEY:\"__module_component\",ERRORS_KEY:i,ID_KEY:\"__id\",REF_KEY:\"__ref\",REFS_KEY:\"__refs\",ROOT_ID:\"client:root\",ROOT_TYPE:\"__Root\",TYPENAME_KEY:\"__typename\",INVALIDATED_AT_KEY:\"__invalidated_at\",RELAY_RESOLVER_VALUE_KEY:\"__resolverValue\",RELAY_RESOLVER_INVALIDATION_KEY:\"__resolverValueMayBeInvalid\",RELAY_RESOLVER_SNAPSHOT_KEY:\"__resolverSnapshot\",RELAY_RESOLVER_ERROR_KEY:\"__resolverError\",RELAY_RESOLVER_OUTPUT_TYPE_RECORD_IDS:\"__resolverOutputTypeRecordIDs\",formatStorageKey:s,getArgumentValue:p,getArgumentValues:q,getHandleStorageKey:a,getStorageKey:c,getStableStorageKey:d,getModuleComponentKey:f,getModuleOperationKey:u};e.exports=v}),null);\n__d(\"relay-runtime\/handlers\/connection\/ConnectionHandler\",[\"invariant\",\"relay-runtime\/handlers\/connection\/ConnectionInterface\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/util\/getRelayHandleKey\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/store\/ClientID\").generateClientID,i=b(\"relay-runtime\/store\/RelayStoreUtils\").getStableStorageKey,j=\"connection\",k=\"__connection_next_edge_index\";function a(a,c){var d,e=a.get(c.dataID);if(!e)return;var f=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get(),g=f.EDGES,i=f.END_CURSOR,j=f.HAS_NEXT_PAGE,l=f.HAS_PREV_PAGE,m=f.PAGE_INFO,n=f.PAGE_INFO_TYPE;f=f.START_CURSOR;var q=e.getLinkedRecord(c.fieldKey),r=q&&q.getLinkedRecord(m);if(!q){e.setValue(null,c.handleKey);return}var s=h(e.getDataID(),c.handleKey),t=e.getLinkedRecord(c.handleKey);d=(d=t)!=null?d:a.get(s);var u=d&&d.getLinkedRecord(m);if(!d){var v=a.create(s,q.getType());v.setValue(0,k);v.copyFieldsFrom(q);s=q.getLinkedRecords(g);s&&(s=s.map(function(b){return o(a,v,b)}),v.setLinkedRecords(s,g));e.setLinkedRecord(v,c.handleKey);u=a.create(h(v.getDataID(),m),n);u.setValue(!1,j);u.setValue(!1,l);u.setValue(null,i);u.setValue(null,f);r&&u.copyFieldsFrom(r);v.setLinkedRecord(u,m)}else{t==null&&e.setLinkedRecord(d,c.handleKey);var w=d;s=q.getLinkedRecords(g);s&&(s=s.map(function(b){return o(a,w,b)}));n=w.getLinkedRecords(g);t=w.getLinkedRecord(m);w.copyFieldsFrom(q);n&&w.setLinkedRecords(n,g);t&&w.setLinkedRecord(t,m);e=[];d=c.args;if(n&&s)if(d.after!=null){t=(q=u)==null?void 0:q.getValue(i);m=r==null?void 0:r.getValue(i);c=u&&d.after===t;q=u&&t===m;if(c||q){t=new Set();p(n,e,t);p(s,e,t)}else{b(\"warning\")(!1,\"Relay: Unexpected after cursor `%s`, edges must be fetched from the end of the list (`%s`).\",d.after,u&&u.getValue(i));return}}else if(d.before!=null)if(u&&d.before===u.getValue(f)){m=new Set();p(s,e,m);p(n,e,m)}else{b(\"warning\")(!1,\"Relay: Unexpected before cursor `%s`, edges must be fetched from the beginning of the list (`%s`).\",d.before,u&&u.getValue(f));return}else e=s;else s?e=s:e=n;e!=null&&e!==n&&w.setLinkedRecords(e,g);if(u&&r)if(d.after==null&&d.before==null)u.copyFieldsFrom(r);else if(d.before!=null||d.after==null&&d.last){u.setValue(!!r.getValue(l),l);c=r.getValue(f);typeof c===\"string\"&&u.setValue(c,f)}else if(d.after!=null||d.before==null&&d.first){u.setValue(!!r.getValue(j),j);q=r.getValue(i);typeof q===\"string\"&&u.setValue(q,i)}}}function c(a,c,d){c=b(\"relay-runtime\/util\/getRelayHandleKey\")(j,c,null);return a.getLinkedRecord(c,d)}function d(a,c,d){c=b(\"relay-runtime\/util\/getRelayHandleKey\")(j,c,null);c=i(c,d);return h(a,c)}function f(a,c,d){var e=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get(),f=e.CURSOR;e=e.EDGES;var g=a.getLinkedRecords(e);if(!g){a.setLinkedRecords([c],e);return}var h;if(d==null)h=g.concat(c);else{h=[];var i=!1;for(var j=0;j<g.length;j++){var k=g[j];h.push(k);if(k==null)continue;k=k.getValue(f);d===k&&(h.push(c),i=!0)}i||h.push(c)}a.setLinkedRecords(h,e)}function l(a,c,d,e){var f=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get();f=f.NODE;c=h(c.getDataID(),d.getDataID());var g=a.get(c);g||(g=a.create(c,e));g.setLinkedRecord(d,f);g.getValue(\"cursor\")==null&&g.setValue(null,\"cursor\");return g}function m(a,c,d){var e=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get(),f=e.CURSOR;e=e.EDGES;var g=a.getLinkedRecords(e);if(!g){a.setLinkedRecords([c],e);return}var h;if(d==null)h=[c].concat(g);else{h=[];var i=!1;for(var j=0;j<g.length;j++){var k=g[j];if(k!=null){var l=k.getValue(f);d===l&&(h.push(c),i=!0)}h.push(k)}i||h.unshift(c)}a.setLinkedRecords(h,e)}function n(a,c){var d=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get(),e=d.EDGES;d=d.NODE;var f=a.getLinkedRecords(e);if(!f)return;var g;for(var h=0;h<f.length;h++){var i=f[h],j=i&&i.getLinkedRecord(d);j!=null&&j.getDataID()===c?g===void 0&&(g=f.slice(0,h)):g!==void 0&&g.push(i)}g!==void 0&&a.setLinkedRecords(g,e)}function o(a,c,d){if(d==null)return d;var e=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get();e=e.EDGES;var f=c.getValue(k);typeof f===\"number\"||g(0,20561,k,f);e=h(c.getDataID(),e,f);a=a.create(e,d.getType());a.copyFieldsFrom(d);a.getValue(\"cursor\")==null&&a.setValue(null,\"cursor\");c.setValue(f+1,k);return a}function p(a,c,d){var e=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get();e=e.NODE;for(var f=0;f<a.length;f++){var g=a[f];if(!g)continue;var h=g.getLinkedRecord(e);h=h&&h.getDataID();if(h){if(d.has(h))continue;d.add(h)}c.push(g)}}e.exports={buildConnectionEdge:o,createEdge:l,deleteNode:n,getConnection:c,getConnectionID:d,insertEdgeAfter:f,insertEdgeBefore:m,update:a}}),null);\n__d(\"relay-runtime\/handlers\/connection\/MutationHandlers\",[\"invariant\",\"relay-runtime\/handlers\/connection\/ConnectionHandler\",\"relay-runtime\/handlers\/connection\/ConnectionInterface\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;d={update:function(a,b){var c=a.get(b.dataID);if(c!=null){c=c.getValue(b.fieldKey);typeof c===\"string\"?a[\"delete\"](c):Array.isArray(c)&&c.forEach(function(b){typeof b===\"string\"&&a[\"delete\"](b)})}}};f={update:function(a,c){var d=a.get(c.dataID);if(d==null)return;var e=c.handleArgs.connections;e!=null||g(0,23070);d=d.getValue(c.fieldKey);c=Array.isArray(d)?d:[d];c.forEach(function(c){if(typeof c===\"string\")for(var d=e,f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;var i=a.get(h);if(i==null){b(\"warning\")(!1,\"[Relay] The connection with id `%s` doesn't exist.\",h);continue}b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").deleteNode(i,c)}})}};var i={update:a((h=b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\")).insertEdgeAfter)};a={update:a(h.insertEdgeBefore)};var j={update:c(h.insertEdgeAfter)};c={update:c(h.insertEdgeBefore)};function a(a){return function(c,d){var e=c.get(d.dataID);if(e==null)return;var f=d.handleArgs.connections;f!=null||g(0,23070);var h,i;try{h=e.getLinkedRecord(d.fieldKey)}catch(a){}if(!h)try{i=e.getLinkedRecords(d.fieldKey)}catch(a){}if(h==null&&i==null){b(\"warning\")(!1,\"MutationHandlers: Expected the server edge to be non-null.\");return}e=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get();var j=e.NODE,k=e.EDGES;e=(d=i)!=null?d:[h];var l=function(){if(n){if(o>=m.length)return\"break\";d=m[o++]}else{o=m.next();if(o.done)return\"break\";d=o.value}var e=d;if(e==null)return\"continue\";var h=e.getLinkedRecord(\"node\");if(!h)return\"continue\";var i=h.getDataID();for(var h=f,l=Array.isArray(h),p=0,h=l?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var q;if(l){if(p>=h.length)break;q=h[p++]}else{p=h.next();if(p.done)break;q=p.value}q=q;var r=c.get(q);if(r==null){b(\"warning\")(!1,\"[Relay] The connection with id `%s` doesn't exist.\",q);continue}q=(q=r.getLinkedRecords(k))==null?void 0:q.some(function(a){return(a==null?void 0:(a=a.getLinkedRecord(j))==null?void 0:a.getDataID())===i});if(q)continue;q=b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").buildConnectionEdge(c,r,e);q!=null||g(0,23071);a(r,q)}};_loop:for(var m=e,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){e=l();switch(e){case\"break\":break _loop;case\"continue\":continue}}}}function c(a){return function(c,d){var e=c.get(d.dataID);if(e==null)return;var f=d.handleArgs,h=f.connections,i=f.edgeTypeName;h!=null||g(0,23070);i!=null||g(0,26584);var j,k;try{j=e.getLinkedRecord(d.fieldKey)}catch(a){}if(!j)try{k=e.getLinkedRecords(d.fieldKey)}catch(a){}if(j==null&&k==null){b(\"warning\")(!1,\"MutationHandlers: Expected target node to exist.\");return}f=b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\").get();var l=f.NODE,m=f.EDGES;d=(e=k)!=null?e:[j];e=function(){if(o){if(p>=n.length)return\"break\";f=n[p++]}else{p=n.next();if(p.done)return\"break\";f=p.value}var d=f;if(d==null)return\"continue\";var e=d.getDataID();for(var j=h,k=Array.isArray(j),q=0,j=k?j:j[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var r;if(k){if(q>=j.length)break;r=j[q++]}else{q=j.next();if(q.done)break;r=q.value}r=r;var s=c.get(r);if(s==null){b(\"warning\")(!1,\"[Relay] The connection with id `%s` doesn't exist.\",r);continue}r=(r=s.getLinkedRecords(m))==null?void 0:r.some(function(a){return(a==null?void 0:(a=a.getLinkedRecord(l))==null?void 0:a.getDataID())===e});if(r)continue;r=b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").createEdge(c,s,d,i);r!=null||g(0,23071);a(s,r)}};_loop3:for(var n=d,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){d=e();switch(d){case\"break\":break _loop3;case\"continue\":continue}}}}e.exports={AppendEdgeHandler:i,DeleteRecordHandler:d,PrependEdgeHandler:a,AppendNodeHandler:j,PrependNodeHandler:c,DeleteEdgeHandler:f}}),null);\n__d(\"relay-runtime\/handlers\/RelayDefaultHandlerProvider\",[\"invariant\",\"relay-runtime\/handlers\/connection\/ConnectionHandler\",\"relay-runtime\/handlers\/connection\/MutationHandlers\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){switch(a){case\"connection\":return b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\");case\"deleteRecord\":return b(\"relay-runtime\/handlers\/connection\/MutationHandlers\").DeleteRecordHandler;case\"deleteEdge\":return b(\"relay-runtime\/handlers\/connection\/MutationHandlers\").DeleteEdgeHandler;case\"appendEdge\":return b(\"relay-runtime\/handlers\/connection\/MutationHandlers\").AppendEdgeHandler;case\"prependEdge\":return b(\"relay-runtime\/handlers\/connection\/MutationHandlers\").PrependEdgeHandler;case\"appendNode\":return b(\"relay-runtime\/handlers\/connection\/MutationHandlers\").AppendNodeHandler;case\"prependNode\":return b(\"relay-runtime\/handlers\/connection\/MutationHandlers\").PrependNodeHandler}g(0,4515,a)}e.exports=a}),null);\n__d(\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\",[\"relay-runtime\/handlers\/connection\/ConnectionHandler\",\"warning\"],(function(a,b,c,d,e,f){\"use strict\";c=Object.freeze({RANGE_ADD:\"RANGE_ADD\",RANGE_DELETE:\"RANGE_DELETE\",NODE_DELETE:\"NODE_DELETE\"});d=Object.freeze({APPEND:\"append\",PREPEND:\"prepend\"});function a(a,b,c,d){var e=c?[c]:[],f=d?[d]:[];a.forEach(function(a){switch(a.type){case\"NODE_DELETE\":var c=g(a,b);c&&(e.push(c),f.push(c));break;case\"RANGE_ADD\":c=h(a,b);c&&(e.push(c),f.push(c));break;case\"RANGE_DELETE\":c=i(a,b);c&&(e.push(c),f.push(c));break}});return{optimisticUpdater:function(a,b){e.forEach(function(c){c(a,b)})},updater:function(a,b){f.forEach(function(c){c(a,b)})}}}function g(a,b){var c=a.deletedIDFieldName,d=k(b);return!d?null:function(a,b){b=a.getRootField(d);if(!b)return;b=b.getValue(c);b=Array.isArray(b)?b:[b];b.forEach(function(b){b&&typeof b===\"string\"&&a[\"delete\"](b)})}}function h(a,c){var d=a.parentID,e=a.connectionInfo,f=a.edgeName;if(!d){b(\"warning\")(!1,\"RelayDeclarativeMutationConfig: For mutation config RANGE_ADD to work you must include a parentID\");return null}var g=k(c);return!e||!g?null:function(a,c){c=a.get(d);if(!c)return;var h=a.getRootField(g);if(!h)return;h=h.getLinkedRecord(f);for(var i=e,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}l=l;if(!h)continue;var m=b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").getConnection(c,l.key,l.filters);if(!m)continue;var n=b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").buildConnectionEdge(a,m,h);if(!n)continue;switch(l.rangeBehavior){case\"append\":b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").insertEdgeAfter(m,n);break;case\"prepend\":b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").insertEdgeBefore(m,n);break;default:b(\"warning\")(!1,\"RelayDeclarativeMutationConfig: RANGE_ADD range behavior `%s` will not work as expected in RelayModern, supported range behaviors are 'append', 'prepend'.\",l.rangeBehavior);break}}}}function i(a,c){var d=a.parentID,e=a.connectionKeys,f=a.pathToConnection,g=a.deletedIDFieldName;if(!d){b(\"warning\")(!1,\"RelayDeclarativeMutationConfig: For mutation config RANGE_DELETE to work you must include a parentID\");return null}var h=k(c);return!h?null:function(a,b){if(!b)return;var c=[];b=b[h];if(b&&Array.isArray(g)){for(var i=g,k=Array.isArray(i),l=0,i=k?i:i[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var m;if(k){if(l>=i.length)break;m=i[l++]}else{l=i.next();if(l.done)break;m=l.value}m=m;b&&typeof b===\"object\"&&(b=b[m])}Array.isArray(b)?b.forEach(function(a){a&&a.id&&typeof a===\"object\"&&typeof a.id===\"string\"&&c.push(a.id)}):b&&b.id&&typeof b.id===\"string\"&&c.push(b.id)}else b&&typeof g===\"string\"&&typeof b===\"object\"&&(b=b[g],typeof b===\"string\"?c.push(b):Array.isArray(b)&&b.forEach(function(a){typeof a===\"string\"&&c.push(a)}));j(d,e,f,a,c)}}function j(a,c,d,e,f){b(\"warning\")(c!=null,\"RelayDeclarativeMutationConfig: RANGE_DELETE must provide a connectionKeys\");e=e.get(a);if(!e)return;if(d.length<2){b(\"warning\")(!1,\"RelayDeclarativeMutationConfig: RANGE_DELETE pathToConnection must include at least parent and connection\");return}var g=e;for(e=1;e<d.length-1;e++)g&&(g=g.getLinkedRecord(d[e]));if(!c||!g){b(\"warning\")(!1,\"RelayDeclarativeMutationConfig: RANGE_DELETE pathToConnection is incorrect. Unable to find connection with parentID: %s and path: %s\",a,d.toString());return}a=function(){if(i){if(j>=h.length)return\"break\";e=h[j++]}else{j=h.next();if(j.done)return\"break\";e=j.value}var a=e,c=b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").getConnection(g,a.key,a.filters);c&&f.forEach(function(a){b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\").deleteNode(c,a)})};for(var h=c,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){d=a();if(d===\"break\")break}}function k(a){return a.fragment.selections&&a.fragment.selections.length>0&&a.fragment.selections[0].kind===\"LinkedField\"?a.fragment.selections[0].name:null}e.exports={MutationTypes:c,RangeOperations:d,convert:a}}),null);\n__d(\"relay-runtime\/query\/GraphQLTag\",[\"invariant\",\"relay-runtime\/util\/RelayConcreteNode\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){g(0,28205)}function h(a){a=a;typeof a===\"function\"?(a=a(),b(\"warning\")(!1,\"RelayGraphQLTag: node `%s` unexpectedly wrapped in a function.\",a.kind===\"Fragment\"?a.name:a.operation.name)):a[\"default\"]&&(a=a[\"default\"]);return a}function i(a){a=h(a);return typeof a===\"object\"&&a!==null&&a.kind===b(\"relay-runtime\/util\/RelayConcreteNode\").FRAGMENT}function j(a){a=h(a);return typeof a===\"object\"&&a!==null&&a.kind===b(\"relay-runtime\/util\/RelayConcreteNode\").REQUEST}function k(a){a=h(a);return typeof a===\"object\"&&a!==null&&a.kind===b(\"relay-runtime\/util\/RelayConcreteNode\").UPDATABLE_QUERY}function l(a){a=h(a);return typeof a===\"object\"&&a!==null&&a.kind===b(\"relay-runtime\/util\/RelayConcreteNode\").INLINE_DATA_FRAGMENT}function m(a){a=h(a);i(a)||g(0,20130,JSON.stringify(a));return a}function c(a){var b;a=m(a);b=(b=a.metadata)==null?void 0:b.refetch;var c=b==null?void 0:b.connection;return b===null||typeof b!==\"object\"||c===null||typeof c!==\"object\"?null:a}function d(a){var b;a=m(a);b=(b=a.metadata)==null?void 0:b.refetch;return b===null||typeof b!==\"object\"?null:a}function f(a){a=h(a);j(a)||g(0,20129,JSON.stringify(a));return a}function n(a){a=h(a);k(a)||g(0,20129,JSON.stringify(a));return a}function o(a){a=h(a);l(a)||g(0,20131,JSON.stringify(a));return a}e.exports={getFragment:m,getNode:h,getPaginationFragment:c,getRefetchableFragment:d,getRequest:f,getUpdatableQuery:n,getInlineDataFragment:o,graphql:a,isFragment:i,isRequest:j,isUpdatableQuery:k,isInlineDataFragment:l}}),null);\n__d(\"relay-runtime\/store\/RelayConcreteVariables\",[\"invariant\",\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/store\/RelayStoreUtils\").getArgumentValues;function a(a,b,c){if(a.argumentDefinitions==null)return c;var d;a.argumentDefinitions.forEach(function(e){if(Object.prototype.hasOwnProperty.call(c,e.name))return;d=d||babelHelpers[\"extends\"]({},c);switch(e.kind){case\"LocalArgument\":d[e.name]=e.defaultValue;break;case\"RootArgument\":if(!Object.prototype.hasOwnProperty.call(b,e.name)){d[e.name]=void 0;break}d[e.name]=b[e.name];break;default:e,g(0,3322,e.kind,a.name)}});return d||c}function c(a,b,c){var d={};a.argumentDefinitions.forEach(function(a){var b=a.defaultValue;c[a.name]!=null&&(b=c[a.name]);d[a.name]=b});b!=null&&Object.keys(b).forEach(function(a){d[a]=b[a].get()});return d}function d(a,b,c){if(b==null)return a;var d=babelHelpers[\"extends\"]({},a),e=c?h(c,a):{};b.forEach(function(a){var b;b=(b=e[a.name])!=null?b:a.defaultValue;d[a.name]=b});return d}e.exports={getLocalVariables:d,getFragmentVariables:a,getOperationVariables:c}}),null);\n__d(\"relay-runtime\/store\/RelayModernSelector\",[\"invariant\",\"areEqual\",\"relay-runtime\/store\/RelayConcreteVariables\",\"relay-runtime\/store\/RelayStoreUtils\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=b(\"relay-runtime\/store\/RelayConcreteVariables\").getFragmentVariables,k=(i=b(\"relay-runtime\/store\/RelayStoreUtils\")).CLIENT_EDGE_TRAVERSAL_PATH,l=i.FRAGMENT_OWNER_KEY,m=i.FRAGMENT_POINTER_IS_WITHIN_UNMATCHED_TYPE_REFINEMENT,n=i.FRAGMENTS_KEY,o=i.ID_KEY;function p(a,b){typeof b===\"object\"&&b!==null&&!Array.isArray(b)||g(0,4618,a.name,JSON.stringify(b));var c=b[o],d=b[n],e=b[l];b=b[k];if(typeof c===\"string\"&&typeof d===\"object\"&&d!==null&&typeof d[a.name]===\"object\"&&d[a.name]!==null&&typeof e===\"object\"&&e!==null&&(b==null||Array.isArray(b))){e=e;b=b;d=d[a.name];var f=j(a,e.variables,d);d=d[m]===!0;return B(a,c,f,e,d,b)}return null}function q(a,b){var c=null;b.forEach(function(b,d){d=b!=null?p(a,b):null;d!=null&&(c=c||[],c.push(d))});if(c==null)return null;else return{kind:\"PluralReaderSelector\",selectors:c}}function r(a,b){if(b==null)return b;else if(a.metadata&&a.metadata.plural===!0){Array.isArray(b)||g(0,13882,a.name,JSON.stringify(b),a.name);return q(a,b)}else{Array.isArray(b)&&g(0,13879,a.name,JSON.stringify(b),a.name);return p(a,b)}}function a(a,b){var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=a[d],f=b[d];c[d]=r(e,f)}return c}function c(a,b){var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=a[d],f=b[d];c[d]=s(e,f)}return c}function s(a,b){if(b==null)return b;else if(a.metadata&&a.metadata.plural===!0){Array.isArray(b)||g(0,13882,a.name,JSON.stringify(b),a.name);return t(a,b)}else{Array.isArray(b)&&g(0,13881,a.name,JSON.stringify(b),a.name);return u(a,b)}}function t(a,b){var c=null;b.forEach(function(b){b=b!=null?u(a,b):null;b!=null&&(c=c||[],c.push(b))});return c}function u(a,c){typeof c===\"object\"&&c!==null&&!Array.isArray(c)||g(0,4618,a.name,JSON.stringify(c));var d=c[o];if(typeof d===\"string\")return d;b(\"warning\")(!1,\"RelayModernSelector: Expected object to contain data for fragment `%s`, got `%s`. Make sure that the parent operation\/fragment included fragment `...%s` without `@relay(mask: false)`, or `null` is passed as the fragment reference for `%s` if it's conditonally included and the condition isn't met.\",a.name,JSON.stringify(c),a.name,a.name);return null}function d(a,b){var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=a[d],f=b[d];e=v(e,f);Object.assign(c,e)}return c}function v(a,b){var c;if(b==null)return{};else if(((c=a.metadata)==null?void 0:c.plural)===!0){Array.isArray(b)||g(0,13882,a.name,JSON.stringify(b),a.name);return x(a,b)}else{Array.isArray(b)&&g(0,13881,a.name,JSON.stringify(b),a.name);return w(a,b)||{}}}function w(a,b){a=p(a,b);return!a?null:a.variables}function x(a,b){var c={};b.forEach(function(b,d){if(b!=null){d=w(a,b);d!=null&&Object.assign(c,d)}});return c}function y(a,c){return a.dataID===c.dataID&&a.node===c.node&&(h||(h=b(\"areEqual\")))(a.variables,c.variables)&&z(a.owner,c.owner)&&a.isWithinUnmatchedTypeRefinement===c.isWithinUnmatchedTypeRefinement&&A(a.clientEdgeTraversalPath,c.clientEdgeTraversalPath)}function z(a,c){if(a===c)return!0;else return a.identifier===c.identifier&&(h||(h=b(\"areEqual\")))(a.cacheConfig,c.cacheConfig)}function A(a,b){if(a===b)return!0;if(a==null||b==null||a.length!==b.length)return!1;var c=a.length;while(c--){var d=a[c],e=b[c];if(d===e)continue;if(d==null||e==null||d.clientEdgeDestinationID!==e.clientEdgeDestinationID||d.readerClientEdge!==e.readerClientEdge)return!1}return!0}function f(a,b){if(a===b)return!0;else if(a==null)return b==null;else if(b==null)return a==null;else if(a.kind===\"SingularReaderSelector\"&&b.kind===\"SingularReaderSelector\")return y(a,b);else if(a.kind===\"PluralReaderSelector\"&&b.kind===\"PluralReaderSelector\")return a.selectors.length===b.selectors.length&&a.selectors.every(function(a,c){return y(a,b.selectors[c])});else return!1}function B(a,b,c,d,e,f){e===void 0&&(e=!1);return{kind:\"SingularReaderSelector\",dataID:b,isWithinUnmatchedTypeRefinement:e,clientEdgeTraversalPath:(b=f)!=null?b:null,node:a,variables:c,owner:d}}function C(a,b,c){return{dataID:b,node:a,variables:c}}e.exports={areEqualSelectors:f,createReaderSelector:B,createNormalizationSelector:C,getDataIDsFromFragment:s,getDataIDsFromObject:c,getSingularSelector:p,getPluralSelector:q,getSelector:r,getSelectorsFromObject:a,getVariablesFromSingularFragment:w,getVariablesFromPluralFragment:x,getVariablesFromFragment:v,getVariablesFromObject:d}}),null);\n__d(\"relay-runtime\/util\/deepFreeze\",[],(function(a,b,c,d,e,f){\"use strict\";function g(a){if(!h(a))return a;Object.freeze(a);Object.getOwnPropertyNames(a).forEach(function(b){b=a[b];b&&typeof b===\"object\"&&!Object.isFrozen(b)&&g(b)});return a}function h(a){return a!=null&&(Array.isArray(a)||typeof a===\"object\"&&a.constructor===Object)}e.exports=g}),null);\n__d(\"relay-runtime\/util\/getRequestIdentifier\",[\"invariant\",\"relay-runtime\/util\/stableCopy\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,c){var d=a.cacheID!=null?a.cacheID:a.id;d!=null||g(0,22755,a.name);return d+JSON.stringify((h||(h=b(\"relay-runtime\/util\/stableCopy\")))(c))}e.exports=a}),null);\n__d(\"relay-runtime\/store\/RelayModernOperationDescriptor\",[\"relay-runtime\/store\/RelayConcreteVariables\",\"relay-runtime\/store\/RelayModernSelector\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/util\/deepFreeze\",\"relay-runtime\/util\/getRequestIdentifier\"],(function(a,b,c,d,e,f){\"use strict\";var g,h=b(\"relay-runtime\/store\/RelayConcreteVariables\").getOperationVariables,i=b(\"relay-runtime\/store\/RelayModernSelector\").createNormalizationSelector,j=b(\"relay-runtime\/store\/RelayModernSelector\").createReaderSelector,k=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_ID;function a(a,b,c,d){d===void 0&&(d=k);var e=a.operation;b=h(e,a.params.providedVariables,b);c=l(a,b,c);a={fragment:j(a.fragment,d,b,c),request:c,root:i(e,d,b)};return a}function l(a,c,d){a={identifier:b(\"relay-runtime\/util\/getRequestIdentifier\")(a.params,c),node:a,variables:c,cacheConfig:d};return a}e.exports={createOperationDescriptor:a,createRequestDescriptor:l}}),null);\n__d(\"relay-runtime\/store\/isRelayModernEnvironment\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return Boolean(a&&a[\"@@RelayModernEnvironment\"])}e.exports=a}),null);\n__d(\"relay-runtime\/mutations\/applyOptimisticMutation\",[\"invariant\",\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\",\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/store\/RelayModernOperationDescriptor\",\"relay-runtime\/store\/isRelayModernEnvironment\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/query\/GraphQLTag\").getRequest,i=b(\"relay-runtime\/store\/RelayModernOperationDescriptor\").createOperationDescriptor;function a(a,c){b(\"relay-runtime\/store\/isRelayModernEnvironment\")(a)||g(0,18234);var d=h(c.mutation);if(d.params.operationKind!==\"mutation\")throw new Error(\"commitMutation: Expected mutation operation\");var e=c.optimisticUpdater,f=c.configs,j=c.optimisticResponse;c=c.variables;c=i(d,c);if(f){f=b(\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\").convert(f,d,e);e=f.optimisticUpdater}return a.applyMutation({operation:c,response:j,updater:e})}e.exports=a}),null);\n__d(\"relay-runtime\/mutations\/commitLocalUpdate\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){a.commitUpdate(b)}e.exports=a}),null);\n__d(\"relay-runtime\/mutations\/validateMutation\",[\"relay-runtime\/util\/RelayConcreteNode\",\"warning\"],(function(a,b,c,d,e,f){\"use strict\";c=(a=b(\"relay-runtime\/util\/RelayConcreteNode\")).ACTOR_CHANGE;d=a.CLIENT_COMPONENT;f=a.CLIENT_EDGE_TO_CLIENT_OBJECT;b=a.CLIENT_EXTENSION;c=a.CONDITION;d=a.DEFER;f=a.FRAGMENT_SPREAD;b=a.INLINE_FRAGMENT;c=a.LINKED_FIELD;d=a.LINKED_HANDLE;f=a.MODULE_IMPORT;b=a.RELAY_LIVE_RESOLVER;c=a.RELAY_RESOLVER;d=a.SCALAR_FIELD;f=a.SCALAR_HANDLE;b=a.STREAM;c=a.TYPE_DISCRIMINATOR;d=Object.prototype.hasOwnProperty;f=function(){};e.exports=f}),null);\n__d(\"relay-runtime\/mutations\/commitMutation\",[\"invariant\",\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\",\"relay-runtime\/mutations\/validateMutation\",\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayModernOperationDescriptor\",\"relay-runtime\/store\/isRelayModernEnvironment\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/query\/GraphQLTag\").getRequest,i=b(\"relay-runtime\/store\/ClientID\").generateUniqueClientID,j=b(\"relay-runtime\/store\/RelayModernOperationDescriptor\").createOperationDescriptor;function a(a,c){b(\"relay-runtime\/store\/isRelayModernEnvironment\")(a)||g(0,18234);var d=h(c.mutation);if(d.params.operationKind!==\"mutation\")throw new Error(\"commitMutation: Expected mutation operation\");if(d.kind!==\"Request\")throw new Error(\"commitMutation: Expected mutation to be of type request\");var e=c.optimisticResponse,f=c.optimisticUpdater,k=c.updater,l=c.configs,m=c.cacheConfig,n=c.onError,o=c.onUnsubscribe,p=c.variables,q=c.uploadables,r=j(d,p,m,i());typeof e===\"function\"&&(e=e(),b(\"warning\")(!1,\"commitMutation: Expected `optimisticResponse` to be an object, received a function.\"));if(l){p=b(\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\").convert(l,d,f,k);f=p.optimisticUpdater;k=p.updater}var s=[];m=a.executeMutation({operation:r,optimisticResponse:e,optimisticUpdater:f,updater:k,uploadables:q}).subscribe({next:function(a){Array.isArray(a)?a.forEach(function(a){a.errors&&s.push.apply(s,a.errors)}):a.errors&&s.push.apply(s,a.errors),c.onNext==null?void 0:c.onNext()},complete:function(){var b=c.onCompleted;if(b){var d=a.lookup(r.fragment);b(d.data,s.length!==0?s:null)}},error:n,unsubscribe:o});return{dispose:m.unsubscribe}}e.exports=a}),null);\n__d(\"relay-runtime\/util\/isPromise\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a!=null&&typeof a===\"object\"&&typeof a.then===\"function\"}e.exports=a}),null);\n__d(\"relay-runtime\/network\/RelayObservable\",[\"Promise\",\"relay-runtime\/util\/isPromise\"],(function(a,b,c,d,e,f){\"use strict\";var g,h=a,i=function(){a.create=function(b){return new a(b)};function a(a){this.$1=a}a.onUnhandledError=function(a){h=a};a.from=function(a){return j(a)?k(a):b(\"relay-runtime\/util\/isPromise\")(a)?l(a):m(a)};var c=a.prototype;c[\"catch\"]=function(b){var c=this;return a.create(function(a){var d;c.subscribe({start:function(a){d=a},next:a.next,complete:a.complete,error:function(c){try{b(c).subscribe({start:function(a){d=a},next:a.next,complete:a.complete,error:a.error})}catch(b){a.error(b,!0)}}});return function(){return d.unsubscribe()}})};c.concat=function(b){var c=this;return a.create(function(a){var d;c.subscribe({start:function(a){d=a},next:a.next,error:a.error,complete:function(){d=b.subscribe(a)}});return function(){d&&d.unsubscribe()}})};c[\"do\"]=function(b){var c=this;return a.create(function(a){var d=function(c){return function(){try{b[c]&&b[c].apply(b,arguments)}catch(a){h(a,!0)}a[c]&&a[c].apply(a,arguments)}};return c.subscribe({start:d(\"start\"),next:d(\"next\"),error:d(\"error\"),complete:d(\"complete\"),unsubscribe:d(\"unsubscribe\")})})};c[\"finally\"]=function(b){var c=this;return a.create(function(a){var d=c.subscribe(a);return function(){d.unsubscribe(),b()}})};c.ifEmpty=function(b){var c=this;return a.create(function(a){var d=!1,e;e=c.subscribe({next:function(b){d=!0,a.next(b)},error:a.error,complete:function(){d?a.complete():e=b.subscribe(a)}});return function(){e&&e.unsubscribe()}})};c.subscribe=function(a){return n(this.$1,a)};c.map=function(b){var c=this;return a.create(function(a){var d=c.subscribe({complete:a.complete,error:a.error,next:function(c){try{c=b(c);a.next(c)}catch(b){a.error(b,!0)}}});return function(){d.unsubscribe()}})};c.mergeMap=function(b){var c=this;return a.create(function(d){var e=[];function f(a){this.$2=a,e.push(a)}function g(){e.splice(e.indexOf(this.$2),1),e.length===0&&d.complete()}c.subscribe({start:f,next:function(c){try{d.closed||a.from(b(c)).subscribe({start:f,next:d.next,error:d.error,complete:g})}catch(a){d.error(a,!0)}},error:d.error,complete:g});return function(){e.forEach(function(a){return a.unsubscribe()}),e.length=0}})};c.poll=function(b){var c=this;return a.create(function(a){var d,e,f=function f(){d=c.subscribe({next:a.next,error:a.error,complete:function(){e=setTimeout(f,b)}})};f();return function(){clearTimeout(e),d.unsubscribe()}})};c.toPromise=function(){var a=this;return new(g||(g=b(\"Promise\")))(function(b,c){var d=!1;a.subscribe({next:function(a){d||(d=!0,b(a))},error:c,complete:b})})};return a}();function j(a){return typeof a===\"object\"&&a!==null&&typeof a.subscribe===\"function\"}function k(a){return a instanceof i?a:i.create(function(b){return a.subscribe(b)})}function l(a){return i.create(function(b){a.then(function(a){b.next(a),b.complete()},b.error)})}function m(a){return i.create(function(b){b.next(a),b.complete()})}function n(a,b){var c=!1,d,e=function(a){return Object.defineProperty(a,\"closed\",{get:function(){return c}})};function f(){if(d){if(d.unsubscribe)d.unsubscribe();else try{d()}catch(a){h(a,!0)}d=void 0}}var g=e({unsubscribe:function(){if(!c){c=!0;try{b.unsubscribe&&b.unsubscribe(g)}catch(a){h(a,!0)}finally{f()}}}});try{b.start&&b.start(g)}catch(a){h(a,!0)}if(c)return g;e=e({next:function(a){if(!c&&b.next)try{b.next(a)}catch(a){h(a,!0)}},error:function(a,d){if(c||!b.error)c=!0,h(a,d||!1),f();else{c=!0;try{b.error(a)}catch(a){h(a,!0)}finally{f()}}},complete:function(){if(!c){c=!0;try{b.complete&&b.complete()}catch(a){h(a,!0)}finally{f()}}}});try{d=a(e)}catch(a){e.error(a,!0)}c&&f();return g}function a(a,b){}e.exports=i}),null);\n__d(\"relay-runtime\/network\/ConvertToExecuteFunction\",[\"relay-runtime\/network\/RelayObservable\"],(function(a,b,c,d,e,f){\"use strict\";function a(a){return function(c,d,e,f,g){var h=a(c,d,e,f,g);return h instanceof Error?b(\"relay-runtime\/network\/RelayObservable\").create(function(a){return a.error(h)}):b(\"relay-runtime\/network\/RelayObservable\").from(h)}}e.exports={convertFetch:a}}),null);\n__d(\"relay-runtime\/network\/RelayNetwork\",[\"invariant\",\"relay-runtime\/network\/ConvertToExecuteFunction\",\"relay-runtime\/util\/withProvidedVariables\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/network\/ConvertToExecuteFunction\").convertFetch;function a(a,c){var d=h(a);function e(a,e,f,h,i){e=b(\"relay-runtime\/util\/withProvidedVariables\")(e,a.providedVariables);if(a.operationKind===\"subscription\"){c||g(0,5158);h&&g(0,5159);return c(a,e,f)}var j=f.poll;if(j!=null){h&&g(0,5160);return d(a,e,{force:!0}).poll(j)}return d(a,e,f,h,i)}return{execute:e}}e.exports={create:a}}),null);\n__d(\"relay-runtime\/network\/RelayQueryResponseCache\",[\"invariant\",\"relay-runtime\/util\/stableCopy\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=function(){function a(a){var b=a.size;a=a.ttl;b>0||g(0,1167,b);a>0||g(0,1168,a);this.$1=new Map();this.$2=b;this.$3=a}var b=a.prototype;b.clear=function(){this.$1.clear()};b.get=function(a,b){var c=this;a=i(a,b);this.$1.forEach(function(a,b){j(a.fetchTime,c.$3)||c.$1[\"delete\"](b)});var d=this.$1.get(a);if(d==null)return null;return Array.isArray(d.payload)?d.payload.map(function(a){return babelHelpers[\"extends\"]({},a,{extensions:babelHelpers[\"extends\"]({},a.extensions,{cacheTimestamp:d.fetchTime})})}):babelHelpers[\"extends\"]({},d.payload,{extensions:babelHelpers[\"extends\"]({},d.payload.extensions,{cacheTimestamp:d.fetchTime})})};b.set=function(a,b,c){var d=Date.now();a=i(a,b);this.$1[\"delete\"](a);this.$1.set(a,{fetchTime:d,payload:c});if(this.$1.size>this.$2){b=this.$1.keys().next();b.done||this.$1[\"delete\"](b.value)}};return a}();function i(a,c){return JSON.stringify((h||(h=b(\"relay-runtime\/util\/stableCopy\")))({queryID:a,variables:c}))}function j(a,b){return a+b>=Date.now()}e.exports=a}),null);\n__d(\"relay-runtime\/query\/PreloadableQueryRegistry\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(){function a(){this.$1=new Map(),this.$2=new Map()}var b=a.prototype;b.set=function(a,b){this.$1.set(a,b);a=this.$2.get(a);a!=null&&a.forEach(function(a){try{a(b)}catch(a){setTimeout(function(){throw a},0)}})};b.get=function(a){return this.$1.get(a)};b.onLoad=function(a,b){var c,d=(c=this.$2.get(a))!=null?c:new Set();d.add(b);c=function(){d[\"delete\"](b)};this.$2.set(a,d);return{dispose:c}};b.clear=function(){this.$1.clear()};return a}();b=new a();e.exports=b}),null);\n__d(\"relay-runtime\/util\/RelayReplaySubject\",[\"invariant\",\"relay-runtime\/network\/RelayObservable\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(){function a(){var a=this;this.$1=!1;this.$2=[];this.$3=new Set();this.$5=[];this.$4=b(\"relay-runtime\/network\/RelayObservable\").create(function(b){a.$3.add(b);var c=a.$2;for(var d=0;d<c.length;d++){if(b.closed)break;var e=c[d];switch(e.kind){case\"complete\":b.complete();break;case\"error\":b.error(e.error);break;case\"next\":b.next(e.data);break;default:e.kind,g(0,14990,e.kind)}}return function(){a.$3[\"delete\"](b)}})}var c=a.prototype;c.complete=function(){if(this.$1===!0)return;this.$1=!0;this.$2.push({kind:\"complete\"});this.$3.forEach(function(a){return a.complete()})};c.error=function(a){if(this.$1===!0)return;this.$1=!0;this.$2.push({kind:\"error\",error:a});this.$3.forEach(function(b){return b.error(a)})};c.next=function(a){if(this.$1===!0)return;this.$2.push({kind:\"next\",data:a});this.$3.forEach(function(b){return b.next(a)})};c.subscribe=function(a){a=this.$4.subscribe(a);this.$5.push(a);return a};c.unsubscribe=function(){for(var a=this.$5,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.unsubscribe()}this.$5=[]};c.getObserverCount=function(){return this.$3.size};return a}();e.exports=a}),null);\n__d(\"relay-runtime\/query\/fetchQueryInternal\",[\"invariant\",\"Promise\",\"relay-runtime\/network\/RelayObservable\",\"relay-runtime\/util\/RelayReplaySubject\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;f=typeof WeakMap===\"function\";var i=f?new WeakMap():new Map();function a(a,b){return j(a,b.request.identifier,function(){return a.execute({operation:b})})}function j(a,c,d){return b(\"relay-runtime\/network\/RelayObservable\").create(function(e){var f=m(a),h=f.get(c);h||d()[\"finally\"](function(){return f[\"delete\"](c)}).subscribe({start:function(a){h={identifier:c,subject:new(b(\"relay-runtime\/util\/RelayReplaySubject\"))(),subjectForInFlightStatus:new(b(\"relay-runtime\/util\/RelayReplaySubject\"))(),subscription:a,promise:null},f.set(c,h)},next:function(a){var b=n(f,c);b.subject.next(a);b.subjectForInFlightStatus.next(a)},error:function(a){var b=n(f,c);b.subject.error(a);b.subjectForInFlightStatus.error(a)},complete:function(){var a=n(f,c);a.subject.complete();a.subjectForInFlightStatus.complete()},unsubscribe:function(a){a=n(f,c);a.subject.unsubscribe();a.subjectForInFlightStatus.unsubscribe()}});h!=null||g(0,15078);return k(f,h).subscribe(e)})}function k(a,c){return b(\"relay-runtime\/network\/RelayObservable\").create(function(b){var d=c.subject.subscribe(b);return function(){d.unsubscribe();var b=a.get(c.identifier);if(b){var e=b.subscription;e!=null&&b.subject.getObserverCount()===0&&(e.unsubscribe(),a[\"delete\"](c.identifier))}}})}function l(a,c,d){return b(\"relay-runtime\/network\/RelayObservable\").create(function(b){var c=d.subjectForInFlightStatus.subscribe({error:b.error,next:function(c){if(!a.isRequestActive(d.identifier)){b.complete();return}b.next()},complete:b.complete,unsubscribe:b.complete});return function(){c.unsubscribe()}})}function c(a,c){var d=m(a),e=d.get(c.identifier);if(!e)return null;if(!a.isRequestActive(e.identifier))return null;c=new(h||(h=b(\"Promise\")))(function(b,c){var f=!1;l(a,d,e).subscribe({complete:b,error:c,next:function(a){f&&b(a)}});f=!0});return c}function d(a,b){var c=m(a);b=c.get(b.identifier);if(!b)return null;return!a.isRequestActive(b.identifier)?null:l(a,c,b)}function m(a){var b=i.get(a);if(b!=null)return b;b=new Map();i.set(a,b);return b}function n(a,b){a=a.get(b);a!=null||g(0,15079);return a}e.exports={fetchQuery:a,fetchQueryDeduped:j,getPromiseForActiveRequest:c,getObservableForActiveRequest:d}}),null);\n__d(\"relay-runtime\/store\/RelayErrorTrie\",[\"relay-runtime\/util\/RelayFeatureFlags\"],(function(a,b,c,d,e,f){\"use strict\";var g=Symbol(\"$SELF\");f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;c===void 0&&(c=[]);d=a.call(this,b)||this;d.name=\"RelayFieldError\";d.message=b;d.errors=c;return d}return b}(babelHelpers.wrapNativeSuper(Error));function a(a){if(a==null)return null;if(!b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_FIELD_ERROR_HANDLING)return null;var c=new Map();ERRORS:for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var h=f.path;f.locations;f=babelHelpers.objectWithoutPropertiesLoose(f,[\"path\",\"locations\"]);if(h==null)continue;var i=h.length;if(i===0)continue;i=i-1;var j=c;for(var k=0;k<i;k++){var l=h[k],m=j.get(l);if(m instanceof Map){j=m;continue}var n=new Map();Array.isArray(m)&&n.set(g,m);j.set(l,n);j=n}m=h[i];l=j.get(m);l instanceof Map&&(j=l,l=j.get(m),m=g);Array.isArray(l)?l.push(f):j.set(m,[f])}return c}function c(a,b){a=a.get(b);if(a==null)return null;if(Array.isArray(a))return a;b=[];h(a,b);return b}function h(a,b){for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];var i=b.length;Array.isArray(e)?b.push.apply(b,e):h(e,b);if(f===g)continue;e=b.length;for(i=i;i<e;i++){var j=b[i];j.path==null?b[i]=babelHelpers[\"extends\"]({},j,{path:[f]}):j.path.unshift(f)}}}function d(a,b){a=a.get(b);return a instanceof Map?a:null}e.exports={SELF:g,buildErrorTrie:a,getNestedErrorTrieByKey:d,getErrorsByKey:c,RelayFieldError:f}}),null);\n__d(\"relay-runtime\/util\/handlePotentialSnapshotErrors\",[\"relay-runtime\/store\/RelayErrorTrie\",\"relay-runtime\/util\/RelayFeatureFlags\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,e,f){for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;a.relayFieldLogger({kind:\"relay_resolver.error\",owner:i.field.owner,fieldPath:i.field.path,error:i.error})}if(c(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_FIELD_ERROR_HANDLING&&f!=null){if(f!=null)for(i=f,h=Array.isArray(i),g=0,i=h?i:i[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(h){if(g>=i.length)break;e=i[g++]}else{g=i.next();if(g.done)break;e=g.value}e=e;var j=e.path,k=e.owner;e=e.error;a.relayFieldLogger({kind:\"relay_field_payload.error\",owner:k,fieldPath:j,error:e})}if(c(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_FIELD_ERROR_HANDLING_THROW_BY_DEFAULT)throw new(d(\"relay-runtime\/store\/RelayErrorTrie\").RelayFieldError)(\"Relay: Unexpected response payload - this object includes an errors property in which you can access the underlying errors\",f.map(function(a){a.path;a.owner;a=a.error;return a}))}if(b!=null)switch(b.action){case\"THROW\":e=b.field;var j=e.path,k=e.owner;a.relayFieldLogger({kind:\"missing_field.throw\",owner:k,fieldPath:j});throw new Error(\"Relay: Missing @required value at path '\"+j+\"' in '\"+k+\"'.\");case\"LOG\":b.fields.forEach(function(c){var b=c.path;c=c.owner;a.relayFieldLogger({kind:\"missing_field.log\",owner:c,fieldPath:b})});break;default:b.action}}f.exports=a}),34);\n__d(\"relay-runtime\/query\/fetchQuery\",[\"invariant\",\"relay-runtime\/network\/RelayObservable\",\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/query\/fetchQueryInternal\",\"relay-runtime\/store\/RelayModernOperationDescriptor\",\"relay-runtime\/util\/handlePotentialSnapshotErrors\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/store\/RelayModernOperationDescriptor\").createOperationDescriptor,i=b(\"relay-runtime\/query\/GraphQLTag\").getRequest;function a(a,c,d,e){c=i(c);c.params.operationKind===\"query\"||g(0,13332);var f=babelHelpers[\"extends\"]({force:!0},e==null?void 0:e.networkCacheConfig);c=h(c,d,f);f=(d=e==null?void 0:e.fetchPolicy)!=null?d:\"network-only\";function k(c){b(\"relay-runtime\/util\/handlePotentialSnapshotErrors\")(a,c.missingRequiredFields,c.relayResolverErrors,c.errorResponseFields);return c.data}switch(f){case\"network-only\":return j(a,c).map(k);case\"store-or-network\":return a.check(c).status===\"available\"?b(\"relay-runtime\/network\/RelayObservable\").from(a.lookup(c.fragment)).map(k):j(a,c).map(k);default:f;throw new Error(\"fetchQuery: Invalid fetchPolicy \"+f)}}function j(a,c){return b(\"relay-runtime\/query\/fetchQueryInternal\").fetchQuery(a,c).map(function(){return a.lookup(c.fragment)})}e.exports=a}),null);\n__d(\"relay-runtime\/query\/fetchQuery_DEPRECATED\",[\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/store\/RelayModernOperationDescriptor\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/store\/RelayModernOperationDescriptor\").createOperationDescriptor,h=b(\"relay-runtime\/query\/GraphQLTag\").getRequest;function a(a,b,c,d){b=h(b);if(b.params.operationKind!==\"query\")throw new Error(\"fetchQuery: Expected query operation\");var e=g(b,c,d);return a.execute({operation:e}).map(function(){return a.lookup(e.fragment).data}).toPromise()}e.exports=a}),null);\n__d(\"relay-runtime\/multi-actor-environment\/ActorIdentifier\",[\"invariant\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE\";function a(a){a===h||g(0,48286,a)}e.exports={assertInternalActorIdentifier:a,getActorIdentifier:function(a){return a},getDefaultActorIdentifier:function(){throw new Error(\"Not Implemented\")},INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE:h}}),null);\n__d(\"relay-runtime\/util\/generateID\",[],(function(a,b,c,d,e,f){\"use strict\";var g=1e5;function a(){return g++}e.exports=a}),null);\n__d(\"relay-runtime\/network\/wrapNetworkWithLogObserver\",[\"relay-runtime\/util\/generateID\"],(function(a,b,c,d,e,f){\"use strict\";function a(a,c){return{execute:function(d,e,f,g){var h=b(\"relay-runtime\/util\/generateID\")(),i={start:function(b){a.__log({name:\"network.start\",networkRequestId:h,params:d,variables:e,cacheConfig:f})},next:function(b){a.__log({name:\"network.next\",networkRequestId:h,response:b})},error:function(b){a.__log({name:\"network.error\",networkRequestId:h,error:b})},complete:function(){a.__log({name:\"network.complete\",networkRequestId:h})},unsubscribe:function(){a.__log({name:\"network.unsubscribe\",networkRequestId:h})}},j=function(b){a.__log({name:\"network.info\",networkRequestId:h,info:b})};return c.execute(d,e,f,g,j)[\"do\"](i)}}}e.exports=a}),null);\n__d(\"relay-runtime\/store\/experimental-live-resolvers\/LiveResolverSuspenseSentinel\",[],(function(a,b,c,d,e,f){\"use strict\";var g=Object.freeze({__LIVE_RESOLVER_SUSPENSE_SENTINEL:!0});function a(){return g}function b(a){return a===g}e.exports={isSuspenseSentinel:b,suspenseSentinel:a}}),null);\n__d(\"relay-runtime\/store\/RelayModernRecord\",[\"invariant\",\"areEqual\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/store\/experimental-live-resolvers\/LiveResolverSuspenseSentinel\",\"relay-runtime\/util\/deepFreeze\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function j(a){a=k(a,\"string\");return typeof a===\"symbol\"?a:String(a)}function k(a,b){if(typeof a!==\"object\"||a===null)return a;var c=a[typeof Symbol===\"function\"?Symbol.toPrimitive:\"@@toPrimitive\"];if(c!==void 0){c=c.call(a,b||\"default\");if(typeof c!==\"object\")return c;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(b===\"string\"?String:Number)(a)}var l=b(\"relay-runtime\/store\/ClientID\").generateClientObjectClientID,m=b(\"relay-runtime\/store\/ClientID\").isClientID,n=b(\"relay-runtime\/store\/experimental-live-resolvers\/LiveResolverSuspenseSentinel\").isSuspenseSentinel,o=(m=b(\"relay-runtime\/store\/RelayStoreUtils\")).ACTOR_IDENTIFIER_KEY,p=m.ERRORS_KEY,q=m.ID_KEY,r=m.INVALIDATED_AT_KEY,s=m.REF_KEY,t=m.REFS_KEY,u=m.RELAY_RESOLVER_VALUE_KEY,v=m.ROOT_ID,w=m.TYPENAME_KEY;function a(a){return babelHelpers[\"extends\"]({},a)}function c(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(c!==q&&c!==w&&(b[c]=a[c]))}function d(a,b){var c={};c[q]=a;c[w]=b;return c}function f(a){return a}function x(a){return a[q]}function y(a){return p in a?Object.keys(a).filter(function(a){return a!==p}):Object.keys(a)}function z(a){return a[w]}function A(a,b){return(a=a[p])==null?void 0:a[b]}function B(a,b){var c=a[b];c&&typeof c===\"object\"&&(!Object.prototype.hasOwnProperty.call(c,s)&&!Object.prototype.hasOwnProperty.call(c,t)||g(0,696,a[q],b,Object.prototype.hasOwnProperty.call(c,s)?\"a linked record\":\"plural linked records\"));return c}function C(a,b){return b in a}function D(a,b){var c=a[b];if(c==null)return c;c=c;typeof c===\"object\"&&c&&typeof c[s]===\"string\"||g(0,53158,a[q],b,JSON.stringify(c),typeof c===\"object\"&&c[t]!==void 0?\" It appears to be a plural linked record: did you mean to call getLinkedRecords() instead of getLinkedRecord()?\":\"\");return c[s]}function E(a,b){a=a[b];if(a==null)return!1;b=a;return typeof b===\"object\"&&b&&typeof b[s]===\"string\"}function F(a,b){var c=a[b];if(c==null)return c;typeof c===\"object\"&&Array.isArray(c[t])||g(0,53159,a[q],b,JSON.stringify(c),typeof c===\"object\"&&c[s]!==void 0?\" It appears to be a singular linked record: did you mean to call getLinkedRecord() instead of getLinkedRecords()?\":\"\");return c[t]}function G(a,b){a=a[b];return a==null?!1:typeof a===\"object\"&&Array.isArray(a[t])&&a[t].every(function(a){return typeof a===\"string\"})}function H(a){if(a==null)return null;a=a[r];return typeof a!==\"number\"?null:a}function I(a,c){var d=a[p],e=c[p],f=null;if(d==null&&e==null){for(var g in c)(f||!(h||(h=b(\"areEqual\")))(a[g],c[g]))&&(f=f!==null?f:babelHelpers[\"extends\"]({},a),f[g]=c[g]);return(g=f)!=null?g:a}for(g in c){if(g===p)continue;var i=c[g],j=e==null?void 0:e[g];if(f==null){var k=a[g],l=d==null?void 0:d[g];if((h||(h=b(\"areEqual\")))(k,i)&&(h||(h=b(\"areEqual\")))(l,j))continue;f=babelHelpers[\"extends\"]({},a);d!=null&&(f[p]=babelHelpers[\"extends\"]({},d))}M(f,g,i);L(f,g,j)}return(k=f)!=null?k:a}function J(a,b){if(p in a||p in b){var c=a[p],d=babelHelpers.objectWithoutPropertiesLoose(a,[p].map(j)),e=b[p],f=babelHelpers.objectWithoutPropertiesLoose(b,[p].map(j));d=babelHelpers[\"extends\"]({},d,f);if(c==null&&e==null)return d;var g={};for(var h in c){if(Object.prototype.hasOwnProperty.call(f,h))continue;g[h]=c[h]}for(c in e)g[c]=e[c];for(f in g){d[p]=g;break}return d}else return babelHelpers[\"extends\"]({},a,b)}function K(a){(i||(i=b(\"relay-runtime\/util\/deepFreeze\")))(a)}function L(a,b,c){var d=a[p];if(c!=null&&c.length>0)if(d==null){var e;a[p]=(e={},e[b]=c,e)}else d[b]=c;else if(d!=null&&delete d[b]){for(e in d)if(Object.prototype.hasOwnProperty.call(d,e))return;delete a[p]}}function M(a,b,c){a[b]=c}function N(a,b,c){var d={};d[s]=c;a[b]=d}function O(a,b,c){var d={};d[t]=c;a[b]=d}function P(a,b,c,d){var e={};e[s]=d;e[o]=c;a[b]=e}function Q(a,b){var c=a[b];if(c==null)return c;typeof c===\"object\"&&typeof c[s]===\"string\"&&c[o]!=null||g(0,45087,a[q],b,JSON.stringify(c));return[c[o],c[s]]}function R(a,b){a=B(a,u);if(a==null||n(a))return null;typeof a===\"object\"&&(a=a.id);typeof a===\"string\"||g(0,67949,JSON.stringify(a));return l(b,a)}function S(a,b){a=B(a,u);if(a==null||n(a))return null;Array.isArray(a)||g(0,67947,JSON.stringify(a));return a.map(function(a){if(a==null)return null;typeof a===\"object\"&&(a=a.id);typeof a===\"string\"||g(0,67948,JSON.stringify(a));return l(b,a)})}function T(a){return a}e.exports={clone:a,copyFields:c,create:d,freeze:K,fromObject:f,getDataID:x,getErrors:A,getFields:y,getInvalidationEpoch:H,getLinkedRecordID:D,getLinkedRecordIDs:F,getType:z,getValue:B,hasValue:C,hasLinkedRecordID:E,hasLinkedRecordIDs:G,merge:J,setErrors:L,setValue:M,setLinkedRecordID:N,setLinkedRecordIDs:O,update:I,getActorLinkedRecordID:Q,setActorLinkedRecordID:P,getResolverLinkedRecordID:R,getResolverLinkedRecordIDs:S,toJSON:T}}),null);\n__d(\"relay-runtime\/store\/RelayRecordState\",[],(function(a,b,c,d,e,f){\"use strict\";a={EXISTENT:\"EXISTENT\",NONEXISTENT:\"NONEXISTENT\",UNKNOWN:\"UNKNOWN\"};e.exports=a}),null);\n__d(\"relay-runtime\/store\/RelayRecordSource\",[\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayRecordState\"],(function(a,b,c,d,e,f){\"use strict\";var g,h=b(\"relay-runtime\/store\/RelayRecordState\").EXISTENT,i=b(\"relay-runtime\/store\/RelayRecordState\").NONEXISTENT,j=b(\"relay-runtime\/store\/RelayRecordState\").UNKNOWN;a=function(){function a(a){var c=this;this.$1=new Map();a!=null&&Object.keys(a).forEach(function(d){var e=a[d];e=(g||(g=b(\"relay-runtime\/store\/RelayModernRecord\"))).fromObject(e);c.$1.set(d,e)})}a.create=function(b){return new a(b)};var c=a.prototype;c.clear=function(){this.$1=new Map()};c[\"delete\"]=function(a){this.$1.set(a,null)};c.get=function(a){return this.$1.get(a)};c.getRecordIDs=function(){return Array.from(this.$1.keys())};c.getStatus=function(a){return!this.$1.has(a)?j:this.$1.get(a)==null?i:h};c.has=function(a){return this.$1.has(a)};c.remove=function(a){this.$1[\"delete\"](a)};c.set=function(a,b){this.$1.set(a,b)};c.size=function(){return this.$1.size};c.toJSON=function(){var a={};for(var c=this.$1,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var h=f[0];f=f[1];a[h]=(g||(g=b(\"relay-runtime\/store\/RelayModernRecord\"))).toJSON(f)}return a};return a}();e.exports=a}),null);\n__d(\"relay-runtime\/util\/RelayError\",[],(function(a,b,c,d,e,f){\"use strict\";function g(a,b,c){for(var d=arguments.length,e=new Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];var g=0,h=c.replace(\/%s\/g,function(){return String(e[g++])}),i=new Error(h),j=Object.assign(i,{name:b,messageFormat:c,messageParams:e,type:a,taalOpcodes:[2,2]});if(j.stack===void 0)try{throw j}catch(a){}return j}e.exports={create:function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return g.apply(void 0,[\"error\",a,b].concat(d))},createWarning:function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return g.apply(void 0,[\"warn\",a,b].concat(d))}}}),null);\n__d(\"relay-runtime\/util\/getOperation\",[\"relay-runtime\/util\/RelayConcreteNode\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/util\/RelayConcreteNode\").REQUEST,h=b(\"relay-runtime\/util\/RelayConcreteNode\").SPLIT_OPERATION;function a(a){switch(a.kind){case g:return a.operation;case h:default:return a}}e.exports=a}),null);\n__d(\"relay-runtime\/util\/withDuration\",[],(function(a,b,c,d,e,f){\"use strict\";var g=typeof window!==\"undefined\"&&typeof ((b=window)==null?void 0:(c=b.performance)==null?void 0:c.now)===\"function\";function h(){return g?window.performance.now():Date.now()}function a(a){var b=h();a=a();return[h()-b,a]}e.exports=a}),null);\n__d(\"relay-runtime\/store\/OperationExecutor\",[\"invariant\",\"Promise\",\"relay-runtime\/network\/RelayObservable\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayConcreteVariables\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayModernSelector\",\"relay-runtime\/store\/RelayRecordSource\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/util\/RelayError\",\"relay-runtime\/util\/RelayFeatureFlags\",\"relay-runtime\/util\/generateID\",\"relay-runtime\/util\/getOperation\",\"relay-runtime\/util\/stableCopy\",\"relay-runtime\/util\/withDuration\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k=b(\"relay-runtime\/store\/ClientID\").generateClientID,l=b(\"relay-runtime\/store\/ClientID\").generateUniqueClientID,m=b(\"relay-runtime\/store\/RelayConcreteVariables\").getLocalVariables,n=b(\"relay-runtime\/store\/RelayModernSelector\").createNormalizationSelector,o=b(\"relay-runtime\/store\/RelayModernSelector\").createReaderSelector,p=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_TYPE,q=b(\"relay-runtime\/store\/RelayStoreUtils\").TYPENAME_KEY,r=b(\"relay-runtime\/store\/RelayStoreUtils\").getStorageKey;function a(a){return new s(a)}var s=function(){function a(a){var c=this,d=a.actorIdentifier,e=a.getDataID,f=a.getPublishQueue,g=a.getStore,h=a.isClientPayload,i=a.operation,j=a.operationExecutions,k=a.operationLoader,l=a.operationTracker,m=a.optimisticConfig,n=a.scheduler,o=a.shouldProcessClientComponents,p=a.sink,q=a.source,r=a.treatMissingFieldsAsNull,s=a.updater,t=a.log;a=a.normalizeResponse;this.$1=d;this.$2=e;this.$3=r;this.$4=!1;this.$5=new Map();this.$6=t;this.$7=b(\"relay-runtime\/util\/generateID\")();this.$8=0;this.$9=i;this.$10=j;this.$11=k;this.$12=l;this.$13=new Map();this.$14=null;this.$15=0;this.$16=f;this.$18=n;this.$19=p;this.$20=new Map();this.$21=\"started\";this.$22=g;this.$23=new Map();this.$24=s;this.$28=h===!0;this.$29=this.$9.request.node.params.operationKind===\"subscription\";this.$17=o;this.$27=new Map();this.$30=new Set();this.$26=[];this.$31=a;var u=this.$8++;b(\"relay-runtime\/util\/RelayFeatureFlags\").PROCESS_OPTIMISTIC_UPDATE_BEFORE_SUBSCRIPTION&&m!=null&&this.$32(m.response!=null?{data:m.response}:null,m.updater,!1);q.subscribe({complete:function(){return c.$33(u)},error:function(a){return c.$34(a)},next:function(a){try{c.$35(u,a)}catch(a){p.error(a)}},start:function(a){c.$36(u,a);c.$6({name:\"execute.start\",executeId:c.$7,params:c.$9.request.node.params,variables:c.$9.request.variables,cacheConfig:(a=c.$9.request.cacheConfig)!=null?a:{}})}});!b(\"relay-runtime\/util\/RelayFeatureFlags\").PROCESS_OPTIMISTIC_UPDATE_BEFORE_SUBSCRIPTION&&m!=null&&this.$32(m.response!=null?{data:m.response}:null,m.updater,!1)}var c=a.prototype;c.cancel=function(){var a=this;if(this.$21===\"completed\")return;this.$21=\"completed\";this.$10[\"delete\"](this.$9.request.identifier);this.$23.size!==0&&(this.$23.forEach(function(a){return a.unsubscribe()}),this.$23.clear());var b=this.$14;b!==null&&(this.$14=null,b.forEach(function(b){return a.$37().revertUpdate(b)}),this.$38());this.$5.clear();this.$25!=null&&(this.$25.dispose(),this.$25=null);this.$26=[];this.$39();this.$40()};c.$41=function(){var a;switch(this.$21){case\"started\":a=\"active\";break;case\"loading_incremental\":a=\"active\";break;case\"completed\":a=\"inactive\";break;case\"loading_final\":a=this.$15>0?\"active\":\"inactive\";break;default:this.$21,g(0,42915)}this.$10.set(this.$9.request.identifier,a)};c.$42=function(a){var c=this,d=this.$18;if(d!=null){var e=this.$8++;b(\"relay-runtime\/network\/RelayObservable\").create(function(b){var c=d.schedule(function(){try{a(),b.complete()}catch(a){b.error(a)}});return function(){return d.cancel(c)}}).subscribe({complete:function(){return c.$33(e)},error:function(a){return c.$34(a)},start:function(a){return c.$36(e,a)}})}else a()};c.$33=function(a){this.$23[\"delete\"](a),this.$23.size===0&&(this.cancel(),this.$19.complete(),this.$6({name:\"execute.complete\",executeId:this.$7}))};c.$34=function(a){this.cancel(),this.$19.error(a),this.$6({name:\"execute.error\",executeId:this.$7,error:a})};c.$36=function(a,b){this.$23.set(a,b),this.$41()};c.$35=function(a,c){var d=this;this.$42(function(){var a=b(\"relay-runtime\/util\/withDuration\")(function(){d.$43(c),d.$44()});a=a[0];d.$6({name:\"execute.next\",executeId:d.$7,response:c,duration:a})})};c.$45=function(a){var c=this,d=[];a.forEach(function(a){if(a.data===null&&a.extensions!=null&&!Object.prototype.hasOwnProperty.call(a,\"errors\"))return;else if(a.data==null){var e=Object.prototype.hasOwnProperty.call(a,\"errors\")&&a.errors!=null?a.errors:null,f=e?e.map(function(a){a=a.message;return a}).join(\"\\n\"):\"(No errors)\";f=b(\"relay-runtime\/util\/RelayError\").create(\"RelayNetwork\",\"No data returned for operation `\"+c.$9.request.node.params.name+\"`, got error(s):\\n\"+f+\"\\n\\nSee the error `source` property for more information.\");f.source={errors:e,operation:c.$9.request.node,variables:c.$9.request.variables};f.stack;throw f}else{e=a;d.push(e)}});return d};c.$46=function(a){var b;if(a.length>1){a.some(function(a){return((a=a.extensions)==null?void 0:a.isOptimistic)===!0})&&g(0,49718);return!1}a=a[0];b=((b=a.extensions)==null?void 0:b.isOptimistic)===!0;b&&this.$21!==\"started\"&&g(0,42916);if(b){this.$32(a,null,this.$3);this.$19.next(a);return!0}return!1};c.$43=function(a){if(this.$21===\"completed\")return;this.$30.clear();var b=Array.isArray(a)?a:[a],c=this.$45(b);if(c.length===0){b=b.some(function(a){return((a=a.extensions)==null?void 0:a.is_final)===!0});b&&(this.$21=\"loading_final\",this.$41(),this.$4=!1);this.$19.next(a);return}b=this.$46(c);if(b)return;b=t(c);var d=b[0];b=b[1];var e=d.length>0;if(e){if(this.$29){var f=l();this.$9={request:this.$9.request,fragment:o(this.$9.fragment.node,f,this.$9.fragment.variables,this.$9.fragment.owner),root:n(this.$9.root.node,f,this.$9.root.variables)}}f=this.$47(d);this.$48(f)}if(b.length>0){d=this.$49(b);this.$48(d)}this.$29&&(c[0].extensions==null?c[0].extensions={__relay_subscription_root_id:this.$9.fragment.dataID}:c[0].extensions.__relay_subscription_root_id=this.$9.fragment.dataID);f=this.$38(e?this.$9:void 0);e&&(this.$4&&this.$50());this.$51(f);this.$19.next(a)};c.$32=function(a,c,d){var e=this;this.$14===null||g(0,49719);if(a==null&&c==null)return;var f=[];if(a){a=this.$31(a,this.$9.root,p,{actorIdentifier:this.$1,getDataID:this.$2,path:[],shouldProcessClientComponents:this.$17,treatMissingFieldsAsNull:d});v(a);f.push({operation:this.$9,payload:a,updater:c});this.$52(a,f)}else c&&f.push({operation:this.$9,payload:{errors:null,fieldPayloads:null,incrementalPlaceholders:null,followupPayloads:null,source:b(\"relay-runtime\/store\/RelayRecordSource\").create(),isFinal:!1},updater:c});this.$14=f;f.forEach(function(a){return e.$37().applyUpdate(a)});d=this.$38();b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_OPERATION_TRACKER_OPTIMISTIC_UPDATES&&this.$51(d)};c.$52=function(a,c){if(a.followupPayloads&&a.followupPayloads.length){a=a.followupPayloads;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;switch(f.kind){case\"ModuleImportPayload\":var h=this.$53();h=h.get(f.operationReference);if(h==null)this.$54(f);else{h=this.$55(h,f);c.push.apply(c,h)}break;case\"ActorPayload\":b(\"warning\")(!1,\"OperationExecutor: Unexpected optimistic ActorPayload. These updates are not supported.\");break;default:f,g(0,49799,f.kind)}}}};c.$56=function(a,b){var c;b.kind===\"SplitOperation\"&&a.kind===\"ModuleImportPayload\"?c=m(a.variables,b.argumentDefinitions,a.args):c=a.variables;b=n(b,a.dataID,c);return this.$31({data:a.data},b,a.typeName,{actorIdentifier:this.$1,getDataID:this.$2,path:a.path,treatMissingFieldsAsNull:this.$3,shouldProcessClientComponents:this.$17})};c.$55=function(a,c){a=b(\"relay-runtime\/util\/getOperation\")(a);var d=[];c=this.$56(c,a);v(c);d.push({operation:this.$9,payload:c,updater:null});this.$52(c,d);return d};c.$54=function(a){var c=this;this.$53().load(a.operationReference).then(function(d){if(d==null||c.$21!==\"started\")return;d=c.$55(d,a);d.forEach(function(a){return c.$37().applyUpdate(a)});if(c.$14==null)b(\"warning\")(!1,\"OperationExecutor: Unexpected ModuleImport optimistic update in operation %s.\"+c.$9.request.node.params.name);else{var e;(e=c.$14).push.apply(e,d);c.$38()}})};c.$47=function(a){var b=this;this.$14!==null&&(this.$14.forEach(function(a){b.$37().revertUpdate(a)}),this.$14=null);this.$4=!1;this.$5.clear();this.$20.clear();return a.map(function(a){a=b.$31(a,b.$9.root,p,{actorIdentifier:b.$1,getDataID:b.$2,path:[],treatMissingFieldsAsNull:b.$3,shouldProcessClientComponents:b.$17});b.$37().commitPayload(b.$9,a,b.$24);return a})};c.$48=function(a){var c=this;if(this.$21===\"completed\")return;a.forEach(function(a){var d=a.incrementalPlaceholders,e=a.followupPayloads,f=a.isFinal;c.$21=f?\"loading_final\":\"loading_incremental\";c.$41();f&&(c.$4=!1);e&&e.length!==0&&e.forEach(function(a){var b,d=c.$1;c.$1=(b=a.actorIdentifier)!=null?b:c.$1;c.$57(a);c.$1=d});if(d&&d.length!==0){c.$4=c.$21!==\"loading_final\";d.forEach(function(b){var d,e=c.$1;c.$1=(d=b.actorIdentifier)!=null?d:c.$1;c.$58(a,b);c.$1=e});if(c.$28||c.$21===\"loading_final\"){b(\"warning\")(c.$28,\"RelayModernEnvironment: Operation `%s` contains @defer\/@stream directives but was executed in non-streaming mode. See https:\/\/fburl.com\/relay-incremental-delivery-non-streaming-warning.\",c.$9.request.node.params.name);var g=[];d.forEach(function(a){a.kind===\"defer\"&&g.push(c.$59(a.label,a.path,a,{data:a.data}))});g.length>0&&c.$48(g)}}})};c.$44=function(){if(!this.$29)return;this.$15===0&&this.$4===!1&&this.$39()};c.$57=function(a){var c=this;switch(a.kind){case\"ModuleImportPayload\":var d=this.$53(),e=d.get(a.operationReference);if(e!=null)this.$60(a,b(\"relay-runtime\/util\/getOperation\")(e));else{var f=this.$8++;this.$15++;var i=function(){c.$15--,c.$44()},j=b(\"relay-runtime\/network\/RelayObservable\").from(new(h||(h=b(\"Promise\")))(function(b,c){d.load(a.operationReference).then(b,c)}));b(\"relay-runtime\/network\/RelayObservable\").create(function(d){var e,f=j.subscribe({next:function(f){if(f!=null){var g=function(){try{var e=b(\"relay-runtime\/util\/getOperation\")(f),g=b(\"relay-runtime\/util\/RelayFeatureFlags\").BATCH_ASYNC_MODULE_UPDATES_FN,h=g!=null&&c.$15>1,i=b(\"relay-runtime\/util\/withDuration\")(function(){c.$61(a,e);if(h)c.$62(g,d.complete);else{var b=c.$38();c.$51(b)}});i=i[0];c.$6({name:\"execute.async.module\",executeId:c.$7,operationName:e.name,duration:i});h||d.complete()}catch(a){d.error(a)}},h=c.$18;h==null?g():e=h.schedule(g)}else d.complete()},error:d.error});return function(){f.unsubscribe(),c.$18!=null&&e!=null&&c.$18.cancel(e)}}).subscribe({complete:function(){c.$33(f),i()},error:function(a){c.$34(a),i()},start:function(a){return c.$36(f,a)}})}break;case\"ActorPayload\":this.$60(a,a.node);break;default:a,g(0,49721,a.kind)}};c.$60=function(a,b){this.$61(a,b),this.$44()};c.$61=function(a,b){a=this.$56(a,b);this.$37().commitPayload(this.$9,a);this.$48([a])};c.$58=function(a,c){var d=c.label,e=c.path;e=e.map(String).join(\".\");var f=this.$5.get(d);f==null&&(f=new Map(),this.$5.set(d,f));d=f.get(e);d=d!=null&&d.kind===\"response\"?d.responses:null;f.set(e,{kind:\"placeholder\",placeholder:c});var h;c.kind===\"stream\"?h=c.parentID:c.kind===\"defer\"?h=c.selector.dataID:(c,g(0,49722,c.kind));f=a.source.get(h);c=((e=a.fieldPayloads)!=null?e:[]).filter(function(a){var b=k(a.dataID,a.fieldKey);return a.dataID===h||b===h});f!=null||g(0,49723,h);a=this.$20.get(h);if(a!=null){e=(i||(i=b(\"relay-runtime\/store\/RelayModernRecord\"))).update(a.record,f);var j=new Map(),l=function(a){var b=u(a);j.set(b,a)};a.fieldPayloads.forEach(l);c.forEach(l);a=Array.from(j.values())}else e=f,a=c;this.$20.set(h,{record:e,fieldPayloads:a});if(d!=null){l=this.$49(d);this.$48(l)}};c.$49=function(a){var b=this,c=[];a.forEach(function(a){var d=a.label,e=a.path,f=a.response,h=b.$5.get(d);h==null&&(h=new Map(),b.$5.set(d,h));if(d.indexOf(\"$defer$\")!==-1){var i=e.map(String).join(\".\"),j=h.get(i);if(j==null){j={kind:\"response\",responses:[a]};h.set(i,j);return}else if(j.kind===\"response\"){j.responses.push(a);return}j=j.placeholder;j.kind===\"defer\"||g(0,49724,i,d,j.kind);c.push(b.$59(d,e,j,f))}else{i=e.slice(0,-2).map(String).join(\".\");j=h.get(i);if(j==null){j={kind:\"response\",responses:[a]};h.set(i,j);return}else if(j.kind===\"response\"){j.responses.push(a);return}h=j.placeholder;h.kind===\"stream\"||g(0,49725,i,d,h.kind);c.push(b.$63(d,e,h,f))}});return c};c.$59=function(a,c,d,e){var f;a=d.selector.dataID;c=this.$1;this.$1=(f=d.actorIdentifier)!=null?f:this.$1;f=this.$31(e,d.selector,d.typeName,{actorIdentifier:this.$1,getDataID:this.$2,path:d.path,treatMissingFieldsAsNull:this.$3,shouldProcessClientComponents:this.$17});this.$37().commitPayload(this.$9,f);d=this.$20.get(a);d!=null||g(0,49726,a);a=d.fieldPayloads;if(a.length!==0){a={errors:null,fieldPayloads:a,incrementalPlaceholders:null,followupPayloads:null,source:b(\"relay-runtime\/store\/RelayRecordSource\").create(),isFinal:((d=e.extensions)==null?void 0:d.is_final)===!0};this.$37().commitPayload(this.$9,a)}this.$1=c;return f};c.$63=function(a,c,d,e){var f=d.parentID;a=d.node;var h=d.variables,i=d.actorIdentifier,j=this.$1;this.$1=(i=i)!=null?i:this.$1;i=a.selections[0];i!=null&&i.kind===\"LinkedField\"&&i.plural===!0||g(0,49727);a=this.$64(e,f,i,h,c,d.path);e=a.fieldPayloads;var k=a.itemID,l=a.itemIndex,m=a.prevIDs;i=a.relayPayload;var n=a.storageKey;this.$37().commitPayload(this.$9,i,function(a){var b=a.get(f);if(b==null)return;var c=b.getLinkedRecords(n);if(c==null)return;if(c.length!==m.length||c.some(function(a,b){return m[b]!==(a&&a.getDataID())}))return;c=[].concat(c);c[l]=a.get(k);b.setLinkedRecords(c,n)});if(e.length!==0){h={errors:null,fieldPayloads:e,incrementalPlaceholders:null,followupPayloads:null,source:b(\"relay-runtime\/store\/RelayRecordSource\").create(),isFinal:!1};this.$37().commitPayload(this.$9,h)}this.$1=j;return i};c.$64=function(a,c,d,e,f,h){var j,l=a.data;typeof l===\"object\"||g(0,49728);j=(j=d.alias)!=null?j:d.name;var m=r(d,e),o=this.$20.get(c);o!=null||g(0,49729,c);var p=o.record;o=o.fieldPayloads;var s=(i||(i=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordIDs(p,m);s!=null||g(0,49730,c,d.name);f=f[f.length-1];var t=parseInt(f,10);t===f&&t>=0||g(0,49731,f);f=(f=d.concreteType)!=null?f:l[q];typeof f===\"string\"||g(0,49720,d.name);l=(l=(l=this.$2(l,f))!=null?l:s==null?void 0:s[t])!=null?l:k(c,m,t);typeof l===\"string\"||g(0,49716,m);d=n(d,l,e);e=i.clone(p);p=[].concat(s);p[t]=l;i.setLinkedRecordIDs(e,m,p);this.$20.set(c,{record:e,fieldPayloads:o});p=this.$31(a,d,f,{actorIdentifier:this.$1,getDataID:this.$2,path:[].concat(h,[j,String(t)]),treatMissingFieldsAsNull:this.$3,shouldProcessClientComponents:this.$17});return{fieldPayloads:o,itemID:l,itemIndex:t,prevIDs:s,relayPayload:p,storageKey:m}};c.$62=function(a,b){var c=this;this.$26.push(b);if(this.$25!=null)return;this.$25=a(function(){c.$25=null;var a=c.$38();c.$51(a);for(var a=c.$26,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e()}c.$26=[]})};c.$51=function(a){a!=null&&a.length>0&&this.$12.update(this.$9.request,new Set(a))};c.$39=function(){this.$12.complete(this.$9.request)};c.$37=function(){this.$30.add(this.$1);return this.$16(this.$1)};c.$65=function(){if(this.$30.size===0)return new Set([this.$1]);else return this.$30};c.$38=function(a){var b=new Set();for(var c=this.$65(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=this.$16(f).run(a);f.forEach(function(a){return b.add(a)})}return Array.from(b)};c.$50=function(){for(var a=this.$65(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$27.has(d)||this.$27.set(d,this.$22(d).retain(this.$9))}};c.$40=function(){for(var a=this.$27.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.dispose()}this.$27.clear()};c.$53=function(){var a=this.$11;a||g(0,49717);return a};return a}();function t(a){var b=[],c=[];a.forEach(function(a){if(a.path!=null||a.label!=null){var d=a.label,e=a.path;(d==null||e==null)&&g(0,42913);c.push({label:d,path:e,response:a})}else b.push(a)});return[b,c]}function u(a){return(a=JSON.stringify((j||(j=b(\"relay-runtime\/util\/stableCopy\")))(a)))!=null?a:\"\"}function v(a){a=a.incrementalPlaceholders;a!=null&&a.length!==0&&g(0,42914)}e.exports={execute:a}}),null);\n__d(\"relay-runtime\/store\/RelayOperationTracker\",[\"invariant\",\"Promise\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=function(){function a(){this.$1=new Map(),this.$2=new Map(),this.$3=new Map()}var c=a.prototype;c.update=function(a,b){if(b.size===0)return;var c=a.identifier,d=new Set();for(var b=b,e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;g=g.identifier;var h=this.$1.get(g);h!=null?h.has(c)||(h.set(c,a),d.add(g)):(this.$1.set(g,new Map([[c,a]])),d.add(g))}if(d.size===0)return;h=this.$2.get(c)||new Set();for(g=d,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(f){if(e>=g.length)break;b=g[e++]}else{e=g.next();if(e.done)break;b=e.value}a=b;this.$4(a);h.add(a)}this.$2.set(c,h)};c.complete=function(a){a=a.identifier;var b=this.$2.get(a);if(b==null)return;var c=new Set(),d=new Set();for(var b=b,e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;var h=this.$1.get(g);if(!h)continue;h[\"delete\"](a);h.size>0?d.add(g):c.add(g)}for(h=c,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}b=e;this.$4(b);this.$1[\"delete\"](b)}for(c=d,e=Array.isArray(c),b=0,c=e?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(e){if(b>=c.length)break;f=c[b++]}else{b=c.next();if(b.done)break;f=b.value}g=f;this.$4(g)}this.$2[\"delete\"](a)};c.$4=function(a){var b=this.$3.get(a);b!=null&&b.resolve();this.$3[\"delete\"](a)};c.getPendingOperationsAffectingOwner=function(a){a=a.identifier;var c=this.$1.get(a);if(c==null||c.size===0)return null;var d=this.$3.get(a);if(d!=null)return{promise:d.promise,pendingOperations:d.pendingOperations};var e;d=new(h||(h=b(\"Promise\")))(function(a){e=a});e!=null||g(0,16524);c=Array.from(c.values());this.$3.set(a,{promise:d,resolve:e,pendingOperations:c});return{promise:d,pendingOperations:c}};return a}();e.exports=a}),null);\n__d(\"relay-runtime\/mutations\/RelayRecordSourceMutator\",[\"invariant\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayRecordState\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/store\/RelayRecordState\").EXISTENT;a=function(){function a(a,b){this.__sources=[b,a],this.$1=a,this.$2=b}var c=a.prototype;c.unstable_getRawRecordWithChanges=function(a){var c=this.$1.get(a);a=this.$2.get(a);if(a===void 0){if(c==null)return c;var d=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).clone(c);return d}else if(a===null)return null;else if(c!=null){d=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).update(c,a);return d}else{c=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).clone(a);return c}};c.$3=function(a){var c=this.$2.get(a);if(!c){var d=this.$1.get(a);d||g(0,977,a);c=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(a,h.getType(d));this.$2.set(a,c)}return c};c.copyFields=function(a,c){var d=this.$2.get(a),e=this.$1.get(a);d||e||g(0,978,a);a=this.$3(c);e&&(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).copyFields(e,a);d&&(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).copyFields(d,a)};c.copyFieldsFromRecord=function(a,c){c=this.$3(c);(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).copyFields(a,c)};c.create=function(a,c){this.$1.getStatus(a)!==i&&this.$2.getStatus(a)!==i||g(0,979,a);c=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(a,c);this.$2.set(a,c)};c[\"delete\"]=function(a){this.$2[\"delete\"](a)};c.getStatus=function(a){return this.$2.has(a)?this.$2.getStatus(a):this.$1.getStatus(a)};c.getType=function(a){for(var c=0;c<this.__sources.length;c++){var d=this.__sources[c].get(a);if(d)return(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(d);else if(d===null)return null}};c.getValue=function(a,c){for(var d=0;d<this.__sources.length;d++){var e=this.__sources[d].get(a);if(e){var f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getValue(e,c);if(f!==void 0)return f}else if(e===null)return null}};c.setValue=function(a,c,d){a=this.$3(a);(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setValue(a,c,d)};c.getLinkedRecordID=function(a,c){for(var d=0;d<this.__sources.length;d++){var e=this.__sources[d].get(a);if(e){var f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordID(e,c);if(f!==void 0)return f}else if(e===null)return null}};c.setLinkedRecordID=function(a,c,d){a=this.$3(a);(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setLinkedRecordID(a,c,d)};c.getLinkedRecordIDs=function(a,c){for(var d=0;d<this.__sources.length;d++){var e=this.__sources[d].get(a);if(e){var f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordIDs(e,c);if(f!==void 0)return f}else if(e===null)return null}};c.setLinkedRecordIDs=function(a,c,d){a=this.$3(a);(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setLinkedRecordIDs(a,c,d)};return a}();e.exports=a}),null);\n__d(\"relay-runtime\/mutations\/RelayRecordProxy\",[\"invariant\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/store\/ClientID\").generateClientID,i=b(\"relay-runtime\/store\/RelayStoreUtils\").getStableStorageKey;a=function(){function a(a,b,c){this.$1=c,this.$2=b,this.$3=a}var b=a.prototype;b.copyFieldsFrom=function(a){this.$2.copyFields(a.getDataID(),this.$1)};b.getDataID=function(){return this.$1};b.getType=function(){var a=this.$2.getType(this.$1);a!=null||g(0,4314,this.$1);return a};b.getValue=function(a,b){a=i(a,b);return this.$2.getValue(this.$1,a)};b.setValue=function(a,b,c){j(a)||g(0,4315,JSON.stringify(a));return this.setValue__UNSAFE(a,b,c)};b.setValue__UNSAFE=function(a,b,c){b=i(b,c);this.$2.setValue(this.$1,b,a);return this};b.getLinkedRecord=function(a,b){a=i(a,b);b=this.$2.getLinkedRecordID(this.$1,a);return b!=null?this.$3.get(b):b};b.setLinkedRecord=function(b,c,d){b instanceof a||g(0,4316,b);c=i(c,d);d=b.getDataID();this.$2.setLinkedRecordID(this.$1,c,d);return this};b.getOrCreateLinkedRecord=function(a,b,c){var d=this.getLinkedRecord(a,c);if(!d){var e,f=i(a,c);f=h(this.getDataID(),f);d=(e=this.$3.get(f))!=null?e:this.$3.create(f,b);this.setLinkedRecord(d,a,c)}return d};b.getLinkedRecords=function(a,b){var c=this;a=i(a,b);b=this.$2.getLinkedRecordIDs(this.$1,a);return b==null?b:b.map(function(a){return a!=null?c.$3.get(a):a})};b.setLinkedRecords=function(a,b,c){Array.isArray(a)||g(0,4317,a);b=i(b,c);c=a.map(function(a){return a&&a.getDataID()});this.$2.setLinkedRecordIDs(this.$1,b,c);return this};b.invalidateRecord=function(){this.$3.markIDForInvalidation(this.$1)};return a}();function j(a){return a==null||typeof a!==\"object\"||Array.isArray(a)&&a.every(j)}e.exports=a}),null);\n__d(\"relay-runtime\/mutations\/createUpdatableProxy\",[\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/util\/RelayConcreteNode\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/store\/RelayStoreUtils\").getArgumentValues,h=(c=b(\"relay-runtime\/util\/RelayConcreteNode\")).ACTOR_CHANGE,i=c.ALIASED_FRAGMENT_SPREAD,j=c.ALIASED_INLINE_FRAGMENT_SPREAD,k=c.CLIENT_EDGE_TO_CLIENT_OBJECT,l=c.CLIENT_EDGE_TO_SERVER_OBJECT,m=c.CLIENT_EXTENSION,n=c.CONDITION,o=c.DEFER,p=c.FRAGMENT_SPREAD,q=c.INLINE_DATA_FRAGMENT_SPREAD,r=c.INLINE_FRAGMENT,s=c.LINKED_FIELD,t=c.MODULE_IMPORT,u=c.RELAY_LIVE_RESOLVER,v=c.RELAY_RESOLVER,w=c.REQUIRED_FIELD,x=c.SCALAR_FIELD,y=c.STREAM,z=[\"id\",\"__id\",\"__typename\",\"js\"];function a(a,b,c,d,e){var f={};A(f,a,b,c,d,e);return f}function A(a,b,c,d,e,f){var F=function(){if(I){if(J>=G.length)return\"break\";K=G[J++]}else{J=G.next();if(J.done)return\"break\";K=J.value}var d=K;switch(d.kind){case s:if(d.plural){var F;Object.defineProperty(a,(F=d.alias)!=null?F:d.name,{get:D(d,c,b,e,f),set:B(d,c,b,e)})}else{Object.defineProperty(a,(F=d.alias)!=null?F:d.name,{get:E(d,c,b,e,f),set:C(d,c,b,e)})}break;case x:F=(F=d.alias)!=null?F:d.name;Object.defineProperty(a,F,{get:function(){var a;a=g((a=d.args)!=null?a:[],c);var h=b.getValue(d.name,a);h==null&&(h=H(d,a,b,e,f));return h},set:z.includes(d.name)?void 0:function(a){var e;e=g((e=d.args)!=null?e:[],c);b.setValue__UNSAFE(a,d.name,e)}});break;case r:b.getType()===d.type&&A(a,b,c,d.selections,e,f);break;case m:A(a,b,c,d.selections,e,f);break;case p:break;case n:case h:case i:case q:case j:case k:case l:case o:case t:case u:case w:case y:case v:throw new Error(\"Encountered an unexpected ReaderSelection variant in RelayRecordSourceProxy. This indicates a bug in Relay.\");default:d.kind;throw new Error(\"Encountered an unexpected ReaderSelection variant in RelayRecordSourceProxy. This indicates a bug in Relay.\")}};for(var G=d,I=Array.isArray(G),J=0,G=I?G:G[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var K;d=F();if(d===\"break\")break}}function B(a,b,c,d){return function(e){var f;f=g((f=a.args)!=null?f:[],b);if(e==null)throw new Error(\"Do not assign null to plural linked fields; assign an empty array instead.\");else{e=e.map(function(a){if(a==null)throw new Error(\"When assigning an array of items, none of the items should be null or undefined.\");a=a.__id;if(a==null)throw new Error(\"The __id field must be present on each item passed to the setter. This indicates a bug in Relay.\");var b=d.get(a);if(b==null)throw new Error(\"Did not find item with data id \"+a+\" in the store.\");return b});c.setLinkedRecords(e,a.name,f)}}}function C(a,b,c,d){return function(e){var f;f=g((f=a.args)!=null?f:[],b);if(e==null)c.setValue(e,a.name,f);else{e=e.__id;if(e==null)throw new Error(\"The __id field must be present on the argument. This indicates a bug in Relay.\");var h=d.get(e);if(h==null)throw new Error(\"Did not find item with data id \"+e+\" in the store.\");c.setLinkedRecord(h,a.name,f)}}}function D(a,b,c,d,e){return function(){var f;f=g((f=a.args)!=null?f:[],b);var h=c.getLinkedRecords(a.name,f);h===void 0&&(h=G(a,f,c,d,e));if(h!=null)return h.map(function(c){if(c!=null){var f={};A(f,c,b,a.selections,d,e);return f}else return c});else return h}}function E(a,b,c,d,e){return function(){var f;f=g((f=a.args)!=null?f:[],b);var h=c.getLinkedRecord(a.name,f);h===void 0&&(h=F(a,f,c,d,e));if(h!=null){f={};A(f,h,b,a.selections,d,e);return f}else return h}}function F(a,b,c,d,e){for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;if(h.kind===\"linked\"){h=h.handle(a,c,b,d);if(h!=null)return d.get(h)}}}function G(a,b,c,d,e){for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;if(h.kind===\"pluralLinked\"){h=h.handle(a,c,b,d);if(h!=null)return h.map(function(a){if(a!=null)return d.get(a)})}}}function H(a,b,c,d,e){for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;if(h.kind===\"scalar\"){h=h.handle(a,c,b,d);if(h!==void 0)return h}}}e.exports={createUpdatableProxy:a}}),null);\n__d(\"relay-runtime\/mutations\/readUpdatableFragment\",[\"invariant\",\"relay-runtime\/mutations\/createUpdatableProxy\",\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/store\/RelayModernSelector\",\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/query\/GraphQLTag\").getFragment,i=b(\"relay-runtime\/store\/RelayModernSelector\").getVariablesFromFragment,j=b(\"relay-runtime\/store\/RelayStoreUtils\").ID_KEY,k=b(\"relay-runtime\/mutations\/createUpdatableProxy\").createUpdatableProxy;function a(a,b,c,d){a=h(a);var e=i(a,b);b=b[j];b=c.get(b);b!=null||g(0,void 0);return{updatableData:k(b,e,a.selections,c,d)}}e.exports={readUpdatableFragment:a}}),null);\n__d(\"relay-runtime\/mutations\/readUpdatableQuery\",[\"relay-runtime\/mutations\/createUpdatableProxy\",\"relay-runtime\/query\/GraphQLTag\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/query\/GraphQLTag\").getUpdatableQuery,h=b(\"relay-runtime\/mutations\/createUpdatableProxy\").createUpdatableProxy;function a(a,b,c,d){a=g(a);return{updatableData:h(c.getRoot(),b,a.fragment.selections,c,d)}}e.exports={readUpdatableQuery:a}}),null);\n__d(\"relay-runtime\/mutations\/RelayRecordSourceProxy\",[\"invariant\",\"relay-runtime\/mutations\/RelayRecordProxy\",\"relay-runtime\/mutations\/readUpdatableFragment\",\"relay-runtime\/mutations\/readUpdatableQuery\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayRecordState\",\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/store\/RelayRecordState\").EXISTENT,j=b(\"relay-runtime\/store\/RelayRecordState\").NONEXISTENT,k=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_ID,l=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_TYPE,m=b(\"relay-runtime\/mutations\/readUpdatableFragment\").readUpdatableFragment,n=b(\"relay-runtime\/mutations\/readUpdatableQuery\").readUpdatableQuery;a=function(){function a(a,b,c,d){this.__mutator=a,this.$1=c||null,this.$2={},this.$3=b,this.$4=!1,this.$5=new Set(),this.$6=d}var c=a.prototype;c.publishSource=function(a,c){var d=this,e=a.getRecordIDs();e.forEach(function(c){var e=a.getStatus(c);if(e===i){var f=a.get(c);f&&(d.__mutator.getStatus(c)!==i&&d.create(c,(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(f)),d.__mutator.copyFieldsFromRecord(f,c))}else e===j&&d[\"delete\"](c)});c&&c.length&&c.forEach(function(a){var b=d.$1&&d.$1(a.handle);b||g(0,681,a.handle);b.update(d,a)})};c.create=function(a,b){this.__mutator.create(a,b);delete this.$2[a];b=this.get(a);b||g(0,2120);return b};c[\"delete\"]=function(a){a!==k||g(0,2121),delete this.$2[a],this.__mutator[\"delete\"](a)};c.get=function(a){if(!Object.prototype.hasOwnProperty.call(this.$2,a)){var c=this.__mutator.getStatus(a);c===i?this.$2[a]=new(b(\"relay-runtime\/mutations\/RelayRecordProxy\"))(this,this.__mutator,a):this.$2[a]=c===j?null:void 0}return this.$2[a]};c.getRoot=function(){var a=this.get(k);a||(a=this.create(k,l));a&&a.getType()===l||g(0,21125,a==null?\"no root record found\":\"found a root record of type `\"+a.getType()+\"`\");return a};c.invalidateStore=function(){this.$4=!0};c.isStoreMarkedForInvalidation=function(){return this.$4};c.markIDForInvalidation=function(a){this.$5.add(a)};c.getIDsMarkedForInvalidation=function(){return this.$5};c.readUpdatableQuery=function(a,b){return n(a,b,this,this.$6)};c.readUpdatableFragment=function(a,b){return m(a,b,this,this.$6)};return a}();e.exports=a}),null);\n__d(\"relay-runtime\/mutations\/RelayRecordSourceSelectorProxy\",[\"invariant\",\"relay-runtime\/mutations\/readUpdatableFragment\",\"relay-runtime\/mutations\/readUpdatableQuery\",\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_TYPE,i=b(\"relay-runtime\/store\/RelayStoreUtils\").getStorageKey,j=b(\"relay-runtime\/mutations\/readUpdatableFragment\").readUpdatableFragment,k=b(\"relay-runtime\/mutations\/readUpdatableQuery\").readUpdatableQuery;a=function(){function a(a,b,c,d){this.__mutator=a,this.__recordSource=b,this.$1=c,this.$2=d}var b=a.prototype;b.create=function(a,b){return this.__recordSource.create(a,b)};b[\"delete\"]=function(a){this.__recordSource[\"delete\"](a)};b.get=function(a){return this.__recordSource.get(a)};b.getRoot=function(){return this.__recordSource.getRoot()};b.getOperationRoot=function(){var a=this.__recordSource.get(this.$1.dataID);a||(a=this.__recordSource.create(this.$1.dataID,h));return a};b.$3=function(a,b,c){var d=a.node.selections.find(function(a){return a.kind===\"LinkedField\"&&a.name===b||a.kind===\"RequiredField\"&&a.field.name===b});d&&d.kind===\"RequiredField\"&&(d=d.field);d&&d.kind===\"LinkedField\"||g(0,1951,b,a.node.name);d.plural===c||g(0,1952,b,c?\"plural\":\"singular\");return d};b.getRootField=function(a){a=this.$3(this.$1,a,!1);a=i(a,this.$1.variables);return this.getOperationRoot().getLinkedRecord(a)};b.getPluralRootField=function(a){a=this.$3(this.$1,a,!0);a=i(a,this.$1.variables);return this.getOperationRoot().getLinkedRecords(a)};b.invalidateStore=function(){this.__recordSource.invalidateStore()};b.readUpdatableQuery=function(a,b){return k(a,b,this,this.$2)};b.readUpdatableFragment=function(a,b){return j(a,b,this,this.$2)};return a}();e.exports=a}),null);\n__d(\"relay-runtime\/util\/recycleNodesInto\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){return g(a,b,!0)}function g(a,b,c){if(a===b||typeof a!==\"object\"||!a||a.constructor!==Object&&!Array.isArray(a)||typeof b!==\"object\"||!b||b.constructor!==Object&&!Array.isArray(b))return b;var d=!1,e=Array.isArray(a)?a:null,f=Array.isArray(b)?b:null;if(e&&f){var h=c&&!Object.isFrozen(f);d=f.reduce(function(a,b,c){var d=e[c];d=g(d,b,h);d!==f[c]&&h&&(f[c]=d);return a&&d===e[c]},!0)&&e.length===f.length}else if(!e&&!f){var i=a,j=b,k=Object.keys(i),l=Object.keys(j),m=c&&!Object.isFrozen(j);d=l.reduce(function(a,b){var c=i[b];c=g(c,j[b],m);c!==j[b]&&m&&(j[b]=c);return a&&c===i[b]},!0)&&k.length===l.length}return d?a:b}e.exports=a}),null);\n__d(\"relay-runtime\/util\/shallowFreeze\",[],(function(a,b,c,d,e,f){\"use strict\";e.exports=function(a){typeof a===\"object\"&&a!=null&&(Array.isArray(a)||a.constructor===Object)&&Object.freeze(a)}}),null);\n__d(\"relay-runtime\/store\/ResolverCache\",[\"invariant\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/util\/RelayConcreteNode\",\"relay-runtime\/util\/recycleNodesInto\",\"relay-runtime\/util\/shallowFreeze\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/util\/RelayConcreteNode\").RELAY_LIVE_RESOLVER,j=b(\"relay-runtime\/store\/ClientID\").generateClientID,k=(a=b(\"relay-runtime\/store\/RelayStoreUtils\")).RELAY_RESOLVER_ERROR_KEY,l=a.RELAY_RESOLVER_INVALIDATION_KEY,m=a.RELAY_RESOLVER_SNAPSHOT_KEY,n=a.RELAY_RESOLVER_VALUE_KEY,o=a.getStorageKey,p=new Set();c=function(){function a(){}var b=a.prototype;b.readFromCacheOrEvaluate=function(a,b,c,d,e){b.kind!==i||g(0,57615);a=d();c=a.resolverResult;e=a.snapshot;b=a.error;return[c,void 0,b,e,void 0,void 0]};b.invalidateDataIDs=function(a){};b.ensureClientRecord=function(a,b){g(0,58014)};b.notifyUpdatedSubscribers=function(a){};return a}();function q(a,b,c){var d=a.get(b);d||(d=new Set(),a.set(b,d));d.add(c)}d=function(){function a(a){this.$1=new Map(),this.$2=new Map(),this.$3=a}var c=a.prototype;c.readFromCacheOrEvaluate=function(a,c,d,e,f){var i=this.$3(),l=i.get(a);l!=null||g(0,64310);var p=o(c,d);l=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordID(l,p);var r=l==null?null:i.get(l);if(r==null||this.$4(r,f)){l=(f=l)!=null?f:j(a,p);r=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(l,\"__RELAY_RESOLVER__\");f=e();b(\"relay-runtime\/util\/shallowFreeze\")(f.resolverResult);h.setValue(r,n,f.resolverResult);h.setValue(r,m,f.snapshot);h.setValue(r,k,f.error);i.set(l,r);e=i.get(a);e!=null||g(0,64256);e=h.clone(e);h.setLinkedRecordID(e,p,l);i.set(a,e);if(c.fragment!=null){p=o(c.fragment,d);i=j(a,p);q(this.$1,i,l);q(this.$2,a,i);c=(e=f.snapshot)==null?void 0:e.seenRecords;if(c!=null)for(d=c,p=Array.isArray(d),a=0,d=p?d:d[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(p){if(a>=d.length)break;f=d[a++]}else{a=d.next();if(a.done)break;f=a.value}e=f;q(this.$2,e,i)}}}c=h.getValue(r,n);f=h.getValue(r,m);e=h.getValue(r,k);return[c,l,e,f,void 0,void 0]};c.invalidateDataIDs=function(a){var b=this.$3(),c=new Set(),d=Array.from(a);while(d.length){var e=d.pop();a.add(e);for(var e=(e=this.$2.get(e))!=null?e:p,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;if(!c.has(h))for(var h=(h=this.$1.get(h))!=null?h:p,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{j=h.next();if(j.done)break;k=j.value}k=k;this.$5(k,b,a);c.has(k)||d.push(k)}}}};c.$5=function(a,c,d){d=c.get(a);if(!d){b(\"warning\")(!1,\"Expected a resolver record with ID %s, but it was missing.\",a);return}d=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).clone(d);h.setValue(d,l,!0);c.set(a,d)};c.$4=function(a,c){if(!(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getValue(a,l))return!1;var d=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getValue(a,m),e=d==null?void 0:d.data;d=d==null?void 0:d.selector;if(e==null||d==null){b(\"warning\")(!1,\"Expected previous inputs and reader selector on resolver record with ID %s, but they were missing.\",(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(a));return!0}a=c(d);c=a.data;d=b(\"relay-runtime\/util\/recycleNodesInto\")(e,c);return d!==e?!0:!1};c.ensureClientRecord=function(a,b){g(0,58014)};c.notifyUpdatedSubscribers=function(a){g(0,65021)};return a}();e.exports={NoopResolverCache:c,RecordResolverCache:d}}),null);\n__d(\"relay-runtime\/store\/ResolverFragments\",[\"invariant\",\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/store\/RelayModernSelector\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/query\/GraphQLTag\").getFragment,i=b(\"relay-runtime\/store\/RelayModernSelector\").getSelector,j=[];function a(a,b){j.push(a);try{return b()}finally{j.pop()}}function c(a,b){if(!j.length)throw new Error(\"readFragment should be called only from within a Relay Resolver function.\");var c=j[j.length-1];a=h(a);a=i(a,b);a!=null||g(0,void 0);a.kind===\"SingularReaderSelector\"||g(0,void 0);c=c.getDataForResolverFragment(a,b);a=c.data;b=c.isMissingData;if(b)throw k;return a}var k={};e.exports={readFragment:c,withResolverContext:a,RESOLVER_FRAGMENT_MISSING_DATA_SENTINEL:k}}),null);\n__d(\"relay-runtime\/store\/TypeID\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"client:__type:\";c=\"__TypeSchema\";function a(a){return g+a}function b(a){return a.indexOf(g)===0}e.exports={generateTypeID:a,isTypeID:b,TYPE_SCHEMA_TYPE:c}}),null);\n__d(\"relay-runtime\/store\/RelayReader\",[\"invariant\",\"relay-runtime\/store\/RelayConcreteVariables\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/store\/ResolverCache\",\"relay-runtime\/store\/ResolverFragments\",\"relay-runtime\/store\/TypeID\",\"relay-runtime\/store\/experimental-live-resolvers\/LiveResolverSuspenseSentinel\",\"relay-runtime\/util\/RelayConcreteNode\",\"relay-runtime\/util\/RelayFeatureFlags\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(a=b(\"relay-runtime\/util\/RelayConcreteNode\")).ACTOR_CHANGE,j=a.ALIASED_FRAGMENT_SPREAD,k=a.ALIASED_INLINE_FRAGMENT_SPREAD,l=a.CLIENT_EDGE_TO_CLIENT_OBJECT,m=a.CLIENT_EDGE_TO_SERVER_OBJECT,n=a.CLIENT_EXTENSION,o=a.CONDITION,p=a.DEFER,q=a.FRAGMENT_SPREAD,r=a.INLINE_DATA_FRAGMENT_SPREAD,s=a.INLINE_FRAGMENT,t=a.LINKED_FIELD,u=a.MODULE_IMPORT,v=a.RELAY_LIVE_RESOLVER,w=a.RELAY_RESOLVER,x=a.REQUIRED_FIELD,y=a.SCALAR_FIELD,z=a.STREAM,A=b(\"relay-runtime\/store\/experimental-live-resolvers\/LiveResolverSuspenseSentinel\").isSuspenseSentinel,B=(c=b(\"relay-runtime\/store\/RelayStoreUtils\")).CLIENT_EDGE_TRAVERSAL_PATH,C=c.FRAGMENT_OWNER_KEY,D=c.FRAGMENT_PROP_NAME_KEY,E=c.FRAGMENTS_KEY,F=c.ID_KEY,G=c.MODULE_COMPONENT_KEY,H=c.ROOT_ID,I=c.getArgumentValues,J=c.getModuleComponentKey,K=c.getStorageKey,L=b(\"relay-runtime\/store\/ResolverCache\").NoopResolverCache,M=b(\"relay-runtime\/store\/ResolverFragments\").RESOLVER_FRAGMENT_MISSING_DATA_SENTINEL,N=b(\"relay-runtime\/store\/ResolverFragments\").withResolverContext,O=b(\"relay-runtime\/store\/TypeID\").generateTypeID;function P(a,b,c){b=new Q(a,b,(a=c)!=null?a:new L());return b.read()}var Q=function(){function a(a,c,d){var e;this.$1=b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CLIENT_EDGES&&((e=c.clientEdgeTraversalPath)==null?void 0:e.length)?[].concat(c.clientEdgeTraversalPath):[];this.$3=[];this.$4=[];this.$2=!1;this.$5=!1;this.$6=null;this.$7=null;this.$8=c.owner;this.$9=a;this.$10=new Set();this.$12=c;this.$13=c.variables;this.$14=d;this.$15=[];this.$16=c.node.name;this.$11=new Set()}var c=a.prototype;c.read=function(){var a=this.$12,c=a.node,d=a.dataID;a=a.isWithinUnmatchedTypeRefinement;var e=c.abstractKey,f=this.$9.get(d);a=!a;if(a&&e==null&&f!=null){var g=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(f);g!==c.type&&d!==H&&(a=!1)}if(a&&e!=null&&f!=null){g=this.$17(f,e);g===!1?a=!1:g==null&&(this.$2=!0)}this.$5=!a;f=this.$18(c,d,null);this.$11.size>0&&(this.$14.notifyUpdatedSubscribers(this.$11),this.$11.clear());return{data:f,isMissingData:this.$2&&a,missingClientEdges:b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CLIENT_EDGES&&this.$3.length?this.$3:null,missingLiveResolverFields:this.$4,seenRecords:this.$10,selector:this.$12,missingRequiredFields:this.$6,relayResolverErrors:this.$15,errorResponseFields:this.$7}};c.$19=function(a,c){if(!b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_FIELD_ERROR_HANDLING)return;a=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getErrors(a,c);if(a==null)return;c=this.$16;this.$7==null&&(this.$7=[]);for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f,g;if(d){if(e>=a.length)break;g=a[e++]}else{e=a.next();if(e.done)break;g=e.value}g=g;this.$7.push({owner:c,path:((f=g.path)!=null?f:[]).join(\".\"),error:g})}};c.$20=function(){this.$2=!0;if(b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CLIENT_EDGES&&this.$1.length){var a=this.$1[this.$1.length-1];a!==null&&this.$3.push({request:a.readerClientEdge.operation,clientEdgeDestinationID:a.clientEdgeDestinationID})}};c.$18=function(a,b,c){var d=this.$9.get(b);this.$10.add(b);if(d==null){d===void 0&&this.$20();return d}b=c||{};c=this.$21(a.selections,d,b);return c?b:null};c.$22=function(a){Object.prototype.hasOwnProperty.call(this.$13,a)||g(0,1306,a);return this.$13[a]};c.$23=function(a,b){var c;if(((c=this.$6)==null?void 0:c.action)===\"THROW\")return;c=this.$16;switch(b){case\"THROW\":this.$6={action:b,field:{path:a,owner:c}};return;case\"LOG\":this.$6==null?this.$6={action:b,fields:[{path:a,owner:c}]}:this.$6={action:b,fields:[].concat(this.$6.fields,[{path:a,owner:c}])};return;default:b}};c.$21=function(a,c,d){for(var e=0;e<a.length;e++){var f=a[e];switch(f.kind){case x:var h=this.$24(f,c,d);if(h==null){h=f.action;h!==\"NONE\"&&this.$23(f.path,h);return!1}break;case y:this.$25(f,c,d);break;case t:f.plural?this.$26(f,c,d):this.$27(f,c,d);break;case o:h=Boolean(this.$22(f.condition));if(h===f.passingValue){h=this.$21(f.selections,c,d);if(!h)return!1}break;case s:if(this.$28(f,c,d)===!1)return!1;break;case v:case w:if(!b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_RELAY_RESOLVERS)throw new Error(\"Relay Resolver fields are not yet supported.\");this.$29(f,c,d);break;case q:this.$30(f,c,d);break;case j:d[f.name]=this.$31(f,c);break;case k:h=this.$28(f.fragment,c,{});h===!1&&(h=null);d[f.name]=h;break;case u:this.$32(f,c,d);break;case r:this.$33(f,c,d);break;case p:case n:h=this.$2;var A=this.$3.length;b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CLIENT_EDGES&&this.$1.push(null);var B=this.$21(f.selections,c,d);this.$2=h||this.$3.length>A||this.$4.length>0;b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CLIENT_EDGES&&this.$1.pop();if(!B)return!1;break;case z:h=this.$21(f.selections,c,d);if(!h)return!1;break;case i:this.$34(f,c,d);break;case l:case m:if(b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CLIENT_EDGES)this.$35(f,c,d);else throw new Error(\"Client edges are not yet supported.\");break;default:f,g(0,1307,f.kind)}}return!0};c.$24=function(a,c,d){switch(a.field.kind){case y:return this.$25(a.field,c,d);case t:if(a.field.plural)return this.$26(a.field,c,d);else return this.$27(a.field,c,d);case w:if(!b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_RELAY_RESOLVERS)throw new Error(\"Relay Resolver fields are not yet supported.\");return this.$29(a.field,c,d);case v:if(!b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_RELAY_RESOLVERS)throw new Error(\"Relay Resolver fields are not yet supported.\");return this.$29(a.field,c,d);case l:case m:if(!b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_RELAY_RESOLVERS)throw new Error(\"Relay Resolver fields are not yet supported.\");return this.$35(a.field,c,d);default:a.field.kind,g(0,1307,a.kind)}};c.$29=function(a,c,d){var e;c=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c);c=this.$36(a,c);e=(e=a.alias)!=null?e:a.name;d[e]=c;return c};c.$36=function(a,b){var c=this,d=a.fragment,e,f=function(a){if(e!=null)return{data:e.data,isMissingData:e.isMissingData};e=P(c.$9,a,c.$14);return{data:e.data,isMissingData:e.isMissingData}},g=function(){if(d!=null){var g,h={__id:b,__fragmentOwner:c.$8,__fragments:(g={},g[d.name]=d.args?I(d.args,c.$13):{},g)};g={getDataForResolverFragment:f};return N(g,function(){var d=R(a,c.$13,h),b=d[0];d=d[1];return{resolverResult:b,snapshot:e,error:d}})}else{g=R(a,c.$13,null);var i=g[0];g=g[1];return{resolverResult:i,snapshot:void 0,error:g}}};g=this.$14.readFromCacheOrEvaluate(b,a,this.$13,g,f);var h=g[0],i=g[1],j=g[2],k=g[3],l=g[4];g=g[5];this.$37(a.path,k,j,i,l,g);return h};c.$37=function(a,b,c,d,e,f){if(b!=null){b.missingRequiredFields!=null&&this.$38(b.missingRequiredFields);if(b.missingClientEdges!=null)for(var g=b.missingClientEdges,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;this.$3.push(j)}if(b.missingLiveResolverFields!=null){this.$2=this.$2||b.missingLiveResolverFields.length>0;for(j=b.missingLiveResolverFields,i=Array.isArray(j),h=0,j=i?j:j[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(i){if(h>=j.length)break;g=j[h++]}else{h=j.next();if(h.done)break;g=h.value}g=g;this.$4.push(g)}}for(g=b.relayResolverErrors,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;this.$15.push(j)}this.$2=this.$2||b.isMissingData}c&&this.$15.push({field:{path:a,owner:this.$16},error:c});d!=null&&this.$10.add(d);e!=null&&(this.$2=!0,this.$4.push({path:this.$16+\".\"+a,liveStateID:e}));if(f!=null)for(j=f,i=Array.isArray(j),h=0,j=i?j:j[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(i){if(h>=j.length)break;g=j[h++]}else{h=j.next();if(h.done)break;g=h.value}b=g;this.$11.add(b)}};c.$35=function(a,c,d){var e,f=this,i=a.backingField;i.kind!==\"ClientExtension\"||g(0,56148);e=(e=i.alias)!=null?e:i.name;var j={};this.$21([i],c,j);i=j[e];if(i==null||A(i)){d[e]=i;return i}if(a.linkedField.plural){Array.isArray(i)||g(0,67715);a.kind===l||g(0,60675);a.backingField.normalizationInfo==null?j=i.map(function(b){var c;c=(c=a.concreteType)!=null?c:b.__typename;typeof c===\"string\"||g(0,79e3);b=S(b);b=f.$14.ensureClientRecord(b,c);var d=a.modelResolvers;if(d!=null){d=d[c];d!==void 0||g(0,void 0);c=f.$36(d,b);return c!=null?b:null}return b}):j=i.map(S);this.$1.push(null);j=this.$39(a.linkedField,j,c,d);this.$1.pop();d[e]=j;return j}else{var k;j=S(i);k=(k=a.concreteType)!=null?k:i.__typename;var m;a.kind===l?a.backingField.normalizationInfo==null?(typeof k===\"string\"||g(0,79e3),i=this.$14.ensureClientRecord(j,k),m=null):(i=j,m=null):(i=j,m={readerClientEdge:a,clientEdgeDestinationID:j});j=a.modelResolvers;if(j!=null){typeof k===\"string\"||g(0,79e3);j=j[k];j!==void 0||g(0,void 0);k=this.$36(j,i);if(k==null){d[e]=null;return null}}this.$1.push(m);j=d[e];j==null||typeof j===\"object\"||g(0,1308,e,(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),j);k=this.$18(a.linkedField,i,j);this.$1.pop();d[e]=k;return k}};c.$25=function(a,c,d){var e;e=(e=a.alias)!=null?e:a.name;a=K(a,this.$13);var f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getValue(c,a);f===null?this.$19(c,a):f===void 0&&this.$20();d[e]=f;return f};c.$27=function(a,c,d){var e;e=(e=a.alias)!=null?e:a.name;var f=K(a,this.$13),i=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordID(c,f);if(i==null){d[e]=i;i===null?this.$19(c,f):i===void 0&&this.$20();return i}f=d[e];f==null||typeof f===\"object\"||g(0,1308,e,(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),f);c=this.$18(a,i,f);d[e]=c;return c};c.$34=function(a,c,d){var e;e=(e=a.alias)!=null?e:a.name;var f=K(a,this.$13),g=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getActorLinkedRecordID(c,f);if(g==null){d[e]=g;g===void 0?this.$20():g===null&&this.$19(c,f);return d[e]}c=g[0];f=g[1];g={};this.$30(a.fragmentSpread,h.fromObject({__id:f}),g);d[e]={__fragmentRef:g,__viewer:c};return d[e]};c.$26=function(a,c,d){var e=K(a,this.$13),f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordIDs(c,e);f===null&&this.$19(c,e);return this.$39(a,f,c,d)};c.$39=function(a,c,d,e){var f,i=this,j=(f=a.alias)!=null?f:a.name;if(c==null){e[j]=c;c===void 0&&this.$20();return c}f=e[j];f==null||Array.isArray(f)||g(0,1309,j,(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(d),f);var k=f||[];c.forEach(function(c,e){if(c==null){c===void 0&&i.$20();k[e]=c;return}var f=k[e];f==null||typeof f===\"object\"||g(0,1308,j,(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(d),f);k[e]=i.$18(a,c,f)});e[j]=k;return k};c.$32=function(a,c,d){var e=J(a.documentName);e=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getValue(c,e);if(e==null){e===void 0&&this.$20();return}this.$30({kind:\"FragmentSpread\",name:a.fragmentName,args:a.args},c,d);d[D]=a.fragmentPropName;d[G]=e};c.$31=function(a,c){var d=a.abstractKey;if(d==null){var e=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c);if(e==null||e!==a.type)return null}else{e=this.$17(c,d);if(e===!1)return null;else if(e==null){this.$20();return void 0}}d={};this.$30(a.fragment,c,d);return(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).fromObject(d)};c.$28=function(a,c,d){var e=a.abstractKey;if(e==null){var f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c);if(f==null||f!==a.type)return null;else{f=this.$21(a.selections,c,d);if(!f)return!1}}else{f=this.$17(c,e);e=this.$2;var g=this.$5;this.$5=g||f===!1;this.$21(a.selections,c,d);this.$5=g;if(f===!1){this.$2=e;return void 0}else if(f==null){this.$20();return null}}return d};c.$30=function(a,c,d){var e=d[E];e==null&&(e=d[E]={});typeof e===\"object\"&&e!=null||g(0,1310,e);d[F]==null&&(d[F]=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c));e[a.name]=I(a.args,this.$13,this.$5);d[C]=this.$8;b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CLIENT_EDGES&&(this.$1.length>0&&this.$1[this.$1.length-1]!==null&&(d[B]=[].concat(this.$1)))};c.$33=function(a,c,d){var e=d[E];e==null&&(e=d[E]={});typeof e===\"object\"&&e!=null||g(0,1310,e);d[F]==null&&(d[F]=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c));d={};var f=this.$16;this.$16=a.name;var i=this.$13,j=a.args?I(a.args,this.$13):{};this.$13=b(\"relay-runtime\/store\/RelayConcreteVariables\").getFragmentVariables(a,this.$8.variables,j);this.$21(a.selections,c,d);this.$13=i;this.$16=f;e[a.name]=d};c.$38=function(a){if(this.$6==null){this.$6=a;return}if(this.$6.action===\"THROW\")return;if(a.action===\"THROW\"){this.$6=a;return}this.$6={action:\"LOG\",fields:[].concat(this.$6.fields,a.fields)}};c.$17=function(a,c){a=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(a);a=this.$9.get(O(a));a=a!=null?(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getValue(a,c):null;return a};return a}();function R(a,b,c){var d=typeof a.resolverModule===\"function\"?a.resolverModule:a.resolverModule[\"default\"],e=null,f=null;try{var g=[];a.fragment!=null&&g.push(c);c=a.args?I(a.args,b):void 0;g.push(c);e=d.apply(null,g)}catch(a){a===M?e=void 0:f=a}return[e,f]}function S(a){if(typeof a===\"string\")return a;else if(typeof a===\"object\"&&a!=null&&typeof a.id===\"string\")return a.id;g(0,78931)}e.exports={read:P}}),null);\n__d(\"relay-runtime\/store\/RelayPublishQueue\",[\"invariant\",\"relay-runtime\/mutations\/RelayRecordSourceMutator\",\"relay-runtime\/mutations\/RelayRecordSourceProxy\",\"relay-runtime\/mutations\/RelayRecordSourceSelectorProxy\",\"relay-runtime\/store\/RelayReader\",\"relay-runtime\/store\/RelayRecordSource\",\"relay-runtime\/util\/deepFreeze\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;c=typeof a!==\"undefined\"?a:typeof window!==\"undefined\"?window:void 0;var i=(f=c==null?void 0:(d=c.ErrorUtils)==null?void 0:d.applyWithGuard)!=null?f:function(a,b,c,d,e){return a.apply(b,c)};a=function(){function a(a,b,c,d){this.$5=!1,this.$2=b||null,this.$6=!1,this.$7=new Set(),this.$8=new Set(),this.$1=a,this.$9=new Set(),this.$10=null,this.$4=c,this.$3=d}var c=a.prototype;c.applyUpdate=function(a){!this.$9.has(a)&&!this.$8.has(a)||g(0,680),this.$8.add(a)};c.revertUpdate=function(a){this.$8.has(a)?this.$8[\"delete\"](a):this.$9.has(a)&&(this.$6=!0,this.$9[\"delete\"](a))};c.revertAll=function(){this.$6=!0,this.$8.clear(),this.$9.clear()};c.commitPayload=function(a,b,c){this.$6=!0,this.$7.add({kind:\"payload\",operation:a,payload:b,updater:c})};c.commitUpdate=function(a){this.$6=!0,this.$7.add({kind:\"updater\",updater:a})};c.commitSource=function(a){this.$6=!0,this.$7.add({kind:\"source\",source:a})};c.run=function(a){var b=this.$9===0&&!!this.$10;b=!this.$6&&this.$8.size===0&&!b;if(b)return[];this.$6&&(this.$5&&(this.$1.restore(),this.$5=!1));b=this.$12();(this.$8.size||this.$6&&this.$9.size)&&(this.$5||(this.$1.snapshot(),this.$5=!0),this.$13());this.$6=!1;this.$9.size>0?this.$10||(this.$10=this.$1.holdGC()):this.$10&&(this.$10.dispose(),this.$10=null);return this.$1.notify(a,b)};c.$14=function(a){var c=this,d=a.payload,e=a.operation;a=a.updater;var f=d.source;d=d.fieldPayloads;var h=new(b(\"relay-runtime\/mutations\/RelayRecordSourceMutator\"))(this.$1.getSource(),f),i=new(b(\"relay-runtime\/mutations\/RelayRecordSourceProxy\"))(h,this.$4,this.$2,this.$3);d&&d.length&&d.forEach(function(a){var b=c.$2&&c.$2(a.handle);b||g(0,681,a.handle);b.update(i,a)});if(a){d=e.fragment;d!=null||g(0,12580);e=new(b(\"relay-runtime\/mutations\/RelayRecordSourceSelectorProxy\"))(h,i,d,this.$3);h=j(f,d);a(e,h)}d=i.getIDsMarkedForInvalidation();this.$1.publish(f,d);return i.isStoreMarkedForInvalidation()};c.$12=function(){var a=this;if(!this.$7.size)return!1;var c=!1;this.$7.forEach(function(d){if(d.kind===\"payload\"){var e=a.$14(d);c=c||e}else if(d.kind===\"source\"){e=d.source;a.$1.publish(e)}else{e=d.updater;d=b(\"relay-runtime\/store\/RelayRecordSource\").create();var f=new(b(\"relay-runtime\/mutations\/RelayRecordSourceMutator\"))(a.$1.getSource(),d);f=new(b(\"relay-runtime\/mutations\/RelayRecordSourceProxy\"))(f,a.$4,a.$2,a.$3);i(e,null,[f],null,\"RelayPublishQueue:commitData\");c=c||f.isStoreMarkedForInvalidation();e=f.getIDsMarkedForInvalidation();a.$1.publish(d,e)}});this.$7.clear();return c};c.$13=function(){var a=this,c=b(\"relay-runtime\/store\/RelayRecordSource\").create(),d=new(b(\"relay-runtime\/mutations\/RelayRecordSourceMutator\"))(this.$1.getSource(),c),e=new(b(\"relay-runtime\/mutations\/RelayRecordSourceProxy\"))(d,this.$4,this.$2,this.$3),f=function(c){if(c.storeUpdater){var f=c.storeUpdater;i(f,null,[e],null,\"RelayPublishQueue:applyUpdates\")}else{f=c.operation;var g=c.payload;c=c.updater;var h=g.source;g=g.fieldPayloads;h&&e.publishSource(h,g);if(c){var k;h&&(k=j(h,f.fragment));g=new(b(\"relay-runtime\/mutations\/RelayRecordSourceSelectorProxy\"))(d,e,f.fragment,a.$3);i(c,null,[g,k],null,\"RelayPublishQueue:applyUpdates\")}}};this.$6&&this.$9.size&&this.$9.forEach(f);this.$8.size&&(this.$8.forEach(function(b){f(b),a.$9.add(b)}),this.$8.clear());this.$1.publish(c)};return a}();function j(a,c){a=b(\"relay-runtime\/store\/RelayReader\").read(a,c).data;return a}e.exports=a}),null);\n__d(\"relay-runtime\/store\/StoreInspector\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(){};e.exports={inspect:a}}),null);\n__d(\"relay-runtime\/store\/ViewerPattern\",[\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"relay-runtime\/store\/ClientID\").generateClientID;c=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_ID;d=a(c,\"viewer\");f=\"Viewer\";e.exports={VIEWER_ID:d,VIEWER_TYPE:f}}),null);\n__d(\"relay-runtime\/store\/defaultGetDataID\",[\"relay-runtime\/store\/ViewerPattern\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/store\/ViewerPattern\").VIEWER_ID,h=b(\"relay-runtime\/store\/ViewerPattern\").VIEWER_TYPE;function a(a,b){return b===h?a.id==null?g:a.id:a.id}e.exports=a}),null);\n__d(\"relay-runtime\/store\/defaultRelayFieldLogger\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(a){};e.exports=a}),null);\n__d(\"relay-runtime\/multi-actor-environment\/ActorUtils\",[\"relay-runtime\/multi-actor-environment\/ActorIdentifier\"],(function(a,b,c,d,e,f){\"use strict\";var g=\"actor_key\",h=b(\"relay-runtime\/multi-actor-environment\/ActorIdentifier\").getActorIdentifier;function a(a){if(a!=null&&typeof a===\"object\"&&typeof a[g]===\"string\")return h(a[g])}e.exports={ACTOR_IDENTIFIER_FIELD_NAME:g,getActorIdentifierFromPayload:a}}),null);\n__d(\"relay-runtime\/store\/RelayResponseNormalizer\",[\"invariant\",\"areEqual\",\"relay-runtime\/multi-actor-environment\/ActorUtils\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayConcreteVariables\",\"relay-runtime\/store\/RelayErrorTrie\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayModernSelector\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/store\/TypeID\",\"relay-runtime\/util\/RelayConcreteNode\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;c=b(\"relay-runtime\/multi-actor-environment\/ActorUtils\").ACTOR_IDENTIFIER_FIELD_NAME;var j=b(\"relay-runtime\/multi-actor-environment\/ActorUtils\").getActorIdentifierFromPayload,k=(d=b(\"relay-runtime\/util\/RelayConcreteNode\")).ACTOR_CHANGE,l=d.CLIENT_COMPONENT,m=d.CLIENT_EDGE_TO_CLIENT_OBJECT,n=d.CLIENT_EXTENSION,o=d.CONDITION,p=d.DEFER,q=d.FRAGMENT_SPREAD,r=d.INLINE_FRAGMENT,s=d.LINKED_FIELD,t=d.LINKED_HANDLE,u=d.MODULE_IMPORT,v=d.RELAY_LIVE_RESOLVER,w=d.RELAY_RESOLVER,x=d.SCALAR_FIELD,y=d.SCALAR_HANDLE,z=d.STREAM,A=d.TYPE_DISCRIMINATOR,B=b(\"relay-runtime\/store\/ClientID\").generateClientID,C=b(\"relay-runtime\/store\/ClientID\").isClientID,D=b(\"relay-runtime\/store\/RelayConcreteVariables\").getLocalVariables,E=b(\"relay-runtime\/store\/RelayErrorTrie\").buildErrorTrie,F=b(\"relay-runtime\/store\/RelayErrorTrie\").getErrorsByKey,G=b(\"relay-runtime\/store\/RelayErrorTrie\").getNestedErrorTrieByKey,H=b(\"relay-runtime\/store\/RelayModernSelector\").createNormalizationSelector,I=(f=b(\"relay-runtime\/store\/RelayStoreUtils\")).ROOT_ID,J=f.TYPENAME_KEY,K=f.getArgumentValues,L=f.getHandleStorageKey,M=f.getModuleComponentKey,N=f.getModuleOperationKey,O=f.getStorageKey,P=b(\"relay-runtime\/store\/TypeID\").TYPE_SCHEMA_TYPE,Q=b(\"relay-runtime\/store\/TypeID\").generateTypeID;function a(a,b,c,d,e){var f=b.dataID,g=b.node;b=b.variables;a=new R(a,b,d);return a.normalizeResponse(g,f,c,e)}var R=function(){function a(a,b,c){this.$1=c.actorIdentifier,this.$2=c.getDataID,this.$3=[],this.$4=c.treatMissingFieldsAsNull,this.$5=[],this.$6=!1,this.$7=!1,this.$8=[],this.$9=c.path?[].concat(c.path):[],this.$10=a,this.$11=b,this.$12=c.shouldProcessClientComponents}var c=a.prototype;c.normalizeResponse=function(a,b,c,d){var e=this.$10.get(b);e||g(0,3565,b);this.$14(a);this.$13=E(d);this.$15(a,e,c);return{errors:d,fieldPayloads:this.$3,incrementalPlaceholders:this.$5,followupPayloads:this.$8,source:this.$10,isFinal:!1}};c.$14=function(a){a=a.clientAbstractTypes;if(a!=null){var c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d];for(var f=a[e],g=Array.isArray(f),i=0,f=g?f:f[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var j;if(g){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;j=Q(j);var k=this.$10.get(j);k==null&&(k=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(j,P),this.$10.set(j,k));(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setValue(k,e,!0)}}}};c.$16=function(a){Object.prototype.hasOwnProperty.call(this.$11,a)||g(0,3566,a);return this.$11[a]};c.$17=function(a){var b=a[J];b!=null||g(0,3567,JSON.stringify(a,null,2));return b};c.$15=function(a,c,d){for(var e=0;e<a.selections.length;e++){var f=a.selections[e];switch(f.kind){case x:case s:this.$18(f,c,d);break;case o:var i=Boolean(this.$16(f.condition));i===f.passingValue&&this.$15(f,c,d);break;case q:i=this.$11;this.$11=D(this.$11,f.fragment.argumentDefinitions,f.args);this.$15(f.fragment,c,d);this.$11=i;break;case r:i=f.abstractKey;if(i==null){var j=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c);j===f.type&&this.$15(f,c,d)}else{j=Object.prototype.hasOwnProperty.call(d,i);var B=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c);B=Q(B);var C=this.$10.get(B);C==null&&(C=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(B,P),this.$10.set(B,C));h.setValue(C,i,j);j&&this.$15(f,c,d)}break;case A:B=f.abstractKey;C=Object.prototype.hasOwnProperty.call(d,B);i=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c);j=Q(i);i=this.$10.get(j);i==null&&(i=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(j,P),this.$10.set(j,i));h.setValue(i,B,C);break;case t:case y:j=f.args?K(f.args,this.$11):{};i=O(f,this.$11);B=L(f,this.$11);this.$3.push({args:j,dataID:(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),fieldKey:i,handle:f.handle,handleKey:B,handleArgs:f.handleArgs?K(f.handleArgs,this.$11):{}});break;case u:this.$19(f,c,d);break;case p:this.$20(f,c,d);break;case z:this.$21(f,c,d);break;case n:C=this.$6;this.$6=!0;this.$15(f,c,d);this.$6=C;break;case l:if(this.$12===!1)break;this.$15(f.fragment,c,d);break;case k:this.$22(f,c,d);break;case w:this.$23(f,c,d);break;case v:this.$23(f,c,d);break;case m:this.$23(f.backingField,c,d);break;default:f,g(0,3569,f.kind)}}};c.$23=function(a,b,c){a.fragment!=null&&this.$15(a.fragment,b,c)};c.$20=function(a,c,d){var e=a[\"if\"]===null||this.$16(a[\"if\"]);e===!1?this.$15(a,c,d):this.$5.push({kind:\"defer\",data:d,label:a.label,path:[].concat(this.$9),selector:H(a,(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),this.$11),typeName:h.getType(c),actorIdentifier:this.$1})};c.$21=function(a,c,d){this.$15(a,c,d);d=a[\"if\"]===null||this.$16(a[\"if\"]);d===!0&&this.$5.push({kind:\"stream\",label:a.label,path:[].concat(this.$9),parentID:(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),node:a,variables:this.$11,actorIdentifier:this.$1})};c.$19=function(a,c,d){typeof d===\"object\"&&d||g(0,13641);var e=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c),f=M(a.documentName),i=a.componentModuleProvider||d[f];h.setValue(c,f,(f=i)!=null?f:null);i=N(a.documentName);f=a.operationModuleProvider||d[i];h.setValue(c,i,(i=f)!=null?i:null);f!=null&&this.$8.push({kind:\"ModuleImportPayload\",args:a.args,data:d,dataID:(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),operationReference:f,path:[].concat(this.$9),typeName:e,variables:this.$11,actorIdentifier:this.$1})};c.$18=function(a,c,d){typeof d===\"object\"&&d||g(0,3570,a.name);var e=a.alias||a.name,f=O(a,this.$11);d=d[e];if(d==null){if(d===void 0){var i=this.$6||this.$7;if(i)return;else if(!this.$4)return}(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setValue(c,f,null);i=this.$13;if(i!=null){i=F(i,e);i!=null&&(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setErrors(c,f,i)}return}if(a.kind===x)(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setValue(c,f,d);else if(a.kind===s){this.$9.push(e);i=this.$13;this.$13=i==null?null:G(i,e);a.plural?this.$25(a,c,f,d):this.$26(a,c,f,d);this.$13=i;this.$9.pop()}else a,g(0,11863,a.kind)};c.$22=function(a,c,d){var e;a=a.linkedField;typeof d===\"object\"&&d||g(0,45628,a.name);var f=a.alias||a.name,i=O(a,this.$11);d=d[f];if(d==null){if(d===void 0){var k=this.$6||this.$7;if(k)return;else if(!this.$4)return}(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setValue(c,i,null);return}k=j(d);if(k==null){(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setValue(c,i,null);return}e=(e=a.concreteType)!=null?e:this.$17(d);var l=this.$2(d,e)||(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordID(c,i)||B((h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),i);typeof l===\"string\"||g(0,3572,i);(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setActorLinkedRecordID(c,i,k,l);this.$8.push({kind:\"ActorPayload\",data:d,dataID:l,path:[].concat(this.$9,[f]),typeName:e,variables:this.$11,node:a,actorIdentifier:k})};c.$26=function(a,c,d,e){var f;typeof e===\"object\"&&e||g(0,3571,d);f=this.$2(e,(f=a.concreteType)!=null?f:this.$17(e))||(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordID(c,d)||B((h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),d);typeof f===\"string\"||g(0,3572,d);(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setLinkedRecordID(c,d,f);c=this.$10.get(f);if(!c){d=a.concreteType||this.$17(e);c=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(f,d);this.$10.set(f,c)}this.$15(a,c,e)};c.$25=function(a,c,d,e){var f=this;Array.isArray(e)||g(0,3573,d);var i=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordIDs(c,d),j=[];e.forEach(function(e,k){var l;if(e==null){j.push(e);return}f.$9.push(String(k));var m=f.$13;f.$13=m==null?null:G(m,k);typeof e===\"object\"||g(0,3574,d);l=f.$2(e,(l=a.concreteType)!=null?l:f.$17(e))||i&&i[k]||B((h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(c),d,k);typeof l===\"string\"||g(0,3575,d);j.push(l);k=f.$10.get(l);if(!k){var n=a.concreteType||f.$17(e);k=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(l,n);f.$10.set(l,k)}f.$15(a,k,e);f.$13=m;f.$9.pop()});h.setLinkedRecordIDs(c,d,j)};c.$28=function(a,c,d){c=(c=c.concreteType)!=null?c:this.$17(d);d=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getDataID(a);b(\"warning\")(C(d)&&d!==I||(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(a)===c,\"RelayResponseNormalizer: Invalid record `%s`. Expected %s to be consistent, but the record was assigned conflicting types `%s` and `%s`. The GraphQL server likely violated the globally unique id requirement by returning the same id for different objects.\",d,J,h.getType(a),c)};c.$24=function(a,b,c){};c.$27=function(a,b,c){};return a}();e.exports={normalize:a}}),null);\n__d(\"relay-runtime\/store\/normalizeResponse\",[\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayRecordSource\",\"relay-runtime\/store\/RelayResponseNormalizer\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b,d,e){var f=a.data,g=a.errors,i=c(\"relay-runtime\/store\/RelayRecordSource\").create();d=(h||(h=c(\"relay-runtime\/store\/RelayModernRecord\"))).create(b.dataID,d);i.set(b.dataID,d);d=c(\"relay-runtime\/store\/RelayResponseNormalizer\").normalize(i,b,f,e,g);return babelHelpers[\"extends\"]({},d,{isFinal:((i=a.extensions)==null?void 0:i.is_final)===!0})}f.exports=a}),34);\n__d(\"relay-runtime\/util\/registerEnvironmentWithDevTools\",[],(function(a,b,c,d,e,f){\"use strict\";function b(b){var c=typeof a!==\"undefined\"?a:typeof window!==\"undefined\"?window:void 0;c=c&&c.__RELAY_DEVTOOLS_HOOK__;c&&c.registerEnvironment(b)}e.exports=b}),null);\n__d(\"relay-runtime\/store\/RelayModernEnvironment\",[\"invariant\",\"relay-runtime\/handlers\/RelayDefaultHandlerProvider\",\"relay-runtime\/multi-actor-environment\/ActorIdentifier\",\"relay-runtime\/network\/RelayObservable\",\"relay-runtime\/network\/wrapNetworkWithLogObserver\",\"relay-runtime\/store\/OperationExecutor\",\"relay-runtime\/store\/RelayOperationTracker\",\"relay-runtime\/store\/RelayPublishQueue\",\"relay-runtime\/store\/RelayRecordSource\",\"relay-runtime\/store\/StoreInspector\",\"relay-runtime\/store\/defaultGetDataID\",\"relay-runtime\/store\/defaultRelayFieldLogger\",\"relay-runtime\/store\/normalizeResponse\",\"relay-runtime\/util\/registerEnvironmentWithDevTools\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/multi-actor-environment\/ActorIdentifier\").INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,i=b(\"relay-runtime\/multi-actor-environment\/ActorIdentifier\").assertInternalActorIdentifier;a=function(){function a(a){var c,d=this;this.configName=a.configName;this.$11=a.treatMissingFieldsAsNull===!0;var e=a.operationLoader;this.__log=(c=a.log)!=null?c:k;this.relayFieldLogger=(c=a.relayFieldLogger)!=null?c:b(\"relay-runtime\/store\/defaultRelayFieldLogger\");this.$1=(c=a.UNSTABLE_defaultRenderPolicy)!=null?c:\"partial\";this.$2=e;this.$12=new Map();this.$4=b(\"relay-runtime\/network\/wrapNetworkWithLogObserver\")(this,a.network);this.$10=(c=a.getDataID)!=null?c:b(\"relay-runtime\/store\/defaultGetDataID\");this.$8=(e=a.missingFieldHandlers)!=null?e:[];this.$5=new(b(\"relay-runtime\/store\/RelayPublishQueue\"))(a.store,(c=a.handlerProvider)!=null?c:b(\"relay-runtime\/handlers\/RelayDefaultHandlerProvider\"),this.$10,this.$8);this.$6=(e=a.scheduler)!=null?e:null;this.$7=a.store;this.options=a.options;this.$13=(c=a.isServer)!=null?c:!1;this.$14=(e=a.normalizeResponse)!=null?e:b(\"relay-runtime\/store\/normalizeResponse\");this.__setNet=function(a){return d.$4=b(\"relay-runtime\/network\/wrapNetworkWithLogObserver\")(d,a)};this.$9=(c=a.operationTracker)!=null?c:new(b(\"relay-runtime\/store\/RelayOperationTracker\"))();this.$3=a.shouldProcessClientComponents;b(\"relay-runtime\/util\/registerEnvironmentWithDevTools\")(this)}var c=a.prototype;c.getStore=function(){return this.$7};c.getNetwork=function(){return this.$4};c.getOperationTracker=function(){return this.$9};c.getScheduler=function(){return this.$6};c.isRequestActive=function(a){a=this.$12.get(a);return a===\"active\"};c.UNSTABLE_getDefaultRenderPolicy=function(){return this.$1};c.applyUpdate=function(a){var b=this,c=function(){b.$15(function(){b.$5.revertUpdate(a),b.$5.run()})};this.$15(function(){b.$5.applyUpdate(a),b.$5.run()});return{dispose:c}};c.revertUpdate=function(a){var b=this;this.$15(function(){b.$5.revertUpdate(a),b.$5.run()})};c.replaceUpdate=function(a,b){var c=this;this.$15(function(){c.$5.revertUpdate(a),c.$5.applyUpdate(b),c.$5.run()})};c.applyMutation=function(a){var c=this.$16({createSource:function(){return b(\"relay-runtime\/network\/RelayObservable\").create(function(a){})},isClientPayload:!1,operation:a.operation,optimisticConfig:a,updater:null}).subscribe({});return{dispose:function(){return c.unsubscribe()}}};c.check=function(a){return this.$8.length===0&&!j(a)?this.$7.check(a):this.$17(a,this.$8)};c.commitPayload=function(a,c){this.$16({createSource:function(){return b(\"relay-runtime\/network\/RelayObservable\").from({data:c})},isClientPayload:!0,operation:a,optimisticConfig:null,updater:null}).subscribe({})};c.commitUpdate=function(a){var b=this;this.$15(function(){b.$5.commitUpdate(a),b.$5.run()})};c.lookup=function(a){return this.$7.lookup(a)};c.subscribe=function(a,b){return this.$7.subscribe(a,b)};c.retain=function(a){return this.$7.retain(a)};c.isServer=function(){return this.$13};c.$17=function(a,c){var d=this,e=b(\"relay-runtime\/store\/RelayRecordSource\").create(),f=this.$7.getSource();a=this.$7.check(a,{handlers:c,defaultActorIdentifier:h,getSourceForActor:function(a){i(a);return f},getTargetForActor:function(a){i(a);return e}});e.size()>0&&this.$15(function(){d.$5.commitSource(e),d.$5.run()});return a};c.$15=function(a){var b=this.$6;b!=null?b.schedule(a):a()};c.execute=function(a){var b=this,c=a.operation;return this.$16({createSource:function(){return b.getNetwork().execute(c.request.node.params,c.request.variables,c.request.cacheConfig||{},null)},isClientPayload:!1,operation:c,optimisticConfig:null,updater:null})};c.executeSubscription=function(a){var b=this,c=a.operation;a=a.updater;return this.$16({createSource:function(){return b.getNetwork().execute(c.request.node.params,c.request.variables,c.request.cacheConfig||{},null)},isClientPayload:!1,operation:c,optimisticConfig:null,updater:a})};c.executeMutation=function(a){var b=this,c=a.operation,d=a.optimisticResponse,e=a.optimisticUpdater,f=a.updater,g=a.uploadables,h;(d||e)&&(h={operation:c,response:d,updater:e});return this.$16({createSource:function(){return b.getNetwork().execute(c.request.node.params,c.request.variables,babelHelpers[\"extends\"]({},c.request.cacheConfig,{force:!0}),g)},isClientPayload:!1,operation:c,optimisticConfig:h,updater:f})};c.executeWithSource=function(a){var b=a.operation,c=a.source;return this.$16({createSource:function(){return c},isClientPayload:!1,operation:b,optimisticConfig:null,updater:null})};c.toJSON=function(){var a;return\"RelayModernEnvironment(\"+((a=this.configName)!=null?a:\"\")+\")\"};c.$16=function(a){var c=this,d=a.createSource,e=a.isClientPayload,f=a.operation,g=a.optimisticConfig,j=a.updater,k=this.$5,l=this.$7;return b(\"relay-runtime\/network\/RelayObservable\").create(function(a){var m=b(\"relay-runtime\/store\/OperationExecutor\").execute({actorIdentifier:h,getDataID:c.$10,isClientPayload:e,log:c.__log,operation:f,operationExecutions:c.$12,operationLoader:c.$2,operationTracker:c.$9,optimisticConfig:g,getPublishQueue:function(a){i(a);return k},scheduler:c.$6,shouldProcessClientComponents:c.$3,sink:a,source:d(),getStore:function(a){i(a);return l},treatMissingFieldsAsNull:c.$11,updater:j,normalizeResponse:c.$14});return function(){return m.cancel()}})};return a}();function j(a){return a.root.node.kind===\"Operation\"&&a.root.node.clientAbstractTypes!=null}a.prototype[\"@@RelayModernEnvironment\"]=!0;function k(){}e.exports=a}),null);\n__d(\"regeneratorRuntime\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g,h=Object.prototype.hasOwnProperty,i=typeof Symbol===\"function\"&&(typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\")||\"@@iterator\",j=e.exports;function k(a,b,c,d){b=Object.create((b||r).prototype);d=new A(d||[]);b._invoke=x(a,c,d);return b}j.wrap=k;function l(a,b,c){try{return{type:\"normal\",arg:a.call(b,c)}}catch(a){return{type:\"throw\",arg:a}}}var m=\"suspendedStart\",n=\"suspendedYield\",o=\"executing\",p=\"completed\",q={};function r(){}function s(){}function t(){}var u=t.prototype=r.prototype;s.prototype=u.constructor=t;t.constructor=s;s.displayName=\"GeneratorFunction\";function a(a){[\"next\",\"throw\",\"return\"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}j.isGeneratorFunction=function(a){a=typeof a===\"function\"&&a.constructor;return a?a===s||(a.displayName||a.name)===\"GeneratorFunction\":!1};j.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,t):Object.assign(a,t);a.prototype=Object.create(u);return a};j.awrap=function(a){return new v(a)};function v(a){this.arg=a}function w(a){function c(c,f){var h=a[c](f);c=h.value;return c instanceof v?(g||(g=b(\"Promise\"))).resolve(c.arg).then(d,e):(g||(g=b(\"Promise\"))).resolve(c).then(function(a){h.value=a;return h})}typeof process===\"object\"&&process.domain&&(c=process.domain.bind(c));var d=c.bind(a,\"next\"),e=c.bind(a,\"throw\");c.bind(a,\"return\");var f;function h(a,d){var e=f?f.then(function(){return c(a,d)}):new(g||(g=b(\"Promise\")))(function(b){b(c(a,d))});f=e[\"catch\"](function(a){});return e}this._invoke=h}a(w.prototype);j.async=function(a,b,c,d){var e=new w(k(a,b,c,d));return j.isGeneratorFunction(b)?e:e.next().then(function(a){return a.done?a.value:e.next()})};function x(a,b,c){var d=m;return function(e,f){if(d===o)throw new Error(\"Generator is already running\");if(d===p){if(e===\"throw\")throw f;return C()}while(!0){var g=c.delegate;if(g){if(e===\"return\"||e===\"throw\"&&g.iterator[e]===void 0){c.delegate=null;var h=g.iterator[\"return\"];if(h){h=l(h,g.iterator,f);if(h.type===\"throw\"){e=\"throw\";f=h.arg;continue}}if(e===\"return\")continue}h=l(g.iterator[e],g.iterator,f);if(h.type===\"throw\"){c.delegate=null;e=\"throw\";f=h.arg;continue}e=\"next\";f=void 0;var i=h.arg;if(i.done)c[g.resultName]=i.value,c.next=g.nextLoc;else{d=n;return i}c.delegate=null}if(e===\"next\")d===n?c.sent=f:c.sent=void 0;else if(e===\"throw\"){if(d===m){d=p;throw f}c.dispatchException(f)&&(e=\"next\",f=void 0)}else e===\"return\"&&c.abrupt(\"return\",f);d=o;h=l(a,b,c);if(h.type===\"normal\"){d=c.done?p:n;var i={value:h.arg,done:c.done};if(h.arg===q)c.delegate&&e===\"next\"&&(f=void 0);else return i}else h.type===\"throw\"&&(d=p,e=\"throw\",f=h.arg)}}}a(u);u[i]=function(){return this};u.toString=function(){return\"[object Generator]\"};function y(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function z(a){var b=a.completion||{};b.type=\"normal\";delete b.arg;a.completion=b}function A(a){this.tryEntries=[{tryLoc:\"root\"}],a.forEach(y,this),this.reset(!0)}j.keys=function(a){var b=[];for(var c in a)b.push(c);b.reverse();return function c(){while(b.length){var d=b.pop();if(d in a){c.value=d;c.done=!1;return c}}c.done=!0;return c}};function B(a){if(a){var b=a[i];if(b)return b.call(a);if(typeof a.next===\"function\")return a;if(!isNaN(a.length)){var c=-1;b=function b(){while(++c<a.length)if(h.call(a,c)){b.value=a[c];b.done=!1;return b}b.value=void 0;b.done=!0;return b};return b.next=b}}return{next:C}}j.values=B;function C(){return{value:void 0,done:!0}}A.prototype={constructor:A,reset:function(a){this.prev=0;this.next=0;this.sent=void 0;this.done=!1;this.delegate=null;this.tryEntries.forEach(z);if(!a)for(a in this)a.charAt(0)===\"t\"&&h.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0];a=a.completion;if(a.type===\"throw\")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var b=this;function c(c,d){f.type=\"throw\";f.arg=a;b.next=c;return!!d}for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if(e.tryLoc===\"root\")return c(\"end\");if(e.tryLoc<=this.prev){var g=h.call(e,\"catchLoc\"),i=h.call(e,\"finallyLoc\");if(g&&i){if(this.prev<e.catchLoc)return c(e.catchLoc,!0);else if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return c(e.catchLoc,!0)}else if(i){if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else throw new Error(\"try statement without catch or finally\")}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&h.call(d,\"finallyLoc\")&&this.prev<d.finallyLoc){var e=d;break}}e&&(a===\"break\"||a===\"continue\")&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);d=e?e.completion:{};d.type=a;d.arg=b;e?this.next=e.finallyLoc:this.complete(d);return q},complete:function(a,b){if(a.type===\"throw\")throw a.arg;a.type===\"break\"||a.type===\"continue\"?this.next=a.arg:a.type===\"return\"?(this.rval=a.arg,this.next=\"end\"):a.type===\"normal\"&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a){this.complete(c.completion,c.afterLoc);z(c);return q}}},\"catch\":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if(d.type===\"throw\"){var e=d.arg;z(c)}return e}}throw new Error(\"illegal catch attempt\")},delegateYield:function(a,b,c){this.delegate={iterator:B(a),resultName:b,nextLoc:c};return q}}}),null);\n__d(\"relay-runtime\/store\/cloneRelayHandleSourceField\",[\"invariant\",\"areEqual\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/util\/RelayConcreteNode\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/util\/RelayConcreteNode\").LINKED_FIELD,j=b(\"relay-runtime\/store\/RelayStoreUtils\").getHandleStorageKey;function a(a,c,d){c=c.find(function(c){return c.kind===i&&c.name===a.name&&c.alias===a.alias&&(h||(h=b(\"areEqual\")))(c.args,a.args)});c&&c.kind===i||g(0,2847,a.handle);d=j(a,d);return{kind:\"LinkedField\",alias:c.alias,name:d,storageKey:d,args:null,concreteType:c.concreteType,plural:c.plural,selections:c.selections}}e.exports=a}),null);\n__d(\"relay-runtime\/store\/cloneRelayScalarHandleSourceField\",[\"invariant\",\"areEqual\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/util\/RelayConcreteNode\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/util\/RelayConcreteNode\").SCALAR_FIELD,j=b(\"relay-runtime\/store\/RelayStoreUtils\").getHandleStorageKey;function a(a,c,d){c=c.find(function(c){return c.kind===i&&c.name===a.name&&c.alias===a.alias&&(h||(h=b(\"areEqual\")))(c.args,a.args)});c&&c.kind===i||g(0,23146,a.handle);d=j(a,d);return{kind:\"ScalarField\",alias:c.alias,name:d,storageKey:d,args:null}}e.exports=a}),null);\n__d(\"relay-runtime\/store\/DataChecker\",[\"invariant\",\"relay-runtime\/mutations\/RelayRecordSourceMutator\",\"relay-runtime\/mutations\/RelayRecordSourceProxy\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayConcreteVariables\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayRecordState\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/store\/TypeID\",\"relay-runtime\/store\/cloneRelayHandleSourceField\",\"relay-runtime\/store\/cloneRelayScalarHandleSourceField\",\"relay-runtime\/util\/RelayConcreteNode\",\"relay-runtime\/util\/getOperation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/store\/ClientID\").isClientID,j=b(\"relay-runtime\/store\/RelayConcreteVariables\").getLocalVariables,k=b(\"relay-runtime\/store\/RelayRecordState\").EXISTENT,l=b(\"relay-runtime\/store\/RelayRecordState\").UNKNOWN,m=b(\"relay-runtime\/store\/TypeID\").TYPE_SCHEMA_TYPE,n=b(\"relay-runtime\/store\/TypeID\").generateTypeID,o=(c=b(\"relay-runtime\/util\/RelayConcreteNode\")).ACTOR_CHANGE,p=c.CONDITION,q=c.CLIENT_COMPONENT,r=c.CLIENT_EXTENSION,s=c.CLIENT_EDGE_TO_CLIENT_OBJECT,t=c.DEFER,u=c.FRAGMENT_SPREAD,v=c.INLINE_FRAGMENT,w=c.LINKED_FIELD,x=c.LINKED_HANDLE,y=c.MODULE_IMPORT,z=c.RELAY_RESOLVER,A=c.RELAY_LIVE_RESOLVER,B=c.SCALAR_FIELD,C=c.SCALAR_HANDLE,D=c.STREAM,E=c.TYPE_DISCRIMINATOR,F=b(\"relay-runtime\/store\/RelayStoreUtils\").getModuleOperationKey,G=b(\"relay-runtime\/store\/RelayStoreUtils\").getStorageKey,H=b(\"relay-runtime\/store\/RelayStoreUtils\").getArgumentValues;function a(a,b,c,d,e,f,g,h){var i=d.dataID,j=d.node;d=d.variables;a=new I(a,b,c,d,e,f,g,h);return a.check(j,i)}var I=function(){function a(a,b,c,d,e,f,g,h){this.$11=a;this.$12=b;this.$13=g;this.$8=a(c);this.$14=new Map();b=this.$15(c);g=b[0];a=b[1];this.$2=null;this.$1=e;this.$3=g;this.$4=(c=f)!=null?c:null;this.$6=a;this.$7=!1;this.$9=d;this.$10=h}var c=a.prototype;c.$15=function(a){var c=this.$14.get(a);if(c==null){var d=this.$12(a);d=new(b(\"relay-runtime\/mutations\/RelayRecordSourceMutator\"))(this.$11(a),d);var e=new(b(\"relay-runtime\/mutations\/RelayRecordSourceProxy\"))(d,this.$13,void 0,this.$1);c=[d,e];this.$14.set(a,c)}return c};c.check=function(a,b){this.$16(a);this.$17(a,b);return this.$7===!0?{status:\"missing\",mostRecentlyInvalidatedAt:this.$2}:{status:\"available\",mostRecentlyInvalidatedAt:this.$2}};c.$18=function(a){Object.prototype.hasOwnProperty.call(this.$9,a)||g(0,2044,a);return this.$9[a]};c.$19=function(){this.$7=!0};c.$20=function(a,b){if(a.name===\"id\"&&a.alias==null&&i(b))return void 0;var c=a.args!=void 0?H(a.args,this.$9):{};for(var d=this.$1,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(g.kind===\"scalar\"){g=g.handle(a,this.$6.get(b),c,this.$6);if(g!==void 0)return g}}this.$19()};c.$21=function(a,b){var c=a.args!=void 0?H(a.args,this.$9):{};for(var d=this.$1,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(g.kind===\"linked\"){g=g.handle(a,this.$6.get(b),c,this.$6);if(g!==void 0&&(g===null||this.$3.getStatus(g)===k))return g}}this.$19()};c.$22=function(a,b){var c=this,d=a.args!=void 0?H(a.args,this.$9):{};for(var e=this.$1,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;if(h.kind===\"pluralLinked\"){h=h.handle(a,this.$6.get(b),d,this.$6);if(h!=null){var i=h.every(function(a){return a!=null&&c.$3.getStatus(a)===k});if(i)return h}else if(h===null)return null}}this.$19()};c.$17=function(a,c){var d=this.$3.getStatus(c);d===l&&this.$19();if(d===k){d=this.$8.get(c);d=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getInvalidationEpoch(d);d!=null&&(this.$2=this.$2!=null?Math.max(this.$2,d):d);this.$23(a.selections,c)}};c.$23=function(a,c){var d=this;a.forEach(function(e){switch(e.kind){case B:d.$24(e,c);break;case w:e.plural?d.$25(e,c):d.$26(e,c);break;case o:d.$27(e.linkedField,c);break;case p:var f=Boolean(d.$18(e.condition));f===e.passingValue&&d.$23(e.selections,c);break;case v:f=e.abstractKey;if(f==null){var h=d.$3.getType(c);h===e.type&&d.$23(e.selections,c)}else{h=d.$3.getType(c);h!=null||g(0,22686,c);h=n(h);h=d.$3.getValue(h,f);h===!0?d.$23(e.selections,c):h==null&&d.$19()}break;case x:f=b(\"relay-runtime\/store\/cloneRelayHandleSourceField\")(e,a,d.$9);f.plural?d.$25(f,c):d.$26(f,c);break;case C:h=b(\"relay-runtime\/store\/cloneRelayScalarHandleSourceField\")(e,a,d.$9);d.$24(h,c);break;case y:d.$28(e,c);break;case t:case D:d.$23(e.selections,c);break;case u:f=d.$9;d.$9=j(d.$9,e.fragment.argumentDefinitions,e.args);d.$23(e.fragment.selections,c);d.$9=f;break;case r:h=d.$7;d.$23(e.selections,c);d.$7=h;break;case E:f=e.abstractKey;h=d.$3.getType(c);h!=null||g(0,22686,c);h=n(h);h=d.$3.getValue(h,f);h==null&&d.$19();break;case q:if(d.$10===!1)break;d.$23(e.fragment.selections,c);break;case z:d.$29(e,c);break;case A:d.$29(e,c);break;case s:d.$29(e.backingField,c);break;default:e,g(0,2045,e.kind)}})};c.$29=function(a,b){a.fragment&&this.$23([a.fragment],b)};c.$28=function(a,c){var d=this.$4;d!==null||g(0,13642);var e=F(a.documentName);e=this.$3.getValue(c,e);if(e==null){e===void 0&&this.$19();return}d=d.get(e);if(d!=null){e=b(\"relay-runtime\/util\/getOperation\")(d);d=this.$9;this.$9=j(this.$9,e.argumentDefinitions,a.args);this.$17(e,c);this.$9=d}else this.$19()};c.$24=function(a,b){var c=G(a,this.$9),d=this.$3.getValue(b,c);d===void 0&&(d=this.$20(a,b),d!==void 0&&this.$3.setValue(b,c,d))};c.$26=function(a,b){var c=G(a,this.$9),d=this.$3.getLinkedRecordID(b,c);d===void 0&&(d=this.$21(a,b),d!=null?this.$3.setLinkedRecordID(b,c,d):d===null&&this.$3.setValue(b,c,null));d!=null&&this.$17(a,d)};c.$25=function(a,b){var c=this,d=G(a,this.$9),e=this.$3.getLinkedRecordIDs(b,d);e===void 0&&(e=this.$22(a,b),e!=null?this.$3.setLinkedRecordIDs(b,d,e):e===null&&this.$3.setValue(b,d,null));e&&e.forEach(function(b){b!=null&&c.$17(a,b)})};c.$27=function(a,c){var d=G(a,this.$9);c=this.$8.get(c);d=c!=null?(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getActorLinkedRecordID(c,d):c;if(d==null)d===void 0&&this.$19();else{c=d[0];d=d[1];var e=this.$8,f=this.$3,g=this.$6,i=this.$15(c),j=i[0];i=i[1];this.$8=this.$11(c);this.$3=j;this.$6=i;this.$16(a);this.$17(a,d);this.$8=e;this.$3=f;this.$6=g}};c.$16=function(a){a=a.clientAbstractTypes;if(a!=null){var b=Object.keys(a);for(var c=0;c<b.length;c++){var d=b[c];for(var e=a[d],f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h=n(h);this.$8.get(h)==null&&this.$3.create(h,m);this.$3.getValue(h,d)==null&&this.$3.setValue(h,d,!0)}}}};return a}();e.exports={check:a}}),null);\n__d(\"relay-runtime\/store\/RelayOptimisticRecordSource\",[\"invariant\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayRecordSource\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).fromObject(Object.freeze({__UNPUBLISH_RECORD_SENTINEL:!0})),j=function(){function a(a){this.$1=a,this.$2=b(\"relay-runtime\/store\/RelayRecordSource\").create()}var c=a.prototype;c.has=function(a){if(this.$2.has(a)){var b=this.$2.get(a);return b!==i}else return this.$1.has(a)};c.get=function(a){if(this.$2.has(a)){var b=this.$2.get(a);if(b===i)return void 0;else return b}else return this.$1.get(a)};c.getStatus=function(a){a=this.get(a);if(a===void 0)return\"UNKNOWN\";else if(a===null)return\"NONEXISTENT\";else return\"EXISTENT\"};c.clear=function(){this.$1=b(\"relay-runtime\/store\/RelayRecordSource\").create(),this.$2.clear()};c[\"delete\"]=function(a){this.$2[\"delete\"](a)};c.remove=function(a){this.$2.set(a,i)};c.set=function(a,b){this.$2.set(a,b)};c.getRecordIDs=function(){return Object.keys(this.toJSON())};c.size=function(){return Object.keys(this.toJSON()).length};c.toJSON=function(){var a=this,c=babelHelpers[\"extends\"]({},this.$1.toJSON());this.$2.getRecordIDs().forEach(function(d){var e=a.get(d);e===void 0?delete c[d]:c[d]=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).toJSON(e)});return c};c.getOptimisticRecordIDs=function(){return new Set(this.$2.getRecordIDs())};return a}();function a(a){return new j(a)}function c(a){a instanceof j||g(0,60670);return a.getOptimisticRecordIDs()}e.exports={create:a,getOptimisticRecordIDs:c}}),null);\n__d(\"relay-runtime\/store\/experimental-live-resolvers\/getOutputTypeRecordIDs\",[\"invariant\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/store\/RelayStoreUtils\").RELAY_RESOLVER_OUTPUT_TYPE_RECORD_IDS;function a(a){a=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getValue(a,i);if(a==null)return null;a instanceof Set||g(0,65243,i,typeof a);return a}e.exports=a}),null);\n__d(\"relay-runtime\/store\/RelayReferenceMarker\",[\"invariant\",\"relay-runtime\/store\/RelayConcreteVariables\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/store\/TypeID\",\"relay-runtime\/store\/cloneRelayHandleSourceField\",\"relay-runtime\/store\/experimental-live-resolvers\/getOutputTypeRecordIDs\",\"relay-runtime\/util\/RelayConcreteNode\",\"relay-runtime\/util\/getOperation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/store\/RelayConcreteVariables\").getLocalVariables,j=b(\"relay-runtime\/store\/TypeID\").generateTypeID,k=(c=b(\"relay-runtime\/util\/RelayConcreteNode\")).ACTOR_CHANGE,l=c.CONDITION,m=c.CLIENT_COMPONENT,n=c.CLIENT_EXTENSION,o=c.DEFER,p=c.FRAGMENT_SPREAD,q=c.INLINE_FRAGMENT,r=c.LINKED_FIELD,s=c.MODULE_IMPORT,t=c.LINKED_HANDLE,u=c.SCALAR_FIELD,v=c.SCALAR_HANDLE,w=c.STREAM,x=c.TYPE_DISCRIMINATOR,y=c.RELAY_RESOLVER,z=c.RELAY_LIVE_RESOLVER,A=c.CLIENT_EDGE_TO_CLIENT_OBJECT,B=b(\"relay-runtime\/store\/RelayStoreUtils\").getStorageKey,C=b(\"relay-runtime\/store\/RelayStoreUtils\").getModuleOperationKey;function a(a,b,c,d,e){var f=b.dataID,g=b.node;b=b.variables;a=new D(a,b,c,d,e);a.mark(g,f)}var D=function(){function a(a,b,c,d,e){this.$1=(d=d)!=null?d:null;this.$2=null;this.$3=a;this.$4=c;this.$5=b;this.$6=e}var c=a.prototype;c.mark=function(a,b){(a.kind===\"Operation\"||a.kind===\"SplitOperation\")&&(this.$2=a.name),this.$7(a,b)};c.$7=function(a,b){this.$4.add(b);b=this.$3.get(b);if(b==null)return;this.$8(a.selections,b)};c.$9=function(a){Object.prototype.hasOwnProperty.call(this.$5,a)||g(0,5170,a);return this.$5[a]};c.$8=function(a,c){var d=this;a.forEach(function(e){switch(e.kind){case k:d.$10(e.linkedField,c);break;case r:e.plural?d.$11(e,c):d.$10(e,c);break;case l:var f=Boolean(d.$9(e.condition));f===e.passingValue&&d.$8(e.selections,c);break;case q:if(e.abstractKey==null){f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c);(f!=null&&f===e.type||f===b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_TYPE)&&d.$8(e.selections,c)}else{f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c);f=j(f);d.$4.add(f);d.$8(e.selections,c)}break;case p:f=d.$5;d.$5=i(d.$5,e.fragment.argumentDefinitions,e.args);d.$8(e.fragment.selections,c);d.$5=f;break;case t:f=b(\"relay-runtime\/store\/cloneRelayHandleSourceField\")(e,a,d.$5);f.plural?d.$11(f,c):d.$10(f,c);break;case o:case w:d.$8(e.selections,c);break;case u:case v:break;case x:f=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getType(c);f=j(f);d.$4.add(f);break;case s:d.$12(e,c);break;case n:d.$8(e.selections,c);break;case m:if(d.$6===!1)break;d.$8(e.fragment.selections,c);break;case y:d.$13(e,c);break;case z:d.$13(e,c);break;case A:d.$14(e,c);break;default:e,g(0,5172,e)}})};c.$14=function(a,c){c=this.$13(a.backingField,c);if(c==null)return;c=this.$3.get(c);if(c==null)return;if(a.backingField.isOutputType){var d=b(\"relay-runtime\/store\/experimental-live-resolvers\/getOutputTypeRecordIDs\")(c);if(d!=null)for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$4.add(g)}}else{g=a.linkedField;f=g.concreteType;if(f==null)return;if(g.plural){e=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getResolverLinkedRecordIDs(c,f);if(e!=null)for(d=e,a=Array.isArray(d),e=0,d=a?d:d[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var i;if(a){if(e>=d.length)break;i=d[e++]}else{e=d.next();if(e.done)break;i=e.value}i=i;i!=null&&this.$7(g,i)}}else{i=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getResolverLinkedRecordID(c,f);i!=null&&this.$7(g,i)}}};c.$13=function(a,c){var d=B(a,this.$5);d=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordID(c,d);d!=null&&this.$4.add(d);a=a.fragment;a!=null&&this.$8([a],c);return d};c.$12=function(a,c){var d,e=this.$1;e!==null||g(0,23904,a.fragmentName,(d=this.$2)!=null?d:\"(unknown)\");d=C(a.documentName);d=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getValue(c,d);if(d==null)return;e=e.get(d);if(e!=null){d=b(\"relay-runtime\/util\/getOperation\")(e);e=this.$5;this.$5=i(this.$5,d.argumentDefinitions,a.args);this.$8(d.selections,c);this.$5=e}};c.$10=function(a,c){var d=B(a,this.$5);c=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordID(c,d);if(c==null)return;this.$7(a,c)};c.$11=function(a,c){var d=this,e=B(a,this.$5);c=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getLinkedRecordIDs(c,e);if(c==null)return;c.forEach(function(b){b!=null&&d.$7(a,b)})};return a}();e.exports={mark:a}}),null);\n__d(\"relay-runtime\/store\/hasOverlappingIDs\",[],(function(a,b,c,d,e,f){\"use strict\";var g=typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\";function a(a,b){a=a[g]();var c=a.next();while(!c.done){var d=c.value;if(b.has(d))return!0;c=a.next()}return!1}e.exports=a}),null);\n__d(\"relay-runtime\/store\/hasSignificantOverlappingIDs\",[\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/store\/ViewerPattern\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_ID,h=b(\"relay-runtime\/store\/ViewerPattern\").VIEWER_ID,i=typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\";function a(a,b){a=a[i]();var c=a.next();while(!c.done){var d=c.value;if(b.has(d)&&d!==g&&d!==h)return!0;c=a.next()}return!1}e.exports=a}),null);\n__d(\"relay-runtime\/store\/RelayStoreSubscriptions\",[\"relay-runtime\/store\/RelayReader\",\"relay-runtime\/store\/hasOverlappingIDs\",\"relay-runtime\/store\/hasSignificantOverlappingIDs\",\"relay-runtime\/util\/RelayFeatureFlags\",\"relay-runtime\/util\/deepFreeze\",\"relay-runtime\/util\/recycleNodesInto\"],(function(a,b,c,d,e,f){\"use strict\";var g,h;a=function(){function a(a,b){this.$1=new Set(),this.__log=a,this.$2=b}var c=a.prototype;c.subscribe=function(a,b){var c=this,d={backup:null,callback:b,snapshot:a,stale:!1};b=function(){c.$1[\"delete\"](d)};this.$1.add(d);return{dispose:b}};c.snapshotSubscriptions=function(a){var c=this;this.$1.forEach(function(d){if(!d.stale){d.backup=d.snapshot;return}var e=d.snapshot,f=b(\"relay-runtime\/store\/RelayReader\").read(a,e.selector,c.$2);e=b(\"relay-runtime\/util\/recycleNodesInto\")(e.data,f.data);f.data=e;d.backup=f})};c.restoreSubscriptions=function(){this.$1.forEach(function(a){var b=a.backup;a.backup=null;b?(b.data!==a.snapshot.data&&(a.stale=!0),a.snapshot={data:a.snapshot.data,isMissingData:b.isMissingData,missingClientEdges:b.missingClientEdges,missingLiveResolverFields:b.missingLiveResolverFields,seenRecords:b.seenRecords,selector:b.selector,missingRequiredFields:b.missingRequiredFields,relayResolverErrors:b.relayResolverErrors,errorResponseFields:b.errorResponseFields}):a.stale=!0})};c.updateSubscriptions=function(a,b,c,d){var e=this,f=b.size!==0;this.$1.forEach(function(g){g=e.$3(a,g,b,f,d);g!=null&&c.push(g)})};c.$3=function(a,c,d,e,f){var h=c.backup,i=c.callback,j=c.snapshot,k=c.stale;e=e&&(g||(g=b(\"relay-runtime\/store\/hasOverlappingIDs\")))(j.seenRecords,d);if(!k&&!e)return;e=e||!h?b(\"relay-runtime\/store\/RelayReader\").read(a,j.selector,this.$2):h;a=b(\"relay-runtime\/util\/recycleNodesInto\")(j.data,e.data);e={data:a,isMissingData:e.isMissingData,missingClientEdges:e.missingClientEdges,missingLiveResolverFields:e.missingLiveResolverFields,seenRecords:e.seenRecords,selector:e.selector,missingRequiredFields:e.missingRequiredFields,relayResolverErrors:e.relayResolverErrors,errorResponseFields:e.errorResponseFields};c.snapshot=e;c.stale=!1;if(e.data!==j.data){this.__log&&b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_NOTIFY_SUBSCRIPTION&&this.__log({name:\"store.notify.subscription\",sourceOperation:f,snapshot:j,nextSnapshot:e});i(e);return j.selector.owner}if(b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_LOOSE_SUBSCRIPTION_ATTRIBUTION&&(k||b(\"relay-runtime\/store\/hasSignificantOverlappingIDs\")(j.seenRecords,d)))return j.selector.owner};return a}();e.exports=a}),null);\n__d(\"relay-runtime\/util\/resolveImmediate\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g,h=(g||b(\"Promise\")).resolve();function a(a){h.then(a)[\"catch\"](i)}function i(a){setTimeout(function(){throw a},0)}e.exports=a}),null);\n__d(\"relay-runtime\/store\/RelayModernStore\",[\"invariant\",\"regeneratorRuntime\",\"relay-runtime\/multi-actor-environment\/ActorIdentifier\",\"relay-runtime\/store\/DataChecker\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayOptimisticRecordSource\",\"relay-runtime\/store\/RelayReader\",\"relay-runtime\/store\/RelayReferenceMarker\",\"relay-runtime\/store\/RelayStoreSubscriptions\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/store\/ResolverCache\",\"relay-runtime\/store\/defaultGetDataID\",\"relay-runtime\/util\/RelayFeatureFlags\",\"relay-runtime\/util\/deepFreeze\",\"relay-runtime\/util\/resolveImmediate\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=b(\"relay-runtime\/multi-actor-environment\/ActorIdentifier\").INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,k=b(\"relay-runtime\/multi-actor-environment\/ActorIdentifier\").assertInternalActorIdentifier,l=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_ID,m=b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_TYPE,n=b(\"relay-runtime\/store\/ResolverCache\").RecordResolverCache,o=10;a=function(){function a(a,c){var d=this,e;this.$24=function(){d.$4&&(d.$4.next().done?d.$4=null:d.$5(d.$24))};this.$1=0;this.$2=0;this.$3=(e=c==null?void 0:c.gcReleaseBufferSize)!=null?e:o;this.$4=null;this.$5=(e=c==null?void 0:c.gcScheduler)!=null?e:b(\"relay-runtime\/util\/resolveImmediate\");this.$6=(e=c==null?void 0:c.getDataID)!=null?e:b(\"relay-runtime\/store\/defaultGetDataID\");this.$7=null;this.$8=new Set();this.$9=new Set();this.__log=(e=c==null?void 0:c.log)!=null?e:null;this.$10=c==null?void 0:c.queryCacheExpirationTime;this.$11=(e=c==null?void 0:c.operationLoader)!=null?e:null;this.$12=null;this.$13=a;this.$15=[];this.$16=new Map();this.$17=!1;this.$14=new n(function(){return d.$21()});this.$18=new(b(\"relay-runtime\/store\/RelayStoreSubscriptions\"))(c==null?void 0:c.log,this.$14);this.$19=new Set();this.$20=c==null?void 0:c.shouldProcessClientComponents;p(this.$13)}var c=a.prototype;c.getSource=function(){var a;return(a=this.$12)!=null?a:this.$13};c.$21=function(){var a;return(a=this.$12)!=null?a:this.$13};c.check=function(a,c){var d,e,f=a.root,g=this.$21(),h=this.$7;a=this.$16.get(a.request.identifier);var i=a!=null?a.epoch:null;if(h!=null&&(i==null||i<=h))return{status:\"stale\"};h=(h=c==null?void 0:c.handlers)!=null?h:[];d=(d=c==null?void 0:c.getSourceForActor)!=null?d:function(a){k(a);return g};e=(e=c==null?void 0:c.getTargetForActor)!=null?e:function(a){k(a);return g};e=b(\"relay-runtime\/store\/DataChecker\").check(d,e,(d=c==null?void 0:c.defaultActorIdentifier)!=null?d:j,f,h,this.$11,this.$6,this.$20);return r(e,i,a==null?void 0:a.fetchTime,this.$10)};c.retain=function(a){var b=this,c=a.request.identifier,d=!1,e=function(){if(d)return;d=!0;var a=b.$16.get(c);if(a==null)return;a.refCount--;if(a.refCount===0){var e=b.$10;a=a.fetchTime!=null&&e!=null&&a.fetchTime<=Date.now()-e;if(a)b.$16[\"delete\"](c),b.scheduleGC();else{b.$15.push(c);if(b.$15.length>b.$3){e=b.$15.shift();b.$16[\"delete\"](e);b.scheduleGC()}}}},f=this.$16.get(c);f!=null?(f.refCount===0&&(this.$15=this.$15.filter(function(a){return a!==c})),f.refCount+=1):this.$16.set(c,{operation:a,refCount:1,epoch:null,fetchTime:null});return{dispose:e}};c.lookup=function(a){var c=this.getSource();c=b(\"relay-runtime\/store\/RelayReader\").read(c,a,this.$14);return c};c.notify=function(a,c){var d=this,e=this.__log;e!=null&&e({name:\"store.notify.start\",sourceOperation:a});this.$1++;c===!0&&(this.$7=this.$1);b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_RELAY_RESOLVERS&&this.$14.invalidateDataIDs(this.$19);var f=this.getSource(),g=[];this.$18.updateSubscriptions(f,this.$19,g,a);this.$8.forEach(function(a){d.$22(a,c===!0)});e!=null&&e({name:\"store.notify.complete\",sourceOperation:a,updatedRecordIDs:this.$19,invalidatedRecordIDs:this.$9});this.$19.clear();this.$9.clear();if(a!=null){f=a.request.identifier;e=this.$16.get(f);if(e!=null)e.epoch=this.$1,e.fetchTime=Date.now();else if(a.request.node.params.operationKind===\"query\"&&this.$3>0&&this.$15.length<this.$3){e={operation:a,refCount:0,epoch:this.$1,fetchTime:Date.now()};this.$15.push(f);this.$16.set(f,e)}}return g};c.publish=function(a,b){var c=this.$21();q(c,a,this.$1+1,b,this.$19,this.$9);b=this.__log;b!=null&&b({name:\"store.publish\",source:a,optimistic:c===this.$12})};c.subscribe=function(a,b){return this.$18.subscribe(a,b)};c.holdGC=function(){var a=this;this.$4&&(this.$4=null,this.$17=!0);this.$2++;var b=function(){a.$2>0&&(a.$2--,a.$2===0&&a.$17&&(a.scheduleGC(),a.$17=!1))};return{dispose:b}};c.toJSON=function(){return\"RelayModernStore()\"};c.getEpoch=function(){return this.$1};c.__getUpdatedRecordIDs=function(){return this.$19};c.lookupInvalidationState=function(a){var c=this,d=new Map();a.forEach(function(a){var e=c.getSource().get(a);d.set(a,(a=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).getInvalidationEpoch(e))!=null?a:null)});d.set(\"global\",this.$7);return{dataIDs:a,invalidations:d}};c.checkInvalidationState=function(a){var b=this.lookupInvalidationState(a.dataIDs);b=b.invalidations;var c=a.invalidations;if(b.get(\"global\")!==c.get(\"global\"))return!0;for(var a=a.dataIDs,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(b.get(f)!==c.get(f))return!0}return!1};c.subscribeToInvalidationState=function(a,b){var c=this,d={callback:b,invalidationState:a};b=function(){c.$8[\"delete\"](d)};this.$8.add(d);return{dispose:b}};c.$22=function(a,b){var c=this,d=a.callback;a=a.invalidationState;a=a.dataIDs;b=b||a.some(function(a){return c.$9.has(a)});if(!b)return;d()};c.snapshot=function(){this.$12==null||g(0,19004);var a=this.__log;a!=null&&a({name:\"store.snapshot\"});this.$18.snapshotSubscriptions(this.getSource());this.$4&&(this.$4=null,this.$17=!0);this.$12=b(\"relay-runtime\/store\/RelayOptimisticRecordSource\").create(this.getSource())};c.restore=function(){this.$12!=null||g(0,19005);var a=this.__log;a!=null&&a({name:\"store.restore\"});this.$12=null;this.$17&&this.scheduleGC();this.$18.restoreSubscriptions()};c.scheduleGC=function(){if(this.$2>0){this.$17=!0;return}if(this.$4)return;this.$4=this.$23();this.$5(this.$24)};c.__gc=function(){if(this.$12!=null)return;var a=this.$23();while(!a.next().done);};c.$23=b(\"regeneratorRuntime\").mark(function a(){var c,d,e,f,g,h,i,j,k,l,m,n,o;return b(\"regeneratorRuntime\").wrap(function(a){while(1)switch(a.prev=a.next){case 0:c=this.$1,d=new Set(),(e=this.$16.values(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]());case 4:if(!f){a.next=10;break}if(!(g>=e.length)){a.next=7;break}return a.abrupt(\"break\",24);case 7:h=e[g++];a.next=14;break;case 10:g=e.next();if(!g.done){a.next=13;break}return a.abrupt(\"break\",24);case 13:h=g.value;case 14:i=h;j=i.operation;k=j.root;b(\"relay-runtime\/store\/RelayReferenceMarker\").mark(this.$13,k,d,this.$11,this.$20);a.next=20;return;case 20:if(!(c!==this.$1)){a.next=22;break}return a.abrupt(\"continue\",0);case 22:a.next=4;break;case 24:l=this.__log;l!=null&&l({name:\"store.gc\",references:d});if(d.size===0)this.$13.clear();else{m=this.$13.getRecordIDs();for(n=0;n<m.length;n++)o=m[n],d.has(o)||this.$13.remove(o)}return a.abrupt(\"return\");case 30:case\"end\":return a.stop()}},a,this)});return a}();function p(a){if(!a.has(l)){var c=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).create(l,m);a.set(l,c)}}function q(a,c,d,e,f,g){e&&e.forEach(function(e){var i=a.get(e),f=c.get(e);if(f===null)return;i!=null?i=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).clone(i):i=f!=null?(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).clone(f):null;if(!i)return;(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).setValue(i,b(\"relay-runtime\/store\/RelayStoreUtils\").INVALIDATED_AT_KEY,d);g.add(e);a.set(e,i)});e=c.getRecordIDs();for(var i=0;i<e.length;i++){var j=e[i],k=c.get(j),l=a.get(j);if(k&&l){var m=(h||(h=b(\"relay-runtime\/store\/RelayModernRecord\"))).update(l,k);m!==l&&(f.add(j),a.set(j,m))}else k===null?(a[\"delete\"](j),l!==null&&f.add(j)):k&&(a.set(j,k),f.add(j))}}function r(a,b,c,d){var e=a.mostRecentlyInvalidatedAt;a=a.status;if(typeof e===\"number\"&&(b==null||e>b))return{status:\"stale\"};if(a===\"missing\")return{status:\"missing\"};if(c!=null&&d!=null){e=c<=Date.now()-d;if(e)return{status:\"stale\"}}return{status:\"available\",fetchTime:(b=c)!=null?b:null}}e.exports=a}),null);\n__d(\"relay-runtime\/util\/getPendingOperationsForFragment\",[\"relay-runtime\/query\/fetchQueryInternal\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/query\/fetchQueryInternal\").getPromiseForActiveRequest;function a(a,b,c){var d=[],e=g(a,c);if(e!=null)d=[c];else{var f,h=a.getOperationTracker().getPendingOperationsAffectingOwner(c);d=(f=h==null?void 0:h.pendingOperations)!=null?f:[];e=(f=h==null?void 0:h.promise)!=null?f:null}if(!e)return null;h=(f=(h=d)==null?void 0:h.map(function(a){return a.node.params.name}).join(\",\"))!=null?f:null;(h==null||h.length===0)&&(h=\"Unknown pending operation\");f=b.name;h=h===f?\"Relay(\"+h+\")\":\"Relay(\"+h+\":\"+f+\")\";e.displayName=h;a.__log({name:\"pendingoperation.found\",fragment:b,fragmentOwner:c,pendingOperations:d});return{promise:e,pendingOperations:d}}e.exports=a}),null);\n__d(\"relay-runtime\/util\/isScalarAndEqual\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){return a===b&&(a===null||typeof a!==\"object\")}e.exports=a}),null);\n__d(\"relay-runtime\/store\/RelayModernFragmentSpecResolver\",[\"invariant\",\"areEqual\",\"relay-runtime\/store\/RelayModernOperationDescriptor\",\"relay-runtime\/store\/RelayModernSelector\",\"relay-runtime\/util\/RelayFeatureFlags\",\"relay-runtime\/util\/getPendingOperationsForFragment\",\"relay-runtime\/util\/handlePotentialSnapshotErrors\",\"relay-runtime\/util\/isScalarAndEqual\",\"relay-runtime\/util\/recycleNodesInto\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=b(\"relay-runtime\/store\/RelayModernOperationDescriptor\").createRequestDescriptor,j=b(\"relay-runtime\/store\/RelayModernSelector\").areEqualSelectors,k=b(\"relay-runtime\/store\/RelayModernSelector\").createReaderSelector,l=b(\"relay-runtime\/store\/RelayModernSelector\").getSelectorsFromObject;a=function(){function a(a,b,c,d,e){var f=this;this.$9=function(){f.$8=!0,typeof f.$1===\"function\"&&f.$1()};this.$1=d;this.$2=a;this.$4={};this.$5=b;this.$6={};this.$7={};this.$8=!1;this.$3=e;this.setProps(c)}var c=a.prototype;c.dispose=function(){for(var a in this.$7)Object.prototype.hasOwnProperty.call(this.$7,a)&&o(this.$7[a])};c.resolve=function(){if(this.$8){var a=this.$4,c;for(var d in this.$7)if(Object.prototype.hasOwnProperty.call(this.$7,d)){var e=this.$7[d],f=a[d];if(e){e=e.resolve();(c||e!==f)&&(c=c||babelHelpers[\"extends\"]({},a),c[d]=e)}else{e=this.$6[d];e=e!==void 0?e:null;(c||!b(\"relay-runtime\/util\/isScalarAndEqual\")(e,f))&&(c=c||babelHelpers[\"extends\"]({},a),c[d]=e)}}this.$4=c||a;this.$8=!1}return this.$4};c.setCallback=function(a,c){this.$1=c,b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT===!0&&this.setProps(a)};c.setProps=function(a){this.$6={};var b=l(this.$5,a);for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c)){var d=b[c],e=this.$7[c];d==null?(e!=null&&e.dispose(),e=null):d.kind===\"PluralReaderSelector\"?e==null?e=new n(this.$2.environment,this.$3,d,this.$1!=null,this.$9):(e instanceof n||g(0,4761,c),e.setSelector(d)):e==null?e=new m(this.$2.environment,this.$3,d,this.$1!=null,this.$9):(e instanceof m||g(0,4762,c),e.setSelector(d));this.$6[c]=a[c];this.$7[c]=e}this.$8=!0};c.setVariables=function(a,b){for(var c in this.$7)if(Object.prototype.hasOwnProperty.call(this.$7,c)){var d=this.$7[c];d&&d.setVariables(a,b)}this.$8=!0};return a}();var m=function(){function a(a,c,d,e,f){var g=this;this.$11=function(a){g.$2=a.data,g.$4=a.isMissingData,g.$5=a.missingRequiredFields,g.$6=a.errorResponseFields,g.$7=a.relayResolverErrors,g.$1()};var h=a.lookup(d);this.$1=f;this.$2=h.data;this.$4=h.isMissingData;this.$5=h.missingRequiredFields;this.$6=h.errorResponseFields;this.$7=h.relayResolverErrors;this.$3=a;this.$8=c;this.$9=d;b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT===!0?e&&(this.$10=a.subscribe(h,this.$11)):this.$10=a.subscribe(h,this.$11)}var c=a.prototype;c.dispose=function(){this.$10&&(this.$10.dispose(),this.$10=null)};c.resolve=function(){if(this.$4===!0){var a=b(\"relay-runtime\/util\/getPendingOperationsForFragment\")(this.$3,this.$9.node,this.$9.owner),c=a==null?void 0:a.promise;if(c!=null)if(this.$8)b(\"warning\")(!1,\"Relay: Relay Container for fragment `%s` has missing data and would suspend. When using features such as @defer or @module, use `useFragment` instead of a Relay Container.\",this.$9.node.name);else{a=(a=a==null?void 0:a.pendingOperations)!=null?a:[];b(\"warning\")(!1,\"Relay: Relay Container for fragment `%s` suspended. When using features such as @defer or @module, use `useFragment` instead of a Relay Container.\",this.$9.node.name);this.$3.__log({name:\"suspense.fragment\",data:this.$2,fragment:this.$9.node,isRelayHooks:!1,isMissingData:this.$4,isPromiseCached:!1,pendingOperations:a});throw c}}b(\"relay-runtime\/util\/handlePotentialSnapshotErrors\")(this.$3,this.$5,this.$7,this.$6);return this.$2};c.setSelector=function(a){if(this.$10!=null&&j(a,this.$9))return;this.dispose();var c=this.$3.lookup(a);this.$2=b(\"relay-runtime\/util\/recycleNodesInto\")(this.$2,c.data);this.$4=c.isMissingData;this.$5=c.missingRequiredFields;this.$6=c.errorResponseFields;this.$7=c.relayResolverErrors;this.$9=a;this.$10=this.$3.subscribe(c,this.$11)};c.setVariables=function(a,c){if((h||(h=b(\"areEqual\")))(a,this.$9.variables))return;c=i(c,a);a=k(this.$9.node,this.$9.dataID,a,c);this.setSelector(a)};return a}(),n=function(){function a(a,b,c,d,e){var f=this;this.$8=function(a){f.$6=!0,f.$1()};this.$1=e;this.$2=[];this.$3=a;this.$4=[];this.$6=!0;this.$5=b;this.$7=d;this.setSelector(c)}var b=a.prototype;b.dispose=function(){this.$4.forEach(o)};b.resolve=function(){if(this.$6){var a=this.$2,b;for(var c=0;c<this.$4.length;c++){var d=a[c],e=this.$4[c].resolve();(b||e!==d)&&(b=b||a.slice(0,c),b.push(e))}!b&&this.$4.length!==a.length&&(b=a.slice(0,this.$4.length));this.$2=b||a;this.$6=!1}return this.$2};b.setSelector=function(a){a=a.selectors;while(this.$4.length>a.length){var b=this.$4.pop();b.dispose()}for(b=0;b<a.length;b++)b<this.$4.length?this.$4[b].setSelector(a[b]):this.$4[b]=new m(this.$3,this.$5,a[b],this.$7,this.$8);this.$6=!0};b.setVariables=function(a,b){this.$4.forEach(function(c){return c.setVariables(a,b)}),this.$6=!0};return a}();function o(a){a&&a.dispose()}e.exports=a}),null);\n__d(\"relay-runtime\/store\/createFragmentSpecResolver\",[\"relay-runtime\/store\/RelayModernFragmentSpecResolver\",\"warning\"],(function(a,b,c,d,e,f){\"use strict\";function a(a,c,d,e,f,g){return new(b(\"relay-runtime\/store\/RelayModernFragmentSpecResolver\"))(a,d,e,g,f)}e.exports=a}),null);\n__d(\"relay-runtime\/store\/createRelayContext\",[\"invariant\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a){h||(h=a.createContext(null),i=a);a===i||g(0,52255,a.version);return h}e.exports=a}),null);\n__d(\"relay-runtime\/store\/readInlineData\",[\"invariant\",\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"relay-runtime\/query\/GraphQLTag\").getInlineDataFragment,i=b(\"relay-runtime\/store\/RelayStoreUtils\").FRAGMENTS_KEY;function a(a,b){a=h(a);if(b==null)return b;typeof b===\"object\"||g(0,17729,typeof b);b=(b=b[i])==null?void 0:b[a.name];b!=null||g(0,17728,a.name);return b}e.exports=a}),null);\n__d(\"relay-runtime\/subscription\/requestSubscription\",[\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\",\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/store\/RelayModernOperationDescriptor\",\"relay-runtime\/store\/RelayModernSelector\",\"warning\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/query\/GraphQLTag\").getRequest,h=b(\"relay-runtime\/store\/RelayModernOperationDescriptor\").createOperationDescriptor,i=b(\"relay-runtime\/store\/RelayModernSelector\").createReaderSelector;function a(a,c){var d=g(c.subscription);if(d.params.operationKind!==\"subscription\")throw new Error(\"requestSubscription: Must use Subscription operation\");var e=c.configs,f=c.onCompleted,j=c.onError,k=c.onNext,l=c.variables,m=c.cacheConfig,n=h(d,l,m);b(\"warning\")(!(c.updater&&e),\"requestSubscription: Expected only one of `updater` and `configs` to be provided\");l=e?b(\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\").convert(e,d,null,c.updater):c;m=l.updater;e=a.executeSubscription({operation:n,updater:m}).subscribe({next:function(b){if(k!=null){var c=n.fragment;if(Array.isArray(b)){var d;d=(d=b[0])==null?void 0:(d=d.extensions)==null?void 0:d.__relay_subscription_root_id}else{d=(b=b.extensions)==null?void 0:b.__relay_subscription_root_id}typeof d===\"string\"&&(c=i(c.node,d,c.variables,c.owner));b=a.lookup(c).data;k(b)}},error:j,complete:f});return{dispose:e.unsubscribe}}e.exports=a}),null);\n__d(\"relay-runtime\/util\/RelayProfiler\",[],(function(a,b,c,d,e,f){\"use strict\";var g={},h={stop:function(){}};a={profile:function(a,b){var c=g[a];if(c&&c.length>0){var d=[];for(var e=c.length-1;e>=0;e--){var f=c[e](a,b);d.unshift(f)}return{stop:function(a){d.forEach(function(b){return b(a)})}}}return h},attachProfileHandler:function(a,b){Object.prototype.hasOwnProperty.call(g,a)||(g[a]=[]),g[a].push(b)},detachProfileHandler:function(a,b){Object.prototype.hasOwnProperty.call(g,a)&&i(g[a],b)}};function i(a,b){b=a.indexOf(b);b!==-1&&a.splice(b,1)}e.exports=a}),null);\n__d(\"relay-runtime\/util\/createPayloadFor3DField\",[\"relay-runtime\/store\/RelayStoreUtils\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"relay-runtime\/store\/RelayStoreUtils\").getModuleComponentKey,h=b(\"relay-runtime\/store\/RelayStoreUtils\").getModuleOperationKey;function a(a,b,c,d){d=babelHelpers[\"extends\"]({},d);d[g(a)]=c;d[h(a)]=b;return d}e.exports=a}),null);\n__d(\"relay-runtime\/util\/isEmptyObject\",[],(function(a,b,c,d,e,f){\"use strict\";var g=Object.prototype.hasOwnProperty;function a(a){for(var b in a)if(g.call(a,b))return!1;return!0}e.exports=a}),null);\n__d(\"relay-runtime\/util\/getFragmentIdentifier\",[\"relay-runtime\/store\/RelayModernSelector\",\"relay-runtime\/util\/RelayFeatureFlags\",\"relay-runtime\/util\/StringInterner\",\"relay-runtime\/util\/isEmptyObject\",\"relay-runtime\/util\/stableCopy\"],(function(a,b,c,d,e,f){\"use strict\";var g,h=b(\"relay-runtime\/store\/RelayModernSelector\").getDataIDsFromFragment,i=b(\"relay-runtime\/store\/RelayModernSelector\").getSelector,j=b(\"relay-runtime\/store\/RelayModernSelector\").getVariablesFromFragment,k=b(\"relay-runtime\/util\/StringInterner\").intern;function a(a,c){var d=i(a,c);d=d==null?\"null\":d.kind===\"SingularReaderSelector\"?d.owner.identifier:\"[\"+d.selectors.map(function(a){return a.owner.identifier}).join(\",\")+\"]\";var e=j(a,c);c=h(a,c);if(b(\"relay-runtime\/util\/RelayFeatureFlags\").ENABLE_GETFRAGMENTIDENTIFIER_OPTIMIZATION){var f=typeof c===\"undefined\"?\"missing\":c==null?\"null\":Array.isArray(c)?\"[\"+c.join(\",\")+\"]\":c;f=b(\"relay-runtime\/util\/RelayFeatureFlags\").STRING_INTERN_LEVEL<=1?f:k(f,b(\"relay-runtime\/util\/RelayFeatureFlags\").MAX_DATA_ID_LENGTH);return d+\"\/\"+a.name+\"\/\"+(e==null||b(\"relay-runtime\/util\/isEmptyObject\")(e)?\"{}\":JSON.stringify((g||(g=b(\"relay-runtime\/util\/stableCopy\")))(e)))+\"\/\"+f}else{c=(f=JSON.stringify(c))!=null?f:\"missing\";c=b(\"relay-runtime\/util\/RelayFeatureFlags\").STRING_INTERN_LEVEL<=1?c:k(c,b(\"relay-runtime\/util\/RelayFeatureFlags\").MAX_DATA_ID_LENGTH);return d+\"\/\"+a.name+\"\/\"+JSON.stringify((g||(g=b(\"relay-runtime\/util\/stableCopy\")))(e))+\"\/\"+c}}e.exports=a}),null);\n__d(\"relay-runtime\/util\/getRefetchMetadata\",[\"invariant\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){var c;((c=a.metadata)==null?void 0:c.plural)!==!0||g(0,14163,a.name,b,a.name,b);c=(c=a.metadata)==null?void 0:c.refetch;c!=null||g(0,14164,b,a.name);a=c.operation[\"default\"]?c.operation[\"default\"]:c.operation;var d=c.fragmentPathInResult;typeof a!==\"string\"||g(0,14165,b);b=c.identifierInfo;b!=null&&(b.identifierField==null||typeof b.identifierField===\"string\"||g(0,21796),b.identifierQueryVariableName==null||typeof b.identifierQueryVariableName===\"string\"||g(0,71205));return{fragmentRefPathInResponse:d,identifierInfo:b,refetchableRequest:a,refetchMetadata:c}}e.exports=a}),null);\n__d(\"relay-runtime\/util\/getPaginationMetadata\",[\"invariant\",\"relay-runtime\/util\/getRefetchMetadata\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,c){var d,e=b(\"relay-runtime\/util\/getRefetchMetadata\")(a,c),f=e.refetchableRequest;e=e.refetchMetadata;var h=e.connection;h!=null||g(0,14162,c,a.name);var i=h.path;d=((d=(d=a.metadata)==null?void 0:d.connection)!=null?d:[])[0];d!=null||g(0,14162,c,a.name);c=e.identifierInfo;(c==null?void 0:c.identifierField)==null||typeof c.identifierField===\"string\"||g(0,21796);return{connectionPathInFragmentData:i,identifierField:c==null?void 0:c.identifierField,paginationRequest:f,paginationMetadata:h,stream:d.stream===!0}}e.exports=a}),null);\n__d(\"relay-runtime\/util\/getPaginationVariables\",[\"invariant\",\"warning\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,c,d,e,f,h){var i=h.backward;h=h.forward;if(a===\"backward\"){i!=null&&i.count!=null&&i.cursor!=null||g(0,19801);b(\"warning\")(!Object.prototype.hasOwnProperty.call(f,i.cursor),\"Relay: `UNSTABLE_extraVariables` provided by caller should not contain cursor variable `%s`. This variable is automatically determined by Relay.\",i.cursor);b(\"warning\")(!Object.prototype.hasOwnProperty.call(f,i.count),\"Relay: `UNSTABLE_extraVariables` provided by caller should not contain count variable `%s`. This variable is automatically determined by Relay.\",i.count);a=babelHelpers[\"extends\"]({},e,f,(a={},a[i.cursor]=d,a[i.count]=c,a));h&&h.cursor&&(a[h.cursor]=null);h&&h.count&&(a[h.count]=null);return a}h!=null&&h.count!=null&&h.cursor!=null||g(0,19802);b(\"warning\")(!Object.prototype.hasOwnProperty.call(f,h.cursor),\"Relay: `UNSTABLE_extraVariables` provided by caller should not contain cursor variable `%s`. This variable is automatically determined by Relay.\",h.cursor);b(\"warning\")(!Object.prototype.hasOwnProperty.call(f,h.count),\"Relay: `UNSTABLE_extraVariables` provided by caller should not contain count variable `%s`. This variable is automatically determined by Relay.\",h.count);e=babelHelpers[\"extends\"]({},e,f,(a={},a[h.cursor]=d,a[h.count]=c,a));i&&i.cursor&&(e[i.cursor]=null);i&&i.count&&(e[i.count]=null);return e}e.exports=a}),null);\n__d(\"relay-runtime\/util\/getValueAtPath\",[\"invariant\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){a=a;for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(a==null)return null;typeof e===\"number\"?(Array.isArray(a)||g(0,14107),a=a[e]):(typeof a===\"object\"&&!Array.isArray(a)||g(0,14106),a=a[e])}return a}e.exports=a}),null);\n__d(\"relay-runtime\",[\"Promise\",\"relay-runtime\/handlers\/RelayDefaultHandlerProvider\",\"relay-runtime\/handlers\/connection\/ConnectionHandler\",\"relay-runtime\/handlers\/connection\/ConnectionInterface\",\"relay-runtime\/handlers\/connection\/MutationHandlers\",\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\",\"relay-runtime\/mutations\/applyOptimisticMutation\",\"relay-runtime\/mutations\/commitLocalUpdate\",\"relay-runtime\/mutations\/commitMutation\",\"relay-runtime\/network\/RelayNetwork\",\"relay-runtime\/network\/RelayObservable\",\"relay-runtime\/network\/RelayQueryResponseCache\",\"relay-runtime\/query\/GraphQLTag\",\"relay-runtime\/query\/PreloadableQueryRegistry\",\"relay-runtime\/query\/fetchQuery\",\"relay-runtime\/query\/fetchQueryInternal\",\"relay-runtime\/query\/fetchQuery_DEPRECATED\",\"relay-runtime\/store\/ClientID\",\"relay-runtime\/store\/RelayConcreteVariables\",\"relay-runtime\/store\/RelayModernEnvironment\",\"relay-runtime\/store\/RelayModernOperationDescriptor\",\"relay-runtime\/store\/RelayModernRecord\",\"relay-runtime\/store\/RelayModernSelector\",\"relay-runtime\/store\/RelayModernStore\",\"relay-runtime\/store\/RelayOperationTracker\",\"relay-runtime\/store\/RelayRecordSource\",\"relay-runtime\/store\/RelayStoreUtils\",\"relay-runtime\/store\/ResolverFragments\",\"relay-runtime\/store\/ViewerPattern\",\"relay-runtime\/store\/createFragmentSpecResolver\",\"relay-runtime\/store\/createRelayContext\",\"relay-runtime\/store\/experimental-live-resolvers\/LiveResolverSuspenseSentinel\",\"relay-runtime\/store\/isRelayModernEnvironment\",\"relay-runtime\/store\/normalizeResponse\",\"relay-runtime\/store\/readInlineData\",\"relay-runtime\/subscription\/requestSubscription\",\"relay-runtime\/util\/RelayConcreteNode\",\"relay-runtime\/util\/RelayDefaultHandleKey\",\"relay-runtime\/util\/RelayError\",\"relay-runtime\/util\/RelayFeatureFlags\",\"relay-runtime\/util\/RelayProfiler\",\"relay-runtime\/util\/RelayReplaySubject\",\"relay-runtime\/util\/createPayloadFor3DField\",\"relay-runtime\/util\/deepFreeze\",\"relay-runtime\/util\/getFragmentIdentifier\",\"relay-runtime\/util\/getPaginationMetadata\",\"relay-runtime\/util\/getPaginationVariables\",\"relay-runtime\/util\/getPendingOperationsForFragment\",\"relay-runtime\/util\/getRefetchMetadata\",\"relay-runtime\/util\/getRelayHandleKey\",\"relay-runtime\/util\/getRequestIdentifier\",\"relay-runtime\/util\/getValueAtPath\",\"relay-runtime\/util\/handlePotentialSnapshotErrors\",\"relay-runtime\/util\/isPromise\",\"relay-runtime\/util\/isScalarAndEqual\",\"relay-runtime\/util\/recycleNodesInto\",\"relay-runtime\/util\/stableCopy\",\"relay-runtime\/util\/withProvidedVariables\"],(function(a,b,c,d,e,f){\"use strict\";var g,h,i,j;a=b(\"relay-runtime\/store\/ClientID\").generateClientID;c=b(\"relay-runtime\/store\/ClientID\").generateUniqueClientID;d=b(\"relay-runtime\/store\/ClientID\").isClientID;f=b(\"relay-runtime\/store\/experimental-live-resolvers\/LiveResolverSuspenseSentinel\").isSuspenseSentinel;var k=b(\"relay-runtime\/store\/experimental-live-resolvers\/LiveResolverSuspenseSentinel\").suspenseSentinel;e.exports={Environment:b(\"relay-runtime\/store\/RelayModernEnvironment\"),Network:b(\"relay-runtime\/network\/RelayNetwork\"),Observable:b(\"relay-runtime\/network\/RelayObservable\"),QueryResponseCache:b(\"relay-runtime\/network\/RelayQueryResponseCache\"),RecordSource:b(\"relay-runtime\/store\/RelayRecordSource\"),Record:h||(h=b(\"relay-runtime\/store\/RelayModernRecord\")),ReplaySubject:b(\"relay-runtime\/util\/RelayReplaySubject\"),Store:b(\"relay-runtime\/store\/RelayModernStore\"),areEqualSelectors:b(\"relay-runtime\/store\/RelayModernSelector\").areEqualSelectors,createFragmentSpecResolver:b(\"relay-runtime\/store\/createFragmentSpecResolver\"),createNormalizationSelector:b(\"relay-runtime\/store\/RelayModernSelector\").createNormalizationSelector,createOperationDescriptor:b(\"relay-runtime\/store\/RelayModernOperationDescriptor\").createOperationDescriptor,createReaderSelector:b(\"relay-runtime\/store\/RelayModernSelector\").createReaderSelector,createRequestDescriptor:b(\"relay-runtime\/store\/RelayModernOperationDescriptor\").createRequestDescriptor,getArgumentValues:b(\"relay-runtime\/store\/RelayStoreUtils\").getArgumentValues,getDataIDsFromFragment:b(\"relay-runtime\/store\/RelayModernSelector\").getDataIDsFromFragment,getDataIDsFromObject:b(\"relay-runtime\/store\/RelayModernSelector\").getDataIDsFromObject,getNode:b(\"relay-runtime\/query\/GraphQLTag\").getNode,getFragment:b(\"relay-runtime\/query\/GraphQLTag\").getFragment,getInlineDataFragment:b(\"relay-runtime\/query\/GraphQLTag\").getInlineDataFragment,getModuleComponentKey:b(\"relay-runtime\/store\/RelayStoreUtils\").getModuleComponentKey,getModuleOperationKey:b(\"relay-runtime\/store\/RelayStoreUtils\").getModuleOperationKey,getPaginationFragment:b(\"relay-runtime\/query\/GraphQLTag\").getPaginationFragment,getPluralSelector:b(\"relay-runtime\/store\/RelayModernSelector\").getPluralSelector,getRefetchableFragment:b(\"relay-runtime\/query\/GraphQLTag\").getRefetchableFragment,getRequest:b(\"relay-runtime\/query\/GraphQLTag\").getRequest,getRequestIdentifier:b(\"relay-runtime\/util\/getRequestIdentifier\"),getSelector:b(\"relay-runtime\/store\/RelayModernSelector\").getSelector,getSelectorsFromObject:b(\"relay-runtime\/store\/RelayModernSelector\").getSelectorsFromObject,getSingularSelector:b(\"relay-runtime\/store\/RelayModernSelector\").getSingularSelector,getStorageKey:b(\"relay-runtime\/store\/RelayStoreUtils\").getStorageKey,getVariablesFromFragment:b(\"relay-runtime\/store\/RelayModernSelector\").getVariablesFromFragment,getVariablesFromObject:b(\"relay-runtime\/store\/RelayModernSelector\").getVariablesFromObject,getVariablesFromPluralFragment:b(\"relay-runtime\/store\/RelayModernSelector\").getVariablesFromPluralFragment,getVariablesFromSingularFragment:b(\"relay-runtime\/store\/RelayModernSelector\").getVariablesFromSingularFragment,handlePotentialSnapshotErrors:b(\"relay-runtime\/util\/handlePotentialSnapshotErrors\"),graphql:b(\"relay-runtime\/query\/GraphQLTag\").graphql,isFragment:b(\"relay-runtime\/query\/GraphQLTag\").isFragment,isInlineDataFragment:b(\"relay-runtime\/query\/GraphQLTag\").isInlineDataFragment,isSuspenseSentinel:f,suspenseSentinel:k,isRequest:b(\"relay-runtime\/query\/GraphQLTag\").isRequest,readInlineData:b(\"relay-runtime\/store\/readInlineData\"),MutationTypes:b(\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\").MutationTypes,RangeOperations:b(\"relay-runtime\/mutations\/RelayDeclarativeMutationConfig\").RangeOperations,DefaultHandlerProvider:b(\"relay-runtime\/handlers\/RelayDefaultHandlerProvider\"),ConnectionHandler:b(\"relay-runtime\/handlers\/connection\/ConnectionHandler\"),MutationHandlers:b(\"relay-runtime\/handlers\/connection\/MutationHandlers\"),VIEWER_ID:b(\"relay-runtime\/store\/ViewerPattern\").VIEWER_ID,VIEWER_TYPE:b(\"relay-runtime\/store\/ViewerPattern\").VIEWER_TYPE,applyOptimisticMutation:b(\"relay-runtime\/mutations\/applyOptimisticMutation\"),commitLocalUpdate:b(\"relay-runtime\/mutations\/commitLocalUpdate\"),commitMutation:b(\"relay-runtime\/mutations\/commitMutation\"),fetchQuery:b(\"relay-runtime\/query\/fetchQuery\"),fetchQuery_DEPRECATED:b(\"relay-runtime\/query\/fetchQuery_DEPRECATED\"),isRelayModernEnvironment:b(\"relay-runtime\/store\/isRelayModernEnvironment\"),requestSubscription:b(\"relay-runtime\/subscription\/requestSubscription\"),ConnectionInterface:b(\"relay-runtime\/handlers\/connection\/ConnectionInterface\"),PreloadableQueryRegistry:b(\"relay-runtime\/query\/PreloadableQueryRegistry\"),RelayProfiler:b(\"relay-runtime\/util\/RelayProfiler\"),createPayloadFor3DField:b(\"relay-runtime\/util\/createPayloadFor3DField\"),RelayConcreteNode:b(\"relay-runtime\/util\/RelayConcreteNode\"),RelayError:b(\"relay-runtime\/util\/RelayError\"),RelayFeatureFlags:b(\"relay-runtime\/util\/RelayFeatureFlags\"),DEFAULT_HANDLE_KEY:b(\"relay-runtime\/util\/RelayDefaultHandleKey\").DEFAULT_HANDLE_KEY,FRAGMENTS_KEY:b(\"relay-runtime\/store\/RelayStoreUtils\").FRAGMENTS_KEY,FRAGMENT_OWNER_KEY:b(\"relay-runtime\/store\/RelayStoreUtils\").FRAGMENT_OWNER_KEY,ID_KEY:b(\"relay-runtime\/store\/RelayStoreUtils\").ID_KEY,REF_KEY:b(\"relay-runtime\/store\/RelayStoreUtils\").REF_KEY,REFS_KEY:b(\"relay-runtime\/store\/RelayStoreUtils\").REFS_KEY,ROOT_ID:b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_ID,ROOT_TYPE:b(\"relay-runtime\/store\/RelayStoreUtils\").ROOT_TYPE,TYPENAME_KEY:b(\"relay-runtime\/store\/RelayStoreUtils\").TYPENAME_KEY,deepFreeze:i||(i=b(\"relay-runtime\/util\/deepFreeze\")),generateClientID:a,generateUniqueClientID:c,getRelayHandleKey:b(\"relay-runtime\/util\/getRelayHandleKey\"),isClientID:d,isPromise:b(\"relay-runtime\/util\/isPromise\"),isScalarAndEqual:b(\"relay-runtime\/util\/isScalarAndEqual\"),recycleNodesInto:b(\"relay-runtime\/util\/recycleNodesInto\"),stableCopy:j||(j=b(\"relay-runtime\/util\/stableCopy\")),getFragmentIdentifier:b(\"relay-runtime\/util\/getFragmentIdentifier\"),getRefetchMetadata:b(\"relay-runtime\/util\/getRefetchMetadata\"),getPaginationMetadata:b(\"relay-runtime\/util\/getPaginationMetadata\"),getPaginationVariables:b(\"relay-runtime\/util\/getPaginationVariables\"),getPendingOperationsForFragment:b(\"relay-runtime\/util\/getPendingOperationsForFragment\"),getValueAtPath:b(\"relay-runtime\/util\/getValueAtPath\"),__internal:{ResolverFragments:b(\"relay-runtime\/store\/ResolverFragments\"),OperationTracker:b(\"relay-runtime\/store\/RelayOperationTracker\"),createRelayContext:b(\"relay-runtime\/store\/createRelayContext\"),getOperationVariables:b(\"relay-runtime\/store\/RelayConcreteVariables\").getOperationVariables,getLocalVariables:b(\"relay-runtime\/store\/RelayConcreteVariables\").getLocalVariables,fetchQuery:b(\"relay-runtime\/query\/fetchQueryInternal\").fetchQuery,fetchQueryDeduped:b(\"relay-runtime\/query\/fetchQueryInternal\").fetchQueryDeduped,getPromiseForActiveRequest:b(\"relay-runtime\/query\/fetchQueryInternal\").getPromiseForActiveRequest,getObservableForActiveRequest:b(\"relay-runtime\/query\/fetchQueryInternal\").getObservableForActiveRequest,normalizeResponse:b(\"relay-runtime\/store\/normalizeResponse\"),withProvidedVariables:b(\"relay-runtime\/util\/withProvidedVariables\")}}}),null);\n__d(\"throttle\",[\"TimeSlice\",\"TimeSliceInteractionSV\",\"setTimeout\",\"setTimeoutAcrossTransitions\"],(function(a,b,c,d,e,f,g){function a(a,b,d){return h(a,b,d,c(\"setTimeout\"),!1)}Object.assign(a,{acrossTransitions:function(a,b,d){return h(a,b,d,c(\"setTimeoutAcrossTransitions\"),!1)},withBlocking:function(a,b,d){return h(a,b,d,c(\"setTimeout\"),!0)},acrossTransitionsWithBlocking:function(a,b,d){return h(a,b,d,c(\"setTimeoutAcrossTransitions\"),!0)}});function h(a,b,d,e,f){var g=b==null?100:b,h,i=null,j=0,k=null,l=[],m=c(\"TimeSlice\").guard(function(){j=Date.now();if(i){var b=function(b){a.apply(h,b)}.bind(null,i),c=l.length;while(--c>=0)b=l[c].bind(null,b);l=[];b();i=null;k=e(m,g)}else k=null},\"throttle_\"+g+\"_ms\",{propagationType:c(\"TimeSlice\").PropagationType.EXECUTION,registerCallStack:!0});m.__SMmeta=a.__SMmeta;return function(){c(\"TimeSliceInteractionSV\").ref_counting_fix&&l.push(c(\"TimeSlice\").getGuardedContinuation(\"throttleWithContinuation\"));for(var a=arguments.length,b=new Array(a),n=0;n<a;n++)b[n]=arguments[n];i=b;h=this;d!==void 0&&(h=d);(k===null||Date.now()-j>g)&&(f===!0?m():k=e(m,0))}}b=a;g[\"default\"]=b}),98);\n__d(\"asyncToGeneratorRuntime\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g;function h(a,c,d,e,f,h,i){try{var j=a[h](i),k=j.value}catch(a){d(a);return}j.done?c(k):(g||(g=b(\"Promise\"))).resolve(k).then(e,f)}function a(a){return function(){var c=this,d=arguments;return new(g||(g=b(\"Promise\")))(function(b,e){var f=a.apply(c,d);function g(a){h(f,b,e,g,i,\"next\",a)}function i(a){h(f,b,e,g,i,\"throw\",a)}g(void 0)})}}f.asyncToGenerator=a}),66);\n__d(\"ErrorSetup\",[\"fb-error\"],(function(a,b,c,d,e,f,g){\"use strict\";g[\"default\"]=c(\"fb-error\").ErrorSetup}),98);\n__d(\"CometDialogContext\",[\"FBLogger\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;b=h||d(\"react\");function a(){c(\"FBLogger\")(\"comet_ui\").blameToPreviousFrame().mustfix(\"Attempted to imperatively render a dialog without CometTransientDialogProvider in the tree. This is not allowed. Please add a CometTransientDialogProvider to render a dialog (https:\/\/fburl.com\/dialog-provider).\")}e=b.createContext(a);g[\"default\"]=e}),98);\n__d(\"CometSuspendedDialogImpl.react\",[\"CometPlaceholder.react\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=h||d(\"react\");function a(a){var b=a.dialog,d=a.dialogProps,e=a.fallback,f=a.onClose;a=a.onHide;return i.jsx(c(\"CometPlaceholder.react\"),{fallback:e(f),children:i.jsx(b,babelHelpers[\"extends\"]({},d,{onClose:f,onHide:a}))})}a.displayName=a.name+\" [from \"+f.id+\"]\";g[\"default\"]=a}),98);\n__d(\"tracePolicyFromResource\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){return a+\".\"+b.getModuleId()}f[\"default\"]=a}),66);\n__d(\"WebStorageEstimator\",[\"FBLogger\",\"Promise\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(){if(navigator.storage!=null&&typeof navigator.storage.estimate===\"function\")try{return navigator.storage.estimate()}catch(a){c(\"FBLogger\")(\"comet_infra\").mustfix(\"Error while trying to estimate storage: %s\",a);return(h||(h=b(\"Promise\"))).resolve(null)}c(\"FBLogger\")(\"comet_infra\").info(\"Storage Estimation API is not available\");return(h||(h=b(\"Promise\"))).resolve(null)}g.estimateStorage=a}),98);\n__d(\"LSIntEnum\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=new Map();function a(a){var b=i.get(a);if(b!=null)return b;b=(h||(h=d(\"I64\"))).of_float(a);i.set(a,b);return b}function b(a){return(h||(h=d(\"I64\"))).to_float(a)}function c(a){return(h||(h=d(\"I64\"))).to_float(a)}g.ofNumber=a;g.toNumber=b;g.unwrapIntEnum=c}),98);\n__d(\"CurrentMessengerUser\",[\"CurrentEnvironment\",\"CurrentUser\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"CurrentUser\").getID()}function b(){return c(\"CurrentEnvironment\").instagramdotcom?c(\"CurrentUser\").getEIMU():c(\"CurrentUser\").getID()}function d(){return c(\"CurrentUser\").getPageMessagingMailboxId()}function e(){return c(\"CurrentUser\").isWorkUser()}function f(){return c(\"CurrentUser\").isTestUser()}function h(){return c(\"CurrentUser\").isEmployee()}function i(){return c(\"CurrentUser\").getAppID()}function j(){return c(\"CurrentUser\").getAccountID()}function k(){return c(\"CurrentUser\").isLoggedInNow()}g.getID=a;g.getIDorEIMU=b;g.getPageMessagingMailboxId=d;g.isWorkUser=e;g.isTestUser=f;g.isEmployee=h;g.getAppID=i;g.getAccountID=j;g.isLoggedInNow=k}),98);\n__d(\"isPromise\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g;function a(a){return a instanceof(g||(g=b(\"Promise\")))||typeof (a==null?void 0:a.then)===\"function\"}f[\"default\"]=a}),66);\n__d(\"CometLruCache\",[\"recoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(){function a(a){this.$1=a,a<=0&&c(\"recoverableViolation\")(\"CometLruCache: Unable to create instance of cache with zero or negative capacity.\",\"CometLruCache\"),this.$2=new Map()}var b=a.prototype;b.set=function(a,b){this.$2[\"delete\"](a);this.$2.set(a,b);if(this.$2.size>this.$1){a=this.$2.keys().next();a.done||this.$2[\"delete\"](a.value)}};b.get=function(a){var b=this.$2.get(a);b!=null&&(this.$2[\"delete\"](a),this.$2.set(a,b));return b};b.has=function(a){return this.$2.has(a)};b[\"delete\"]=function(a){this.$2[\"delete\"](a)};b.size=function(){return this.$2.size};b.capacity=function(){return this.$1-this.$2.size};b.clear=function(){this.$2.clear()};return a}();function a(a){return new h(a)}g.create=a}),98);\n__d(\"structuredClone\",[],(function(a,b,c,d,e,f){\"use strict\";b=(a=window)==null?void 0:a.structuredClone;f[\"default\"]=b}),66);\n__d(\"ConstUriUtils\",[\"CometLruCache\",\"ExecutionEnvironment\",\"FBLogger\",\"PHPQuerySerializer\",\"PHPQuerySerializerNoEncoding\",\"URIRFC3986\",\"URISchemes\",\"UriNeedRawQuerySVConfig\",\"isSameOrigin\",\"recoverableViolation\",\"structuredClone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k,l=d(\"CometLruCache\").create(5e3),m=new RegExp(\"(^|\\\\.)facebook\\\\.com$\",\"i\"),n=new RegExp(\"^(?:[^\/]*:|[\\\\x00-\\\\x1f]*\/[\\\\x00-\\\\x1f]*\/)\"),o=new RegExp(\"[\\\\x00-\\\\x2c\\\\x2f\\\\x3b-\\\\x40\\\\x5c\\\\x5e\\\\x60\\\\x7b-\\\\x7f\\\\uFDD0-\\\\uFDEF\\\\uFFF0-\\\\uFFFF\\\\u2047\\\\u2048\\\\uFE56\\\\uFE5F\\\\uFF03\\\\uFF0F\\\\uFF1F]\"),p=c(\"UriNeedRawQuerySVConfig\").uris.map(function(a){return{domain:a,valid:w(a)}}),q=[],r=[];function s(a,b){var d={};if(a!=null)for(var a=a.entries(),e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;d[g[0]]=g[1]}else c(\"FBLogger\")(\"ConstUriUtils\").warn(\"Passed a null query map in, this means poor client side flow coverage or client\/server boundary type issue.\");return b.serialize(d)}function t(a,b,d){var e=k||(k=c(\"PHPQuerySerializer\"));if([\"http\",\"https\"].includes(b)&&u(a)){if(a.includes(\"doubleclick.net\")&&d!=null&&!d.startsWith(\"http\"))return e;e=c(\"PHPQuerySerializerNoEncoding\")}return e}function u(a){return a!=null&&p.some(function(b){return b.valid&&v(a,b.domain)})}function v(a,b){if(b===\"\"||a===\"\")return!1;if(a.endsWith(b)){b=a.length-b.length-1;if(b===-1||a[b]===\".\")return!0}return!1}function w(a){return!o.test(a)}function x(a,b){var c=b.protocol!=null&&b.protocol!==\"\"?b.protocol:a.getProtocol();c=b.domain!=null?t(b.domain,c):a.getSerializer();c={domain:a.getDomain(),fragment:a.getFragment(),fragmentSeparator:a.hasFragmentSeparator(),isGeneric:a.isGeneric(),originalRawQuery:a.getOriginalRawQuery(),path:a.getPath(),port:a.getPort(),protocol:a.getProtocol(),queryParams:a.getQueryParams(),serializer:c,subdomain:a.getSubdomain()};a=babelHelpers[\"extends\"]({},c,b);c=b.queryParams!=null&&b.queryParams.size!==0;return C.getUribyObject(a,c)}function y(a,b,c,d){c===void 0&&(c=!1);var e=a.protocol!==\"\"?a.protocol+\":\"+(a.isGeneric?\"\":\"\/\/\"):\"\",f=a.domain!==\"\"?a.domain:\"\",g=a.port!==\"\"?\":\"+a.port:\"\",h=a.path!==\"\"?a.path:e!==\"\"&&e!==\"mailto:\"||f!==\"\"||g!==\"\"?\"\/\":\"\";c=z(f,a.originalRawQuery,a.queryParams,b,c,(b=d)!=null?b:a.serializer);d=c.length>0?\"?\":\"\";b=a.fragment!==\"\"?\"#\"+a.fragment:\"\";a=a.fragment===\"\"&&a.fragmentSeparator?\"#\":\"\";return\"\"+e+f+g+h+d+c+a+b}function z(a,b,c,d,e,f){e===void 0&&(e=!1);if(!d&&(e||u(a))){return(d=b)!=null?d:\"\"}return s(c,f)}function A(a){var b=a.trim();b=(h||(h=d(\"URIRFC3986\"))).parse(b)||{fragment:null,host:null,isGenericURI:!1,query:null,scheme:null,userinfo:null};var c=b.host||\"\",e=c.split(\".\");e=e.length>=3?e[0]:\"\";var f=t(c,b.scheme||\"\",b.query),g=f.deserialize(b.query||\"\")||{};g=new Map(Object.entries(g));g=B({domain:c,fragment:b.fragment||\"\",fragmentSeparator:b.fragment===\"\",isGeneric:b.isGenericURI,originalRawQuery:b.query,path:b.path||\"\",port:b.port!=null?String(b.port):\"\",protocol:(b.scheme||\"\").toLowerCase(),queryParams:g,serializer:f,subdomain:e,userInfo:(c=b==null?void 0:b.userinfo)!=null?c:\"\"},a);return g}function B(a,b,c,e){c===void 0&&(c=(j||(j=d(\"URISchemes\"))).Options.INCLUDE_DEFAULTS);var f={components:babelHelpers[\"extends\"]({},a),error:\"\",valid:!0},g=f.components;if(!(j||(j=d(\"URISchemes\"))).isAllowed(a.protocol,c,e)){f.valid=!1;f.error='The URI protocol \"'+String(a.protocol)+'\" is not allowed.';return f}if(!w(a.domain||\"\")){f.valid=!1;f.error=\"This is an unsafe domain \"+String(a.domain);return f}g.port=a.port!=null&&String(a.port)||\"\";if(Boolean(a.userInfo)){f.valid=!1;f.error=\"Invalid URI: (userinfo is not allowed in a URI \"+String(a.userInfo)+\")\";return f}c=b!=null&&b!==\"\"?b:y(g,!1);if(g.domain===\"\"&&g.path.indexOf(\"\\\\\")!==-1){f.valid=!1;f.error=\"Invalid URI: (no domain but multiple back-slashes \"+c+\")\";return f}if(!g.protocol&&n.test(c)){f.valid=!1;f.error=\"Invalid URI: (unsafe protocol-relative URI \"+c+\")\";return f}if(g.domain!==\"\"&&g.path!==\"\"&&!g.path.startsWith(\"\/\")){f.valid=!1;f.error=\"Invalid URI: (domain and pathwhere path lacks leading slash \"+c+\")\";return f}return f}var C=function(){function a(a){this.queryParams=new Map(),this.domain=a.domain,this.fragment=a.fragment,this.fragmentSeparator=Boolean(a.fragmentSeparator),this.isGenericProtocol=Boolean(a.isGeneric),this.path=a.path,this.originalRawQuery=a.originalRawQuery,this.port=a.port,this.protocol=a.protocol,this.queryParams=a.queryParams,this.serializer=a.serializer,this.subdomain=a.subdomain}var b=a.prototype;b.addQueryParam=function(a,b){if(Boolean(a)){var c=this.getQueryParams();c.set(a,b);return x(this,{queryParams:c})}return this};b.addQueryParams=function(a){if(a.size>0){var b=this.getQueryParams();a.forEach(function(a,c){b.set(c,a)});return x(this,{queryParams:b})}return this};b.addQueryParamString=function(a){if(Boolean(a)){a=a.startsWith(\"?\")?a.slice(1):a;var b=this.getQueryParams();a.split(\"&\").map(function(a){a=a.split(\"=\");var c=a[0];a=a[1];b.set(c,a)});return x(this,{queryParams:b})}return this};b.addTrailingSlash=function(){var a=this.getPath();return a.length>0&&a[a.length-1]!==\"\/\"?this.setPath(a+\"\/\"):this};b.getDomain=function(){return this.domain};b.getFragment=function(){return this.fragment};b.getOrigin=function(){var a=this.getPort();return this.getProtocol()+\":\/\/\"+this.getDomain()+(a?\":\"+a:\"\")};b.getOriginalRawQuery=function(){return this.originalRawQuery};b.getPath=function(){return this.path};b.getPort=function(){return this.port};b.getProtocol=function(){return this.protocol.toLowerCase()};b.getQualifiedUri=function(){if(!this.getDomain()){var b;b=(b=typeof window!==\"undefined\"?window:self)==null?void 0:(b=b.location)==null?void 0:b.href;if(b==null){c(\"FBLogger\")(\"ConstUriUtils\").blameToPreviousFile().warn(\"Cannot get qualified URI for current URI as there is no current location\");return null}(i||(i=c(\"ExecutionEnvironment\"))).isInWorker&&b.startsWith(\"blob:\")&&(b=b.substring(5,b.length));b=b.slice(0,b.indexOf(\"\/\",b.indexOf(\":\")+3));return a.getUri(b+this.toString())}return this};b.getQueryParam=function(a){a=this.queryParams.get(a);if(typeof a===\"string\")return a;else{a=JSON.stringify(a);return a==null?a:JSON.parse(a)}};b.getQueryData=function(){return Object.fromEntries(this.getQueryParams())};b.getQueryParams=function(){if(c(\"structuredClone\")!=null)return c(\"structuredClone\")(this.queryParams);var a=JSON.stringify(Array.from(this.queryParams),function(a,b){return Array.isArray(b)?{__CUUArr:!0,value:babelHelpers[\"extends\"]({},b)}:b});a=JSON.parse(a,function(a,b){return b!=null&&typeof b===\"object\"&&b.__CUUArr?Object.keys(b.value).reduce(function(a,c){a[c]=b.value[c];return a},[]):b});return new Map(a)};b.getQueryString=function(a){a===void 0&&(a=!1);return z(this.domain,this.originalRawQuery,this.queryParams,!1,a,this.serializer)};b.getRegisteredDomain=function(){if(!this.getDomain())return\"\";if(!this.isFacebookUri())return null;var a=this.getDomain().split(\".\"),b=a.indexOf(\"facebook\");b===-1&&(b=a.indexOf(\"workplace\"));return a.slice(b).join(\".\")};b.getSerializer=function(){return this.serializer};b.getSubdomain=function(){return this.subdomain};b.getUnqualifiedUri=function(){if(this.getDomain()){var b=this.toString();return a.getUri(b.slice(b.indexOf(\"\/\",b.indexOf(\":\")+3)))}return this};a.getUri=function(b){b=b.trim();var d=l.get(b);if(d==null){var e=A(b);if(e.valid)d=new a(e.components),l.set(b,d);else{c(\"FBLogger\")(\"ConstUriUtils\").blameToPreviousFrame().warn(e.error);return null}}return d};a.getUribyObject=function(b,d){var e=y(b,d),f=l.get(e);if(f==null){d&&(b.originalRawQuery=s(b.queryParams,b.serializer));d=B(b);if(d.valid)f=new a(d.components),l.set(e,f);else{c(\"recoverableViolation\")(d.error,\"ConstUri\");return null}}return f};b.hasFragmentSeparator=function(){return this.fragmentSeparator};b.isEmpty=function(){return!(this.getPath()||this.getProtocol()||this.getDomain()||this.getPort()||this.queryParams.size>0||this.getFragment())};b.isFacebookUri=function(){var a=this.toString();if(a===\"\")return!1;return!this.getDomain()&&!this.getProtocol()?!0:[\"https\",\"http\"].indexOf(this.getProtocol())!==-1&&m.test(this.getDomain())};b.isGeneric=function(){return this.isGenericProtocol};b.isSameOrigin=function(a){return c(\"isSameOrigin\")(this,a)};b.isSubdomainOfDomain=function(b){var c=a.getUri(b);return c!=null&&v(this.domain,b)};b.isSecure=function(){return this.getProtocol()===\"https\"};b.removeQueryParams=function(a){if(Array.isArray(a)&&a.length>0){var b=this.getQueryParams();a.map(function(a){return b[\"delete\"](a)});return x(this,{queryParams:b})}return this};b.removeQueryParam=function(a){if(Boolean(a)){var b=this.getQueryParams();b[\"delete\"](a);return x(this,{queryParams:b})}return this};b.replaceQueryParam=function(a,b){if(Boolean(a)){var c=this.getQueryParams();c.set(a,b);return x(this,{queryParams:c})}return this};b.replaceQueryParams=function(a){return x(this,{queryParams:a})};b.replaceQueryParamString=function(a){if(a!=null){a=a.startsWith(\"?\")?a.slice(1):a;var b=this.getQueryParams();a.split(\"&\").map(function(a){a=a.split(\"=\");var c=a[0];a=a[1];b.set(c,a)});return x(this,{queryParams:b})}return this};b.setDomain=function(a){if(Boolean(a)){var b=a.split(\".\");b=b.length>=3?b[0]:\"\";return x(this,{domain:a,subdomain:b})}return this};b.setFragment=function(a){return a===\"#\"?x(this,{fragment:\"\",fragmentSeparator:!0}):x(this,{fragment:a,fragmentSeparator:a!==\"\"})};b.setPath=function(a){return a!=null?x(this,{path:a}):this};b.setPort=function(a){return Boolean(a)?x(this,{port:a}):this};b.setProtocol=function(a){return Boolean(a)?x(this,{protocol:a}):this};b.setSecure=function(a){return this.setProtocol(a?\"https\":\"http\")};b.setSubDomain=function(a){if(Boolean(a)){var b=this.getQualifiedUri();if(b==null)return null;var c=b.getDomain();c=c.split(\".\");c.length>=3?c[0]=a:c.unshift(a);return x(b,{domain:c.join(\".\"),subdomain:a})}return this};b.stripTrailingSlash=function(){return this.setPath(this.getPath().replace(\/\\\/$\/,\"\"))};a.$1=function(a){a=a;for(var b=0;b<q.length;b++){var c=q[b];a=c(a)}return a};a.$2=function(a,b){b=b;for(var c=0;c<r.length;c++){var d=r[c];b=d(a,b)}return b};b.$3=function(b,c){c===void 0&&(c=!1);return y({domain:a.$1(this.domain),fragment:this.fragment,fragmentSeparator:this.fragmentSeparator,isGeneric:this.isGenericProtocol,originalRawQuery:this.originalRawQuery,path:this.path,port:this.port,protocol:this.protocol,queryParams:a.$2(this.domain,this.queryParams),serializer:b,subdomain:this.subdomain,userInfo:\"\"},!1,c)};b.toStringRawQuery=function(){this.rawStringValue==null&&(this.rawStringValue=this.$3(c(\"PHPQuerySerializerNoEncoding\")));return this.rawStringValue};b.toString=function(){this.stringValue==null&&(this.stringValue=this.$3(this.serializer));return this.stringValue};b.toStringPreserveQuery=function(){return this.$3(this.serializer,!0)};a.isValidUri=function(b){var c=l.get(b);if(c!=null)return!0;c=A(b);if(c.valid){l.set(b,new a(c.components));return!0}return!1};return a}();function a(a){if(a instanceof C)return a;else return null}function b(a){q.push(a)}function e(a){r.push(a)}f=C.getUri;var D=C.isValidUri;g.isSubdomainOfDomain=v;g.isConstUri=a;g.registerDomainFilter=b;g.registerQueryParamsFilter=e;g.getUri=f;g.isValidUri=D}),98);\n__d(\"routeBuilderUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){a=a.split(\"\/\");return a.filter(function(a){return a!==\"\"}).map(function(a){var b=a.split(\/{|}\/);if(b.length<3)return{isToken:!1,part:a};else{a=b[0];var c=b[1];b=b[2];var d=c[0]===\"?\",e=c[d?1:0]===\"*\";c=c.substring((d?1:0)+(e?1:0));return{isToken:!0,optional:d,catchAll:e,prefix:a,suffix:b,token:c}}})}f.getPathParts=a}),66);\n__d(\"jsRouteBuilder\",[\"ConstUriUtils\",\"FBLogger\",\"routeBuilderUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"#\";function a(a,b,e,f,g){g===void 0&&(g=!1);var i=d(\"routeBuilderUtils\").getPathParts(a);function j(j){try{var k=f!=null?babelHelpers[\"extends\"]({},f,j):(j=j)!=null?j:{},l={};j=\"\";var m=!1;j=i.reduce(function(a,c){if(!c.isToken)return a+\"\/\"+c.part;else{var d,e=c.optional,f=c.prefix,g=c.suffix;c=c.token;if(e&&m)return a;d=(d=k[c])!=null?d:b[c];if(d==null&&e){m=!0;return a}if(d==null)throw new Error(\"Missing required template parameter: \"+c);if(d===\"\")throw new Error(\"Required template parameter is an empty string: \"+c);l[c]=!0;return a+\"\/\"+f+d+g}},\"\");a.slice(-1)===\"\/\"&&(j+=\"\/\");j===\"\"&&(j=\"\/\");var n=d(\"ConstUriUtils\").getUri(j);for(var o in k){var p=k[o];!l[o]&&p!=null&&n!=null&&(e!=null&&e.has(o)?p!==!1&&(n=n.addQueryParam(o,null)):n=n.addQueryParam(o,p))}return[n,j]}catch(b){p=b==null?void 0:b.message;o=c(\"FBLogger\")(\"JSRouteBuilder\").blameToPreviousFrame().blameToPreviousFrame();g&&(o=o.blameToPreviousFrame());o.mustfix(\"Failed building URI for base path: %s message: %s\",a,p);return[null,h]}}return{buildUri:function(a){a=(a=j(a)[0])!=null?a:d(\"ConstUriUtils\").getUri(h);if(a==null)throw new Error(\"Not even the fallback URL parsed validly!\");return a},buildUriNullable:function(a){return j(a)[0]},buildURL:function(a){a=j(a);var b=a[0];a=a[1];return(b=b==null?void 0:b.toString())!=null?b:a},buildURLStringDEPRECATED:function(a){a=j(a);var b=a[0];a=a[1];return(b=b==null?void 0:b.toString())!=null?b:a}}}g[\"default\"]=a}),98);\n__d(\"BrowserLockManager\",[],(function(a,b,c,d,e,f){\"use strict\";a=typeof window!==\"undefined\"?window:self;c=a==null?void 0:(b=a.navigator)==null?void 0:b.locks;f[\"default\"]=c}),66);\n__d(\"LockManager\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\")({Exclusive:\"exclusive\",Shared_NOT_IMPLEMENTED:\"shared\"});f.LockMode=a}),66);\n__d(\"everySet\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b,c){var d=a.entries(),e=d.next();while(!e.done){var f=e.value;if(!b.call(c,f[1],f[0],a))return!1;e=d.next()}return!0}f[\"default\"]=a}),66);\n__d(\"equalsSet\",[\"everySet\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){return a.size!==b.size?!1:c(\"everySet\")(a,function(a){return b.has(a)})}g[\"default\"]=a}),98);\/*FB_PKG_DELIM*\/\n\/**\n * License: https:\/\/www.facebook.com\/legal\/license\/yKsQCAUqcFZ\/\n *\/\n__d(\"dexie-4.0.1-alpha.22\",[],(function(a,b,c,d,e,f){\"use strict\";var g={},h={exports:g};function i(){(function(b,c){typeof g===\"object\"&&typeof h!==\"undefined\"?h.exports=c():(b=typeof globalThis!==\"undefined\"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return b(a,c)};function c(a,c){if(typeof c!==\"function\"&&c!==null)throw new TypeError(\"Class extends value \"+String(c)+\" is not a constructor or null\");b(a,c);function d(){this.constructor=a}a.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d())}var d=function(){d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return d.apply(this,arguments)};function e(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var f=typeof globalThis!==\"undefined\"?globalThis:typeof self!==\"undefined\"?self:typeof window!==\"undefined\"?window:a,g=Object.keys,h=Array.isArray;typeof Promise!==\"undefined\"&&!f.Promise&&(f.Promise=Promise);function i(a,b){if(typeof b!==\"object\")return a;g(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b===\"function\"&&(b=b(j(a))),(typeof Reflect===\"undefined\"?g:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,\"get\")&&typeof c.get===\"function\"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,\"constructor\",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error(\"Assertion Failed\")}function aa(a){f.setImmediate?setImmediate(a):setTimeout(a,0)}function ba(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function ca(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function w(a,b){if(l(a,b))return a[b];if(!b)return a;if(typeof b!==\"string\"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(\".\");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if(\"isFrozen\"in Object&&Object.isFrozen(a))return;if(typeof b!==\"string\"&&\"length\"in b){v(typeof c!==\"string\"&&\"length\"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(\".\");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d===\"\")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});x(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function da(a,b){typeof b===\"string\"?x(a,b,void 0):\"length\"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function ea(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var fa=[].concat;function ga(a){return fa.apply([],a)}var y=\"Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\".split(\",\").concat(ga([8,16,32,64].map(function(a){return[\"Int\",\"Uint\",\"Float\"].map(function(b){return b+a+\"Array\"})}))).filter(function(a){return f[a]}),ha=new Set(y.map(function(a){return f[a]}));function ia(a){var b={};for(var c in a)if(l(a,c)){var d=a[c];b[c]=!d||typeof d!==\"object\"||ha.has(d.constructor)?d:ia(d)}return b}function ja(a){for(var b in a)if(l(a,b))return!1;return!0}var ka=null;function z(a){ka=new WeakMap();a=la(a);ka=null;return a}function la(a){if(!a||typeof a!==\"object\")return a;var b=ka.get(a);if(b)return b;if(h(a)){b=[];ka.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(la(a[c]))}else if(ha.has(a.constructor))b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);ka.set(a,b);for(d in a)l(a,d)&&(b[d]=la(a[d]))}return b}var ma={}.toString;function na(a){return ma.call(a).slice(8,-1)}var oa=typeof Symbol!==\"undefined\"?Symbol.iterator:\"@@iterator\",pa=typeof oa===\"symbol\"?function(a){var b;return a!=null&&(b=a[oa])&&b.apply(a)}:function(){return null};function qa(a,b){b=a.indexOf(b);b>=0&&a.splice(b,1);return b>=0}var ra={};function A(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===ra&&typeof a===\"string\")return[a];if(e=pa(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b===\"number\"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var sa=typeof Symbol!==\"undefined\"?function(a){return a[Symbol.toStringTag]===\"AsyncFunction\"}:function(){return!1},B=typeof location!==\"undefined\"&&\/^(http|https):\\\/\\\/(localhost|127\\.0\\.0\\.1)\/.test(location.href);function ta(a,b){B=a,ua=b}var ua=function(){return!0},va=!new Error(\"\").stack;function C(){if(va)try{C.arguments;throw new Error()}catch(a){return a}return new Error()}function wa(a,b){var c=a.stack;if(!c)return\"\";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split(\"\\n\").length);return c.split(\"\\n\").slice(b).filter(ua).map(function(a){return\"\\n\"+a}).join(\"\")}y=[\"Modify\",\"Bulk\",\"OpenFailed\",\"VersionChange\",\"Schema\",\"Upgrade\",\"InvalidTable\",\"MissingAPI\",\"NoSuchDatabase\",\"InvalidArgument\",\"SubTransaction\",\"Unsupported\",\"Internal\",\"DatabaseClosed\",\"PrematureCommit\",\"ForeignAwait\"];var D=[\"Unknown\",\"Constraint\",\"Data\",\"TransactionInactive\",\"ReadOnly\",\"Version\",\"NotFound\",\"InvalidState\",\"InvalidAccess\",\"Abort\",\"Timeout\",\"QuotaExceeded\",\"Syntax\",\"DataClone\"];y=y.concat(D);var xa={VersionChanged:\"Database version changed by other database connection\",DatabaseClosed:\"Database has been closed\",Abort:\"Transaction aborted\",TransactionInactive:\"Transaction has already completed or failed\",MissingAPI:\"IndexedDB API missing. Please visit https:\/\/tinyurl.com\/y2uuvskb\"};function ya(a,b){this._e=C(),this.name=a,this.message=b}p(ya).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+\": \"+this.message+wa(this._e,2))}},toString:function(){return this.name+\": \"+this.message}});function za(a,b){return a+\". Errors: \"+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join(\"\\n\")}function Aa(a,b,c,d){this._e=C(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=za(a,b)}p(Aa).from(ya);function Ba(a,b){this._e=C(),this.name=\"BulkError\",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=za(a,this.failures)}p(Ba).from(ya);var Ca=y.reduce(function(a,b){return a[b]=b+\"Error\",a},{}),Da=ya,E=y.reduce(function(b,c){var d=c+\"Error\";function a(a,b){this._e=C(),this.name=d,!a?(this.message=xa[c]||d,this.inner=null):typeof a===\"string\"?(this.message=\"\".concat(a).concat(b?\"\\n \"+b:\"\"),this.inner=b||null):typeof a===\"object\"&&(this.message=\"\".concat(a.name,\" \").concat(a.message),this.inner=a)}p(a).from(Da);b[c]=a;return b},{});E.Syntax=SyntaxError;E.Type=TypeError;E.Range=RangeError;var Ea=D.reduce(function(a,b){a[b+\"Error\"]=E[b];return a},{});function Fa(a,b){if(!a||a instanceof ya||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Ea[a.name])return a;b=new Ea[a.name](b||a.message,a);\"stack\"in a&&o(b,\"stack\",{get:function(){return this.inner.stack}});return b}D=y.reduce(function(a,b){[\"Syntax\",\"Type\",\"Range\"].indexOf(b)===-1&&(a[b+\"Error\"]=E[b]);return a},{});D.ModifyError=Aa;D.DexieError=ya;D.BulkError=Ba;function F(){}function Ga(a){return a}function Ha(a,b){return a==null||a===Ga?b:function(c){return b(a(c))}}function G(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ia(a,b){return a===F?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?G(d,this.onsuccess):d);e&&(this.onerror=this.onerror?G(e,this.onerror):e);return f!==void 0?f:c}}function Ja(a,b){return a===F?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?G(c,this.onsuccess):c);d&&(this.onerror=this.onerror?G(d,this.onerror):d)}}function Ka(a,b){return a===F?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?G(e,this.onsuccess):e);f&&(this.onerror=this.onerror?G(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function La(a,b){return a===F?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ma(a,b){return a===F?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then===\"function\"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Na={},Oa=100,Pa=20,Qa=100;y=typeof Promise===\"undefined\"?[]:function(){var a=Promise.resolve();if(typeof crypto===\"undefined\"||!crypto.subtle)return[a,j(a),a];var b=crypto.subtle.digest(\"SHA-512\",new Uint8Array([0]));return[b,j(b),a]}();var Ra=y[0],Sa=y[1],Ta=y[2],Ua=Sa&&Sa.then,Va=Ra&&Ra.constructor,Wa=!!Ta,Xa=!1,Ya=Ta?function(){Ta.then(pb)}:f.setImmediate?setImmediate.bind(null,pb):f.MutationObserver?function(){var a=document.createElement(\"div\");new MutationObserver(function(){pb(),a=null}).observe(a,{attributes:!0});a.setAttribute(\"i\",\"1\")}:function(){setTimeout(pb,0)},Za=function(a,b){eb.push([a,b]),ab&&(Ya(),ab=!1)},$a=!0,ab=!0,H=[],bb=[],cb=null,db=Ga,I={id:\"global\",global:!0,ref:0,unhandleds:[],onunhandled:F,pgp:!1,env:{},finalize:F},J=I,eb=[],K=0,fb=[];function L(a){if(typeof this!==\"object\")throw new TypeError(\"Promises must be constructed via new\");this._listeners=[];this._lib=!1;var b=this._PSD=J;B&&(this._stackHolder=C(),this._prev=null,this._numPrev=0);if(typeof a!==\"function\"){if(a!==Na)throw new TypeError(\"Not a function\");this._state=arguments[1];this._value=arguments[2];this._state===!1&&jb(this,this._value);return}this._state=null;this._value=null;++b.ref;ib(this,a)}var gb={get:function(){var a=J,b=Ab;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==Ab),g=f&&!P(),h=new L(function(b,h){lb(e,new hb(Jb(c,a,f,g),Jb(d,a,f,g),b,h,a))});B&&ob(h,this);return h}c.prototype=Na;return c},set:function(a){o(this,\"then\",a&&a.prototype===Na?gb:{get:function(){return a},set:gb.set})}};m(L.prototype,{then:gb,_then:function(a,b){lb(this,new hb(null,null,a,b,J))},\"catch\":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a===\"function\"?this.then(null,function(b){return b instanceof a?c(b):wb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):wb(b)})},\"finally\":function(a){return this.then(function(b){a();return b},function(b){a();return wb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Xa=!0;var a=nb(this,[],Pa);a=a.join(\"\\nFrom previous: \");this._state!==null&&(this._stack=a);return a}finally{Xa=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new L(function(d,e){var f=setTimeout(function(){return e(new E.Timeout(b))},a);c.then(d,e)[\"finally\"](clearTimeout.bind(null,f))}):this}});typeof Symbol!==\"undefined\"&&Symbol.toStringTag&&o(L.prototype,Symbol.toStringTag,\"Dexie.Promise\");I.env=Gb();function hb(a,b,c,d,e){this.onFulfilled=typeof a===\"function\"?a:null,this.onRejected=typeof b===\"function\"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(L,{all:function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return L.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof L)return a;if(a&&typeof a.then===\"function\")return new L(function(b,c){a.then(b,c)});var b=new L(Na,!0,a);ob(b,cb);return b},reject:wb,race:function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.map(function(a){return L.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return Ab}},newPSD:O,usePSD:Hb,scheduler:{get:function(){return Za},set:function(a){Za=a}},rejectionMapper:{get:function(){return db},set:function(a){db=a}},follow:function(a,b){return new L(function(c,d){return O(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=G(function(){var a=this;tb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Va&&(Va.allSettled&&o(L,\"allSettled\",function(){var a=A.apply(null,arguments).map(Db);return new L(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return L.resolve(a).then(function(a){return d[e]={status:\"fulfilled\",value:a}},function(a){return d[e]={status:\"rejected\",reason:a}}).then(function(){return--c||b(d)})})})}),Va.any&&typeof AggregateError!==\"undefined\"&&o(L,\"any\",function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return L.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function ib(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError(\"A promise cannot be resolved with itself.\");var c=a._lib&&qb();b&&typeof b.then===\"function\"?ib(a,function(a,c){b instanceof L?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,kb(a));c&&rb()},jb.bind(null,a))}catch(b){jb(a,b)}}function jb(a,b){bb.push(b);if(a._state!==null)return;var c=a._lib&&qb();b=db(b);a._state=!1;a._value=b;B&&b!==null&&typeof b===\"object\"&&!b._promise&&ca(function(){var c=r(b,\"stack\");b._promise=a;o(b,\"stack\",{get:function(){return Xa?c&&(c.get?c.get.apply(b):c.value):a.stack}})});ub(a);kb(a);c&&rb()}function kb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)lb(a,b[c]);c=a._PSD;--c.ref||c.finalize();K===0&&(++K,Za(function(){--K===0&&sb()},[]))}function lb(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++K;Za(mb,[c,a,b])}function mb(a,b,c){try{cb=b;var d,e=b._value;b._state?d=a(e):(bb.length&&(bb=[]),d=a(e),bb.indexOf(e)===-1&&vb(b));c.resolve(d)}catch(a){c.reject(a)}finally{cb=null,--K===0&&sb(),--c.psd.ref||c.psd.finalize()}}function nb(a,b,c){if(b.length===c)return b;var d=\"\";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||\"Error\",g=e.message||e,d=wa(e,0)):(f=e,g=\"\");b.push(f+(g?\": \"+g:\"\")+d)}B&&(d=wa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&nb(a._prev,b,c));return b}function ob(a,b){var c=b?b._numPrev+1:0;c<Oa&&(a._prev=b,a._numPrev=c)}function pb(){qb()&&rb()}function qb(){var a=$a;$a=!1;ab=!1;return a}function rb(){var a,b,c;do while(eb.length>0){a=eb;eb=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(eb.length>0);$a=!0;ab=!0}function sb(){var a=H;H=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=fb.slice(0);var b=a.length;while(b)a[--b]()}function tb(a){function b(){a(),fb.splice(fb.indexOf(b),1)}fb.push(b);++K;Za(function(){--K===0&&sb()},[])}function ub(a){H.some(function(b){return b._value===a._value})||H.push(a)}function vb(a){var b=H.length;while(b)if(H[--b]._value===a._value){H.splice(b,1);return}}function wb(a){return new L(Na,!1,a)}function M(a,b){var c=J;return function(){var d=qb(),e=J;try{Q(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{Q(e,!1),d&&rb()}}}var N={awaits:0,echoes:0,id:0},xb=0,yb=[],zb=0,Ab=0,Bb=0;function O(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++Bb;var g=I.env;f.env=Wa?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject,nthen:Kb(g.nthen,f),gthen:Kb(g.gthen,f)}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};g=Hb(f,b,c,d);f.ref===0&&f.finalize();return g}function Cb(){N.id||(N.id=++xb);++N.awaits;N.echoes+=Qa;return N.id}function P(){if(!N.awaits)return!1;--N.awaits===0&&(N.id=0);N.echoes=N.awaits*Qa;return!0}(\"\"+Ua).indexOf(\"[native code]\")===-1&&(Cb=P=F);function Db(a){if(N.echoes&&a&&a.constructor===Va){Cb();return a.then(function(a){P();return a},function(a){P();return R(a)})}return a}function Eb(a){++Ab,(!N.echoes||--N.echoes===0)&&(N.echoes=N.id=0),yb.push(J),Q(a,!0)}function Fb(){var a=yb[yb.length-1];yb.pop();Q(a,!1)}function Q(a,b){var c=J;(b?N.echoes&&(!zb++||a!==J):zb&&(!--zb||a!==J))&&Ib(b?Eb.bind(null,a):Fb);if(a===J)return;J=a;c===I&&(I.env=Gb());if(Wa){b=I.env.Promise;var d=a.env;Sa.then=d.nthen;b.prototype.then=d.gthen;(c.global||a.global)&&(Object.defineProperty(f,\"Promise\",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function Gb(){var a=f.Promise;return Wa?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(f,\"Promise\"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Sa.then,gthen:a.prototype.then}:{}}function Hb(a,b,c,d,e){var f=J;try{Q(a,!0);return b(c,d,e)}finally{Q(f,!1)}}function Ib(a){Ua.call(Ra,a)}function Jb(a,b,c,d){return typeof a!==\"function\"?a:function(){var e=J;c&&Cb();Q(b,!0);try{return a.apply(this,arguments)}finally{Q(e,!1),d&&Ib(P)}}}function Kb(a,b){return function(c,d){return a.call(this,Jb(c,b),Jb(d,b))}}var R=L.reject;function Lb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return R(new E.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._options.autoOpen)return R(new E.DatabaseClosed());a.open()[\"catch\"](F)}return a._state.dbReadyPromise.then(function(){return Lb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===Ca.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return Lb(a,b,c,d)})}return R(e)}return e._promise(b,function(a,b){return O(function(){J.trans=e;return d(a,b,e)})}).then(function(a){if(b===\"readwrite\")try{e.idbtrans.commit()}catch(a){}return b===\"readonly\"?a:e._completion.then(function(){return a})})}}y=\"4.0.1-alpha.22\";var Mb=String.fromCharCode(65535),Nb=-Infinity,S=\"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\",Ob=\"String expected.\",Pb=[],Qb=typeof navigator!==\"undefined\"&&\/(MSIE|Trident|Edge)\/.test(navigator.userAgent),Rb=Qb,Sb=Qb,Tb=function(a){return!\/(dexie\\.js|dexie\\.min\\.js)\/.test(a)},Ub=\"__dbnames\",Vb=\"readonly\",Wb=\"readwrite\";function Xb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Yb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Zb(a){return typeof a===\"string\"&&!\/\\.\/.test(a)?function(b){b[a]===void 0&&a in b&&(b=z(b),delete b[a]);return b}:function(a){return a}}function $b(){throw E.Type()}function T(a,b){try{var c=cc(a),d=cc(b);if(c!==d){if(c===\"Array\")return 1;if(d===\"Array\")return-1;if(c===\"binary\")return 1;if(d===\"binary\")return-1;if(c===\"string\")return 1;if(d===\"string\")return-1;if(c===\"Date\")return 1;return d!==\"Date\"?NaN:-1}switch(c){case\"number\":case\"Date\":case\"string\":return a>b?1:a<b?-1:0;case\"binary\":return bc(dc(a),dc(b));case\"Array\":return ac(a,b)}}catch(a){}return NaN}function ac(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=T(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function bc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function cc(a){var b=typeof a;if(b!==\"object\")return b;if(ArrayBuffer.isView(a))return\"binary\";b=na(a);return b===\"ArrayBuffer\"?\"binary\":b}function dc(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var ec=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||J.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new E.NotFound(\"Table \"+e+\" not part of transaction\");return b(a.idbtrans,a)}var g=qb();try{return d&&d.db===this.db?d===J.trans?d._promise(a,f,c):O(function(){return d._promise(a,f,c)},{trans:d,transless:J.transless||J}):Lb(this.db,a,[this.name],f)}finally{g&&rb()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans(\"readonly\",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a===\"string\")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,\"[\".concat(a.join(\"+\"),\"]\"));var b=g(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})){for(var c=0;c<b.length;++c)if(b.indexOf(a.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==Mb){var d=c.keyPath.slice(0,b.length);return this.where(d).equals(d.map(function(b){return a[b]}))}!c&&B&&!1;var e=this.schema.idxByName,f=this.db._deps.indexedDB;function i(a,b){return f.cmp(a,b)===0}d=b.reduce(function(b,c){var d=b[0];b=b[1];var f=e[c],g=a[c];return[d||f,d||!f?Xb(b,f&&f.multi?function(a){a=w(a,c);return h(a)&&a.some(function(a){return i(g,a)})}:function(a){return i(g,w(a,c))}):b]},[null,null]);var j=d[0];d=d[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(d):c?this.filter(d):this.where(b).equals(\"\")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?\"[\".concat(a.join(\"+\"),\"]\"):a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){var b=this,d=b.db,e=b.name;this.schema.mappedClass=a;a.prototype instanceof $b&&(a=function(a){c(b,a);function b(){return a!==null&&a.apply(this,arguments)||this}Object.defineProperty(b.prototype,\"db\",{get:function(){return d},enumerable:!1,configurable:!0});b.prototype.table=function(){return e};return b}(a));var f=new Set();for(b=a.prototype;b;b=j(b))Object.getOwnPropertyNames(b).forEach(function(a){return f.add(a)});b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(!f.has(d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook(\"reading\",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Zb(f)(a));return this._trans(\"readwrite\",function(a){return c.core.mutate({trans:a,type:\"add\",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a===\"object\"&&!h(a)){var c=w(a,this.schema.primKey.keyPath);return c===void 0?R(new E.InvalidArgument(\"Given object does not contain its primary key\")):this.where(\":id\").equals(c).modify(b)}else return this.where(\":id\").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Zb(f)(a));return this._trans(\"readwrite\",function(a){return c.core.mutate({trans:a,type:\"put\",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype[\"delete\"]=function(a){var b=this;return this._trans(\"readwrite\",function(c){return b.core.mutate({trans:c,type:\"delete\",keys:[a]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans(\"readwrite\",function(b){return a.core.mutate({trans:b,type:\"deleteRange\",range:Yb})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans(\"readonly\",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans(\"readwrite\",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new E.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");if(a&&a.length!==b.length)throw new E.InvalidArgument(\"Arguments objects and keys must have the same length\");var h=b.length;g=d&&g?b.map(Zb(d)):b;return e.core.mutate({trans:c,type:\"add\",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new Ba(\"\".concat(e.name,\".bulkAdd(): \").concat(b,\" of \").concat(h,\" operations failed\"),a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans(\"readwrite\",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new E.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");if(a&&a.length!==b.length)throw new E.InvalidArgument(\"Arguments objects and keys must have the same length\");var h=b.length;g=d&&g?b.map(Zb(d)):b;return e.core.mutate({trans:c,type:\"put\",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new Ba(\"\".concat(e.name,\".bulkPut(): \").concat(b,\" of \").concat(h,\" operations failed\"),a)})})};a.prototype.bulkUpdate=function(b){var c=this,d=this.core,a=b.map(function(a){return a.key}),e=b.map(function(a){return a.changes}),f=[];return this._trans(\"readwrite\",function(g){return d.getMany({trans:g,keys:a,cache:\"clone\"}).then(function(h){var i=[],j=[];b.forEach(function(a,b){var d=a.key;a=a.changes;var e=h[b];if(e){for(var g=0,k=Object.keys(a);g<k.length;g++){var l=k[g],m=a[l];if(l===c.schema.primKey.keyPath){if(T(m,d)!==0)throw new E.Constraint(\"Cannot update primary key in bulkUpdate()\")}else x(e,l,m)}f.push(b);i.push(d);j.push(e)}});var k=i.length;return d.mutate({trans:g,type:\"put\",keys:i,values:j,updates:{keys:a,changeSpecs:e}}).then(function(a){var b=a.numFailures;a=a.failures;if(b===0)return k;for(var d=0,e=Object.keys(a);d<e.length;d++){var g=e[d],h=f[Number(g)];if(h!=null){var i=a[g];delete a[g];a[h]=i}}throw new Ba(\"\".concat(c.name,\".bulkUpdate(): \").concat(b,\" of \").concat(k,\" operations failed\"),a)})})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans(\"readwrite\",function(c){return b.core.mutate({trans:c,type:\"delete\",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new Ba(\"\".concat(b.name,\".bulkDelete(): \").concat(d,\" of \").concat(c,\" operations failed\"),a)})};return a}();function fc(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d===\"string\")return b[d]};c.addEventType=f;for(var d=1,e=arguments.length;d<e;++d)f(arguments[d]);return c;function f(a,d,e){if(typeof a===\"object\")return i(a);d||(d=La);e||(e=F);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){g(a).forEach(function(b){var c=a[b];if(h(c))f(b,a[b][0],a[b][1]);else if(c===\"asap\")var d=f(b,Ga,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){aa(function(){a.apply(null,b)})})});else throw new E.InvalidArgument(\"Invalid event config\")})}}function gc(a,b){p(b).from({prototype:a});return b}function hc(a){return gc(ec.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:fc(null,{creating:[Ia,F],reading:[Ha,Ga],updating:[Ka,F],deleting:[Ja,F]})})}function ic(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function jc(a,b){a.filter=Xb(a.filter,b)}function kc(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Xb(d(),b())}:b;a.justLimit=c&&!d}function lc(a,b){a.isMatch=Xb(a.isMatch,b)}function mc(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new E.Schema(\"KeyPath \"+a.index+\" on object store \"+b.name+\" is not indexed\");return c}function nc(a,b,c){var d=mc(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir===\"prev\",unique:!!a.unique,query:{index:d,range:a.range}})}function oc(a,b,c,d){var e=a.replayFilter?Xb(a.filter,a.replayFilter()):a.filter;if(!a.or)return pc(nc(a,d,c),Xb(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=\"\"+g;h===\"[object ArrayBuffer]\"&&(h=\"\"+new Uint8Array(g));l(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),pc(nc(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function pc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=M(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a[\"continue\"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=F},function(b){a.fail(b),c=F}))&&f(a.value,a,function(a){return c=a});c()})})}var qc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,R.bind(null,c.error)):c.table._trans(\"readonly\",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,R.bind(null,b.error)):b.table._trans(\"readwrite\",a,\"locked\")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Xb(b.algorithm,a)};a.prototype._iterate=function(a,b){return oc(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return oc(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(ic(c,!0))return d.count({trans:a,query:{index:mc(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return oc(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(\".\").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir===\"next\"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir===\"next\"&&ic(c,!0)&&c.limit>0){var d=c.valueMapper,e=mc(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return oc(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;ic(b)?kc(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):kc(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);kc(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){jc(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){jc(this._ctx,function(b){return a(b.value)});lc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir===\"prev\"?\"next\":\"prev\";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique=\"unique\";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir===\"next\"&&ic(b,!0)&&b.limit>0)return this._read(function(a){var c=mc(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique=\"unique\";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};jc(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var e;if(typeof a===\"function\")e=a;else{var f=g(a),h=f.length;e=function(b){var c=!1;for(var d=0;d<h;++d){var e=f[d],g=a[e];w(b,e)!==g&&(x(b,e,g),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(a=0,b=g(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var f=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:\"immutable\"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:z(t),primKey:b[g+s]};e.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&T(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=ic(c)&&c.limit===Infinity&&(typeof a!==\"function\"||a===rc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:\"add\",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a===\"object\")&&i.mutate({trans:d,type:\"put\",keys:p,values:o,criteria:v,changeSpec:typeof a!==\"function\"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===rc)&&i.mutate({trans:d,type:\"delete\",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&f(g+m)})})};return f(0).then(function(){if(n.length>0)throw new Aa(\"Error modifying one or more objects\",n,o,p);return b.length})})})};a.prototype[\"delete\"]=function(){var a=this._ctx,b=a.range;return ic(a)&&(a.isPrimKey&&!Sb||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:\"deleteRange\",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new Aa(\"Could not delete some values\",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(rc)};return a}(),rc=function(a,b){return b.value=null};function sc(a){return gc(qc.prototype,function(b,c){this.db=a;var d=Yb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:\"next\",unique:\"\",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ga?f:null}})}function tc(a,b){return a<b?-1:a===b?0:1}function uc(a,b){return a>b?-1:a===b?0:1}function U(a,b,c){a=a instanceof Bc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function vc(a){return new a.Collection(a,function(){return Ac(\"\")}).limit(0)}function wc(a){return a===\"next\"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function xc(a){return a===\"next\"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function yc(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f===\"next\")return b+d.substr(b.length);return g<b.length&&f===\"prev\"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function zc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a===\"string\"}))return U(a,Ob);function m(a){e=wc(a);f=xc(a);g=a===\"next\"?tc:uc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a===\"next\"?\"\":d}m(\"next\");a=new a.Collection(a,function(){return V(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!==\"string\")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=yc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a[\"continue\"](o+k)}):c(d);return!1}});return a}function V(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function Ac(a){return{type:1,lower:a,upper:a}}var Bc=function(){function a(){}Object.defineProperty(a.prototype,\"Collection\",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?vc(this):new this.Collection(this,function(){return V(a,b,!c,!d)})}catch(a){return U(this,S)}};a.prototype.equals=function(a){return a==null?U(this,S):new this.Collection(this,function(){return Ac(a)})};a.prototype.above=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!1)})};a.prototype.below=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!==\"string\"?U(this,Ob):this.between(a,a+Mb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===\"\"?this.startsWith(a):zc(this,function(a,b){return a.indexOf(b[0])===0},[a],Mb)};a.prototype.equalsIgnoreCase=function(a){return zc(this,function(a,b){return a===b[0]},[a],\"\")};a.prototype.anyOfIgnoreCase=function(){var a=A.apply(ra,arguments);return a.length===0?vc(this):zc(this,function(a,b){return b.indexOf(a)!==-1},a,\"\")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=A.apply(ra,arguments);return a.length===0?vc(this):zc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Mb)};a.prototype.anyOf=function(){var a=this,b=A.apply(ra,arguments),c=this._cmp;try{b.sort(c)}catch(a){return U(this,S)}if(b.length===0)return vc(this);var d=new this.Collection(this,function(){return V(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d===\"next\"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a[\"continue\"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Nb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=A.apply(ra,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return U(this,S)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Nb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return vc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return U(this,\"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\",E.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return U(this,S)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return V(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a===\"next\"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a[\"continue\"](n[o][0]):a[\"continue\"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=A.apply(ra,arguments);if(!a.every(function(a){return typeof a===\"string\"}))return U(this,\"startsWithAnyOf() only works with strings\");return a.length===0?vc(this):this.inAnyRange(a.map(function(a){return[a,a+Mb]}))};return a}();function Cc(a){return gc(Bc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===\":id\"?null:c,or:d};this._cmp=this._ascending=T;this._descending=function(a,b){return T(b,a)};this._max=function(a,b){return T(a,b)>0?a:b};this._min=function(a,b){return T(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange;if(!this._IDBKeyRange)throw new E.MissingAPI()})}function W(a){return M(function(b){Dc(b);a(b.target.error);return!1})}function Dc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Ec=\"storagemutated\",X=\"x-storagemutated-1\",Y=fc(null,Ec),Fc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Hb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case\"DatabaseClosedError\":throw new E.DatabaseClosed(d);case\"MissingAPIError\":throw new E.MissingAPI(d.message,d);default:throw new E.OpenFailed(d)}if(!this.active)throw new E.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=M(function(c){Dc(c),b._reject(a.error)});a.onabort=M(function(c){Dc(c),b.active&&b._reject(new E.Abort(a.error)),b.active=!1,b.on(\"abort\").fire(c)});a.oncomplete=M(function(){b.active=!1,b._resolve(),\"mutatedParts\"in a&&Y.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a===\"readwrite\"&&this.mode!==\"readwrite\")return R(new E.ReadOnly(\"Transaction is readonly\"));if(!this.active)return R(new E.TransactionInactive());if(this._locked())return new L(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return O(function(){var a=new L(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a[\"finally\"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new L(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=L.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new L(function(a,d){c.then(function(c){return b._waitingQueue.push(M(a.bind(null,c)))},function(a){return b._waitingQueue.push(M(d.bind(null,a)))})[\"finally\"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new E.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new E.NotFound(\"Table \"+a+\" not part of transaction\");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function Gc(a){return gc(Fc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=fc(this,\"complete\",\"error\",\"abort\");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new L(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return R(a)})})}function Hc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?\"&\":\"\")+(d?\"*\":\"\")+(e?\"++\":\"\")+Ic(b)}}function Ic(a){return typeof a===\"string\"?a:a?\"[\"+[].join.call(a,\"+\")+\"]\":\"\"}function Jc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:ba(c,function(a){return[a.name,a]})}}function Kc(a){return a.length===1?a[0]:a}var Lc=function(a){try{a.only([[]]);Lc=function(){return[[]]};return[[]]}catch(a){Lc=function(){return Mb};return Mb}};function Mc(a){if(a==null)return function(){return void 0};else if(typeof a===\"string\")return Nc(a);else return function(b){return w(b,a)}}function Nc(a){var b=a.split(\".\");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function Oc(a){return[].slice.call(a)}var Pc=0;function Qc(a){return a==null?\":id\":typeof a===\"string\"?a:\"[\".concat(a.join(\"+\"),\"]\")}function Rc(a,b,c){function d(a,b){var c=Oc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Mc(b)},indexes:Oc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:Mc(b)};f[Qc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Qc(a)]}};f[\":id\"]=e.primaryKey;b!=null&&(f[Qc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&\"getAll\"in b.objectStore(c[0])&&!(typeof navigator!==\"undefined\"&&\/Safari\/.test(navigator.userAgent)&&!\/(Chrome\\\/|Edge\\\/)\/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(\/Safari\\\/(\\d*)\/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error(\"Cannot convert never type to IDBKeyRange\");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function f(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=M(d);i=f.objectStore(c);var j=i.keyPath==null,k=b===\"put\"||b===\"add\";if(!k&&b!==\"delete\"&&b!==\"deleteRange\")throw new Error(\"Invalid operation type: \"+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error(\"Given keys array must have same length as given values array.\");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,Dc(a)};if(b===\"deleteRange\"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i[\"delete\"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b===\"delete\"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=M(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?\"prevunique\":\"prev\":h?\"nextunique\":\"next\";var m=f||!(\"openKeyCursor\"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=W(i);m.onsuccess=M(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Pc;c.done=!1;var e=c[\"continue\"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error(\"Cursor not started\")};var h=function(){throw new Error(\"Cursor not stopped\")};c.trans=d;c.stop=c[\"continue\"]=c.continuePrimaryKey=c.advance=a;c.fail=M(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a[\"continue\"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=M(a),m.onerror=W(b),c.fail=b,c.stop=function(b){c.stop=c[\"continue\"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error(\"Cursor behind last entry\")},c.stop()};m.onsuccess=M(function(a){m.onsuccess=d,d()});c[\"continue\"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=M(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=W(g)}else{var m=0,n=i||!(\"openKeyCursor\"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a[\"continue\"]()};n.onerror=W(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=M(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=W(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=M(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=W(e)})},query:f(g),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=M(function(b){return a(b.target.result)});i.onerror=W(b)})}}}d=d(a,c);c=d.schema;var g=d.hasGetAll;d=c.tables.map(function(a){return f(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:\"dbcore\",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error(\"Table '\".concat(a,\"' not found\"));return i[a]},MIN_KEY:-Infinity,MAX_KEY:Lc(b),schema:c}}function Sc(a,b){return b.reduce(function(a,b){b=b.create;return d(d({},a),b(a))},a)}function Tc(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Sc(Rc(b,e,d),a.dbcore);return{dbcore:c}}function Uc(a,b){var c=a._novip;a=b.db;a=Tc(c._middlewares,a,c._deps,b);c.core=a.dbcore;c.tables.forEach(function(a){var b=a.name;c.core.schema.tables.some(function(a){return a.name===b})&&(a.core=c.core.table(b),c[b]instanceof c.Table&&(c[b].core=a.core))})}function Vc(a,b,c,d){var e=a._novip;c.forEach(function(a){var c=d[a];b.forEach(function(b){var d=r(b,a);(!d||\"value\"in d&&d.value===void 0)&&(b===e.Transaction.prototype||b instanceof e.Transaction?o(b,a,{get:function(){return this.table(a)},set:function(b){n(this,a,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new e.Table(a,c))})})}function Wc(a,b){var c=a._novip;b.forEach(function(a){for(var b in a)a[b]instanceof c.Table&&delete a[b]})}function Xc(a,b){return a._cfg.version-b._cfg.version}function Yc(a,b,c,d){var e=a._dbSchema,f=a._createTransaction(\"readwrite\",a._storeNames,e);f.create(c);f._completion[\"catch\"](d);var h=f._reject.bind(f),i=J.transless||J;O(function(){J.trans=f,J.transless=i,b===0?(g(e).forEach(function(a){ad(c,a,e[a].primKey,e[a].indexes)}),Uc(a,c),L.follow(function(){return a.on.populate.fire(f)})[\"catch\"](h)):Zc(a,b,f,c)[\"catch\"](h)})}function Zc(a,b,c,d){var e=a._novip,f=[];a=e._versions;var h=e._dbSchema=ed(e,e.idbdb,d),i=!1;a=a.filter(function(a){return a._cfg.version>=b});a.forEach(function(a){f.push(function(){var f=h,j=a._cfg.dbschema;hd(e,f,d);hd(e,j,d);h=e._dbSchema=j;var k=$c(f,j);k.add.forEach(function(a){ad(d,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new E.Upgrade(\"Not yet support for changing primary key\");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return dd(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),dd(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>b){Uc(e,d);c._memoizedTables={};i=!0;var m=ea(j);k.del.forEach(function(a){m[a]=f[a]});Wc(e,[e.Transaction.prototype]);Vc(e,[e.Transaction.prototype],g(m),m);c.schema=m;var n=sa(l);n&&Cb();var o;j=L.follow(function(){o=l(c);if(o&&n){var a=P.bind(null,null);o.then(a,a)}});return o&&typeof o.then===\"function\"?L.resolve(o):j.then(function(){return o})}}),f.push(function(b){if(!i||!Rb){var d=a._cfg.dbschema;cd(d,b)}Wc(e,[e.Transaction.prototype]);Vc(e,[e.Transaction.prototype],e._storeNames,e._dbSchema);c.schema=e._dbSchema})});function j(){return f.length?L.resolve(f.shift()(c.idbtrans)).then(j):L.resolve()}return j().then(function(){bd(h,d)})}function $c(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(\"\"+(e.primKey.keyPath||\"\")!==\"\"+(f.primKey.keyPath||\"\")||e.primKey.auto!==f.primKey.auto&&!Qb)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function ad(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return dd(e,a)});return e}function bd(a,b){g(a).forEach(function(c){b.db.objectStoreNames.contains(c)||ad(b,c,a[c].primKey,a[c].indexes)})}function cd(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function dd(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function ed(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=Hc(Ic(e),e||\"\",!1,!1,!!b.autoIncrement,e&&typeof e!==\"string\",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=Hc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!==\"string\",!1);g.push(i)}d[a]=Jc(a,f,g)});return d}function fd(a,b,c){a=a._novip;a.verno=b.version\/10;c=a._dbSchema=ed(a,b,c);a._storeNames=t(b.objectStoreNames,0);Vc(a,[a._allTables],g(c),c)}function gd(a,b){b=ed(a,a.idbdb,b);b=$c(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function hd(a,b,c){a=a._novip;var d=c.db.objectStoreNames;for(var e=0;e<d.length;++e){var g=d[e],h=c.objectStore(g);a._hasGetAll=\"getAll\"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k===\"string\"?k:\"[\"+t(k).join(\"+\")+\"]\";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!==\"undefined\"&&\/Safari\/.test(navigator.userAgent)&&!\/(Chrome\\\/|Edge\\\/)\/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(\/Safari\\\/(\\d*)\/))[1]<604&&(a._hasGetAll=!1)}function id(a){return a.split(\",\").map(function(a,b){a=a.trim();var c=a.replace(\/([&*]|\\+\\+)\/g,\"\"),d=\/^\\[\/.test(c)?c.match(\/^\\[(.*)\\]$\/)[1].split(\"+\"):c;return Hc(c,d||null,\/\\&\/.test(a),\/\\*\/.test(a),\/\\+\\+\/.test(a),h(d),b===0)})}var jd=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){g(a).forEach(function(c){if(a[c]!==null){var d=id(a[c]),e=d.shift();if(e.multi)throw new E.Schema(\"Primary key cannot be multi-valued\");d.forEach(function(a){if(a.auto)throw new E.Schema(\"Only primary key can be marked as autoIncrement (++)\");if(!a.keyPath)throw new E.Schema(\"Index must have a name and cannot be an empty string\")});b[c]=Jc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Wc(b,[b._allTables,b,b.Transaction.prototype]);Vc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],g(d),d);b._storeNames=g(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ma(this._cfg.contentUpgrade||F,a);return this};return a}();function kd(a){return gc(jd.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ld(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new je(Ub,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:\"name\"}));return c.table(\"dbnames\")}function md(a){return a&&typeof a.databases===\"function\"}function nd(a){var b=a.indexedDB;a=a.IDBKeyRange;return md(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Ub})}):ld(b,a).toCollection().primaryKeys()}function od(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!md(c)&&b!==Ub&&ld(c,a).put({name:b})[\"catch\"](F)}function pd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!md(c)&&b!==Ub&&ld(c,a)[\"delete\"](b)[\"catch\"](F)}function qd(a){return O(function(){J.letThrough=!0;return a()})}function rd(){var a=!navigator.userAgentData&&\/Safari\\\/\/.test(navigator.userAgent)&&!\/Chrom(e|ium)\\\/\/.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()[\"finally\"](a)};b=setInterval(c,100);c()})[\"finally\"](function(){return clearInterval(b)})}function sd(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?R(b.dbOpenError):a});B&&(b.openCanceller._stackHolder=C());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller;function e(){if(b.openCanceller!==d)throw new E.DatabaseClosed(\"db.open() was cancelled\")}var f=b.dbReadyResolve,g=null,h=!1;return L.race([d,(typeof navigator===\"undefined\"?L.resolve():rd()).then(function(){return new L(function(d,f){e();if(!c)throw new E.MissingAPI();var i=a.name,j=b.autoSchema?c.open(i):c.open(i,Math.round(a.verno*10));if(!j)throw new E.MissingAPI();j.onerror=W(f);j.onblocked=M(a._fireOnBlocked);j.onupgradeneeded=M(function(d){g=j.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){j.onerror=Dc;g.abort();j.result.close();var e=c.deleteDatabase(i);e.onsuccess=e.onerror=M(function(){f(new E.NoSuchDatabase(\"Database \".concat(i,\" doesnt exist\")))})}else{g.onerror=W(f);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;h=e<1;a._novip.idbdb=j.result;Yc(a,e\/10,g,f)}},f);j.onsuccess=M(function(){g=null;var c=a._novip.idbdb=j.result,e=t(c.objectStoreNames);if(e.length>0)try{e=c.transaction(Kc(e),\"readonly\");b.autoSchema?fd(a,c,e):(hd(a,a._dbSchema,e),!gd(a,e));Uc(a,e)}catch(a){}Pb.push(a);c.onversionchange=M(function(c){b.vcFired=!0,a.on(\"versionchange\").fire(c)});c.onclose=M(function(b){a.on(\"close\").fire(b)});h&&od(a._deps,i);d()},f)})})]).then(function(){e();b.onReadyBeingFired=[];return L.resolve(qd(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ma,F);b.onReadyBeingFired=[];return L.resolve(qd(function(){return d(a.vip)})).then(c)}})})[\"finally\"](function(){b.onReadyBeingFired=null,b.isBeingOpened=!1}).then(function(){return a})[\"catch\"](function(c){b.dbOpenError=c;try{g&&g.abort()}catch(a){}d===b.openCanceller&&a._close();return R(c)})[\"finally\"](function(){b.openComplete=!0,f()})}function td(a){var b=function(b){return a.next(b)},c=function(b){return a[\"throw\"](b)},d=f(b),e=f(c);function f(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!==\"function\"?h(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return f(b)()}function ud(a,b,c){var d=arguments.length;if(d<2)throw new E.InvalidArgument(\"Too few arguments\");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=ga(e);return[a,f,c]}function vd(a,b,c,d,e){return L.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);g.explicit=!0;f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),a._state.PR1398_maxLoop=3}catch(d){if(d.name===Ca.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return vd(a,b,c,null,e)})}return R(d)}var h=sa(e);h&&Cb();var i;f=L.follow(function(){i=e.call(g,g);if(i)if(h){var a=P.bind(null,null);i.then(a,a)}else typeof i.next===\"function\"&&typeof i[\"throw\"]===\"function\"&&(i=td(i))},f);return(i&&typeof i.then===\"function\"?L.resolve(i).then(function(a){return g.active?a:R(new E.PrematureCommit(\"Transaction committed too early. See http:\/\/bit.ly\/2kdckMn\"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})[\"catch\"](function(a){g._reject(a);return R(a)})})}function wd(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function xd(a){return d(d({},a),{table:function(b){var c=a.table(b);b=c.schema;var e={},f=[];function g(a,b,c){var h=Qc(a),i=e[h]=e[h]||[],j=a==null?0:typeof a===\"string\"?1:a.length,k=b>0;h=d(d({},c),{name:k?\"\".concat(h,\"(virtual-from:\").concat(c.name,\")\"):c.name,lowLevelIndex:c,isVirtual:k,keyTail:b,keyLength:j,extractKey:Mc(a),unique:!k&&c.unique});i.push(h);h.isPrimaryKey||f.push(h);if(j>1){k=j===2?a[0]:a.slice(0,j-1);g(k,b+1,c)}i.sort(function(a,b){return a.keyTail-b.keyTail});return h}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[\":id\"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Qc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:wd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:wd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?d(d({},b),{query:{index:a.lowLevelIndex,range:m(b.query.range,a.keyTail)}}):b}k=d(d({},c),{schema:d(d({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return c.count(n(a))},query:function(a){return c.query(n(a))},openCursor:function(d){var b=d.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return c.openCursor(d);function h(b){function c(c){c!=null?b[\"continue\"](wd(c,d.reverse?a.MAX_KEY:a.MIN_KEY,e)):d.unique?b[\"continue\"](b.key.slice(0,g).concat(d.reverse?a.MIN_KEY:a.MAX_KEY,e)):b[\"continue\"]()}c=Object.create(b,{\"continue\":{value:c},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(wd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return c}return c.openCursor(n(d)).then(function(a){return a&&h(a)})}});return k}})}var yd={stack:\"dbcore\",name:\"VirtualIndexMiddleware\",level:1,create:xd};function zd(a,b,c,d){c=c||{};d=d||\"\";g(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f===\"object\"&&typeof g===\"object\"&&f&&g){var h=na(f),i=na(g);h!==i?c[d+e]=b[e]:h===\"Object\"?zd(f,g,c,d+e+\".\"):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});g(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function Ad(a,b){return b.type===\"delete\"?b.keys:b.keys||b.values.map(a.extractKey)}var Bd={stack:\"dbcore\",name:\"HooksMiddleware\",level:2,create:function(a){return d(d({},a),{table:function(b){var c=a.table(b),f=c.schema.primaryKey,g=d(d({},c),{mutate:function(a){var g=J.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,k=h.updating;switch(a.type){case\"add\":if(j.fire===F)break;return g._promise(\"readwrite\",function(){return m(a)},!0);case\"put\":if(j.fire===F&&k.fire===F)break;return g._promise(\"readwrite\",function(){return m(a)},!0);case\"delete\":if(i.fire===F)break;return g._promise(\"readwrite\",function(){return m(a)},!0);case\"deleteRange\":if(i.fire===F)break;return g._promise(\"readwrite\",function(){return n(a)},!0)}return c.mutate(a);function m(b){var g=J.trans,a=b.keys||Ad(f,b);if(!a)throw new Error(\"Keys missing\");b=b.type===\"add\"||b.type===\"put\"?d(d({},b),{keys:a}):d({},b);b.type!==\"delete\"&&(b.values=e([],b.values,!0));b.keys&&(b.keys=e([],b.keys,!0));return Cd(c,b,a).then(function(d){var e=a.map(function(a,c){var e=d[c],h={onerror:null,onsuccess:null};if(b.type===\"delete\")i.fire.call(h,a,e,g);else if(b.type===\"add\"||e===void 0){var m=j.fire.call(h,a,b.values[c],g);a==null&&m!=null&&(a=m,b.keys[c]=a,f.outbound||x(b.values[c],f.keyPath,a))}else{m=zd(e,b.values[c]);var n=k.fire.call(h,m,a,e,g);if(n){var o=b.values[c];Object.keys(n).forEach(function(a){l(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return c.mutate(b).then(function(c){var f=c.failures,g=c.results,h=c.numFailures;c=c.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=e[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(b.type===\"put\"&&d[i]?b.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:c}})[\"catch\"](function(a){e.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,b,e){return c.query({trans:a,values:!1,query:{index:f,range:b},limit:e}).then(function(c){var f=c.result;return m({type:\"delete\",keys:f,trans:a}).then(function(c){if(c.numFailures>0)return Promise.reject(c.failures[0]);if(f.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,d(d({},b),{lower:f[f.length-1],lowerOpen:!0}),e)})})}}});return g}})}};function Cd(a,b,c){return b.type===\"add\"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:\"immutable\"})}function Dd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(T(b.keys[e],a[f])!==0)continue;d.push(c?z(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Ed={stack:\"dbcore\",level:-1,create:function(a){return{table:function(b){var c=a.table(b);return d(d({},c),{getMany:function(a){if(!a.cache)return c.getMany(a);var b=Dd(a.keys,a.trans._cache,a.cache===\"clone\");return b?L.resolve(b):c.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache===\"clone\"?z(b):b};return b})},mutate:function(a){a.type!==\"add\"&&(a.trans._cache=null);return c.mutate(a)}})}}}};function Fd(a){return!(\"from\"in a)}var Z=function(a,b){if(this)i(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new Z();a&&\"d\"in a&&i(c,a);return c}};m(Z.prototype,(xd={add:function(a){Hd(this,a);return this},addKey:function(a){Gd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return Gd(b,a,a)});return this}},xd[oa]=function(){return Jd(this)},xd));function Gd(a,b,c){var d=T(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(Fd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(T(c,a.from)<0){d?Gd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return Kd(a)}if(T(b,a.to)>0){e?Gd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return Kd(a)}T(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);T(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&Hd(a,d);e&&b&&Hd(a,e)}function Hd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;Gd(a,d,e);f&&c(a,f);b&&c(a,b)}Fd(b)||c(a,b)}function Id(a,b){b=Jd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=Jd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(T(f.from,d.to)<=0&&T(f.to,d.from)>=0)return!0;T(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function Jd(a){var b=Fd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&T(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||T(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Kd(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?\"r\":b<-1?\"l\":\"\";if(b){var c=b===\"r\"?\"l\":\"r\",e=d({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[c];a[c]=e;e.d=Ld(e)}a.d=Ld(a)}function Ld(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function Md(a,b){return a.trans.mode===\"readonly\"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!==\"disabled\"&&!b.schema.primaryKey.outbound}function Nd(a,b){switch(a){case\"query\":return b.values&&!b.unique;case\"get\":return!1;case\"getMany\":return!1;case\"count\":return!1;case\"openCursor\":return!1}}function Od(a,b){g(b).forEach(function(c){a[c]?Hd(a[c],b[c]):a[c]=ia(b[c])});return a}var Pd={stack:\"dbcore\",level:0,name:\"Observability\",create:function(a){var b=a.schema.name,c=new Z(a.MIN_KEY,a.MAX_KEY);return d(d({},a),{transaction:function(b,c,d){if(!J.subscr)return a.transaction(b,c,d);if(c!==\"readonly\")throw new E.ReadOnly(\"write transaction not allowed within liveQueries\");return a.transaction(b,c,d)},table:function(e){var f=a.table(e),i=f.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=d(d({},f),{mutate:function(g){var k=g.trans,l=g.mutatedParts||(g.mutatedParts={}),m=function(a){a=\"idb:\/\/\".concat(b,\"\/\").concat(e,\"\/\").concat(a);return l[a]||(l[a]=new Z())},n=m(\"\"),o=m(\":dels\"),d=g.type,p=g.type===\"deleteRange\"?[g.range]:g.type===\"delete\"?[g.keys]:g.values.length<50?[Ad(j,g).filter(function(a){return a}),g.values]:[],a=p[0];p=p[1];var q=g.trans._cache;if(h(a)){n.addKeys(a);q=d===\"delete\"||a.length===p.length?Dd(a,q):null;!q&&d!==\"add\"&&o.addKeys(a);(q||p)&&Qd(m,i,q,p)}else if(a){d={from:a.lower,to:a.upper};o.add(d);n.add(d)}else n.add(c),o.add(c),i.indexes.forEach(function(a){return m(a.name).add(c)});return f.mutate(g).then(function(b){a&&(g.type===\"add\"||g.type===\"put\")&&n.addKeys(b.results);k.mutatedParts=Od(k.mutatedParts||{},l);return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new Z((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new Z(a.key)]},getMany:function(a){return[j,new Z().addKeys(a.keys)]},count:n,query:n,openCursor:n};g(o).forEach(function(a){m[a]=function(g){var h=J.subscr,i=!!h,j=Md(J,f)&&Nd(a,g),m=j?g.obsSet={}:h;if(i){var n=function(a){a=\"idb:\/\/\".concat(b,\"\/\").concat(e,\"\/\").concat(a);return m[a]||(m[a]=new Z())},p=n(\"\"),q=n(\":dels\"),r=o[a](g),s=r[0],t=r[1];n(s.name||\"\").add(t);if(!s.isPrimaryKey)if(a===\"count\")q.add(c);else{var u=a===\"query\"&&l&&g.values&&f.query(d(d({},g),{values:!1}));return f[a].apply(this,arguments).then(function(b){if(a===\"query\"){if(l&&g.values)return u.then(function(a){a=a.result;p.addKeys(a);return b});var c=g.values?b.result.map(k):b.result;g.values?p.addKeys(c):q.addKeys(c)}else if(a===\"openCursor\"){var d=b,e=g.values;return d&&Object.create(d,{key:{get:function(){q.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;q.addKey(a);return a}},value:{get:function(){e&&p.addKey(d.primaryKey);return d.value}}})}return b})}}return f[a].apply(this,arguments)}});return m}})}};function Qd(a,b,c,d){function e(b){var e=a(b.name||\"\");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);T(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}function Rd(a,b){return b.lower===void 0?!0:b.lowerOpen?T(a,b.lower)>0:T(a,b.lower)>=0}function Sd(a,b){return b.upper===void 0?!0:b.upperOpen?T(a,b.upper)<0:T(a,b.upper)<=0}function Td(a,b){return Rd(a,b)&&Sd(a,b)}function Ud(a,b,c,d,e,f){if(!c||c.length===0)return a;var g=b.query.index;d=d.schema.primaryKey;var h=d.extractKey,i=g.extractKey,j=(g.lowLevelIndex||g).extractKey;d=c.reduce(function(a,c){var d=a,e=c.type===\"add\"||c.type===\"put\"?c.values.filter(function(a){return Td(i(a),b.query.range)}).map(function(a){a=z(a);f&&Object.freeze(a);return a}):[];switch(c.type){case\"add\":d=a.concat(b.values?e:e.map(function(a){return h(a)}));break;case\"put\":var g=new Z().addKeys(c.values.map(function(a){return h(a)}));d=a.filter(function(a){a=b.values?h(a):a;return!Id(new Z(a),g)}).concat(b.values?e:e.map(function(a){return h(a)}));break;case\"delete\":var j=new Z().addKeys(c.keys);d=a.filter(function(a){a=b.values?h(a):a;return!Id(new Z(a),j)});break;case\"deleteRange\":var k=c.range;d=a.filter(function(a){return!Td(h(a),k)});break}return d},a);if(d===a)return a;d.sort(function(a,b){return T(j(a),j(b))||T(h(a),h(b))});b.limit&&b.limit<Infinity&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0));return f?Object.freeze(d):d}var Vd={};function Wd(a,b){return T(a.lower,b.lower)===0&&T(a.upper,b.upper)===0&&!!a.lowerOpen===!!b.lowerOpen&&!!a.upperOpen===!!b.upperOpen}function Xd(a,b,c,d){if(a===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;a=T(a,b);if(a===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}function Yd(a,b,c,d){if(a===void 0)return b!==void 0?1:0;if(b===void 0)return-1;a=T(a,b);if(a===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}function Zd(a,b){return Xd(a.lower,b.lower,a.lowerOpen,b.lowerOpen)<=0&&Yd(a.upper,b.upper,a.upperOpen,b.upperOpen)>=0}function $d(b,c,a,d){b=Vd[\"idb:\/\/\".concat(b,\"\/\").concat(c)];if(!b)return[];c=b.queries[a];if(!c)return[null,!1,b,null];var e=d.query?d.query.index.name:null;c=c[e||\"\"];if(!c)return[null,!1,b,null];switch(a){case\"query\":e=c.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&Wd(a.req.query.range,d.query.range)});if(e)return[e,!0,b,c];a=c.find(function(a){var b=\"limit\"in a.req?a.req.limit:Infinity;return b>=d.limit&&(d.values?a.req.values:!0)&&Zd(a.req.query.range,d.query.range)});return[a,!1,b,c];case\"count\":e=c.find(function(a){return Wd(a.req.query.range,d.query.range)});return[e,!!e,b,c]}}function ae(a,b){return Object.keys(a).some(function(c){return b[c]&&Id(b[c],a[c])})}var be={},ce=!1;function de(a){Od(be,a),ce||(ce=!0,queueMicrotask(function(){ce=!1;var a=be;be={};ee(a)}))}function ee(a,b){b===void 0&&(b=!1);var c=new Set();for(var d in a){var e=\/^idb\\:\\\/\\\/(.*)\\\/(.*)\\\/\/.exec(d);if(e){var f=e[1];e=e[2];f=Vd[\"idb:\/\/\".concat(f,\"\/\").concat(e)];f&&fe(f,a,c,b)}}c.forEach(function(a){return a()})}function fe(a,b,c,d){var e=d&&[];for(var f=0,g=Object.entries(a.queries.query);f<g.length;f++){var h=g[f],i=h[0];h=h[1];var j=d&&[];for(var k=0,h=h;k<h.length;k++){var l=h[k];l.obsSet&&ae(b,l.obsSet)?l.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(l)}d&&e.push([i,j])}if(d)for(l=0,k=e;l<k.length;l++){h=k[l];var i=h[0],j=h[1];a.queries.query[i]=j}}function ge(a,b,c,d){a.subscribers.add(c),d.addEventListener(\"abort\",function(){a.subscribers[\"delete\"](c),a.subscribers.size===0&&he(a,b)})}function he(a,b){setTimeout(function(){a.subscribers.size===0&&qa(b,a)},3e3)}var ie={stack:\"dbcore\",level:0,name:\"Cache\",create:function(a){var b=a.schema.name,c=d(d({},a),{transaction:function(c,d,e){var f=a.transaction(c,d,e);if(d===\"readwrite\"){var g=new AbortController();e=g.signal;var h=function(e){return function(){g.abort();if(d===\"readwrite\"){var h=new Set();for(var i=0,j=c;i<j.length;i++){var k=j[i],l=Vd[\"idb:\/\/\".concat(b,\"\/\").concat(k)];k=a.table(k);if(l){var m=l.optimisticOps.filter(function(a){return a.trans===f});if(m.length>0){l.optimisticOps=l.optimisticOps.filter(function(a){return a.trans!==f});for(var n=0,l=Object.values(l.queries.query);n<l.length;n++){var o=l[n];for(var p=0,q=o.slice();p<q.length;p++){var r=q[p];if(r.res!=null&&f.mutatedParts)if(e&&!r.dirty){var s=Object.isFrozen(r.res);s=Ud(r.res,r.req,m,k,r,s);r.dirty?(qa(o,r),r.subscribers.forEach(function(a){return h.add(a)})):s!==r.res&&(r.res=s,r.promise=L.resolve({result:s}))}else r.dirty&&qa(o,r),r.subscribers.forEach(function(a){return h.add(a)})}}}}}h.forEach(function(a){return a()})}}};f.addEventListener(\"abort\",h(!1),{signal:e});f.addEventListener(\"error\",h(!1),{signal:e});f.addEventListener(\"complete\",h(!0),{signal:e})}return f},table:function(c){var e=a.table(c),f=e.schema.primaryKey,g=d(d({},e),{mutate:function(a){if(f.outbound||J.trans.db._options.cache===\"disabled\")return e.mutate(a);var g=Vd[\"idb:\/\/\".concat(b,\"\/\").concat(c)];if(!g)return e.mutate(a);var h=e.mutate(a);(a.type===\"add\"||a.type===\"put\")&&(a.values.length>=50||Ad(f,a).some(function(a){return a==null}))?h.then(function(b){var c=d(d({},a),{values:a.values.map(function(a,c){a=f.keyPath.includes(\".\")?z(a):d({},a);x(a,f.keyPath,b.results[c]);return a})});g.optimisticOps.push(c);queueMicrotask(function(){return de(a.mutatedParts)})}):(g.optimisticOps.push(a),de(a.mutatedParts),h[\"catch\"](function(){qa(g.optimisticOps,a),de(a.mutatedParts)}));return h},query:function(a){if(!Md(J,e)||!Nd(\"query\",a))return e.query(a);var d=J.trans.db._options.cache===\"immutable\",f=J,g=f.requery;f=f.signal;var h=$d(b,c,\"query\",a),i=h[0],j=h[1],k=h[2],l=h[3];if(i&&j)i.obsSet=a.obsSet;else{h=e.query(a).then(function(a){var b=a.result;i.res=b;if(d){for(var c=0,e=b.length;c<e;++c)Object.freeze(b[c]);Object.freeze(b)}else a.result=z(b);return a})[\"catch\"](function(a){l&&i&&qa(l,i);return Promise.reject(a)});i={obsSet:a.obsSet,promise:h,subscribers:new Set(),type:\"query\",req:a,dirty:!1};l?l.push(i):(l=[i],k||(k=Vd[\"idb:\/\/\".concat(b,\"\/\").concat(c)]={queries:{query:{},count:{}},objs:new Map(),optimisticOps:[],unsignaledParts:{}}),k.queries.query[a.query.index.name||\"\"]=l)}ge(i,l,g,f);return i.promise.then(function(b){return{result:Ud(b.result,a,k===null||k===void 0?void 0:k.optimisticOps,e,i,d)}})}});return g}});return c}},je=function(){function a(b,c){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=c=d({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:\"cloned\"},c);this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange};f=c.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:F,dbReadyPromise:null,cancelOpen:F,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new L(function(a){g.dbReadyResolve=a});g.openCanceller=new L(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=fc(this,\"populate\",\"blocked\",\"versionchange\",\"close\",{ready:[Ma,F]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||L.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=sc(this);this.Table=hc(this);this.Transaction=Gc(this);this.Version=kd(this);this.WhereClause=Cc(this);this.on(\"versionchange\",function(a){a.newVersion>0?!1:!1,e.close()});this.on(\"blocked\",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=Lc(c.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on(\"blocked\").fire(a),Pb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on(\"versionchange\").fire(a)})};this.use(Ed);this.use(ie);this.use(Pd);this.use(yd);this.use(Bd);this.vip=Object.create(this,{_vip:{value:!0}});f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new E.Type(\"Given version is not a positive number\");a=Math.round(a*10)\/10;if(this.idbdb||this._state.isBeingOpened)throw new E.Schema(\"Cannot add version when database is open\");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Xc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new L(function(a,c){if(b._state.openComplete)return c(new E.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new E.DatabaseClosed());return}b.open()[\"catch\"](F)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){var a=this;return Hb(I,function(){return sd(a)})};a.prototype._close=function(){var a=this._state,b=Pb.indexOf(this);b>=0&&Pb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this._novip.idbdb=null}a.dbReadyPromise=new L(function(b){a.dbReadyResolve=b});a.openCanceller=new L(function(b,c){a.cancelOpen=c})};a.prototype.close=function(){this._close();var a=this._state;this._options.autoOpen=!1;a.dbOpenError=new E.DatabaseClosed();a.isBeingOpened&&a.cancelOpen(a.dbOpenError)};a.prototype[\"delete\"]=function(){var a=this,b=arguments.length>0,c=this._state;return new L(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=M(function(){pd(a._deps,a.name),d()});b.onerror=W(e);b.onblocked=a._fireOnBlocked};if(b)throw new E.InvalidArgument(\"Arguments not allowed in db.delete()\");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name===\"DatabaseClosed\"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,\"tables\",{get:function(){var a=this;return g(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=ud.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf(\"!\")!==-1)&&(e=null);var f=a.indexOf(\"?\")!==-1;a=a.replace(\"!\",\"\").replace(\"?\",\"\");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!==\"string\")throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");return a});if(a==\"r\"||a===Vb)g=Vb;else if(a==\"rw\"||a==Wb)g=Wb;else throw new E.InvalidArgument(\"Invalid transaction mode: \"+a);if(e){if(e.mode===Vb&&g===Wb)if(f)e=null;else throw new E.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new E.SubTransaction(\"Table \"+a+\" not included in parent transaction.\")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):R(a)}var i=vd.bind(null,this,g,h,e,c);return e?e._promise(g,i,\"lock\"):J.trans?Hb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new E.InvalidTable(\"Table \".concat(a,\" does not exist\"));return this._allTables[a]};return a}(),ke=typeof Symbol!==\"undefined\"&&\"observable\"in Symbol?Symbol.observable:\"@@observable\",le=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a===\"function\"?{next:a,error:b,complete:c}:a)};a.prototype[ke]=function(){return this};return a}(),me;try{me={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(a){me={indexedDB:null,IDBKeyRange:null}}function ne(a){var b=!1,c,d=new le(function(d){var e=sa(a);function f(b){e&&Cb();b=O(a,b);e&&b[\"finally\"](P);return b}var g=!1,h,i={},j={},k={get closed(){return g},unsubscribe:function(){if(g)return;g=!0;h&&h.abort();l&&Y.storagemutated.unsubscribe(n)}};d.start&&d.start(k);var l=!1;function m(){return ae(j,i)}var n=function(a){Od(i,a),m()&&o()},o=function(){if(g||!me.indexedDB)return;i={};var a={};h&&h.abort();h=new AbortController();var e={subscr:a,signal:h.signal,requery:o,trans:null},k=f(e);Promise.resolve(k).then(function(f){b=!0;c=f;if(g||e.signal.aborted)return;i={};j=a;!ja(j)&&!l&&(Y(Ec,n),l=!0);d.next&&d.next(f)},function(a){b=!1;if(![\"DatabaseClosedError\",\"AbortError\"].includes(a===null||a===void 0?void 0:a.name)){if(g)return;d.error&&d.error(a)}})};o();return k});d.hasValue=function(){return b};d.getValue=function(){return c};return d}var oe=je;m(oe,d(d({},D),{\"delete\":function(a){a=new oe(a,{addons:[]});return a[\"delete\"]()},exists:function(a){return new oe(a,{addons:[]}).open().then(function(a){a.close();return!0})[\"catch\"](\"NoSuchDatabaseError\",function(){return!1})},getDatabaseNames:function(a){try{return nd(oe.dependencies).then(a)}catch(a){return R(new E.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?Hb(J.transless,a):a()},vip:qd,async:function(a){return function(){try{var b=td(a.apply(this,arguments));return!b||typeof b.then!==\"function\"?L.resolve(b):b}catch(a){return R(a)}}},spawn:function(a,b,c){try{a=td(a.apply(c,b||[]));return!a||typeof a.then!==\"function\"?L.resolve(a):a}catch(a){return R(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=L.resolve(typeof a===\"function\"?oe.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:L,debug:{get:function(){return B},set:function(a){ta(a,a===\"dexie\"?function(){return!0}:Tb)}},derive:p,extend:i,props:m,override:u,Events:fc,on:Y,liveQuery:ne,extendObservabilitySet:Od,getByKeyPath:w,setByKeyPath:x,delByKeyPath:da,shallowClone:ea,deepClone:z,getObjectDiff:zd,cmp:T,asap:aa,minKey:Nb,addons:[],connections:Pb,errnames:Ca,dependencies:me,cache:Vd,semVer:y,version:y.split(\".\").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b\/Math.pow(10,c*2)})}));oe.maxKey=Lc(oe.dependencies.IDBKeyRange);typeof dispatchEvent!==\"undefined\"&&typeof addEventListener!==\"undefined\"&&(Y(Ec,function(a){if(!$){var b;Qb?(b=document.createEvent(\"CustomEvent\"),b.initCustomEvent(X,!0,!0,a)):b=new CustomEvent(X,{detail:a});$=!0;dispatchEvent(b);$=!1}}),addEventListener(X,function(a){a=a.detail;$||pe(a)}));function pe(a){var b=$;try{$=!0,Y.storagemutated.fire(a),ee(a,!0)}finally{$=b}}var $=!1;if(typeof BroadcastChannel!==\"undefined\"){var qe=new BroadcastChannel(X);typeof qe.unref===\"function\"&&qe.unref();Y(Ec,function(a){$||qe.postMessage(a)});qe.onmessage=function(a){a.data&&pe(a.data)}}else if(typeof self!==\"undefined\"&&typeof navigator!==\"undefined\"){Y(Ec,function(a){try{$||(typeof localStorage!==\"undefined\"&&localStorage.setItem(X,JSON.stringify({trig:Math.random(),changedParts:a})),typeof self.clients===\"object\"&&e([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(b){return b.postMessage({type:X,changedParts:a})}))}catch(a){}});typeof addEventListener!==\"undefined\"&&addEventListener(\"storage\",function(a){if(a.key===X){a=JSON.parse(a.newValue);a&&pe(a.changedParts)}});xd=self.document&&navigator.serviceWorker;xd&&xd.addEventListener(\"message\",re)}function re(a){a=a.data;a&&a.type===X&&pe(a.changedParts)}L.rejectionMapper=Fa;ta(B,Tb);D=Object.freeze({__proto__:null,Dexie:je,liveQuery:ne,Entity:$b,cmp:T,\"default\":je,RangeSet:Z,mergeRanges:Hd,rangesOverlap:Id});d(je,D,{\"default\":je});return je})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);\n__d(\"dexie_maw\",[\"dexie-4.0.1-alpha.22\"],(function(a,b,c,d,e,f){e.exports=b(\"dexie-4.0.1-alpha.22\")()}),null);\n\/**\n * License: https:\/\/www.facebook.com\/legal\/license\/CCT5pM3qiNk\/\n *\/\n__d(\"tweetnacl-auth-1.0.1\",[\"tweetnacl-1.0.3\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"tweetnacl-1.0.3\");c={};var h={exports:c};function i(){(function(a,b){typeof h!==\"undefined\"&&h.exports?h.exports=b(g()):a.nacl.auth=b(a.nacl)})(this,function(a){if(!a)throw new Error(\"tweetnacl not loaded\");var b=128,c=64;function d(d,e){var f=new Uint8Array(b+Math.max(c,d.length)),g;e.length>b&&(e=a.hash(e));for(g=0;g<b;g++)f[g]=54;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);d=a.hash(f.subarray(0,b+d.length));for(g=0;g<b;g++)f[g]=92;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);return a.hash(f.subarray(0,b+d.length))}function e(a,b){var c=new Uint8Array(32);c.set(d(a,b).subarray(0,32));return c}e.full=function(a,b){return d(a,b)};e.authLength=32;e.authFullLength=64;e.keyLength=32;return e})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);\n__d(\"tweetnacl-auth\",[\"tweetnacl-auth-1.0.1\"],(function(a,b,c,d,e,f){e.exports=b(\"tweetnacl-auth-1.0.1\")()}),null);\/*FB_PKG_DELIM*\/\n__d(\"MAWDexieError\",[],(function(a,b,c,d,e,f){\"use strict\";a=\"ModifyError\";b=\"BulkError\";c=\"OpenFailedError\";d=\"VersionChangeError\";e=\"SchemaError\";var g=\"UpgradeError\",h=\"InvalidTableError\",i=\"MissingAPIError\",j=\"NoSuchDatabaseError\",k=\"InvalidArgumentError\",l=\"SubTransactionError\",m=\"UnsupportedError\",n=\"InternalError\",o=\"DatabaseClosedError\",p=\"PrematureCommitError\",q=\"ForeignAwaitError\",r=\"UnknownError\",s=\"ConstraintError\",t=\"DataError\",u=\"TransactionInactiveError\",v=\"ReadOnlyError\",w=\"VersionError\",x=\"NotFoundError\",y=\"InvalidStateError\",z=\"InvalidAccessError\",A=\"AbortError\",B=\"TimeoutError\",C=\"QuotaExceededError\",D=\"SyntaxError\",E=\"DataCloneError\";A={AbortError:A,BulkError:b,ConstraintError:s,DatabaseClosedError:o,DataCloneError:E,DataError:t,ForeignAwaitError:q,InternalError:n,InvalidAccessError:z,InvalidArgumentError:k,InvalidStateError:y,InvalidTableError:h,MissingAPIError:i,ModifyError:a,NoSuchDatabaseError:j,NotFoundError:x,OpenFailedError:c,PrematureCommitError:p,QuotaExceededError:C,ReadOnlyError:v,SchemaError:e,SubTransactionError:l,SyntaxError:D,TimeoutError:B,TransactionInactiveError:u,UnknownError:r,UnsupportedError:m,UpgradeError:g,VersionChangeError:d,VersionError:w};f.DEXIE_ERROR=A}),66);\n__d(\"MAWIDbSetupQpl\",[\"MAWQplProxy\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(1056836116,\"905\"));b=a;g[\"default\"]=b}),98);\n__d(\"MAWIDbSetupQplEventListener\",[\"MAWDexieError\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=null;function j(a){var b=new Set(Object.keys(d(\"MAWDexieError\").DEXIE_ERROR));b.has(a.reason)&&h!=null&&(h.endFail(a.reason),i!=null&&(i(),i=null))}b=function(b,c){h=b,i=c,a.addEventListener(\"unhandledrejection\",j)};g.trackDbSetupFailure=b}),98);\n__d(\"MAWDataSyncQueue\",[\"MAWQplProxy\",\"Promise\",\"WALogger\",\"asyncToGeneratorRuntime\",\"qex\",\"qpl\",\"throttle\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Unhandled exception caught in middleware \",\" sync: \",\"\"]);i=function(){return a};return a}var j=c(\"qex\")._(\"853\")||1e3;a=c(\"qex\")._(\"855\")||1e3;e=function(){m=!1;return r({isUnloading:!0})};var k=[],l=[],m=!1,n=[],o=function(){var a,b=k.splice(0,k.length);(a=l).push.apply(a,b)},p=function(){return l.splice(0,j)},q=function a(c,e){var f=p();if(f.length===0)return;c.addPoint(\"processing_batch\");return(h||(h=b(\"Promise\"))).all(n.map(function(a,b){return a(f,e)[\"catch\"](function(a){d(\"WALogger\").ERROR(i(),b,a)})})).then(function(){return a(c,e)})},r=function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){if(m)return;m=!0;var b=d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(1056849784,\"272\"));b.addPoint(\"processing_queue\",{\"int\":{queueSize:k.length}});o();try{yield q(b,a),b.endSuccess()}catch(a){b.endFail(\"handler_failed_execution\");throw a}finally{m=!1,k.length>0&&s()}});return function(b){return a.apply(this,arguments)}}(),s=c(\"throttle\")(r,a);f=function(a,b){k.push({type:a,value:b}),s()};a=function(a){n.some(function(b){return b===a})||n.push(a)};var t=function(){n=[]},u=function(){k=[],l=[]},v=function(){return k};g.forceFlushDataSyncQueue=e;g.addSyncItem=f;g.registerDataSyncCallback=a;g.clearDataSyncCallbacks=t;g.clearDataSyncQueue_FOR_TESTING_ONLY=u;g.getDataSyncQueue_FOR_TESTING_ONLY=v}),98);\n__d(\"MAWDataSyncMiddleware\",[\"FBLogger\",\"MAWDataSyncQueue\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=new Set([\"contacts\",\"groupInfo\",\"messages\",\"participants\",\"threads\",\"reactions\",\"dyiBatch\",\"xma\",\"pendingStanzas\"]);function i(a,b){var c=a.table(b);return!h.has(b)?c:babelHelpers[\"extends\"]({},c,{mutate:function(a){return c.mutate(a).then(function(c){if(a.type===\"delete\"){a.keys.forEach(function(c){d(\"MAWDataSyncQueue\").addSyncItem(a.type,{key:c,tableName:b})});return c}else c.results!=null?c.results.forEach(function(c){d(\"MAWDataSyncQueue\").addSyncItem(a.type,{key:c,tableName:b,values:a.values})}):c.lastResult!=null&&d(\"MAWDataSyncQueue\").addSyncItem(a.type,{key:c.lastResult,tableName:b,values:a.values});return c})}})}function a(){return{create:function(a){try{return babelHelpers[\"extends\"]({},a,{table:function(b){return i(a,b)}})}catch(b){c(\"FBLogger\")(\"mpf_web_foundations\").catching(b).mustfix(\"Error applying DataSync Middleware, messages made during this session will not be properly synced to registered consumers\");return a}},name:\"MAWDataSyncMiddleware\",stack:\"dbcore\"}}g.getDataSyncMiddleware=a}),98);\n__d(\"MAWIndexedDb\",[\"Deferred\",\"FBLogger\",\"MAWBridge\",\"MAWCurrentUser\",\"MAWDataSyncMiddleware\",\"MAWDbMutationMiddleware\",\"MAWDbMutationValidator\",\"MAWDbSchema\",\"MAWDbVersion\",\"MAWDexieTable\",\"MAWGetWorkerStatusApi\",\"MAWIDbSetupQpl\",\"MAWIDbSetupQplEventListener\",\"MAWIndexedDBDeletion\",\"MAWIndexedDbMetadata\",\"MAWLowLevelApiTypes\",\"MAWQplProxy\",\"MAWRestoreRewriteUtils\",\"MAWTransactor\",\"Promise\",\"WATagsLogger\",\"WAWorkerGlobalScope\",\"asyncToGeneratorRuntime\",\"cr:4773\",\"dexie_maw\",\"err\",\"gkx\",\"promiseDone\",\"qpl\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"DB is null\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"DB setup complete, marking as ready\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"DB Open blocked\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"actual version: \",\", current: \",\", requested: \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Current version: \",\". Shim: \",\". 1DB: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Starting DB Setup\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[afterTransaction] afterTransactionForThreadEvent called outside of dexie transaction\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[afterTransaction] called outside of dexie transaction\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[afterTransactionEffect] called outside of dexie transaction\"]);q=function(){return a};return a}var r=null,s=new(c(\"Deferred\"))(),t=!1,u=!1,v=d(\"WATagsLogger\").TAGS([\"DB\"]);function w(){s=null,t=!1}function a(){return u}function e(a,b,c){return x.apply(this,arguments)}function x(){x=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,e){b=b===void 0?{enableDataSyncMiddleware:!0}:b;var f=b.enableDataSyncMiddleware,g=b.enableMutationValidator,h=b.shimEnabled,o=h===void 0?!1:h;h=babelHelpers.objectWithoutPropertiesLoose(b,[\"enableDataSyncMiddleware\",\"enableMutationValidator\",\"shimEnabled\"]);u=!0;b=d(\"MAWCurrentUser\").getID();if(r!=null)return;if(t){var p;return(p=s)==null?void 0:p.getPromise()}v.LOG(n());t=!0;s=(p=s)!=null?p:new(c(\"Deferred\"))();d(\"MAWIDbSetupQplEventListener\").trackDbSetupFailure(c(\"MAWIDbSetupQpl\"),function(){var a;(a=s)==null?void 0:a.reject();w()});var q=d(\"MAWIndexedDbMetadata\").dbName(b);d(\"MAWGetWorkerStatusApi\").setDatabaseStatus(q,d(\"MAWLowLevelApiTypes\").DatabaseState.Initializing);var x=(yield d(\"MAWDbVersion\").getDexieDbVersion(q,o));if(!o){v.LOG(m(),x,o,d(\"MAWRestoreRewriteUtils\").isOneDBEnabled());d(\"MAWQplProxy\").sendQPLIntAnnotationThroughBridge(c(\"qpl\")._(1056839232,\"112\"),\"dbVersion\",(p=x)!=null?p:0);d(\"MAWQplProxy\").sendQPLIntAnnotationThroughBridge(c(\"qpl\")._(1056839232,\"112\"),\"useSentBytesCache\",c(\"gkx\")(\"33008\")?1:0)}r=new(d(\"MAWDexieTable\").DexieTable)(q,function(b){f&&b.use(d(\"MAWDataSyncMiddleware\").getDataSyncMiddleware());!o&&a!=null&&b.use(d(\"MAWDbMutationMiddleware\").getMAWDbMutationMiddleware(a));o&&b.use(d(\"MAWDbMutationMiddleware\").getMAWVaultMiddleware());g===!0&&b.use(d(\"MAWDbMutationValidator\").getMutationValidatorMiddleware());var h=d(\"MAWDbVersion\").updateDB(b,x,e);o||(d(\"MAWQplProxy\").sendQPLBoolAnnotationThroughBridge(c(\"qpl\")._(1056839232,\"112\"),\"dbUpgradeNeeded\",x!==h),v.LOG(l(),h,x,e),c(\"MAWIDbSetupQpl\").addPoint(\"database_version_upgraded \",{\"int\":{dbVersion:h}}));b.on(\"blocked\",function(){v.ERROR(k()),d(\"MAWGetWorkerStatusApi\").setDatabaseStatus(q,d(\"MAWLowLevelApiTypes\").DatabaseState.Error)});b.on(\"ready\",function(a){var b;v.LOG(j());d(\"MAWGetWorkerStatusApi\").setDatabaseStatus(q,d(\"MAWLowLevelApiTypes\").DatabaseState.Open);(b=s)==null?void 0:b.resolve();w();if(a==null){v.ERROR(i());return}c(\"MAWIDbSetupQpl\").endSuccess({\"int\":{dbVersion:h}})});b.on(\"versionchange\",function(){d(\"MAWGetWorkerStatusApi\").setDatabaseStatus(q,d(\"MAWLowLevelApiTypes\").DatabaseState.Upgrading);var a=h!=null?h-1:0;c(\"MAWIDbSetupQpl\").addPoint(\"database_version_upgraded \",{\"int\":{prev_db_version:a}});(a=d(\"WAWorkerGlobalScope\").workerGlobalScope.location)==null?void 0:a.reload==null?void 0:a.reload()})},void 0,h);return(b=s)==null?void 0:b.getPromise()});return x.apply(this,arguments)}function y(a){if(r==null){throw c(\"err\")('IndexDB has not been initialized before executing \"'+((a=a)!=null?a:\"unnamed\")+'\"')}return r}function z(a){if(r!=null&&!t)return(h||(h=b(\"Promise\"))).resolve(r);s=s||new(c(\"Deferred\"))();return s.getPromise().then(function(){return y(a)})}function f(){return A.apply(this,arguments)}function A(){A=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=(yield z());a!=null&&(a.close(),r=null);w()});return A.apply(this,arguments)}function B(a){r=a,w()}var C=new WeakMap(),D=new WeakMap();function E(a){var b=c(\"dexie_maw\").currentTransaction;if(b==null){v.ERROR(q());throw c(\"unrecoverableViolation\")(\"afterTransactionEffect called outside of dexie transaction\",\"messenger_e2ee_web\")}if(typeof a!==\"function\")return;var d=C.get(b)||[];d.push(a);C.set(b,d);d.length===1&&b.on(\"complete\",function(){var a=C.get(b)||[];a.forEach(function(a){a()});C[\"delete\"](b)})}function F(a){if(c(\"dexie_maw\").currentTransaction==null)throw c(\"FBLogger\")(\"messenger_e2ee_web\").mustfixThrow(\"Cannot use afterTransactionRestore outside of a MAW transaction\");b(\"cr:4773\")!=null&&b(\"cr:4773\").handleEventWithRestore(c(\"dexie_maw\").currentTransaction.idbtrans,a)}function G(a){var b=c(\"dexie_maw\").currentTransaction;if(b==null){v.ERROR(p());throw c(\"unrecoverableViolation\")(\"afterTransaction called outside of dexie transaction\",\"messenger_e2ee_web\")}var e=D.get(b);if(e!=null)e.push(a);else{var f=[a];D.set(b,f);b.on(\"complete\",function(){D[\"delete\"](b),d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:f})})}}function H(a){b(\"cr:4773\")!=null?F(a):G(a)}function I(a,b){var e=c(\"dexie_maw\").currentTransaction;if(e==null){v.ERROR(o());throw c(\"unrecoverableViolation\")(\"afterTransactionForThreadEvent called outside of dexie transaction\",\"messenger_e2ee_web\")}e.on(\"complete\",function(){d(\"MAWBridge\").getBridge().fireAndForget(\"threadEvent\",b,a)})}function J(){r!=null&&(r.close(),r=null)}function K(a){J();a=d(\"MAWIndexedDbMetadata\").dbName((a=a)!=null?a:d(\"MAWCurrentUser\").getID());c(\"promiseDone\")(d(\"MAWIndexedDBDeletion\").deleteDB(a,\"maw\"))}g.TABLES_TO_ENCRYPT=d(\"MAWDbSchema\").TABLES_TO_ENCRYPT;g.makeMsgrTransactor=d(\"MAWTransactor\").makeMsgrTransactor;g.makeSignalTransactor=d(\"MAWTransactor\").makeSignalTransactor;g.makeMsgrAndSignalTransactor=d(\"MAWTransactor\").makeMsgrAndSignalTransactor;g.willSetupDB=a;g.makeDB=e;g.getDBExn=y;g.getDB=z;g.closeDB=f;g.setDB_INTERNAL_USE_ONLY=B;g.afterTransactionEffect=E;g.afterTransaction=H;g.afterTransactionThreadEvent=I;g.closeDb=J;g.deleteDb=K}),98);\n__d(\"MAWDexieCastToPromise\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g;function a(a){return(g||(g=b(\"Promise\"))).resolve(a)}function c(a){return a}f.dexieCastToPromise=a;f.promiseCastToDexiePromise_I_KNOW_WHAT_I_AM_DOING=c}),66);\n__d(\"MAWLLAMigrationUtils\",[\"MAWRestoreDbState\",\"gkx\",\"justknobx\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";b=c(\"justknobx\")._(\"652\");var h=1\/Math.max(b,10);e=1\/(b\/10);f=1\/(5*b);b=1\/(10*b);var i=new Map([[\"setClockSkew\",b],[\"getRoutingInfo\",f],[\"unknown\",b],[\"writeOutgoingMsg\",e],[\"processFutureProofMsgs\",e],[\"markThreadAsReadUpTo\",e],[\"handleMediaDownload\",e],[\"getMsgForREquestReuploadMedia\",e],[\"createGroup\",e],[\"createGroups\",e],[\"BulkProcessFutureProofMsgs\",e],[\"getAllMessageIdsAndRangesForThread\",e]]),j=new Set([\"uploadMsgBackupGetMsgs\",\"updateBackupEntFbid\",\"saveXMAMediaAndMetadata\",\"saveRTCXMAMediaAndMetadata\",\"writeRetroactiveBackupsState\",\"getBackupThreads\",\"uploadMessagesForThread\",\"constructEchoMessage\",\"updateBackupEntFbidInMediaBackup\",\"restoreUpdateThread\",\"restoreUpdateMessages\",\"restoreUpdateNextInChatMsgId\",\"handleEncryptedBackupsSecret\",\"restoreInsertMsgsToDb\",\"getMsgsByProtocolMsgIds\",\"restoreGetMsg\",\"restoreMaybeGetOldestNonAdminMessage\",\"restoreGetMediaForXMAByObjectIds\",\"restoreWriteXMAsToDb\",\"restoreWriteReactionsToDb\",\"restoreGetThread\",\"restoreDeleteMessages\",\"getChunkOfTheDownloadedFile\",\"updateMediaWithDownloadedChunkBlob\",\"invokeRestoreAccessCheckSprocToDownloadAttachment\",\"restoreLinkMedias\",\"getChunksByHash\",\"bulkGetRetroactiveMedia\",\"updateRetroactiveBackupsStore\",\"getRetryItems\",\"housekeepUploadRetryTable\",\"getMsgsEB\"]);function a(a,b,e){b===void 0&&(b=!1);e===void 0&&(e={});var f=i.get(a)||h;return a===\"debug\"||a===\"test\"?[]:c(\"gkx\")(\"23956\")&&Math.random()<f?[j.has(a)?c(\"qpl\")._(521475322,\"1350\"):c(\"qpl\")._(1056839327,\"560\"),babelHelpers[\"extends\"]({bool:{isUsingShim:d(\"MAWRestoreDbState\").isUsingShim(),newLLA:b},string:{transactor:a}},e)]:[]}g.getTransactorQPLParam=a}),98);\n__d(\"MAWTransactor\",[\"Deferred\",\"FBLogger\",\"MAWDexieCastToPromise\",\"MAWDexieTable\",\"MAWErrorObject\",\"MAWExceededStorageQuota\",\"MAWIndexedDb\",\"MAWLLAMigrationUtils\",\"MAWQplProxy\",\"MAWTransactionMode\",\"WAPromiseQueue\",\"asyncToGeneratorRuntime\",\"dexie_maw\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=[\"MWPTransactor\"],i=c(\"FBLogger\")(\"messenger_e2ee_web\"),j=1,k=new(d(\"WAPromiseQueue\").PromiseQueue)(),l=new Map();function m(a,b,e,f,g){e!=null&&c(\"dexie_maw\").currentTransaction!=null&&e.endFail(\"invoked_in_nested_transaction\");if(c(\"dexie_maw\").currentTransaction!=null)throw i.mustfixThrow(\"makeMsgrTransactor %s cannot be called within another transaction\",f);return d(\"MAWIndexedDb\").getDB().then(function(c){return c.transact(a,b,g)})}function n(a,b,e,f,g){e=d(\"MAWDexieTable\").getDexiePSDItem(\"transactionId\");if(e==null)throw i.mustfixThrow(\"BulkTransactor cannot be called without a transaction id with transaction: %s\",f);var h=l.get(e)||[],j=new(c(\"Deferred\"))();h.push({fn:g,mode:a,promise:j,stores:b,transactorName:f});l.set(e,h);return j.getPromise()}function o(a,b,c,e,f){var g=d(\"MAWDexieTable\").getDexiePSDItem(\"transactor\");return g===\"bulk\"?n(a,b,c,e,f):m(a,b,c,e,f)}function p(a){var b=[].concat(l.get(a)||[]);l[\"delete\"](a);if(b.length===0)return d(\"MAWDexieTable\").dexieResolve();i.debug(\"Bulking %s db operations together\",b.length);a=b.some(function(a){a=a.mode;return a===d(\"MAWTransactionMode\").READWRITE})?d(\"MAWTransactionMode\").READWRITE:d(\"MAWTransactionMode\").READONLY;var c=Array.from(new Set(b.flatMap(function(a){a=a.stores;return a}))),e=d(\"MAWIndexedDb\").getDBExn(\"BulkTransaction\");return d(\"MAWDexieCastToPromise\").promiseCastToDexiePromise_I_KNOW_WHAT_I_AM_DOING(e.transact(a,c,function(){return b.reduce(function(a,b){var c=b.fn,e=b.promise,f=b.transactorName;return a.then(function(){return c()}).then(function(a){e.resolve(a)})[\"catch\"](function(a){e.reject(a);d(\"MAWExceededStorageQuota\").checkQuotaExceededError(a);throw v(d(\"MAWErrorObject\").getErrorObject(a)).mustfixThrow(\"Error completing bulk operation %s\",f)})},d(\"MAWDexieTable\").dexieResolve())}).then(function(){d(\"MAWDexieTable\").clearDexiePSDItem(\"transactionId\"),i.debug(\"Finished bulk transaction\")}))}function a(a){return k.enqueue(function(){if(c(\"dexie_maw\").currentTransaction!=null)throw i.mustfixThrow(\"runInBulkTransaction cannot be called within another transaction\");if(d(\"MAWDexieTable\").getDexiePSDItem(\"transactionId\")!=null)throw i.mustfixThrow(\"Several transactions are trying to be executed at the same time: %s\",d(\"MAWDexieTable\").getDexiePSDItem(\"transactionId\"));i.debug(\"Running in bulk transaction\");return d(\"MAWDexieCastToPromise\").dexieCastToPromise(d(\"MAWDexieTable\").dexieResolve().then(function(){var b=j++;d(\"MAWDexieTable\").setDexiePSDItem(\"transactor\",\"bulk\");d(\"MAWDexieTable\").setDexiePSDItem(\"transactionId\",b);var c=a();d(\"MAWDexieTable\").clearDexiePSDItem(\"transactor\");return p(b).then(function(){return d(\"MAWDexieCastToPromise\").promiseCastToDexiePromise_I_KNOW_WHAT_I_AM_DOING(c)})[\"finally\"](function(){d(\"MAWDexieTable\").clearDexiePSDItem(\"transactionId\")})}))})[\"catch\"](function(a){throw v(d(\"MAWErrorObject\").getErrorObject(a)).mustfixThrow(\"Uncaught exception in runInBulkTransactor\")})}function q(a){a=d(\"MAWLLAMigrationUtils\").getTransactorQPLParam(a);a=a.length===2?a:[null,void 0];var b=a[0];a=a[1];return b!=null?d(\"MAWQplProxy\").startQplUserFlow(b,a):null}function e(a,b,c){return s(a,b,c)}function f(a,b,c){return s(a,b,c)}function r(a,b,c){return s(a,b,c)}function s(a,b,c){var e=Object.keys(a),f=e.some(function(b){return a[b]===d(\"MAWTransactionMode\").READWRITE})?d(\"MAWTransactionMode\").READWRITE:d(\"MAWTransactionMode\").READONLY;return function(){for(var a=arguments.length,g=new Array(a),i=0;i<a;i++)g[i]=arguments[i];var j=q(b);return d(\"MAWIndexedDb\").getDB(b).then(function(a){return o(f,e,j,b,function(){d(\"MAWDexieTable\").setDexiePSDItem(\"transactorQPLEvent\",j);var f=j!=null?a.stores[e[0]].get(\"\").then(function(){var a=d(\"MAWDexieTable\").getDexiePSDItem(\"transactor\");j==null?void 0:j.addPoint(\"transaction_opened\",{bool:{isBulkTransaction:a===\"bulk\"}});j==null?void 0:j.addPoint(\"transactor_execution_start\")}):d(\"MAWDexieTable\").dexieResolve();return f.then(function(){return c(a.stores).apply(void 0,g)}).then(function(a){j==null?void 0:j.addPoint(\"transactor_execution_end\");j==null?void 0:j.endSuccess();return a})[\"catch\"](function(a){d(\"MAWExceededStorageQuota\").checkQuotaExceededError(a);j==null?void 0:j.endFail(\"transaction_fail\");a=d(\"MAWErrorObject\").getErrorObject(a);throw v(a).mustfixThrow(\"[%s] Error performing %s transaction\",h.join(\"|\"),(a=b)!=null?a:\"\")})})})[\"catch\"](function(a){d(\"MAWExceededStorageQuota\").checkQuotaExceededError(a);j==null?void 0:j.endFail(\"transaction_fail\");a=d(\"MAWErrorObject\").getErrorObject(a);throw v(a).mustfixThrow(\"[%s] Error performing %s transaction\",h.join(\"|\"),(a=b)!=null?a:\"\")})}}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c,e){var f=a+\"_\"+e,g=q(f),i=(yield d(\"MAWIndexedDb\").getDB(f));return i.transact(b,[a],function(){var b=g!=null?i.stores[a].get(\"\").then(function(){g==null?void 0:g.addPoint(\"transaction_opened\",{bool:{isBulkTransaction:!1}}),g==null?void 0:g.addPoint(\"transactor_execution_start\")}):d(\"MAWDexieTable\").dexieResolve();return b.then(function(){return c(i.stores[a])})}).then(function(a){g==null?void 0:g.addPoint(\"transactor_execution_end\");g==null?void 0:g.endSuccess();return a})[\"catch\"](function(a){d(\"MAWExceededStorageQuota\").checkQuotaExceededError(a);g==null?void 0:g.endFail(\"transaction_fail\");a=d(\"MAWErrorObject\").getErrorObject(a);throw v(a).mustfixThrow(\"[%s] Error performing %s transaction\",h.join(\"|\"),f)})});return u.apply(this,arguments)}function v(a){if(a)return i.catching(a);else return i}function w(a){return x.apply(this,arguments)}function x(){x=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){if(c(\"dexie_maw\").currentTransaction==null)throw c(\"FBLogger\")(\"messenger_e2ee_web\").mustfixThrow(\"Cannot use runInLSDB outside of a MAW transaction\");var b=c(\"dexie_maw\").currentTransaction.idbtrans;b=(yield b.transaction);return a(b)});return x.apply(this,arguments)}g.runInBulkTransaction=a;g.makeMsgrTransactor=e;g.makeSignalTransactor=f;g.makeMsgrAndSignalTransactor=r;g.persistedQueueTransactor=t;g.runInLSDB=w}),98);\n__d(\"isEncryptionAtRestEnabled\",[\"isInstamadillo\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){if(c(\"qex\")._(\"507\")===!0)return!0;else return c(\"isInstamadillo\")()}g[\"default\"]=a}),98);\n__d(\"MAWDbMiddlewareMutations\",[\"MAWDbObjEncryption\",\"MAWVaultDb\",\"MAWVaultDefinitions\",\"gkx\",\"isEncryptionAtRestEnabled\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,e){if(!c(\"gkx\")(\"23909\")&&!(c(\"isEncryptionAtRestEnabled\")()||c(\"gkx\")(\"23910\")))return a;a=babelHelpers[\"extends\"]({},a);a=d(\"MAWVaultDb\").unvaultDbRow(a,b,d(\"MAWVaultDefinitions\").ARMADILLO_IDB_VAULT_DEFINITIONS);a=d(\"MAWDbObjEncryption\").encryptDbObj(a,b,e);return a}function b(a,b){return!c(\"gkx\")(\"23909\")?a:d(\"MAWVaultDb\").unvaultDbRow(babelHelpers[\"extends\"]({},a),b,d(\"MAWVaultDefinitions\").ARMADILLO_IDB_VAULT_DEFINITIONS)}function e(a,b,e){a=d(\"MAWDbObjEncryption\").decryptDbObj(babelHelpers[\"extends\"]({},a),b,e);return!c(\"gkx\")(\"23909\")?a:d(\"MAWVaultDb\").vaultDbRow(a,b,d(\"MAWVaultDefinitions\").ARMADILLO_IDB_VAULT_DEFINITIONS)}function f(a,b){if(a==null)return void 0;return!c(\"gkx\")(\"23909\")?a:d(\"MAWVaultDb\").vaultDbRow(a,b,d(\"MAWVaultDefinitions\").ARMADILLO_IDB_VAULT_DEFINITIONS)}g.mutateValue=a;g.mutateVaultedValue=b;g.getValue=e;g.getVaultedValue=f}),98);\n__d(\"MAWDbMutationValidator\",[\"FBLogger\",\"MAWIndexedDb\",\"MAWMessageHasUniqueExternalIdValidator\",\"MAWODSProxy\",\"Promise\",\"Random\",\"WAOdsEnums\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=[c(\"MAWMessageHasUniqueExternalIdValidator\")],j=1e3;function k(a,e){var f=a.table(e),g=i.filter(function(a){return a.table===e});return g.length===0?f:babelHelpers[\"extends\"]({},f,{mutate:function(a){return f.mutate(a).then(function(e){if(d(\"Random\").coinflip(j)){var f=g.filter(function(b){b=b.type;return b===a.type});d(\"MAWIndexedDb\").afterTransactionEffect(function(){var a=f.flatMap(function(a){var b=a.description,c=a.isValid;return((a=e.results)!=null?a:[]).map(function(a){return c(a).then(function(a){return babelHelpers[\"extends\"]({validatorName:b},a)})})});c(\"promiseDone\")((h||(h=b(\"Promise\"))).all(a).then(function(a){a.forEach(function(a){switch(a.result){case\"valid\":d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.MAW_MUTATION_VALIDATOR,key:a.validatorName+\".valid\"});break;case\"invalid\":d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.MAW_MUTATION_VALIDATOR,key:a.validatorName+\".invalid\"});c(\"FBLogger\")(\"maw_mutation_validator\").mustfix(\"Validator %s failed with description: %s\",a.validatorName,a.description);break;case\"skipped\":break}})}))})}return e})}})}function a(){return{create:function(a){try{return babelHelpers[\"extends\"]({},a,{table:function(b){return k(a,b)}})}catch(b){c(\"FBLogger\")(\"mpf_web_foundations\").catching(b).mustfix(\"Error applying Mutation Validator Middleware\");return a}},name:\"MAWMutationValidatorMiddleware\",stack:\"dbcore\"}}g.getMutationValidatorMiddleware=a}),98);\n__d(\"MAWMessageHasUniqueExternalIdValidator\",[\"MAWDexieTable\",\"MAWTransactionMode\",\"MAWTransactor\",\"WAStanzaUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"MAWTransactor\").makeMsgrTransactor({messages:d(\"MAWTransactionMode\").READONLY},\"isMessageWithUniqueExternalIdValidator\",function(a){return function(b){return a.messages.get(b).then(function(c){var e=c==null?void 0:c.externalId;return e==null?d(\"MAWDexieTable\").dexieResolve({key:b,result:\"skipped\"}):a.messages.where(\"externalId\").equals(d(\"WAStanzaUtils\").toStanzaId(e)).filter(function(a){return a.author===(c==null?void 0:c.author)&&a.threadJid===(c==null?void 0:c.threadJid)}).toArray().then(function(a){if(a.length===1)return{key:b,result:\"valid\"};else return{description:\"Message has duplicate externalId\",key:b,result:\"invalid\"}})})}});b={description:\"MAWMessageHasUniqueExternalIdValidator\",isValid:a,table:\"messages\",type:\"add\"};c=b;g[\"default\"]=c}),98);\n__d(\"MAWDbMutationMiddleware\",[\"FBLogger\",\"MAWDbMiddlewareMutations\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return{create:function(b){return babelHelpers[\"extends\"]({},b,{table:function(e){var f=b.table(e);try{return babelHelpers[\"extends\"]({},f,{get:function(b){return f.get(b).then(function(b){return b==null?void 0:d(\"MAWDbMiddlewareMutations\").getValue(b,e,a)})},getMany:function(b){return f.getMany(b).then(function(b){return b.map(function(b){return b==null?void 0:d(\"MAWDbMiddlewareMutations\").getValue(b,e,a)})})},mutate:function(b){var c=null;switch(b.type){case\"add\":case\"put\":c=b.values.map(function(b){return d(\"MAWDbMiddlewareMutations\").mutateValue(b,e,a)});break;case\"delete\":break;case\"deleteRange\":break}if(b.type===\"delete\"||b.type===\"deleteRange\"||c==null)return f.mutate(b);b.values=c;return f.mutate(b).then(function(a){return a})},openCursor:function(b){return f.openCursor(b).then(function(b){return b==null||b.value==null?b:h(b,e,a)})},query:function(b){return f.query(b).then(function(b){if(b.result.length===0||typeof b.result[0]!==\"object\")return b;var c=b.result.map(function(b){return d(\"MAWDbMiddlewareMutations\").getValue(b,e,a)});b.result=c;return b})}})}catch(a){c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).mustfix(\"Error applying MAWDbMiddleware\");return f}}})},name:\"MAWDbMutationMiddleware\",stack:\"dbcore\"}}function b(){return{create:function(a){return babelHelpers[\"extends\"]({},a,{table:function(b){var e=a.table(b);try{return babelHelpers[\"extends\"]({},e,{get:function(a){return e.get(a).then(function(a){return d(\"MAWDbMiddlewareMutations\").getVaultedValue(a,b)})},getMany:function(a){return e.getMany(a).then(function(a){return a.map(function(a){return d(\"MAWDbMiddlewareMutations\").getVaultedValue(a,b)})})},mutate:function(a){if(a.type===\"delete\"||a.type===\"deleteRange\")return e.mutate(a);a.values=a.values.map(function(a){return d(\"MAWDbMiddlewareMutations\").mutateVaultedValue(a,b)});return e.mutate(a)},openCursor:function(a){return e.openCursor(a).then(function(a){return a==null||a.value==null?a:i(a,b)})},query:function(a){return e.query(a).then(function(a){return a.result.length===0||typeof a.result[0]!==\"object\"?a:babelHelpers[\"extends\"]({},a,{result:a.result.map(function(a){return d(\"MAWDbMiddlewareMutations\").getVaultedValue(a,b)})})})}})}catch(a){c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).mustfix(\"Error applying MAWDbMiddleware\");return e}}})},name:\"getMAWVaultMiddleware\",stack:\"dbcore\"}}function h(a,b,c){var e;return Object.create(a,{\"continue\":{get:function(){return a[\"continue\"]}},continuePrimaryKey:{get:function(){return a.continuePrimaryKey}},key:{get:function(){return a.key}},primaryKey:{get:function(){return a.primaryKey}},start:{value:function(f){return a.start(function(){e=d(\"MAWDbMiddlewareMutations\").getValue(a.value,b,c);try{a.value=e}catch(a){}f()})}},value:{get:function(){return e}}})}function i(a,b){var c;return Object.create(a,{\"continue\":{get:function(){return a[\"continue\"]}},continuePrimaryKey:{get:function(){return a.continuePrimaryKey}},key:{get:function(){return a.key}},primaryKey:{get:function(){return a.primaryKey}},start:{value:function(e){return a.start(function(){c=d(\"MAWDbMiddlewareMutations\").getVaultedValue(a.value,b);try{a.value=c}catch(a){}e()})}},value:{get:function(){return c}}})}g.getMAWDbMutationMiddleware=a;g.getMAWVaultMiddleware=b}),98);\n__d(\"MAWArmadilloAppDataTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={};a.internalSpec={externalId:[1,(d=d(\"WAProtoConst\")).TYPES.STRING],author:[2,d.TYPES.STRING],chat:[3,d.TYPES.STRING]};b.internalSpec={fromMe:[1,d.TYPES.BOOL],id:[2,d.TYPES.STRING]};c.internalSpec={key:[1,d.TYPES.MESSAGE,b],ts:[2,d.TYPES.INT64]};e.internalSpec={lastMessageTimestamp:[1,d.TYPES.INT64],lastSystemMessageTimestamp:[2,d.TYPES.INT64],messages:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c]};f.internalSpec={type:[1,d.TYPES.STRING],chatJid:[2,d.TYPES.STRING],archived:[3,d.TYPES.BOOL],ts:[4,d.TYPES.INT64],messageRange:[5,d.TYPES.MESSAGE,e],read:[6,d.TYPES.BOOL]};h.internalSpec={type:[1,d.TYPES.STRING],protocolMsgId:[2,d.TYPES.MESSAGE,a]};i.internalSpec={chatAction:[1,d.TYPES.MESSAGE,f],messageAction:[2,d.TYPES.MESSAGE,h],__oneofs__:{action:[\"chatAction\",\"messageAction\"]}};j.internalSpec={actions:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i]};k.internalSpec={id:[1,d.TYPES.UINT64],anonId:[2,d.TYPES.BYTES],rootKey:[3,d.TYPES.BYTES],status:[4,d.TYPES.INT32]};l.internalSpec={backupId:[1,d.TYPES.UINT64],serverDataId:[2,d.TYPES.UINT64],epoch:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,k],tempOcmfClientState:[4,d.TYPES.BYTES],mailboxRootKey:[5,d.TYPES.BYTES],obliviousValidationToken:[6,d.TYPES.BYTES]};m.internalSpec={currentIndex:[1,d.TYPES.UINT32],deviceIndexes:[2,d.FLAGS.REPEATED|d.TYPES.UINT32],rawId:[3,d.TYPES.UINT32]};n.internalSpec={keyId:[1,d.TYPES.BYTES],keyData:[2,d.TYPES.BYTES],keyEpoch:[3,d.TYPES.UINT32],timestamp:[4,d.TYPES.INT64],fingerprint:[5,d.TYPES.MESSAGE,m]};o.internalSpec={keys:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,n],orphanKeys:[2,d.FLAGS.REPEATED|d.TYPES.BYTES]};p.internalSpec={keyIds:[1,d.FLAGS.REPEATED|d.TYPES.BYTES]};q.internalSpec={type:[1,d.TYPES.STRING],actions:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],encryptedBackupsSecrets:[3,d.TYPES.MESSAGE,l],syncKeyShare:[4,d.TYPES.MESSAGE,o],syncKeyRequest:[5,d.TYPES.MESSAGE,p]};r.internalSpec={deviceJid:[1,d.TYPES.STRING],serializedPubKey:[2,d.TYPES.BYTES],baseKey:[3,d.TYPES.BYTES]};s.internalSpec={externalId:[1,d.TYPES.STRING],ts:[2,d.TYPES.INT64],contents:[3,d.TYPES.MESSAGE,q],permittedIdentitiesPerDevice:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,r],ack:[5,d.TYPES.INT32],appDataId:[6,d.TYPES.INT32],recipientDevices:[7,d.FLAGS.REPEATED|d.TYPES.STRING],sendPartial:[8,d.TYPES.BOOL]};g.ProtocolMsgIdSpec=a;g.MetaSyncMessageKeyProtoSpec=b;g.MetaSyncMessageProtoSpec=c;g.MetaSyncMessageRangeProtoSpec=e;g.MetaSyncChatActionProtoSpec=f;g.MetaSyncMessageActionProtoSpec=h;g.MetaSyncActionProtoSpec=i;g.MetaSyncAppDataProtoSpec=j;g.EncryptedBackupsSecretsEpochProtoSpec=k;g.EncryptedBackupsSecretsProtoSpec=l;g.FingerprintProtoSpec=m;g.SyncKeyDataProtoSpec=n;g.SyncKeyShareProtoSpec=o;g.SyncKeyRequestProtoSpec=p;g.AppDataProtoSpec=q;g.IdentitiesPerDeviceProtoSpec=r;g.AppDataTableSchemaProtoSpec=s}),98);\n__d(\"MAWArmadilloAppMetaTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={msgTypeVersion:[1,(c=d(\"WAProtoConst\")).TYPES.INT32],hmacKey:[2,c.TYPES.BYTES],allowSecurityAlert:[3,c.TYPES.BOOL],hotlikeSticker:[4,c.TYPES.BYTES],isBackfilledForOccamadillo:[5,c.TYPES.BOOL],allowSecurityAlertForSelf:[11,c.TYPES.BOOL],hasMigratedFromDexie:[12,c.TYPES.BOOL],restoreMigrationAttempts:[13,c.TYPES.INT32],deviceJid:[14,c.TYPES.STRING],restoreToDexieMigrationComplete:[15,c.TYPES.BOOL]};b.internalSpec={key:[1,c.TYPES.STRING],value:[2,c.TYPES.MESSAGE,a]};g.DbAppMetaValuesProtoSpec=a;g.AppMetaTableSchemaProtoSpec=b}),98);\n__d(\"MAWArmadilloCollectionVersionsTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={collection:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],version:[2,b.TYPES.INT32],state:[3,b.TYPES.STRING],finiteFailureStartTime:[4,b.TYPES.INT64],ltHash:[5,b.TYPES.BYTES],isCollectionInMacMismatchFatal:[6,b.TYPES.BOOL],isCollectionLthashInconsistent:[7,b.TYPES.BOOL]};g.CollectionVersionsTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloContactsTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};a.internalSpec={ephemeralExpirationInSec:[1,(d=d(\"WAProtoConst\")).TYPES.UINT32],ephemeralLastUpdatedOrSetTimestamp:[2,d.TYPES.INT64]};b.internalSpec={syncResponseRetries:[1,d.TYPES.INT32],syncResponseSentTs:[2,d.TYPES.INT64]};c.internalSpec={sequence:[1,d.TYPES.INT64],timestamp:[2,d.TYPES.INT64],devices:[3,d.FLAGS.REPEATED|d.TYPES.BYTES],signingDeviceIndex:[4,d.TYPES.INT64],dirty:[5,d.TYPES.BOOL]};e.internalSpec={timeBucket:[1,d.TYPES.INT64],alert:[2,d.TYPES.BOOL]};f.internalSpec={contactJid:[1,d.TYPES.STRING],dhash:[3,d.TYPES.STRING],nameForSearch:[4,d.TYPES.STRING],ephemeralSetting:[5,d.TYPES.MESSAGE,a],isBlocked:[6,d.TYPES.BOOL],lastSyncTs:[7,d.TYPES.INT64],icdcInfo:[8,d.TYPES.MESSAGE,c],ephemeralSyncResponseBackoffInfo:[9,d.TYPES.MESSAGE,b],icdcFails:[10,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],relationship:[11,d.TYPES.INT32],isRestricted:[12,d.TYPES.BOOL]};g.EphemeralSettingProtoSpec=a;g.EphemeralSyncResponseBackoffInfoSpec=b;g.ICDCInfoProtoSpec=c;g.ICDCCheckFailSpec=e;g.ContactsTableSchemaProtoSpec=f}),98);\n__d(\"MAWArmadilloDeletedMessagesTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={author:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],chat:[2,b.TYPES.STRING],externalId:[3,b.TYPES.STRING],reason:[4,b.TYPES.STRING]};g.DeletedMessagesTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloDeviceChangeAlertsTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={action:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],isArchived:[2,b.TYPES.BOOL],deviceChangeAlertsId:[3,b.TYPES.INT64],location:[4,b.TYPES.STRING],model:[5,b.TYPES.STRING],ts:[6,b.TYPES.INT64],loggedOut:[7,b.TYPES.BOOL],deviceJid:[8,b.TYPES.STRING],identity:[9,b.TYPES.BYTES],platform:[10,b.TYPES.STRING],latitude:[11,b.TYPES.STRING],longitude:[12,b.TYPES.STRING],isConfirmed:[13,b.TYPES.BOOL],isNotified:[14,b.TYPES.BOOL]};g.DeviceChangeAlertsTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloDyiBatchTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={BACKUP_RESTORE:0,E2E_DYI:1};b={};b.internalSpec={batchId:[1,(c=d(\"WAProtoConst\")).TYPES.INT32],numMessages:[2,c.TYPES.INT32],oldestTs:[3,c.TYPES.INT64],threadId:[4,c.TYPES.STRING],isThread:[5,c.TYPES.BOOL],numMessagesRestored:[6,c.TYPES.INT32],qplInstanceKeyForThread:[7,c.TYPES.INT64],qplFlowDescriptor:[8,c.TYPES.ENUM,a],qplInstanceKeyE2E:[9,c.TYPES.INT64],numThreadsRestored:[10,c.TYPES.INT64]};g.DYI_BATCH_TABLE_SCHEMA_PROTO_QPL_FLOW_DESCRIPTOR=a;g.DyiBatchTableSchemaProtoSpec=b}),98);\n__d(\"MAWArmadilloEBMsgRangesTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={rangeId:[1,(b=d(\"WAProtoConst\")).TYPES.UINT32],threadJid:[2,b.TYPES.STRING],minMsgExternalId:[3,b.TYPES.STRING],maxMsgExternalId:[4,b.TYPES.STRING],minMsgSortOrderMs:[5,b.TYPES.UINT64],maxMsgSortOrderMs:[6,b.TYPES.UINT64]};g.EBMsgRangesTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloMessagesTableSchema.pb\",[\"MAWArmadilloContactsTableSchema.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){var h;a={};b={};c={};e={};f={};var i={},j={},k={},l={},m={};a.internalSpec={content:[1,(h=d(\"WAProtoConst\")).TYPES.STRING],adminMsgContent:[2,h.FLAGS.REPEATED|h.TYPES.STRING],adminType:[3,h.TYPES.STRING],obsoleteExpiration:[4,h.TYPES.INT32],obsoleteTs:[5,h.TYPES.INT64],subtype:[6,h.TYPES.STRING],protobuf:[7,h.TYPES.BYTES],screenshotActionType:[8,h.TYPES.INT32],authorName:[9,h.TYPES.STRING],version:[10,h.TYPES.INT32],mentionedJids:[11,h.FLAGS.REPEATED|h.TYPES.STRING]};b.internalSpec={frankingTag:[1,h.TYPES.BYTES],frankingVersion:[2,h.TYPES.INT32],reportingContent:[3,h.TYPES.BYTES],reportingTag:[4,h.TYPES.BYTES],frankingKey:[5,h.TYPES.BYTES]};c.internalSpec={remoteJid:[1,h.TYPES.STRING],content:[2,h.TYPES.MESSAGE,l]};e.internalSpec={duration:[1,h.TYPES.INT32],width:[2,h.TYPES.INT32],height:[3,h.TYPES.INT32],mimetype:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],jpegThumbnailHeight:[6,h.TYPES.INT32],jpegThumbnailWidth:[7,h.TYPES.INT32]};f.internalSpec={width:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],jpegThumbnail:[3,h.TYPES.BYTES],jpegThumbnailHeight:[4,h.TYPES.INT32],jpegThumbnailWidth:[5,h.TYPES.INT32]};i.internalSpec={duration:[1,h.TYPES.INT32],mimetype:[2,h.TYPES.STRING],played:[3,h.TYPES.BOOL]};j.internalSpec={filename:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING]};k.internalSpec={mediaType:[1,h.TYPES.STRING],plaintextHash:[2,h.TYPES.STRING],size:[3,h.TYPES.INT32],ts:[4,h.TYPES.INT64],mediaEntry:[5,h.TYPES.BYTES],validatedVideoInfo:[6,h.TYPES.MESSAGE,e],validatedImageInfo:[7,h.TYPES.MESSAGE,f],validatedAudioInfo:[8,h.TYPES.MESSAGE,i],validatedDocumentFileInfo:[9,h.TYPES.MESSAGE,j]};l.internalSpec={type:[1,h.TYPES.STRING],ts:[2,h.TYPES.INT64],externalId:[3,h.TYPES.STRING],author:[4,h.TYPES.STRING],msgContent:[5,h.TYPES.MESSAGE,a],obsoleteMedia:[6,h.TYPES.MESSAGE,k],msgId:[7,h.TYPES.STRING],mediaId:[8,h.TYPES.INT32],sourceId:[9,h.TYPES.STRING],xmaMessageType:[10,h.TYPES.INT32],specialTextSize:[11,h.TYPES.INT32]};m.internalSpec={type:[1,h.TYPES.STRING],ts:[2,h.TYPES.INT64],externalId:[3,h.TYPES.STRING],msgId:[4,h.TYPES.STRING],author:[5,h.TYPES.STRING],ack:[6,h.TYPES.INT32],resendCount:[7,h.TYPES.INT32],msgContent:[8,h.TYPES.MESSAGE,a],altIndex:[9,h.TYPES.STRING],forwardingScore:[10,h.TYPES.INT32],quote:[11,h.TYPES.MESSAGE,c],messageExpirationTs:[12,h.TYPES.INT64],ephemeralSetting:[13,h.TYPES.MESSAGE,d(\"MAWArmadilloContactsTableSchema.pb\").EphemeralSettingProtoSpec],revokedExternalId:[14,h.TYPES.STRING],isForwarded:[15,h.TYPES.BOOL],originalTs:[17,h.TYPES.INT64],sortOrderMs:[18,h.TYPES.INT64],reportingMeta:[19,h.TYPES.MESSAGE,b],messageDeleteTs:[20,h.TYPES.INT64],ephemeralCounterStarted:[21,h.TYPES.BOOL],quoteExternalId:[22,h.TYPES.STRING],unsendMsgContentDeleteTs:[23,h.TYPES.INT64],rowId:[24,h.TYPES.INT32],thread:[25,h.TYPES.INT32],mediaId:[26,h.TYPES.INT32],ephemeralMsgDisappeared:[27,h.TYPES.BOOL],threadJid:[28,h.TYPES.STRING],xmaId:[29,h.TYPES.INT32],specialTextSize:[30,h.TYPES.INT32],xmaMessageType:[31,h.TYPES.INT32],isExpiredXmaMsg:[32,h.TYPES.BOOL],ravenEphemeralType:[33,h.TYPES.INT32],ravenEphemeralMediaState:[34,h.TYPES.INT32],editCount:[35,h.TYPES.INT32]};g.MsgContentProtoSpec=a;g.ReportingMetaProtoSpec=b;g.DbQuotedMsgProtoSpec=c;g.VideoMsgContentProtoSpec=e;g.ImageMsgContentProtoSpec=f;g.AudioMsgContentProtoSpec=i;g.DocumentFileMsgContentProtoSpec=j;g.QuotedDbMediaProtoSpec=k;g.DbQuotedMsgContentProtoSpec=l;g.MessagesTableSchemaProtoSpec=m}),98);\n__d(\"MAWArmadilloEditMsgHistoryTableSchema.pb\",[\"MAWArmadilloMessagesTableSchema.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={author:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],editMsgHistoryId:[2,b.TYPES.INT32],editTs:[3,b.TYPES.INT64],msgContent:[4,b.TYPES.MESSAGE,d(\"MAWArmadilloMessagesTableSchema.pb\").MsgContentProtoSpec],originalMsgExternalId:[5,b.TYPES.STRING],specialTextSize:[6,b.TYPES.INT32],threadJid:[7,b.TYPES.STRING],editExternalId:[8,b.TYPES.STRING],sendStatus:[9,b.TYPES.INT32]};g.EditMsgHistoryTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloGroupInfoTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={groupJid:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],threadId:[2,b.TYPES.INT32],creator:[3,b.TYPES.STRING],creationTs:[4,b.TYPES.INT64],name:[5,b.TYPES.STRING],nameOwner:[6,b.TYPES.STRING],nameTs:[7,b.TYPES.INT64],msgExpiration:[8,b.TYPES.INT32],participantVersion:[9,b.TYPES.STRING],inviter:[10,b.TYPES.STRING],memberAddMode:[11,b.TYPES.STRING]};g.GroupInfoSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloGroupInvitesTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={inviterJid:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],invitedParticipantId:[2,b.TYPES.STRING],inviteCode:[3,b.TYPES.STRING],inviteExpirationTs:[4,b.TYPES.INT64],caption:[5,b.TYPES.STRING]};g.GroupInvitesTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloMediaTablesSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={};a.internalSpec={plaintextHash:[1,(d=d(\"WAProtoConst\")).TYPES.STRING],blobData:[2,d.TYPES.BYTES],mimetype:[3,d.TYPES.STRING],hashedPlaintextHash:[4,d.TYPES.STRING],chunkId:[5,d.TYPES.INT32]};b.internalSpec={mediaBackupId:[1,d.TYPES.INT32],mediaId:[2,d.TYPES.INT32],objectId:[3,d.TYPES.STRING],msgId:[4,d.TYPES.STRING],fbid:[5,d.TYPES.STRING]};c.internalSpec={msgId:[1,d.TYPES.STRING],mediaEntryData:[2,d.TYPES.BYTES]};e.internalSpec={duration:[1,d.TYPES.UINT32],width:[2,d.TYPES.UINT32],height:[3,d.TYPES.UINT32],mimetype:[4,d.TYPES.STRING],jpegThumbnail:[5,d.TYPES.BYTES],jpegThumbnailHeight:[6,d.TYPES.UINT32],jpegThumbnailWidth:[7,d.TYPES.UINT32],thumbnailPlaintextHash:[8,d.TYPES.STRING]};f.internalSpec={width:[1,d.TYPES.UINT32],height:[2,d.TYPES.UINT32],jpegThumbnail:[3,d.TYPES.BYTES],jpegThumbnailHeight:[4,d.TYPES.UINT32],jpegThumbnailWidth:[5,d.TYPES.UINT32],thumbnailPlaintextHash:[6,d.TYPES.STRING]};h.internalSpec={duration:[1,d.TYPES.UINT32],mimetype:[2,d.TYPES.STRING],played:[3,d.TYPES.BOOL]};i.internalSpec={filename:[1,d.TYPES.STRING],mimetype:[2,d.TYPES.STRING]};j.internalSpec={mediaType:[1,d.TYPES.STRING],plaintextHash:[2,d.TYPES.STRING],size:[3,d.TYPES.UINT64],mediaEntries:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c],ts:[5,d.TYPES.INT64],validatedVideoInfo:[6,d.TYPES.MESSAGE,e],validatedImageInfo:[7,d.TYPES.MESSAGE,f],validatedAudioInfo:[8,d.TYPES.MESSAGE,h],hashedPlaintextHash:[9,d.TYPES.STRING],mediaId:[10,d.TYPES.INT32],msgIds:[11,d.FLAGS.REPEATED|d.TYPES.STRING],objectId:[12,d.TYPES.STRING],fbid:[13,d.TYPES.STRING],validatedDocumentFileInfo:[14,d.TYPES.MESSAGE,i]};g.ChunkTableSchemaProtoSpec=a;g.MediaBackupSchemaProtoSpec=b;g.MediaEntriesProtoSpec=c;g.VideoMsgContentProtoSpec=e;g.ImageMsgContentProtoSpec=f;g.AudioMsgContentProtoSpec=h;g.DocumentFileMsgContentProtoSpec=i;g.MediaTableSchemaProtoSpec=j}),98);\n__d(\"MAWArmadilloMetaRowTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={};a.internalSpec={encryptedSerializedCat:[1,(d=d(\"WAProtoConst\")).TYPES.STRING],expirationTimeInSeconds:[2,d.TYPES.INT32]};b.internalSpec={publicKey:[1,d.TYPES.BYTES],privateKey:[2,d.TYPES.BYTES]};c.internalSpec={intValue:[1,d.TYPES.INT32],strValue:[2,d.TYPES.STRING],boolValue:[3,d.TYPES.BOOL],__oneofs__:{value:[\"intValue\",\"strValue\",\"boolValue\"]}};e.internalSpec={name:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,c]};f.internalSpec={expoKey:[1,d.TYPES.INT32],value:[2,d.TYPES.STRING]};h.internalSpec={abKey:[1,d.TYPES.STRING],abHash:[2,d.TYPES.STRING],lastSyncTime:[3,d.TYPES.INT64],expoKeyStr:[4,d.TYPES.STRING],refresh:[5,d.TYPES.INT64],internalExpoKeys:[6,d.FLAGS.REPEATED|d.TYPES.STRING],propExpoKeys:[7,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],propValues:[8,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e]};i.internalSpec={key:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],notAfter:[2,d.FLAGS.REQUIRED|d.TYPES.INT32],notBefore:[3,d.FLAGS.REQUIRED|d.TYPES.INT32]};j.internalSpec={leaf:[1,d.TYPES.MESSAGE,i],intermediate:[2,d.TYPES.MESSAGE,i]};k.internalSpec={cat:[1,d.TYPES.MESSAGE,a],deviceUUID:[2,d.TYPES.STRING],regId:[3,d.TYPES.INT32],identityKeyPair:[4,d.TYPES.MESSAGE,b],fbid:[5,d.TYPES.STRING],deviceId:[6,d.TYPES.INT32],lastSignedPrekeyId:[7,d.TYPES.INT32],lastPrekeyId:[8,d.TYPES.INT32],lastPrekeyGenerationId:[9,d.TYPES.INT32],edgeInfo:[10,d.TYPES.BYTES],clockSkew:[11,d.TYPES.INT32],msgrDeviceId:[12,d.TYPES.STRING],abProps:[13,d.TYPES.MESSAGE,h],registrationVersion:[14,d.TYPES.INT32],authKeyPair:[15,d.TYPES.MESSAGE,b],certificateChain:[16,d.TYPES.MESSAGE,j],lastSessionDeviceWasLinkedTo:[17,d.TYPES.STRING],restoreMigrationAttempts:[18,d.TYPES.INT32],__oneofs__:{value:[\"cat\",\"deviceUUID\",\"regId\",\"identityKeyPair\",\"fbid\",\"deviceId\",\"lastSignedPrekeyId\",\"lastPrekeyId\",\"lastPrekeyGenerationId\",\"edgeInfo\",\"clockSkew\",\"msgrDeviceId\",\"abProps\",\"registrationVersion\",\"authKeyPair\",\"certificateChain\",\"lastSessionDeviceWasLinkedTo\",\"restoreMigrationAttempts\"]}};l.internalSpec={key:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,k]};g.ValidCatProtoSpec=a;g.KeyPairProtoSpec=b;g.AbPropTypeSpec=c;g.AbPropValueSpec=e;g.ExpoKeyMapSpec=f;g.AbPropsConfigSpec=h;g.CertificateDetailsSpec=i;g.CertificateChainSpec=j;g.ValueProtoSpec=k;g.MetaRowTableSchemaProtoSpec=l}),98);\n__d(\"MAWArmadilloMissingKeysTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={deviceId:[1,(c=d(\"WAProtoConst\")).TYPES.INT32],deviceResponse:[2,c.TYPES.BOOL]};b.internalSpec={keyHex:[1,c.TYPES.STRING],keyId:[2,c.TYPES.BYTES],timestamp:[3,c.TYPES.INT64],deviceResponses:[4,c.FLAGS.REPEATED|c.TYPES.MESSAGE,a]};g.DeviceResponseSpec=a;g.MissingKeysTableSchemaProtoSpec=b}),98);\n__d(\"MAWArmadilloParticipantsTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={id:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],userJid:[2,b.TYPES.STRING],deliveredWatermarkTs:[3,b.TYPES.INT64],lastReadWatermarkTs:[4,b.TYPES.INT64],type:[5,b.TYPES.STRING],addressable:[6,b.TYPES.BOOL],lastReadActionTs:[7,b.TYPES.INT64],threadId:[9,b.TYPES.INT32],threadJid:[10,b.TYPES.STRING]};g.ParticipantsTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloPendingMutationsTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={SET:0,REMOVE:1};b={};b.internalSpec={id:[1,(c=d(\"WAProtoConst\")).TYPES.INT32],collection:[2,c.TYPES.STRING],index:[3,c.TYPES.STRING],binarySyncAction:[4,c.TYPES.BYTES],version:[5,c.TYPES.INT32],operation:[6,c.TYPES.ENUM,a],timestamp:[7,c.TYPES.INT64],action:[8,c.TYPES.STRING]};g.SYNCD_MUTATION_SYNCD_OPERATION=a;g.PendingMutationsTableSchemaProtoSpec=b}),98);\n__d(\"MAWArmadilloPersonalSenderKeyStatusTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={groupJid:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],senderKeyId:[2,b.TYPES.INT32],rotateSenderKey:[4,b.TYPES.BOOL],senderKeyTs:[5,b.TYPES.INT64],hasSenderKey:[6,b.FLAGS.REPEATED|b.TYPES.STRING]};g.PersonalSenderKeyStatusTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloReactionsTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={ack:[1,(b=d(\"WAProtoConst\")).TYPES.INT32],author:[2,b.TYPES.STRING],externalId:[3,b.TYPES.STRING],reactionId:[4,b.TYPES.STRING],reactToExternalId:[5,b.TYPES.STRING],reactToAuthor:[6,b.TYPES.STRING],reactToMsgId:[7,b.TYPES.STRING],threadJid:[8,b.TYPES.STRING],reaction:[9,b.TYPES.STRING],groupingKey:[10,b.TYPES.STRING],ts:[11,b.TYPES.INT64],rowId:[12,b.TYPES.INT32]};g.ReactionsTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloReceiptTablesSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={};a.internalSpec={deliveredTs:[1,(d=d(\"WAProtoConst\")).TYPES.INT64],readTs:[2,d.TYPES.INT64]};b.internalSpec={userJid:[1,d.TYPES.STRING],dbUserStatusTs:[2,d.TYPES.MESSAGE,a]};c.internalSpec={deviceJid:[1,d.TYPES.STRING],serializedPubKey:[2,d.TYPES.BYTES],baseKey:[3,d.TYPES.BYTES]};e.internalSpec={deviceJid:[1,d.TYPES.STRING],count:[2,d.TYPES.INT32]};f.internalSpec={msgId:[1,d.TYPES.STRING],statusTsPerUser:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,b],permittedIdentitiesPerDevice:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c],recipientDevices:[4,d.FLAGS.REPEATED|d.TYPES.STRING],retryCountsPerDevice:[5,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],waMsgId:[6,d.TYPES.STRING]};h.internalSpec={device:[1,d.TYPES.STRING],ts:[2,d.TYPES.INT64]};i.internalSpec={pendingReceiptId:[1,d.TYPES.STRING],thread:[2,d.TYPES.STRING],externalId:[3,d.TYPES.STRING],author:[4,d.TYPES.STRING],deliveryReceipts:[5,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h],readReceipts:[6,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h]};g.DbUserStatusTsProtoSpec=a;g.StatusTsPerUserProtoSpec=b;g.IdentitiesPerDeviceProtoSpec=c;g.RetryCountPerDeviceProtoSpec=e;g.ReceiptsTableSchemaProtoSpec=f;g.ReceiptsSpec=h;g.PendingReceiptsTableSchemaProtoSpec=i}),98);\n__d(\"MAWArmadilloRetroactiveBackupsStateTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={threadId:[1,d(\"WAProtoConst\").TYPES.INT64],msgId:[2,d(\"WAProtoConst\").TYPES.STRING]};g.RetroactiveBackupsStateTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloSignalTablesSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={deviceJid:[1,(d=d(\"WAProtoConst\")).TYPES.STRING],identity:[2,d.TYPES.BYTES],firstSeenTs:[3,d.TYPES.INT64],deviceName:[4,d.TYPES.STRING],platform:[5,d.TYPES.STRING],userJid:[6,d.TYPES.STRING]};b.internalSpec={keyId:[1,d.TYPES.INT32],encoded:[2,d.TYPES.BYTES],isDeleted:[3,d.TYPES.BOOL]};c.internalSpec={generationId:[1,d.TYPES.INT32],startingId:[2,d.TYPES.INT32],endingId:[3,d.TYPES.INT32],createdTs:[4,d.TYPES.INT64]};e.internalSpec={id:[1,d.TYPES.STRING],session:[2,d.TYPES.BYTES]};f.internalSpec={keyId:[1,d.TYPES.INT32],encoded:[2,d.TYPES.BYTES]};h.internalSpec={id:[1,d.TYPES.STRING],groupJid:[2,d.TYPES.STRING],userJid:[3,d.TYPES.STRING],deviceId:[4,d.TYPES.INT32],record:[5,d.TYPES.BYTES]};g.IdentityTableSchemaProtoSpec=a;g.PrekeyTableSchemaProtoSpec=b;g.PrekeyGenerationTableSchemaProtoSpec=c;g.SessionTableSchemaProtoSpec=e;g.SignedPrekeyTableSchemaProtoSpec=f;g.SenderKeySessionsTableSchemaProtoSpec=h}),98);\n__d(\"MAWArmadilloSyncActionsTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={index:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],binarySyncData:[2,b.TYPES.BYTES],actionState:[3,b.TYPES.STRING],version:[4,b.TYPES.INT32],keyId:[5,b.TYPES.BYTES],modelId:[6,b.TYPES.STRING],modelType:[7,b.TYPES.STRING],indexMac:[8,b.TYPES.BYTES],valueMac:[9,b.TYPES.BYTES],collection:[10,b.TYPES.STRING],timestamp:[11,b.TYPES.INT64],action:[12,b.TYPES.STRING]};g.SyncActionsTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloSyncKeysTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={currentIndex:[1,(c=d(\"WAProtoConst\")).TYPES.INT32],deviceIndexes:[2,c.FLAGS.REPEATED|c.TYPES.INT32],rawId:[3,c.TYPES.INT64]};b.internalSpec={id:[1,c.TYPES.BYTES],keyId:[2,c.TYPES.BYTES],keyData:[3,c.TYPES.BYTES],keyEpoch:[4,c.TYPES.INT64],timestamp:[5,c.TYPES.INT64],fingerprint:[6,c.TYPES.MESSAGE,a]};g.SyncKeyFingerprintSpec=a;g.SyncKeysTableSchemaProtoSpec=b}),98);\n__d(\"MAWArmadilloTasksTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={taskName:[1,d(\"WAProtoConst\").TYPES.STRING],scheduledTime:[2,d(\"WAProtoConst\").TYPES.INT64]};g.TasksTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloThreadsTableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={jid:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],threadOrder:[2,b.TYPES.STRING],folder:[4,b.TYPES.INT32],newestMsg:[5,b.TYPES.STRING],oldestMsg:[6,b.TYPES.STRING],lastReadMsg:[7,b.TYPES.STRING],lastReadMsgReceiptSent:[8,b.TYPES.STRING],lastReadMsgTs:[9,b.TYPES.INT64],newestMsgTs:[10,b.TYPES.INT64],muteExpireTimeMs:[11,b.TYPES.INT64],muteCallsExpireTimeMs:[12,b.TYPES.INT64],archived:[13,b.TYPES.BOOL],cannotReplyReason:[14,b.TYPES.STRING],chatId:[15,b.TYPES.INT32],optimisticThreadKey:[16,b.TYPES.STRING],isMigratedLocally:[17,b.TYPES.BOOL],snippetMsg:[18,b.TYPES.STRING],deduplicationKey:[19,b.TYPES.STRING],authoritativeThreadKey:[20,b.TYPES.STRING],snippetMsgTs:[21,b.TYPES.INT64],didInsertDualThreadCutoverAdminMsg:[22,b.TYPES.BOOL]};g.ThreadsTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloUnrenderedMessagesTableSchema.pb\",[\"MAWArmadilloContactsTableSchema.pb\",\"MAWArmadilloMessagesTableSchema.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={type:[1,(b=d(\"WAProtoConst\")).TYPES.STRING],ts:[2,b.TYPES.INT64],externalId:[3,b.TYPES.STRING],msgId:[4,b.TYPES.STRING],author:[5,b.TYPES.STRING],ack:[6,b.TYPES.INT32],resendCount:[7,b.TYPES.INT32],ephemeralSetting:[8,b.TYPES.MESSAGE,d(\"MAWArmadilloContactsTableSchema.pb\").EphemeralSettingProtoSpec],messageDeleteForMeTs:[9,b.TYPES.INT64],rowId:[10,b.TYPES.INT32],thread:[11,b.TYPES.INT32],mediaId:[12,b.TYPES.INT32],msgContent:[13,b.TYPES.STRING],threadJid:[14,b.TYPES.STRING],reportingMeta:[15,b.TYPES.MESSAGE,d(\"MAWArmadilloMessagesTableSchema.pb\").ReportingMetaProtoSpec],invitedParticipantUserJid:[16,b.TYPES.STRING],groupName:[17,b.TYPES.STRING],quote:[18,b.TYPES.MESSAGE,d(\"MAWArmadilloMessagesTableSchema.pb\").DbQuotedMsgProtoSpec],xmaMessageType:[19,b.TYPES.INT32],sortOrderMs:[20,b.TYPES.INT64]};g.UnrenderedMessagesTableSchemaProtoSpec=a}),98);\n__d(\"MAWArmadilloXMATableSchema.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={associatedMessageId:[1,(c=d(\"WAProtoConst\")).TYPES.STRING],author:[2,c.TYPES.STRING],ctas:[3,c.FLAGS.REPEATED|c.TYPES.MESSAGE,b],defaultCTA:[4,c.TYPES.MESSAGE,b],defaultPreviewMediaId:[5,c.TYPES.INT32],externalId:[6,c.TYPES.STRING],faviconMediaId:[7,c.TYPES.INT32],headerMediaId:[8,c.TYPES.INT32],headerTitle:[9,c.TYPES.STRING],isTombstoned:[10,c.TYPES.BOOL],maxSubtitleNumOfLines:[11,c.TYPES.INT32],maxTitleNumOfLines:[12,c.TYPES.INT32],msgId:[13,c.TYPES.STRING],overlayDescription:[14,c.TYPES.STRING],overlayIconGlyph:[15,c.TYPES.INT32],overlayTitle:[16,c.TYPES.STRING],previewMediaIds:[17,c.FLAGS.REPEATED|c.TYPES.INT32],subtitleText:[18,c.TYPES.STRING],targetExpiringAtSec:[19,c.TYPES.INT64],targetId:[20,c.TYPES.STRING],targetType:[21,c.TYPES.INT32],targetUsername:[22,c.TYPES.STRING],threadJid:[23,c.TYPES.STRING],titleText:[24,c.TYPES.STRING],xmaId:[25,c.TYPES.INT32],xmaLayoutType:[26,c.TYPES.INT32]};b.internalSpec={buttonType:[1,c.TYPES.INT32],title:[2,c.TYPES.STRING],actionUrl:[3,c.TYPES.STRING],nativeUrl:[4,c.TYPES.STRING],ctaType:[5,c.TYPES.STRING]};g.XMATableSchemaProtoSpec=a;g.CTAProtoSpec=b}),98);\n__d(\"MAWXMACTAUtil\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){var b=a.actionUrl,c=a.buttonType,d=a.nativeUrl;a=a.title;return{actionUrl:b,buttonType:c,nativeUrl:d,title:a}}function b(a){var b=a.actionUrl,c=a.buttonType,d=a.nativeUrl;a=a.title;return{actionUrl:b,buttonType:c,nativeUrl:d,title:a}}f.toMAWCTAEncode=a;f.fromMAWCTAEncode=b}),66);\n__d(\"WAServerSync.pb\",[\"$InternalEnum\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a=b(\"$InternalEnum\")({SET:0,REMOVE:1});c={};e={};f={};b={};var h={},i={},j={},k={},l={},m={},n={};c.internalSpec={version:[1,(d=d(\"WAProtoConst\")).TYPES.UINT64]};e.internalSpec={code:[1,d.TYPES.UINT64],text:[2,d.TYPES.STRING]};f.internalSpec={blob:[1,d.TYPES.BYTES]};b.internalSpec={blob:[1,d.TYPES.BYTES]};h.internalSpec={id:[1,d.TYPES.BYTES]};i.internalSpec={index:[1,d.TYPES.MESSAGE,f],value:[2,d.TYPES.MESSAGE,b],keyId:[3,d.TYPES.MESSAGE,h]};j.internalSpec={mediaKey:[1,d.TYPES.BYTES],directPath:[2,d.TYPES.STRING],handle:[3,d.TYPES.STRING],fileSizeBytes:[4,d.TYPES.UINT64],fileSha256:[5,d.TYPES.BYTES],fileEncSha256:[6,d.TYPES.BYTES]};k.internalSpec={version:[1,d.TYPES.MESSAGE,c],records:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],mac:[3,d.TYPES.BYTES],keyId:[4,d.TYPES.MESSAGE,h]};l.internalSpec={mutations:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};m.internalSpec={operation:[1,d.TYPES.ENUM,a],record:[2,d.TYPES.MESSAGE,i]};n.internalSpec={version:[1,d.TYPES.MESSAGE,c],mutations:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m],externalMutations:[3,d.TYPES.MESSAGE,j],snapshotMac:[4,d.TYPES.BYTES],patchMac:[5,d.TYPES.BYTES],keyId:[6,d.TYPES.MESSAGE,h],exitCode:[7,d.TYPES.MESSAGE,e],deviceIndex:[8,d.TYPES.UINT32],clientDebugData:[9,d.TYPES.BYTES]};g.SyncdMutation$SyncdOperation=a;g.SyncdVersionSpec=c;g.ExitCodeSpec=e;g.SyncdIndexSpec=f;g.SyncdValueSpec=b;g.KeyIdSpec=h;g.SyncdRecordSpec=i;g.ExternalBlobReferenceSpec=j;g.SyncdSnapshotSpec=k;g.SyncdMutationsSpec=l;g.SyncdMutationSpec=m;g.SyncdPatchSpec=n}),98);\n__d(\"MAWDbObjDecode\",[\"MAWArmadilloAppDataTableSchema.pb\",\"MAWArmadilloAppMetaTableSchema.pb\",\"MAWArmadilloCollectionVersionsTableSchema.pb\",\"MAWArmadilloContactsTableSchema.pb\",\"MAWArmadilloDeletedMessagesTableSchema.pb\",\"MAWArmadilloDeviceChangeAlertsTableSchema.pb\",\"MAWArmadilloDyiBatchTableSchema.pb\",\"MAWArmadilloEBMsgRangesTableSchema.pb\",\"MAWArmadilloEditMsgHistoryTableSchema.pb\",\"MAWArmadilloGroupInfoTableSchema.pb\",\"MAWArmadilloGroupInvitesTableSchema.pb\",\"MAWArmadilloMediaTablesSchema.pb\",\"MAWArmadilloMessagesTableSchema.pb\",\"MAWArmadilloMetaRowTableSchema.pb\",\"MAWArmadilloMissingKeysTableSchema.pb\",\"MAWArmadilloParticipantsTableSchema.pb\",\"MAWArmadilloPendingMutationsTableSchema.pb\",\"MAWArmadilloPersonalSenderKeyStatusTableSchema.pb\",\"MAWArmadilloReactionsTableSchema.pb\",\"MAWArmadilloReceiptTablesSchema.pb\",\"MAWArmadilloRetroactiveBackupsStateTableSchema.pb\",\"MAWArmadilloSignalTablesSchema.pb\",\"MAWArmadilloSyncActionsTableSchema.pb\",\"MAWArmadilloSyncKeysTableSchema.pb\",\"MAWArmadilloTasksTableSchema.pb\",\"MAWArmadilloThreadsTableSchema.pb\",\"MAWArmadilloUnrenderedMessagesTableSchema.pb\",\"MAWArmadilloXMATableSchema.pb\",\"MAWMsgType\",\"MAWXMACTAUtil\",\"WAServerSync.pb\",\"decodeProtobuf\",\"err\"],(function(a,b,c,d,e,f,g){var h={appData:function(a){return J(a)},appMeta:function(a){return K(a)},browserEncryptionMeta:function(a){throw c(\"err\")(\"unexpected table for decryption\")},chunk:function(a){return L(a)},collectionVersions:function(a){return V(a)},contacts:function(a){return E(a)},danglingQueue:function(a){throw c(\"err\")(\"unexpected table for decryption\")},deletedMessages:function(a){return n(a)},deviceChangeAlerts:function(a){return i(a)},dualSendMedia:function(a){throw c(\"err\")(\"unexpected table for decryption\")},dyiBatch:function(a){return P(a)},ebMessageRestoreTasks:function(a){throw c(\"err\")(\"unexpected table for decryption\")},ebMsgRanges:function(a){return Q(a)},ebRestoreQueue:function(a){throw c(\"err\")(\"unexpected table for decryption\")},ebUploadQueue:function(a){throw c(\"err\")(\"unexpected table for decryption\")},editMsgHistory:function(a){return Y(a)},ephemeralSettings:function(a){throw c(\"err\")(\"unexpected table for decryption\")},existingUsers:function(a){throw c(\"err\")(\"unexpected table for decryption\")},ftsBackloggedMessages:function(a){throw c(\"err\")(\"unexpected table for decryption\")},ftsEncryptionMeta:function(a){throw c(\"err\")(\"unexpected table for decryption\")},ftsIndexV3:function(a){throw c(\"err\")(\"unexpected table for decryption\")},groupInfo:function(a){return q(a)},groupInvites:function(a){return G(a)},historySyncQRCodeData:function(a){throw c(\"err\")(\"unexpected table for decryption\")},historySyncQRCodeSecretKey:function(a){throw c(\"err\")(\"unexpected table for decryption\")},identity:function(a){return t(a)},igMessageAuxiliaryInfo:function(a){throw c(\"err\")(\"unexpected table for decryption\")},isDualSend:function(a){throw c(\"err\")(\"unexpected table for decryption\")},jobs:function(a){throw c(\"err\")(\"unexpected table for decryption\")},media:function(a){return N(a)},mediaBackup:function(a){return M(a)},messages:function(a){return m(a)},meta:function(a){return s(a)},missingKeys:function(a){return T(a)},participants:function(a){return F(a)},pendingMessageStanzaQueue:function(a){throw c(\"err\")(\"unexpected table for decryption\")},pendingMutations:function(a){return U(a)},pendingReceipts:function(a){return C(a)},pendingStanzas:function(a){throw c(\"err\")(\"unexpected table for decryption\")},personalSenderKeyStatuses:function(a){return I(a)},prekey:function(a){return u(a)},prekeyGeneration:function(a){return v(a)},reactions:function(a){return O(a)},receipts:function(a){return B(a)},retroactiveBackupsState:function(a){return R(a)},senderKeySessions:function(a){return y(a)},sentBytesCache:function(a){throw c(\"err\")(\"unexpected table for decryption\")},session:function(a){return w(a)},signedPrekey:function(a){return x(a)},staleQueue:function(a){throw c(\"err\")(\"unexpected table for decryption\")},stanzaQueue:function(a){throw c(\"err\")(\"unexpected table for decryption\")},syncActions:function(a){return S(a)},syncKeys:function(a){return W(a)},tasks:function(a){return H(a)},threads:function(a){return D(a)},unrenderedMessages:function(a){return o(a)},uploadRetryStatus:function(a){throw c(\"err\")(\"unexpected table for decryption\")},xma:function(a){return X(a)}};function a(a,b){if(Object.prototype.hasOwnProperty.call(h,b))b=h[b](a);else throw c(\"err\")(\"not a valid table name\");return b}function i(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloDeviceChangeAlertsTableSchema.pb\").DeviceChangeAlertsTableSchemaProtoSpec,a);return{action:a.action,deviceJid:a.deviceJid,identity:a.identity,isArchived:a.isArchived,latitude:a.latitude,location:a.location,loggedOut:a.loggedOut,longitude:a.longitude,model:a.model,platform:a.platform,ts:a.ts}}function j(a){a=a.quote;var b;if(a!=null){if(a.content==null)throw c(\"err\")(\"QuotedMsgContent missing upon decoding\");var d=a.content,e=d.author,f=d.externalId,g=d.mediaId,h=d.msgContent,i=d.msgId,j=d.sourceId,k=d.specialTextSize,l=d.ts,m=d.type;d=d.xmaMessageType;b={content:babelHelpers[\"extends\"]({},a.content,{author:e,externalId:f,mediaId:g,msgContent:h,msgId:i,sourceId:j,specialTextSize:k,ts:l,type:m,xmaMessageType:d}),remoteJid:a.remoteJid}}return b}function k(a){if(a==null)return a;else return new Uint8Array(a)}function l(a){if(a==null||a.length===0)return new Set();else return new Set(a)}function m(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloMessagesTableSchema.pb\").MessagesTableSchemaProtoSpec,a);var b=a.msgContent;if(a.type===d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF){if(b==null)throw c(\"err\")(\"MsgContent missing upon decoding futureproof message\");b.subtype=b.subtype}var e=j(a),f=p(a.reportingMeta);return babelHelpers[\"extends\"]({},a,{msgContent:b,quote:e,reportingMeta:f})}function n(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloDeletedMessagesTableSchema.pb\").DeletedMessagesTableSchemaProtoSpec,a);return babelHelpers[\"extends\"]({},a)}function o(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloUnrenderedMessagesTableSchema.pb\").UnrenderedMessagesTableSchemaProtoSpec,a);var b=j(a),c=p(a.reportingMeta);return babelHelpers[\"extends\"]({},a,{quote:b,reportingMeta:c})}function p(a){if(a==null)return;return{frankingKey:a.frankingKey!=null?new Uint8Array(a.frankingKey):a.frankingKey,frankingTag:a.frankingTag!=null?new Uint8Array(a.frankingTag):a.frankingTag,frankingVersion:a.frankingVersion,reportingContent:a.reportingContent,reportingTag:a.reportingTag!=null?new Uint8Array(a.reportingTag):a.reportingTag}}function q(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloGroupInfoTableSchema.pb\").GroupInfoSchemaProtoSpec,a);return{creationTs:a.creationTs,creator:a.creator,inviter:a.inviter,memberAddMode:a.memberAddMode,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion}}function r(a,b){var d;a=a;if(a==null)d=a;else{var e=a.privateKey;a=a.publicKey;if(e==null||a==null)throw c(\"err\")(\"Decoding \"+b+\" private or public key missing\");d={privateKey:new Uint8Array(e),publicKey:new Uint8Array(a)}}return d}function s(a){var b,c,e,f;a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloMetaRowTableSchema.pb\").MetaRowTableSchemaProtoSpec,a);b=(b=a.value)==null?void 0:b.cat;if(b==null)b=b;else{var g;b={encrypted_serialized_cat:(g=a.value)==null?void 0:(g=g.cat)==null?void 0:g.encryptedSerializedCat,expiration_time_in_seconds:(g=a.value)==null?void 0:(g=g.cat)==null?void 0:g.expirationTimeInSeconds}}g=(g=a.value)==null?void 0:g.edgeInfo;g=k(g);c=r((c=a.value)==null?void 0:c.identityKeyPair,\"identityKeyPair\");e=r((e=a.value)==null?void 0:e.authKeyPair,\"authKeyPair\");return{value:{abProps:(f=a.value)==null?void 0:f.abProps,authKeyPair:e,cat:b,certificateChain:(f=a.value)==null?void 0:f.certificateChain,clockSkew:(e=a.value)==null?void 0:e.clockSkew,deviceId:(b=a.value)==null?void 0:b.deviceId,deviceUUID:(f=a.value)==null?void 0:f.deviceUUID,edgeInfo:g,fbid:(e=a.value)==null?void 0:e.fbid,identityKeyPair:c,lastPrekeyGenerationId:(b=a.value)==null?void 0:b.lastPrekeyGenerationId,lastPrekeyId:(f=a.value)==null?void 0:f.lastPrekeyId,lastSessionDeviceWasLinkedTo:(g=a.value)==null?void 0:g.lastSessionDeviceWasLinkedTo,lastSignedPrekeyId:(e=a.value)==null?void 0:e.lastSignedPrekeyId,regId:(c=a.value)==null?void 0:c.regId,registrationVersion:(b=a.value)==null?void 0:b.registrationVersion,restoreMigrationAttempts:(f=a.value)==null?void 0:f.restoreMigrationAttempts}}}function t(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").IdentityTableSchemaProtoSpec,a);var b=a.identity,c=a.firstSeenTs;b=k(b);return{deviceName:a.deviceName,firstSeenTs:c,identity:b,platform:a.platform}}function u(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").PrekeyTableSchemaProtoSpec,a);var b=a.encoded;b=k(b);return{encoded:b,isDeleted:a.isDeleted}}function v(a){return d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").PrekeyGenerationTableSchemaProtoSpec,a)}function w(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").SessionTableSchemaProtoSpec,a);a=a.session;a=k(a);return{session:a}}function x(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").SignedPrekeyTableSchemaProtoSpec,a);a=a.encoded;a=k(a);return{encoded:a}}function y(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").SenderKeySessionsTableSchemaProtoSpec,a);var b=a.record;b=k(b);return{deviceId:a.deviceId,record:b}}function z(a){if(a.length===0)return null;else return new Map(a.map(function(a){var b=a.deviceJid;if(b==null||a.serializedPubKey==null)throw c(\"err\")(\"Expected deviceJid or serializedPubKey are missing \");var d=new Uint8Array(a.serializedPubKey);a=k(a.baseKey);a={baseKey:a,pubKey:d};return[b,a]}))}function A(a){if(a==null)return null;else return new Map(a.map(function(a){if(a.deviceJid==null)throw c(\"err\")(\"Expected deviceJID is missing \");return[a.deviceJid,(a=a.count)!=null?a:0]}))}function B(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloReceiptTablesSchema.pb\").ReceiptsTableSchemaProtoSpec,a);var b,e=a.statusTsPerUser;e==null?b=new Map():b=new Map(e.map(function(a){if(a.userJid==null||a.dbUserStatusTs==null)throw c(\"err\")(\"Expected userJid or dbUserStatus are missing \");return[a.userJid,a.dbUserStatusTs]}));e=a.recipientDevices;e=l(e);return{permittedIdentitiesPerDevice:z(a.permittedIdentitiesPerDevice),recipientDevices:e,retryCountsPerDevice:A(a.retryCountsPerDevice),statusTsPerUser:b}}function C(a){return d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloReceiptTablesSchema.pb\").PendingReceiptsTableSchemaProtoSpec,a)}function D(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloThreadsTableSchema.pb\").ThreadsTableSchemaProtoSpec,a);return{archived:a.archived,cannotReplyReason:a.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:a.didInsertDualThreadCutoverAdminMsg,folder:a.folder,isMigratedLocally:a.isMigratedLocally,lastReadMsg:a.lastReadMsg,lastReadMsgReceiptSent:a.lastReadMsgReceiptSent,lastReadMsgTs:a.lastReadMsgTs,muteCallsExpireTimeMs:a.muteCallsExpireTimeMs,muteExpireTimeMs:a.muteExpireTimeMs,newestMsg:a.newestMsg,newestMsgTs:a.newestMsgTs,oldestMsg:a.oldestMsg,optimisticThreadKey:a.optimisticThreadKey,snippetMsg:a.snippetMsg,snippetMsgTs:a.snippetMsgTs}}function E(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloContactsTableSchema.pb\").ContactsTableSchemaProtoSpec,a);var b=a.icdcInfo,c;b!=null&&(c={devices:b.devices.map(function(a){return new Uint8Array(a)}),dirty:b.dirty,sequence:b.sequence,signingDeviceIndex:b.signingDeviceIndex,timestamp:b.timestamp});return{dhash:a.dhash,ephemeralSetting:a.ephemeralSetting,ephemeralSyncResponseBackoffInfo:a.ephemeralSyncResponseBackoffInfo,icdcFails:a.icdcFails,icdcInfo:c,isBlocked:a.isBlocked,isRestricted:a.isRestricted,lastSyncTs:a.lastSyncTs,nameForSearch:a.nameForSearch,relationship:a.relationship}}function F(a){return d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloParticipantsTableSchema.pb\").ParticipantsTableSchemaProtoSpec,a)}function G(a){return d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloGroupInvitesTableSchema.pb\").GroupInvitesTableSchemaProtoSpec,a)}function H(a){return d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloTasksTableSchema.pb\").TasksTableSchemaProtoSpec,a)}function I(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloPersonalSenderKeyStatusTableSchema.pb\").PersonalSenderKeyStatusTableSchemaProtoSpec,a);var b=a.hasSenderKey;b=l(b);return{hasSenderKey:b,rotateSenderKey:a.rotateSenderKey,senderKeyId:a.senderKeyId,senderKeyTs:a.senderKeyTs}}function J(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloAppDataTableSchema.pb\").AppDataTableSchemaProtoSpec,a);return{ack:a.ack,contents:a.contents,permittedIdentitiesPerDevice:z(a.permittedIdentitiesPerDevice),recipientDevices:new Set(a.recipientDevices),sendPartial:a.sendPartial,ts:a.ts}}function K(a){return d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloAppMetaTableSchema.pb\").AppMetaTableSchemaProtoSpec,a)}function L(a){return d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloMediaTablesSchema.pb\").ChunkTableSchemaProtoSpec,a)}function M(a){return d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloMediaTablesSchema.pb\").MediaBackupSchemaProtoSpec,a)}function N(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloMediaTablesSchema.pb\").MediaTableSchemaProtoSpec,a);var b,e=a.mediaEntries;e==null?b=new Map():b=new Map(e.map(function(a){if(a.msgId==null||a.mediaEntryData==null)throw c(\"err\")(\"Expected msgId or mediaEntryData are missing \");return[a.msgId,new Uint8Array(a.mediaEntryData)]}));return{mediaEntries:b,mediaType:a.mediaType,plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedDocumentFileInfo:a.validatedDocumentFileInfo,validatedImageInfo:a.validatedImageInfo,validatedVideoInfo:a.validatedVideoInfo}}function O(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloReactionsTableSchema.pb\").ReactionsTableSchemaProtoSpec,a);return{ack:a.ack,author:a.author,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,ts:a.ts}}function P(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloDyiBatchTableSchema.pb\").DyiBatchTableSchemaProtoSpec,a);return{isThread:a.isThread,numMessages:a.numMessages,numMessagesRestored:a.numMessagesRestored,numThreadsRestored:a.numThreadsRestored,oldestTs:a.oldestTs,qplFlowDescriptor:a.qplFlowDescriptor,qplInstanceKeyE2E:a.qplInstanceKeyE2E,qplInstanceKeyForThread:a.qplInstanceKeyForThread,threadId:a.threadId}}function Q(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloEBMsgRangesTableSchema.pb\").EBMsgRangesTableSchemaProtoSpec,a);return{maxMsgExternalId:a.maxMsgExternalId,maxMsgSortOrderMs:a.maxMsgSortOrderMs,minMsgExternalId:a.minMsgExternalId,minMsgSortOrderMs:a.minMsgSortOrderMs}}function R(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloRetroactiveBackupsStateTableSchema.pb\").RetroactiveBackupsStateTableSchemaProtoSpec,a);return{msgId:a.msgId}}function S(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloSyncActionsTableSchema.pb\").SyncActionsTableSchemaProtoSpec,a);return{binarySyncData:a.binarySyncData,keyId:a.keyId,timestamp:a.timestamp,valueMac:a.valueMac,version:a.version}}function T(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloMissingKeysTableSchema.pb\").MissingKeysTableSchemaProtoSpec,a);var b;a.deviceResponses==null?b=new Map():b=new Map(a.deviceResponses.map(function(a){if(a.deviceId==null)throw c(\"err\")(\"Expected deviceId is missing\");else return[a.deviceId,a.deviceResponse]}));return{deviceResponses:b,keyId:a.keyId,timestamp:a.timestamp}}function U(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloPendingMutationsTableSchema.pb\").PendingMutationsTableSchemaProtoSpec,a);var b;switch(a.operation){case d(\"MAWArmadilloPendingMutationsTableSchema.pb\").SYNCD_MUTATION_SYNCD_OPERATION.SET:b=d(\"WAServerSync.pb\").SyncdMutation$SyncdOperation.SET;break;case d(\"MAWArmadilloPendingMutationsTableSchema.pb\").SYNCD_MUTATION_SYNCD_OPERATION.REMOVE:b=d(\"WAServerSync.pb\").SyncdMutation$SyncdOperation.REMOVE;break;default:throw c(\"err\")(\"operation missing when decoding PendingMutation\")}return{binarySyncAction:a.binarySyncAction,operation:b,timestamp:a.timestamp,version:a.version}}function V(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloCollectionVersionsTableSchema.pb\").CollectionVersionsTableSchemaProtoSpec,a);return{finiteFailureStartTime:a.finiteFailureStartTime,isCollectionInMacMismatchFatal:a.isCollectionInMacMismatchFatal,isCollectionLthashInconsistent:a.isCollectionLthashInconsistent,ltHash:a.ltHash,state:a.state,version:a.version}}function W(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloSyncKeysTableSchema.pb\").SyncKeysTableSchemaProtoSpec,a);return{fingerprint:a.fingerprint,keyData:a.keyData,timestamp:a.timestamp}}function X(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloXMATableSchema.pb\").XMATableSchemaProtoSpec,a);return{author:a.author,ctas:a.ctas.map(function(a){return d(\"MAWXMACTAUtil\").fromMAWCTAEncode(a)}),defaultCTA:a.defaultCTA==null?a.defaultCTA:d(\"MAWXMACTAUtil\").fromMAWCTAEncode(a.defaultCTA),headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,msgId:a.msgId,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,previewMediaIds:a.previewMediaIds,subtitleText:a.subtitleText,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaLayoutType:a.xmaLayoutType}}function Y(a){a=d(\"decodeProtobuf\").decodeProtobuf(d(\"MAWArmadilloEditMsgHistoryTableSchema.pb\").EditMsgHistoryTableSchemaProtoSpec,a);return{author:a.author,editExternalId:a.editExternalId,editTs:a.editTs,msgContent:a.msgContent,sendStatus:a.sendStatus,specialTextSize:a.specialTextSize}}g.decodeDbObj=a}),98);\n__d(\"WASyncdKeyTypes\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}f.toSyncKeyId=a;f.fromSyncKeyId=b;f.toSyncKeyData=c;f.fromSyncKeyData=d}),66);\n__d(\"MAWDbObjEncode\",[\"MAWArmadilloAppDataTableSchema.pb\",\"MAWArmadilloAppMetaTableSchema.pb\",\"MAWArmadilloContactsTableSchema.pb\",\"MAWArmadilloDeletedMessagesTableSchema.pb\",\"MAWArmadilloDeviceChangeAlertsTableSchema.pb\",\"MAWArmadilloDyiBatchTableSchema.pb\",\"MAWArmadilloEBMsgRangesTableSchema.pb\",\"MAWArmadilloEditMsgHistoryTableSchema.pb\",\"MAWArmadilloGroupInfoTableSchema.pb\",\"MAWArmadilloGroupInvitesTableSchema.pb\",\"MAWArmadilloMediaTablesSchema.pb\",\"MAWArmadilloMessagesTableSchema.pb\",\"MAWArmadilloMetaRowTableSchema.pb\",\"MAWArmadilloParticipantsTableSchema.pb\",\"MAWArmadilloPersonalSenderKeyStatusTableSchema.pb\",\"MAWArmadilloReactionsTableSchema.pb\",\"MAWArmadilloReceiptTablesSchema.pb\",\"MAWArmadilloRetroactiveBackupsStateTableSchema.pb\",\"MAWArmadilloSignalTablesSchema.pb\",\"MAWArmadilloTasksTableSchema.pb\",\"MAWArmadilloThreadsTableSchema.pb\",\"MAWArmadilloUnrenderedMessagesTableSchema.pb\",\"MAWArmadilloXMATableSchema.pb\",\"MAWMsgType\",\"MAWXMACTAUtil\",\"WASyncdKeyTypes\",\"encodeProtobuf\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={appData:C,appMeta:D,browserEncryptionMeta:b,chunk:E,contacts:x,danglingQueue:b,deletedMessages:i,deviceChangeAlerts:a,dualSendMedia:b,dyiBatch:I,ebMessageRestoreTasks:b,ebMsgRanges:J,ebRestoreQueue:b,ebUploadQueue:b,editMsgHistory:M,ephemeralSettings:b,existingUsers:b,ftsBackloggedMessages:b,ftsEncryptionMeta:b,ftsIndexV3:b,groupInfo:k,groupInvites:z,historySyncQRCodeData:b,historySyncQRCodeSecretKey:b,identity:m,igMessageAuxiliaryInfo:b,isDualSend:b,jobs:b,media:G,mediaBackup:F,messages:f,meta:l,participants:y,pendingMessageStanzaQueue:b,pendingReceipts:v,pendingStanzas:b,personalSenderKeyStatuses:B,prekey:n,prekeyGeneration:o,reactions:H,receipts:u,retroactiveBackupsState:K,senderKeySessions:r,sentBytesCache:b,session:p,signedPrekey:q,staleQueue:b,stanzaQueue:b,tasks:A,threads:w,unrenderedMessages:j,uploadRetryStatus:b,xma:L};function a(a){a={action:a.action,deviceJid:a.deviceJid,identity:a.identity,isArchived:a.isArchived,latitude:a.latitude,location:a.location,loggedOut:a.loggedOut,longitude:a.longitude,model:a.model,platform:a.platform,ts:a.ts};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloDeviceChangeAlertsTableSchema.pb\").DeviceChangeAlertsTableSchemaProtoSpec,a).readByteArray()}}function b(a){throw c(\"err\")(\"unexpected table for encryption\")}function e(a,b){if(Object.prototype.hasOwnProperty.call(h,b))b=h[b](a);else throw c(\"err\")(\"not a valid table name\");return b}function f(a){a.altIndex;a.externalId;a.messageDeleteTs;a.messageExpirationTs;a.msgId;a.quoteExternalId;a.revokedExternalId;a.rowId;a.serverTs;a.sortOrderMs;a.threadJid;a.unsendMsgContentDeleteTs;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"altIndex\",\"externalId\",\"messageDeleteTs\",\"messageExpirationTs\",\"msgId\",\"quoteExternalId\",\"revokedExternalId\",\"rowId\",\"serverTs\",\"sortOrderMs\",\"threadJid\",\"unsendMsgContentDeleteTs\"]);a=a;var b;if(a.quote==null)b=a.quote;else{var c;c={author:a.quote.content.author,externalId:(c=a.quote)==null?void 0:c.content.externalId,mediaId:a.quote.content.mediaId,msgContent:a.quote.content.msgContent,msgId:a.quote.content.msgId,sourceId:a.quote.content.sourceId,specialTextSize:a.quote.content.specialTextSize,ts:a.quote.content.ts,type:a.quote.content.type,xmaMessageType:a.quote.content.xmaMessageType};c={content:c,remoteJid:a.quote.remoteJid};b=c}c=a.msgContent;a.type===d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF&&(c={protobuf:a.msgContent.protobuf,subtype:a.msgContent.subtype});var e=a.ravenEphemeralType,f=a.ravenEphemeralMediaState;e=e!=null?e:null;f=f!=null?f:null;c={ack:a.ack,author:a.author,editCount:a.editCount,ephemeralCounterStarted:a.ephemeralCounterStarted,ephemeralMsgDisappeared:a.ephemeralMsgDisappeared,ephemeralSetting:a.ephemeralSetting,forwardingScore:a.forwardingScore,isExpiredXmaMsg:a.isExpiredXmaMsg,isForwarded:a.isForwarded,mediaId:a.mediaId,msgContent:c,originalTs:a.originalTs,quote:b,ravenEphemeralMediaState:f,ravenEphemeralType:e,reportingMeta:a.reportingMeta,resendCount:a.resendCount,specialTextSize:a.specialTextSize,ts:a.ts,type:a.type,xmaMessageType:a.xmaMessageType};return{encodedFields:c,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloMessagesTableSchema.pb\").MessagesTableSchemaProtoSpec,c).readByteArray()}}function i(a){a.author;a.chat;a.externalId;a.rowId;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"author\",\"chat\",\"externalId\",\"rowId\"]);a={reason:String(a.reason)};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloDeletedMessagesTableSchema.pb\").DeletedMessagesTableSchemaProtoSpec,a).readByteArray()}}function j(a){var b;if(a.quote==null)b=a.quote;else{var c;c={author:a.quote.content.author,externalId:(c=a.quote)==null?void 0:c.content.externalId,mediaId:a.quote.content.mediaId,msgContent:a.quote.content.msgContent,msgId:a.quote.content.msgId,sourceId:a.quote.content.sourceId,ts:a.quote.content.ts,type:a.quote.content.type,xmaMessageType:a.quote.content.xmaMessageType};c={content:c,remoteJid:a.quote.remoteJid};b=c}c={ack:a.ack,author:a.author,ephemeralSetting:a.ephemeralSetting,groupName:a.groupName,invitedParticipantUserJid:a.invitedParticipantUserJid,mediaId:a.mediaId,msgContent:a.msgContent,quote:b,reportingMeta:a.reportingMeta,resendCount:a.resendCount,ts:a.ts,type:a.type,xmaMessageType:a.xmaMessageType};return{encodedFields:c,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloUnrenderedMessagesTableSchema.pb\").UnrenderedMessagesTableSchemaProtoSpec,c).readByteArray()}}function k(a){a={creationTs:a.creationTs,creator:a.creator,inviter:a.inviter,memberAddMode:a.memberAddMode,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloGroupInfoTableSchema.pb\").GroupInfoSchemaProtoSpec,a).readByteArray()}}function l(a){var b=a.value.cat==null?a.value.cat:{encryptedSerializedCat:a.value.cat.encrypted_serialized_cat,expirationTimeInSeconds:a.value.cat.expiration_time_in_seconds};b={value:{abProps:a.value.abProps,authKeyPair:a.value.authKeyPair,cat:b,certificateChain:a.value.certificateChain,clockSkew:a.value.clockSkew,deviceId:a.value.deviceId,deviceUUID:a.value.deviceUUID,edgeInfo:a.value.edgeInfo,fbid:a.value.fbid,identityKeyPair:a.value.identityKeyPair,lastPrekeyGenerationId:a.value.lastPrekeyGenerationId,lastPrekeyId:a.value.lastPrekeyId,lastSessionDeviceWasLinkedTo:a.value.lastSessionDeviceWasLinkedTo,lastSignedPrekeyId:a.value.lastSignedPrekeyId,regId:a.value.regId,registrationVersion:a.value.registrationVersion}};return{encodedFields:b,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloMetaRowTableSchema.pb\").MetaRowTableSchemaProtoSpec,b).readByteArray()}}function m(a){a={deviceName:a.deviceName,firstSeenTs:a.firstSeenTs,identity:a.identity,platform:a.platform};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").IdentityTableSchemaProtoSpec,a).readByteArray()}}function n(a){a={encoded:a.encoded,isDeleted:a.isDeleted};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").PrekeyTableSchemaProtoSpec,a).readByteArray()}}function o(a){a={createdTs:a.createdTs,endingId:a.endingId,startingId:a.startingId};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").PrekeyGenerationTableSchemaProtoSpec,a).readByteArray()}}function p(a){a={session:a.session};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").SessionTableSchemaProtoSpec,a).readByteArray()}}function q(a){a={encoded:a.encoded};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").SignedPrekeyTableSchemaProtoSpec,a).readByteArray()}}function r(a){a={deviceId:a.deviceId,record:a.record};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloSignalTablesSchema.pb\").SenderKeySessionsTableSchemaProtoSpec,a).readByteArray()}}function s(a){if(a==null)return a;else return Array.from(a,function(a){var b=a[0];a=a[1];return{baseKey:a.baseKey,deviceJid:b,serializedPubKey:a.pubKey}})}function t(a){if(a==null)return null;else return Array.from(a,function(a){var b=a[0];a=a[1];return{count:a,deviceJid:b}})}function u(a){var b=Array.from(a.statusTsPerUser,function(a){var b=a[0];a=a[1];return{dbUserStatusTs:a,userJid:b}}),c=Array.from(a.recipientDevices);c={permittedIdentitiesPerDevice:s(a.permittedIdentitiesPerDevice),recipientDevices:c,retryCountsPerDevice:t(a.retryCountsPerDevice),statusTsPerUser:b};return{encodedFields:c,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloReceiptTablesSchema.pb\").ReceiptsTableSchemaProtoSpec,c).readByteArray()}}function v(a){a={author:a.author,deliveryReceipts:a.deliveryReceipts,externalId:a.externalId,readReceipts:a.readReceipts,thread:a.thread};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloReceiptTablesSchema.pb\").PendingReceiptsTableSchemaProtoSpec,a).readByteArray()}}function w(a){a={archived:a.archived,cannotReplyReason:a.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:a.didInsertDualThreadCutoverAdminMsg,folder:a.folder,isMigratedLocally:a.isMigratedLocally,lastReadMsg:a.lastReadMsg,lastReadMsgReceiptSent:a.lastReadMsgReceiptSent,lastReadMsgTs:a.lastReadMsgTs,muteExpireTimeMs:a.muteExpireTimeMs,newestMsg:a.newestMsg,newestMsgTs:a.newestMsgTs,oldestMsg:a.oldestMsg,optimisticThreadKey:a.optimisticThreadKey,snippetMsg:a.snippetMsg,snippetMsgTs:a.snippetMsgTs};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloThreadsTableSchema.pb\").ThreadsTableSchemaProtoSpec,a).readByteArray()}}function x(a){a={dhash:a.dhash,icdcFails:a.icdcFails,icdcInfo:a.icdcInfo,lastSyncTs:a.lastSyncTs};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloContactsTableSchema.pb\").ContactsTableSchemaProtoSpec,a).readByteArray()}}function y(a){a={addressable:a.addressable,deliveredWatermarkTs:a.deliveredWatermarkTs,lastReadActionTs:a.lastReadActionTs,lastReadWatermarkTs:a.lastReadWatermarkTs,type:a.type};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloParticipantsTableSchema.pb\").ParticipantsTableSchemaProtoSpec,a).readByteArray()}}function z(a){a={caption:a.caption,inviteCode:a.inviteCode,inviteExpirationTs:a.inviteExpirationTs};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloGroupInvitesTableSchema.pb\").GroupInvitesTableSchemaProtoSpec,a).readByteArray()}}function A(a){a={scheduledTime:a.scheduledTime};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloTasksTableSchema.pb\").TasksTableSchemaProtoSpec,a).readByteArray()}}function B(a){var b=Array.from(a.hasSenderKey);b={hasSenderKey:b,rotateSenderKey:a.rotateSenderKey,senderKeyId:a.senderKeyId,senderKeyTs:a.senderKeyTs};return{encodedFields:b,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloPersonalSenderKeyStatusTableSchema.pb\").PersonalSenderKeyStatusTableSchemaProtoSpec,b).readByteArray()}}function C(a){var b;switch(a.contents.type){case\"meta_sync\":var e=[];for(var f=a.contents.actions,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;i.chatAction?e.push({chatAction:i.chatAction}):i.messageAction&&e.push({messageAction:i.messageAction})}b={actions:e,type:\"meta_sync\"};break;case\"backups_secrets\":b={encryptedBackupsSecrets:a.contents.encryptedBackupsSecrets,type:\"backups_secrets\"};break;case\"sync_key_share\":b={syncKeyShare:{keys:a.contents.syncKeyShare.keys,orphanKeys:(i=a.contents.syncKeyShare)==null?void 0:(h=i.orphanKeys)==null?void 0:h.map(d(\"WASyncdKeyTypes\").fromSyncKeyId)},type:\"sync_key_share\"};break;case\"sync_key_request\":b={syncKeyRequest:{keyIds:a.contents.syncKeyRequest.keyIds.map(d(\"WASyncdKeyTypes\").fromSyncKeyId)},type:\"sync_key_request\"};break;default:a.contents.type;throw c(\"err\")(\"Unknown appdata type: \"+a.contents.type)}g={ack:a.ack,contents:b,permittedIdentitiesPerDevice:s(a.permittedIdentitiesPerDevice),recipientDevices:Array.from(a.recipientDevices),sendPartial:a.sendPartial,ts:a.ts};return{encodedFields:g,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloAppDataTableSchema.pb\").AppDataTableSchemaProtoSpec,g).readByteArray()}}function D(a){a={value:a.value};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloAppMetaTableSchema.pb\").AppMetaTableSchemaProtoSpec,a).readByteArray()}}function E(a){a={blobData:a.blobData,mimetype:a.mimetype,plaintextHash:a.plaintextHash};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloMediaTablesSchema.pb\").ChunkTableSchemaProtoSpec,a).readByteArray()}}function F(a){a={fbid:a.fbid};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloMediaTablesSchema.pb\").MediaBackupSchemaProtoSpec,a).readByteArray()}}function G(a){var b=Array.from(a.mediaEntries,function(a){var b=a[0];a=a[1];return{mediaEntryData:a,msgId:b}});b={mediaEntries:b,mediaType:a.mediaType,plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedDocumentFileInfo:a.validatedDocumentFileInfo,validatedImageInfo:a.validatedImageInfo,validatedVideoInfo:a.validatedVideoInfo};return{encodedFields:b,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloMediaTablesSchema.pb\").MediaTableSchemaProtoSpec,b).readByteArray()}}function H(a){a={ack:a.ack,author:a.author,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,ts:a.ts};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloReactionsTableSchema.pb\").ReactionsTableSchemaProtoSpec,a).readByteArray()}}function I(a){a={isThread:a.isThread,numMessages:a.numMessages,numMessagesRestored:a.numMessagesRestored,numThreadsRestored:a.numThreadsRestored,oldestTs:a.oldestTs,qplFlowDescriptor:a.qplFlowDescriptor,qplInstanceKeyE2E:a.qplInstanceKeyE2E,qplInstanceKeyForThread:a.qplInstanceKeyForThread,threadId:a.threadId};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloDyiBatchTableSchema.pb\").DyiBatchTableSchemaProtoSpec,a).readByteArray()}}function J(a){a={maxMsgExternalId:a.maxMsgExternalId,maxMsgSortOrderMs:a.maxMsgSortOrderMs,minMsgExternalId:a.minMsgExternalId,minMsgSortOrderMs:a.minMsgSortOrderMs};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloEBMsgRangesTableSchema.pb\").EBMsgRangesTableSchemaProtoSpec,a).readByteArray()}}function K(a){a={msgId:a.msgId};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloRetroactiveBackupsStateTableSchema.pb\").RetroactiveBackupsStateTableSchemaProtoSpec,a).readByteArray()}}function L(a){var b=a.ctas==null?[]:a.ctas.map(function(a){return d(\"MAWXMACTAUtil\").toMAWCTAEncode(a)});b={author:a.author,ctas:b,defaultCTA:a.defaultCTA==null?a.defaultCTA:d(\"MAWXMACTAUtil\").toMAWCTAEncode(a.defaultCTA),headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,msgId:a.msgId,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,previewMediaIds:a.previewMediaIds,subtitleText:a.subtitleText,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaLayoutType:a.xmaLayoutType};return{encodedFields:b,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloXMATableSchema.pb\").XMATableSchemaProtoSpec,b).readByteArray()}}function M(a){a={author:a.author,editExternalId:a.editExternalId,editTs:a.editTs,msgContent:a.msgContent,sendStatus:a.sendStatus,specialTextSize:a.specialTextSize};return{encodedFields:a,proto:d(\"encodeProtobuf\").encodeProtobuf(d(\"MAWArmadilloEditMsgHistoryTableSchema.pb\").EditMsgHistoryTableSchemaProtoSpec,a).readByteArray()}}g.encodeDbObj=e}),98);\n__d(\"MAWDbObjEncryption\",[\"MAWBridge\",\"MAWCryptoConsts\",\"MAWDbObjDecode\",\"MAWDbObjEncode\",\"MAWIndexedDb\",\"MAWKeychainCrypto\",\"MAWKeychainNaClCrypto\",\"MAWKeychainUtil\",\"MAWQplProxy\",\"MWEARKeychainV3Errors\",\"err\",\"gkx\",\"isEncryptionAtRestEnabled\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=1\/1e3,i=\"_encryptedContent\";function a(a,b,e){if(!(c(\"isEncryptionAtRestEnabled\")()||c(\"gkx\")(\"23910\")===!0)||!d(\"MAWIndexedDb\").TABLES_TO_ENCRYPT.includes(b))return a;var f=Math.random()<h;f=f?d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(25300256,\"115\")):null;try{var g=babelHelpers[\"extends\"]({},a);e=e();var j=e.key;e=e.version;e=d(\"MAWKeychainUtil\").makeAAD(e,d(\"MAWCryptoConsts\").CIPHER_ID);var k=d(\"MAWDbObjEncode\").encodeDbObj(a,b),l=k.encodedFields;k=k.proto;Object.keys(l).forEach(function(b){Object.prototype.hasOwnProperty.call(a,b)&&delete g[b]});l=d(\"MAWKeychainNaClCrypto\").encrypt(j,k,e);g[i]=l;f==null?void 0:f.endSuccess();return g}catch(a){f==null?void 0:f.endFail(\"ear_encrypt_fail\");throw c(\"err\")(a.message+\" - Encrypted dexie was unable to encrypt an entity for table \"+b)}}function b(a,b,e){if(!d(\"MAWIndexedDb\").TABLES_TO_ENCRYPT.includes(b)||!Object.prototype.hasOwnProperty.call(a,i))return a;var f=Math.random()<h;f=f?d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(25313004,\"118\")):null;try{var g=a[i];a=babelHelpers[\"extends\"]({},a);var j=d(\"MAWKeychainCrypto\").getKeyVersionFromCipherDataString(g);e=e(j);e=e.key;var k={};e=d(\"MAWKeychainNaClCrypto\").decrypt(e,g,j);var l=d(\"MAWDbObjDecode\").decodeDbObj(e,b);Object.keys(l).forEach(function(a){k[a]=l[a]});delete a[i];g=babelHelpers[\"extends\"]({},a,k);f==null?void 0:f.endSuccess();return g}catch(a){f==null?void 0:f.endFail(\"ear_decrypt_fail\");(a instanceof d(\"MAWKeychainNaClCrypto\").EARDecryptionError||a instanceof d(\"MWEARKeychainV3Errors\").EARKeychainNotFoundError)&&(d(\"MAWIndexedDb\").deleteDb(),c(\"gkx\")(\"23931\")&&d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"earDecryptionFailure\",{tableName:b}));throw c(\"err\")(a.message+\" - Encrypted dexie was unable to decrypt an entity for table \"+b)}}g.ENCRYPTED_COLUMN_NAME=i;g.encryptDbObj=a;g.decryptDbObj=b}),98);\/*FB_PKG_DELIM*\/\n__d(\"MAWRestoreRewriteUtils\",[\"gkx\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(){return c(\"qex\")._(\"656\")===!0};a=function(){return h()||c(\"gkx\")(\"23928\")};g.isOneDBEnabled=h;g.shouldUseRestoreLLA=a}),98);\n__d(\"WAFixedSizeMap\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(){function a(a){a=a.max;this.$1=new Map();this.$2=new Map();this.$3=0;this.$4=100;this.$4=a}var b=a.prototype;b.has=function(a){return this.$1.has(a)};b.get=function(a){return this.$1.get(a)};b.set=function(a,b){this.$1.set(a,b);this.$2.set(this.$3,a);this.$3+=1;b=this.$2.get(this.$3-this.$4-1);b!=null&&(this.$1[\"delete\"](b),this.$2[\"delete\"](this.$3-this.$4-1))};b.clear=function(){this.$1.clear(),this.$2.clear(),this.$3=0};b.size=function(){return this.$1.size};return a}();f.FixedSizeMap=a}),66);\n__d(\"MAWJobActionsV2\",[\"MAWTransactionMode\",\"Promise\",\"WAFixedSizeMap\",\"WAHex\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){return new(h||(h=b(\"Promise\")))(function(b,c){a.onsuccess=b,a.onerror=c})}function j(a){return i(a).then(function(a){return a.target.result})}function k(a,c,e){return new(h||(h=b(\"Promise\")))(function(b,f){var g=a(d(\"MAWTransactionMode\").READONLY).index(c);g=g.openCursor(IDBKeyRange.only(e));var h=[];g.onsuccess=function(a){a=a.target.result;if(!a){b(h);return}h.push(a.value);a[\"continue\"]()};g.onerror=function(a){return f(a)}})}var l=new(d(\"WAFixedSizeMap\").FixedSizeMap)({max:100});function a(a,c){var e,f=c.args,g=c.scheduleConfig,i=c.type,l=c.uniqKey;c=c.version;c=c===void 0?1:c;e=JSON.stringify([i,(e=l)!=null?e:d(\"WAHex\").randomHex(32)]);var n={backedOffCount:0,current:f,original:f,scheduleConfig:g,startTime:d(\"WATimeUtils\").unixTime(),step:\"$unstarted\",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:i,uniqKey:e,version:c,waitUntil:null},o=function(){var b,c=a().add(n),d=j(c);if(n.uniqKey==null&&typeof ((b=c.transaction)==null?void 0:b.commit)===\"function\")try{c.transaction.commit()}catch(a){}return d.then(function(a){return{id:a,newlyCreated:!0}})};if(l!=null)return k(a,\"uniqKey\",e).then(function(c){if(c.length===0)return o();var d=[],e=null;c.forEach(function(b){b.step!==\"$finished\"?e=b:d.push(m(a,b.jobId))});return(h||(h=b(\"Promise\"))).all(d).then(function(){return e!=null?{id:e.jobId,newlyCreated:!1}:o()})});else return o()}function m(a,b){return j(a()[\"delete\"](b))}function c(a,b){return j(a().get(b))}function e(a,b){return j(a().put(b))}function f(a){return j(a().getAll())}function n(a){try{return i(a().clear()).then(function(){})}catch(a){if(a.name===\"NotFoundError\")return(h||(h=b(\"Promise\"))).resolve();throw a}}g.recentFinishedJobsCache=l;g.maybeCreateJob=a;g.deletePersistedJob=m;g.readPersistedJob=c;g.updatePersistedJob=e;g.readAllPersistedJobs=f;g.clearJobs=n}),98);\n__d(\"WAGetHashFromProtocolMsgId\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a.externalId+\"_\"+a.author+\"_\"+a.chat}f.getHashFromProtocolMsgId=a}),66);\n__d(\"MAWEBUploadTrackingUtils\",[\"MAWAckLevel\",\"MAWEBSwitch\",\"MAWExternalId\",\"MAWMsgType\",\"MAWQplProxy\",\"WAGetHashFromProtocolMsgId\",\"WAGlobals\",\"WAHashStringToNumber\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=!1;function a(){h=!0}function i(a,b,e,f,g){g===void 0&&(g=!1);if(!c(\"MAWEBSwitch\").isEnabled())return;d(\"MAWQplProxy\").startQplUserFlow(c(\"qpl\")._(521480745,\"830\"),{bool:{eb_switch:c(\"MAWEBSwitch\").isEnabled(),eb_upload_queue:d(\"WAGlobals\").getConfig().useEbUploadQueue(),fromUploadQueue:g,middleware_init:h},string:{externalId:a,msgType:b,triggerType:e}},f);j(f,\"upload_tracking_started\")}function j(a,b,e){d(\"MAWQplProxy\").sendQplPointThroughBridge(c(\"qpl\")._(521480745,\"830\"),b,{annotations:e,instanceKey:a})}function b(a,b,e){j(a,\"upload_tracking_failed\"),d(\"MAWQplProxy\").sendQPLFailThroughBridge(c(\"qpl\")._(521480745,\"830\"),b,e,a)}function e(a,b,e){j(a,b,e),d(\"MAWQplProxy\").sendQPLSuccessThroughBridge(c(\"qpl\")._(521480745,\"830\"),void 0,a)}var k=new Map();function l(){return d(\"WAHashStringToNumber\").hashStringToNumber(d(\"MAWExternalId\").generateExternalId())}function m(a,b){b===void 0&&(b=0);return d(\"WAHashStringToNumber\").hashStringToNumber(d(\"WAGetHashFromProtocolMsgId\").getHashFromProtocolMsgId(a)+\"_\"+d(\"WAGlobals\").getMyDeviceJid()+\"_\"+b)}function f(a,b,c,e){c===void 0&&(c=0);if(!d(\"WAGlobals\").getConfig().useEbUploadQueue())return;c=m(a,c);i(a.externalId,e,b,c,!0)}function n(a){return c(\"MAWEBSwitch\").isEnabled()&&d(\"MAWMsgType\").isEBSupportedMsgType(a.type)&&a.ack>=d(\"MAWAckLevel\").ACK.sent&&a.serverTs!=null&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)}function o(a,b){if(!n(a))return;p(a.externalId,a.type,b)}function p(a,b,c){var d=q(a);d!=null&&i(a,b,c,d)}function q(a){if(k.get(a)!=null)return null;var b=l();k.set(a,b);return b}function r(){var a=new Map(k);k.clear();return a}function s(a){a=k.get(a);return a!=null?a:null}g.setMiddlewareInitRan=a;g.startUploadTracking=i;g.addPoint=j;g.endFail=b;g.endSuccess=e;g.genInstanceKeyOnly=l;g.genInstanceKeyForUploadQueue=m;g.maybeStartTrackingForUploadQueue=f;g.isUploadSupported=n;g.maybeStartTrackingForMiddleware=o;g.startTrackingForMiddleware=p;g.genInstanceKeyForMiddleware=q;g.cloneAndClearInstanceMap=r;g.removeInstanceKey=s}),98);\n__d(\"MAWEncryptedBackupsStateManager\",[\"MAWEBSwitch\",\"MAWEBUploadTrackingUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){switch(a){case 1:return;case 3:c(\"MAWEBSwitch\").set(!0);return;case 2:case 4:default:c(\"MAWEBSwitch\").set(!1);h();return}}function h(){d(\"MAWEBUploadTrackingUtils\").cloneAndClearInstanceMap().forEach(function(a,b){d(\"MAWEBUploadTrackingUtils\").endSuccess(a,\"upload_tracking_cancelled_eb_turned_off\",{string:{externalId:b,from:\"backup state turned off\"}})})}function b(a){return a===4||a===3}g.setEncryptedBackupsState=a;g.eligibleForEBUX=b}),98);\n__d(\"MAWXMAUtils\",[\"MAWMsgType\",\"WAArmadilloXMA.pb\",\"WALogger\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Hit Unreachable XMAType \",\" - checking isXMAShare\"]);h=function(){return a};return a}function a(a){return!a||a.type!==d(\"MAWMsgType\").MSG_TYPE.XMA?null:a}function b(a){if(a==null)return!1;switch(a){case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return!0;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return!1;case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:return!0;default:d(\"WALogger\").ERROR(h(),a);return!1}}function c(a){return a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE||a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function e(a){return a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE}function f(a){return a==null?!1:a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function i(a){return a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY}function j(a,b){return a!=null&&a||b!=null&&b<d(\"WATimeUtils\").unixTime()}function k(a){a=a.ctas;a!=null&&(a=a.filter(function(a){return a.buttonType!==d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE}));return a}function l(a){return babelHelpers[\"extends\"]({},a,{ctas:void 0,defaultCTA:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function m(a){return babelHelpers[\"extends\"]({},a,{ctas:void 0,defaultCTA:void 0,defaultPreviewMediaId:void 0,faviconMediaId:void 0,headerMediaId:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,previewMediaIds:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function n(a){return a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY||a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY}function o(a){return a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION}function p(a){return a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION||a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION}function q(a){return a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE||a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE||a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE}function r(a){return a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE||a===d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE}function s(a){switch(a){case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:return!0;default:return!1}}g.maybeXMAMessage=a;g.isXMAShare=b;g.isXMAStoryShare=c;g.isXMAExternalLinkShare=e;g.isIGXMAStoryShare=f;g.isXMAPostPrivateReply=i;g.isXMAExpired=j;g.removeCTAsForStoryMentionXMA=k;g.buildUnstoredTombstonedXMA=l;g.buildTombstonedDbXMA=m;g.isXMAStoryReply=n;g.isXMAStoryReaction=o;g.isXMAStoryMention=p;g.isIGXMAPostShare=q;g.isXMAStoryHighlightShare=r;g.isRtcXMA=s}),98);\n__d(\"MAWLocalizationType\",[],(function(a,b,c,d,e,f){\"use strict\";a=\"emptySnippet\";b=\"currentUserCreatedGroup\";c=\"participantCreatedGroup\";d=\"unknownUserCreatedGroup\";e=\"currentUserNamedGroup\";var g=\"unkonwnUserNamedGroup\",h=\"participantNamedGroup\",i=\"currentUserAddedDevice\",j=\"participantAddedDevice\",k=\"currentUserRemovedDevice\",l=\"participantRemovedDevice\",m=\"currentUserUpdatedDevice\",n=\"participantUpdatedDevice\",o=\"currentUserAddedOneParticipant\",p=\"currentUserAddedTwoParticipant\",q=\"currentUserAddedMoreThanTwoParticipant\",r=\"participantAddedYou\",s=\"participantAddedYouAndOneUser\",t=\"participantAddedYouAndMoreThanOneUsers\",u=\"unknowUserAddedYou\",v=\"unknowUserAddedYouAndOneUser\",w=\"unknowUserAddedYouAndMoreThanOneUser\",x=\"unknownUserAddedOneUser\",y=\"unknownUserAddedTwoUser\",z=\"unknownUserAddedMoreThanTwoUser\",A=\"participantAddedOneUser\",B=\"participantAddedTwoUser\",C=\"participantAddedMoreThanTwoUser\",D=\"currentUserRemovedOneParticipant\",E=\"currentUserRemovedTwoParticipant\",F=\"currentUserRemovedMoreThanTwoParticipant\",G=\"participantRemovedYou\",H=\"participantRemovedYouAndOneUser\",I=\"participantRemovedYouAndMoreThanOneUsers\",J=\"unknowUserRemovedYou\",K=\"unknowUserRemovedYouAndOneUser\",L=\"unknowUserRemovedYouAndMoreThanOneUser\",M=\"unknownUserRemovedOneUser\",N=\"unknownUserRemovedTwoUser\",aa=\"unknownUserRemovedMoreThanTwoUser\",ba=\"participantRemovedOneUser\",ca=\"participantRemovedTwoUser\",da=\"participantRemovedMoreThanTwoUser\",ea=\"participantLeftGroup\",fa=\"currentUserLeftGroup\",ga=\"currentUserGotPromoted\",ha=\"currentUserGotDemoted\",ia=\"participantGotPromoted\",ja=\"participantGotDemoted\",ka=\"participantPromotedYou\",la=\"participantDemotedYou\",ma=\"currentUserPromotedParticipant\",na=\"currentUserDemotedParticipant\",oa=\"participantDemotedParticipant\",pa=\"participantPromotedParticipant\",qa=\"participantSelfDemoted\",ra=\"currentUserSelfDemoted\",O=\"currentUserSendText\",P=\"currentUserSendImage\",Q=\"currentUserSendVideo\",R=\"currentUserSendAudio\",S=\"currentUserSendGif\",sa=\"currentUserSendSticker\",ta=\"participantSendText\",ua=\"participantSendTextInGroup\",va=\"participantSendImage\",wa=\"participantSendVideo\",xa=\"participantSendAudio\",ya=\"participantSendGif\",za=\"participantSendSticker\",Aa=\"unavailableSnippet\",Ba=\"twoUsersConnected\",Ca=\"twoUsersConnectedOneMSplit\",Da=\"reachabilityError\",T=\"unknownUserEphemeralSettingTurnedOnSeconds\",Ea=\"unknownUserEphemeralSettingTurnedOnMinutes\",Fa=\"unknownUserEphemeralSettingTurnedOnHours\",Ga=\"unknownUserEphemeralSettingTurnedOnDays\",Ha=\"youEphemeralSettingTurnedOnSeconds\",Ia=\"youEphemeralSettingTurnedOnMinutes\",Ja=\"youEphemeralSettingTurnedOnHours\",Ka=\"youEphemeralSettingTurnedOnDays\",La=\"participantEphemeralSettingTurnedOnSeconds\",Ma=\"participantEphemeralSettingTurnedOnMinutes\",Na=\"participantEphemeralSettingTurnedOnHours\",Oa=\"participantEphemeralSettingTurnedOnDays\",Pa=\"unknownUserEphemeralSettingChangeSeconds\",Qa=\"unknownUserEphemeralSettingChangeMinutes\",Ra=\"unknownUserEphemeralSettingChangeHours\",Sa=\"unknownUserEphemeralSettingChangeDays\",Ta=\"youEphemeralSettingChangeSeconds\",Ua=\"youEphemeralSettingChangeMinutes\",Va=\"youEphemeralSettingChangeHours\",Wa=\"youEphemeralSettingChangeDays\",Xa=\"participantEphemeralSettingChangeSeconds\",Ya=\"participantEphemeralSettingChangeMinutes\",Za=\"participantEphemeralSettingChangeHours\",$a=\"participantEphemeralSettingChangeDays\",ab=\"sendBasedUnknownUserEphemeralSettingTurnedOnSeconds\",bb=\"sendBasedUnknownUserEphemeralSettingTurnedOnMinutes\",cb=\"sendBasedUnknownUserEphemeralSettingTurnedOnHours\",db=\"sendBasedUnknownUserEphemeralSettingTurnedOnDays\",eb=\"sendBasedYouEphemeralSettingTurnedOnSeconds\",fb=\"sendBasedYouEphemeralSettingTurnedOnMinutes\",gb=\"sendBasedYouEphemeralSettingTurnedOnHours\",hb=\"sendBasedYouEphemeralSettingTurnedOnDays\",ib=\"sendBasedParticipantEphemeralSettingTurnedOnSeconds\",jb=\"sendBasedParticipantEphemeralSettingTurnedOnMinutes\",kb=\"sendBasedParticipantEphemeralSettingTurnedOnHours\",lb=\"sendBasedParticipantEphemeralSettingTurnedOnDays\",mb=\"sendBasedUnknownUserEphemeralSettingChangeSeconds\",nb=\"sendBasedUnknownUserEphemeralSettingChangeMinutes\",ob=\"sendBasedUnknownUserEphemeralSettingChangeHours\",pb=\"sendBasedUnknownUserEphemeralSettingChangeDays\",qb=\"sendBasedYouEphemeralSettingChangeSeconds\",rb=\"sendBasedYouEphemeralSettingChangeMinutes\",sb=\"sendBasedYouEphemeralSettingChangeHours\",tb=\"sendBasedYouEphemeralSettingChangeDays\",ub=\"sendBasedParticipantEphemeralSettingChangeSeconds\",vb=\"sendBasedParticipantEphemeralSettingChangeMinutes\",wb=\"sendBasedParticipantEphemeralSettingChangeHours\",xb=\"sendBasedParticipantEphemeralSettingChangeDays\",yb=\"unknownUserEphemeralSettingTurnedOff\",zb=\"youEphemeralSettingTurnedOff\",Ab=\"participantEphemeralSettingTurnedOff\",Bb=\"ephemeralSettingsAutoReset\",Cb=\"currentUserUnsentMessage\",Db=\"participantUnsentMessage\",Eb=\"participantReactMessage\",Fb=\"participantReactMessageInGroup\",U=\"unknownUserEphemeralTakeScreenshot\",Gb=\"unknownUserEphemeralRecordScreen\",Hb=\"youEphemeralTakeScreenshot\",Ib=\"youEphemeralRecordScreen\",Jb=\"participantEphemeralTakeScreenshot\",Kb=\"participantEphemeralRecordScreen\",Lb=\"icdcAlertAdminMessage\",Mb=\"yourDeviceICDCAlertAdminMessage\",V=\"cutoverThreadAdminMessage\",W=\"cutoverIGDThreadAdminMessage\",X=\"cutoverRollbackAdminMessage\",Y=\"currentUserSendAttachment\",Nb=\"participantSendAttachment\",Ob=\"currentUserSentPost\",Pb=\"currentUserSentReel\",Qb=\"currentUserSentStory\",Rb=\"currentUserSentEvent\",Sb=\"currentUserMentionedStoryIG\",Tb=\"currentUserReceivedStoryMentionIG\",Ub=\"participantSentPost\",Vb=\"participantSentReel\",Wb=\"participantSentStory\",Xb=\"participantSentEvent\",Yb=\"currentUserSentStoryHighlight\",Zb=\"participantSentStoryHighlight\",Z=\"dualThreadCutoverAdminMessage\",$=\"e2eeThreadDescription\",$b=\"debugMsg\",ac=\"currentUserMissedAudioCall\",bc=\"participantMissedAudioCall\",cc=\"currentUserMissedVideoCall\",dc=\"participantMissedVideoCall\",ec=\"currentUserAudioCalled\",fc=\"participantAudioCalled\",gc=\"currentUserVideoCalled\",hc=\"participantVideoCalled\",ic=\"currentUserStartedGroupAudioCall\",jc=\"participantStartedGroupAudioCall\",kc=\"currentUserStartedGroupVideoCall\",lc=\"participantStartedGroupVideoCall\",mc=\"currentUserCustomizeHotlike\",nc=\"participantCustomizeHotlike\",oc=\"currentUserCustomizeNickname\",pc=\"currentUserCustomizeTheme\",qc=\"currentUserCustomizePhoto\",rc=\"participantCustomizeParticipantNickname\",sc=\"participantClearParticipantNickname\",tc=\"participantCustomizeTheme\",uc=\"participantCustomizePhoto\",vc=\"participantCustomizeCurrentUserNickname\",wc=\"currentUserSetOwnNickname\",xc=\"currentUserClearOwnNickname\",yc=\"currentUserClearParticipantNickname\",zc=\"participantSetOwnNickname\",Ac=\"participantClearOwnNickname\",Bc=\"participantClearCurrentUserNickname\",Cc=\"currentUserSetAddModeAdminOnly\",Dc=\"currentUserSetAddModeAllMembers\",Ec=\"participantSetAddModeAdminOnly\",Fc=\"participantSetAddModeAllMembers\",Gc=\"serverSetAddModeAdminOnly\",Hc=\"serverSetAddModeAllMembers\";q={CURRENT_USER_ADDED_DEVICE:i,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:q,CURRENT_USER_ADDED_ONE_PARTICIPANT:o,CURRENT_USER_ADDED_TWO_PARTICIPANTS:p,CURRENT_USER_AUDIO_CALLED:ec,CURRENT_USER_CLEAR_OWN_NICKNAME:xc,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:yc,CURRENT_USER_CREATED_GROUP:b,CURRENT_USER_CUSTOMIZE_HOTLIKE:mc,CURRENT_USER_CUSTOMIZE_NICKNAME:oc,CURRENT_USER_CUSTOMIZE_PHOTO:qc,CURRENT_USER_CUSTOMIZE_THEME:pc,CURRENT_USER_DEMOTED_PARTICIPANT:na,CURRENT_USER_GOT_DEMOTED:ha,CURRENT_USER_GOT_PROMOTED:ga,CURRENT_USER_LEFT_GROUP:fa,CURRENT_USER_MENTIONED_STORY_IG:Sb,CURRENT_USER_MISSED_AUDIO_CALL:ac,CURRENT_USER_MISSED_VIDEO_CALL:cc,CURRENT_USER_NAMED_GROUP:e,CURRENT_USER_PROMOTED_PARTICIPANT:ma,CURRENT_USER_RECEIVED_STORY_MENTION_IG:Tb,CURRENT_USER_REMOVED_DEVICE:k,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:F,CURRENT_USER_REMOVED_ONE_PARTICIPANT:D,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:E,CURRENT_USER_SELF_DEMOTED:ra,CURRENT_USER_SEND_ATTACHMENT:Y,CURRENT_USER_SEND_AUDIO:R,CURRENT_USER_SEND_GIF:S,CURRENT_USER_SEND_IMAGE:P,CURRENT_USER_SEND_STICKER:sa,CURRENT_USER_SEND_TEXT:O,CURRENT_USER_SEND_VIDEO:Q,CURRENT_USER_SENT_EVENT:Rb,CURRENT_USER_SENT_POST:Ob,CURRENT_USER_SENT_REEL:Pb,CURRENT_USER_SENT_STORY:Qb,CURRENT_USER_SENT_STORY_HIGHLIGHT:Yb,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:Cc,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:Dc,CURRENT_USER_SET_OWN_NICKNAME:wc,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:ic,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:kc,CURRENT_USER_UNSENT_MESSAGE:Cb,CURRENT_USER_UPDATED_DEVICE:m,CURRENT_USER_VIDEO_CALLED:gc,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:W,CUTOVER_ROLLBACK_ADMIN_MESSAGE:X,CUTOVER_THREAD_ADMIN_MESSAGE:V,DEBUG_MSG:$b,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:Z,E2EE_THREAD_DESCRIPTION:$,EMPTY_SNIPPET:a,EPHEMERAL_SETTINGS_AUTO_RESET:Bb,ICDC_ALERT_ADMIN_MESSAGE:Lb,PARTICIPANT_ADDED_DEVICE:j,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:C,PARTICIPANT_ADDED_ONE_USER:A,PARTICIPANT_ADDED_TWO_USER:B,PARTICIPANT_ADDED_YOU:r,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:t,PARTICIPANT_ADDED_YOU_AND_ONE_USER:s,PARTICIPANT_AUDIO_CALLED:fc,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:Bc,PARTICIPANT_CLEAR_OWN_NICKNAME:Ac,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:sc,PARTICIPANT_CREATED_GROUP:c,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:vc,PARTICIPANT_CUSTOMIZE_HOTLIKE:nc,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:rc,PARTICIPANT_CUSTOMIZE_PHOTO:uc,PARTICIPANT_CUSTOMIZE_THEME:tc,PARTICIPANT_DEMOTED_PARTICIPANT:oa,PARTICIPANT_DEMOTED_YOU:la,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:Kb,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:$a,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:Za,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:Ya,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:Xa,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:Ab,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:Oa,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:Na,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ma,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:La,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:Jb,PARTICIPANT_GOT_DEMOTED:ja,PARTICIPANT_GOT_PROMOTED:ia,PARTICIPANT_LEFT_GROUP:ea,PARTICIPANT_MISSED_AUDIO_CALL:bc,PARTICIPANT_MISSED_VIDEO_CALL:dc,PARTICIPANT_NAMED_GROUP:h,PARTICIPANT_PROMOTED_PARTICIPANT:pa,PARTICIPANT_PROMOTED_YOU:ka,PARTICIPANT_REACT_MESSAGE:Eb,PARTICIPANT_REACT_MESSAGE_IN_GROUP:Fb,PARTICIPANT_REMOVED_DEVICE:l,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:da,PARTICIPANT_REMOVED_ONE_USER:ba,PARTICIPANT_REMOVED_TWO_USER:ca,PARTICIPANT_REMOVED_YOU:G,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:I,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:H,PARTICIPANT_SELF_DEMOTED:qa,PARTICIPANT_SEND_ATTACHMENT:Nb,PARTICIPANT_SEND_AUDIO:xa,PARTICIPANT_SEND_GIF:ya,PARTICIPANT_SEND_IMAGE:va,PARTICIPANT_SEND_STICKER:za,PARTICIPANT_SEND_TEXT:ta,PARTICIPANT_SEND_TEXT_IN_GROUP:ua,PARTICIPANT_SEND_VIDEO:wa,PARTICIPANT_SENT_EVENT:Xb,PARTICIPANT_SENT_POST:Ub,PARTICIPANT_SENT_REEL:Vb,PARTICIPANT_SENT_STORY:Wb,PARTICIPANT_SENT_STORY_HIGHLIGHT:Zb,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:Ec,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:Fc,PARTICIPANT_SET_OWN_NICKNAME:zc,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:jc,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:lc,PARTICIPANT_UNSENT_MESSAGE:Db,PARTICIPANT_UPDATED_DEVICE:n,PARTICIPANT_VIDEO_CALLED:hc,REACHABILITY_ERROR:Da,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:xb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:wb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:vb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:ub,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:lb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:kb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:jb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:ib,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:pb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:ob,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:nb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:mb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:db,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:cb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:bb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:ab,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_DAYS:tb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_HOURS:sb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:rb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:qb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:hb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:gb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:fb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:eb,SERVER_SET_ADD_MODE_ADMIN_ONLY:Gc,SERVER_SET_ADD_MODE_ALL_MEMBERS:Hc,TWO_USERS_CONNECTED:Ba,TWO_USERS_CONNECTED_ONE_MSPLIT:Ca,UNAVAILABLE_SNIPPET:Aa,UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:z,UNKNOW_USER_ADDED_ONE_USER:x,UNKNOW_USER_ADDED_TWO_USER:y,UNKNOW_USER_ADDED_YOU:u,UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:w,UNKNOW_USER_ADDED_YOU_AND_ONE_USER:v,UNKNOW_USER_REMOVED_MORE_THAN_TWO_USER:aa,UNKNOW_USER_REMOVED_ONE_USER:M,UNKNOW_USER_REMOVED_TWO_USER:N,UNKNOW_USER_REMOVED_YOU:J,UNKNOW_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:L,UNKNOW_USER_REMOVED_YOU_AND_ONE_USER:K,UNKNOWN_USER_CREATED_GROUP:d,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:Gb,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:Sa,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:Ra,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:Qa,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:Pa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:yb,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ga,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:Fa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ea,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:T,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:U,UNKNOWN_USER_NAMED_GROUP:g,YOU_EPHEMERAL_RECORD_SCREEN:Ib,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:Wa,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:Va,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:Ua,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:Ta,YOU_EPHEMERAL_SETTING_TURNED_OFF:zb,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ka,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:Ja,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ia,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:Ha,YOU_EPHEMERAL_TAKE_SCREENSHOT:Hb,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:Mb};f.CURRENT_USER_CREATED_GROUP=b;f.CURRENT_USER_ADDED_DEVICE=i;f.CURRENT_USER_SEND_TEXT=O;f.CURRENT_USER_SEND_IMAGE=P;f.CURRENT_USER_SEND_VIDEO=Q;f.CURRENT_USER_SEND_AUDIO=R;f.CURRENT_USER_SEND_GIF=S;f.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=T;f.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=U;f.CUTOVER_THREAD_ADMIN_MESSAGE=V;f.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=W;f.CUTOVER_ROLLBACK_ADMIN_MESSAGE=X;f.CURRENT_USER_SEND_ATTACHMENT=Y;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=Z;f.E2EE_THREAD_DESCRIPTION=$;f.LOCALIZATION_TYPE=q}),66);\n__d(\"MAWAdminMsgNormalized\",[\"MAWLocalizationType\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){switch(a){case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:return{contactIds:b,contents:[]};case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:a=b[0];c=b[1];e=b[2];return{contactIds:[a],contents:[c,e]};case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d(\"MAWLocalizationType\").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);\n__d(\"MAWExtractMsFromExternalId\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){return new Date(a).getTime()>0}var j=2199023255551;function a(a){a=Number((h||(h=d(\"I64\"))).to_string(h.and_(h.lsr_(a,22),h.of_float(j))));if(i(a)){a=Math.floor(Number(a)%1e5\/100);return a}}g.extractMsFromExternalId=a}),98);\n__d(\"MAWCalculateBumpTimestampMs\",[\"I64\",\"MAWExtractMsFromExternalId\",\"MAWTimeUtils\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){if(!c(\"gkx\")(\"23996\"))return d(\"MAWTimeUtils\").millisTimeToTimestamp(a);b=b==null?null:d(\"MAWExtractMsFromExternalId\").extractMsFromExternalId(b);return(h||(h=d(\"I64\"))).add(d(\"MAWTimeUtils\").millisTimeToTimestamp(a),h.of_int32((a=b)!=null?a:0))}g.calculateBumpTimestampMs=a}),98);\n__d(\"MAWFolderTypes\",[],(function(a,b,c,d,e,f){\"use strict\";a=0;b=1;c=2;d=3;e=10;var g={ARCHIVED:e,INBOX:a,OTHER:c,PENDING:b,SPAM:d};f.INBOX=a;f.PENDING=b;f.OTHER=c;f.SPAM=d;f.ARCHIVED=e;f.FOLDER_ID=g}),66);\n__d(\"MAWImageUtils\",[\"Promise\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=\"image\/jpeg\",j=100;function k(a,d){d===void 0&&(d=!0);var e;return new(h||(h=b(\"Promise\")))(function(b,f){e=new Image();var g=\/^(?:data|blob):\/.test(a);d&&!g&&e.setAttribute(\"crossOrigin\",\"anonymous\");e.onload=b;e.onabort=function(){f(function(){throw c(\"err\")(\"Error loading image from provided URL\")})};e.onerror=function(){f(function(){throw c(\"err\")(\"Wrong blob type\")})};e.src=a}).then(function(){return e})}function l(a,c,d,e){d===void 0&&(d=!1);var f=40*1024;if(a.toBlob)return new(h||(h=b(\"Promise\")))(function(b){var d=e==null?void 0:e\/100;a.toBlob(b,c,d)}).then(function(e){return d&&e.size>=f?new(h||(h=b(\"Promise\")))(function(b){a.toBlob(b,c,f\/e.size)}):e});else return(h||(h=b(\"Promise\"))).resolve(window.dataURLtoBlob(a.toDataURL(c))).then(function(e){return d&&e.size>=f?(h||(h=b(\"Promise\"))).resolve(window.dataURLtoBlob(a.toDataURL(c,f\/e.size))):e})}function a(a,d,e,f){return k(a).then(function(a){var b=document.createElement(\"canvas\");b.width=a.naturalWidth;b.height=a.naturalHeight;var c=b.getContext(\"2d\");f!==!0&&n(b);c.drawImage(a,0,0);return l(b,d,!1,e).then(function(b){return{blob:b,height:a.naturalHeight,width:a.naturalWidth}})})[\"catch\"](function(a){return(h||(h=b(\"Promise\"))).reject(function(){throw c(\"err\")(a)})})}function d(a,b){return k(a).then(function(a){var c=document.createElement(\"canvas\"),d=a.naturalWidth,e=a.naturalHeight,f=c.getContext(\"2d\");e=o(e,d,b);c.width=e.width;c.height=e.height;var g=c.width,h=c.height;m(c);f.drawImage(a,0,0,g,h);return l(c,i,!0).then(function(a){return a.arrayBuffer().then(function(a){return{height:h,jpegThumbnail:a,width:g}})})})}function e(a,b){return k(a).then(function(a){a=o(a.naturalHeight,a.naturalWidth,b);return{height:a.height,width:a.width}})}function m(a){var b=a.getContext(\"2d\");b.fillStyle=\"rgb(247,247,247)\";b.fillRect(0,0,a.width,a.height)}function n(a){var b=a.getContext(\"2d\");b.fillStyle=\"rgb(255,255,255)\";b.fillRect(0,0,a.width,a.height)}function o(a,b,c){b=b!=null?b:c;a=a!=null?a:c;b>a?b>c&&(a*=c\/b,b=c):a>c&&(b*=c\/a,a=c);return{height:Math.round(Math.max(a,1)),width:Math.round(Math.max(b,1))}}function f(a){return k(a).then(function(a){return{height:a.naturalHeight,width:a.naturalWidth}})}g.TYPE_JPEG=i;g.IMG_THUMB_MAX_EDGE=j;g.canvasToBlob=l;g.urlToFile=a;g.urlToThumbnail=d;g.urlToThumbnailSpec=e;g.boundHeightWidth=o;g.urlToImageSpec=f}),98);\n__d(\"getReplyContentForNoteReply\",[\"WAGlobals\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=a.author,c=a.msgId,e=d(\"WAJids\").extractDeviceIDParts(d(\"WAGlobals\").getMyDeviceJid()).userId;b=d(\"WAJids\").authorToUserId(b,e);e=(e=a.quote)==null?void 0:(a=e.content.msgContent)==null?void 0:a.content;return{isNoteReply:!0,replyMessageText:e,replySourceId:c,replyToUserId:b}}g[\"default\"]=a}),98);\n__d(\"MAWBridgeMsg\",[\"LSHotEmojiSize\",\"LSIntEnum\",\"MAWDbMsg\",\"MAWGlobals\",\"MAWImageUtils\",\"MAWMsgType\",\"MAWVault\",\"MAWXMAUtils\",\"WAAssertUnreachable\",\"WAJids\",\"WAMsgType\",\"getReplyContentForNoteReply\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a,b){var e,f,g;e=((e=a.quote)==null?void 0:e.content.type)===d(\"WAMsgType\").NOTE_REPLY;if(e)return c(\"getReplyContentForNoteReply\")(a);e=d(\"WAJids\").extractDeviceIDParts(d(\"MAWGlobals\").getMyDeviceJid()).userId;f=(f=a.quote)==null?void 0:f.content;if(d(\"MAWXMAUtils\").isXMAStoryShare(a.xmaMessageType)||d(\"MAWXMAUtils\").isXMAStoryReaction(a.xmaMessageType)||d(\"MAWXMAUtils\").isXMAStoryMention(a.xmaMessageType)||d(\"MAWXMAUtils\").isXMAStoryHighlightShare(a.xmaMessageType)){var h=a.author,i=a.mediaId,j=a.msgId,k=d(\"WAJids\").authorToUserId(h,e);if(d(\"MAWXMAUtils\").isXMAStoryMention(a.xmaMessageType)){var l=a.threadJid,m;l!=null&&(m=d(\"WAJids\").interpretAsUserJid(l));m!=null&&(k=d(\"WAJids\").userIdFromJid(m))}return{isIGXMAStoryShare:d(\"MAWXMAUtils\").isIGXMAStoryShare(a.xmaMessageType),isStoryHighlightShare:d(\"MAWXMAUtils\").isXMAStoryHighlightShare(a.xmaMessageType),isStoryMention:d(\"MAWXMAUtils\").isXMAStoryMention(a.xmaMessageType),isStoryReaction:d(\"MAWXMAUtils\").isXMAStoryReaction(a.xmaMessageType),isStoryReply:d(\"MAWXMAUtils\").isXMAStoryReply(a.xmaMessageType),replyMediaId:i,replyMediaUrlMimeType:i!=null?\"image\/jpeg\":void 0,replySenderIsMe:h===d(\"WAJids\").AUTHOR_ME||k===e,replySourceId:j,replyStatusType:i!=null?\"Image\":void 0,replyToUserId:k,storyShareAuthor:b==null?void 0:b.storyShareAuthor}}if(f==null||(f==null?void 0:f.msgId)==null&&(f==null?void 0:f.sourceId)==null)return;l=f||{};a=l.author;h=l.mediaId;j=l.msgId;i=l.sourceId;k=l.specialTextSize;var n=l.type;l=l.xmaMessageType;g=f.type===d(\"MAWMsgType\").MSG_TYPE.TEXT||d(\"MAWXMAUtils\").isXMAExternalLinkShare(l)?(g=f.msgContent)==null?void 0:g.content:void 0;var o=d(\"WAJids\").authorToUserId(a,e);f=f.type===d(\"MAWMsgType\").MSG_TYPE.TEXT?f.msgContent.mentionedJids:void 0;a=a===d(\"WAJids\").AUTHOR_ME||o===e;e=b||{};b=e.replyMediaId;var p=e.replyMediaPreviewHeight,q=e.replyMediaPreviewWidth,r=e.replyMediaUrlFallback,s=e.replyMediaUrlMimeType;e=e.replyXMAId;if(d(\"MAWXMAUtils\").isXMAStoryReply(l))return{isStoryReaction:d(\"MAWXMAUtils\").isXMAStoryReaction(l),isStoryReply:!0,replyMediaId:h,replyMediaUrlMimeType:h!=null?\"image\/jpeg\":void 0,replySenderIsMe:a,replySourceId:i,replyStatusType:h!=null?\"Image\":void 0,replyToUserId:o};i=d(\"MAWImageUtils\").boundHeightWidth(p,q,96*.8);h=i.height;i=i.width;return{isIGXMAPostShare:d(\"MAWXMAUtils\").isIGXMAPostShare(l),isIGXMAStoryShare:d(\"MAWXMAUtils\").isIGXMAStoryShare(l),isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:n===d(\"MAWMsgType\").MSG_TYPE.STICKER?h:p,replyMediaPreviewWidth:n===d(\"MAWMsgType\").MSG_TYPE.STICKER?i:q,replyMediaUrlFallback:r,replyMediaUrlMimeType:s,replyMentionedJids:f,replyMessageText:g,replySenderIsMe:a,replySourceId:j,replyStatusType:k===1||k===2||k===3?d(\"MAWMsgType\").MSG_TYPE.STICKER:n,replyToUserId:o,replyXMAId:e}}function a(a){a=a.specialTextSize;switch(a){case 1:return(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSHotEmojiSize\").SMALL);case 2:return(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSHotEmojiSize\").MEDIUM);case 3:return(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSHotEmojiSize\").LARGE);default:return(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSHotEmojiSize\").NONE)}}function b(a,b,e,f,g,h){var j,k,l=d(\"WAJids\").extractDeviceIDParts(d(\"MAWGlobals\").getMyDeviceJid()).userId;j=((j=a.isForwarded)!=null?j:!1)&&a.type!==d(\"MAWMsgType\").MSG_TYPE.STICKER;k=(k=a.forwardingScore)!=null?k:0;var m=d(\"MAWDbMsg\").getCanonicalTsFromMsg(a);e=i(a,e);var n=d(\"MAWXMAUtils\").isXMAStoryShare(a.xmaMessageType),o=d(\"MAWXMAUtils\").isXMAStoryReaction(a.xmaMessageType),p=d(\"MAWXMAUtils\").isXMAExternalLinkShare(a.xmaMessageType),q=d(\"MAWXMAUtils\").isXMAStoryMention(a.xmaMessageType),r=d(\"MAWXMAUtils\").isXMAStoryHighlightShare(a.xmaMessageType),s=d(\"MAWXMAUtils\").isXMAPostPrivateReply(a.xmaMessageType),t=d(\"MAWDbMsg\").getSortOrderWithFallback(a),u=a.externalId;switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.TEXT:var v=d(\"MAWVault\").isVaulted(a.msgContent.content)?a.msgContent.content:d(\"MAWVault\").vault(a.msgContent.content);return babelHelpers[\"extends\"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,content:v,editCount:a.editCount,ephemeralDurationInSec:(v=a.ephemeralSetting)==null?void 0:v.ephemeralExpirationInSec,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isForwarded:j,mentionedJids:a.msgContent.mentionedJids,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,specialTextSize:a.specialTextSize,transportKey:h,ts:m,type_:a.type});case d(\"MAWMsgType\").MSG_TYPE.IMAGE:case d(\"MAWMsgType\").MSG_TYPE.VIDEO:case d(\"MAWMsgType\").MSG_TYPE.PTT:case d(\"MAWMsgType\").MSG_TYPE.GIF:case d(\"MAWMsgType\").MSG_TYPE.STICKER:case d(\"MAWMsgType\").MSG_TYPE.RAVEN:case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:case d(\"MAWMsgType\").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers[\"extends\"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,ephemeralDurationInSec:(v=a.ephemeralSetting)==null?void 0:v.ephemeralExpirationInSec,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type});case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:return babelHelpers[\"extends\"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type,unsupportedType:a.msgContent.subtype});case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:return{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type};case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers[\"extends\"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type});case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:return{ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!0,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type};case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return{ack:a.ack,adminContent:a.msgContent.adminMsgContent,adminType:a.msgContent.adminType,adminVersion:a.msgContent.version,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!0,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type};case d(\"MAWMsgType\").MSG_TYPE.REVOKED:return{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,originalTs:a.originalTs,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type};case d(\"MAWMsgType\").MSG_TYPE.XMA:var w;v=(v=a.msgContent)==null?void 0:v.content;w=v!=null?d(\"MAWVault\").isVaulted(v)?(w=a.msgContent)==null?void 0:w.content:d(\"MAWVault\").vault(v):void 0;v=c(\"justknobx\")._(\"1191\")||o||p?w:void 0;return babelHelpers[\"extends\"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,content:v,ephemeralDurationInSec:(p=a.ephemeralSetting)==null?void 0:p.ephemeralExpirationInSec,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d(\"WAJids\").AUTHOR_ME,isExpiredXmaMsg:a.isExpiredXmaMsg,isForwarded:j,isPostPrivateReply:s,isStoryHighlightShare:r,isStoryMention:q,isStoryReaction:o,isStoryShare:n,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d(\"WAJids\").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type});default:return c(\"WAAssertUnreachable\")(a.type)}}g.getSpecialTextSize=a;g.createBridgeMsg=b}),98);\n__d(\"MAWFrontendMediaUtils\",[\"MAWDbMedia\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c){if(a===\"image\/gif\")return{mediaType:d(\"MAWDbMedia\").MEDIA_TYPE.GIF,serverMediaType:\"gif\"};if(a===\"image\/webp\"&&b!==!0)return{mediaType:d(\"MAWDbMedia\").MEDIA_TYPE.STICKER,serverMediaType:\"sticker\"};c=(c=c)!=null?c:a.split(\"\/\")[0];switch(c){case\"image\":if(b===!0)return{mediaType:d(\"MAWDbMedia\").MEDIA_TYPE.IMAGE,serverMediaType:\"xma-image\"};else return{mediaType:d(\"MAWDbMedia\").MEDIA_TYPE.IMAGE,serverMediaType:\"image\"};case\"video\":return{mediaType:d(\"MAWDbMedia\").MEDIA_TYPE.VIDEO,serverMediaType:\"video\"};case\"audio\":return{mediaType:d(\"MAWDbMedia\").MEDIA_TYPE.PTT,serverMediaType:\"ptt\"};case\"application\":default:return{mediaType:d(\"MAWDbMedia\").MEDIA_TYPE.DOCUMENT_FILE,serverMediaType:\"document\"}}}g.getMediaTypeAndServerMediaTypeFromBlob=a}),98);\n__d(\"MAWRavenUtils\",[\"EphemeralMediaViewMode\",\"MAWMsg\",\"RavenMessagingState\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(a){switch(a){case d(\"MAWMsg\").MAWRavenMsgEphemeralMediaState.PERMANENT:return c(\"RavenMessagingState\").PERMANENT;case d(\"MAWMsg\").MAWRavenMsgEphemeralMediaState.UNSEEN:return c(\"RavenMessagingState\").UNSEEN;case d(\"MAWMsg\").MAWRavenMsgEphemeralMediaState.SEEN:return c(\"RavenMessagingState\").SEEN;case d(\"MAWMsg\").MAWRavenMsgEphemeralMediaState.REPLAYED:return c(\"RavenMessagingState\").REPLAYED;case d(\"MAWMsg\").MAWRavenMsgEphemeralMediaState.EXPIRED:return c(\"RavenMessagingState\").EXPIRED}};b=function(a){switch(a){case d(\"MAWMsg\").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return c(\"EphemeralMediaViewMode\").PERMANENT;case d(\"MAWMsg\").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return c(\"EphemeralMediaViewMode\").REPLAYABLE;case d(\"MAWMsg\").MAWRavenMsgEphemeralType.VIEW_ONCE:return c(\"EphemeralMediaViewMode\").READ_ONCE}};function a(a,b){switch(b){case d(\"MAWMsg\").MAWRavenMsgEphemeralType.VIEW_ONCE:return a===d(\"MAWMsg\").MAWRavenMsgEphemeralMediaState.UNSEEN?c(\"RavenMessagingState\").SEEN:h(a);case d(\"MAWMsg\").MAWRavenMsgEphemeralType.ALLOW_REPLAY:if(a===d(\"MAWMsg\").MAWRavenMsgEphemeralMediaState.UNSEEN)return c(\"RavenMessagingState\").SEEN;else if(a===d(\"MAWMsg\").MAWRavenMsgEphemeralMediaState.SEEN)return c(\"RavenMessagingState\").REPLAYED;return h(a);case d(\"MAWMsg\").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return h(a)}}g.getEphemeralMediaState=h;g.getEphemeralMediaViewMode=b;g.getNextRavenMessageEphemeralState=a}),98);\n__d(\"MAWUpdateClientRestoreStatusOperationType\",[],(function(a,b,c,d,e,f){\"use strict\";a=0;b=1;f.upsertClientRestoreStatus=a;f.markCompleteClientRestoreStatus=b}),66);\n__d(\"DoubleKeyMap\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.set=function(a,b,c){var d=this.$1.get(a);d||this.$1.set(a,d=new Map());d.set(b,c)};b.get=function(a,b){return(a=this.$1.get(a))==null?void 0:a.get(b)};b[\"delete\"]=function(a,b){var c=this.$1.get(a);c&&(c[\"delete\"](b),c.size===0&&this.$1[\"delete\"](a))};b.getAll=function(a){return this.$1.get(a)};b.deleteAll=function(a){this.$1[\"delete\"](a)};return a}();f.DoubleKeyMap=a}),66);\n__d(\"NestedTimeRange\",[\"SimpleHook\",\"performance\",\"performanceAbsoluteNow\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=new(d(\"SimpleHook\").SimpleHook)(),k=new(d(\"SimpleHook\").SimpleHook)(),l=\"\/\";function m(a,b){return\"\"+a+l+b}b=function(){function a(a,b){b===void 0&&(b=null),this.$3=0,this.$1=a,this.$2=b}var b=a.prototype;b.isRunning=function(){return this.$3>0};b.fullname=function(){return this.$2!==null?m(this.$2.fullname(),this.$1):this.$1};b.start=function(a){a===void 0&&(a=(h||(h=c(\"performanceAbsoluteNow\")))());if(this.$3===0){var b;(b=this.$2)==null?void 0:b.start(a);this.__onStart(a)}++this.$3;return a};b.__onStart=function(a){j.call(this,a)};b.stop=function(a){a===void 0&&(a=(h||(h=c(\"performanceAbsoluteNow\")))());--this.$3;if(this.$3===0){var b;this.__onStop(a);(b=this.$2)==null?void 0:b.stop(a)}return a};b.__onStop=function(a){k.call(this,a)};return a}();function a(){(i||(i=c(\"performance\"))).mark&&(i||(i=c(\"performance\"))).measure&&(j.add(function(a,b){(i||(i=c(\"performance\"))).mark(a.fullname()+\"_start\")}),k.add(function(a,b){(i||(i=c(\"performance\"))).measure(a.fullname(),a.fullname()+\"_start\")}))}g.OnRangeStart=j;g.OnRangeStop=k;g.TIME_RANGE_LEVEL_SEPARATOR=l;g.rangeFullName=m;g.NestedTimeRange=b;g.enableDevConsoleTimeline=a}),98);\n__d(\"QLogEvent\",[\"DoubleKeyMap\",\"FBLogger\",\"NestedTimeRange\",\"QPLEvent\",\"SimpleHook\",\"performanceNavigationStart\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=new(d(\"DoubleKeyMap\").DoubleKeyMap)(),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=b.call(this,a,d)||this;a.$QPLRange1=c;i.set(c,a.fullname(),babelHelpers.assertThisInitialized(a));return a}var e=a.prototype;e.__onStart=function(a){b.prototype.__onStart.call(this,a),this.$QPLRange1.point(this.fullname()+\"_START\",{timestamp:a})};e.__onStop=function(a){b.prototype.__onStop.call(this,a),this.$QPLRange1.point(this.fullname()+\"_END\",{timestamp:a}),i[\"delete\"](this.$QPLRange1,this.fullname())};e.range=function(b){this.fullname().startsWith(d(\"NestedTimeRange\").TIME_RANGE_LEVEL_SEPARATOR)||c(\"FBLogger\")(\"qpl\").warn(\"Range %s cannot have subrange since root name does not start with \/\",this.fullname());var e=d(\"NestedTimeRange\").rangeFullName(this.fullname(),b);return(e=i.get(this.$QPLRange1,e))!=null?e:new a(b,this.$QPLRange1,this)};return a}(d(\"NestedTimeRange\").NestedTimeRange),k=new(d(\"DoubleKeyMap\").DoubleKeyMap)(),l=new((b=d(\"SimpleHook\")).SimpleHook)(),m=new b.SimpleHook(),n=new b.SimpleHook(),o=new b.SimpleHook(),p=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;c===void 0&&(c=0);e===void 0&&(e=2);f===void 0&&(f=!1);var i=(h||(h=d(\"QPLEvent\"))).getMarkerId(a);g=b.call(this,\"event_\"+i)||this;g.event=a;g.instanceKey=c;g.$QPLEvent1=e;g.isUserFlow=f;k.set(i,c,babelHelpers.assertThisInitialized(g));return g}var e=a.prototype;e.action=function(a){this.$QPLEvent1=a;return this};e.getAction=function(){return this.$QPLEvent1};e.setIsUserFlow=function(a){this.isUserFlow=a;return this};e.startFromNavStart=function(){this.start(c(\"performanceNavigationStart\")());return this};e.startFromTime=function(a){this.start(a);return this};e.__onStart=function(a){l.call(this,a)};e.__onStop=function(a){m.call(this,a),i.deleteAll(this),k[\"delete\"]((h||(h=d(\"QPLEvent\"))).getMarkerId(this.event),this.instanceKey)};e.range=function(a){var b;return(b=i.get(this,a))!=null?b:new j(a,this)};e.point=function(a,b){b===void 0&&(b={});n.call(this,a,b);return this};e.annotate=function(a){o.call(this,a);return this};return a}(d(\"NestedTimeRange\").NestedTimeRange);function a(a,b){var c;b===void 0&&(b=0);return(c=k.get((h||(h=d(\"QPLEvent\"))).getMarkerId(a),b))!=null?c:new p(a,b)}g.OnEventStart=l;g.OnEventStop=m;g.OnEventPoint=n;g.OnEventAnnotate=o;g.QPLEvent=p;g.event=a}),98);\n__d(\"TimedOnceFunc\",[\"ExecutionEnvironment\"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(a,b){this.$2=!1,this.$4=a,this.$3=b,(h||(h=c(\"ExecutionEnvironment\"))).isInBrowser&&this.$5()}var b=a.prototype;b.$6=function(){this.$1!=null&&clearTimeout(this.$1),this.$1=null};b.$5=function(){var a=this;this.isDone()||(this.$6(),this.$1=setTimeout(function(){a.$2=!0,a.run()},this.$3))};b.isDone=function(){return this.$4===null};b.isCancelled=function(){return this.$1===null&&this.$4!==null};b.run=function(){this.$6();if(this.$4!=null){var a=this.$4;this.$4=null;a(this.$2)}};b.getDelay=function(){return this.$3};b.delay=function(a){this.$3=(a=a)!=null?a:this.$3;this.$5()};b.cancel=function(){this.$6()};return a}();g.TimedOnceFunc=a}),98);\n__d(\"FuncChannel\",[\"FBLogger\",\"Promise\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=function(){function a(a){var d=this,e;this.$2=[];this.callMessageHandler=function(a){return new(h||(h=b(\"Promise\")))(function(b,c){a.result={resolveFunc:b,rejectFunc:c},d.$2.push(a)})};this.messageToCall=function(a){var b,e,f=d.proxyMethods[a.method];if(typeof f!==\"function\"){c(\"FBLogger\")(\"worker\").mustfix(\"proxyMethods[%s] is not a functions\",a.method);return}b=(b=a.result)==null?void 0:b.resolveFunc;e=(e=a.result)==null?void 0:e.rejectFunc;if(typeof b===\"function\"&&typeof e===\"function\")try{var g=f.apply(a.thisArg,a.argList);b(g)}catch(a){e(a)}else return f.apply(a.thisArg,a.argList)};var f=this,g={},i=(e=a==null?void 0:a(g))!=null?e:{},j=babelHelpers[\"extends\"]({},g);function k(a){j[a]=function(){var b={type:\"call\",method:a,thisArg:null,argList:Array.from(arguments)};return f.callMessageHandler(b)},g[a]=function(){var b=f.$1[a];if(typeof b!==\"function\"){c(\"FBLogger\")(\"worker\").mustfix(\"_backend[%s] is not a functions\",a);return}return b.apply(f.$1,arguments)},i[a]==null&&(i[a]=g[a])}this.$1=j;if(a!=null){e=Object.keys(i);e.forEach(k);this.proxyMethods=i}else this.proxyMethods=new Proxy(i,{get:function(a,b){a=b;i[a]==null&&k(a);return i[a]}})}var d=a.prototype;d.flushBuffer=function(){var a=this.$2;this.$2=[];a.forEach(this.messageToCall)};d.setBackend=function(a){this.$1!==a&&(this.$1=a,this.flushBuffer());return this};d.setCallMessageHandler=function(a){this.callMessageHandler=a,this.flushBuffer()};return a}();g[\"default\"]=a}),98);\n__d(\"MainPageUrl\",[\"ExecutionEnvironment\",\"FBLogger\",\"SimpleHook\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=new URL(\"http:\/\/undefined\"),j=new(d(\"SimpleHook\").SimpleHook)();function k(){var a;return(h||(h=c(\"ExecutionEnvironment\"))).isInBrowser&&(i==null?void 0:(a=i.searchParams)==null?void 0:a.get(\"workerlog\"))===\"debug\"}function a(a){try{k()&&c(\"FBLogger\")(\"worker\").debug(\"received url \"+a);var b=new URL(a,i.href||\"http:\/\/undefined\");i.href!==b.href?(i.href=b.href,j.call(i)):k()&&c(\"FBLogger\")(\"worker\").debug(\"ignoring url: path didn't change in \"+a)}catch(a){c(\"FBLogger\")(\"worker\").catching(a).warn(\"invalid url\")}}typeof window===\"object\"&&typeof window.location===\"object\"&&typeof window.location.href===\"string\"&&a(window.location.href);g.mainPageUrl=i;g.onMainPageUrlChange=j;g.isWorkerLogEnabled=k;g.updateMainPageUrl=a}),98);\n__d(\"VirtualMessageChannel\",[\"invariant\",\"Promise\",\"SimpleHook\",\"nullthrows\",\"promiseDone\"],(function(a,b,c,d,e,f,g,h){\"use strict\";var i,j=function(){function a(a){a===void 0&&(a=!1),this.$2=new(d(\"SimpleHook\").SimpleHook)(),this.onmessage=null,this.onmessageerror=null,this.$3=a}var e=a.prototype;e.setRemotePort=function(a){this.$1=a};e.addEventListener=function(a,b,c){(a===\"message\"||a===\"error\")&&c==null||h(0,55320,a);if(a===\"message\")if(typeof b===\"function\")this.$2.add(b);else{c=b.handleEvent.bind(b);this.$2.add(c);b.__handler=c}};e.removeEventListener=function(a,b,c){if(typeof b===\"function\")this.$2.remove(b);else{a=b.__handler;this.$2.remove(a)}};e.postMessage=function(a,d){var e=this,f=function(){var b=c(\"nullthrows\")(e.$1,\"By now remote port must have value!\");b.$2.call({data:a,ports:d})};this.$3?f():c(\"promiseDone\")((i||(i=b(\"Promise\"))).resolve(),f)};e.start=function(){};return a}();a=function(a,b){this.port1=new j(a),this.port2=new j(b),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};g.VirtualMessagePort=j;g.VirtualMessageChannel=a}),98);\n__d(\"WorkerMessagePortLogging\",[\"MainPageUrl\",\"QLogEvent\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=Math.random()<.1,i=20,j=100,k=50;function a(){return d(\"MainPageUrl\").isWorkerLogEnabled()||d(\"MainPageUrl\").mainPageUrl.searchParams.get(\"worker_log\")===1}var l=0;function m(){return d(\"QLogEvent\").event(c(\"qpl\")._(41497718,\"106\"),l++)}function b(a,b,c){c===void 0&&(c=!1);if(b==null||!h)return;var d=b.sendDelayHighPrecision,e=b.sendTimestamp,f=b.sendDateTime,g=b.receiveTimestamp,l=b.receiveDateTime,n=m();n.startFromTime();var o=n.range(\"SEND_DELAY\");o.start(e);o.stop(g);o=n.range(\"SEND_DELAY_LOW_PRECISION\");o.start(f);o.stop(l);o=Math.abs(e-f);e=Math.abs(g-l);n.annotate({string:{port_name:a},\"int\":{send_delay:d,send_drift:o,receive_drift:e},bool:{send_delay_above_max:d!=null&&d>i,send_drift_above_max:o>j,receive_drift_above_max:e>j}});if(c){f=n.range(\"ROUND_TRIP\");f.start(b.sendTimestamp);f.stop(b.receiveTimestamp);g=b.receiveTimestamp-b.sendTimestamp;n.annotate({\"int\":{round_trip:g},bool:{round_trip_above_max:g>k}})}n.stop()}g.isWorkerLogEnabled=a;g.logMessageTiming=b}),98);\n__d(\"WorkerMessagePort\",[\"Deferred\",\"FBLogger\",\"MainPageUrl\",\"Promise\",\"PromiseAnnotate\",\"SimpleHook\",\"VirtualMessageChannel\",\"WorkerMessagePortLogging\",\"performanceAbsoluteNow\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j;function k(a){return a}var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d(\"SimpleHook\").SimpleHook);function m(a,b){a=k(a);a.__timing=b}function n(a){return a.__timing}a=function(){var a=e.prototype;a.onMessageHandler=function(a){try{this.onMessage.call(a);var b=this.$1[a.type];!b?this.onUnhandledMessage.call(a):b.call(a)}catch(a){this.onError.call(a)}};function e(a,b){var e=this;this.$1={};this.onUnhandledMessage=new l();this.onMessage=new l();this.onPostMessage=new l();this.onError=new l();this.$2=a;this.name=b;this.$2.addEventListener(\"message\",function(a){return e.onMessageHandler(k(a.data))});this.$2.addEventListener(\"error\",function(a){return e.onError.call(a)});this.onPostMessage.add(function(a){m(a,{receiveDateTime:-1,receiveTimestamp:-1,sendDateTime:Date.now(),sendDelayHighPrecision:0,sendDelayLowPrecision:0,sendTimestamp:(j||(j=c(\"performanceAbsoluteNow\")))()})});this.onMessage.add(function(a){a=n(a);if(a!=null){var b=a.sendDateTime,f=a.sendTimestamp,g=(j||(j=c(\"performanceAbsoluteNow\")))(),h=Date.now();a.receiveTimestamp=g;a.receiveDateTime=h;a.sendDelayHighPrecision=g-f;a.sendDelayLowPrecision=h-b;d(\"WorkerMessagePortLogging\").logMessageTiming(e.name,a)}})}a.postMessage=function(a,b){this.onPostMessage.call(a),b?this.$2.postMessage(a,b):this.$2.postMessage(a)};a.addMessageListener=function(a,b){var c=this.$1[a];c||(c=new l(),this.$1[a]=c);return c.add(b)};a.removeMessageListener=function(a,b){a=this.$1[a];return!!a&&a.remove(b)};a.onMessageOnce=function(a,c){var d=this;return new(i||(i=b(\"Promise\")))(function(b){var e=d.addMessageListener(a,function(f){c(f)&&(d.removeMessageListener(a,e),b(f))})})};a.close=function(){if(this.$2 instanceof MessagePort)this.$2.close();else if(this.$2 instanceof Worker)this.$2.terminate();else if(this.$2 instanceof DedicatedWorkerGlobalScope)this.$2.close();else{var a;(a=(a=this.$2.close)!=null?a:this.$2.terminate)==null?void 0:a.call(this.$2)}};a.isWrappingVirtualMessagePort=function(){return this.$2 instanceof d(\"VirtualMessageChannel\").VirtualMessagePort};return e}();function o(a){return k(a)}e=function(a){babelHelpers.inheritsLoose(e,a);function e(e,f){var g;g=a.call(this,e,f)||this;var j=o(babelHelpers.assertThisInitialized(g)),k=new(c(\"Deferred\"))();e=k.getPromise();j.addMessageListener(\"endpoint_started\",function(a){k.resolve(a);var b=n(a);j.postMessage({endpoint:a.endpoint,startSendTimestamp:b==null?void 0:b.sendTimestamp,targetEndpoint:g.name,type:\"endpoint_started_received\"})});f=j.onMessageOnce(\"endpoint_started_received\",function(){return!0});void (h||(h=d(\"PromiseAnnotate\"))).setDisplayName(e,\"endpoint_started\");void h.setDisplayName(f,\"endpoint_started_received\");j.postMessage({endpoint:g.name,type:\"endpoint_started\"});c(\"promiseDone\")(e,function(a){a=n(a);d(\"WorkerMessagePortLogging\").logMessageTiming(g.name,a)});c(\"promiseDone\")(f,function(a){a=n(a);a!=null&&d(\"WorkerMessagePortLogging\").logMessageTiming(g.name,a,!0)});g.fullyConnected=(i||(i=b(\"Promise\"))).race([e,f]).then(function(){return babelHelpers.assertThisInitialized(g)});return g}return e}(a);g.getMessageTiming=n;g.WorkerMessagePort=a;g.CastWorkerMessagePort=o;g.WorkerSyncedMessagePort=e}),98);\n__d(\"WorkerFuncChannel\",[\"invariant\",\"DateConsts\",\"ExecutionEnvironment\",\"FBLogger\",\"FuncChannel\",\"MainPageUrl\",\"Promise\",\"TimedOnceFunc\",\"VirtualMessageChannel\",\"WorkerMessagePort\",\"err\",\"promiseDone\"],(function(a,b,c,d,e,f,g,h){\"use strict\";var i,j,k={serialize:function(a,b){b.push(a);return a},deserialize:function(a){return a}},l=1e4,m=0,n=5,o=n+1,p=function(){function a(a){var b=self.WeakRef;b&&(this.$1=new b(a))}var b=a.prototype;b.isDead=function(){return this.$1!=null&&this.$1.deref()==null};return a}(),q=function(e){babelHelpers.inheritsLoose(a,e);function a(a,b,f,g){var i;f===void 0&&(f=null);g===void 0&&(g={});i=e.call(this,a)||this;i.$WorkerFuncChannel1=new Map();i.$WorkerFuncChannel2=new Map();i.$WorkerFuncChannel5={\"function\":{serialize:function(a,b){b=o++;i.$WorkerFuncChannel1.set(b,a);a={type:\"function\",value:b};return a},deserialize:function(a){var b=babelHelpers.assertThisInitialized(i),c=a.value;a=function(){var a={type:\"call\",id:c,method:\"__anonymous\",thisArg:null,argList:Array.from(arguments)};return b.callMessageHandler(a)};i.$WorkerFuncChannel2.set(c,new p(a));return a}},custom:{serialize:function(a,b){var c=a.constructor.name,d=i.$WorkerFuncChannel4[c];d!=null||h(0,63779,c);d=d.serialize(a,b);return{type:\"custom\",custom:c,value:d}},deserialize:function(a){var b=a.custom,c=i.$WorkerFuncChannel4[b];c!=null||h(0,63779,b);return c.deserialize(a.value)}},error:{serialize:function(a,b){b={name:a.name,message:a.message,stack:a.stack};return{type:\"error\",value:b}},deserialize:function(a){var b=c(\"err\")(a.value.message);b.name=a.value.name;b.stack=a.value.stack;return b}},object:{serialize:function(a,b){b=a.constructor;if(b!==Object)throw new Error(\"Cannot clone class object\");return{type:\"object\",value:a}},deserialize:function(a){return a.value}},raw:{serialize:function(a,b){return{type:\"raw\",value:a}},deserialize:function(a){return a.value}}};i.name=b;i.$WorkerFuncChannel3=f;i.$WorkerFuncChannel4=g;a=function(a){d(\"MainPageUrl\").isWorkerLogEnabled()&&c(\"FBLogger\")(\"adsworker\").debug(\"[Channel] removing callback ids: %s\",a.join()),a.forEach(function(a){return i.$WorkerFuncChannel1[\"delete\"](a)})};var k=i.__remoteInternalFunc(m,a);typeof jest===typeof void 0&&(j||(j=c(\"ExecutionEnvironment\"))).isInBrowser&&setInterval(function(){var a=[];i.$WorkerFuncChannel2.forEach(function(b,c){b.isDead()&&(a.push(c),i.$WorkerFuncChannel2[\"delete\"](c))});a.length>0?k(a):i.$WorkerFuncChannel2.size>5e3&&c(\"FBLogger\")(\"adsworker\").warn(\"[%s] has too many remaining refs %s\",i.name,i.$WorkerFuncChannel2.size)},l);return i}var f=a.prototype;f.__remoteInternalFunc=function(a,b){(a>n||this.$WorkerFuncChannel1.get(a)!=null)&&c(\"FBLogger\")(\"adsworker\").mustfix(\"invalid internal func id %s\",a);this.$WorkerFuncChannel1.set(a,b);b=this.$WorkerFuncChannel5[\"function\"].deserialize({type:\"function\",value:a});return b};f.$WorkerFuncChannel6=function(a){return a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};f.$WorkerFuncChannel7=function(a){if(typeof a===\"function\")return\"function\";if(a===null)return\"raw\";if(typeof a!==\"object\")return\"raw\";if(Array.isArray(a))return\"raw\";if(this.$WorkerFuncChannel6(a))return\"raw\";var b=a.constructor.name;if(this.$WorkerFuncChannel4[b])return\"custom\";return a instanceof Error?\"error\":\"object\"};f.$WorkerFuncChannel8=function(a,b){var c=this.$WorkerFuncChannel7(a);return this.$WorkerFuncChannel5[c].serialize(a,b)};f.$WorkerFuncChannel9=function(a){var b=a;if(a!==null&&typeof a===\"object\"&&typeof a.type===\"string\"){var c=this.$WorkerFuncChannel5[a.type];if(c)return c.deserialize(a)}return b};f.__onPostOutMessage=function(a){return a};f.__callCallback=function(a,b){a.apply(null,b.argList)};f.setOutMessagePort=function(a,d){var e=this,f=[];this.setCallMessageHandler(function(d){d.thisArg=e.name;var g=[];d.argList=d.argList.map(function(a){return e.$WorkerFuncChannel8(a,g)});var h=new(i||(i=b(\"Promise\")))(function(a,b){d.result={resolveFunc:e.$WorkerFuncChannel8(a,g),rejectFunc:e.$WorkerFuncChannel8(b,g)}}),j=e.__onPostOutMessage(d);j!=null&&(f!=null?f.push({message:d,transferList:g}):a.postMessage(d,g));h[\"catch\"](function(a){c(\"FBLogger\")(\"worker\").catching(a).mustfix(\"Error: channel %s, remote call of %s returned error %s\",e.name,d.method,a.message)});return h});c(\"promiseDone\")(d||x.waitForRemote(this.name),function(){var b=f;f=null;b==null?void 0:b.forEach(function(b){a.postMessage(b.message,b.transferList)});e.$WorkerFuncChannel3==null?void 0:e.$WorkerFuncChannel3()})};f.__messageToCall=function(a){var b=this;a.argList=a.argList.map(function(a){return b.$WorkerFuncChannel9(a)});if(a.result){var d=a.result,e=d.resolveFunc;d=d.rejectFunc;e=this.$WorkerFuncChannel9(e);d=this.$WorkerFuncChannel9(d);a.result={resolveFunc:e,rejectFunc:d}}e=a.id;if(e===void 0)this.messageToCall(a);else{d=this.$WorkerFuncChannel1.get(e);d?this.__callCallback(d,a):c(\"FBLogger\")(\"adsworker\").mustfix(\"Error: callback is called but no longer available\")}};f.setInMessagePort=function(a){var b=this;a.addMessageListener(\"call\",function(a){typeof a.thisArg===\"string\"&&a.thisArg===b.name&&b.__messageToCall(a)});x.notifyReady(this.name)};f.setMessagePort=function(a){this.setInMessagePort(a);this.setOutMessagePort(a);return this};return a}(c(\"FuncChannel\")),r=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d(\"WorkerMessagePort\").WorkerMessagePort);function s(a,b,d,e){x.exportChannel(a,function(e){var f=e.syncPort;e=e.remoteNativePort;var g=b();a===g.name||h(0,54247,a,g.name);var i;e?(i=new r(e,f.name+\"(\"+g.name+\")\"),e.start(),i.onError.add(function(a){c(\"FBLogger\")(\"worker\").catching(a).mustfix(\"error caught in remotePort\");throw a})):i=f;g.setMessagePort(i).setBackend(d);c(\"promiseDone\")(f.fullyConnected,function(){f.postMessage({type:\"channelReady\",channelName:g.name}),x.logState(\"EXPORTED\",a)})})}function a(a,b,c,d){d===void 0&&(d={});return s(c,function(){return new q(function(b){return a},c,null,d)},a,b)}var t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,e){e===void 0&&(e=\"\");var f=d(\"DateConsts\").MS_PER_MIN*1;return b.call(this,function(){c(\"FBLogger\")(\"worker\").warn(\"Channel %s did not establish eventually. %s\",a,e)},f)||this}return a}(d(\"TimedOnceFunc\").TimedOnceFunc);function u(a,b){var e,f=null,g,h;b.isWrappingVirtualMessagePort()?(h=new(d(\"VirtualMessageChannel\").VirtualMessageChannel)(!0,!0),e=\"on virtual dedicated channel\"):(h=new MessageChannel(),e=\"on native dedicated channel\",g=[h.port2]);var i=h.port1;f=h.port2;i.start();var j=new r(i,b.name+\"(\"+a.name+\")\");c(\"promiseDone\")(b.fullyConnected,function(){x.logState(\"IMPORTING \"+e+\" \",a.name);a.setInMessagePort(j);var d=new t(a.name,e);c(\"promiseDone\")(b.onMessageOnce(\"channelReady\",function(b){return b.channelName===a.name}),function(b){a.setOutMessagePort(j),d.cancel(),x.logState(\"ESTABLISHED\",a.name)});b.postMessage({type:\"channelImport\",channelName:a.name,port:f},g)});return a.proxyMethods}function v(a,b,c,d){c===void 0&&(c=null);d===void 0&&(d={});b=new q(function(b){return a},b,c,d);return b}function e(a,b,c,d,e){d===void 0&&(d=null);e===void 0&&(e={});return u(v(a,c,d,e),b)}var w=function(){function a(){this.name=self.name+\"_P\"+Math.round(10*Math.random()),this.$1=new Map(),this.$2=new Set()}var e=a.prototype;e.logState=function(a,b){d(\"MainPageUrl\").isWorkerLogEnabled()&&c(\"FBLogger\")(\"worker\").debug(\"%s-%s %s\",this.name,a,b)};e.$3=function(a){var b=this.$1.get(a);b==null&&(b={pendingPorts:null,onImportRequest:null},this.$1.set(a,b));return b};e.exportChannel=function(a,b){var d=this,e=this.$3(a);e.onImportRequest!=null&&c(\"FBLogger\")(\"worker\").debug(\"Re-exporting channel %s\",a);e.onImportRequest=b;this.logState(\"REGISTERED\",a);a=e.pendingPorts;if(a!=null){var f=a.filter(function(a){return d.$2.has(a.syncPort)});f.forEach(b);f.length<a.length?e.pendingPorts=a.filter(function(a){return!d.$2.has(a.syncPort)}):e.pendingPorts=null}return e};e.activate=function(a,b,d){var e=this;if(this.$2.has(a)){c(\"FBLogger\")(\"worker\").debug(\"Port %sis already duplicated \",a.name);return}this.$2.add(a);a.addMessageListener(\"channelImport\",function(b){var c=b.channelName,d=e.$3(c);b={syncPort:a,remoteNativePort:b.port};d.onImportRequest!=null?d.onImportRequest(b):d.pendingPorts!=null?d.pendingPorts.push(b):d.pendingPorts=[b];e.logState(\"IMPORT REQUEST\",c)})};e.notifyReady=function(a){};e.waitForRemote=function(a){return(i||(i=b(\"Promise\"))).resolve()};return a}(),x=new w();function f(a,b,c){x.activate(a,b,c)}g.TransferableTransformer=k;g.WorkerFuncChannel=q;g.exportChannelOnPort=s;g.exportChannel=a;g.importChannelOnPort=u;g.makeChannel=v;g.importChannel=e;g.activateChannels=f}),98);\n__d(\"WorkerQPLChannel\",[\"WorkerFuncChannel\",\"performanceAbsoluteNow\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=new(d(\"WorkerFuncChannel\").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=(h||(h=c(\"performanceAbsoluteNow\")))());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers[\"extends\"]({},e,{timestamp:(h||(h=c(\"performanceAbsoluteNow\")))()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=(h||(h=c(\"performanceAbsoluteNow\")))());return a.markerEnd(b,d,e,f)}}},\"qpl\");function a(a){i.setMessagePort(a)}function b(a){i.setBackend(a)}g.setMessagePort=a;g.initQPL=b}),98);\n__d(\"WAShiftTimer\",[\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){h(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){h(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){h(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){h(a);h(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function h(a){if(!(a>=0))throw c(\"WAErr\")(\"ShiftTimer must be given delayMs >= 0\")}g.ShiftTimer=a}),98);\n__d(\"WABridgeBatcher\",[\"WAShiftTimer\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=20,i=1e3;a=function(){function a(a,b){var c=this;this.$1=null;this.$4=h;this.$5=Date.now();this.$6=new(d(\"WAShiftTimer\").ShiftTimer)(function(){var a=c.$1;if(a==null)return;c.$1=null;c.$2(a)});this.$2=b;this.$3=a}var b=a.prototype;b.addEvent=function(a){var b=this.$1;this.$1=b?this.$3(b,a):[a];if(this.$6.isScheduled())return;b=this.$4;if(b<1){a=Date.now();var c=Math.max(a-this.$5,0)\/i;b=Math.min(b+c,h);this.$4=b;this.$5=a}b>=1?(c=0,this.$4=b-1):(c=Math.ceil(i*(1-b)),this.$4=0);this.$6.onOrBefore(c)};b.cancel=function(){this.$1=null,this.$6.cancel()};return a}();g.BridgeBatcher=a}),98);\n__d(\"WAPromiseCallSync\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g;function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return(g||(g=b(\"Promise\"))).resolve(a.apply(c,e))}catch(a){return(g||(g=b(\"Promise\"))).reject(a)}}f.promiseCallSync=a}),66);\n__d(\"WAPromiseManagement\",[\"WAPromiseCallSync\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=null,c=function(){b||(b=d(\"WAPromiseCallSync\").promiseCallSync(a)[\"finally\"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function b(a,b){var c=new Map();return function(d){var e=a(d),f=c.get(e);if(f)return f;try{f=Promise.resolve(b(d))}catch(a){f=Promise.reject(a)}d=f[\"finally\"](function(){return void c[\"delete\"](e)});c.set(e,d);return d}}var h=new Set();function c(a){h.add(a),a[\"finally\"](function(){h[\"delete\"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=b;g.preventGarbageCollection=c}),98);\n__d(\"WACrossWorkerPortal\",[\"Promise\",\"WABridgeBatcher\",\"WAErr\",\"WALogger\",\"WAPromiseManagement\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"absorbPortal: transferring request #\",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge unexpected non-result to call\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge unexpected result to cast: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge unrecognized result \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge \",\" response of \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge \",\" request for \",\"\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge queuing \",\" msgs\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge sending \",\" across (delayed)\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge received msg on old port\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Bridge updating port\"]);r=function(){return a};return a}var s=function(){function a(a,b,c,e){var f=this;this.port=null;this.$2=1;this.openRequests=new Map();this.listeners=new Set();this.processedRequests=new Set();this.$1=a;this.sendStream=new(d(\"WABridgeBatcher\").BridgeBatcher)(b,function(a){f.$3(a)});c.forEach(function(b){a.setNamespaceHandler(b,f.$4(b))});this.clientId=e}var e=a.prototype;e.$5=function(){var a=this.clientId!=null?this.clientId+\"_\":\"\";return\"\"+a+this.$2++};e.$6=function(a){a=a.split(\"_\");return a.length!==2?null:a[0]};e.addListener=function(a){var b=this;this.listeners.add(a);return function(){return b.listeners[\"delete\"](a)}};e.setPort=function(a){var b=this;d(\"WALogger\").LOG(r());this.port=a;this.sendStream.cancel();a.onmessage=function(c){if(b.port!==a){d(\"WALogger\").WARN(q()).devConsole(c.data);return}c=c.data;if(!c||!Array.isArray(c))return;c.forEach(function(c){b.$7(c,\"incoming\"),b.$8(a,c)})};this.openRequests.forEach(function(a){a=a.request;d(\"WALogger\").LOG(p(),a.name);b.sendStream.addEvent({type:\"request\",content:a})})};e.getBridge=function(){return this.$1};e.$4=function(a){var b=this;return function(c,d,e,f){b.$9(a,c,d,e,f)}};e.$9=function(a,b,c,d,e){var f=this.$5();a={requestId:f,expectsResponse:!!d,namespace:a,name:b,arg:c,silentLog:e};this.openRequests.set(f,{request:a,resolver:d});this.sendStream.addEvent({type:\"request\",content:a})};e.$10=function(a,b){if(a!==this.port)return;this.sendStream.addEvent({type:\"result\",content:b})};e.$3=function(a){var b=this,c=this.port;if(!c){d(\"WALogger\").LOG(o(),a.length);return}c.postMessage(a);a.forEach(function(a){return b.$7(a,\"outgoing\")})};e.$7=function(a,b){this.listeners.forEach(function(c){return c(a,b)})};e.$8=function(a,e){var f=this;if(e.type===\"request\"){var g=e.content,i=g.namespace,o=g.name,p=g.requestId,q=g.arg,r=g.expectsResponse,s=g.silentLog;s||d(\"WALogger\").LOG(n(),p,o);g=this.$1;if(r){r=g.sendAndReceive(i,o,q,s).then(function(b){f.$10(a,{requestId:p,type:\"success\",result:b,silentLog:s})},function(b){f.$10(a,{requestId:p,type:\"error\",result:String(b),silentLog:s})});d(\"WAPromiseManagement\").preventGarbageCollection(r)}else{g.fireAndForget(i,o,q,s);r={type:\"result\",content:{requestId:p,type:\"handled\",silentLog:s}};this.$7(r,\"outgoing\");a.postMessage([r])}}else{e.type;g=e.content;i=g.requestId;o=g.type;q=g.result;r=g.silentLog;r||d(\"WALogger\").LOG(m(),i,o);e=this.$6(i);if(e!==this.clientId||this.processedRequests.has(i))return;g=this.openRequests.get(i);if(!g){d(\"WALogger\").WARN(l(),i);return}switch(o){case\"success\":case\"error\":this.openRequests[\"delete\"](i);this.processedRequests.add(i);r=g.resolver;r?r(o===\"success\"?q:(h||(h=b(\"Promise\"))).reject(c(\"WAErr\")(q))):d(\"WALogger\").ERROR(k(),q);break;case\"handled\":g.resolver?d(\"WALogger\").ERROR(j()):(this.openRequests[\"delete\"](i),this.processedRequests.add(i));break}}};return a}();function a(a,b,c,d){return new s(a,c,b,d)}function e(a){var b;(b=a.port)==null?void 0:b.close();a.port=null;a.sendStream.cancel();b=a.openRequests;a.openRequests=new Map();var c=a.getBridge();b.forEach(function(a){var b=a.request;a=a.resolver;var e=b.namespace,f=b.name,g=b.arg,h=b.silentLog;d(\"WALogger\").LOG(i(),b.requestId);a?a(c.sendAndReceive(e,f,g,h)):c.fireAndForget(e,f,g,h)})}g.CrossWorkerPortal=s;g.attachPortal=a;g.killPortalAndSendPendingToBridge=e}),98);\n__d(\"WAOfflineUtils\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\").Mirrored([\"INIT\",\"OFFLINE_RESUME\",\"ONLINE\"]);c=b(\"$InternalEnum\")({Initializing:\"initializing\",Failed:\"failed\",Processing:\"processing\",Complete:\"complete\"});f.ServerRPCMode=a;f.WAClientInfraOfflineProgress=c}),66);\n__d(\"MAWLoggerUtils\",[],(function(a,b,c,d,e,f){\"use strict\";a={CleanerPurge:\"CleanerPurge\",CleanerStart:\"CleanerStart\",CleanerTimestamp:\"CleanerTimestamp\",CleanerUpdate:\"CleanerUpdate\",Countdown:\"Countdown\",Ephemeral:\"Ephemeral\",Incoming:\"Incoming\",MsgCleaner:\"MsgCleaner\",OnLoad:\"OnLoad\",OnRead:\"OnRead\",Outgoing:\"Outgoing\",PeerReceipt:\"PeerReceipt\",SettingChange:\"SettingChange\",SettingSync:\"SettingSync\",CryptoManager:\"CryptoManager\",SignedPrekey:\"SignedPrekey\",OneTimePrekey:\"OneTimePrekey\",DeviceRegistration:\"DeviceRegistration\",SignedPrekeyRotation:\"SignedPrekeyRotation\",PrekeyGenerateAndUpload:\"PrekeyGenerateAndUpload\",MessageReceive:\"MessageReceive\",MediaDownload:\"MediaDownload\",MediaPreview:\"MediaPreview\",WorkerSetup:\"WorkerSetup\",MAWWorker:\"MAWWorker\",MAWInit:\"MAWInit\",LogoutHandler:\"LogoutHandler\"};f.Tag=a}),66);\/*FB_PKG_DELIM*\/\n__d(\"hashString\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return b}f[\"default\"]=a}),66);\n__d(\"setImmediate\",[\"TimeSlice\",\"TimerStorage\",\"setImmediateAcrossTransitions\"],(function(a,b,c,d,e,f,g){function a(a){var b,d=function(){c(\"TimerStorage\").unset(c(\"TimerStorage\").IMMEDIATE,b);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];Function.prototype.apply.call(a,this,e)};c(\"TimeSlice\").copyGuardForWrapper(a,d);for(var e=arguments.length,f=new Array(e>1?e-1:0),g=1;g<e;g++)f[g-1]=arguments[g];b=c(\"setImmediateAcrossTransitions\").apply(void 0,[d].concat(f));c(\"TimerStorage\").set(c(\"TimerStorage\").IMMEDIATE,b);return b}g[\"default\"]=a}),98);\n__d(\"LSMessageReplySourceTypeV2\",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19});f[\"default\"]=a}),66);\n__d(\"isOccamadilloResumeSyncEnabled\",[\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"gkx\")(\"24091\")&&c(\"gkx\")(\"24158\")&&c(\"gkx\")(\"24149\")}g[\"default\"]=a}),98);\n__d(\"I64MigrationHelper\",[\"I64\",\"nullthrows\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){return c(\"nullthrows\")((h||(h=d(\"I64\"))).cast(a))}g.cast=a}),98);\n__d(\"LSTableDefaults\",[\"I64MigrationHelper\"],(function(a,b,c,d,e,f){e.exports={sync_groups:{syncStatus:(a=b(\"I64MigrationHelper\")).cast([0,0]),sendSyncParams:!1,minTimeToSyncTimestampMs:a.cast([0,0]),canIgnoreTimestamp:!1,priority:a.cast([0,0]),lastSyncRequestTimestampMs:a.cast([0,0]),lastSyncCompletedTimestampMs:a.cast([0,0]),syncChannel:a.cast([0,1])},pending_tasks:{enqueueTimestampMs:a.cast([0,0]),firstExecutedTimestampMs:a.cast([0,0]),failureCount:a.cast([0,0]),minTimeToSyncTimestampMs:a.cast([0,0]),pluginType:a.cast([0,0]),priority:a.cast([0,0]),taskDispatchPriority:a.cast([0,0])},pending_fire_and_forget_tasks:{enqueueTimestampMs:a.cast([0,0]),priority:a.cast([0,0])},contacts:{isMessengerUser:!1,isMemorialized:!1,blockedByViewerStatus:a.cast([0,0]),rank:a.cast([0,0]),contactType:a.cast([0,0]),contactTypeExact:a.cast([0,0]),canViewerMessage:!0,gender:a.cast([0,0]),authorityLevel:a.cast([0,0]),optimisticBlockedByViewerStatus:a.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:a.cast([0,0]),contactReachabilityStatusType:a.cast([0,0]),restrictionType:a.cast([0,0]),waConnectStatus:a.cast([0,0]),capabilities2:a.cast([0,0]),isEmployee:!1},ig_contact_info:{e2eeEligibility:a.cast([0,0])},bot_profile_info_v2:{hasEmbodiment:!1},reactions:{timestampMs:a.cast([0,0]),authorityLevel:a.cast([0,0]),reactionCreationTimestampMs:a.cast([0,0])},threads:{lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),isAdminSnippet:!1,ongoingCallState:a.cast([0,0]),snippetHasEmoji:!1,hasPersistentMenu:!1,disableComposerInput:!1,capabilities:a.cast([0,0]),isCustomThreadPicture:!1,isDisappearingMode:!1,unreadDisappearingMessageCount:a.cast([0,0]),authorityLevel:a.cast([0,0]),capabilities2:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),unsendLimitMs:a.cast([0,0]),threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),capabilities3:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),isReadReceiptsDisabled:!1,readReceiptsDisabledV2:a.cast([0,0]),capabilities4:a.cast([0,0]),isHidden:!1},threads_ranges_v2__generated:{minThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),maxThreadKey:a.cast([0,0]),maxLastActivityTimestampMs:a.cast([0,0]),isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},messages:{timestampMs:a.cast([0,0]),primarySortKey:a.cast([0,0]),secondarySortKey:a.cast([0,0]),isAdminMessage:!1,sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),isUnsent:!1,replyStatus:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),hasQuickReplies:!1,textHasLinks:!1,viewFlags:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),quickReplyType:a.cast([0,0]),authorityLevel:a.cast([0,0]),unsentTimestampMs:a.cast([0,0]),isCollapsed:!1,messageRenderingType:a.cast([0,0]),isExpired:!1},messages_ranges_v2__generated:{isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},participants:{readWatermarkTimestampMs:a.cast([0,0]),deliveredWatermarkTimestampMs:a.cast([0,0]),authorityLevel:a.cast([0,0]),readActionTimestampMs:a.cast([0,0]),groupParticipantJoinState:a.cast([0,0]),threadRoles:a.cast([0,0])},attachments:{timestampMs:a.cast([0,0]),attachmentType:a.cast([0,0]),hasMedia:!1,isSharable:!1,hasXma:!1,attachmentIndex:a.cast([0,0]),authorityLevel:a.cast([0,0])},attachments_ranges_v2__generated:{mediaGroup:a.cast([0,0]),isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},attachment_items:{attachmentIndex:a.cast([0,0])},group_membership_approval_requests:{authorityLevel:a.cast([0,0])},admin_message_ctas:{timestampMs:a.cast([0,0]),showAdChoiceIcon:!1},thread_nullstate:{ctaType:a.cast([0,0]),privacyTextCtaType:a.cast([0,0])},messages_status:{timestampMs:a.cast([0,0])},polls:{pollType:a.cast([0,0])},poll_options_v2:{voteCount:a.cast([0,0]),sortKeyVotingTimestamp:a.cast([0,0]),sortKeyCreationTimestamp:a.cast([0,0])},filtered_threads_ranges_v3__generated:{minThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),maxThreadKey:a.cast([0,0]),maxLastActivityTimestampMs:a.cast([0,0]),isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1,folderName:\"inbox\",secondaryThreadRangeFilter:a.cast([0,0]),threadRangeFilterValue:\"\"},community_folders:{capabilities:a.cast([0,0]),notificationMutedUntil:a.cast([0,0]),inviteStatus:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0])},community_members:{source:a.cast([0,0]),adminActions:a.cast([0,0]),contactCapabilities:a.cast([0,0]),channelBadges:a.cast([0,0]),threadRoles:a.cast([0,0]),requestId:\"\"},ig_thread_info:{igDmSettingsMode:a.cast([0,0]),igDmSettingsTtlSec:a.cast([-1,4294967295])},edit_message_history:{sendStatus:a.cast([0,0])},ig_thread_labels:{labelTimestampMs:a.cast([0,0])},inbox_threads_ranges:{minThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),isLoadingBefore:!1,hasMoreBefore:!1},community_direct_invites_presets:{fallbackUrl:\"\",pictureUrlExpirationTimestampMs1:a.cast([0,0]),pictureUrlExpirationTimestampMs2:a.cast([0,0]),presetTypeV2:\"ALL_MEMBERS\"},sync_group_threads_ranges:{minThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),isLoadingBefore:!1,hasMoreBefore:!1},community_chat_polls:{pollType:a.cast([0,0])},community_chat_poll_options:{voteCount:a.cast([0,0]),sortKeyVotingTimestamp:a.cast([0,0]),sortKeyCreationTimestamp:a.cast([0,0])},reactions_v2:{viewerReactionTimestampMs:a.cast([0,0]),lastUpdatedTimestampMs:a.cast([0,0])},group_invitations_pending:{communityJoinRequestStatus:a.cast([0,0]),communityParticipationControlRequestStatus:a.cast([0,0]),communityParticipationControlSetting:a.cast([0,0])},thread_label_mappings:{sortKey:a.cast([0,0])},inbox_view_state:{value:\"\"},inbox_view_state_v2:{value:\"\"},discoverable_chat_participants:{source:a.cast([0,0])},roll_calls:{viewerHasContributed:!1,viewerCanEditPrompt:!1,isBlurred:!1,canViewWithoutContributing:!1},roll_call_contributions_v2:{contributorId:a.cast([0,0]),contributionSource:a.cast([0,0])},shared_albums:{lastActivityTimestampMs:a.cast([0,0]),contributionCount:a.cast([0,0])},shared_album_contributions:{creationTimestampMs:a.cast([0,0]),creatorId:a.cast([0,0])},search_queries:{surfaceType:a.cast([0,1])},universal_search_recent_searches:{lastAccessedTimestampMs:a.cast([0,0])},cm_search_nullstate_metadata:{score:0},ai_bot_search_metadata:{displayName:\"\",contactViewerRelationship:a.cast([0,0]),score:0},contact_upload_settings:{authorityLevel:a.cast([0,0])},presence_settings:{isActiveStatusViewable:!1,isActiveStatusViewableOnFb:!1,isActiveStatusViewableOnMessenger:!1,hasConvertedToViewSideSettings:!1},video_chat_links_joining:{canAnonymousUsersJoin:a.cast([0,0])},notification_settings:{includeInSwitchAccountBadges:!1,mutePageAccountMessageReminder:!1},avatar_settings:{enableAvatarHotlike:!1},messaging_privacy_settings:{readReceiptsDisabled:a.cast([0,0]),e2eeXmaPreviewsDisabled:!1},rtc_call_events:{isProcessed:!1},custom_thread_commands:{isOpenPersistentMenu:!1},transaction_history:{timestampMs:a.cast([0,0])},thread_themes:{isDeprecated:!1,iconUrl:\"\",iconUrlFallback:\"\",backgroundUrl:\"\"},ranking_scores:{score:a.cast([0,0]),scoreIndex:a.cast([0,0])},story_buckets:{pageNum:a.cast([0,0]),readState:a.cast([0,0])},stories:{authorityLevel:a.cast([0,0])},story_viewers:{interactionType:a.cast([0,1]),authorityLevel:a.cast([0,0])},story_reactions:{authorityLevel:a.cast([0,0])},story_ad_unit:{shouldShowAdChoice:!1},story_overlays:{authorityLevel:a.cast([0,0])},rooms:{notificationMutedUntilMs:a.cast([0,0])},media_staging:{progress:a.cast([0,0])},client_messages:{textSize:a.cast([0,0]),sendStatus:a.cast([0,0]),isHidden:!1,isTombstoned:!1,isReplyOnly:!1,messageContentType:a.cast([0,0]),messageContentSubtype:a.cast([0,0]),messageSource:a.cast([0,0]),messageCreationType:a.cast([0,0]),messageEphemeralityType:a.cast([0,0]),replyStatus:a.cast([0,0]),replyMessageTextSize:a.cast([0,0]),replyVicinityStatus:a.cast([0,0]),isForwarded:!1,isReadonly:!1,disabledActionsReason:a.cast([0,0]),shouldPersist:!1,shouldHideInSnippet:!1},client_participants:{isPending:!1,capabilities1:a.cast([0,0]),capabilities2:a.cast([0,0]),readActionTsMs:a.cast([0,0])},client_threads:{isAdminSnippet:!1,isHotlikeSnippet:!1,groupMemberAddMode:a.cast([0,0]),capabilities1:a.cast([0,0]),capabilities2:a.cast([0,0]),isHidden:!1,isTombstoned:!1,isPending:!1,isShadowThread:!1,pinnedMessagesCount:a.cast([0,0])},data_trace_meta:{initTimestampMs:a.cast([0,0]),foregroundTimestampMs:a.cast([0,0]),traceType:a.cast([0,0]),shouldFlush:!1},data_trace_addon:{timestampMs:a.cast([0,0])},secure_encrypted_backups_client_state:{authorityLevel:a.cast([0,0]),encryptionVersion:a.cast([0,0]),revisionVersion:a.cast([0,0])},secure_encrypted_backups_epochs:{authorityLevel:a.cast([0,0])},encrypted_backups:{authorityLevel:a.cast([0,0]),hasOtcEligibleDevices:!1},secure_encrypted_backups_generated_recovery_code:{virtualDeviceType:a.cast([0,1])},encrypted_backups_virtual_devices:{virtualDeviceType:a.cast([0,1]),removalStatus:a.cast([0,1]),requiresHsmMigration:!1},encrypted_backups_metadata:{authorityLevel:a.cast([0,0])},cutover_threads:{isMigrated:!1,showOpenMessageHistory:!1},persistent_menu_ctas:{ctaType:\"fallback\"},anonymous_task_context:{failureCount:a.cast([0,0])},lightspeed_task_context:{requiresAuthentication:!1}}}),null);\n__d(\"isInstamadillo\",[\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"qex\")._(\"662\")===!0}g[\"default\"]=a}),98);\n__d(\"MAWLSVaultingHooks\",[\"ReStoreVaulting\"],(function(a,b,c,d,e,f,g){\"use strict\";a={onAfterEntriesNext:function(a){var b=a.tableName;a=a.value;return d(\"ReStoreVaulting\").maybeVaultDbRow(a,b)},onAfterGet:function(a){var b=a.tableName;a=a.value;return d(\"ReStoreVaulting\").maybeVaultDbRow(a,b)},onBeforeAdd:function(a){var b=a.tableName;a=a.value;return d(\"ReStoreVaulting\").maybeUnvaultDbRow(a,b)},onBeforeNotify:function(a){var b=a.newValue,c=a.prevValue;a=a.tableName;return{newValue:d(\"ReStoreVaulting\").maybeVaultDbRow(b,a),prevValue:d(\"ReStoreVaulting\").maybeVaultDbRow(c,a)}},onBeforePut:function(a){var b=a.tableName;a=a.value;return d(\"ReStoreVaulting\").maybeUnvaultDbRow(a,b)},onBeforeUpsert:function(a){var b=a.tableName;a=a.value;return d(\"ReStoreVaulting\").maybeUnvaultDbRow(a,b)}};g[\"default\"]=a}),98);\n__d(\"LSStorage\",[\"ReStoreKeyComparer\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){return(h||(h=d(\"ReStoreKeyComparer\"))).compareKey(a,b)===0}g.areKeysEqual=a}),98);\n__d(\"LSTransactionLogger\",[\"cr:8879\"],(function(a,b,c,d,e,f,g){\"use strict\";g[\"default\"]=b(\"cr:8879\")}),98);\n__d(\"ReStoreUtils\",[\"I64\",\"LSStorage\",\"LSTableDefaults\",\"ReQLBounds\",\"ReStoreKeyComparer\",\"isPromise\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k;async function a(a){var b=[],c=await a.next();while(!c.done)b.push(c.value),c=await a.next();return b}function l(a,b,d){var e=a.indexes;a=a.primaryKeyIds;a=d==null?a:e[d];return a.map(function(a){if(b[a]!==void 0||d!=null)return b[a];throw c(\"unrecoverableViolation\")(\"primary key must be defined on object\",\"messenger_web_product\")})}function m(a,b){var d=c(\"LSTableDefaults\")[b];return!d?a:Object.keys(d).reduce(function(a,b){Object.prototype.hasOwnProperty.call(a,b)||(a[b]=d[b]);return a},babelHelpers.extends({},a))}function n(a,b,c,e,f,g,h){function i(){var j=a.table(c.name),l=babelHelpers.extends({},(k||(k=d(\"ReQLBounds\"))).extendBounds(g,(e===void 0?c.primaryKeyIds:c.indexes[e]).length),{dir:f}),m=e==null?j.tableEntries(b,l):j.indexEntries(b,e,l);return j={next:function*(a,b){a=(yield* m.next(b));if(a.done)return{done:!0};b=a.value[1];return{done:!1,value:[a.value[0],h==null?b:h.afterEntriesNext({tableName:c.name,value:b})]}}},j[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]=i,j}return i()}function b(a,b,c,e,f,g){function h(){var i=a.table(c.name),j=i.keys(b,e,babelHelpers.extends({},(k||(k=d(\"ReQLBounds\"))).extendBounds(g,(e===void 0?c.primaryKeyIds:c.indexes[e]).length),{dir:f}));return i={next:function*(a,b){return yield* j.next(b)}},i[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]=h,i}return h()}function o(a,b){function d(b){if(b.done)return b.value;if(!(h||(h=c(\"isPromise\")))(b.value))throw c(\"unrecoverableViolation\")(\"expected promise\",\"messenger_web_product\");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}async function e(a,b,c,d,e,f,g){f=a.table(c);d!=null?a=await o(f.indexGet(b,d,e)):a=await o(f.tableGet(b,e));return a===void 0?void 0:g.afterGet({tableName:c,value:a})}function f(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function p(a){a=(i||(i=d(\"I64\"))).cast(a);if(a===void 0)throw c(\"unrecoverableViolation\")(\"Expected int64\",\"messenger_web_product\");return i.to_float(a)}function q(a,b,c,d,e){b=JSON.stringify([b,c]);c=a.get(b);(c==null?d:c[0])==null&&e==null?a.delete(b):a.set(b,[c==null?d:c[0],e])}function* r(a,b,c,e,f,g,h,i,k){function m(a,b){return a.length>=b?a:[].concat(a,[(j||(j=d(\"ReStoreKeyComparer\"))).MAX_KEY])}if(h!=null&&(j||(j=d(\"ReStoreKeyComparer\"))).compareKey(g,h)===0)return;f=a.tableNames[f];var o=f.cascadeUpdates,p=f.primaryKeyIds;f=function*(d){var f=d.indexName;d=d.tableName;var j=a.tableNames[d],o=j.indexes,q=j.primaryKeyIds,s=f==null?q:o[f];q={gte:g,lte:m(g,s.length)};o=n(c,e,j,f,\"asc\",q);j=[];f=(yield* o.next(k));while(!f.done)j.push(f.value),f=(yield* o.next(k));for(q of j){q[0];o=q[1];f=l(a.tableNames[d],o);if(h===void 0)yield* u(a,b,c,e,d,f,k),yield* r(a,b,c,e,d,f,void 0,i,k);else{j=p.reduce(function(a,b,c){if(c>=h.length)return a;a[s[c]]=h[c];return a},babelHelpers.extends({},o));yield* t(a,b,c,e,d,f,j,i,k);yield* r(a,b,c,e,d,f,l(a.tableNames[d],j),i,k)}}};for(o of o)yield* f(o)}function* s(a,b,c,e,f,g,h,k){var n=c.table(f),o=a.tableNames[f];if(o.autoIncrement){var r=g[o.primaryKeyIds[0]];r=(i||(i=d(\"I64\"))).of_float(yield* n.incrementSeed(e,r===void 0?r:p(r)));g[o.primaryKeyIds[0]]=r}r=l(o,g);var s={},t=(yield* n.tableGet(e,r)),u=g;t!==void 0?s=v(o,Object.keys(o.indexes),t):u=m(g,o.name);g=(yield* n.tableSet(e,r,u));var y=g[0];g=g[1];o=v(o,Object.keys(o.indexes),u);var z=babelHelpers.extends({},o);for(var A of Object.keys(z))s[A]!==void 0&&(j||(j=d(\"ReStoreKeyComparer\"))).compareKey(s[A],z[A])===0&&(delete z[A],delete s[A]);yield* w(a,b,c,e,f,z,h,k);yield* x(c,e,f,y,g?o:z);for(A of Object.keys(s))yield* n.indexDelete(e,A,s[A]);q(b,f,r,t,u);return r}function* t(a,b,c,e,f,g,h,i,j){var k=l(a.tableNames[f],h);d(\"LSStorage\").areKeysEqual(g,k)||(yield* u(a,b,c,e,f,g,j));yield* s(a,b,c,e,f,h,i,j)}function* u(a,b,c,d,e,f,g){g=c.table(e);c=a.tableNames[e];a=(yield* g.tableGet(d,f));if(a!==void 0){if(Object.keys(c.indexes).length)for(var h of Object.keys(c.indexes)){var i=l(c,a,h);i!=null&&(yield* g.indexDelete(d,h,i))}yield* g.tableDelete(d,f);q(b,e,f,a,void 0)}}function v(a,b,c){return b.reduce(function(b,d){var e;e=(e=a.indexPredicates)==null?void 0:e[d];if(e!=null&&!e(c))return b;e=l(a,c,d);b[d]=e;return b},{})}function* w(a,b,c,d,e,f,g,h){var i=c.table(e);for(var j of Object.keys(f)){var k=f[j];k=(yield* i.indexGet(d,j,k));if(k!=null){k=l(a.tableNames[e],k);yield* u(a,b,c,d,e,k,h);yield* r(a,b,c,d,e,k,void 0,g,h)}}}function* x(a,b,c,d,e){a=a.table(c);for(c of Object.keys(e)){var f=e[c];f===void 0?yield* a.indexDelete(b,c,f):yield* a.indexSet(b,c,f,d)}}g.collectIterator=a;g.searchKey=l;g.appendDefaultValues=m;g.entries=n;g.keys=b;g.gen=o;g.getLocked=e;g.getOrCreate=f;g.cascadeKeyUpdatesLocked=r;g.putLocked=s;g.upsertLocked=t;g.deleteItemLocked=u;g.indicesWithKeyForValue=v;g.deconflictIndicesLocked=w;g.addIdToIndices=x}),98);\n__d(\"ReStoreDefaultValueMigration\",[\"LSPlatformLsInitLog\",\"LSTableDefaults\",\"ReStoreDefaultValuesMetadata\",\"ReStoreUtils\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){var c={};b=(yield d(\"ReStoreUtils\").collectIterator(b.table(d(\"ReStoreDefaultValuesMetadata\").defaultValuesTableName).entries(a)));for(a of b){b=a[0];var e=a[1];if(b!=null){var f;b=d(\"ReStoreDefaultValuesMetadata\").tryParseDefaultValuesData(e);if(b==null)continue;e=b.columns;b=b.tableName;c[b]=(f=c[b])!=null?f:new Set();for(f of e)c[b].add(f)}}return c});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,d){a=(yield h(a,b));b={};for(d in d.tableNames){var e=c(\"LSTableDefaults\")[d];if(e!=null)for(var f in e){var g;g=(g=a[d])==null?void 0:g.has(f);if(!g){b[d]=(g=b[d])!=null?g:{};b[d][f]=e[f]}}}return b});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){for(b in b){var e=Object.keys(c(\"LSTableDefaults\")[b]||{});e={columns:e,tableName:b};yield a.table(d(\"ReStoreDefaultValuesMetadata\").defaultValuesTableName).put(d(\"ReStoreDefaultValuesMetadata\").defaultValuesColumnToValue(e))}});return m.apply(this,arguments)}function a(a,b,c){return n.apply(this,arguments)}function n(){n=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){var e=new WeakMap();d(\"LSPlatformLsInitLog\").addPoint(\"default_values_update_start\");var f=function(a,b){d(\"LSPlatformLsInitLog\").addPoint(\"default_values_update_end_failure\",{string:{default_values_update_failure_point:b,default_values_update_failure_reason:String(a)}})};try{b=(yield j(e,a,b));try{if(c==!1)for(c in b){var g=a.table(c).entries(e),h=(yield g.next());while(!h.done){var i=babelHelpers[\"extends\"]({},h.value[1]);i=d(\"ReStoreUtils\").appendDefaultValues(i,c);yield a.table(c).put(i);h=(yield g.next())}}yield l(a,b);d(\"LSPlatformLsInitLog\").addPoint(\"default_values_update_end\")}catch(a){f(a,\"setDefaultValues\")}}catch(a){f(a,\"findDefaultValuesToUpdate\")}});return n.apply(this,arguments)}g.runMigrationForTableDefaultValuesIfNeeded=a}),98);\n__d(\"ReStoreHooks\",[\"PromiseOrValue\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){return{afterEntriesNext:a.reduce(function(a,b){var c=b.onAfterEntriesNext;return c?function(b){return c({tableName:b.tableName,value:a(b)})}:a},function(a){a=a.value;return a}),afterGet:a.reduce(function(a,b){var c=b.onAfterGet;return c?function(b){return c({tableName:b.tableName,value:a(b)})}:a},function(a){a=a.value;return a}),beforeAdd:a.reduce(function(a,b){var c=b.onBeforeAdd;return c?function(b){return(h||(h=d(\"PromiseOrValue\"))).map(a(b),function(a){return c(babelHelpers.extends({},b,{value:a}))})}:a},function(a){a=a.value;return a}),beforeNotify:a.reduce(function(a,b){var c=b.onBeforeNotify;return c?function(b){var d=a(b),e=d.newValue;d=d.prevValue;return c({newValue:e,prevValue:d,tableName:b.tableName})}:a},function(a){var b=a.newValue;a=a.prevValue;return{newValue:b,prevValue:a}}),beforePut:a.reduce(function(a,b){var c=b.onBeforePut;return c?function(b){return(h||(h=d(\"PromiseOrValue\"))).map(a(b),function(a){return c(babelHelpers.extends({},b,{value:a}))})}:a},function(a){a=a.value;return a}),beforeUpsert:a.reduce(function(a,b){var c=b.onBeforeUpsert;return c?function(b){return(h||(h=d(\"PromiseOrValue\"))).map(a(b),function(a){return c(babelHelpers.extends({},b,{value:a}))})}:a},function(a){a=a.value;return a})}}g.createHookManager=a}),98);\n__d(\"ReStoreIndexeddbPersistenceInitFailure\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"IndexedDB onsuccess and onerror were never called for PDB\",h=\"ReStoreIndexeddbPersistenceInitFailure\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c=g;b=a.call(this,c)||this;b.message=c;b.name=h;return b}return b}(babelHelpers.wrapNativeSuper(Error));f.ERROR_NAME=h;f.ReStoreIndexeddbPersistenceInitFailure=a}),66);\n__d(\"ReStoreIndicesMigration\",[\"LSPlatformLsInitLog\",\"ReStoreIndexMetadata\",\"ReStoreUtils\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a,b){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){var c={};b=(yield d(\"ReStoreUtils\").collectIterator(b.table(d(\"ReStoreIndexMetadata\").indicesTableName).entries(a)));for(a of b){b=a[0];var e=a[1];if(b!=null){var f;e=d(\"ReStoreIndexMetadata\").tryParseIndexData(e);if(e==null)continue;var g=e.indexName,h=e.tableName;c[h]=(f=c[h])!=null?f:{};c[h][g]=babelHelpers[\"extends\"]({index:e.data,key:b},e.predicate==null?{}:{predicate:e.predicate})}}return c});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){a=(yield h(a,b));b={};for(var e in c.tableNames){var f=c.tableNames[e];for(var g in f.indexes){var i,j;i=[f.indexes[g],(i=f.indexPredicates)==null?void 0:(i=i[g])==null?void 0:i.toString()];j=(j=a[e])==null?void 0:j[g];if(d(\"ReStoreIndexMetadata\").indicesDiffer([j==null?void 0:j.index,j==null?void 0:j.predicate],i)){b[e]=(j=b[e])!=null?j:{};b[e][g]=i}}}j={};for(i in a){g=a[i];for(f in g){var k;e=g[f];k=(k=c.tableNames[i])==null?void 0:(k=k.indexes)==null?void 0:k[f];if(k==null){j[i]=(k=j[i])!=null?k:{};j[i][f]=e}}}return{toRemove:j,toUpdate:b}});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){for(var c in b){var e=b[c];for(var f in e){var g=e[f],h=g[0];g=g[1];h=babelHelpers[\"extends\"]({data:h,indexName:f,tableName:c},g==null?{}:{predicate:g});yield a.table(d(\"ReStoreIndexMetadata\").indicesTableName).put(d(\"ReStoreIndexMetadata\").indexDataToValue(h))}}});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){for(var c in b){var e=b[c];for(var f in e){var g,h=e[f].key;yield (g=a.table(d(\"ReStoreIndexMetadata\").indicesTableName))[\"delete\"].apply(g,h)}}});return o.apply(this,arguments)}function a(a,b,c,d){return p.apply(this,arguments)}function p(){p=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,c,e,f){var g=new WeakMap();d(\"LSPlatformLsInitLog\").addPoint(\"index_migration_start\");var h=function(a,b){d(\"LSPlatformLsInitLog\").addPoint(\"index_migration_end_failure\",{string:{index_migration_failure_point:b,index_migration_failure_reason:String(a)}})};return j(g,a,c).then(function(){var g=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(b){var g=b.toRemove;b=b.toUpdate;var h=Array.from(new Set([].concat(Object.keys(b),Object.keys(g))));d(\"LSPlatformLsInitLog\").addAnnotations({\"int\":{index_migration_rebuild_tables_count:h.length}});if(e===!1)for(h of h)if(c.tableNames[h]!=null){var i;i=Array.from(new Set([].concat(Object.keys((i=b[h])!=null?i:{}),Object.keys((i=g[h])!=null?i:{}))));yield f(h,i)}yield l(a,b);yield n(a,g);d(\"LSPlatformLsInitLog\").addPoint(\"index_migration_end\")});return function(a){return g.apply(this,arguments)}}(),function(a){return h(a,\"findIndicesToUpdateOrRemove\")})[\"catch\"](function(a){return h(a,\"rebuildIndices\")})});return p.apply(this,arguments)}g.runMigrationForIndicesIfNeeded=a}),98);\n__d(\"ReStorePersistenceIds\",[],(function(a,b,c,d,e,f){\"use strict\";a=\"nextId\";b=\"seed\";c=\"schema_version\";d=\"default_value_version\";e=\"custom_migration_value_version\";f.idForNextId=a;f.idForSeed=b;f.idForSchema=c;f.idForDefaultValue=d;f.idForCustomMigrationValue=e}),66);\n__d(\"ReStorePersistence\",[\"FBLogger\",\"LSTransactionLogger\",\"ReStoreKeyComparer\",\"ReStorePersistenceIds\",\"ReStoreUtils\",\"isPromise\",\"nullthrows\",\"qpl\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j={},k={gt:[!1,0],gte:[!0,0],lt:[!0,1],lte:[!1,1]},l=new Set([\"encrypted_backups_virtual_devices\",\"secure_encrypted_backups_recovery_code_status\",\"device_metadata\",\"secure_encrypted_backups_epochs\",\"secure_encrypted_backups_client_state\",\"encrypted_backups\",\"experiences_shared_state\",\"occamadillo_most_recent_message_per_thread\"]),m=16,n=64,o=64,p=Math.floor(m\/2),q=Math.floor(n\/2),r=Math.floor(o\/2);function s(b){if(b==null)return b;var c=Object.getOwnPropertyNames(b),a={},d,e;for(d=0;d<c.length;d++)e=b[c[d]],a[c[d]]=e;return a}function t(a,b){b===void 0&&(b=j);return a===b}function u(a,b,c){var e=0,f=a.length-1;while(e<=f){var g=e+f>>1;(c[0]?(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(a[g],b)<0:(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(a[g],b)<=0)?e=g+1:f=g-1}g=[e,f][c[1]];return g===a.length?-1:g}var v=function(){function a(a,b,c,d,e){this.$2=b,this.$3=c,this.$1=a,this.$4=d,this.$5=e}var b=a.prototype;b.$6=function(a){return a==null?\"root\":\"index(\"+a+\")\"};b.$7=function(a,b){return d(\"ReStoreUtils\").getOrCreate(this.$1,b,function(){return{children:[].concat(a.children),isLeaf:!0,keys:[].concat(a.keys),nextId:a.nextId,prevId:a.prevId}})};b.$8=function(a,b){return d(\"ReStoreUtils\").getOrCreate(this.$1,b,function(){return{children:[].concat(a.children),isLeaf:!1,keys:[].concat(a.keys)}})};b.$9=function(a,b){return d(\"ReStoreUtils\").getOrCreate(this.$1,b,function(){return{headId:a.headId,rootId:a.rootId,tailId:a.tailId}})};b.$10=function(a,b){if(!a.length)return[0,0];var c=u(a,b,k.gte);if(c===-1)return[a.length,0];else if((i||(i=d(\"ReStoreKeyComparer\"))).compareKey(a[c],b)===0)return[c,1];return[c,0]};b.$11=function*(a,b,c,d){var e=(yield* this.$12(a,b));e=e;b=b;var f=-1;while(!e.isLeaf)d==null?void 0:d.push([e,b,f]),f=u(e.keys,c,k.gt),f===-1&&(f=e.keys.length),b=e.children[f],e=(yield* this.$12(a,b));return[e,b,f]};b.$13=function*(a,b){this.$3();var d=this.$1.get(b);if(t(d))return void 0;if(d!==void 0)return d;d=this.$4.get(a,this.$2,b,this.$5);return(h||(h=c(\"isPromise\")))(d)?yield d:d};b.$12=function*(a,b){a=(yield* this.$13(a,b));if(a===void 0){var d=this.$1.get(b);this.$4.logError==null?void 0:this.$4.logError(this.$2,this.$5,\"dbCorruption\",{deletedInThisTxn:t(d)?\"true\":\"false\",id:JSON.stringify(b)||\"\"});throw c(\"unrecoverableViolation\")(\"value not found\",\"messenger_web_product\")}return a};b.$14=function*(a,b){a=(a=(yield* this.$13(a,d(\"ReStorePersistenceIds\").idForNextId)))!=null?a:0;this.$1.set(\"nextId\",a+1);this.$1.set(a,b);return a};b.$15=function(a,b){this.$3(),this.$1.set(a,b)};b.incrementSeed=function*(a,b){a=(a=(yield* this.$13(a,\"seed\")))!=null?a:0;if(b===void 0){this.$1.set(\"seed\",a+1);return a}b>=a&&this.$1.set(\"seed\",b+1);return b};b.readData=function*(a,b){return yield* this.$13(a,b)};b.$16=function*(a,b,c){b=(yield* this.$13(a,this.$6(b)));if(b==null)return;a=(yield* this.$11(a,b.rootId,c));b=a[0];a=u(b.keys,c,k.gte);if(a===-1||(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(b.keys[a],c)!==0)return;return b.children[a]};b.tableGet=function*(a,b){b=(yield* this.$16(a,void 0,b));if(b===void 0)return;return yield* this.$17(a,b)};b.$17=function*(a,b){return Array.isArray(b)?b[0]:yield* this.$12(a,b)};b.$18=function*(a,b){if(Array.isArray(b)){var d=c(\"nullthrows\")(yield* this.$16(a,void 0,b));return yield* this.$17(a,d)}return yield* this.$12(a,b)};b.indexGet=function*(a,b,c){b=(yield* this.$16(a,b,c));if(b==null)return;return yield* this.$18(a,b)};b.getId=function*(a,b){a=(yield* this.$16(a,void 0,b));return Array.isArray(a)?b:a};b.tableSet=function*(a,b,c){var d,e=this.$4.shouldInline(this.$2,c),f=this.$6(),g=(yield* this.$13(a,f));if(g==null){var h;e||(d=(yield* this.$14(a,c)));h={children:[(h=d)!=null?h:[c]],isLeaf:!0,keys:[b]};h=(yield* this.$14(a,h));this.$15(f,{headId:h,rootId:h,tailId:h});return[(h=d)!=null?h:b,!1]}h=[];var i=(yield* this.$11(a,g.rootId,b,h)),k=i[0];i=i[1];var l=this.$10(k.keys,b),m=l[0];l=l[1];var n=!1;if(l===1){var o=k.children[m];if(!Array.isArray(o)){n=!0;if(!e){this.$15(o,c);return[o,!1]}else this.$1.set(o,j)}}o=this.$7(k,i);e||(d=(yield* this.$14(a,c)));l===0&&o.keys.splice(m,0,b);o.children.splice(m,l,(k=d)!=null?k:[c]);yield* this.$19(a,o,i,h,g,f,!0);return[(m=d)!=null?m:b,l===1&&!(e&&!n)]};b.indexSet=function*(a,b,c,d){b=this.$6(b);var e=(yield* this.$13(a,b));if(e==null){var f={children:[d],isLeaf:!0,keys:[c]};f=(yield* this.$14(a,f));this.$15(b,{headId:f,rootId:f,tailId:f});return}f=[];var g=(yield* this.$11(a,e.rootId,c,f)),h=g[0];g=g[1];var i=this.$10(h.keys,c),j=i[0];i=i[1];if(i===1&&h.children[j]===d)return;h=this.$7(h,g);h.keys.splice(j,i,c);h.children.splice(j,i,d);yield* this.$19(a,h,g,f,e,b,!1)};b.$19=function*(a,b,c,d,e,f,g){b=b;var h;c=c;for(;b.keys.length>=(b.isLeaf?g?m:n:o);b=h,c=i){var i;i=(i=d.pop())!=null?i:[];h=i[0];i=i[1];i!=null?h=this.$8(h,i):(h={children:[c],isLeaf:!1,keys:[]},this.$9(e,f).rootId=(yield* this.$14(a,h)));var j=Math.floor(b.keys.length\/2),k=void 0;if(b.isLeaf){var l={children:b.children.slice(j),isLeaf:!0,keys:b.keys.slice(j),nextId:b.nextId,prevId:c},p=k=b.nextId=(yield* this.$14(a,l));l=l.nextId;l?this.$7(yield* this.$12(a,l),l).prevId=p:this.$9(e,f).tailId=k}else k=(yield* this.$14(a,{children:b.children.slice(j+1),isLeaf:!1,keys:b.keys.slice(j+1)}));l=this.$10(h.keys,b.keys[j]);p=l[0];l=l[1];h.keys.splice(p,l,b.keys[j]);h.children.splice(p+1,0,k);b.keys.length=j;b.children.length=j+(b.isLeaf?0:1)}};b.tableDelete=function*(a,b){a=(yield* this.$20(a,void 0,b));if(a==null)return!1;Array.isArray(a)||(this.$3(),this.$1.set(a,j));return!0};b.indexDelete=function*(a,b,c){return(yield* this.$20(a,b,c))!=null};b.$20=function*(a,b,e){var f=this.$6(b),g=(yield* this.$13(a,f));if(g==null)return;var h=[],m=(yield* this.$11(a,g.rootId,e,h)),n=m[0],o=m[1];m=m[2];var s=this.$7(n,o),t=u(n.keys,e,k.gte);if(t===-1||(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(n.keys[t],e)!==0)return;n=s.children[t];s.keys.splice(t,1);s.children.splice(t,1);e=s;t=o;s=m;var v;for(;e.keys.length<(e.isLeaf?b==null?p:q:r)&&h.length;x=[m,v,o],e=x[0],t=x[1],s=x[2],x){o=h.pop();m=o[0];v=o[1];o=o[2];m=this.$8(m,v);var w=[[{nodeId:m.children[s-1]},{node:e,nodeId:t},s-1],[{node:e,nodeId:t},{nodeId:m.children[s+1]},s]].filter(function(b){var a=b[0];b=b[1];return a.nodeId!==void 0&&b.nodeId!==void 0});for(var x of w){var y=x[0],z=x[1],A=x[2],B=y.node=y.node||(yield* this.$12(a,y.nodeId)),C=z.node=z.node||(yield* this.$12(a,z.nodeId)),D=e.isLeaf?b==null?p:q:r;if(B.keys.length+z.node.keys.length>=D*2){if(e.isLeaf){var E=this.$7(B,y.nodeId),F=this.$7(C,z.nodeId),G=[].concat(E.children,F.children),H=[].concat(B.keys,C.keys);E.children=(F.children=G).splice(0,D);E.keys=(F.keys=H).splice(0,D);m.keys[A]=H[0]}else{G=this.$8(B,y.nodeId);E=this.$8(C,z.nodeId);F=[].concat(G.children,E.children);H=[].concat(G.keys,[m.keys[A]],E.keys);G.children=(E.children=F).splice(0,D+1);m.keys[A]=H.splice(D,1)[0];G.keys=(E.keys=H).splice(0,D)}return n}}for(B of w){y=B[0];C=B[1];z=B[2];if(e.isLeaf){F=this.$7(y.node,y.nodeId);A=this.$7(C.node,C.nodeId);F.children=[].concat(F.children,A.children);F.keys=[].concat(F.keys,A.keys);A.keys.length=0;G=A.nextId;if(G){E=this.$7(yield* this.$12(a,G),G);E.prevId=y.nodeId}else this.$9(g,f).tailId=y.nodeId;F.nextId=A.nextId}else{H=this.$8(y.node,y.nodeId);D=this.$8(C.node,C.nodeId);H.children=[].concat(H.children,D.children);H.keys=[].concat(H.keys,[m.keys[z]],D.keys)}m.keys.splice(z,1);m.children.splice(z+1,1);this.$1.set(C.nodeId,j);break}}w=(yield* this.$12(a,g.rootId));if(!w.keys.length&&w.children.length){if(w.isLeaf){l.has(this.$2)&&(this.$4.logError==null?void 0:this.$4.logError(this.$2,this.$5,\"dbCorruption\",{}));throw c(\"unrecoverableViolation\")(\"cannot be leaf\",\"messenger_web_product\")}this.$1.set(g.rootId,j);this.$9(g,f).rootId=w.children[0]}return n};b.btreeIterator=function(a,b,e){e=e===void 0?{}:e;var f=e.dir,g=f===void 0?\"asc\":f,h=babelHelpers.objectWithoutPropertiesLoose(e,[\"dir\"]);function j(){if(g===\"asc\"){if(Object.prototype.hasOwnProperty.call(h,\"gt\"))return h.gt;else if(Object.prototype.hasOwnProperty.call(h,\"gte\"))return h.gte}else if(Object.prototype.hasOwnProperty.call(h,\"lt\"))return h.lt;else if(Object.prototype.hasOwnProperty.call(h,\"lte\"))return h.lte}function l(a){if(g===\"asc\")return Object.prototype.hasOwnProperty.call(h,\"gt\")?u(a.keys,h.gt,k.gt):Object.prototype.hasOwnProperty.call(h,\"gte\")?u(a.keys,h.gte,k.gte):0;else return Object.prototype.hasOwnProperty.call(h,\"lt\")?u(a.keys,h.lt,k.lt):Object.prototype.hasOwnProperty.call(h,\"lte\")?u(a.keys,h.lte,k.lte):a.keys.length-1}if(Object.prototype.hasOwnProperty.call(h,\"gt\")&&Object.prototype.hasOwnProperty.call(h,\"gte\"))throw c(\"unrecoverableViolation\")(\"cannot specify both greater than and greater than or equal\",\"messenger_web_product\");if(Object.prototype.hasOwnProperty.call(h,\"lt\")&&Object.prototype.hasOwnProperty.call(h,\"lte\"))throw c(\"unrecoverableViolation\")(\"cannot specify both less than and less than or equal\",\"messenger_web_product\");var m,n=this;return{next:function*(e){var f,o;if(m==null){var p=(yield* n.$13(a,n.$6(b)));if(p==null)return{done:!0};var q=j();if(q!==void 0){q=(yield* n.$11(a,p.rootId,q));f=q[0];q=q[1]}else if(g===\"asc\"){var r=[yield* n.$12(a,p.headId),p.headId];f=r[0];q=r[1]}else{r=[yield* n.$12(a,p.tailId),p.tailId];f=r[0];q=r[1]}p=l(f)}else{r=m;p=r.i;o=r.key;q=r.nodeId;f=(yield* n.$13(a,q));if(e!=null){if((i||(i=d(\"ReStoreKeyComparer\"))).compareKey(e,o)===(g===\"asc\"?-1:1))throw c(\"unrecoverableViolation\")(\"key must be ahead of current key\",\"messenger_web_product\");if(f==null||(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(e,f.keys[0])<0||(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(e,f.keys[f.keys.length-1])>0){r=(yield* n.$13(a,n.$6(b)));if(r==null)return{done:!0};r=(yield* n.$11(a,r.rootId,e));f=r[0];q=r[1]}p=u(f.keys,e,k[g===\"asc\"?\"gte\":\"lte\"])}else{if(f==null||p<0||p>=f.keys.length||(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(f.keys[p],o)!==0){if(f==null||!f.keys.length||(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(o,f.keys[0])<0||(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(o,f.keys[f.keys.length-1])>0){r=(yield* n.$13(a,n.$6(b)));if(r==null)return{done:!0};e=(yield* n.$11(a,r.rootId,o));f=e[0];q=e[1]}p=u(f.keys,o,k[g===\"asc\"?\"lte\":\"gte\"])}p+=g===\"asc\"?1:-1}}if(p<0||p>=f.keys.length)if(g===\"asc\"){if(f.nextId===void 0)return{done:!0};q=f.nextId;f=(yield* n.$12(a,q));p=0}else{if(f.prevId===void 0)return{done:!0};q=f.prevId;f=(yield* n.$12(a,q));p=f.keys.length-1}o=f.keys[p];m={i:p,key:o,node:f,nodeId:q};if(p<0||p>=f.keys.length)return{done:!0};r=g===\"asc\"?Object.prototype.hasOwnProperty.call(h,\"lt\")&&(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(o,h.lt)>=0||Object.prototype.hasOwnProperty.call(h,\"lte\")&&(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(o,h.lte)>0:Object.prototype.hasOwnProperty.call(h,\"gt\")&&(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(o,h.gt)<=0||Object.prototype.hasOwnProperty.call(h,\"gte\")&&(i||(i=d(\"ReStoreKeyComparer\"))).compareKey(o,h.gte)<0;return r?{done:!0}:{done:!1,value:[f.keys[p],f.children[p]]}}}};b.tableEntries=function(a,b){b===void 0&&(b={});var c=this.btreeIterator(a,void 0,b),d=this;return{next:function*(b){b=(yield* c.next(b));if(b.done)return b;b=b.value;var e=b[0];b=b[1];b=(yield* d.$17(a,b));return{done:!1,value:[e,b]}}}};b.indexEntries=function(a,b,c){c===void 0&&(c={});var d=this.btreeIterator(a,b,c),e=this;return{next:function*(b){b=(yield* d.next(b));if(b.done)return b;b=b.value;var c=b[0];b=b[1];b=(yield* e.$18(a,b));return{done:!1,value:[c,b]}}}};b.keys=function(a,b,c){c===void 0&&(c={});var d=this.btreeIterator(a,b,c);return{next:function*(a){a=(yield* d.next(a));if(a.done)return a;a=a.value;a=a[0];return{done:!1,value:a}}}};b.clearIds=function*(a,b){this.$3();b=this.$6(b);var c=(yield* this.$13(a,b));this.$3();if(c==null)return;var d=(yield* this.$12(a,c.rootId));c=[{id:c.rootId,node:d}];while(c.length>0){d=c.shift();var e=d.id;d=d.node;if(!d.isLeaf)for(d of d.children){var f=(yield* this.$13(a,d));f!=null&&c.push({id:d,node:f})}this.$1.set(e,j)}this.$1.set(b,j)};b.readSeed=function*(a){return(a=(yield* this.$13(a,d(\"ReStorePersistenceIds\").idForSeed)))!=null?a:0};b.remove=function(a,b){this.$3(),this.$1.set(b,j)};b.writeData=function(a,b,c){this.$15(b,s(c))};b.writeNewData=function*(a,b){return yield* this.$14(a,s(b))};return a}(),w=function(){function a(a,b,e,f){var g=this;this.$2=new Map();this.$6=!1;this.$3=function(){if(g.$6){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(c(\"qpl\")._(25306500,\"1488\"),f,\"transaction_closed\");throw c(\"FBLogger\")(\"messenger_web_product\").mustfixThrow(\"Transaction has closed\")}e()};this.$4=b;this.$1=a;this.$5={get:function(a,c,e){var f=d(\"ReStoreUtils\").getOrCreate(g.$1,c,function(){return new Map()});f=f.get(e);if(t(f))return void 0;return f!==void 0?f:b.get(a,c,e,\"readwrite\")},logError:b.logError,shouldInline:b.shouldInline}}var b=a.prototype;b.flush=function(){for(var a of this.$2){var b=a[0],c=a[1];b=d(\"ReStoreUtils\").getOrCreate(this.$1,b,function(){return new Map()});for(c of c){var e=c[0],f=c[1];b.set(e,f)}}this.$6=!0};b.table=function(a){return new v(d(\"ReStoreUtils\").getOrCreate(this.$2,a,function(){return new Map()}),a,this.$3,this.$5,\"readwrite\")};return a}(),x=function(){function a(a,b){var d=this;this.$1=new Map();this.$2=!1;this.$5=function(){if(d.$2)throw c(\"FBLogger\")(\"messenger_web_product\").mustfixThrow(\"Transaction has closed\")};this.$3=a;this.$4=b;this.types=a.types}var b=a.prototype;b.close=function(){this.$2=!0};b.flush=async function(a){a===void 0&&(a={upgrade:!1}),await this.$3.flush(this.$1,a),this.$2=!0};b.table=function(a){return new v(d(\"ReStoreUtils\").getOrCreate(this.$1,a,function(){return new Map()}),a,this.$5,this.$3,this.$4)};b.createNested=function(a){return new w(this.$1,this.$3,this.$5,a)};return a}();function a(a){var b;return{clearCache:a.clearCache,close:a.close,createTransaction:function(b){return new x(a,b)},isClosed:a.isClosed||function(){return!1},isPersistenceSupported:a.isPersistenceSupported,logError:a.logError,queueCommitWork:(b=a.queueCommitWork)!=null?b:function(a){return a()},runExclusively:a.runExclusively}}g.sentinelDeleted=j;g.isDeletedValue=t;g.createDbStore=a}),98);\n__d(\"ReStoreTransactionLock\",[\"isPromise\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;b=function(){function a(a){var b=this;this.waitFor=null;a!=null&&(this.waitFor=a.then(function(a){return b.waitFor=null}))}var b=a.prototype;b.chainPromiseOrValue=function(a){if(this.waitFor!=null)return this.waitFor.then(function(){return a(\"\\ud83d\\udd12\")});else return a(\"\\ud83d\\udd12\")};return a}();d=function(){function a(){this.lock=null}var b=a.prototype;b.chainPromiseOrValue=function(a){var b=this,d=this.lock;if(d==null){var e=a(\"\\ud83d\\udd12\");if((h||(h=c(\"isPromise\")))(e))d=e;else return e}else d=d.then(function(){return a(\"\\ud83d\\udd12\")});var f=d.finally(function(a){b.lock===f&&(b.lock=null);return a});this.lock=f;return f};return a}();function i(a,b){function d(b){if(b.done)return b.value;if(!(h||(h=c(\"isPromise\")))(b.value))throw c(\"unrecoverableViolation\")(\"expected promise\",\"messenger_web_product\");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function a(a,b){return{next:function(c){return b.chainPromiseOrValue(function(b){return i(a.next(b,c))})}}}g.WaitForPromiseLock=b;g.ReStoreTransactionLock=d;g.lockIterator=a}),98);\n__d(\"ReStoreIndex\",[\"ReQLBounds\",\"ReStoreTransactionLock\",\"ReStoreUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=function(){function a(a,b,c,e,f){var g=this;this.entries=function(a,b,c){b===void 0&&(b=\"asc\");return d(\"ReStoreTransactionLock\").lockIterator(d(\"ReStoreUtils\").entries(g.$5,a,g.$1,g.$3,b,c,g.$2),g.$4)};this.get=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$4.chainPromiseOrValue(function(a){return d(\"ReStoreUtils\").getLocked(g.$5,new WeakMap(),g.$1.name,g.$3,b,a,g.$2)})};this.getKey=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$4.chainPromiseOrValue(function(a){return g.$6(g.$5,new WeakMap(),b,a)})};this.keys=function(a,b,c){b===void 0&&(b=\"asc\");return d(\"ReStoreTransactionLock\").lockIterator(d(\"ReStoreUtils\").keys(g.$5,a,g.$1,g.$3,b,c),g.$4)};this.$3=a;this.keyFields=b.indexes[a];this.$1=b;this.$2=c;this.$4=e;this.$5=f}var b=a.prototype;b.$6=async function(a,b,c,e){a=await d(\"ReStoreUtils\").getLocked(a,b,this.$1.name,this.$3,c,e,this.$2);return a===void 0?void 0:d(\"ReStoreUtils\").searchKey(this.$1,a)};return a}();b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a);c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e,f,g,i){var j;j=a.call(this,b,c,e,f,g)||this;j.subscribe=function(a,b,c){return j.$ReStoreIndex$p_3.subscribeIndex(j.$ReStoreIndex$p_1.name,j.$ReStoreIndex$p_2,a,(h||(h=d(\"ReQLBounds\"))).extendBounds(b,j.$ReStoreIndex$p_1.indexes[j.$ReStoreIndex$p_2].length),c)};j.$ReStoreIndex$p_2=b;j.$ReStoreIndex$p_1=c;j.$ReStoreIndex$p_3=i;return j}return b}(a);g.ReStoreTransactionIndex=b;g.ReStoreIndex=c}),98);\n__d(\"ReStoreTable\",[\"I64\",\"LSTransactionLogger\",\"PromiseOrValue\",\"ReQLBounds\",\"ReStoreIndex\",\"ReStoreTransactionLock\",\"ReStoreUtils\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j;function k(a){a=(h||(h=d(\"I64\"))).cast(a);if(a===void 0)throw c(\"unrecoverableViolation\")(\"Expected int64\",\"messenger_web_product\");return h.to_float(a)}function l(a,b,c,d,e){b=JSON.stringify([b,c]);c=a.get(b);a.set(b,[c==null?d:c[0],e])}a=function(a,b,e,f){var g=this;this.$1=new Map();this.entries=function(a,b,c){b===void 0&&(b=\"asc\");return d(\"ReStoreTransactionLock\").lockIterator(d(\"ReStoreUtils\").entries(g.$5,a,g.$2,void 0,b,c,g.$3),g.$4)};this.get=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$4.chainPromiseOrValue(function(a){return d(\"ReStoreUtils\").getLocked(g.$5,new WeakMap(),g.$2.name,void 0,b,a,g.$3)})};this.keys=function(a,b,c){b===void 0&&(b=\"asc\");return d(\"ReStoreTransactionLock\").lockIterator(d(\"ReStoreUtils\").keys(g.$5,a,g.$2,void 0,b,c),g.$4)};this.peekNextAutoIncrementId=function(){return Promise.resolve(g.$4.chainPromiseOrValue(async function(a){a=g.$2.autoIncrement;if(!a)throw c(\"unrecoverableViolation\")(\"only supported for auto-incrementing tables\",\"messenger_web_product\");a=await d(\"ReStoreUtils\").gen(g.$5.table(g.$2.name).readSeed(new WeakMap()));if(a===void 0)throw c(\"unrecoverableViolation\")(\"unexpected undefined autoIncrementSeed\",\"messenger_web_product\");return(h||(h=d(\"I64\"))).of_float(a)}))};this.keyFields=a.primaryKeyIds;this.$2=a;this.$3=b;this.$4=e;this.$5=f};b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,j,k,l,m){var n;b=e.tableNames[b];n=a.call(this,b,f,g,h)||this;n.$ReStoreTransactionTable$p_1=new Map();n.$ReStoreTransactionTable$p_10=new Map();n.add=function(a){return Promise.resolve((i||(i=d(\"PromiseOrValue\"))).map(n.$ReStoreTransactionTable$p_4.beforeAdd({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:a}),function(a){return n.$ReStoreTransactionTable$p_11(function(b,e){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").recordLogicalWrite(n.$ReStoreTransactionTable$p_9);return d(\"ReStoreUtils\").gen(n.$ReStoreTransactionTable$p_13(n.$ReStoreTransactionTable$p_10,e,new WeakMap(),n.$ReStoreTransactionTable$p_3.name,a,b))})}))};n.delete=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];return Promise.resolve(n.$ReStoreTransactionTable$p_11(function(a,e){var f=babelHelpers.assertThisInitialized(n);return d(\"ReStoreUtils\").gen(function*(){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").recordLogicalWrite(f.$ReStoreTransactionTable$p_9),yield* d(\"ReStoreUtils\").deleteItemLocked(f.$ReStoreTransactionTable$p_2,f.$ReStoreTransactionTable$p_10,e,new WeakMap(),f.$ReStoreTransactionTable$p_3.name,b,a),yield* d(\"ReStoreUtils\").cascadeKeyUpdatesLocked(f.$ReStoreTransactionTable$p_2,f.$ReStoreTransactionTable$p_10,e,new WeakMap(),f.$ReStoreTransactionTable$p_3.name,b,void 0,f.$ReStoreTransactionTable$p_4,a)}())}))};n.put=function(a){return Promise.resolve((i||(i=d(\"PromiseOrValue\"))).map(n.$ReStoreTransactionTable$p_4.beforePut({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:a}),function(a){return n.$ReStoreTransactionTable$p_11(function(b,e){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").recordLogicalWrite(n.$ReStoreTransactionTable$p_9);return d(\"ReStoreUtils\").gen(d(\"ReStoreUtils\").putLocked(n.$ReStoreTransactionTable$p_2,n.$ReStoreTransactionTable$p_10,e,new WeakMap(),n.$ReStoreTransactionTable$p_3.name,a,n.$ReStoreTransactionTable$p_4,b))})}))};n.upsert=function(a,b){return Promise.resolve((i||(i=d(\"PromiseOrValue\"))).map(n.$ReStoreTransactionTable$p_4.beforeUpsert({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:b}),function(e){return n.$ReStoreTransactionTable$p_11(function(f,g){var h=babelHelpers.assertThisInitialized(n);return d(\"ReStoreUtils\").gen(function*(){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").recordLogicalWrite(h.$ReStoreTransactionTable$p_9),yield* d(\"ReStoreUtils\").upsertLocked(h.$ReStoreTransactionTable$p_2,h.$ReStoreTransactionTable$p_10,g,new WeakMap(),h.$ReStoreTransactionTable$p_3.name,a,e,h.$ReStoreTransactionTable$p_4,f),yield* d(\"ReStoreUtils\").cascadeKeyUpdatesLocked(h.$ReStoreTransactionTable$p_2,h.$ReStoreTransactionTable$p_10,g,new WeakMap(),h.$ReStoreTransactionTable$p_3.name,a,d(\"ReStoreUtils\").searchKey(h.$ReStoreTransactionTable$p_3,b),h.$ReStoreTransactionTable$p_4,f)}())})}))};n.index=function(a){return d(\"ReStoreUtils\").getOrCreate(n.$ReStoreTransactionTable$p_1,a,function(){return new(d(\"ReStoreIndex\").ReStoreTransactionIndex)(a,n.$ReStoreTransactionTable$p_3,n.$ReStoreTransactionTable$p_4,n.$ReStoreTransactionTable$p_5,n.$ReStoreTransactionTable$p_6)})};n.$ReStoreTransactionTable$p_3=b;n.$ReStoreTransactionTable$p_2=e;n.$ReStoreTransactionTable$p_4=f;n.$ReStoreTransactionTable$p_5=g;n.$ReStoreTransactionTable$p_6=h;n.$ReStoreTransactionTable$p_7=j;n.$ReStoreTransactionTable$p_8=k;n.$ReStoreTransactionTable$p_9=l;n.$ReStoreTransactionTable$p_10=m;return n}var e=b.prototype;e.$ReStoreTransactionTable$p_11=function(a){var b=this;return this.$ReStoreTransactionTable$p_5.chainPromiseOrValue(function(c){var e=b.$ReStoreTransactionTable$p_6.createNested(b.$ReStoreTransactionTable$p_9);return(i||(i=d(\"PromiseOrValue\"))).map(a(c,e),function(a){e.flush();return a})})};e.$ReStoreTransactionTable$p_12=function(a,b,c,d,e){b=JSON.stringify([b,c]);c=a.get(b);a.set(b,[c==null?d:c[0],e])};e.$ReStoreTransactionTable$p_13=function*(a,b,c,e,f,g){var i=b.table(e),j=this.$ReStoreTransactionTable$p_2.tableNames[e];if(j.autoIncrement){var m=f[j.primaryKeyIds[0]];m=(h||(h=d(\"I64\"))).of_float(yield* i.incrementSeed(c,m===void 0?m:k(m)));f[j.primaryKeyIds[0]]=m}m=d(\"ReStoreUtils\").appendDefaultValues(f,j.name);f=d(\"ReStoreUtils\").searchKey(j,m);if(f==null)throw new Error(\"Evaluating the object store's key path did not yield a value\");if((yield* i.tableGet(c,f))==null){j=d(\"ReStoreUtils\").indicesWithKeyForValue(this.$ReStoreTransactionTable$p_3,Object.keys(j.indexes),m);yield* d(\"ReStoreUtils\").deconflictIndicesLocked(this.$ReStoreTransactionTable$p_2,a,b,c,e,j,this.$ReStoreTransactionTable$p_4,g);g=(yield* i.tableSet(c,f,m));i=g[0];yield* d(\"ReStoreUtils\").addIdToIndices(b,c,e,i,j);l(a,e,f,void 0,m)}return f};return b}(a);e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e,f,g){var h;h=a.call(this,b,c,e,f)||this;h.$ReStoreTable$p_1=new Map();h.index=function(a){return d(\"ReStoreUtils\").getOrCreate(h.$ReStoreTable$p_1,a,function(){return new(d(\"ReStoreIndex\").ReStoreIndex)(a,h.$ReStoreTable$p_2,h.$ReStoreTable$p_3,h.$ReStoreTable$p_4,h.$ReStoreTable$p_5,h.$ReStoreTable$p_6)})};h.subscribe=function(a,b,c){return h.$ReStoreTable$p_6.subscribeTable(h.$ReStoreTable$p_2.name,a,(j||(j=d(\"ReQLBounds\"))).extendBounds(b,h.$ReStoreTable$p_2.primaryKeyIds.length),c)};h.$ReStoreTable$p_2=b;h.$ReStoreTable$p_3=c;h.$ReStoreTable$p_4=e;h.$ReStoreTable$p_5=f;h.$ReStoreTable$p_6=g;return h}return b}(a);g.ReStoreTransactionTable=b;g.ReStoreTable=e}),98);\n__d(\"ReStoreTransactionDelay\",[\"setTimeout\"],(function(a,b,c,d,e,f,g){\"use strict\";async function a(a){a=a===\"background\"?new Promise(function(a){return c(\"setTimeout\")(a,0)}):Promise.resolve();await a}g.default=a}),98);\n__d(\"IntervalList\",[\"FBLogger\",\"ReQLBounds\",\"ReStoreKeyComparer\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function j(a){if(a==null)throw c(\"FBLogger\")(\"messenger_web_product\").mustfixThrow(\"must not be null\");return a}function a(a,b){var c=new Map(),e=new Map(),f=new Map();function g(b,c){return c==null?!0:(c.gt!==void 0?a(b,c.gt)>0:c.gte!==void 0?a(b,c.gte)>=0:!0)&&(c.lt!==void 0?a(b,c.lt)<0:c.lte!==void 0?a(b,c.lte)<=0:!0)}function* k(a){var f=0;while(f<a.length&&e.size){f++;var i=a.slice(0,f);f<b&&i.push((h||(h=d(\"ReStoreKeyComparer\"))).MAX_KEY);i=e.get(JSON.stringify(i));if(i!=null)for(i of i)yield i}for(i of c.entries()){f=i[0];var j=i[1];c.has(f)&&g(a,j)&&(yield f)}}function l(a){var b=f.get(a);if(b!=null){f[\"delete\"](a);var d=j(e.get(b));d[\"delete\"](a);d.size===0&&e[\"delete\"](b)}else c[\"delete\"](a)}function m(a,g){var h;if(a&&a.gte!=null&&a.lte!=null&&(h=JSON.stringify((i||(i=d(\"ReQLBounds\"))).nextKey(a.gte,b)))===JSON.stringify(a.lte)){var j=e.get(h);j==null&&(j=new Set(),e.set(h,j));j.add(g);f.set(g,h)}else c.set(g,a)}return{\"delete\":l,findIntersecting:k,set:m}}g[\"default\"]=a}),98);\n__d(\"createReStoreSubscriptionManager\",[\"ExecutionEnvironment\",\"FBLogger\",\"IntervalList\",\"Promise\",\"PromiseOrValue\",\"ReStoreKeyComparer\",\"ReStoreUtils\",\"asyncToGeneratorRuntime\",\"isPromise\",\"nullthrows\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k,l;function a(a,e,f){var g=new Map(),m=new Map();function n(a,b){return(l||(l=d(\"ReStoreKeyComparer\"))).compareValue(a,b)===0}function o(a,b,c,d){a=(a=z.get(a))!=null?a:[];var e=[];for(var f=0;f<b.length;f++){var g=b[f];for(var h=0;h<32&&g!==0;h++){if(g&1){var i=a[(f<<5)+h];if(!n(c[i],d[i])){e[f]=((i=e[f])!=null?i:0)|1<<h%32}}g=g>>>1}}return e}function p(a,b){for(var c=0;c<Math.max(a.length,b.length);c++)if((a[c]&b[c])!==0)return!0;return!1}function q(a,b,d,e){try{a=a(b,d,e);if((j||(j=c(\"isPromise\")))(a))return a[\"catch\"](function(a){c(\"FBLogger\")(\"messenger_web_product\").catching(a).mustfix(\"error in ReStore subscription async handler\")});else return a}catch(a){c(\"FBLogger\")(\"messenger_web_product\").catching(a).mustfix(\"error in ReStore subscription handlers\")}}function r(a,c,e,f,g){var i=Array.from(c(f));if(g.operation===\"put\"&&g.prevValue!=null){c=function(){var b=g.prevValue,c=[];for(var h of i){h[0];var j=h[1];j!=null&&j.forEach(function(a,b){c[b]=((b=c[b])!=null?b:0)|a})}var l=o(a,c,b,g.value);return{v:(k||(k=d(\"PromiseOrValue\"))).all(i.map(function(a){var b=a[0];a=a[1];if(a==null||p(l,a))return q(b,f,g,e)}))}}();if(typeof c===\"object\")return c.v}return(h||(h=b(\"Promise\"))).all(i.map(function(a){var b=a[0];a[1];return q(b,f,g,e)}))}function s(b){return c(\"nullthrows\")((g.has(b)?g:g.set(b,[c(\"IntervalList\")((l||(l=d(\"ReStoreKeyComparer\"))).compareKey,a.tableNames[b].primaryKeyIds.length),new Map()])).get(b))}function t(b,e){var f=s(b);f[0];f=f[1];return c(\"nullthrows\")((f.has(e)?f:f.set(e,c(\"IntervalList\")((l||(l=d(\"ReStoreKeyComparer\"))).compareKey,a.tableNames[b].indexes[e].length))).get(e))}function u(b,e,f,g,h,i){var j=function(a,c){return r(e,b.findIntersecting,i,a,c)},m=f==null?void 0:d(\"ReStoreUtils\").searchKey(a.tableNames[e],f,h),n=g==null?void 0:d(\"ReStoreUtils\").searchKey(a.tableNames[e],g,h);if(n==null&&m!=null)return j(m,{operation:\"delete\",prevValue:c(\"nullthrows\")(f)});if(m==null&&n!=null)return j(n,{operation:\"add\",value:c(\"nullthrows\")(g)});if(m!=null&&n!=null)return(l||(l=d(\"ReStoreKeyComparer\"))).compareKey(m,n)===0?j(m,{operation:\"put\",prevValue:c(\"nullthrows\")(f),value:c(\"nullthrows\")(g)}):(k||(k=d(\"PromiseOrValue\"))).map(j(m,{operation:\"delete\",prevValue:c(\"nullthrows\")(f)}),function(){return j(n,{operation:\"add\",value:c(\"nullthrows\")(g)})})}function v(a,b,c,e){var f=s(a),g=f[0],h=f[1];return(k||(k=d(\"PromiseOrValue\"))).map(u(g,a,b,c,null,e),function(){return(k||(k=d(\"PromiseOrValue\"))).all(Array.from(h.entries()).map(function(d){var f=d[0];d=d[1];return u(d,a,b,c,f,e)}).filter(function(a){return a!=null}))})}function w(){m.forEach(function(a){return a()})}function x(a,b){function d(){var d=new Map();try{for(var f of a){var g=f[0],h=f[1];e(b,g)&&d.set(g,h)}}catch(a){c(\"FBLogger\")(\"messenger_web_product\").catching(a).mustfix(\"Couldnot format changes to broadcast\")}return Array.from(d)}if((i||(i=c(\"ExecutionEnvironment\"))).isInBrowser&&f!=null){d=d();if(d.length===0)return;f.postMessage(b,d)}}(i||(i=c(\"ExecutionEnvironment\"))).isInBrowser&&(f!=null&&f.onEventReceive(\"notifyTableV2\",function(a){c(\"promiseDone\")(b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var b=new WeakMap(),c=a.values();yield (k||(k=d(\"PromiseOrValue\"))).loop(function(a){if(a.done)return{action:\"break\",value:void 0};a=a.value;var e=a[0];a=a[1];var f=a.values();return(k||(k=d(\"PromiseOrValue\"))).map(k.loop(function(a){if(a.done)return{action:\"break\",value:void 0};a=a.value;var c=a[0];a=a[1];return(k||(k=d(\"PromiseOrValue\"))).map(v(e,c,a,b),function(){return{action:\"continue\",value:f.next()}})},f.next()),function(){return{action:\"continue\",value:c.next()}})},c.next());w()})())}));var y=new Map(),z=new Map();function A(a,b){if(b==null)return null;var c=y.get(a);c==null&&(c=new Map(),y.set(a,c));var d=[];for(b of b){var e=c.get(b);if(e==null){e=c.size;c.set(b,e);var f=z.get(a);f==null&&(f=[],z.set(a,f));f.push(b)}f=e>>5;e=e&31;d[f]=((f=d[f])!=null?f:0)|1<<e}return d}return{dispose:function(){g.clear(),m.clear()},notifyCommit:w,notifyTableAndIndexSubscribers:v,notifyTableV2:x,subscribeIndex:function(a,c,d,e,f){var g=t(a,c),i=!1;c=function(a,c,e){return i?(h||(h=b(\"Promise\"))).resolve():q(d,a,c,e)};var j=[c,A(a,f)];g.set(e,j);return function(){i=!0,g[\"delete\"](j)}},subscribeTable:function(a,c,d,e){var f=s(a),g=f[0],i=!1;f=function(a,d,e){return i?(h||(h=b(\"Promise\"))).resolve():q(c,a,d,e)};var j=[f,A(a,e)];g.set(d,j);return function(){i=!0,g[\"delete\"](j)}},subscribeToCommit:function(a){m.set(a,a);return function(){m[\"delete\"](a)}}}}g[\"default\"]=a}),98);\n__d(\"ReStore\",[\"ExecutionEnvironment\",\"FBLogger\",\"LSTableDefaults\",\"LSTransactionLogger\",\"MessengerLogHistory\",\"MetaConfig\",\"PromiseOrValue\",\"ReStoreDefaultValueMigration\",\"ReStoreDefaultValuesMetadata\",\"ReStoreHooks\",\"ReStoreIndexeddbPersistenceInitFailure\",\"ReStoreIndicesMigration\",\"ReStorePersistence\",\"ReStorePersistenceIds\",\"ReStoreTable\",\"ReStoreTransactionDelay\",\"ReStoreTransactionLock\",\"ReStoreUtils\",\"clearTimeout\",\"cr:1088\",\"createReStoreSubscriptionManager\",\"gkx\",\"hashString\",\"isPromise\",\"nullthrows\",\"promiseDone\",\"qpl\",\"setImmediate\",\"setTimeout\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k=d(\"MessengerLogHistory\").getInstance(\"db_init\"),l=c(\"qpl\")._(25306500,\"1488\"),m=500;function n(a){a=Object.values(a.tableIds).map(function(a){return babelHelpers.extends({},a,{indexPredicates:Object.entries((a=a.indexPredicates)!=null?a:{}).map(function(a){var b=a[0];a=a[1];return[b,a.toString()]})})});return JSON.stringify(a)}e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,\"Transaction has finished\")||this}return b}(babelHelpers.wrapNativeSuper(Error));function o(a,b){function d(b){if(b.done)return b.value;if(!(j||(j=c(\"isPromise\")))(b.value))throw c(\"unrecoverableViolation\")(\"expected promise\",\"messenger_web_product\");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function a(a,e,f,g,j){f===void 0&&(f=[]);var q=d(\"ReStorePersistence\").createDbStore(a),r=a.tabTablesNotifier==null?void 0:a.tabTablesNotifier(),s=c(\"createReStoreSubscriptionManager\")(e,a.shouldSync,r),t=d(\"ReStoreHooks\").createHookManager(f),u=q.createTransaction(\"readonly\"),v=a.types.includes(\"indexeddb\"),w={background:{first:null,last:null},sync_script:{first:null,last:null},ui:{first:null,last:null}},x=c(\"hashString\")(n(e)),y=c(\"hashString\")(JSON.stringify(c(\"LSTableDefaults\")));j==null?void 0:j.addAnnotations({int:{defaultValuesVersion:y,schemaVersion:x}});j==null?void 0:j.addPoint(\"migration_start\");k.debug(\"restore migration start\");var z=new(d(\"ReStoreTransactionLock\").WaitForPromiseLock)(q.runExclusively(async function(){var a,b;j==null?void 0:j.addPoint(\"migration_execute_start\");var c=new Map(),f=q.createTransaction(\"readwrite\"),h=D(f,c);a=(a=await o(f.table(d(\"ReStoreDefaultValuesMetadata\").schemaVersionTableName).readData(new WeakMap(),d(\"ReStorePersistenceIds\").idForSchema)))==null?void 0:a.schemaVersion;b=(b=await o(f.table(d(\"ReStoreDefaultValuesMetadata\").schemaVersionTableName).readData(new WeakMap(),d(\"ReStorePersistenceIds\").idForDefaultValue)))==null?void 0:b.defaultValuesVersion;a!=null&&(j==null?void 0:j.addAnnotations({int:{storeDefaultValuesVersion:b,storeSchemaVersion:a}}));var i;if(g!=null){var l;i=(l=await o(f.table(d(\"ReStoreDefaultValuesMetadata\").schemaVersionTableName).readData(new WeakMap(),d(\"ReStorePersistenceIds\").idForCustomMigrationValue)))==null?void 0:l.customMigrationVersion}if(a===x&&b===y&&i===(g==null?void 0:g.targetVersion)){f.close();k.debug(\"restore migration skipped\");j==null?void 0:j.addPoint(\"migration_skipped\");return}l=a==null;try{await d(\"ReStoreDefaultValueMigration\").runMigrationForTableDefaultValuesIfNeeded(h,e,l);await d(\"ReStoreIndicesMigration\").runMigrationForIndicesIfNeeded(h,e,l,function(a,b){return new(d(\"ReStoreTransactionLock\").ReStoreTransactionLock)().chainPromiseOrValue(function(d){return o(C(c,f,new WeakMap(),a,b,d))})});if(g!=null&&g.targetVersion!==i){await g.migration((b=i)!=null?b:0,h);f.table(d(\"ReStoreDefaultValuesMetadata\").schemaVersionTableName).writeData(new WeakMap(),d(\"ReStorePersistenceIds\").idForCustomMigrationValue,{customMigrationVersion:g.targetVersion})}j==null?void 0:j.addPoint(\"migration_execute_end\");k.debug(\"restore migration complete\");a=!0;(c.size===0||l===!0)&&(a=!1);f.table(d(\"ReStoreDefaultValuesMetadata\").schemaVersionTableName).writeData(new WeakMap(),d(\"ReStorePersistenceIds\").idForSchema,{schemaVersion:x});f.table(d(\"ReStoreDefaultValuesMetadata\").schemaVersionTableName).writeData(new WeakMap(),d(\"ReStorePersistenceIds\").idForDefaultValue,{defaultValuesVersion:y});await f.flush({upgrade:a})}catch(a){f.close();throw a}j==null?void 0:j.addPoint(\"migration_end\");k.debug(\"restore migration end\")},\"readwrite\",v).catch(function(a){j==null?void 0:j.addAnnotations({string:{migration_error:a.message}});a instanceof d(\"ReStoreIndexeddbPersistenceInitFailure\").ReStoreIndexeddbPersistenceInitFailure||(j==null?void 0:j.endFail(\"migration_error\"));k.debug(\"restore migration error\");throw a}));async function A(a,b){var c=new WeakMap();await q.runExclusively(async function(){var f=new Map(),g=q.createTransaction(\"readwrite\"),i=D(g,f),j=b.values();await (h||(h=d(\"PromiseOrValue\"))).loop(function(b){if(b.done)return{action:\"break\",value:void 0};b=b.value;var f=b[0],g=b[1];return(h||(h=d(\"PromiseOrValue\"))).map(h.map(g==null?i.table(a).delete(d(\"ReStoreUtils\").searchKey(e.tableNames[a],f)):i.table(a).put(g),function(){return s.notifyTableAndIndexSubscribers(a,f,g,c)}),function(){return{action:\"continue\",value:j.next()}})},j.next());try{await g.flush({upgrade:!0})}catch(a){g.close();throw a}},\"readwrite\",v)}function B(){var a=q;a instanceof Object&&a.clearCache!==void 0&&a.clearCache instanceof Function&&a.clearCache()}function* C(a,b,f,g,h,i){var j=b.table(g),k=e.tableNames[g];for(var l of h)yield* j.clearIds(f,l);l=h.filter(function(a){return(k==null?void 0:k.indexes[a])!=null});if(l.length===0)return;h=d(\"ReStoreUtils\").entries(b,f,k,void 0,\"asc\",void 0,t);var n=[],o=(yield* h.next(i));while(!o.done){while(!o.done&&n.length<=m)n.push(o.value),o=(yield* h.next(i));for(var p of n){var q=p[0],r=p[1];r=d(\"ReStoreUtils\").indicesWithKeyForValue(e.tableNames[g],l,r);yield* d(\"ReStoreUtils\").deconflictIndicesLocked(e,a,b,f,g,r,t,i);q=c(\"nullthrows\")(yield* j.getId(f,q));yield* d(\"ReStoreUtils\").addIdToIndices(b,f,g,q,r)}n.length=0;B()}}function D(a,b,c){var f=new(d(\"ReStoreTransactionLock\").ReStoreTransactionLock)(),g=c==null?void 0:c.instanceKey,h=new Map(),i=new Proxy({table:function(c){return new(d(\"ReStoreTable\").ReStoreTransactionTable)(c,e,t,f,a,s,i,g,b)}},{get:function(c,j){return!Object.prototype.hasOwnProperty.call(e.tableNames,j)?Reflect.get.apply(Reflect,arguments):d(\"ReStoreUtils\").getOrCreate(h,j,function(){return new(d(\"ReStoreTable\").ReStoreTransactionTable)(j,e,t,f,a,s,i,g,b)})}});return i}var E;function F(a,b,d){return new Promise(function(e,f){c(\"gkx\")(\"23661\")&&(E=f),w[b].last==null?w[b].first=w[b].last={value:{code:function(b){function a(){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(){return a().then(e,f)}),writemode:d}}:w[b].last=w[b].last.next={value:{code:function(b){function a(){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(){return a().then(e,f)}),writemode:d}}})}function G(){if(c(\"gkx\")(\"116\")){var a=w.ui.first!=null?w.ui:w.sync_script.first!=null?w.sync_script:w.background;if(a.first==null){c(\"FBLogger\")(\"messenger_web_product\").mustfix(\"Expected work is missing\");return Promise.resolve()}var b=a.first;a.first===a.last&&(a.last=null);a.first=a.first.next;return q.runExclusively(async function(){await b.value.code()},b.value.writemode,v)}else return q.runExclusively(async function(){var a=w.ui.first!=null?w.ui:w.sync_script.first!=null?w.sync_script:w.background;if(a.first==null){c(\"FBLogger\")(\"messenger_web_product\").mustfix(\"Expected work is missing\");return}var b=a.first;a.first===a.last&&(a.last=null);a.first=a.first.next;await b.value.code()},\"readwrite\",v)}async function H(a,b,d,e){d===void 0&&(d=\"background\");e===void 0&&(e={source:\"unknown\",type:\"user_initiated\"});a=await I(a,b,d,e);if(a===\"TIMEOUT\")throw c(\"FBLogger\")(\"messenger_web_product\").blameToPreviousFrame().mustfixThrow(\"ReStore transaction took too long to execute\");return a}async function I(a,e,f,g){f===void 0&&(f=\"background\");var i,j,k,m,n,o=c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").startTracking(v,l,f);b(\"cr:1088\")&&(i=Date.now());async function r(){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,o,\"execute_start\");b(\"cr:1088\")&&(j=Date.now());var e={ref:void 0},f=new Map(),r=q.createTransaction(\"readwrite\"),u;b(\"cr:1088\")==null?void 0:b(\"cr:1088\").trackingStoredProceduresForNewTransaction(g);try{var v=D(r,f,{instanceKey:o});u=await Promise.race([a(v),p(e,o)]);if(u===\"TIMEOUT\")return\"TIMEOUT\";e.ref!=null&&c(\"clearTimeout\")(e.ref);b(\"cr:1088\")&&(k=Date.now());c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,o,\"execute_end\");c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,o,\"flush_start\");await r.flush({instanceKey:o});c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,o,\"flush_end\")}catch(a){e.ref!=null&&c(\"clearTimeout\")(e.ref);r.close();c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").fail(l,o,a);c(\"FBLogger\")(\"messenger_web_product\").catching(a).mustfix(\"Transaction failed\");throw a}finally{b(\"cr:1088\")==null?void 0:b(\"cr:1088\").stopTrackingStoredProcedures()}b(\"cr:1088\")&&(n=Date.now());c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,o,\"broadcast_start\");var w=new WeakMap(),x=new Map();for(v of f){e=v[0];r=v[1];e=JSON.parse(e);var y=e[0];e[1];e=x.get(y);e==null&&(e=[],x.set(y,e));var z=r[0];r=r[1];r=t.beforeNotify({newValue:r,prevValue:z,tableName:y});z=r.newValue;y=r.prevValue;e.push([y,z])}var A=x.entries();await (h||(h=d(\"PromiseOrValue\"))).loop(function(b){if(b.done)return{action:\"break\",value:void 0};b=b.value;var a=b[0];b=b[1];var c=b.values();return(h||(h=d(\"PromiseOrValue\"))).map(h.loop(function(b){if(b.done)return{action:\"break\",value:void 0};b=b.value;var e=b[0];b=b[1];return(h||(h=d(\"PromiseOrValue\"))).map(s.notifyTableAndIndexSubscribers(a,e,b,w),function(){return{action:\"continue\",value:c.next()}})},c.next()),function(){return{action:\"continue\",value:A.next()}})},A.next());await q.queueCommitWork(function(){s.notifyTableV2(x,\"notifyTableV2\");s.notifyTableV2(x,\"notifyInMemoryTable\");return Promise.resolve()});s.notifyCommit();if(b(\"cr:1088\")){m=Date.now();r={broadcast:m,complete:k,flush:n,queue:i,start:j};b(\"cr:1088\").recordRestoreTransaction(r,{changedKeys:f})}c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,o,\"broadcast_end\");c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,o,\"post_commit_start\");c(\"setImmediate\")(function(){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,o,\"post_commit_end\"),c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").end(l,o)});return u}await c(\"ReStoreTransactionDelay\")(f);r=F(r,f,e);c(\"promiseDone\")(G(),function(){},function(a){E==null?void 0:E(a)});return r}(i||(i=c(\"ExecutionEnvironment\"))).isInBrowser&&(r!=null&&r.onEventReceive(\"notifyInMemoryTable\",function(b){c(\"promiseDone\")(async function(){for(var c of b){var d=c[0],e=c[1];a.shouldApplySync(\"notifyInMemoryTable\",d)&&await A(d,e)}s.notifyCommit()}())}));var J=Object.keys(e.tableNames).reduce(function(a,b){return babelHelpers.extends({},a,(a={},a[b]=new(d(\"ReStoreTable\").ReStoreTable)(e.tableNames[b],t,z,u,s),a))},{});return{clearCacheIfSupported:B,closeDb:function(){var a=q;a instanceof Object&&a.close!==void 0&&a.close()},getCustomMigrationVersion:async function(){var a=await o(q.createTransaction(\"readonly\").table(d(\"ReStoreDefaultValuesMetadata\").schemaVersionTableName).readData(new WeakMap(),d(\"ReStorePersistenceIds\").idForCustomMigrationValue));return a==null?void 0:a.customMigrationVersion},getTableData:function(){return e},isClosed:function(){return q.isClosed()},isPersistenceSupported:function(){var a=q;return a instanceof Object&&a.isPersistenceSupported!==void 0&&a.isPersistenceSupported instanceof Function?a.isPersistenceSupported():Promise.resolve(!0)},persistenceTypes:a.types,runInTransaction:H,subscribeToCommit:function(a){return s.subscribeToCommit(a)},subscriptionManager:s,table:function(a){return J[a]},tables:J}}function p(a,b){return!c(\"MetaConfig\")._(\"27\")?new Promise(function(){}):new Promise(function(d){var e=5e3;a.ref=c(\"setTimeout\")(function(){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(l,b,\"slow_transaction\"),d(\"TIMEOUT\")},e)})}a.TransactionClosedError=e;g.default=a}),98);\n__d(\"createReStoreEphemeralPersistence\",[\"BrowserLockManager\",\"CurrentMessengerUser\",\"FBLogger\",\"LSTransactionLogger\",\"Promise\",\"ReStorePersistence\",\"asyncToGeneratorRuntime\",\"gkx\",\"promiseDone\",\"qpl\",\"setTimeout\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=d(\"CurrentMessengerUser\").getIDorEIMU();function j(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}var k=c(\"qpl\")._(25303045,\"817\");function a(){var a=(h||(h=b(\"Promise\"))).resolve(),e=new Map();function f(a){return j(e,a,function(){return new Map()})}return{flush:function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){c(\"gkx\")(\"26396\")&&(yield new(h||(h=b(\"Promise\")))(function(a,b){c(\"setTimeout\")(function(){a()},50)})),a.forEach(function(a,b){var c=f(b);a.forEach(function(a,b){d(\"ReStorePersistence\").isDeletedValue(a)?c[\"delete\"](b):c.set(b,a)})})});function e(b){return a.apply(this,arguments)}return e}(),get:function(a,b,c){a=f(b);return a.get(c)},logError:function(a,b,d,e){if(d===\"dbCorruption\"){throw c(\"FBLogger\")(\"messenger_web_product\").mustfixThrow(\"Got unexpected undefined in edb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s\",b,a,(d=e==null?void 0:e.id)!=null?d:\"\",(b=e==null?void 0:e.deletedInThisTxn)!=null?b:\"\")}},queueCommitWork:void 0,runExclusively:function(d,e,f){f===void 0&&(f=!1);if(c(\"BrowserLockManager\")!=null&&c(\"gkx\")(\"26397\"))return new(h||(h=b(\"Promise\")))(function(e,g){var h=\"edbLock_\"+i,a=c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").startTracking(f,k,void 0,h);c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").addAnnotations(k,a,{string:{source:\"createReStoreEphemeralPersistence\",type:\"runExclusivelyLock\"}});c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(k,a,\"lock_requested\");c(\"promiseDone\")(c(\"BrowserLockManager\").request(h,b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").mark(k,a,\"lock_granted\");try{e(yield d()),c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").end(k,a)}catch(b){g(b),c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").fail(k,a)}})),function(b){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").end(k,a)},function(b){c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").fail(k,a)})});else{var g=c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").startTracking(f,k);c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").addAnnotations(k,g,{string:{source:\"createReStoreEphemeralPersistence\",type:\"runExclusivelyPromiseChain\"}});return new(h||(h=b(\"Promise\")))(function(e,f){a=a.then(b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){try{e(yield d()),c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").end(k,g)}catch(a){f(a),c(\"LSTransactionLogger\")==null?void 0:c(\"LSTransactionLogger\").fail(k,g)}}))})}},shouldApplySync:function(){return!1},shouldInline:function(a,b){return!0},shouldSync:function(){return!1},types:[\"ephemeral\"],uniqueId:\"\"}}g[\"default\"]=a}),98);\n__d(\"LSJSInMemoryStorage\",[\"LSPlatformLsInitLog\",\"MAWLSVaultingHooks\",\"ReStore\",\"createReStoreEphemeralPersistence\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return c(\"ReStore\")(c(\"createReStoreEphemeralPersistence\")(),a,[c(\"MAWLSVaultingHooks\")],void 0,d(\"LSPlatformLsInitLog\").lsInitLogger)}g[\"default\"]=a}),98);\n__d(\"MWConditionallySetupEBStateDB\",[\"asyncToGeneratorRuntime\",\"cr:6693\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return h.apply(this,arguments)}function h(){h=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(b(\"cr:6693\")!=null){a=(yield b(\"cr:6693\").makeEBStateDB(a));return a}});return h.apply(this,arguments)}g.conditionallyMakeEBStateDB=a}),98);\n__d(\"MWLSSchemaEphemeral\",[\"FBLogger\",\"LSJSInMemoryStorage\",\"LSMetadata\",\"LSPlatformLsInitLog\",\"MAWLSVaultingHooks\",\"MWConditionallySetupEBStateDB\",\"MessengerLogHistory\",\"ReStore\",\"asyncToGeneratorRuntime\",\"cr:8624\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=d(\"MessengerLogHistory\").getInstance(\"db_init\");function a(){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){d(\"LSPlatformLsInitLog\").addPoint(\"init_start\");var a;try{var e=(yield d(\"MWConditionallySetupEBStateDB\").conditionallyMakeEBStateDB());e!=null&&(h.debug(\"Creating EB State DB\"),a=c(\"ReStore\")(e,d(\"LSMetadata\").metadata,[c(\"MAWLSVaultingHooks\")],void 0,d(\"LSPlatformLsInitLog\").lsInitLogger),yield b(\"cr:8624\")==null?void 0:b(\"cr:8624\")(a),h.debug(\"EB State DB inited\"))}catch(a){c(\"FBLogger\")(\"messenger_web_clients\").catching(a).mustfix(\"EBSM failed\")}a==null&&(h.debug(\"Creating EDB\"),a=c(\"LSJSInMemoryStorage\")(d(\"LSMetadata\").metadata),h.debug(\"EDB inited\"));d(\"LSPlatformLsInitLog\").addPoint(\"init_end\");return a});return i.apply(this,arguments)}g.createDB=a}),98);\n__d(\"LSE2EEMetadataSyncGroupUtils\",[\"gkx\",\"isArmadillo\",\"isInstamadillo\",\"isOccamadilloResumeSyncEnabled\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=c(\"isArmadillo\")()||c(\"gkx\")(\"23910\")===!0&&!c(\"isInstamadillo\")(),i=c(\"qex\")._(\"923\")===!0&&!c(\"isInstamadillo\")();function a(){return h&&!c(\"isOccamadilloResumeSyncEnabled\")()}function b(){return h?{groupId:95}:null}function d(){return i?{groupId:95}:null}g.shouldAlwaysResetE2EEMetadata=a;g.getE2EEMetadataSyncGroup=b;g.getE2EEMetadataSyncGroupForIGDSyncGroup=d}),98);\/*FB_PKG_DELIM*\/\n__d(\"MAWAbPropsTypes\",[],(function(a,b,c,d,e,f){\"use strict\";a={noyb_opt_out_flag:[3488,\"bool\",!1,!1],service_improvement_opt_out_flag:[3664,\"bool\",!1,!1],msgrw_test_bool:[704,\"bool\",!1,!1],msgrw_test_int:[705,\"int\",0,0],msgrw_test_string:[706,\"string\",\"test_string\",\"test_string\"],msgrw_test_float:[707,\"float\",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,\"int\",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,\"int\",35,35],msgrw_icdc_interval_in_minutes:[1236,\"int\",1500,1500],msgrw_logger_entries:[1298,\"int\",0,0],msgrw_max_keys:[2453,\"int\",812,812],msgrw_job_manager_conf:[2667,\"string\",'{\"maxConcurrency\": 5,\"bestEffortWaitTimeoutSec\": 300,\"highPriorityQuota\":5,\"lowPriorityQuota\":1}','{\"maxConcurrency\": 5,\"bestEffortWaitTimeoutSec\": 300,\"highPriorityQuota\":5,\"lowPriorityQuota\":1}'],client_group_participants_limit:[618,\"int\",257,257],client_group_name_length_limit:[1200,\"int\",25,25]};f.ABPropConfigs=a}),66);\n__d(\"MAWAbPropsToUI\",[\"MAWAbPropsTypes\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=[\"client_group_participants_limit\",\"client_group_name_length_limit\"];function a(a){var b=a!=null?a:{},c={};h.forEach(function(a){b[a]!=null?c[a]=b[a]:c[a]=d(\"MAWAbPropsTypes\").ABPropConfigs[a][2]});return c}g.prepareAbPropsForUI=a}),98);\n__d(\"MAWLowLevelApiTypes\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a={EXISTING_GROUP_INVITE:\"existing_group_invite\",MISSING_GROUP:\"missing_group\"};c={EXPIRED_GROUP_INVITE:\"expired_group_invite\",MISSING_GROUP:\"missing_group\",MISSING_GROUP_INVITE:\"missing_group_invite\"};d=b(\"$InternalEnum\")({Initializing:\"initializing\",Open:\"open\",Closed:\"closed\",Error:\"error\",Upgrading:\"upgrading\"});f.WRITE_GROUP_INVITE_ERROR=a;f.GET_GROUP_INVITE_ERROR=c;f.DatabaseState=d}),66);\n__d(\"MAWGetWorkerStatusApi\",[\"MAWLowLevelApiTypes\",\"Promise\",\"WAResultOrError\",\"WATagsLogger\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Worker Status: \",\"\"]);i=function(){return a};return a}var j=d(\"WATagsLogger\").TAGS([\"WorkerStatus\"]),k=\"initializing\",l=\"disconnected\",m={},n=[],o=function(){if(l===\"disconnected\")return(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeError(\"comms_disconnected\"));var a=Object.values(m).some(function(a){a=a.status;return a===d(\"MAWLowLevelApiTypes\").DatabaseState.Error||a===d(\"MAWLowLevelApiTypes\").DatabaseState.Closed});if(a)return(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeError(\"database_failure\"));a=d(\"WAResultOrError\").makeResult({comms:l,databases:m,startup:k});j.LOG(i(),JSON.stringify(a));return(h||(h=b(\"Promise\"))).resolve(a)};function p(){c(\"promiseDone\")(o(),function(a){n.forEach(function(b){return b(a)})})}function a(a){n.push(a),c(\"promiseDone\")(o(),function(b){return a(b)})}function e(a){l=a,p()}function f(a){k=a,p()}function q(a,b){m[a]=babelHelpers[\"extends\"]({},m[a],{status:b}),p()}function r(a,b){m[a]=babelHelpers[\"extends\"]({},m[a],{api:b}),p()}function s(a){return m[a]}g.getWorkerStatus=o;g.onWorkerStateChange=a;g.setCommsStatus=e;g.updateWorkerStatus=f;g.setDatabaseStatus=q;g.setDatabaseApi=r;g.getDatabaseMetadata=s}),98);\n__d(\"MAWRestoreDbState\",[\"MAWCurrentUser\",\"MAWGetWorkerStatusApi\",\"MAWIndexedDbMetadata\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null,i=d(\"MAWIndexedDbMetadata\").dbName(d(\"MAWCurrentUser\").getID());function a(){var a;return((a=d(\"MAWGetWorkerStatusApi\").getDatabaseMetadata(i))==null?void 0:a.api)===\"shim\"}function b(a){d(\"MAWGetWorkerStatusApi\").setDatabaseApi(i,a?\"shim\":\"dexie\")}function e(a){if(!c(\"gkx\")(\"1159\"))return;if(a==null){h=null;return}h=a}function f(){return!c(\"gkx\")(\"1159\")?null:h}g.isUsingShim=a;g.setIsUsingShim=b;g.setTargetDbState=e;g.getTargetDbState=f}),98);\n__d(\"MAWDbContact\",[],(function(a,b,c,d,e,f){\"use strict\";a=0;b=1;c=2;d=3;f.NON_CONTACT=a;f.ONE_WAY_CONTACT=b;f.REVERSED_ONE_WAY_CONTACT=c;f.TWO_WAY_CONTACT=d}),66);\n__d(\"MAWKeychain\",[\"MWEARKeychainV3\"],(function(a,b,c,d,e,f,g){\"use strict\";a={getDbEncryptionKey:d(\"MWEARKeychainV3\").getDbEncryptionKey,getLatestVersion:d(\"MWEARKeychainV3\").getLatestVersion,init:d(\"MWEARKeychainV3\").init};g[\"default\"]=a}),98);\n__d(\"MAWAppVersion\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"301.0.2\";function h(){return g}function a(){var a=h().split(\".\");return{primary:parseInt(a[0],10),secondary:parseInt(a[1],10),tertiary:parseInt(a[2],10)}}f.APP_VERSION=g;f.getVersionNumber=h;f.getAppVersionParts=a}),66);\n__d(\"MAWQplProxy\",[\"MAWBridge\",\"MAWRestoreDbState\",\"MAWSendQplToServer\",\"QPLEvent\",\"asyncToGeneratorRuntime\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(c=c(\"gkx\")(\"23949\"))!=null?c:!1,j=new Set([25313175,25310776,1056839232,1056840931,521485625,521480745,521478596,521479468,521485815]),k=0;function l(){return Date.now()}function m(a,b,c){var e;e=(e=c==null?void 0:c.timestamp)!=null?e:l();d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{name:b,type:\"point\"},annotations:c==null?void 0:c.annotations,event:a,instanceKey:c==null?void 0:c.instanceKey,timestamp:e},!0)}function a(a,b,c,e){var f;d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{type:\"annotations\"},annotations:{bool:(f={},f[b]=c,f)},event:a,instanceKey:e},!0)}function e(a,b,c,e){var f;d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{type:\"annotations\"},annotations:{string:(f={},f[b]=c,f)},event:a,instanceKey:e},!0)}function f(a,b,c,e){var f;d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{type:\"annotations\"},annotations:{\"int\":(f={},f[b]=c,f)},event:a,instanceKey:e},!0)}function n(a,b,c){d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{type:\"annotations\"},annotations:{\"double\":b},event:a,instanceKey:c},!0)}function o(a,b,c){d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{type:\"annotations\"},annotations:b,event:a,instanceKey:c},!0)}function p(a,b,c,e){var f=l();d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{name:b,type:\"failure\"},annotations:c,event:a,instanceKey:e,timestamp:f},!0)}function q(a,b,c){var e=l();d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{type:\"success\"},annotations:b,event:a,instanceKey:c,timestamp:e},!0)}function r(a,b,c){d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{name:b,type:\"error\"},debugInfo:c==null?void 0:c.debugInfo,error:c==null?void 0:c.error,event:a,instanceKey:c==null?void 0:c.instanceKey},!0)}function s(a,b,c,d,e){return t.apply(this,arguments)}function t(){t=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c,d,e){m(a,b+\"_start\",{annotations:d,instanceKey:e});d=(yield c());m(a,b+\"_end\",{instanceKey:e});return d});return t.apply(this,arguments)}function u(a,b,c){c==null&&k++;var e=(c=c)!=null?c:k;if(!v(a))return d(\"MAWSendQplToServer\").startQplUserFlow(a,b,e);c=l();d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"qplEvent\",{action:{type:\"start\"},annotations:b!=null?babelHelpers[\"extends\"]({},b,{bool:babelHelpers[\"extends\"]({},b.bool,{isUsingShim:d(\"MAWRestoreDbState\").isUsingShim()})}):{bool:{isUsingShim:d(\"MAWRestoreDbState\").isUsingShim()}},event:a,instanceKey:e,timestamp:c},!0);return{addAnnotations:function(b){return o(a,b,e)},addPoint:function(b,c){return m(a,b,{annotations:c,instanceKey:e})},endFail:function(b,c){return p(a,b,c,e)},endSuccess:function(b){return q(a,b,e)},markError:function(b,c,d){return r(a,b,{debugInfo:c,error:d,instanceKey:e})},startTime:c}}function v(a){return i||j.has((h||(h=d(\"QPLEvent\"))).getMarkerId(a))}g.performanceAbsoluteNow=l;g.sendQplPointThroughBridge=m;g.sendQPLBoolAnnotationThroughBridge=a;g.sendQPLStringAnnotationThroughBridge=e;g.sendQPLIntAnnotationThroughBridge=f;g.sendQPLDoubleAnnotationsThroughBridge=n;g.sendQPLFailThroughBridge=p;g.sendQPLSuccessThroughBridge=q;g.sendQPLErrorThroughBridge=r;g.measurePerfInQPL=s;g.startQplUserFlow=u}),98);\n__d(\"MAWSendQplToServer\",[\"MAWCurrentUser\",\"MAWEBSwitch\",\"MAWExceededStorageQuota\",\"MAWQplProxy\",\"QPLUserFlow\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,e){var f=d(\"MAWQplProxy\").performanceAbsoluteNow();c(\"QPLUserFlow\").start(a,{annotations:babelHelpers[\"extends\"]({},b||{},{bool:babelHelpers[\"extends\"]({},(b==null?void 0:b.bool)||{},{is_eb_enabled:c(\"MAWEBSwitch\").isEnabled(),is_pdb:c(\"gkx\")(\"24032\"),isDev:0,isDeviceRegistrationDomainUniquenessEnabled:c(\"gkx\")(\"23930\"),isGifSearchEnbled:c(\"gkx\")(\"23950\"),isM1M2OverrideUser:c(\"gkx\")(\"23951\"),isRestoreDBEnabled:c(\"gkx\")(\"23906\"),isSpillOverCAUser:c(\"gkx\")(\"23953\"),isSpillOverVNUser:c(\"gkx\")(\"23954\"),isTlcPublicUser:d(\"MAWCurrentUser\").isTlcPublicUser(),processAcksInOneQueue:c(\"gkx\")(\"23955\"),useSharedWorker:\"SharedWorkerGlobalScope\"in self&&self instanceof self.SharedWorkerGlobalScope})}),instanceKey:e,timestamp:f});return{addAnnotations:function(b){c(\"QPLUserFlow\").addAnnotations(a,b,{instanceKey:e})},addPoint:function(b,f){var g=d(\"MAWQplProxy\").performanceAbsoluteNow();f&&c(\"QPLUserFlow\").addAnnotations(a,f,{instanceKey:e});c(\"QPLUserFlow\").addPoint(a,b,{instanceKey:e,timestamp:g})},endFail:function(b,f){var g,h=d(\"MAWQplProxy\").performanceAbsoluteNow();c(\"QPLUserFlow\").addAnnotations(a,babelHelpers[\"extends\"]({},f,{bool:babelHelpers[\"extends\"]({},f==null?void 0:f.bool,{exceededStorageQuota:d(\"MAWExceededStorageQuota\").getExceededStorageQuota(),isRelaxedDurability:!0}),string:babelHelpers[\"extends\"]({},f==null?void 0:f.string,{threadID:f==null?void 0:(g=f.string)==null?void 0:g.jid})}),{instanceKey:e});c(\"QPLUserFlow\").endFailure(a,b,{annotations:f,instanceKey:e,timestamp:h})},endSuccess:function(b){var f=d(\"MAWQplProxy\").performanceAbsoluteNow();c(\"QPLUserFlow\").addAnnotations(a,{bool:{exceededStorageQuota:d(\"MAWExceededStorageQuota\").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:e});c(\"QPLUserFlow\").endSuccess(a,{annotations:b,instanceKey:e,timestamp:f})},markError:function(b,d,f){return c(\"QPLUserFlow\").markError(a,b,{debugInfo:d,error:f,instanceKey:e})},startTime:f}}g.startQplUserFlow=a}),98);\n__d(\"MAWLogIndexedDb\",[\"MAWCurrentUser\",\"MAWErrorObject\",\"MAWExceededStorageQuota\",\"MAWIndexedDbMetadata\",\"MAWQplProxy\",\"MAWTransactionMode\",\"Promise\",\"err\",\"justknobx\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=null,j=null;function k(){return c(\"justknobx\")._(\"1399\")}function l(){if(i==null)throw c(\"err\")(\"LogDB IndexDB should've been initialized\");return i}function m(){return j==null?o().then(function(){return l()}):j.then(function(){return l()})}function a(){return i!=null}var n=[function(a){a=a.target.transaction;d(\"MAWExceededStorageQuota\").listenToQuotaExceededError(a);a=a.db.createObjectStore(\"logs\",{autoIncrement:!0,keyPath:\"id\"});a.createIndex(\"date\",\"date\",{unique:!1})}];function o(a){if(j!=null)return j;if(i!=null)return(h||(h=b(\"Promise\"))).resolve();var c=d(\"MAWCurrentUser\").getID(),e=d(\"MAWIndexedDbMetadata\").logDbName(c),f=(a=(c=a)!=null?c:k())!=null?a:n.length;j=new(h||(h=b(\"Promise\")))(function(a,b){var c=indexedDB.open(e,f);c.onupgradeneeded=function(a){for(var b=0;b<n.length;b++){var c=n[b];p(a,b+1)&&c(a)}};c.onsuccess=function(b){var c=b.target.result;c.onversionchange=function(){c.close()};i=c;a()};c.onerror=function(){b(c.error)}});return j}function p(a,b){var c=a.newVersion;a=a.oldVersion;return a<b&&c>=b}function q(a){return a===d(\"MAWTransactionMode\").READWRITE?\"readwrite\":\"readonly\"}function e(a,b,e){var f=q(b);return function(b){return function(){for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];var j=e!=null?d(\"MAWQplProxy\").startQplUserFlow(e):null;return m().then(function(c){var e=function(b){b=c.transaction(a,b!=null?q(b):f,{durability:\"relaxed\"});d(\"MAWExceededStorageQuota\").listenToQuotaExceededError(b);return b.objectStore(a)};return b.apply(void 0,[e].concat(h))}).then(function(a){j==null?void 0:j.endSuccess();return a})[\"catch\"](function(a){j==null?void 0:j.endFail(\"transaction_fail\");a=d(\"MAWErrorObject\").getErrorObject(a);throw c(\"unrecoverableViolation\")(\"LOG - Error performing transaction in log transactor\",\"messenger_e2ee_web\",a?{error:a}:{})})}}}g.getLogDbVersion=k;g.getLogDB=l;g.isLogDBInitted=a;g.dbMigrations=n;g.makeLogMsgrTransactor=e}),98);\n__d(\"WAJobDefinitions\",[\"WAGlobals\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){if(a==null)return;return{priority:a.priority,maxTimeoutMs:a.maxTimeoutMs,jobId:a.jobId}}b=function(){return{queryGroups:function(a,b){var c;b=h(b);a==null?c={type:\"all\"}:c={type:\"array\",groups:a};return{type:\"queryGroups\",args:c,scheduleConfig:(a=b)!=null?a:void 0}},computeAndUploadICDCInfo:function(a,b,c,d){d=h(d);return{type:\"computeAndUploadICDCInfo\",args:{reason:a,sequence:c,caller:b},scheduleConfig:(a=d)!=null?a:void 0}},syncdSyncAllCollections:function(a){a=h(a);return{type:\"syncdSyncAllCollections\",args:{},scheduleConfig:(a=a)!=null?a:void 0}},requestAllSyncdMissingKeys:function(a){a=h(a);return{type:\"requestAllSyncdMissingKeys\",args:{},scheduleConfig:(a=a)!=null?a:void 0}}}};c=b();function i(a,b){var c=b.scheduleConfig,e=babelHelpers.objectWithoutPropertiesLoose(b,[\"scheduleConfig\"]);c={type:a,args:{},scheduleConfig:c};b.externalIdJob&&(c.args.externalId=d(\"WAGlobals\").getDependencies().generateExternalId());c.args=babelHelpers[\"extends\"]({},c.args,e);b.uniqueJob&&(c.uniqKey=a);return c}function a(a,b){return i(a,b)}g.serializeJobScheduledConfig=h;g.createJobSerializers=b;g.jobSerializers=c;g.createStartJobInfoGeneric=i;g.createStartJobInfo=a}),98);\n__d(\"MAWJobDefinitions\",[\"MAWExternalId\",\"WAJobDefinitions\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return a}function b(a){return a}e=d(\"WAJobDefinitions\").createJobSerializers();f=babelHelpers[\"extends\"]({},e,{acceptGroupInvite:function(a,b,c,e,f,g){g=d(\"WAJobDefinitions\").serializeJobScheduledConfig(g);return{args:{chatId:a,inviteCode:e,invitedParticipantUserId:c,inviteExpirationTs:f,inviterUserId:b},scheduleConfig:(a=g)!=null?a:void 0,type:\"acceptGroupInvite\"}},addGroupParticipants:function(a,b,c){c=d(\"WAJobDefinitions\").serializeJobScheduledConfig(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:\"addGroupParticipants\"}},deleteGroups:function(a,b){b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{groups:a},scheduleConfig:(a=b)!=null?a:void 0,type:\"deleteGroups\"}},deleteMsgsForMe:function(a,b){b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{msgIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:\"deleteMsgsForMe\"}},demoteGroupParticipants:function(a,b,c){c=d(\"WAJobDefinitions\").serializeJobScheduledConfig(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:\"demoteGroupParticipants\"}},downloadAndHandleMedia:function(a,b,c,e,f,g,h){f=d(\"WAJobDefinitions\").serializeJobScheduledConfig(h);return{args:{hash:b,metricInstanceKeys:g,msgType:e,protocolMsgId:a,qplEntryPoint:c},scheduleConfig:(h=f)!=null?h:void 0,type:\"downloadAndHandleMedia\"}},forwardMsg:function(a,b,c,e,f,g,h){g=d(\"WAJobDefinitions\").serializeJobScheduledConfig(g);return{args:{args:h,chatJid:a,ephemeralSetting:c,externalId:(h=e)!=null?h:d(\"MAWExternalId\").generateExternalId(),isFirstMsg:f,protocolMsgId:b},scheduleConfig:(a=g)!=null?a:void 0,type:\"forwardMsg\"}},getCurrentUserDeviceList:function(a){a=d(\"WAJobDefinitions\").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:\"getCurrentUserDeviceList\"}},getSpams:function(a){a=d(\"WAJobDefinitions\").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:\"getSpams\"}},handleFutureproofMsg:function(a){a=d(\"WAJobDefinitions\").serializeJobScheduledConfig(a);return{args:{},scheduleConfig:(a=a)!=null?a:void 0,type:\"handleFutureproofMsg\"}},handleSpamMsg:function(a){a=d(\"WAJobDefinitions\").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:\"handleSpamMsg\"}},igdReportUserSpam:function(a,b){var c=a.chatJid,e=a.context,f=a.frxParams,g=a.frxTags,h=a.msgs,i=a.spamFlow;a=a.userJid;b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{chatJid:c,context:e,frxParams:f,frxTags:g,msgs:h,spamFlow:i,userJid:a},scheduleConfig:(c=b)!=null?c:void 0,type:\"igdReportUserSpam\"}},igdSendMsg:function(a,b){var c=a.actorID;a=a.taskID;b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{actorID:c,taskID:a},scheduleConfig:(c=b)!=null?c:void 0,type:\"igdSendMsg\"}},leaveGroups:function(a,b){b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{groups:a},scheduleConfig:(a=b)!=null?a:void 0,type:\"leaveGroups\"}},linkReactionsToMsgs:function(a,b){b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{externalIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:\"linkReactionsToMsgs\"}},markThreadAsRead:function(a,b,c,e,f,g,h){h=d(\"WAJobDefinitions\").serializeJobScheduledConfig(h);return{args:{chatJid:a,isBlocked:c,isReadReceiptsDisabled:g,isRestricted:e,relationship:b,upTo:f},scheduleConfig:(a=h)!=null?a:void 0,type:\"markThreadAsRead\",uniqKey:f==null?void 0:f.externalId}},postBackupWriteCompletionHook:function(a){return{args:{traceIdArray:a},type:\"postBackupWriteCompletionHook\"}},promoteGroupParticipants:function(a,b,c){c=d(\"WAJobDefinitions\").serializeJobScheduledConfig(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:\"promoteGroupParticipants\"}},removeGroupParticipants:function(a,b,c){c=d(\"WAJobDefinitions\").serializeJobScheduledConfig(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:\"removeGroupParticipants\"}},reportUserSpam:function(a,b,c,e,f,g,h,i,j,k){j=d(\"WAJobDefinitions\").serializeJobScheduledConfig(j);return{args:{chatJid:c,context:g,frxParams:h,frxTags:f,isIgd:e,openMsgs:k,reportedMessageId:i,spamFlow:b,userJid:a},scheduleConfig:(c=j)!=null?c:void 0,type:\"reportUserSpam\"}},resendWrittenAppData:function(a,b){b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{appDataExternalId:a},scheduleConfig:(a=b)!=null?a:void 0,type:\"resendWrittenAppData\"}},restoreMessagesFromEncryptedBackups:function(a,b,c,e,f,g,h,i,j,k,l,m,n){n=d(\"WAJobDefinitions\").serializeJobScheduledConfig(n);return{args:{hasMoreAfter:f,hasMoreBefore:e,instanceKey:k,isPointQuery:g,messages:c,minMsgId:h,optimisticMsgs:l,startSortKey:j,taskSource:m,threadId:b,traceId:i,transportKey:a},scheduleConfig:(f=n)!=null?f:void 0,type:\"restoreMessagesFromEncryptedBackups\"}},restoreProtobufsFromEncryptedBackups:function(a,b,c,e,f,g,h,i,j,k,l,m){m=d(\"WAJobDefinitions\").serializeJobScheduledConfig(m);return{args:{echoMessages:a,hasMoreAfter:g,hasMoreBefore:f,instanceKey:l,isPointQuery:h,messages:e,minMsgId:i,referenceTimestamp:k,requestId:j,threadId:c,transportKey:b},scheduleConfig:(a=m)!=null?a:void 0,type:\"restoreProtobufsFromEncryptedBackups\"}},revokeMsgs:function(a,b){b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{msgIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:\"revokeMsgs\"}},sendAppData:function(a,b,c){c=d(\"WAJobDefinitions\").serializeJobScheduledConfig(c);return{args:{args:a,externalId:(a=b)!=null?a:d(\"MAWExternalId\").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:\"sendAppData\"}},sendEditMsg:function(a,b,c){c=d(\"WAJobDefinitions\").serializeJobScheduledConfig(c);return{args:{args:a,externalId:(a=b)!=null?a:d(\"MAWExternalId\").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:\"sendEditMsg\"}},sendEphemeralSettingMsg:function(a,b,c,e){e=d(\"WAJobDefinitions\").serializeJobScheduledConfig(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d(\"MAWExternalId\").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:\"sendEphemeralSettingMsg\"}},sendGroupInviteMsg:function(a,b,c){c=d(\"WAJobDefinitions\").serializeJobScheduledConfig(c);return{args:{args:a,externalId:(a=b)!=null?a:d(\"MAWExternalId\").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:\"sendGroupInviteMsg\"}},sendMediaMsg:function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){q=d(\"WAJobDefinitions\").serializeJobScheduledConfig(q);return{args:{args:{duration:i,ephemeralSetting:k,filename:s,height:f,isFirstMsg:o,isForwarded:n,isPtt:j,jpegThumbnail:c,jpegThumbnailHeight:h,jpegThumbnailWidth:g,offlineAttachmentId:t,openMessageOtid:m,quote:l,s2sInstanceKey:u,source:r,width:e},attachmentType:v,chatJid:a,externalId:(i=p)!=null?i:d(\"MAWExternalId\").generateExternalId(),file:b},scheduleConfig:(k=q)!=null?k:void 0,type:\"sendMediaMsg\"}},sendMsg:function(a,b,c,e){e=d(\"WAJobDefinitions\").serializeJobScheduledConfig(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d(\"MAWExternalId\").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:\"sendMsg\"}},sendRavenActionMsg:function(a,b,c,e){e=d(\"WAJobDefinitions\").serializeJobScheduledConfig(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d(\"MAWExternalId\").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:\"sendRavenActionMsg\"}},sendReactionMsg:function(a,b,c,e,f,g,h){g=d(\"WAJobDefinitions\").serializeJobScheduledConfig(g);return{args:{args:{groupingKey:\"\",reaction:e,reactToAuthor:c,reactToProtocolMsgId:b,source:h},chatJid:a,externalId:(e=f)!=null?e:d(\"MAWExternalId\").generateExternalId()},scheduleConfig:(c=g)!=null?c:void 0,type:\"sendReactionMsg\"}},sendWrittenAppData:function(a,b){b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{appDataExternalId:a},scheduleConfig:(a=b)!=null?a:void 0,type:\"sendWrittenAppData\"}},sendWrittenMsg:function(a,b,c,e){c===void 0&&(c=\"message\");e=d(\"WAJobDefinitions\").serializeJobScheduledConfig(e);return{args:{protocolMsgId:a,s2sInstanceKey:b,type:c},scheduleConfig:(a=e)!=null?a:void 0,type:\"sendWrittenMsg\"}},sendXMAShareMsg:function(a,b,c,e,f,g,h,i,j,k){k=d(\"WAJobDefinitions\").serializeJobScheduledConfig(k);return{args:{args:g,associatedMsgContent:f,associatedMsgContentExternalId:(g=i)!=null?g:d(\"MAWExternalId\").generateExternalId(),chatJid:a,faviconFile:e,headerFile:c,previewFile:b,xmaArgs:j,xmaMsgExternalId:(f=h)!=null?f:d(\"MAWExternalId\").generateExternalId()},scheduleConfig:(i=k)!=null?i:void 0,type:\"sendXMAShareMsg\"}},setGroupSubject:function(a,b,c){c=d(\"WAJobDefinitions\").serializeJobScheduledConfig(c);return{args:{group:a,subject:b},scheduleConfig:(a=c)!=null?a:void 0,type:\"setGroupSubject\"}},startInstamadilloDYI:function(a,b){b=d(\"WAJobDefinitions\").serializeJobScheduledConfig(b);return{args:{qplInstanceKey:a},scheduleConfig:(a=b)!=null?a:void 0,type:\"startInstamadilloDYI\"}},updateBackupEntFbidForMedia:function(a,b,c,e){e=d(\"WAJobDefinitions\").serializeJobScheduledConfig(e);return{args:{backupEntFbid:b,deliveryObjectId:a,traceId:c},scheduleConfig:(b=e)!=null?b:void 0,type:\"updateBackupEntFbidForMedia\"}},uploadMessagesBackup:function(a,b,c,e,f,g,h,i,j){j=d(\"WAJobDefinitions\").serializeJobScheduledConfig(j);return{args:{messageIds:a,oldTraceIdMap:g,pendingStanzaIds:c,reactionIds:e,threadIds:b,uploadTrackingInstanceMap:h,xmaIds:f},scheduleConfig:(a=j)!=null?a:void 0,type:\"uploadMessagesBackup\",uniqKey:i}},uploadRetroactiveMessageBatch:function(a,b,c,d){return{args:{chatId:d,dbMsgArray:a,includeOffset:b,msgOffset:c},type:\"uploadRetroactiveMessageBatch\"}},uploadRetroactiveThreadsAndMessages:function(a){a=d(\"WAJobDefinitions\").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:\"uploadRetroactiveThreadsAndMessages\"}}});function c(a,b){return d(\"WAJobDefinitions\").createStartJobInfoGeneric(a,b)}g.toThreadJidPrimaryId=a;g.toEncodedEchoMessage=b;g.jobSerializers=f;g.createStartJobInfo=c}),98);\n__d(\"WAJobOrchestratorTypes\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\")({SKIP:\"SKIP_PRIORITIZATION\",UI_ACTION:\"UI_ACTION\",LOW:\"LOW\",HIGH:\"HIGH\",OFFLINE:\"OFFLINE\",HISTORY_SYNC:\"HISTORY_SYNC\",BEST_EFFORT:\"BEST_EFFORT\"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);\n__d(\"MAWUIJob\",[\"MAWBridge\",\"WAJobOrchestratorTypes\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={priority:d(\"WAJobOrchestratorTypes\").JOB_PRIORITY.UI_ACTION};a={fireAndForget:function(a){d(\"MAWBridge\").getBridge().fireAndForget(\"backend\",\"runJobFireAndForget\",babelHelpers[\"extends\"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:h}))},waitUntilCompleted:function(a){a=d(\"MAWBridge\").getBridge().sendAndReceive(\"backend\",\"runJobWaitUntilCompleted\",babelHelpers[\"extends\"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:h}));return a},waitUntilPersisted:function(a){a=d(\"MAWBridge\").getBridge().sendAndReceive(\"backend\",\"runJobWaitUntilPersisted\",babelHelpers[\"extends\"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:h}));return a}};g.UIJobStarters=a}),98);\n__d(\"MAWTimedJob\",[\"FBLogger\",\"MAWMaybeWithTimeout\",\"MAWUIJob\",\"MAWWaitForBackendSetup\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=6e4;a={fireAndForget:function(a,b){b===void 0&&(b=h);return d(\"MAWMaybeWithTimeout\").maybeWithTimeout(d(\"MAWWaitForBackendSetup\").waitForBackendSetup(a.type).then(function(){return d(\"MAWUIJob\").UIJobStarters.fireAndForget(a)}),b,function(){throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Failed to complete execution of job %s in time\",a.type)},a.type)},waitUntilCompleted:function(a,b){b===void 0&&(b=h);return d(\"MAWMaybeWithTimeout\").maybeWithTimeout(d(\"MAWWaitForBackendSetup\").waitForBackendSetup(a.type).then(function(){return d(\"MAWUIJob\").UIJobStarters.waitUntilCompleted(a)}),b,function(){throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Failed to complete execution of job %s in time\",a.type)},a.type)},waitUntilPersisted:function(a,b){b===void 0&&(b=h);return d(\"MAWMaybeWithTimeout\").maybeWithTimeout(d(\"MAWWaitForBackendSetup\").waitForBackendSetup(a.type).then(function(){return d(\"MAWUIJob\").UIJobStarters.waitUntilPersisted(a)}),b,function(){throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Failed to complete execution of job %s in time\",a.type)},a.type)}};g.DEFAULT_TIMEOUT_MS=h;g.TimedUIJobStarters=a}),98);\n__d(\"MAWLeakDetection\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"[Vault] Vaulted string detected\";function h(a){var b=\/\\d{10}##\\d{10}\/gm;return b.test(a)}function a(a){return h(a)?g:a}f.VAULTED_STRING_DETECTED=g;f.detectVaultedString=h;f.maybeReplaceVaultedString=a}),66);\n__d(\"MAWAckLevel\",[\"LSIntEnum\",\"LSMessageSendStatus\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,inactiveReceived:-6,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function a(a){switch(a){case i.clock:return(h||(h=d(\"LSIntEnum\"))).ofNumber(1);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d(\"LSIntEnum\"))).ofNumber(2);default:return(h||(h=d(\"LSIntEnum\"))).ofNumber(4)}}function b(a){switch(a){case i.clock:return(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSMessageSendStatus\").SENDING_TO_SERVER);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSMessageSendStatus\").SERVER_RECEIVED);default:return(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSMessageSendStatus\").NON_RETRIABLE_ERROR)}}g.ACK=i;g.levelToMessagingSendStatusV2=a;g.levelToMessagingSendStatus=b}),98);\n__d(\"MAWConsoleLogger\",[\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=c(\"gkx\")(\"2656\");function a(a,b,c){if(h){var d=c.map(function(a){return\"[\"+a+\"]\"}).join(\"\");for(var e=arguments.length,f=new Array(e>3?e-3:0),g=3;g<e;g++)f[g-3]=arguments[g];if(d){var i;(i=console)[a].apply(i,[d,b].concat(f))}else{var j;(j=console)[a].apply(j,[b].concat(f))}}}g.logToConsole=a}),98);\n__d(\"MAWContactRelationshipType\",[\"I64\",\"LSContactBitOffset\",\"MAWDbContact\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){var b=d(\"LSContactBitOffset\").hasWithDefault(64,a,!0);a=(h||(h=d(\"I64\"))).ge(a.contactViewerRelationship,h.of_string(\"2\"));if(a&&b)return d(\"MAWDbContact\").ONE_WAY_CONTACT;else if(!a&&!b)return d(\"MAWDbContact\").REVERSED_ONE_WAY_CONTACT;else if(a&&!b)return d(\"MAWDbContact\").TWO_WAY_CONTACT;return d(\"MAWDbContact\").NON_CONTACT}g.getContactRelationshipType=a}),98);\n__d(\"MAWEphemeralConsts\",[\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";a=300;b=600;c=900;e=1800;d=Math.imul((f=d(\"WATimeUtils\")).HOUR_SECONDS,6);var h=Math.imul(f.HOUR_SECONDS,12),i=Math.imul(f.DAY_SECONDS,14),j=1e3,k=5,l=10,m=30,n=60,o=d;g.fiveMinutesInSeconds=a;g.tenMinutesInSeconds=b;g.fifteenMinutesInSeconds=c;g.thirtyMinutesInSeconds=e;g.oneHourInSeconds=f.HOUR_SECONDS;g.sixHoursInSeconds=d;g.twelveHoursInSeconds=h;g.oneDayInSeconds=f.DAY_SECONDS;g.ephemeralMaxDelectionWindowForUnseenMessage=i;g.msPerSec=j;g.fiveSeconds=k;g.tenSeconds=l;g.thirtySeconds=m;g.oneMinuteInSeconds=n;g.ephemeralReportingWindowInSeconds=o}),98);\n__d(\"MAWKillSwitches\",[\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"gkx\")(\"23983\");b=c(\"gkx\")(\"23984\");d=a;e=b;g.isBugReportingDisabled=d;g.isServerLoggingDisabled=e}),98);\n__d(\"MAWSaveLogToDisk\",[\"Deferred\",\"MAWLogIndexedDb\",\"MAWTransactionMode\",\"Promise\",\"asyncToGeneratorRuntime\",\"justknobx\",\"pageID\",\"promiseDone\",\"throttle\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=c(\"justknobx\")._(\"1403\");f=c(\"justknobx\")._(\"1404\");var j=c(\"justknobx\")._(\"1401\");function k(a){if(Number.isInteger(a))return a;if(typeof a===\"string\")return(a||\"\").replace(\/\\n\/g,\"\");try{return JSON.stringify(a)}catch(a){return\"Data could not be serialized\"}}function l(a,b){b===void 0&&(b=\"\");return a.length>0?\"[\"+a.join(\"|\")+\"]\":b}function m(a){switch(a){case\"logRestricted\":return\"warn\";case\"debug\":case\"log\":case\"warn\":case\"error\":return a}}function a(a){return{args:a.logString,date:a.date,event:l(a.tags,\"[]\"),level:m(a.logLevel)}}function e(a,b,c,d,e,f){return{args:a+\"; ERROR=\"+c.message+\";\",data:{entriesToReport:e,error:c,framesToPop:d,stack:f},date:Date.now(),event:l(b,\"[]\"),level:\"error\"}}var n=[],o=[],p=5,q=0,r=!1,s=function(){n.length=0},t=function(a){a=y(a);o.length<p?o.push(a):o[q%p]=a;q=(q+1)%p},u=function(a){var c=[],d=0;while(d<a){var e=((q-d-1)%p+p)%p;e=o[e];c.push(e);d++}return(h||(h=b(\"Promise\"))).resolve(c)},v=function(a,b){n.push({context:a,logEntry:b}),t({context:a,logEntry:b}),n.length>i?c(\"promiseDone\")(w()):x()},w=function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){r=!0;try{var a=[].concat(n);s();yield z(a)}catch(a){}r=!1});return function(){return a.apply(this,arguments)}}(),x=c(\"throttle\")(b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){if(r)return;r=!0;try{var a=[].concat(n);s();yield z(a)}catch(a){}r=!1}),f),y=function(a){var b=a.context;a=a.logEntry;return Object.entries(a).reduce(function(a,b){var c=b[0];b=b[1];a[c]=k(b);return a},babelHelpers[\"extends\"]({},a,{category:b+\"-\"+c(\"pageID\")}))},z=d(\"MAWLogIndexedDb\").makeLogMsgrTransactor(\"logs\",d(\"MAWTransactionMode\").READWRITE)(function(a,b){var d=new(c(\"Deferred\"))(),e=a();b.forEach(function(a){e.add(y(a))});e.transaction.oncomplete=function(){return d.resolve()};e.transaction.onerror=function(a){return d.reject(a)};return d.getPromise()});f=d(\"MAWLogIndexedDb\").makeLogMsgrTransactor(\"logs\",d(\"MAWTransactionMode\").READONLY)(function(a){var b=new(c(\"Deferred\"))();a=a();a=a.getAll();a.onsuccess=function(a){a=a.target.result;a=a.slice(Math.max(0,a.length-j));b.resolve(a)};a.onerror=function(a){return b.reject(a)};return b.getPromise()});var A=function(a){if(a<=o.length)return u(a);else return B(a)},B=d(\"MAWLogIndexedDb\").makeLogMsgrTransactor(\"logs\",d(\"MAWTransactionMode\").READONLY)(function(a,b){var d=new(c(\"Deferred\"))();a=a();a=a.index(\"date\");a=a.openCursor(null,\"prev\");var e=[];a.onsuccess=function(a){a=a.target.result;if(a==null){d.resolve(e);return}e.push(a.value);if(e.length>=b){d.resolve(e);return}a[\"continue\"]()};a.onerror=function(a){return d.reject(a)};return d.getPromise()});g.joinTags=l;g.formatLog=a;g.formatErrorForLogging=e;g.clearLogEntryCache=s;g.saveLogEntry=v;g.forceCachedLogEntryPersist=w;g.getEntries=f;g.getLastNEntries=A}),98);\n__d(\"MAWDeleteOldLogsFromDisk\",[\"Deferred\",\"MAWLogIndexedDb\",\"MAWSaveLogToDisk\",\"MAWTransactionMode\",\"WALogger\",\"asyncToGeneratorRuntime\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to delete old logs: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to delete old logs: \",\"\"]);j=function(){return a};return a}var k=c(\"justknobx\")._(\"1400\"),l=c(\"justknobx\")._(\"1401\"),m=c(\"justknobx\")._(\"1402\"),n=(f=d(\"MAWLogIndexedDb\")).makeLogMsgrTransactor(\"logs\",(h=d(\"MAWTransactionMode\")).READONLY)(function(a){var b=new(c(\"Deferred\"))();a=a();a=a.count();a.onsuccess=function(a){a=a.target.result;b.resolve(a)};a.onerror=function(a){b.reject(a)};return b.getPromise()}),o=f.makeLogMsgrTransactor(\"logs\",h.READONLY)(function(a,b){var d=new(c(\"Deferred\"))();a=a();var e=[];a=a.index(\"date\");a=a.openCursor();a.onsuccess=function(a){a=a.target.result;if(a==null||!b(a.value,e)){d.resolve(e);return}e.push(a.value.id);a[\"continue\"]()};a.onerror=function(a){d.reject(a)};return d.getPromise()}),p=f.makeLogMsgrTransactor(\"logs\",h.READWRITE)(function(a){var b=new(c(\"Deferred\"))();a=a();a=a.clear();a.onsuccess=function(){return b.resolve()};a.onerror=function(a){return b.reject(a)};d(\"MAWSaveLogToDisk\").clearLogEntryCache();return b.getPromise()}),q=f.makeLogMsgrTransactor(\"logs\",h.READWRITE)(function(a,b){var d=new(c(\"Deferred\"))(),e=a();b.forEach(function(a){return e[\"delete\"](a)});e.transaction.oncomplete=function(){return d.resolve()};e.transaction.onerror=function(a){return d.reject(a)};return d.getPromise()});function r(a,b){b=Date.now()-m;return a!=null&&a.date<=b}function s(a){return function(b,c){return c.length<a}}function a(){return t.apply(this,arguments)}function t(){t=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){try{var a=(yield n());if(a===0)return;a=a-l;if(a>0){a=(yield o(s(a)));yield q(a);return}a=(yield o(r));a.length>0&&(yield q(a))}catch(a){d(\"WALogger\").ERROR(j(),a)}});return t.apply(this,arguments)}function e(){return u.apply(this,arguments)}function u(){u=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){try{var a=(yield n());if(a===0)return;if(a>=k){yield p();return}}catch(a){d(\"WALogger\").ERROR(i(),a)}});return u.apply(this,arguments)}g.clearLogs=p;g.deleteOldLogs=a;g.deleteOldLogsOnStartup=e}),98);\n__d(\"MAWLoggingSwitches\",[\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"gkx\")(\"503\");g.removeLoggingFromBridge=a}),98);\n__d(\"ServerJsRuntimeEnvironment\",[\"invariant\"],(function(a,b,c,d,e,f,g,h){\"use strict\";var i;function a(a,b){i==null||h(0,71696),i={platform:a,executionContext:b}}function b(){return i!=null}function c(){var a;return(a=i)==null?void 0:a.executionContext}function d(){var a;return(a=i)==null?void 0:a.platform}g.init=a;g.isRunningServerJsRuntime=b;g.getExecutionContext=c;g.getPlatform=d}),98);\n__d(\"WADevToolsBridge\",[\"WADynamicRouter\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=new(d(\"WADynamicRouter\").DynamicRouter)();function a(){return h}g.getDevToolBridge=a}),98);\n__d(\"MAWMainThreadLogger\",[\"CurrentMessengerUser\",\"FBLogger\",\"MAWAppVersion\",\"MAWConsoleLogger\",\"MAWDeleteOldLogsFromDisk\",\"MAWKillSwitches\",\"MAWLeakDetection\",\"MAWLoggingSwitches\",\"MAWSaveLogToDisk\",\"Promise\",\"ServerJsRuntimeEnvironment\",\"WADevToolsBridge\",\"WAJids\",\"WATagsLogger\",\"asyncToGeneratorRuntime\",\"err\",\"getErrorSafe\",\"gkx\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=!1;function a(){i=!1}function e(){i||(i=!0,d(\"WATagsLogger\").initializeWaLogger(u))}var j=function(){return c(\"FBLogger\")(\"messenger_e2ee_web\")};function k(a,b){return b.length>0?d(\"MAWSaveLogToDisk\").joinTags(b)+\" \"+a:a}function l(a,b,e){if(d(\"MAWKillSwitches\").isServerLoggingDisabled||d(\"ServerJsRuntimeEnvironment\").isRunningServerJsRuntime())return;var f=Date.now();c(\"gkx\")(\"3282\")&&d(\"WADevToolsBridge\").getDevToolBridge().fireAndForget(\"devtool\",\"logLine\",{logLevel:a,logString:k(b,e)},!0);if(!d(\"MAWLoggingSwitches\").removeLoggingFromBridge)return;b=b.replace(\/\\n\/g,\" \");if(a===\"debug\"||typeof b!==\"string\")return;d(\"MAWSaveLogToDisk\").saveLogEntry(\"browser\",{args:b,date:f,event:d(\"MAWSaveLogToDisk\").joinTags(e,\"[unknown]\"),level:a})}function m(a,b){a=n(a);a!=null&&l(\"log\",a,b)}function n(a){if(!d(\"CurrentMessengerUser\").isEmployee()&&!d(\"CurrentMessengerUser\").isTestUser())return;a=d(\"WAJids\").maybeSanitizeLogLineText(a);a=d(\"MAWLeakDetection\").maybeReplaceVaultedString(a);return a}function o(a,b){a=d(\"WAJids\").maybeSanitizeLogLineText(a);a=d(\"MAWLeakDetection\").maybeReplaceVaultedString(a);l(\"log\",a,b)}function p(a,b){a=d(\"WAJids\").maybeSanitizeLogLineText(a);a=d(\"MAWLeakDetection\").maybeReplaceVaultedString(a);l(\"warn\",a,b)}function f(a,b,d,e,f,g){d=c(\"err\")(d);d.stack=e;c(\"promiseDone\")(s(a,b,d,f,g))}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,c,e){a=d(\"MAWLeakDetection\").maybeReplaceVaultedString(d(\"WAJids\").maybeSanitizeLogLineText(a));c=d(\"MAWLeakDetection\").maybeReplaceVaultedString(d(\"WAJids\").maybeSanitizeLogLineText(c));var f=d(\"MAWLoggingSwitches\").removeLoggingFromBridge?d(\"MAWSaveLogToDisk\").getLastNEntries(e):(h||(h=b(\"Promise\"))).resolve([]);e=e===0?[]:[].concat((yield f).map(function(a){return a.args}));return{errorLogString:c+\" [Caught in \"+a+\"]\",logs:[a].concat(e),sanitizedMessage:c}});return r.apply(this,arguments)}function s(a,b,c,d,e){return t.apply(this,arguments)}function t(){t=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,e,f,g){a=(yield q(k(a,b),e.message,g));g=a.errorLogString;var h=a.logs;a=a.sanitizedMessage;var i=c(\"getErrorSafe\")(e);try{e.message=a}catch(b){i=c(\"err\")(a,e.fileName,e.lineNumber)}f!==0&&(i.framesToPop=f);(a=j())==null?void 0:(e=a.addMetadata(\"MESSENGER_E2EE_WEB\",\"APP_VERSION\",d(\"MAWAppVersion\").getVersionNumber()).catching(i)).mustfix.apply(e,h);l(\"error\",g,b)});return t.apply(this,arguments)}var u={debug:function(a,b){d(\"MAWConsoleLogger\").logToConsole(\"log\",a,b)},devConsole:function(a,b,c){for(var e=arguments.length,f=new Array(e>3?e-3:0),g=3;g<e;g++)f[g-3]=arguments[g];switch(a){case\"DEV\":d(\"MAWConsoleLogger\").logToConsole.apply(void 0,[\"log\",b,c].concat(f));break;case\"DEV_XMPP\":d(\"MAWConsoleLogger\").logToConsole.apply(void 0,[\"log\",b,c].concat(f));break;case\"LOG\":d(\"MAWConsoleLogger\").logToConsole.apply(void 0,[\"info\",b,c].concat(f));break;case\"WARN\":d(\"MAWConsoleLogger\").logToConsole.apply(void 0,[\"warn\",b,c].concat(f));break;case\"ERROR\":d(\"MAWConsoleLogger\").logToConsole.apply(void 0,[\"error\",b,c].concat(f));break;case\"CATCHING\":d(\"MAWConsoleLogger\").logToConsole.apply(void 0,[\"error\",b,c].concat(f));break}},error:function(a,b,e){a=d(\"MAWLeakDetection\").maybeReplaceVaultedString(d(\"WAJids\").maybeSanitizeLogLineText(a));e?c(\"promiseDone\")(s(a,b,e,0,0)):c(\"promiseDone\")(s(a,b,c(\"err\")(a),2,0));d(\"MAWConsoleLogger\").logToConsole(\"error\",a,b)},info:function(a,b){o(a,b),d(\"MAWConsoleLogger\").logToConsole(\"info\",a,b)},logRestricted:function(a,b){m(a,b),d(\"MAWConsoleLogger\").logToConsole(\"log\",a,b)},warn:function(a,b){p(a,b),d(\"MAWConsoleLogger\").logToConsole(\"warn\",a,b)}};function v(){if(d(\"MAWKillSwitches\").isServerLoggingDisabled)return(h||(h=b(\"Promise\"))).resolve([]);return!d(\"MAWLoggingSwitches\").removeLoggingFromBridge?(h||(h=b(\"Promise\"))).resolve([]):d(\"MAWSaveLogToDisk\").getEntries()}function w(){return x.apply(this,arguments)}function x(){x=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){if(!d(\"MAWLoggingSwitches\").removeLoggingFromBridge)return;yield d(\"MAWDeleteOldLogsFromDisk\").clearLogs()});return x.apply(this,arguments)}function y(a){return new Date(typeof a===\"string\"?parseInt(a,10):a).toISOString().replace(\"T\",\" \").replace(\"Z\",\"\")}function z(a){return a.map(function(a){try{var b=y(a.date);return[b,a.level,a.category,a.event,a.args].join(\" | \")}catch(a){return[y(Date.now()),\"error\",\"LOGGER\",\"Error formatting log: \"+((a==null?void 0:a.message)||\"\")].join(\" | \")}}).filter(Boolean).join(\"\\n\")}g.__testClearLoggerSetup=a;g.setupMainWaLogger=e;g.logToHistory=l;g.logRestricted=m;g.info=o;g.warn=p;g.logError=f;g.getEntries=v;g.clearEntries=w;g.formatEntries=z}),98);\n__d(\"MAWBridgeUIEventDataValidation\",[\"FBLogger\",\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){try{return(h||(h=d(\"I64\"))).of_string(a)}catch(b){c(\"FBLogger\")(\"mpf_web_foundations\").catching(b).mustfix(\"Cannot convert string to i64: %s\",a)}}g.stringToI64Opt=a}),98);\n__d(\"MWSetupDBEncryption\",[\"BrowserLockManager\",\"FBLogger\",\"MAWEncyptionIndexedDbV2\",\"MAWKeychain\",\"MAWMainThreadLogger\",\"Promise\",\"asyncToGeneratorRuntime\",\"getErrorSafe\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=function(a,b){return b()};function a(a){i=a}var j=\"mw_ear_db\";function k(){return l.apply(this,arguments)}function l(){l=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){try{yield d(\"MAWEncyptionIndexedDbV2\").makeEncryptionDB()}catch(a){a instanceof Error?c(\"FBLogger\")(\"messenger_e2ee_web\").catching(a).warn(\"Can not create encryption db with error\"):c(\"FBLogger\")(\"messenger_e2ee_web\").warn(\"IndexedDB onerror when opening db\");return{error:\"keychain-setup-failure\",success:!1}}try{var a=(yield i(\"init_setup_keychain\",function(){return c(\"MAWKeychain\").init()}));return a}catch(a){c(\"FBLogger\")(\"messenger_e2ee_web\").catching(c(\"getErrorSafe\")(a)).warn(\"Error initializing EAR with error\");return{error:\"keychain-setup-failure\",success:!1}}});return l.apply(this,arguments)}function m(){if(c(\"BrowserLockManager\")!=null)return new(h||(h=b(\"Promise\")))(function(a,d){c(\"promiseDone\")(c(\"BrowserLockManager\").request(j,b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){try{var b=(yield k());a(b)}catch(a){d(a)}})),function(a){},function(a){return c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).warn(\"[eardb] lock issue\")})});else return k()}function e(a,c){c===void 0&&(c=function(a){return!0});var d=null;return function(){d==null&&(d=a().then(function(a){d=c(a)?(h||(h=b(\"Promise\"))).resolve(a):null;return a})[\"catch\"](function(a){d=null;throw a}));return d}}f=e(function(){d(\"MAWMainThreadLogger\").setupMainWaLogger();return m()},function(a){return(a==null?void 0:a.success)===!0});g.setPerformanceMeasurementTool=a;g.init=f}),98);\n__d(\"isGroupInvitesEnabled\",[\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"qex\")._(\"125\")===!0}g[\"default\"]=a}),98);\n__d(\"SharedWorkerStatusLock\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"sw-lock\";function h(a){return g+\"-\"+a}function a(){var a=null,b;function c(){var c=self,d=c.navigator.locks;c.LockManager!=null&&d instanceof c.LockManager&&(b==null&&(b=new c.Promise(function(b){a=b})),d.request(h(c.name),function(a){if(a!=null)return b}))}function d(){a==null?void 0:a(),b=null,a=null}return{init:c,release:d}}f.getStatusLockName=h;f.getStatusLock=a}),66);\n__d(\"EphemeralMediaViewMode\",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});f[\"default\"]=a}),66);\n__d(\"LSContactIdType\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});f[\"default\"]=a}),66);\n__d(\"LSHotEmojiSize\",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});f[\"default\"]=a}),66);\n__d(\"LSMessageUnsendabilityStatus\",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});f[\"default\"]=a}),66);\n__d(\"LSMessagingThreadAttributionType\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,MARKETPLACE_GEN_AI_ACCORDION_META_AI_PILL:1245187,MARKETPLACE_GEN_AI_ACCORDION_FOLLOW_UP_QUESTION:1245188,MARKETPLACE_GEN_AI_PRICE_CHECK_META_AI_PILL:1245189,MARKETPLACE_GEN_AI_PRICE_CHECK_FOLLOW_UP_QUESTION:1245190,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,HIGHLIGHTS_TAB_SHARE_SHEET_HOLIDAY_CARD:4587538,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208,SUPPORT_FOLDER:6815744});f[\"default\"]=a}),66);\n__d(\"MessagingFolderTag\",[],(function(a,b,c,d,e,f){a=Object.freeze({INBOX:\"inbox\",OTHER:\"other\",SPAM:\"spam\",PENDING:\"pending\",MONTAGE:\"montage\",HIDDEN:\"hidden\",LEGACY:\"legacy\",DISABLED:\"disabled\",PAGE_BACKGROUND:\"page_background\",PAGE_DONE:\"page_done\",BLOCKED:\"blocked\",COMMUNITY:\"community\",RESTRICTED:\"restricted\",BC_PARTNERSHIP:\"bc_partnership\",E2EE_CUTOVER:\"e2ee_cutover\",E2EE_CUTOVER_ARCHIVED:\"e2ee_cutover_archived\",E2EE_CUTOVER_PENDING:\"e2ee_cutover_pending\",E2EE_CUTOVER_OTHER:\"e2ee_cutover_other\",INTEROP:\"interop\",ARCHIVED:\"archived\",AI_ACTIVE:\"ai_active\",SALSA_RESTRICTED:\"salsa_restricted\",UNKNOWN:\"\"});f[\"default\"]=a}),66);\n__d(\"RavenMessagingState\",[],(function(a,b,c,d,e,f){a=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});f[\"default\"]=a}),66);\n__d(\"LSVerifyContactRowExistsStoredProcedure\",[\"LSVerifyContactRowExists\",\"cr:8709\"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.id;d[1]=b.contactIdType;d[2]=b.profilePictureUrl;d[3]=b.name;d[4]=b.contactType;d[5]=b.profilePictureFallbackUrl;d[6]=b.profilePictureUrlExpirationTimestampMs;d[7]=b.urlExpirationTimestampMs;d[8]=b.normalizedNameForSearch;d[9]=b.isMemorialized;d[10]=b.isBlocked;d[11]=b.blockedByViewerStatus;d[12]=b.canViewerMessage;d[13]=b.isSelf;d[14]=b.authorityLevel;d[15]=b.capabilities;d[16]=b.capabilities2;d[17]=b.workForeignEntityType;d[18]=b.gender;d[19]=b.contactViewerRelationship;d[20]=b.secondaryName;return c(\"LSVerifyContactRowExists\").apply(void 0,d.concat([a]))}g[\"default\"]=a}),98);\n__d(\"LSCancelTaskByQueueName\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(2).fetch([[[a[0]]],\"queueNameTaskId\"]),function(c){return c.queueName===a[0]&&c.context===b.i64.to_string(a[1])}),function(a){return a[\"delete\"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);\n__d(\"LSIssueNewError\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(6).add({errorId:void 0,taskId:a[0],errorCode:a[1],errorTitleText:a[2],errorBodyText:a[3],issuedTimestampMs:c[0],errorExtraData:a[4],presentationStyle:a[5]})},function(a){return b.resolve(d)}])}e.exports=a}),null);\n__d(\"LSContactUtils\",[\"I64\",\"LSContactBitOffset\",\"LSContactBlockedByViewerStatus\",\"LSIntEnum\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a){return!(h||(h=d(\"I64\"))).equal(a.blockedByViewerStatus,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSContactBlockedByViewerStatus\").UNBLOCKED))}function b(a){return(a=d(\"LSContactBitOffset\").has(66,a))!=null?a:!1}g.isContactBlocked=a;g.isContactRestricted=b}),98);\n__d(\"useAsyncReStore\",[\"LSDatabaseSingleton\",\"Promise\",\"ReStoreProvider.react\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k;c=i||d(\"react\");var l=c.useContext,m=c.useMemo;function a(){var a=l((k||(k=d(\"ReStoreProvider.react\"))).context);return m(function(){return a!=null?(h||(h=b(\"Promise\"))).resolve(a):(j||(j=d(\"LSDatabaseSingleton\"))).LSDatabaseSingleton},[a])}g[\"default\"]=a}),98);\n__d(\"WAProtoConst\",[],(function(a,b,c,d,e,f){\"use strict\";a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:\"__oneofs__\",RESERVED:\"__reserved__\",RESERVED_TAGS:\"tags\",RESERVED_FIELDS:\"fields\"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);\n__d(\"WAArmadilloXMA.pb\",[\"WACommon.pb\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){var h;a={INFO:0,EYE_OFF:1,NEWS_OFF:2,WARNING:3,PRIVATE:4,NONE:5,MEDIA_LABEL:6,POST_COVER:7,POST_LABEL:8,WARNING_SCREENS:9};b={OPEN_NATIVE:11};c={SINGLE:0,HSCROLL:1,PORTRAIT:3,STANDARD_DXMA:12,LIST_DXMA:15};e={IG_STORY_PHOTO_MENTION:4,IG_SINGLE_IMAGE_POST_SHARE:9,IG_MULTIPOST_SHARE:10,IG_SINGLE_VIDEO_POST_SHARE:11,IG_STORY_PHOTO_SHARE:12,IG_STORY_VIDEO_SHARE:13,IG_CLIPS_SHARE:14,IG_IGTV_SHARE:15,IG_SHOP_SHARE:16,IG_PROFILE_SHARE:19,IG_STORY_PHOTO_HIGHLIGHT_SHARE:20,IG_STORY_VIDEO_HIGHLIGHT_SHARE:21,IG_STORY_REPLY:22,IG_STORY_REACTION:23,IG_STORY_VIDEO_MENTION:24,IG_STORY_HIGHLIGHT_REPLY:25,IG_STORY_HIGHLIGHT_REACTION:26,IG_EXTERNAL_LINK:27,IG_RECEIVER_FETCH:28,FB_FEED_SHARE:1e3,FB_STORY_REPLY:1001,FB_STORY_SHARE:1002,FB_STORY_MENTION:1003,FB_FEED_VIDEO_SHARE:1004,FB_GAMING_CUSTOM_UPDATE:1005,FB_PRODUCER_STORY_REPLY:1006,FB_EVENT:1007,FB_FEED_POST_PRIVATE_REPLY:1008,FB_SHORT:1009,FB_COMMENT_MENTION_SHARE:1010,MSG_EXTERNAL_LINK_SHARE:2e3,MSG_P2P_PAYMENT:2001,MSG_LOCATION_SHARING:2002,MSG_LOCATION_SHARING_V2:2003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:2004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:2005,MSG_RECEIVER_FETCH:2006,MSG_IG_MEDIA_SHARE:2007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:2008,MSG_REELS_LIST:2009,MSG_CONTACT:2010,MSG_THREADS_POST_SHARE:2011,MSG_FILE:2012,MSG_AVATAR_DETAILS:2013,MSG_AI_CONTACT:2014,MSG_MEMORIES_SHARE:2015,RTC_AUDIO_CALL:3e3,RTC_VIDEO_CALL:3001,RTC_MISSED_AUDIO_CALL:3002,RTC_MISSED_VIDEO_CALL:3003,RTC_GROUP_AUDIO_CALL:3004,RTC_GROUP_VIDEO_CALL:3005,RTC_MISSED_GROUP_AUDIO_CALL:3006,RTC_MISSED_GROUP_VIDEO_CALL:3007,DATACLASS_SENDER_COPY:4e3};f={};var i={};f.internalSpec={associatedMessage:[1,(h=d(\"WAProtoConst\")).TYPES.MESSAGE,(d=d(\"WACommon.pb\")).SubProtocolSpec],targetType:[2,h.TYPES.ENUM,e],targetUsername:[3,h.TYPES.STRING],targetId:[4,h.TYPES.STRING],targetExpiringAtSec:[5,h.TYPES.INT64],xmaLayoutType:[6,h.TYPES.ENUM,c],ctas:[7,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i],previews:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.SubProtocolSpec],titleText:[9,h.TYPES.STRING],subtitleText:[10,h.TYPES.STRING],maxTitleNumOfLines:[11,h.TYPES.UINT32],maxSubtitleNumOfLines:[12,h.TYPES.UINT32],favicon:[13,h.TYPES.MESSAGE,d.SubProtocolSpec],headerImage:[14,h.TYPES.MESSAGE,d.SubProtocolSpec],headerTitle:[15,h.TYPES.STRING],overlayIconGlyph:[16,h.TYPES.ENUM,a],overlayTitle:[17,h.TYPES.STRING],overlayDescription:[18,h.TYPES.STRING],sentWithMessageId:[19,h.TYPES.STRING],messageText:[20,h.TYPES.STRING],headerSubtitle:[21,h.TYPES.STRING],xmaDataclass:[22,h.TYPES.STRING],contentRef:[23,h.TYPES.STRING]};i.internalSpec={buttonType:[1,h.TYPES.ENUM,b],title:[2,h.TYPES.STRING],actionUrl:[3,h.TYPES.STRING],nativeUrl:[4,h.TYPES.STRING],ctaType:[5,h.TYPES.STRING],actionContentBlob:[6,h.TYPES.STRING]};g.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH=a;g.EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE=b;g.EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE=c;g.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE=e;g.ExtendedContentMessageSpec=f;g.ExtendedContentMessage$CTASpec=i}),98);\n__d(\"WAHashStringToNumber\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return Math.abs(b)}f.hashStringToNumber=a}),66);\/*FB_PKG_DELIM*\/\n__d(\"WAResultOrError\",[\"Promise\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f){\"use strict\";var g;function h(a,b){if(b!=null)return{success:!1,error:a,payload:b};else return{success:!1,error:a}}function i(a){return{success:!0,value:a}}function a(a,b){return!a.success?a:i(b(a.value))}function c(a,c){var d;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b(\"regeneratorRuntime\").awrap(a);case 2:d=e.sent;if(d.success){e.next=5;break}return e.abrupt(\"return\",d);case 5:return e.abrupt(\"return\",i(c(d.value)));case 6:case\"end\":return e.stop()}},null,this)}function j(a,c){var d;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:if(a.success){e.next=2;break}return e.abrupt(\"return\",a);case 2:e.next=4;return b(\"regeneratorRuntime\").awrap(c(a.value));case 4:d=e.sent;return e.abrupt(\"return\",i(d));case 6:case\"end\":return e.stop()}},null,this)}function d(a,b){return a.success?i(a.value):h(b(a.error),a.payload)}function k(a,c){var d;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.success){e.next=2;break}return e.abrupt(\"return\",i(a.value));case 2:e.next=4;return b(\"regeneratorRuntime\").awrap(c(a.error));case 4:d=e.sent;return e.abrupt(\"return\",h(d,a.payload));case 6:case\"end\":return e.stop()}},null,this)}function e(a,b){return a.success?b(a.value):a}function l(a,c){return a.success?c(a.value):(g||(g=b(\"Promise\"))).resolve(a)}function m(a){return function(b){return j(b,a)}}function n(a){return function(c){return b(\"regeneratorRuntime\").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b(\"regeneratorRuntime\").awrap(k(c,a));case 2:case\"end\":return d.stop()}},null,this)}}f.makeError=h;f.makeResult=i;f.mapResult=a;f.mapAsyncResult=c;f.asyncMapResult=j;f.mapError=d;f.asyncMapError=k;f.chain=e;f.asyncChain=l;f.onResult=m;f.catchError=n}),66);\n__d(\"LocalStorageWrapper\",[\"CurrentMessengerUser\",\"WAResultOrError\",\"isQuotaExceededError\",\"requireDeferred\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=c(\"requireDeferred\")(\"PersistedQueue\").__setRef(\"LocalStorageWrapper\");function i(a){var b=null;try{b=window.localStorage;if(b!=null&&typeof b.setItem===\"function\"&&typeof b.removeItem===\"function\"){var c=\"__test__\"+Date.now();b.setItem(c,\"\");b.removeItem(c)}else return null}catch(c){if(d(\"isQuotaExceededError\").isStorageQuotaExceededError(b,c)===!1){a(\"Failed to get localstorage\");return null}}return b}function a(a){try{a=i(a);return a!=null}catch(a){return!1}}function j(a){try{var b=0,c={};for(var d in a){if(!Object.prototype.hasOwnProperty.call(a,d))continue;var e=(a[d].length+d.length)*2;b+=e;e\/1024>1e3&&(c[d.substr(0,50)]=(e\/1024).toFixed(2))}c.total=(b\/1024).toFixed(2);return JSON.stringify(c)}catch(a){return\"Can't calculate localStorage\"}}function b(a,b,c,e,f){if(a==null)return d(\"WAResultOrError\").makeError(\"null-storage\");try{f!==void 0?k(a,b,c,f):a.setItem(b,c)}catch(f){if(d(\"CurrentMessengerUser\").isEmployee()){var g=j(a);h.onReady(function(a){a=a.isQueueActivateExperiment().toString();e(f+\" - Storage quota exceeded while setting \"+b+\":\"+c+\", queueActivateExp:\"+a+\" \"+g)})}else e(f+\" - Storage quota exceeded while setting \"+b+\":\"+c);return d(\"WAResultOrError\").makeError(\"quota-exceeded\")}return d(\"WAResultOrError\").makeResult()}function k(a,b,c,d){try{a.setItem(b,c)}catch(e){d(e),a.setItem(b,c)}}function e(a,b,c){a==null?c(\"not storage found\"):a.removeItem(b)}function f(a,b,c){if(a==null){c(\"not storage found\");return null}else return a.getItem(b)}g.getStorage=i;g.isLocalStorageAvailable=a;g.setItemGuarded=b;g.removeItemGuarded=e;g.getItemGuarded=f}),98);\n__d(\"MWBroadcastChannelPolyfill\",[\"FBLogger\",\"LocalStorageWrapper\",\"MessengerLogHistory\",\"Random\",\"recoverableViolation\",\"setTimeout\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=d(\"MessengerLogHistory\").getInstance(\"client_init\");function a(a){h.debug(\"[MWBroadcastChannelPolyfill] \"+a)}function i(a){c(\"FBLogger\")(\"messenger_browser_clients\").mustfix(a)}var j={},k=d(\"LocalStorageWrapper\").getStorage(a);function b(a){var b=\"$BroadcastChannel$\"+a+\"$\",e=!1,f=function(a){if(a.storageArea!==k)return;var c=a.newValue;if(c==null||c===\"\")return;if(((a=a.key)==null?void 0:a.substring(0,b.length))!==b)return;var d=JSON.parse(c);(a=j[b])==null?void 0:a.forEach(function(a){a({data:d})})};window.addEventListener(\"storage\",f);return{addEventListener:function(a,c){j[b]=j[b]||new Set(),j[b].add(c)},close:function(){if(e)return;e=!0;j={};window.removeEventListener(\"storage\",f)},postMessage:function(a){if(e){c(\"recoverableViolation\")(\"Broadcast channel is closed\",\"messenger_web_product\");return}a=JSON.stringify(a);var f=b+String(Date.now())+\"$\"+String(c(\"Random\").uint32());d(\"LocalStorageWrapper\").setItemGuarded(k,f,a,i);c(\"setTimeout\")(function(){d(\"LocalStorageWrapper\").removeItemGuarded(k,f,i)},500)},removeEventListener:function(a,c){(a=j[b])==null?void 0:a[\"delete\"](c)}}}g[\"default\"]=b}),98);\n__d(\"LSRequestId\",[\"uuidv4\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"0123456789abcdef\",i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/\";function a(){var a=c(\"uuidv4\")().replace(\/[^0-9a-f]\/gi,\"\"),b=0,d=[\"#\"];while(b<33){var e=h.indexOf(a.charAt(b))<<8,f=h.indexOf(a.charAt(b+1))<<4,g=h.indexOf(a.charAt(b+2));g=g|(f|e);f=g>>6;d.push(i.charAt(f));d.push(i.charAt(g&63));b+=3}return d.join(\"\")}b={generate:a};g[\"default\"]=b}),98);\n__d(\"MWBroadcastChannel\",[\"MWBroadcastChannelPolyfill\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return self.BroadcastChannel!=null?new self.BroadcastChannel(a):c(\"MWBroadcastChannelPolyfill\")(a)}g.MWBroadcastChannel=a}),98);\n__d(\"XPlatReactEventEmitter\",[\"BaseEventEmitter\"],(function(a,b,c,d,e,f,g){\"use strict\";g[\"default\"]=c(\"BaseEventEmitter\")}),98);\n__d(\"LSPlatformErrorChannel\",[\"XPlatReactEventEmitter\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"onLSError\",i=new(c(\"XPlatReactEventEmitter\"))(),j;function a(a){j=a,i.emit(h,a)}function b(a){var b=i.addListener(h,a);return function(){return b.remove()}}function d(){return j}function e(){i.removeAllListeners(h),j=null}f={TEST_ONLY_clear:e,emit:a,lastError:d,subscribe:b};g[\"default\"]=f}),98);\n__d(\"BroadcastChannelClientServerHandshake\",[\"FBLogger\",\"Promise\",\"Random\",\"setTimeout\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){a.addEventListener(\"message\",function(b){var c;((c=b.data)==null?void 0:c.type)===\"BroadcastChannelHandshake-syn\"&&a.postMessage({nonce:b.data.nonce,type:\"BroadcastChannelHandshake-syn-ack\"})})}function e(a,e){var f=d(\"Random\").random(),g=0;return new(h||(h=b(\"Promise\")))(function(b,d){var h=!1,i=function b(){if(g===6){h=!0;a.removeEventListener(\"message\",j);try{throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"BC handshake failed, failing, likely worker failure%s\",e!=null?\" for\"+e:\"\")}catch(a){d(a)}return}if(h)return;a.postMessage({nonce:f,type:\"BroadcastChannelHandshake-syn\"});c(\"setTimeout\")(b,100*Math.pow(2,g++))},j=function c(d){var e;((e=d.data)==null?void 0:e.type)===\"BroadcastChannelHandshake-syn-ack\"&&((e=d.data)==null?void 0:e.nonce)===f&&(b(),h=!0,a.removeEventListener(\"message\",c))};a.addEventListener(\"message\",j);i()})}g.listen=a;g.checkAlive=e}),98);\n__d(\"CometTaskFrameworkTypes\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\").Mirrored([\"BACKGROUND\",\"CURRENT_THREAD\",\"LS_WORKER\",\"MAW_WORKER\",\"TEST\"]);c=\"comet_task_framework\";f.ExecutionContext=a;f.TASK_FRAMEWORK_PREFIX=c}),66);\n__d(\"getBroadcastChannelForExecutionContext\",[\"CometTaskFrameworkTypes\",\"MWBroadcastChannel\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return d(\"MWBroadcastChannel\").MWBroadcastChannel(d(\"CometTaskFrameworkTypes\").TASK_FRAMEWORK_PREFIX+\"_\"+String(a))}g[\"default\"]=a}),98);\n__d(\"CometTaskHandlers\",[\"JSResourceForInteraction\"],(function(a,b,c,d,e,f,g){\"use strict\";b={29:(a=c(\"JSResourceForInteraction\"))(\"IGDSendRemoveReactionTaskHandler\").__setRef(\"CometTaskHandlers\"),33:a(\"IGDUnsendTaskHandler\").__setRef(\"CometTaskHandlers\"),46:a(\"IGDSendMessageTaskHandler\").__setRef(\"CometTaskHandlers\"),add:a(\"AddTaskHandler\").__setRef(\"CometTaskHandlers\"),get_messenger_db_dump_attachments_for_bug_reporting:a(\"GetMessengerDBDumpAttachments\").__setRef(\"CometTaskHandlers\"),igd_send_media_message:a(\"IGDSendMediaMessageTaskHandler\").__setRef(\"CometTaskHandlers\"),igd_send_xma_receiver_fetch:a(\"IGDSendXmaReceiverFetchTaskHandler\").__setRef(\"CometTaskHandlers\"),maw_get_devices:a(\"MAWGetDevicesTaskHandler\").__setRef(\"CometTaskHandlers\"),preload_messenger_db_dump_attachments_for_bug_reporting:a(\"PreloadDBDumpAttachments\").__setRef(\"CometTaskHandlers\"),test:a(\"TestNativeTaskHandler\").__setRef(\"CometTaskHandlers\"),zenon_send_chatd_mws_message:a(\"MAWZenonSendMultiwayMsgChatdTaskHandler\").__setRef(\"CometTaskHandlers\")};g.TASK_HANDLERS_RESOURCES=b}),98);\n__d(\"loadTaskHandlerResource\",[\"CometTaskHandlers\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return h.apply(this,arguments)}function h(){h=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=d(\"CometTaskHandlers\").TASK_HANDLERS_RESOURCES[a];return a==null?null:a.getModuleIfRequired()||a.load()});return h.apply(this,arguments)}g[\"default\"]=a}),98);\n__d(\"executeTask.xplat\",[\"BroadcastChannelClientServerHandshake\",\"CometTaskFrameworkTypes\",\"FBLogger\",\"Promise\",\"asyncToGeneratorRuntime\",\"err\",\"getBroadcastChannelForExecutionContext\",\"loadTaskHandlerResource\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,e,f){var g,i=(yield c(\"loadTaskHandlerResource\")(f));if(i==null)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"No task handler found for %s\",f);var j=(g=e.executionContext)!=null?g:i.executionContext;return j===d(\"CometTaskFrameworkTypes\").ExecutionContext.CURRENT_THREAD||j==null?i.handleTask(a,e):new(h||(h=b(\"Promise\")))(function(){var g=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(b,g){var h=c(\"getBroadcastChannelForExecutionContext\")(j);yield d(\"BroadcastChannelClientServerHandshake\").checkAlive(h);var i={context:e,name:f,payload:a,type:\"execute_task\"};h.postMessage(i);function k(a){var d;if((a==null?void 0:(d=a.data)==null?void 0:(d=d.context)==null?void 0:d.taskID)!==e.taskID)return;switch(a.data.type){case\"task_success\":b(a.data.result);h.close();h.removeEventListener(\"message\",k);break;case\"task_failure\":g(c(\"err\")(\"Task Execution Failed for: \"+e.taskID+\", \"+f));h.close();h.removeEventListener(\"message\",k);break;default:}}h.addEventListener(\"message\",k)});return function(a,b){return g.apply(this,arguments)}}())});return i.apply(this,arguments)}g[\"default\"]=a}),98);\n\/**\n * License: https:\/\/www.facebook.com\/legal\/license\/OKBVmODmb-W\/\n *\/\n__d(\"tweetnacl-1.0.3\",[],(function(a,b,c,d,e,f){\"use strict\";b={};var g={exports:b};function h(){(function(a){var b=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},c=function(){throw new Error(\"no PRNG\")},d=new Uint8Array(16),e=new Uint8Array(32);e[0]=9;var f=b(),g=b([1]),h=b([56129,1]),i=b([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),j=b([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),k=b([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=b([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=b([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function n(a,b,c,d){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=c&255,a[b+4]=d>>24&255,a[b+5]=d>>16&255,a[b+6]=d>>8&255,a[b+7]=d&255}function o(a,b,c,d,e){var f,g=0;for(f=0;f<e;f++)g|=a[b+f]^c[d+f];return(1&g-1>>>8)-1}function p(a,b,c,d){return o(a,b,c,d,16)}function q(a,b,c,d){return o(a,b,c,d,32)}function r(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;var r=e,s=f,t=g,u=h,v=i,w=j,x=k,y=l,z=m,A=b,B=n,C=o,D=p,E=q,F=c,G=d,H;for(var I=0;I<20;I+=2)H=r+D|0,v^=H<<7|H>>>32-7,H=v+r|0,z^=H<<9|H>>>32-9,H=z+v|0,D^=H<<13|H>>>32-13,H=D+z|0,r^=H<<18|H>>>32-18,H=w+s|0,A^=H<<7|H>>>32-7,H=A+w|0,E^=H<<9|H>>>32-9,H=E+A|0,s^=H<<13|H>>>32-13,H=s+E|0,w^=H<<18|H>>>32-18,H=B+x|0,F^=H<<7|H>>>32-7,H=F+B|0,t^=H<<9|H>>>32-9,H=t+F|0,x^=H<<13|H>>>32-13,H=x+t|0,B^=H<<18|H>>>32-18,H=G+C|0,u^=H<<7|H>>>32-7,H=u+G|0,y^=H<<9|H>>>32-9,H=y+u|0,C^=H<<13|H>>>32-13,H=C+y|0,G^=H<<18|H>>>32-18,H=r+u|0,s^=H<<7|H>>>32-7,H=s+r|0,t^=H<<9|H>>>32-9,H=t+s|0,u^=H<<13|H>>>32-13,H=u+t|0,r^=H<<18|H>>>32-18,H=w+v|0,x^=H<<7|H>>>32-7,H=x+w|0,y^=H<<9|H>>>32-9,H=y+x|0,v^=H<<13|H>>>32-13,H=v+y|0,w^=H<<18|H>>>32-18,H=B+A|0,C^=H<<7|H>>>32-7,H=C+B|0,z^=H<<9|H>>>32-9,H=z+C|0,A^=H<<13|H>>>32-13,H=A+z|0,B^=H<<18|H>>>32-18,H=G+F|0,D^=H<<7|H>>>32-7,H=D+G|0,E^=H<<9|H>>>32-9,H=E+D|0,F^=H<<13|H>>>32-13,H=F+E|0,G^=H<<18|H>>>32-18;r=r+e|0;s=s+f|0;t=t+g|0;u=u+h|0;v=v+i|0;w=w+j|0;x=x+k|0;y=y+l|0;z=z+m|0;A=A+b|0;B=B+n|0;C=C+o|0;D=D+p|0;E=E+q|0;F=F+c|0;G=G+d|0;a[0]=r>>>0&255;a[1]=r>>>8&255;a[2]=r>>>16&255;a[3]=r>>>24&255;a[4]=s>>>0&255;a[5]=s>>>8&255;a[6]=s>>>16&255;a[7]=s>>>24&255;a[8]=t>>>0&255;a[9]=t>>>8&255;a[10]=t>>>16&255;a[11]=t>>>24&255;a[12]=u>>>0&255;a[13]=u>>>8&255;a[14]=u>>>16&255;a[15]=u>>>24&255;a[16]=v>>>0&255;a[17]=v>>>8&255;a[18]=v>>>16&255;a[19]=v>>>24&255;a[20]=w>>>0&255;a[21]=w>>>8&255;a[22]=w>>>16&255;a[23]=w>>>24&255;a[24]=x>>>0&255;a[25]=x>>>8&255;a[26]=x>>>16&255;a[27]=x>>>24&255;a[28]=y>>>0&255;a[29]=y>>>8&255;a[30]=y>>>16&255;a[31]=y>>>24&255;a[32]=z>>>0&255;a[33]=z>>>8&255;a[34]=z>>>16&255;a[35]=z>>>24&255;a[36]=A>>>0&255;a[37]=A>>>8&255;a[38]=A>>>16&255;a[39]=A>>>24&255;a[40]=B>>>0&255;a[41]=B>>>8&255;a[42]=B>>>16&255;a[43]=B>>>24&255;a[44]=C>>>0&255;a[45]=C>>>8&255;a[46]=C>>>16&255;a[47]=C>>>24&255;a[48]=D>>>0&255;a[49]=D>>>8&255;a[50]=D>>>16&255;a[51]=D>>>24&255;a[52]=E>>>0&255;a[53]=E>>>8&255;a[54]=E>>>16&255;a[55]=E>>>24&255;a[56]=F>>>0&255;a[57]=F>>>8&255;a[58]=F>>>16&255;a[59]=F>>>24&255;a[60]=G>>>0&255;a[61]=G>>>8&255;a[62]=G>>>16&255;a[63]=G>>>24&255}function s(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;e=e;f=f;g=g;h=h;i=i;j=j;k=k;l=l;m=m;b=b;n=n;o=o;p=p;q=q;c=c;d=d;var r;for(var s=0;s<20;s+=2)r=e+p|0,i^=r<<7|r>>>32-7,r=i+e|0,m^=r<<9|r>>>32-9,r=m+i|0,p^=r<<13|r>>>32-13,r=p+m|0,e^=r<<18|r>>>32-18,r=j+f|0,b^=r<<7|r>>>32-7,r=b+j|0,q^=r<<9|r>>>32-9,r=q+b|0,f^=r<<13|r>>>32-13,r=f+q|0,j^=r<<18|r>>>32-18,r=n+k|0,c^=r<<7|r>>>32-7,r=c+n|0,g^=r<<9|r>>>32-9,r=g+c|0,k^=r<<13|r>>>32-13,r=k+g|0,n^=r<<18|r>>>32-18,r=d+o|0,h^=r<<7|r>>>32-7,r=h+d|0,l^=r<<9|r>>>32-9,r=l+h|0,o^=r<<13|r>>>32-13,r=o+l|0,d^=r<<18|r>>>32-18,r=e+h|0,f^=r<<7|r>>>32-7,r=f+e|0,g^=r<<9|r>>>32-9,r=g+f|0,h^=r<<13|r>>>32-13,r=h+g|0,e^=r<<18|r>>>32-18,r=j+i|0,k^=r<<7|r>>>32-7,r=k+j|0,l^=r<<9|r>>>32-9,r=l+k|0,i^=r<<13|r>>>32-13,r=i+l|0,j^=r<<18|r>>>32-18,r=n+b|0,o^=r<<7|r>>>32-7,r=o+n|0,m^=r<<9|r>>>32-9,r=m+o|0,b^=r<<13|r>>>32-13,r=b+m|0,n^=r<<18|r>>>32-18,r=d+c|0,p^=r<<7|r>>>32-7,r=p+d|0,q^=r<<9|r>>>32-9,r=q+p|0,c^=r<<13|r>>>32-13,r=c+q|0,d^=r<<18|r>>>32-18;a[0]=e>>>0&255;a[1]=e>>>8&255;a[2]=e>>>16&255;a[3]=e>>>24&255;a[4]=j>>>0&255;a[5]=j>>>8&255;a[6]=j>>>16&255;a[7]=j>>>24&255;a[8]=n>>>0&255;a[9]=n>>>8&255;a[10]=n>>>16&255;a[11]=n>>>24&255;a[12]=d>>>0&255;a[13]=d>>>8&255;a[14]=d>>>16&255;a[15]=d>>>24&255;a[16]=k>>>0&255;a[17]=k>>>8&255;a[18]=k>>>16&255;a[19]=k>>>24&255;a[20]=l>>>0&255;a[21]=l>>>8&255;a[22]=l>>>16&255;a[23]=l>>>24&255;a[24]=m>>>0&255;a[25]=m>>>8&255;a[26]=m>>>16&255;a[27]=m>>>24&255;a[28]=b>>>0&255;a[29]=b>>>8&255;a[30]=b>>>16&255;a[31]=b>>>24&255}function t(a,b,c,d){r(a,b,c,d)}function u(a,b,c,d){s(a,b,c,d)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(a,b,c,d,e,f,g){var h=new Uint8Array(16),i=new Uint8Array(64),j;for(j=0;j<16;j++)h[j]=0;for(j=0;j<8;j++)h[j]=f[j];while(e>=64){t(i,h,g,v);for(j=0;j<64;j++)a[b+j]=c[d+j]^i[j];f=1;for(j=8;j<16;j++)f=f+(h[j]&255)|0,h[j]=f&255,f>>>=8;e-=64;b+=64;d+=64}if(e>0){t(i,h,g,v);for(j=0;j<e;j++)a[b+j]=c[d+j]^i[j]}return 0}function x(a,b,c,d,e){var f=new Uint8Array(16),g=new Uint8Array(64),h;for(h=0;h<16;h++)f[h]=0;for(h=0;h<8;h++)f[h]=d[h];while(c>=64){t(g,f,e,v);for(h=0;h<64;h++)a[b+h]=g[h];d=1;for(h=8;h<16;h++)d=d+(f[h]&255)|0,f[h]=d&255,d>>>=8;c-=64;b+=64}if(c>0){t(g,f,e,v);for(h=0;h<c;h++)a[b+h]=g[h]}return 0}function y(a,b,c,d,e){var f=new Uint8Array(32);u(f,d,e,v);e=new Uint8Array(8);for(var g=0;g<8;g++)e[g]=d[g+16];return x(a,b,c,e,f)}function z(a,b,c,d,e,f,g){var h=new Uint8Array(32);u(h,f,g,v);g=new Uint8Array(8);for(var i=0;i<8;i++)g[i]=f[i+16];return w(a,b,c,d,e,g,h)}var A=function(a){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var b,c;b=a[0]&255|(a[1]&255)<<8;this.r[0]=b&8191;c=a[2]&255|(a[3]&255)<<8;this.r[1]=(b>>>13|c<<3)&8191;b=a[4]&255|(a[5]&255)<<8;this.r[2]=(c>>>10|b<<6)&7939;c=a[6]&255|(a[7]&255)<<8;this.r[3]=(b>>>7|c<<9)&8191;b=a[8]&255|(a[9]&255)<<8;this.r[4]=(c>>>4|b<<12)&255;this.r[5]=b>>>1&8190;c=a[10]&255|(a[11]&255)<<8;this.r[6]=(b>>>14|c<<2)&8191;b=a[12]&255|(a[13]&255)<<8;this.r[7]=(c>>>11|b<<5)&8065;c=a[14]&255|(a[15]&255)<<8;this.r[8]=(b>>>8|c<<8)&8191;this.r[9]=c>>>5&127;this.pad[0]=a[16]&255|(a[17]&255)<<8;this.pad[1]=a[18]&255|(a[19]&255)<<8;this.pad[2]=a[20]&255|(a[21]&255)<<8;this.pad[3]=a[22]&255|(a[23]&255)<<8;this.pad[4]=a[24]&255|(a[25]&255)<<8;this.pad[5]=a[26]&255|(a[27]&255)<<8;this.pad[6]=a[28]&255|(a[29]&255)<<8;this.pad[7]=a[30]&255|(a[31]&255)<<8};A.prototype.blocks=function(a,b,c){var d=this.fin?0:1<<11,e,f,g,h,i,j,k,l,m,n,o,p=this.h[0],q=this.h[1],r=this.h[2],s=this.h[3],t=this.h[4],u=this.h[5],v=this.h[6],w=this.h[7],x=this.h[8],y=this.h[9],z=this.r[0],A=this.r[1],B=this.r[2],C=this.r[3],D=this.r[4],E=this.r[5],F=this.r[6],G=this.r[7],H=this.r[8],I=this.r[9];while(c>=16)e=a[b+0]&255|(a[b+1]&255)<<8,p+=e&8191,f=a[b+2]&255|(a[b+3]&255)<<8,q+=(e>>>13|f<<3)&8191,e=a[b+4]&255|(a[b+5]&255)<<8,r+=(f>>>10|e<<6)&8191,f=a[b+6]&255|(a[b+7]&255)<<8,s+=(e>>>7|f<<9)&8191,e=a[b+8]&255|(a[b+9]&255)<<8,t+=(f>>>4|e<<12)&8191,u+=e>>>1&8191,f=a[b+10]&255|(a[b+11]&255)<<8,v+=(e>>>14|f<<2)&8191,e=a[b+12]&255|(a[b+13]&255)<<8,w+=(f>>>11|e<<5)&8191,f=a[b+14]&255|(a[b+15]&255)<<8,x+=(e>>>8|f<<8)&8191,y+=f>>>5|d,e=0,f=e,f+=p*z,f+=q*(5*I),f+=r*(5*H),f+=s*(5*G),f+=t*(5*F),e=f>>>13,f&=8191,f+=u*(5*E),f+=v*(5*D),f+=w*(5*C),f+=x*(5*B),f+=y*(5*A),e+=f>>>13,f&=8191,g=e,g+=p*A,g+=q*z,g+=r*(5*I),g+=s*(5*H),g+=t*(5*G),e=g>>>13,g&=8191,g+=u*(5*F),g+=v*(5*E),g+=w*(5*D),g+=x*(5*C),g+=y*(5*B),e+=g>>>13,g&=8191,h=e,h+=p*B,h+=q*A,h+=r*z,h+=s*(5*I),h+=t*(5*H),e=h>>>13,h&=8191,h+=u*(5*G),h+=v*(5*F),h+=w*(5*E),h+=x*(5*D),h+=y*(5*C),e+=h>>>13,h&=8191,i=e,i+=p*C,i+=q*B,i+=r*A,i+=s*z,i+=t*(5*I),e=i>>>13,i&=8191,i+=u*(5*H),i+=v*(5*G),i+=w*(5*F),i+=x*(5*E),i+=y*(5*D),e+=i>>>13,i&=8191,j=e,j+=p*D,j+=q*C,j+=r*B,j+=s*A,j+=t*z,e=j>>>13,j&=8191,j+=u*(5*I),j+=v*(5*H),j+=w*(5*G),j+=x*(5*F),j+=y*(5*E),e+=j>>>13,j&=8191,k=e,k+=p*E,k+=q*D,k+=r*C,k+=s*B,k+=t*A,e=k>>>13,k&=8191,k+=u*z,k+=v*(5*I),k+=w*(5*H),k+=x*(5*G),k+=y*(5*F),e+=k>>>13,k&=8191,l=e,l+=p*F,l+=q*E,l+=r*D,l+=s*C,l+=t*B,e=l>>>13,l&=8191,l+=u*A,l+=v*z,l+=w*(5*I),l+=x*(5*H),l+=y*(5*G),e+=l>>>13,l&=8191,m=e,m+=p*G,m+=q*F,m+=r*E,m+=s*D,m+=t*C,e=m>>>13,m&=8191,m+=u*B,m+=v*A,m+=w*z,m+=x*(5*I),m+=y*(5*H),e+=m>>>13,m&=8191,n=e,n+=p*H,n+=q*G,n+=r*F,n+=s*E,n+=t*D,e=n>>>13,n&=8191,n+=u*C,n+=v*B,n+=w*A,n+=x*z,n+=y*(5*I),e+=n>>>13,n&=8191,o=e,o+=p*I,o+=q*H,o+=r*G,o+=s*F,o+=t*E,e=o>>>13,o&=8191,o+=u*D,o+=v*C,o+=w*B,o+=x*A,o+=y*z,e+=o>>>13,o&=8191,e=(e<<2)+e|0,e=e+f|0,f=e&8191,e=e>>>13,g+=e,p=f,q=g,r=h,s=i,t=j,u=k,v=l,w=m,x=n,y=o,b+=16,c-=16;this.h[0]=p;this.h[1]=q;this.h[2]=r;this.h[3]=s;this.h[4]=t;this.h[5]=u;this.h[6]=v;this.h[7]=w;this.h[8]=x;this.h[9]=y};A.prototype.finish=function(a,b){var c=new Uint16Array(10),d,e;if(this.leftover){e=this.leftover;this.buffer[e++]=1;for(;e<16;e++)this.buffer[e]=0;this.fin=1;this.blocks(this.buffer,0,16)}d=this.h[1]>>>13;this.h[1]&=8191;for(e=2;e<10;e++)this.h[e]+=d,d=this.h[e]>>>13,this.h[e]&=8191;this.h[0]+=d*5;d=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=d;d=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=d;c[0]=this.h[0]+5;d=c[0]>>>13;c[0]&=8191;for(e=1;e<10;e++)c[e]=this.h[e]+d,d=c[e]>>>13,c[e]&=8191;c[9]-=1<<13;d=(d^1)-1;for(e=0;e<10;e++)c[e]&=d;d=~d;for(e=0;e<10;e++)this.h[e]=this.h[e]&d|c[e];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;c=this.h[0]+this.pad[0];this.h[0]=c&65535;for(e=1;e<8;e++)c=(this.h[e]+this.pad[e]|0)+(c>>>16)|0,this.h[e]=c&65535;a[b+0]=this.h[0]>>>0&255;a[b+1]=this.h[0]>>>8&255;a[b+2]=this.h[1]>>>0&255;a[b+3]=this.h[1]>>>8&255;a[b+4]=this.h[2]>>>0&255;a[b+5]=this.h[2]>>>8&255;a[b+6]=this.h[3]>>>0&255;a[b+7]=this.h[3]>>>8&255;a[b+8]=this.h[4]>>>0&255;a[b+9]=this.h[4]>>>8&255;a[b+10]=this.h[5]>>>0&255;a[b+11]=this.h[5]>>>8&255;a[b+12]=this.h[6]>>>0&255;a[b+13]=this.h[6]>>>8&255;a[b+14]=this.h[7]>>>0&255;a[b+15]=this.h[7]>>>8&255};A.prototype.update=function(a,b,c){var d,e;if(this.leftover){e=16-this.leftover;e>c&&(e=c);for(d=0;d<e;d++)this.buffer[this.leftover+d]=a[b+d];c-=e;b+=e;this.leftover+=e;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}c>=16&&(e=c-c%16,this.blocks(a,b,e),b+=e,c-=e);if(c){for(d=0;d<c;d++)this.buffer[this.leftover+d]=a[b+d];this.leftover+=c}};function B(a,b,c,d,e,f){f=new A(f);f.update(c,d,e);f.finish(a,b);return 0}function C(a,b,c,d,e,f){var g=new Uint8Array(16);B(g,0,c,d,e,f);return p(a,b,g,0)}function D(a,b,c,d,e){if(c<32)return-1;z(a,0,b,0,c,d,e);B(a,16,a,32,c-32,a);for(b=0;b<16;b++)a[b]=0;return 0}function E(a,b,c,d,e){var f=new Uint8Array(32);if(c<32)return-1;y(f,0,32,d,e);if(C(b,16,b,32,c-32,f)!==0)return-1;z(a,0,b,0,c,d,e);for(f=0;f<32;f++)a[f]=0;return 0}function F(a,b){var c;for(c=0;c<16;c++)a[c]=b[c]|0}function G(a){var b,c,d=1;for(b=0;b<16;b++)c=a[b]+d+65535,d=Math.floor(c\/65536),a[b]=c-d*65536;a[0]+=d-1+37*(d-1)}function H(a,b,c){var d;c=~(c-1);for(var e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function I(a,c){var d,e,f=b(),g=b();for(d=0;d<16;d++)g[d]=c[d];G(g);G(g);G(g);for(c=0;c<2;c++){f[0]=g[0]-65517;for(d=1;d<15;d++)f[d]=g[d]-65535-(f[d-1]>>16&1),f[d-1]&=65535;f[15]=g[15]-32767-(f[14]>>16&1);e=f[15]>>16&1;f[14]&=65535;H(g,f,1-e)}for(d=0;d<16;d++)a[2*d]=g[d]&255,a[2*d+1]=g[d]>>8}function J(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);I(c,a);I(d,b);return q(c,0,d,0)}function K(a){var b=new Uint8Array(32);I(b,a);return b[0]&1}function L(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function M(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]+c[d]}function N(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]-c[d]}function O(a,b,c){var d,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=c[0],K=c[1],L=c[2],M=c[3],N=c[4],O=c[5],P=c[6],Q=c[7],R=c[8],S=c[9],T=c[10],U=c[11],V=c[12],W=c[13],X=c[14];c=c[15];d=b[0];e+=d*J;f+=d*K;g+=d*L;h+=d*M;i+=d*N;j+=d*O;k+=d*P;l+=d*Q;m+=d*R;n+=d*S;o+=d*T;p+=d*U;q+=d*V;r+=d*W;s+=d*X;t+=d*c;d=b[1];f+=d*J;g+=d*K;h+=d*L;i+=d*M;j+=d*N;k+=d*O;l+=d*P;m+=d*Q;n+=d*R;o+=d*S;p+=d*T;q+=d*U;r+=d*V;s+=d*W;t+=d*X;u+=d*c;d=b[2];g+=d*J;h+=d*K;i+=d*L;j+=d*M;k+=d*N;l+=d*O;m+=d*P;n+=d*Q;o+=d*R;p+=d*S;q+=d*T;r+=d*U;s+=d*V;t+=d*W;u+=d*X;v+=d*c;d=b[3];h+=d*J;i+=d*K;j+=d*L;k+=d*M;l+=d*N;m+=d*O;n+=d*P;o+=d*Q;p+=d*R;q+=d*S;r+=d*T;s+=d*U;t+=d*V;u+=d*W;v+=d*X;w+=d*c;d=b[4];i+=d*J;j+=d*K;k+=d*L;l+=d*M;m+=d*N;n+=d*O;o+=d*P;p+=d*Q;q+=d*R;r+=d*S;s+=d*T;t+=d*U;u+=d*V;v+=d*W;w+=d*X;x+=d*c;d=b[5];j+=d*J;k+=d*K;l+=d*L;m+=d*M;n+=d*N;o+=d*O;p+=d*P;q+=d*Q;r+=d*R;s+=d*S;t+=d*T;u+=d*U;v+=d*V;w+=d*W;x+=d*X;y+=d*c;d=b[6];k+=d*J;l+=d*K;m+=d*L;n+=d*M;o+=d*N;p+=d*O;q+=d*P;r+=d*Q;s+=d*R;t+=d*S;u+=d*T;v+=d*U;w+=d*V;x+=d*W;y+=d*X;z+=d*c;d=b[7];l+=d*J;m+=d*K;n+=d*L;o+=d*M;p+=d*N;q+=d*O;r+=d*P;s+=d*Q;t+=d*R;u+=d*S;v+=d*T;w+=d*U;x+=d*V;y+=d*W;z+=d*X;A+=d*c;d=b[8];m+=d*J;n+=d*K;o+=d*L;p+=d*M;q+=d*N;r+=d*O;s+=d*P;t+=d*Q;u+=d*R;v+=d*S;w+=d*T;x+=d*U;y+=d*V;z+=d*W;A+=d*X;B+=d*c;d=b[9];n+=d*J;o+=d*K;p+=d*L;q+=d*M;r+=d*N;s+=d*O;t+=d*P;u+=d*Q;v+=d*R;w+=d*S;x+=d*T;y+=d*U;z+=d*V;A+=d*W;B+=d*X;C+=d*c;d=b[10];o+=d*J;p+=d*K;q+=d*L;r+=d*M;s+=d*N;t+=d*O;u+=d*P;v+=d*Q;w+=d*R;x+=d*S;y+=d*T;z+=d*U;A+=d*V;B+=d*W;C+=d*X;D+=d*c;d=b[11];p+=d*J;q+=d*K;r+=d*L;s+=d*M;t+=d*N;u+=d*O;v+=d*P;w+=d*Q;x+=d*R;y+=d*S;z+=d*T;A+=d*U;B+=d*V;C+=d*W;D+=d*X;E+=d*c;d=b[12];q+=d*J;r+=d*K;s+=d*L;t+=d*M;u+=d*N;v+=d*O;w+=d*P;x+=d*Q;y+=d*R;z+=d*S;A+=d*T;B+=d*U;C+=d*V;D+=d*W;E+=d*X;F+=d*c;d=b[13];r+=d*J;s+=d*K;t+=d*L;u+=d*M;v+=d*N;w+=d*O;x+=d*P;y+=d*Q;z+=d*R;A+=d*S;B+=d*T;C+=d*U;D+=d*V;E+=d*W;F+=d*X;G+=d*c;d=b[14];s+=d*J;t+=d*K;u+=d*L;v+=d*M;w+=d*N;x+=d*O;y+=d*P;z+=d*Q;A+=d*R;B+=d*S;C+=d*T;D+=d*U;E+=d*V;F+=d*W;G+=d*X;H+=d*c;d=b[15];t+=d*J;u+=d*K;v+=d*L;w+=d*M;x+=d*N;y+=d*O;z+=d*P;A+=d*Q;B+=d*R;C+=d*S;D+=d*T;E+=d*U;F+=d*V;G+=d*W;H+=d*X;I+=d*c;e+=38*u;f+=38*v;g+=38*w;h+=38*x;i+=38*y;j+=38*z;k+=38*A;l+=38*B;m+=38*C;n+=38*D;o+=38*E;p+=38*F;q+=38*G;r+=38*H;s+=38*I;b=1;d=e+b+65535;b=Math.floor(d\/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d\/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d\/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d\/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d\/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d\/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d\/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d\/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d\/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d\/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d\/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d\/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d\/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d\/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d\/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d\/65536);t=d-b*65536;e+=b-1+37*(b-1);b=1;d=e+b+65535;b=Math.floor(d\/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d\/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d\/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d\/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d\/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d\/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d\/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d\/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d\/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d\/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d\/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d\/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d\/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d\/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d\/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d\/65536);t=d-b*65536;e+=b-1+37*(b-1);a[0]=e;a[1]=f;a[2]=g;a[3]=h;a[4]=i;a[5]=j;a[6]=k;a[7]=l;a[8]=m;a[9]=n;a[10]=o;a[11]=p;a[12]=q;a[13]=r;a[14]=s;a[15]=t}function P(a,b){O(a,b,b)}function Q(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=253;e>=0;e--)P(d,d),e!==2&&e!==4&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function R(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=250;e>=0;e--)P(d,d),e!==1&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function S(a,c,d){var e=new Uint8Array(32),f=new Float64Array(80),g,i=b(),j=b(),k=b(),l=b(),m=b(),n=b();for(g=0;g<31;g++)e[g]=c[g];e[31]=c[31]&127|64;e[0]&=248;L(f,d);for(g=0;g<16;g++)j[g]=f[g],l[g]=i[g]=k[g]=0;i[0]=l[0]=1;for(g=254;g>=0;--g)c=e[g>>>3]>>>(g&7)&1,H(i,j,c),H(k,l,c),M(m,i,k),N(i,i,k),M(k,j,l),N(j,j,l),P(l,m),P(n,i),O(i,k,i),O(k,j,m),M(m,i,k),N(i,i,k),P(j,i),N(k,l,n),O(i,k,h),M(i,i,l),O(k,k,i),O(i,l,n),O(l,j,f),P(j,m),H(i,j,c),H(k,l,c);for(g=0;g<16;g++)f[g+16]=i[g],f[g+32]=k[g],f[g+48]=j[g],f[g+64]=l[g];d=f.subarray(32);c=f.subarray(16);Q(d,d);O(c,c,d);I(a,c);return 0}function T(a,b){return S(a,b,e)}function U(a,b){c(b,32);return T(a,b)}function V(a,b,c){var e=new Uint8Array(32);S(e,c,b);return u(a,d,e,v)}var W=D,X=E;function aa(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return W(a,b,c,d,g)}function ba(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return X(a,b,c,d,g)}var ca=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function da(a,b,c,d){var e=new Int32Array(16),f=new Int32Array(16),g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a[0],H=a[1],I=a[2],J=a[3],K=a[4],L=a[5],M=a[6],N=a[7],O=b[0],P=b[1],Q=b[2],R=b[3],S=b[4],T=b[5],U=b[6],V=b[7],W=0;while(d>=128){for(y=0;y<16;y++)z=8*y+W,e[y]=c[z+0]<<24|c[z+1]<<16|c[z+2]<<8|c[z+3],f[y]=c[z+4]<<24|c[z+5]<<16|c[z+6]<<8|c[z+7];for(y=0;y<80;y++){g=G;h=H;i=I;j=J;k=K;l=L;m=M;N;o=O;p=P;q=Q;r=R;s=S;t=T;u=U;V;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(K>>>14|S<<32-14)^(K>>>18|S<<32-18)^(S>>>41-32|K<<32-(41-32));B=(S>>>14|K<<32-14)^(S>>>18|K<<32-18)^(K>>>41-32|S<<32-(41-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=K&L^~K&M;B=S&T^~S&U;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=ca[y*2];B=ca[y*2+1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=e[y%16];B=f[y%16];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;w=E&65535|F<<16;x=C&65535|D<<16;A=w;B=x;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(G>>>28|O<<32-28)^(O>>>34-32|G<<32-(34-32))^(O>>>39-32|G<<32-(39-32));B=(O>>>28|G<<32-28)^(G>>>34-32|O<<32-(34-32))^(G>>>39-32|O<<32-(39-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=G&H^G&I^H&I;B=O&P^O&Q^P&Q;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;n=E&65535|F<<16;v=C&65535|D<<16;A=j;B=r;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=w;B=x;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;j=E&65535|F<<16;r=C&65535|D<<16;H=g;I=h;J=i;K=j;L=k;M=l;N=m;G=n;P=o;Q=p;R=q;S=r;T=s;U=t;V=u;O=v;if(y%16===15)for(z=0;z<16;z++)A=e[z],B=f[z],C=B&65535,D=B>>>16,E=A&65535,F=A>>>16,A=e[(z+9)%16],B=f[(z+9)%16],C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+1)%16],x=f[(z+1)%16],A=(w>>>1|x<<32-1)^(w>>>8|x<<32-8)^w>>>7,B=(x>>>1|w<<32-1)^(x>>>8|w<<32-8)^(x>>>7|w<<32-7),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+14)%16],x=f[(z+14)%16],A=(w>>>19|x<<32-19)^(x>>>61-32|w<<32-(61-32))^w>>>6,B=(x>>>19|w<<32-19)^(w>>>61-32|x<<32-(61-32))^(x>>>6|w<<32-6),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,D+=C>>>16,E+=D>>>16,F+=E>>>16,e[z]=E&65535|F<<16,f[z]=C&65535|D<<16}A=G;B=O;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[0];B=b[0];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[0]=G=E&65535|F<<16;b[0]=O=C&65535|D<<16;A=H;B=P;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[1];B=b[1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[1]=H=E&65535|F<<16;b[1]=P=C&65535|D<<16;A=I;B=Q;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[2];B=b[2];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[2]=I=E&65535|F<<16;b[2]=Q=C&65535|D<<16;A=J;B=R;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[3];B=b[3];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[3]=J=E&65535|F<<16;b[3]=R=C&65535|D<<16;A=K;B=S;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[4];B=b[4];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[4]=K=E&65535|F<<16;b[4]=S=C&65535|D<<16;A=L;B=T;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[5];B=b[5];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[5]=L=E&65535|F<<16;b[5]=T=C&65535|D<<16;A=M;B=U;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[6];B=b[6];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[6]=M=E&65535|F<<16;b[6]=U=C&65535|D<<16;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[7];B=b[7];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[7]=N=E&65535|F<<16;b[7]=V=C&65535|D<<16;W+=128;d-=128}return d}function Y(a,b,c){var d=new Int32Array(8),e=new Int32Array(8),f=new Uint8Array(256),g,h=c;d[0]=1779033703;d[1]=3144134277;d[2]=1013904242;d[3]=2773480762;d[4]=1359893119;d[5]=2600822924;d[6]=528734635;d[7]=1541459225;e[0]=4089235720;e[1]=2227873595;e[2]=4271175723;e[3]=1595750129;e[4]=2917565137;e[5]=725511199;e[6]=4215389547;e[7]=327033209;da(d,e,b,c);c%=128;for(g=0;g<c;g++)f[g]=b[h-c+g];f[c]=128;c=256-128*(c<112?1:0);f[c-9]=0;n(f,c-8,h\/536870912|0,h<<3);da(d,e,f,c);for(g=0;g<8;g++)n(a,8*g,d[g],e[g]);return 0}function ea(a,c){var d=b(),e=b(),f=b(),g=b(),h=b(),i=b(),k=b(),l=b(),m=b();N(d,a[1],a[0]);N(m,c[1],c[0]);O(d,d,m);M(e,a[0],a[1]);M(m,c[0],c[1]);O(e,e,m);O(f,a[3],c[3]);O(f,f,j);O(g,a[2],c[2]);M(g,g,g);N(h,e,d);N(i,g,f);M(k,g,f);M(l,e,d);O(a[0],h,i);O(a[1],l,k);O(a[2],k,i);O(a[3],h,l)}function fa(a,b,c){var d;for(d=0;d<4;d++)H(a[d],b[d],c)}function ga(a,c){var d=b(),e=b(),f=b();Q(f,c[2]);O(d,c[0],f);O(e,c[1],f);I(a,e);a[31]^=K(d)<<7}function ha(a,b,c){var d,e;F(a[0],f);F(a[1],g);F(a[2],g);F(a[3],f);for(e=255;e>=0;--e)d=c[e\/8|0]>>(e&7)&1,fa(a,b,d),ea(b,a),ea(a,a),fa(a,b,d)}function ia(a,c){var d=[b(),b(),b(),b()];F(d[0],k);F(d[1],l);F(d[2],g);O(d[3],k,l);ha(a,d,c)}function ja(a,d,e){var f=new Uint8Array(64),g=[b(),b(),b(),b()];e||c(d,32);Y(f,d,32);f[0]&=248;f[31]&=127;f[31]|=64;ia(g,f);ga(a,g);for(e=0;e<32;e++)d[e+32]=a[e];return 0}var ka=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function la(a,b){var c,d,e,f;for(d=63;d>=32;--d){c=0;for(e=d-32,f=d-12;e<f;++e)b[e]+=c-16*b[d]*ka[e-(d-32)],c=Math.floor((b[e]+128)\/256),b[e]-=c*256;b[e]+=c;b[d]=0}c=0;for(e=0;e<32;e++)b[e]+=c-(b[31]>>4)*ka[e],c=b[e]>>8,b[e]&=255;for(e=0;e<32;e++)b[e]-=c*ka[e];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,a[d]=b[d]&255}function ma(a){var b=new Float64Array(64),c;for(c=0;c<64;c++)b[c]=a[c];for(c=0;c<64;c++)a[c]=0;la(a,b)}function na(a,c,d,e){var f=new Uint8Array(64),g=new Uint8Array(64),h=new Uint8Array(64),i,j=new Float64Array(64),k=[b(),b(),b(),b()];Y(f,e,32);f[0]&=248;f[31]&=127;f[31]|=64;var l=d+64;for(i=0;i<d;i++)a[64+i]=c[i];for(i=0;i<32;i++)a[32+i]=f[32+i];Y(h,a.subarray(32),d+32);ma(h);ia(k,h);ga(a,k);for(i=32;i<64;i++)a[i]=e[i];Y(g,a,d+64);ma(g);for(i=0;i<64;i++)j[i]=0;for(i=0;i<32;i++)j[i]=h[i];for(i=0;i<32;i++)for(c=0;c<32;c++)j[i+c]+=g[i]*f[c];la(a.subarray(32),j);return l}function oa(a,c){var d=b(),e=b(),h=b(),j=b(),k=b(),l=b(),n=b();F(a[2],g);L(a[1],c);P(h,a[1]);O(j,h,i);N(h,h,a[2]);M(j,a[2],j);P(k,j);P(l,k);O(n,l,k);O(d,n,h);O(d,d,j);R(d,d);O(d,d,h);O(d,d,j);O(d,d,j);O(a[0],d,j);P(e,a[0]);O(e,e,j);J(e,h)&&O(a[0],a[0],m);P(e,a[0]);O(e,e,j);if(J(e,h))return-1;K(a[0])===c[31]>>7&&N(a[0],f,a[0]);O(a[3],a[0],a[1]);return 0}function pa(a,c,d,e){var f,g=new Uint8Array(32),h=new Uint8Array(64),i=[b(),b(),b(),b()],j=[b(),b(),b(),b()];if(d<64)return-1;if(oa(j,e))return-1;for(f=0;f<d;f++)a[f]=c[f];for(f=0;f<32;f++)a[f+32]=e[f];Y(h,a,d);ma(h);ha(i,j,h);ia(j,c.subarray(32));ea(i,j);ga(g,i);d-=64;if(q(c,0,g,0)){for(f=0;f<d;f++)a[f]=0;return-1}for(f=0;f<d;f++)a[f]=c[f+64];return d}var qa=32,ra=24,sa=32,ta=16,ua=32,va=32,wa=32,xa=32,ya=32,za=ra,Aa=sa,Ba=ta,Z=64,Ca=32,Da=64,Ea=32,Fa=64;a.lowlevel={crypto_core_hsalsa20:u,crypto_stream_xor:z,crypto_stream:y,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:B,crypto_onetimeauth_verify:C,crypto_verify_16:p,crypto_verify_32:q,crypto_secretbox:D,crypto_secretbox_open:E,crypto_scalarmult:S,crypto_scalarmult_base:T,crypto_box_beforenm:V,crypto_box_afternm:W,crypto_box:aa,crypto_box_open:ba,crypto_box_keypair:U,crypto_hash:Y,crypto_sign:na,crypto_sign_keypair:ja,crypto_sign_open:pa,crypto_secretbox_KEYBYTES:qa,crypto_secretbox_NONCEBYTES:ra,crypto_secretbox_ZEROBYTES:sa,crypto_secretbox_BOXZEROBYTES:ta,crypto_scalarmult_BYTES:ua,crypto_scalarmult_SCALARBYTES:va,crypto_box_PUBLICKEYBYTES:wa,crypto_box_SECRETKEYBYTES:xa,crypto_box_BEFORENMBYTES:ya,crypto_box_NONCEBYTES:za,crypto_box_ZEROBYTES:Aa,crypto_box_BOXZEROBYTES:Ba,crypto_sign_BYTES:Z,crypto_sign_PUBLICKEYBYTES:Ca,crypto_sign_SECRETKEYBYTES:Da,crypto_sign_SEEDBYTES:Ea,crypto_hash_BYTES:Fa,gf:b,D:i,L:ka,pack25519:I,unpack25519:L,M:O,A:M,S:P,Z:N,pow2523:R,add:ea,set25519:F,modL:la,scalarmult:ha,scalarbase:ia};function Ga(a,b){if(a.length!==qa)throw new Error(\"bad key size\");if(b.length!==ra)throw new Error(\"bad nonce size\")}function Ha(a,b){if(a.length!==wa)throw new Error(\"bad public key size\");if(b.length!==xa)throw new Error(\"bad secret key size\")}function $(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError(\"unexpected type, use Uint8Array\")}function Ia(a){for(var b=0;b<a.length;b++)a[b]=0}a.randomBytes=function(a){var b=new Uint8Array(a);c(b,a);return b};a.secretbox=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(sa+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+sa]=a[f];D(e,d,d.length,b,c);return e.subarray(ta)};a.secretbox.open=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(ta+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+ta]=a[f];if(d.length<32)return null;return E(e,d,d.length,b,c)!==0?null:e.subarray(sa)};a.secretbox.keyLength=qa;a.secretbox.nonceLength=ra;a.secretbox.overheadLength=ta;a.scalarMult=function(a,b){$(a,b);if(a.length!==va)throw new Error(\"bad n size\");if(b.length!==ua)throw new Error(\"bad p size\");var c=new Uint8Array(ua);S(c,a,b);return c};a.scalarMult.base=function(a){$(a);if(a.length!==va)throw new Error(\"bad n size\");var b=new Uint8Array(ua);T(b,a);return b};a.scalarMult.scalarLength=va;a.scalarMult.groupElementLength=ua;a.box=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox(b,c,d)};a.box.before=function(a,b){$(a,b);Ha(a,b);var c=new Uint8Array(ya);V(c,a,b);return c};a.box.after=a.secretbox;a.box.open=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox.open(b,c,d)};a.box.open.after=a.secretbox.open;a.box.keyPair=function(){var a=new Uint8Array(wa),b=new Uint8Array(xa);U(a,b);return{publicKey:a,secretKey:b}};a.box.keyPair.fromSecretKey=function(a){$(a);if(a.length!==xa)throw new Error(\"bad secret key size\");var b=new Uint8Array(wa);T(b,a);return{publicKey:b,secretKey:new Uint8Array(a)}};a.box.publicKeyLength=wa;a.box.secretKeyLength=xa;a.box.sharedKeyLength=ya;a.box.nonceLength=za;a.box.overheadLength=a.secretbox.overheadLength;a.sign=function(a,b){$(a,b);if(b.length!==Da)throw new Error(\"bad secret key size\");var c=new Uint8Array(Z+a.length);na(c,a,a.length,b);return c};a.sign.open=function(a,b){$(a,b);if(b.length!==Ca)throw new Error(\"bad public key size\");var c=new Uint8Array(a.length);a=pa(c,a,a.length,b);if(a<0)return null;b=new Uint8Array(a);for(a=0;a<b.length;a++)b[a]=c[a];return b};a.sign.detached=function(b,c){b=a.sign(b,c);c=new Uint8Array(Z);for(var d=0;d<c.length;d++)c[d]=b[d];return c};a.sign.detached.verify=function(a,b,c){$(a,b,c);if(b.length!==Z)throw new Error(\"bad signature size\");if(c.length!==Ca)throw new Error(\"bad public key size\");var d=new Uint8Array(Z+a.length),e=new Uint8Array(Z+a.length),f;for(f=0;f<Z;f++)d[f]=b[f];for(f=0;f<a.length;f++)d[f+Z]=a[f];return pa(e,d,d.length,c)>=0};a.sign.keyPair=function(){var a=new Uint8Array(Ca),b=new Uint8Array(Da);ja(a,b);return{publicKey:a,secretKey:b}};a.sign.keyPair.fromSecretKey=function(a){$(a);if(a.length!==Da)throw new Error(\"bad secret key size\");var b=new Uint8Array(Ca);for(var c=0;c<b.length;c++)b[c]=a[32+c];return{publicKey:b,secretKey:new Uint8Array(a)}};a.sign.keyPair.fromSeed=function(a){$(a);if(a.length!==Ea)throw new Error(\"bad seed size\");var b=new Uint8Array(Ca),c=new Uint8Array(Da);for(var d=0;d<32;d++)c[d]=a[d];ja(b,c,!0);return{publicKey:b,secretKey:c}};a.sign.publicKeyLength=Ca;a.sign.secretKeyLength=Da;a.sign.seedLength=Ea;a.sign.signatureLength=Z;a.hash=function(a){$(a);var b=new Uint8Array(Fa);Y(b,a,a.length);return b};a.hash.hashLength=Fa;a.verify=function(a,b){$(a,b);if(a.length===0||b.length===0)return!1;return a.length!==b.length?!1:o(a,0,b,0,a.length)===0?!0:!1};a.setPRNG=function(a){c=a};(function(){var b=typeof self!==\"undefined\"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var c=65536;a.setPRNG(function(a,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=c)b.getRandomValues(f.subarray(e,e+Math.min(d-e,c)));for(e=0;e<d;e++)a[e]=f[e];Ia(f)})}else b&&b.randomBytes&&a.setPRNG(function(a,c){var d,e=b.randomBytes(c);for(d=0;d<c;d++)a[d]=e[d];Ia(e)})})()})(typeof g!==\"undefined\"&&g.exports?g.exports:self.nacl=self.nacl||{})}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);\n__d(\"tweetnacl\",[\"tweetnacl-1.0.3\"],(function(a,b,c,d,e,f){e.exports=b(\"tweetnacl-1.0.3\")()}),null);\n__d(\"WACryptoDependencies\",[\"tweetnacl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=self.crypto;function a(a){h=a;var b=65536;d(\"tweetnacl\").setPRNG(function(c,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=b)a.getRandomValues(f.subarray(e,e+Math.min(d-e,b)));for(e=0;e<d;e++)c[e]=f[e];for(e=0;e<f.length;e++)f[e]=0})}function b(){return h}g.setCrypto=a;g.getCrypto=b}),98);\n__d(\"WAErr\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){a=new Error(a);if(a.stack===void 0)try{throw a}catch(a){}return a}f[\"default\"]=a}),66);\n__d(\"WAHex\",[\"WACryptoDependencies\",\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=16,i=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],j=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];function a(a){a=new Uint8Array(a);d(\"WACryptoDependencies\").getCrypto().getRandomValues(a);return k(a)}function k(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];b.push(i[d>>4],i[d&15])}return String.fromCharCode.apply(String,b)}function b(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];b.push(j[d>>4],j[d&15])}return String.fromCharCode.apply(String,b)}function e(a){a=m(a);if(a.length%2!==0)throw c(\"WAErr\")('parseHex given hex \"'+a+'\" which is not a multiple of 8-bits.');var b=new Uint8Array(a.length>>1);for(var d=0,e=0;d<a.length;d+=2,e++)b[e]=l(a,d)<<4|l(a,d+1);return b.buffer}function l(a,b){a=a.charCodeAt(b);if(a<=57)return a-48;else if(a<=70)return 10+a-65;else return 10+a-97}function m(a){if(\/[^0-9a-fA-F]\/.test(a))throw c(\"WAErr\")('\"'+a+'\" is not a valid hex');return a}function f(a){var b=a.buffer;return a.byteOffset===0&&a.length===b.byteLength?b:b.slice(a.byteOffset,a.byteOffset+a.length)}function n(a){var b=!0,c=a.length;while(b&&c){var d=a[--c];b=32<=d&&d<127}if(b)return JSON.stringify(String.fromCharCode.apply(String,a));else return k(a)}function o(a,b){b===void 0&&(b=!1);a=m(a);w(a,h);return(b?\"-\":\"\")+\"0x\"+q(a,h)}function p(a,b,c){c===void 0&&(c=!1);a=x(a);b=x(b);return(c?\"-\":\"\")+\"0x\"+a+b}function q(a,b){b=b-a.length;a=a;for(var c=0;c<b;c++)a=\"0\"+a;return a}function r(a){var b=a<0;a=b?(-a).toString(16):a.toString(16);return o(a,b)}function s(a){return a.substring(a.indexOf(\"0x\")+2)}function t(a){return a[0]===\"-\"}function u(a,b){var c=t(a),d=t(b);if(c!==d)return!c;d=s(a)>s(b);return c?!d:d}function v(a){return t(a)?a.slice(1):\"-\"+a}function w(a,b){if(a.length>b)throw c(\"WAErr\")('\"'+a+'\" is longer than '+b*4+\" bits.\")}function x(a){if(a>4294967295||a<-4294967296)throw c(\"WAErr\")(\"uint32ToLowerCaseHex given number over 32 bits\");a=(a>=0?a:4294967296+a).toString(16);return q(a,8)}g.NUM_HEX_IN_LONG=h;g.HEX_LOWER=j;g.randomHex=a;g.toHex=k;g.toLowerCaseHex=b;g.parseHex=e;g.hexAt=l;g.hexOrThrow=m;g.bytesToBuffer=f;g.bytesToDebugString=n;g.createHexLong=o;g.createHexLongFrom32Bits=p;g.hexLongFromNumber=r;g.hexLongToHex=s;g.hexLongIsNegative=t;g.isBiggerHexLong=u;g.negateHexLong=v}),98);\n__d(\"WANullthrows\",[\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){b===void 0&&(b=\"?\");if(a==null)throw c(\"WAErr\")(\"Unexpected null or undefined: \"+b);return a}g[\"default\"]=a}),98);\n__d(\"WALoggerUtils\",[\"WAHex\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){if(typeof a===\"string\")return\"'\"+a+\"'\";else if(a==null||typeof a!==\"object\")return String(a);else if(Array.isArray(a))return\"[\"+a.join(\",\")+\"]\";else if(a instanceof Uint8Array)if(a.length<64)return\"<<\"+i(a)+\">>\";else{var b=a.subarray(0,32);return\"<<\"+i(b)+\", \"+(a.length-b.length)+\" more bytes>>\"}else if(a instanceof Error)return a.name?\"(\"+a.name+\")\":\"\";else if(a.toString===Object.prototype.toString)return JSON.stringify(a,function(a,b){return a?String(b):b});else return String(a)}function i(a){var b=!0,c=a.length;while(b&&c){var e=a[--c];b=32<=e&&e<127}if(b)return JSON.stringify(String.fromCharCode.apply(String,a));else return d(\"WAHex\").toHex(a)}function a(a,b){var c=[a[0]];b.forEach(function(b,d){c.push(h(b),a[d+1])});return c.join(\"\")}g.debugStr=h;g.bytesToDebugString=i;g.rebuildTemplate=a}),98);\n__d(\"WATagsLogger\",[\"Promise\",\"WALoggerUtils\",\"WANullthrows\",\"regeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[\",\"] \",\"\"]);i=function(){return a};return a}var j,k=new(h||b(\"Promise\"))(function(a){j=a});function a(){return b(\"regeneratorRuntime\").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b(\"regeneratorRuntime\").awrap(k);case 2:case\"end\":return a.stop()}},null,this)}var l=null;function e(a){l=a,j==null?void 0:j(),j=null}function m(){return c(\"WANullthrows\")(l,\"WALogger called before initialization\")}function n(a){return{TAGS:function(b){return n([].concat(a,b))},DEV:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d(\"WALoggerUtils\").rebuildTemplate(b,e),h={level:\"DEV\",template:b,expressions:e,logString:g};m().debug(g,a,h);return o(h)},DEV_XMPP:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d(\"WALoggerUtils\").rebuildTemplate(b,e),h={level:\"DEV_XMPP\",template:b,expressions:e,logString:g};m().logRestricted(g,a,h);return o(h)},LOG:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d(\"WALoggerUtils\").rebuildTemplate(b,e),h={level:\"LOG\",template:b,expressions:e,logString:g};m().info(g,a,h);return o(h)},WARN:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d(\"WALoggerUtils\").rebuildTemplate(b,e),h={level:\"WARN\",template:b,expressions:e,logString:g};m().warn(g,a,h);return o(h)},ERROR:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d(\"WALoggerUtils\").rebuildTemplate(b,e),h={level:\"ERROR\",template:b,expressions:e,logString:g},i=void 0;for(var j=0;j<e.length;j++){var k=e[j];if(k instanceof Error){i=k;break}}i!=null?m().error(g,a,i,h):m().error(g,a,void 0,h);return o(h)},CATCHING:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d(\"WALoggerUtils\").rebuildTemplate(b,e),h={level:\"CATCHING\",template:b,expressions:e,logString:g};m().error(g,a,void 0,h);return o(h)},EXPECTED_ERROR:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d(\"WALoggerUtils\").rebuildTemplate(b,e),h={level:\"ERROR\",template:b,expressions:e,logString:g,tags:[].concat(a)};return o(h)}}}function o(a){return{verbose:function(){a.verbose=!0;return o(a)},color:function(b){a.color=b;return o(a)},devConsole:function(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];(b=m()).devConsole.apply(b,[a.level,a.logString,[]].concat(d));return o(a)},sendLogs:function(b,c){if(m().sendLogs!=null)a.sendLogs={reason:b,sampling:c},m().sendLogs==null?void 0:m().sendLogs(a);else if(a.level!==\"ERROR\"&&a.level!==\"CATCHING\")return n([]).ERROR(i(),b,a.logString);return o(a)},tags:function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];a.tags=c;m().tags!=null&&(m().tags==null?void 0:m().tags(c));return o(a)},expect:function(b){if(a.level!==\"ERROR\")return o(a);var c=void 0;for(var d=a.expressions,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(g instanceof Error){c=g;break}}f=(d=(f=(g=c)==null?void 0:g.message)!=null?f:(e=c)==null?void 0:e.name)!=null?d:(g=c)==null?void 0:g.description;for(e=0;e<b.length;e++){d=b[e];if(f==null?void 0:f.includes(d)){m().error(a.logString,[].concat((g=a.tags)!=null?g:[],[\"expected-error-log\"]),(d=c)!=null?d:void 0,a);return o(a)}}m().error(a.logString,(g=a==null?void 0:a.tags)!=null?g:[],(d=c)!=null?d:void 0,a);return o(a)}}}g.whenReady=a;g.initializeWaLogger=e;g.TAGS=n;g.getWaLoggerAdditionalOptions=o}),98);\n__d(\"WALogger\",[\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"WATagsLogger\").TAGS([]);b=a.DEV;c=a.DEV_XMPP;e=a.LOG;f=a.WARN;d=a.ERROR;a=a.EXPECTED_ERROR;g.DEV=b;g.DEV_XMPP=c;g.LOG=e;g.WARN=f;g.ERROR=d;g.EXPECTED_ERROR=a}),98);\/*FB_PKG_DELIM*\/\n__d(\"IGDWebUtils\",[\"CurrentUserInitialData\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){return a!=null?a===1217981644879628||a===936619743392459||a===487152425211411||a===1035956773910536:!1}function a(){return i(Number((h||(h=c(\"CurrentUserInitialData\"))).APP_ID))}g.isInstagramWebSupportedApp=i;g.isOnInstagramWeb=a}),98);\n__d(\"MAWCurrentUser\",[\"CurrentUserInitialData\",\"FBLogger\",\"IGDWebUtils\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(){var a=Number(i());if(a===772021112871879||a===2220391788200892||a===256281040558)return k();else if(d(\"IGDWebUtils\").isInstagramWebSupportedApp(a))return j();return k()}function i(){return(h||(h=d(\"CurrentUserInitialData\"))).APP_ID}function b(){return c(\"gkx\")(\"24028\")}function e(){return!!(h||(h=d(\"CurrentUserInitialData\"))).IS_EMPLOYEE}function j(){var a;((a=(h||(h=d(\"CurrentUserInitialData\"))).IG_USER_EIMU)!=null?a:\"0\")===\"0\"&&c(\"FBLogger\")(\"messenger_e2ee_web\").warn(\"EIMU is null\");return(a=(h||(h=d(\"CurrentUserInitialData\"))).IG_USER_EIMU)!=null?a:\"0\"}function k(){if((h||(h=d(\"CurrentUserInitialData\"))).USER_ID===\"0\"){var a=i();c(\"FBLogger\")(\"messenger_e2ee_web\").warn(\"FBID is null with appId %s\",a)}return(h||(h=d(\"CurrentUserInitialData\"))).USER_ID}g.getID=a;g.getAppID=i;g.isTlcPublicUser=b;g.isEmployee=e}),98);\n__d(\"MWLSDatabaseNames\",[],(function(a,b,c,d,e,f){\"use strict\";a=\"LightSpeed\";b=a+\"V3\";f.name=a;f.lightspeedPrefix=b}),66);\n__d(\"MWIndexedDBDelete\",[\"ExecutionEnvironment\",\"FBLogger\",\"MAWCurrentUser\",\"MWLSDatabaseNames\",\"ODS\",\"recoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function j(a){try{if(a===1)return\"\"+d(\"MWLSDatabaseNames\").name+d(\"MAWCurrentUser\").getID();else return d(\"MWLSDatabaseNames\").name+\"V\"+a+d(\"MAWCurrentUser\").getID()}catch(a){return null}}function a(a){var b;if((i||(i=c(\"ExecutionEnvironment\"))).canUseDOM&&((b=window)==null?void 0:b.indexedDB)!=null){var e=j(a);if(e!=null)if(typeof window.indexedDB.databases===\"function\"){b=window.indexedDB.databases();b.then(function(a){a.forEach(function(a){var b=a.name||\"\";if(b===e){a=window.indexedDB.deleteDatabase(b);a.onsuccess=function(){c(\"FBLogger\")(\"messenger_web_product\").info(\"MW PDB deletion success for \"+b)};a.onblocked=function(){c(\"recoverableViolation\")(\"[db clean up patch] Cannot delete db: blocked\",\"messenger_web_product\"),(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"mw_pdb_delete\",\"blocked\")};a.onerror=function(){(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"mw_pdb_delete\",\"error\"),c(\"recoverableViolation\")(\"[pdb clean up patch] Cannot delete db\",\"messenger_web_product\")}}})})[\"catch\"](function(a){c(\"recoverableViolation\")(\"[pdb clean up patch] LS delete databases error\",\"messenger_web_product\",{error:a})})}else{a=window.indexedDB.deleteDatabase(e);a.onsuccess=function(){(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"mw_pdb_delete\",\"success_v2\")};a.onblocked=function(){c(\"recoverableViolation\")(\"[db clean up patch v2] Cannot delete db: blocked\",\"messenger_web_product\"),(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"mw_pdb_delete\",\"blocked_v2\")};a.onerror=function(){(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"mw_pdb_delete\",\"error_v2\"),c(\"recoverableViolation\")(\"[pdb clean up patch v2] Cannot delete db\",\"messenger_web_product\")}}}}g.getUserDbNameForVersion=j;g.deleteAllDBs=a}),98);\n__d(\"GetLsDatabaseForComet\",[\"asyncToGeneratorRuntime\",\"requireDeferred\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=c(\"requireDeferred\")(\"GetLsDatabase\").__setRef(\"GetLsDatabaseForComet\");function a(){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=(yield h.load());return a.get()});return i.apply(this,arguments)}g.get=a}),98);\n__d(\"IGDSAppMessengerPanoOutlineIcon.react\",[\"IGDSSVGIconBase.react\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||(h=d(\"react\"))).unstable_useMemoCache,j=h;function a(a){var b=i(4),d,e;b[0]===Symbol[\"for\"](\"react.memo_cache_sentinel\")?(d=j.jsx(\"path\",{d:\"M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z\",fill:\"none\",stroke:\"currentColor\",strokeMiterlimit:\"10\",strokeWidth:\"1.739\"}),e=j.jsx(\"path\",{d:\"M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z\",fillRule:\"evenodd\"}),b[0]=d,b[1]=e):(d=b[0],e=b[1]);b[2]!==a?(d=j.jsxs(c(\"IGDSSVGIconBase.react\"),babelHelpers[\"extends\"]({},a,{viewBox:\"0 0 24 24\",children:[d,e]})),b[2]=a,b[3]=d):d=b[3];return d}b=j.memo(a);g[\"default\"]=b}),98);\n__d(\"IGDSAppMessengerOutlineIcon.react\",[\"IGDSAppMessengerPanoOutlineIcon.react\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||(h=d(\"react\"))).unstable_useMemoCache,j=h;function a(a){var b=i(2),d;b[0]!==a?(d=j.jsx(c(\"IGDSAppMessengerPanoOutlineIcon.react\"),babelHelpers[\"extends\"]({},a)),b[0]=a,b[1]=d):d=b[1];return d}b=j.memo(a);g[\"default\"]=b}),98);\n__d(\"IGDSDirectOutlineIcon.react\",[\"IGDSDirectPanoOutlineIcon.react\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||(h=d(\"react\"))).unstable_useMemoCache,j=h;function a(a){var b=i(2),d;b[0]!==a?(d=j.jsx(c(\"IGDSDirectPanoOutlineIcon.react\"),babelHelpers[\"extends\"]({},a)),b[0]=a,b[1]=d):d=b[1];return d}b=j.memo(a);g[\"default\"]=b}),98);\n__d(\"react-spring-wwwig\",[\"react-spring-web-9.5.2\"],(function(a,b,c,d,e,f){e.exports=b(\"react-spring-web-9.5.2\")()}),null);\n__d(\"usePolarisDirectFeatures\",[\"PolarisDirectStrings\",\"PolarisReactRedux.react\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||d(\"react\")).unstable_useMemoCache;function a(){var a=i(4),b;a[0]===Symbol[\"for\"](\"react.memo_cache_sentinel\")?(b=function(a){return a.direct.hasInteropUpgraded},a[0]=b):b=a[0];b=d(\"PolarisReactRedux.react\").useSelector(b);var c=b?d(\"PolarisDirectStrings\").CHATS_TITLE:d(\"PolarisDirectStrings\").INSTAGRAM_DIRECT_NAME,e;a[1]!==c||a[2]!==b?(e={directTitle:c,hasMessagingRedesign:b,hasWebInteropCreation:b},a[1]=c,a[2]=b,a[3]=e):e=a[3];return e}g[\"default\"]=a}),98);\n__d(\"polarisShouldAnimate\",[\"ExecutionEnvironment\",\"UserAgent\",\"once\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=c(\"once\")(function(){var a,b,d;if(!(h||(h=c(\"ExecutionEnvironment\"))).canUseDOM)return!1;a=(a=window)==null?void 0:(a=a.navigator)==null?void 0:a.deviceMemory;b=(b=window)==null?void 0:(b=b.navigator)==null?void 0:b.hardwareConcurrency;d=((d=window)==null?void 0:(d=d.matchMedia(\"(prefers-reduced-motion: reduce)\"))==null?void 0:d.matches)===!0;a=a!=null&&a>=2;b=b!=null&&b>=2;return!d&&(a||b||c(\"UserAgent\").isBrowser(\"Safari >= 13\"))});b=a;g[\"default\"]=b}),98);\n__d(\"PolarisIGAnimated.react\",[\"polarisShouldAnimate\",\"react\",\"react-spring-wwwig\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=h||d(\"react\");function a(){d(\"react-spring-wwwig\").Globals.assign({skipAnimation:!c(\"polarisShouldAnimate\")()})}a();b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a=this.props,b=a.$1;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"$1\"]);b=d(\"react-spring-wwwig\").animated(b);return i.jsx(b,babelHelpers[\"extends\"]({},a))};b.div=function(a){var b=a.forwardRef;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"forwardRef\"]);return i.jsx(d(\"react-spring-wwwig\").animated.div,babelHelpers[\"extends\"]({ref:b},a))};return b}(i.Component);g[\"default\"]=b}),98);\n__d(\"usePolarisFadeTransition\",[\"react-spring-wwwig\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=a.duration;a=a.show;return d(\"react-spring-wwwig\").useTransition(a,babelHelpers[\"extends\"]({enter:{opacity:1},from:{opacity:0},leave:{opacity:0}},b!=null?{config:{duration:b}}:{}))}g[\"default\"]=a}),98);\n__d(\"usePolarisPanAndZoom\",[\"react\",\"react-spring-wwwig\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||d(\"react\")).unstable_useMemoCache,j={friction:40,mass:5,tension:350};function a(a,b,c,e){var f=i(9),g=c===void 0?!1:c;f[0]!==e?(c=e===void 0?[]:e,f[0]=e,f[1]=c):c=f[1];e=c;f[2]!==b||f[3]!==a||f[4]!==g?(c=function(){var c;return{config:(c=b)!=null?c:j,from:a,immediate:g,reset:!0,to:a}},f[2]=b,f[3]=a,f[4]=g,f[5]=c):c=f[5];c=d(\"react-spring-wwwig\").useSpring(c,e);e=c[0];c=c[1];var h;f[6]!==c||f[7]!==e?(h={set:c,style:e},f[6]=c,f[7]=e,f[8]=h):h=f[8];return h}g[\"default\"]=a}),98);\n__d(\"PolarisIGAnimate\",[\"PolarisIGAnimated.react\",\"usePolarisFadeTransition\",\"usePolarisPanAndZoom\"],(function(a,b,c,d,e,f){\"use strict\";f.Animated=importDefault(\"PolarisIGAnimated.react\"),f.useFadeTransition=importDefault(\"usePolarisFadeTransition\"),f.usePanAndZoom=importDefault(\"usePolarisPanAndZoom\")}),66);\n__d(\"LSBitFlag\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){return(h||(h=d(\"I64\"))).equal(h.and_(b,a),a)}function b(a,b){return(h||(h=d(\"I64\"))).or_(b,a)}function c(a,b){return(h||(h=d(\"I64\"))).and_(b,h.lognot(a))}g.has=a;g.set=b;g.clear=c;g.empty=(h||(h=d(\"I64\"))).zero}),98);\n__d(\"PromiseOrValue\",[\"isPromise\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){if((h||(h=c(\"isPromise\")))(a)&&(h||(h=c(\"isPromise\")))(b))return a.then(function(a){return b.then(function(b){return[a,b]})});if((h||(h=c(\"isPromise\")))(a))return a.then(function(a){return[a,b]});return(h||(h=c(\"isPromise\")))(b)?b.then(function(b){return[a,b]}):[a,b]}function b(a){var b=a.find(h||(h=c(\"isPromise\")));return!b?a:Promise.all(a)}function d(a,b){return(h||(h=c(\"isPromise\")))(a)?a.then(b):b(a)}function i(a,b){b=b;while(!0){var d=a(b);if((h||(h=c(\"isPromise\")))(d))return d.then(function(b){return b.action===\"break\"?b.value:i(a,b.value)});if(d.action===\"break\")return d.value;b=d.value}throw c(\"unrecoverableViolation\")(\"just for flow\",\"messenger_web_product\")}g.all2=a;g.all=b;g.map=d;g.loop=i}),98);\n__d(\"ReStoreKeyComparer\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){if((h||(h=d(\"I64\"))).isI64(a))return\"I64\";else if(Array.isArray(a))return\"Array\";else if(typeof a===\"string\")return\"String\";else if(typeof a===\"number\")return\"Number\";else if(typeof a===\"boolean\")return\"Boolean\";else if(a instanceof Date)return\"Date\";else if(typeof a===\"object\"&&a!=null)return\"Object\";else if(a===\"undefined\")return\"Undefined\";else if(a===null)return\"Null\";return\"Unknown\"}var j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=\"Expected types to be the same but got \"+i(a)+\" and \"+i(c);return b.call(this,a)||this}return a}(babelHelpers.wrapNativeSuper(Error)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a=\"Unexpected type \"+i(a);return b.call(this,a)||this}return a}(babelHelpers.wrapNativeSuper(Error)),l=[[]];function m(a,b){var c=a===l,d=b===l;if(c&&d)return 0;if(c)return 1;if(d)return-1;if(a===null)return b===null?0:-1;else if(b===null)return 1;if(a===void 0)return b===void 0?0:-1;else if(b===void 0)return 1;if(Array.isArray(a)){if(!Array.isArray(b)){if(typeof b===\"string\")return 1;throw new j(a,b)}c=a[0];d=b[0];if(c<d)return-1;if(c>d)return 1;c=a[1];d=b[1];if(c<d)return-1;if(c>d)return 1}else if(typeof a===\"string\"){if(typeof b!==\"string\"){if(typeof b===\"number\"||b instanceof Date)return 1;if(Array.isArray(b))return-1;throw new j(a,b)}if(a<b)return-1;if(a>b)return 1}else if(typeof a===\"number\"){if(typeof b!==\"number\"){if(typeof b===\"string\")return-1;throw new j(a,b)}if(a<b)return-1;if(a>b)return 1}else if(a instanceof Date){if(!(b instanceof Date)){if(typeof b===\"string\")return-1;throw new j(a,b)}if(a<b)return-1;if(a>b)return 1}else if(typeof a===\"boolean\"){if(typeof b!==\"boolean\")throw new j(a,b);if(!a&&b)return-1;if(a&&!b)return 1}else throw new k(a);return 0}function n(a,b){var c;for(c=0;c<a.length&&c<b.length;c++){var d=m(a[c],b[c]);if(d!==0)return d}if(c<a.length)return 1;return c<b.length?-1:0}a=function(a,b){return n(b,a)};g.MAX_KEY=l;g.compareValue=m;g.compareKey=n;g.compareKeyDesc=a}),98);\n__d(\"ReQLSuspenseSupportedContextTracking\",[\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=h||c(\"react\"),j;function a(){var a;j=(a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)==null?void 0:(a=a.ReactCurrentDispatcher)==null?void 0:a.current}function b(){var a;a=(a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)==null?void 0:(a=a.ReactCurrentDispatcher)==null?void 0:a.current;return a!=null&&a===j}g.useReStoreTrackInRender=a;g.isWithinReactRenderingContext=b}),98);\n__d(\"MWCMIsAnyCMThread\",[\"I64\",\"LSIntEnum\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a){if((h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(18))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(19))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(23))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(24))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(21)))return!0;else return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(22))}g[\"default\"]=a}),98);\n__d(\"LSLogHistory\",[\"FBLogger\",\"performance\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i={},j={client_init:100,client_sync:50,client_task:20,db_dump:200,db_init:100,general:50,ls:50,maw_setup:10,user_experience:200},k=10;function a(){try{return Object.values(i).reduce(function(a,b){return a.concat(b)},[]).sort(function(a,b){return a.date-b.date}).map(function(a){return[a.date.toString(),a.level,a.category,a.event,a.args].join(\" | \")})}catch(a){c(\"FBLogger\")(\"messenger_browser_clients\").catching(a).mustfix(\"getEntries failed\");return[[Date.now().toString(),\"error\",\"general\",\"lightspeed_log_event\",\"cannot create entries\"].join(\" | \")]}}function b(){i={}}function d(a,b,d,e){var f;d===void 0&&(d=\"general\");e===void 0&&(e=\"lightspeed_log_event\");var g;(h||(h=c(\"performance\"))).timing!=null?g=Math.round((h||(h=c(\"performance\"))).timing.navigationStart+h.now()):g=Date.now();i[d]==null&&(i[d]=[]);i[d].length>=((f=j[d])!=null?f:k)&&i[d].shift();i[d].push({args:a,category:d,date:g,event:e,level:b})}g.MAX_LIMIT=j;g.getEntries=a;g.clearEntries=b;g.log=d}),98);\n__d(\"MessengerSimpleLogHistoryFactory\",[\"LSLogHistory\"],(function(a,b,c,d,e,f,g){\"use strict\";a={getInstance:function(a){return{debug:function(b,c){d(\"LSLogHistory\").log(b,\"debug\",a,c)},error:function(b,c){d(\"LSLogHistory\").log(b,\"error\",a,c)}}}};g.simpleFactory=a}),98);\n__d(\"MessengerBroadcastLogHistoryFactory\",[\"FBLogger\",\"MessengerSimpleLogHistoryFactory\",\"pageID\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(a,b){var e=this;this.listener=function(a){var b=d(\"MessengerSimpleLogHistoryFactory\").simpleFactory.getInstance(e.$1);a.level===\"error\"&&b.error(a.message,\"from_\"+a.page);a.level===\"debug\"&&b.debug(a.message,\"from_\"+a.page)};this.debug=function(a){for(var b=arguments.length,f=new Array(b>1?b-1:0),g=1;g<b;g++)f[g-1]=arguments[g];try{d(\"MessengerSimpleLogHistoryFactory\").simpleFactory.getInstance(e.$1).debug(a),e.$2({args:f,category:e.$1,level:\"debug\",message:a,page:c(\"pageID\")})}catch(a){c(\"FBLogger\")(\"messenger_web_product\").catching(a).warn(\"MessengerLogHistory debug\")}};this.error=function(a){for(var b=arguments.length,f=new Array(b>1?b-1:0),g=1;g<b;g++)f[g-1]=arguments[g];try{d(\"MessengerSimpleLogHistoryFactory\").simpleFactory.getInstance(e.$1).error(a),e.$2({args:f,category:e.$1,level:\"error\",message:a,page:c(\"pageID\")})}catch(a){c(\"FBLogger\")(\"messenger_web_product\").catching(a).warn(\"MessengerLogHistory error\")}};this.$1=a;this.$2=b};a=function(){function a(){var a=this,b;this.$1={};this.$3=\"ls_log_history\";this.$4=function(b){var c,d=b.args,e=b.category,f=b.level,g=b.message;b=b.page;(c=a.$2)==null?void 0:c.postMessage({args:d,category:e,level:f,message:g,page:b})};this.$2=self.BroadcastChannel!=null?new self.BroadcastChannel(this.$3):null;(b=this.$2)==null?void 0:b.addEventListener(\"message\",function(b){b=b.data;if((b==null?void 0:b.category)!=null){var c=a.$1[b==null?void 0:b.category];c==null?void 0:c.listener(b)}})}var b=a.prototype;b.getInstance=function(a){this.$1[a]||(this.$1[a]=new h(a,this.$4));return this.$1[a]};return a}();g[\"default\"]=a}),98);\n__d(\"MessengerLogHistory\",[\"MessengerSimpleLogHistoryFactory\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={},i=d(\"MessengerSimpleLogHistoryFactory\").simpleFactory;function a(a){i=a}function b(a){h[a]||(h[a]=i.getInstance(a));return h[a]}g.setLogHistoryFactory=a;g.getInstance=b}),98);\n__d(\"isUnjoinedCMThread\",[\"I64\",\"LSIntEnum\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(19))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(24))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(22))}g.isUnjoinedCMThread=a}),98);\n__d(\"LSSuspense\",[\"PromiseAnnotate\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){return{current:{error:a,state:\"Error\"}}}function b(a){return{current:{state:\"Done\",value:a}}}function c(a){var b={current:{promise:a.then(function(a){b.current={state:\"Done\",value:a};return a})[\"catch\"](function(a){b.current={error:a,state:\"Error\"}}),state:\"Loading\"}};return b}function e(){return new WeakMap()}function i(a){if(a.state===\"Loading\")throw a.promise;else if(a.state===\"Error\")throw a.error;else return a.value}function f(a){return i(a.current)}function j(a,b,c){var e=a.get(b);if(e!=null)return i(e);e=c();c={promise:e.then(function(c){a.set(b,{state:\"Done\",value:c});return c})[\"catch\"](function(c){a.set(b,{error:c,state:\"Error\"})}),state:\"Loading\"};var f=c.promise;if(f){void (h||(h=d(\"PromiseAnnotate\"))).setDisplayName(f,(f=(h||(h=d(\"PromiseAnnotate\"))).getDisplayName(e))!=null?f:\"LSCollection\")}a.set(b,c);return i(c)}j={getFromCollection:j,getOrSuspend:f,makeCollection:e,makeWithError:a,makeWithPromise:c,makeWithValue:b};g[\"default\"]=j}),98);\n__d(\"LSThreadBitOffset\",[\"FBLogger\",\"I64\",\"LSBitFlag\",\"isUnjoinedCMThread\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;f=[\"capabilities\",\"capabilities2\",\"capabilities3\",\"capabilities4\"];var i=4,j=i*64;function a(a,b){if(d(\"isUnjoinedCMThread\").isUnjoinedCMThread(b.threadType))return!1;if(a>=j){c(\"FBLogger\")(\"LSThreadBitOffset\",\"out_of_bounds_bit_offset\").mustfix(\"Invalid bitOffset; expected a value between 0 and %d but found %s instead\",j-1,a);return!1}if(a>=192)return d(\"LSBitFlag\").has((h||(h=d(\"I64\"))).lsl_(h.one,a-192),b.capabilities4);if(a>=128)return d(\"LSBitFlag\").has((h||(h=d(\"I64\"))).lsl_(h.one,a-128),b.capabilities3);return a>=64?d(\"LSBitFlag\").has((h||(h=d(\"I64\"))).lsl_(h.one,a-64),b.capabilities2):d(\"LSBitFlag\").has((h||(h=d(\"I64\"))).lsl_(h.one,a),b.capabilities)}function b(a,b,c,e,f){return a.reduce(function(a,b){var c=a[0],e=a[1],f=a[2];a=a[3];if(b>=192)return[c,e,f,d(\"LSBitFlag\").set((h||(h=d(\"I64\"))).lsl_(h.one,b-192),a)];if(b>=128)return[c,e,d(\"LSBitFlag\").set((h||(h=d(\"I64\"))).lsl_(h.one,b-128),f),a];return b>=64?[c,d(\"LSBitFlag\").set((h||(h=d(\"I64\"))).lsl_(h.one,b-64),e),f,a]:[d(\"LSBitFlag\").set((h||(h=d(\"I64\"))).lsl_(h.one,b),c),e,f,a]},[b,c,e,f])}function e(a,b,c,e,f){return a.reduce(function(a,b){var c=a[0],e=a[1],f=a[2];a=a[3];if(b>=192)return[c,e,f,d(\"LSBitFlag\").clear((h||(h=d(\"I64\"))).lsl_(h.one,b-192),a)];if(b>=128)return[c,e,d(\"LSBitFlag\").clear((h||(h=d(\"I64\"))).lsl_(h.one,b-128),f),a];return b>=64?[c,d(\"LSBitFlag\").clear((h||(h=d(\"I64\"))).lsl_(h.one,b-64),e),f,a]:[d(\"LSBitFlag\").clear((h||(h=d(\"I64\"))).lsl_(h.one,b),c),e,f,a]},[b,c,e,f])}g.threadCapabilityFields=f;g.MAX_SUPPORTED_THREAD_CAPABILITY=i;g.has=a;g.set=b;g.clear=e;g.empty=(h||(h=d(\"I64\"))).zero}),98);\n__d(\"BPlusTree\",[\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h={gt:[!1,0],gte:[!0,0],lt:[!0,1],lte:[!1,1]};a=function(){function a(a,b){b===void 0&&(b=32),this.$3={children:[],isLeaf:!0,keys:[]},this.$4=this.$3,this.$5=this.$3,this.$1=a,this.$2=b}a.fromSorted=function(a,b,c){b=new this(b,c);c=a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();a=c.next();while(!a.done){var d=[],e=b.$5,f;while(!e.isLeaf)d.push([e,-1]),f=e.keys.length,e=e.children[f];f=(b.$2-1)*2;f=f-e.keys.length;while(!a.done&&f>0)e.keys.push(a.value[0]),e.children.push(a.value[1]),f--,a=c.next();b.$6(e,d,!0)}return b};var b=a.prototype;b.$7=function(a,b){var c=this.$5,d=-1;while(!c.isLeaf)b==null?void 0:b.push([c,d]),d=this.$8(c.keys,a,h.gt),d===-1&&(d=c.keys.length),c=c.children[d];return[c,d]};b.$8=function(a,b,c){var d=0,e=a.length-1;while(d<=e){var f=d+e>>1;(c[0]?this.$1(a[f],b)<0:this.$1(a[f],b)<=0)?d=f+1:e=f-1}f=[d,e][c[1]];return f===a.length?-1:f};b.$9=function(a,b){if(!a.length){a.push(b);return[0,0]}var c=this.$8(a,b,h.gte);if(c===-1)return[a.push(b)-1,0];else if(this.$1(a[c],b)===0)return[c,1];a.splice(c,0,b);return[c,0]};b.$6=function(a,b,c){for(var a=a,d;a.keys.length>=this.$2;a=d){var d=b.pop()||[this.$5={children:[a],isLeaf:!1,keys:[]}];d=d[0];var e=Math.floor(a.keys.length\/2),f=void 0;a.isLeaf?(f=a.next={children:a.children.slice(e),isLeaf:!0,keys:a.keys.slice(e),next:a.next,prev:a},f.next?f.next.prev=f:this.$4=f):f={children:a.children.slice(e+1),isLeaf:!1,keys:a.keys.slice(e+1)};if(c)d.keys.push(a.keys[e]),d.children.push(f);else{var g=this.$9(d.keys,a.keys[e]);g=g[0];d.children.splice(g+1,0,f)}a.keys.length=e;a.children.length=e+(a.isLeaf?0:1)}};b.clear=function(){this.$5=this.$3=this.$4={children:[],isLeaf:!0,keys:[]}};b.delete=function(a){var b=Math.floor(this.$2\/2),d=[],e=this.$7(a,d),f=e[0];e=e[1];var g=this.$8(f.keys,a,h.gte);if(g===-1||this.$1(f.keys[g],a)!==0)return!1;f.keys.splice(g,1);f.children.splice(g,1);for(var a=f,g=e,e,f;a.keys.length<b&&d.length;o=[e,f],a=o[0],g=o[1],o){f=d.pop();e=f[0];f=f[1];var i=[[e.children[g-1],a,g-1],[a,e.children[g+1],g]].filter(function(a){var b=a[0];a=a[1];return b&&a});for(var j of i){var k=j[0],l=j[1],m=j[2];if(k.keys.length+l.keys.length>=b*2){if(a.isLeaf){var n=[].concat(k.children,l.children),o=[].concat(k.keys,l.keys);k.children=(l.children=n).splice(0,b);k.keys=(l.keys=o).splice(0,b);e.keys[m]=o[0]}else{n=[].concat(k.children,l.children);o=[].concat(k.keys,[e.keys[m]],l.keys);k.children=(l.children=n).splice(0,b+1);e.keys[m]=o.splice(b,1)[0];k.keys=(l.keys=o).splice(0,b)}return!0}}for(n of i){m=n[0];k=n[1];l=n[2];m.children=[].concat(m.children,k.children);a.isLeaf?(m.keys=[].concat(m.keys,k.keys),k.keys.length=0,k.next?k.next.prev=m:this.$4=m,m.next=k.next):m.keys=[].concat(m.keys,[e.keys[l]],k.keys);e.keys.splice(l,1);e.children.splice(l+1,1);break}}if(!this.$5.keys.length&&this.$5.children.length){j=this.$5;if(j.isLeaf)throw c(\"unrecoverableViolation\")(\"cannot be leaf\",\"messenger_web_product\");this.$5=j.children[0]}return!0};b.entries=function*(a){a=a===void 0?{}:a;var b=a.dir;b=b===void 0?\"asc\":b;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"dir\"]);if(Object.prototype.hasOwnProperty.call(a,\"gt\")&&Object.prototype.hasOwnProperty.call(a,\"gte\"))throw c(\"unrecoverableViolation\")(\"cannot specify both greater than and greater than or equal\",\"messenger_web_product\");if(Object.prototype.hasOwnProperty.call(a,\"lt\")&&Object.prototype.hasOwnProperty.call(a,\"lte\"))throw c(\"unrecoverableViolation\")(\"cannot specify both less than and less than or equal\",\"messenger_web_product\");if(b===\"asc\"){if(Object.prototype.hasOwnProperty.call(a,\"gt\")){b=this.$7(a.gt);b=b[0]}else if(Object.prototype.hasOwnProperty.call(a,\"gte\")){var d=this.$7(a.gte);b=d[0]}else b=this.$3;d=Object.prototype.hasOwnProperty.call(a,\"gt\")?this.$8(b.keys,a.gt,h.gt):Object.prototype.hasOwnProperty.call(a,\"gte\")?this.$8(b.keys,a.gte,h.gte):0;while(b){var e=b;while(d!==-1&&d<e.keys.length){var f=e.keys[d];if(Object.prototype.hasOwnProperty.call(a,\"lt\")&&this.$1(f,a.lt)>=0||Object.prototype.hasOwnProperty.call(a,\"lte\")&&this.$1(f,a.lte)>0)return;var g=(yield [e.keys[d],e.children[d]]);if(g!=null){if(this.$1(g,f)<=0)throw c(\"unrecoverableViolation\")(\"key must be greater than current key\",\"messenger_web_product\");d=this.$8(e.keys,g,h.gte);if(d===-1){var i=this.$7(g);e=i[0];d=this.$8(e.keys,g,h.gte)}}else{i=e.keys[d]!==f;if(i){d=this.$8(e.keys,f,h.lte);if(d===-1){g=this.$7(f);e=g[0];d=this.$8(e.keys,f,h.lte)}}d++}}b=e.next;d=0}}else{if(Object.prototype.hasOwnProperty.call(a,\"lt\")){i=this.$7(a.lt);b=i[0]}else if(Object.prototype.hasOwnProperty.call(a,\"lte\")){g=this.$7(a.lte);b=g[0]}else b=this.$4;f=Object.prototype.hasOwnProperty.call(a,\"lt\")?this.$8(b.keys,a.lt,h.lt):Object.prototype.hasOwnProperty.call(a,\"lte\")?this.$8(b.keys,a.lte,h.lte):b.keys.length-1;while(b){e=b;while(f!==-1&&f>=0){d=e.keys[f];if(Object.prototype.hasOwnProperty.call(a,\"gt\")&&this.$1(d,a.gt)<=0||Object.prototype.hasOwnProperty.call(a,\"gte\")&&this.$1(d,a.gte)<0)return;i=(yield [e.keys[f],e.children[f]]);if(i!=null){if(this.$1(i,d)>=0)throw c(\"unrecoverableViolation\")(\"key must be less than current key\",\"messenger_web_product\");f=this.$8(e.keys,i,h.lte);if(f===-1){g=this.$7(i);e=g[0];f=this.$8(e.keys,i,h.lte)}}else{g=e.keys[f]!==d;if(g){f=this.$8(e.keys,d,h.gte);if(f===-1){i=this.$7(d);e=i[0];f=this.$8(e.keys,d,h.gte)}}f--}}b=e.prev;f=b!=null?b.keys.length-1:-1}}};b.get=function(a){var b=this.$7(a);b=b[0];var d=this.$8(b.keys,a,h.gte);if(d===-1||this.$1(b.keys[d],a)!==0)throw c(\"unrecoverableViolation\")(\"key not found: \"+String(a),\"messenger_web_product\");return b.children[d]};b.getWithDefault=function(a,b){var c=this.$7(a);c=c[0];var d=this.$8(c.keys,a,h.gte);return d===-1||this.$1(c.keys[d],a)!==0?b:c.children[d]};b.has=function(a){var b=this,c=this.$7(a);c=c[0];return c.keys.findIndex(function(c){return b.$1(a,c)===0})!==-1};b.set=function(a,b){var c=[],d=this.$7(a,c);d=d[0];a=this.$9(d.keys,a);var e=a[0];a=a[1];d.children.splice(e,a,b);this.$6(d,c,!1);return this};return a}();g.default=a}),98);\n__d(\"LSPersistedDbGating\",[\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"gkx\")(\"24032\");b=c(\"gkx\")(\"24032\");g.anyTablesPersisted=a;g.allTablesPersisted=b}),98);\n__d(\"LSPlatformLsInitLog\",[\"ErrorGuard\",\"ExecutionEnvironment\",\"QPLUserFlow\",\"gkx\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=c(\"qpl\")._(25305590,\"1127\"),k=!1,l=!1,m=[],n=c(\"gkx\")(\"23405\"),o=c(\"gkx\")(\"22799\");function p(a){k||(k=!0,l=!1,(h||(h=c(\"ExecutionEnvironment\"))).isInWorker||a===!1?c(\"QPLUserFlow\").start(j,{annotations:{bool:{isArmadilloPublicLaunchUser:n,mComPreInitLoad:o}},cancelOnUnload:!0,timeoutInMs:6e4}):c(\"QPLUserFlow\").startFromNavStart(j,{annotations:{bool:{isArmadilloPublicLaunchUser:n,mComPreInitLoad:o}},cancelOnUnload:!0,onFlowTimeout:t,timeoutInMs:(h||(h=c(\"ExecutionEnvironment\"))).canUseDOM?6e4:0}))}function q(a,b,d){!k&&(h||(h=c(\"ExecutionEnvironment\"))).isInWorker&&p(),s()&&(c(\"QPLUserFlow\").addPoint(a,((h||(h=c(\"ExecutionEnvironment\"))).isInWorker?\"worker_\":\"\")+b),d!=null&&c(\"QPLUserFlow\").addAnnotations(a,d))}function r(a){c(\"QPLUserFlow\").addAnnotations(j,a)}function a(a,b){q(j,a,b)}function b(){s()&&(l=!0,c(\"QPLUserFlow\").endSuccess(j),t())}function d(a,b){l=!0,c(\"QPLUserFlow\").endFailure(j,a,{error:b}),t()}function s(){return k&&!l}function t(){for(var a=0;a<m.length;a++){var b=m[a];(i||(i=c(\"ErrorGuard\"))).applyWithGuard(b,null,[])}}function e(a){m.push(a)}f={addAnnotations:function(a){var b=a.bool,c=a[\"int\"];a=a.string;r({bool:b,\"int\":c,string:a})},addPoint:a,addPointForEvent:q,endFail:d,endSuccess:b,isPending:s,onCompleteOrFail:e,start:p};g.start=p;g.addPointForEvent=q;g.addAnnotations=r;g.addPoint=a;g.endSuccess=b;g.fail=d;g.isPending=s;g.onCompleteOrFail=e;g.lsInitLogger=f}),98);\n__d(\"LSDatabaseSingleton\",[\"CurrentUser\",\"ExecutionEnvironment\",\"FBLogger\",\"InteractionTracing\",\"LSPersistedDbGating\",\"LSPlatformLsInitLog\",\"MWIndexedDBDelete\",\"MessengerLogHistory\",\"Promise\",\"QE2Logger\",\"QPLUserFlow\",\"asyncToGeneratorRuntime\",\"cr:1027\",\"cr:123\",\"cr:1683\",\"cr:3411\",\"cr:511\",\"cr:6587\",\"cr:7307\",\"gkx\",\"justknobx\",\"qpl\",\"recoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;d(\"LSPersistedDbGating\").anyTablesPersisted&&b(\"cr:7307\")!=null&&d(\"MessengerLogHistory\").setLogHistoryFactory(new(b(\"cr:7307\"))());var j=(e=(a=b(\"cr:511\"))!=null?a:b(\"cr:123\"))!=null?e:b(\"cr:6587\");d(\"QE2Logger\").logExposureForUser(\"lightspeed_web_persisted_db\");b(\"cr:1027\")==null?void 0:b(\"cr:1027\").overwriteSamplingRate();d(\"LSPlatformLsInitLog\").start();f=function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=c(\"gkx\")(\"26383\");d(\"LSPlatformLsInitLog\").addPoint(\"get_ls_database_start\",{bool:{is_pdb:d(\"LSPersistedDbGating\").anyTablesPersisted,loadDbEarlierEnabled:a}});c(\"InteractionTracing\").getPendingInteractions().forEach(function(b){b.addMarkerPoint(\"get_ls_database_start\",\"AppTiming\"),b.addAnnotationBoolean(\"loadDbEarlierEnabled\",a),b.addAnnotationBoolean(\"is_pdb\",d(\"LSPersistedDbGating\").anyTablesPersisted)});var e=(yield j.get());d(\"LSPlatformLsInitLog\").addPoint(\"get_ls_database_end\");c(\"InteractionTracing\").getPendingInteractions().forEach(function(a){a.addMarkerPoint(\"get_ls_database_end\",\"AppTiming\")});b(\"cr:1683\")!=null&&b(\"cr:1683\").checkAllThreads();try{var f=c(\"justknobx\")._(\"541\"),g=!d(\"LSPersistedDbGating\").anyTablesPersisted;g&&f>0&&(d(\"LSPlatformLsInitLog\").addPoint(\"should_delete_index_db_start\",{\"int\":{versionToDelete:f}}),d(\"MWIndexedDBDelete\").deleteAllDBs(f))}catch(a){c(\"recoverableViolation\")(\"[db clean up patch] Cant delete db\",\"messenger_web_product\")}d(\"LSPlatformLsInitLog\").addPoint(\"db_created\");c(\"CurrentUser\").isWorkUser()&&c(\"QPLUserFlow\").addPoint(c(\"qpl\")._(1036588047,\"310\"),\"db_created\");if(b(\"cr:3411\")!==null)try{b(\"cr:3411\").registerDb(e)}catch(a){c(\"FBLogger\")(\"messenger_browser_clients\").catching(a).mustfix(\"LSPlatformDevtools failed to register db.\")}return e});return function(){return a.apply(this,arguments)}}();var k=(i||(i=c(\"ExecutionEnvironment\"))).isInBrowser?f().then(function(a){k=a;return a}):new(h||(h=b(\"Promise\")))(function(){c(\"FBLogger\")(\"messenger_browser_clients\").warn(\"ExecutionEnvironment.isInBrowser returned false, returning never ending promise\")});a=function(){return k};e=(h||(h=b(\"Promise\"))).resolve(k);g.getLSDatabaseSingletonPromiseOrValue=a;g.LSDatabaseSingleton=e}),98);\n__d(\"ReQLBounds\",[\"ReStoreKeyComparer\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a,b,c){return b.length<a?[].concat(b,[c]):b}function j(a,b){b===void 0&&(b=-1);return i(b,a,(h||(h=d(\"ReStoreKeyComparer\"))).MAX_KEY)}function k(a,b,c){if(a!=null&&b!=null)return(h||(h=d(\"ReStoreKeyComparer\"))).compareKey(a[1],b[1])*c>0?a[0]:b[0];if(a!=null)return a[0];if(b!=null)return b[0]}function l(a,b){return k((a==null?void 0:a.gt)!=null?[{gt:a.gt},j(a.gt)]:(a==null?void 0:a.gte)!=null?[{gte:a.gte},a.gte]:void 0,(b==null?void 0:b.gt)!=null?[{gt:b.gt},j(b.gt)]:(b==null?void 0:b.gte)!=null?[{gte:b.gte},b.gte]:void 0,1)}function m(a,b){return k((a==null?void 0:a.lt)!=null?[{lt:a.lt},a.lt]:(a==null?void 0:a.lte)!=null?[{lte:a.lte},j(a.lte)]:void 0,(b==null?void 0:b.lt)!=null?[{lt:b.lt},b.lt]:(b==null?void 0:b.lte)!=null?[{lte:b.lte},j(b.lte)]:void 0,-1)}function a(a,b){if(a==null)return void 0;a=babelHelpers.extends({},a);a.gt!=null&&(a.gt=i(b,a.gt,(h||(h=d(\"ReStoreKeyComparer\"))).MAX_KEY));a.lte!=null&&(a.lte=i(b,a.lte,(h||(h=d(\"ReStoreKeyComparer\"))).MAX_KEY));return a}function b(a,b,c){a.forEach(function(a){var e=a[0];a=a[1];var f=(e==null?void 0:e.gt)!=null?(h||(h=d(\"ReStoreKeyComparer\"))).compareKey(b,e.gt)>0:(e==null?void 0:e.gte)!=null?(h||(h=d(\"ReStoreKeyComparer\"))).compareKey(b,e.gte)>=0:!0;e=(e==null?void 0:e.lt)!=null?(h||(h=d(\"ReStoreKeyComparer\"))).compareKey(b,e.lt)<0:(e==null?void 0:e.lte)!=null?(h||(h=d(\"ReStoreKeyComparer\"))).compareKey(b,e.lte)<=0:!0;if(f&&e)return c(a)})}function c(a,b){if(b==null)return a;var c=l(b,a);b=m(b,a);if(c!=null&&b!=null)return babelHelpers.extends({},c,b);if(c!=null)return c;if(b!=null)return b}g.nextKey=j;g.getLowerLimit=l;g.getUpperLimit=m;g.extendBounds=a;g.forEachMatchingBounds=b;g.mergeBounds=c}),98);\n__d(\"ReQLGlobalQueryContext\",[],(function(a,b,c,d,e,f){\"use strict\";var g={};function a(a){return a.get(g)}function b(a,b){a.set(g,b)}var h={contents:void 0,withinSupportedContext:!1};function c(a){var b=h.withinSupportedContext;h.withinSupportedContext=!0;try{return a()}finally{h.withinSupportedContext=b}}f.getDependencies=a;f.setDependencies=b;f.globalQueryContext=h;f.runFromContextThatHandlesThrownPromise=c}),66);\n__d(\"ReQL\",[\"BPlusTree\",\"PromiseOrValue\",\"ReQLBounds\",\"ReQLGlobalQueryContext\",\"ReStoreKeyComparer\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k,l={bounds:b,filter:f,getKeyRange:o,map:q,take:u};function m(a,b){try{var c=(h||(h=d(\"ReQLGlobalQueryContext\"))).globalQueryContext.contents,e=h.getDependencies(b);e==null&&(h||(h=d(\"ReQLGlobalQueryContext\"))).setDependencies(b,[]);h.globalQueryContext.contents=b;var f,g;try{f=(h||(h=d(\"ReQLGlobalQueryContext\"))).runFromContextThatHandlesThrownPromise(a),g=(h||(h=d(\"ReQLGlobalQueryContext\"))).getDependencies(b)||[]}finally{(h||(h=d(\"ReQLGlobalQueryContext\"))).setDependencies(b,e),h.globalQueryContext.contents=c}return[f,g]}catch(c){if(c instanceof Promise)return c.then(function(){return m(a,b)});throw c}}function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b}function b(a){var b=this;return Object.setPrototypeOf({direction:b.direction,iterator:function(c,e){return b.iterator(c,(i||(i=d(\"ReQLBounds\"))).mergeBounds(a,e))},keyLength:b.keyLength,subscribe:function(c,e){return b.subscribe(c,(i||(i=d(\"ReQLBounds\"))).mergeBounds(a,e))}},l)}var n=Object.setPrototypeOf({direction:\"asc\",iterator:function(){return{next:function(){return{done:!0}}}},keyLength:0,subscribe:function(){return function(){}}},l);function e(){return n}function f(a){var b=this,c=new Map();return Object.setPrototypeOf({direction:b.direction,iterator:function(e,f){var g=b.iterator(e,f);return{next:function(b){return(j||(j=d(\"PromiseOrValue\"))).loop(function(b){return(j||(j=d(\"PromiseOrValue\"))).map(g.next(b),function(b){if(b.done)return{action:\"break\",value:b};var e=b.value,f=e[0];e=e[1];if(a(e)){(i||(i=d(\"ReQLBounds\"))).forEachMatchingBounds(c,f,function(a){a.add(JSON.stringify(f))});return{action:\"break\",value:b}}(i||(i=d(\"ReQLBounds\"))).forEachMatchingBounds(c,f,function(a){a.delete(JSON.stringify(f))});return{action:\"continue\",value:void 0}})},b)}}},keyLength:b.keyLength,subscribe:function(e,f){var g={},h=new Set();c.set(g,[(i||(i=d(\"ReQLBounds\"))).extendBounds(f,b.keyLength),h]);var j=b.subscribe(function(b,c,d){var f=JSON.stringify(b);if(c.operation===\"add\"&&a(c.value)){h.add(f);return e(b,c,d)}if(c.operation===\"put\"&&a(c.value)){if(h.has(f))return e(b,c,d);h.add(f);return e(b,{operation:\"add\",value:c.value},d)}if(c.operation===\"put\"&&h.has(f)){h.delete(f);return e(b,{operation:\"delete\"},d)}if(c.operation===\"delete\"&&h.has(f)){h.delete(f);return e(b,c,d)}},f);return function(){c.delete(g);return j()}}},l)}function o(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=this;function f(a){return a.gt!=null?{gt:[].concat(b,a.gt)}:{gte:[].concat(b,a.gte)}}function g(a){return a.lt!=null?{lt:[].concat(b,a.lt)}:{lte:[].concat(b,a.lte)}}function h(a){return a==null?{gte:b,lte:b}:babelHelpers.extends({},a.gte!=null||a.gt!=null?f(a):{gte:b},a.lte!=null||a.lt!=null?g(a):{lte:b})}return Object.setPrototypeOf({direction:e.direction,iterator:function(a,c){var f=e.iterator(a,h(c));return{next:function(a){return(j||(j=d(\"PromiseOrValue\"))).map(f.next(a==null?a:[].concat(b,a)),function(a){return a.done?{done:!0}:{done:!1,value:[a.value[0].slice(b.length),a.value[1]]}})}}},keyLength:e.keyLength-b.length,subscribe:function(a,c){return e.subscribe(function(c,d,e){return a(c.slice(b.length),d,e)},h(c))}},l)}function p(a,b){if(a.direction!==b.direction)throw c(\"unrecoverableViolation\")(\"merge join requires iterables to be sorted in the same direction\",\"messenger_web_product\");return Object.setPrototypeOf({direction:a.direction,iterator:function(e,f){var g=a.iterator(e,f),h=b.iterator(e,f),i=h.next();function l(a){return(j||(j=d(\"PromiseOrValue\"))).map(i,function(b){var c=b.done?!0:(k||(k=d(\"ReStoreKeyComparer\"))).compareKey(a,b.value[0])<=0;c=c?b:h.next(a);i=c;return c})}return{next:function(a){return(j||(j=d(\"PromiseOrValue\"))).map(g.next(a),function(a){if(a.done)return{done:!0,value:void 0};var b=a.value;b=b[0];return(j||(j=d(\"PromiseOrValue\"))).map(l(b),function(b){var e=a.value,f=e[0];e=e[1];if(b.done)return{done:!1,value:[f,[e,void 0]]};b=b.value;var g=b[0];b=b[1];g=(k||(k=d(\"ReStoreKeyComparer\"))).compareKey(f,g);if(g>0)throw c(\"unrecoverableViolation\")(\"Right iterable should always be equal to or ahead\",\"messenger_web_product\");else if(g<0)return{done:!1,value:[f,[e,void 0]]};else return{done:!1,value:[f,[e,b]]}})})}}},keyLength:Math.max(a.keyLength,b.keyLength),subscribe:function(c,e){var f=!0,g=a.subscribe(async function(a,e,g){return(j||(j=d(\"PromiseOrValue\"))).map(b.iterator(g,{gte:a,lte:a}).next(),function(b){b=b.value;if(!f)return;return c(a,e.operation===\"add\"?{operation:\"add\",value:[e.value,b==null?void 0:b[1]]}:e.operation===\"put\"?{operation:\"put\",value:[e.value,b==null?void 0:b[1]]}:{operation:\"delete\"},g)})},e),h=b.subscribe(async function(b,e,g){return(j||(j=d(\"PromiseOrValue\"))).map(a.iterator(g,{gte:b,lte:b}).next(),function(a){if(!f||a.done)return;return c(b,e.operation===\"add\"?{operation:\"add\",value:[a.value[1],e.value]}:e.operation===\"put\"?{operation:\"put\",value:[a.value[1],e.value]}:{operation:\"delete\"},g)})},e);return function(){f=!1,g(),h()}}},l)}function q(a){var b=this,c=new Map();function e(a,b,c,e,g){var h=JSON.stringify(c),i=a.get(h);i==null&&(i=[],a.set(h,i));i.forEach(function(a){return a()});i.length=0;var k=i;g.forEach(function(g){k.push(g.subscribe(function(g,h,i){return(j||(j=d(\"PromiseOrValue\"))).map(f(a,b,c,e,i),function(a){return b(c,{operation:\"put\",value:a},i)})}))})}function f(b,c,f,g,h){return(j||(j=d(\"PromiseOrValue\"))).map(m(function(){return a(g)},h),function(a){var d=a[0];a=a[1];e(b,c,f,g,a);return d})}function g(a,b){var c=JSON.stringify(b);if(!a.has(c))return;b=(b=a.get(JSON.stringify(b)))!=null?b:[];b.forEach(function(a){return a()});b.length=0;a.delete(c)}return Object.setPrototypeOf({direction:b.direction,iterator:function(f,g){var h=b.iterator(f,g);return{next:function(b){return(j||(j=d(\"PromiseOrValue\"))).map(h.next(b),function(g){if(g.done)return g;g=g.value;var b=g[0],h=g[1];return(j||(j=d(\"PromiseOrValue\"))).map(j.map(m(function(){return a(h)},f),function(a){var f=a[0],g=a[1];(i||(i=d(\"ReQLBounds\"))).forEachMatchingBounds(c,b,function(a){var c=a[0];a=a[1];return e(c,a,b,h,g)});return f}),function(a){return{done:!1,value:[b,a]}})})}}},keyLength:b.keyLength,subscribe:function(a,e){var h={},k=new Map();c.set(h,[(i||(i=d(\"ReQLBounds\"))).extendBounds(e,b.keyLength),[k,a]]);var l=b.subscribe(function(b,c,e){if(c.operation===\"delete\"){g(k,b);return a(b,c,e)}else if(c.operation===\"add\"){var h=c.value;return(j||(j=d(\"PromiseOrValue\"))).map(f(k,a,b,h,e),function(c){return a(b,{operation:\"add\",value:c},e)})}else if(c.operation===\"put\"){h=c.value;return(j||(j=d(\"PromiseOrValue\"))).map(f(k,a,b,h,e),function(c){return a(b,{operation:\"put\",value:c},e)})}},e);return function(){k.forEach(function(a){a.forEach(function(a){return a()})}),c.delete(h),l()}}},l)}function r(a,b){var c=s(a,b);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return e.reduce(function(a,b){return s(a,b)},c)}function s(a,b){if(a.direction!==b.direction)throw c(\"unrecoverableViolation\")(\"union requires iterables to be sorted in the same direction\",\"messenger_web_product\");var e=Math.max(a.keyLength,b.keyLength);function f(a,b){return b===0||a.length===0?[]:a.slice(0,b)}function g(a){return a.gt!=null?{gt:f(a.gt,e)}:{gte:f(a.gte,e)}}function h(a){return a.lt!=null?{lt:f(a.lt,e)}:{lte:f(a.lte,e)}}function i(a){return a==null?void 0:babelHelpers.extends({},a.gte!=null||a.gt!=null?g(a):{},a.lte!=null||a.lt!=null?h(a):{})}return Object.setPrototypeOf({direction:a.direction,iterator:function(c,g){var h=a.iterator(c,i(g)),l=b.iterator(c,i(g)),m=h.next(),n=l.next();return{next:function(b){b!==void 0&&(m=h.next(f(b,e)),n=l.next(f(b,e)));return(j||(j=d(\"PromiseOrValue\"))).map(j.all2(m,n),function(b){var c=b[0];b=b[1];function e(a,b){if(a.done)return{done:!0};a={done:!1,value:[[].concat(a.value[0],[b]),a.value[1]]};b?m=h.next():n=l.next();return a}if(c.done)return e(b,!1);if(b.done)return e(c,!0);var f=a.direction===\"asc\"?[c,b]:[b,c],g=f[0];f=f[1];f=(k||(k=d(\"ReStoreKeyComparer\"))).compareKey((g=g.value)==null?void 0:g[0],(g=f.value)==null?void 0:g[0]);if(f<0)return e(c,!0);else return e(b,!1)})}}},keyLength:e+1,subscribe:function(c,d){var e=a.subscribe(function(a,b,d){return c([].concat(a,[!0]),b,d)},d),f=b.subscribe(function(a,b,d){return c([].concat(a,[!1]),b,d)},d);return function(){e(),f()}}},l)}function t(a,b){if(a.direction!==b.direction)throw c(\"unrecoverableViolation\")(\"merge join requires iterables to be sorted in the same direction\",\"messenger_web_product\");return Object.setPrototypeOf({direction:a.direction,iterator:function(c,e){var f=a.iterator(c,e),g=b.iterator(c,e);function h(a){return(j||(j=d(\"PromiseOrValue\"))).loop(function(a){var b=a[0];a=a[1];if(b.done||a.done)return{action:\"break\",value:{done:!0}};var c=b.value,e=c[0];c=c[1];var h=a.value,i=h[0];h=h[1];var l=(k||(k=d(\"ReStoreKeyComparer\"))).compareKey(e,i);if(l>0)return(j||(j=d(\"PromiseOrValue\"))).map(j.all2(b,g.next(e)),function(a){return{action:\"continue\",value:a}});else if(l<0)return(j||(j=d(\"PromiseOrValue\"))).map(j.all2(f.next(i),a),function(a){return{action:\"continue\",value:a}});return{action:\"break\",value:{done:!1,value:[e,[c,h]]}}},a)}return{next:function(a){return(j||(j=d(\"PromiseOrValue\"))).map(j.all2(f.next(a),g.next(a)),h)}}},keyLength:Math.max(a.keyLength,b.keyLength),subscribe:function(c,e){var f=!0;function g(a,b,e,g,h){return(j||(j=d(\"PromiseOrValue\"))).map(a.iterator(h,{gte:e,lte:e}).next(),function(a){if(a.done||!f)return;a=a.value[1];a=g.operation===\"add\"?{operation:\"add\",value:b(g.value,a)}:g.operation===\"put\"?{operation:\"put\",value:b(g.value,a)}:g;return c(e,a,h)})}var h=a.subscribe(function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return g.apply(void 0,[b,function(a,b){return[a,b]}].concat(c))},e),i=b.subscribe(function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return g.apply(void 0,[a,function(a,b){return[b,a]}].concat(c))},e);return function(){f=!1,h(),i()}}},l)}function u(a){var b=this,e=new Map();return Object.setPrototypeOf({direction:b.direction,iterator:function(c,f){var g=b.iterator(c,f),h=0;return{next:function(b){if(h>=a)return{done:!0};else return(j||(j=d(\"PromiseOrValue\"))).map(g.next(b),function(b){b.done||(i||(i=d(\"ReQLBounds\"))).forEachMatchingBounds(e,b.value[0],function(c){var d=c[0];c=c[1];c.contents<=a&&(d.has(b.value[0])||(c.contents+=1,d.set(b.value[0],void 0)))});h+=1;return b})}}},keyLength:b.keyLength,subscribe:function(f,g){var h={},l=b.direction===\"asc\"?1:-1,m=new(c(\"BPlusTree\"))(function(a,b){return(k||(k=d(\"ReStoreKeyComparer\"))).compareKey(a,b)*-l}),n={contents:0};e.set(h,[(i||(i=d(\"ReQLBounds\"))).extendBounds(g,b.keyLength),[m,n]]);var o=b.subscribe(function(c,g,i){var o,p=(o=m.entries().next().value)==null?void 0:o[0];o=p==null?!0:(k||(k=d(\"ReStoreKeyComparer\"))).compareKey(c,p)*l<=0;if(g.operation===\"delete\"&&o){var q;n.contents>0&&(m.delete(c),q=f(c,g,i));return(j||(j=d(\"PromiseOrValue\"))).map(q,function(){return(j||(j=d(\"PromiseOrValue\"))).map(b.iterator(i,p==null?void 0:l===1?{gt:p}:{lt:p}).next(),function(a){if(!a.done&&e.has(h)){m.set(a.value[0],void 0);return f(a.value[0],{operation:\"add\",value:a.value[1]},i)}n.contents>0&&(n.contents-=1)})})}if(g.operation===\"add\"&&n.contents<a){n.contents+=1;m.set(c,void 0);return f(c,g,i)}if(g.operation===\"add\"&&o){var r;p!=null&&(m.delete(p),r=f(p,{operation:\"delete\"},i));return(j||(j=d(\"PromiseOrValue\"))).map(r,function(){m.set(c,void 0);return f(c,g,i)})}if(g.operation===\"put\"&&o)return f(c,g,i)},g);return function(){e.delete(h);return o()}}},l)}var v=new WeakMap();function w(a,b){var c=v.get(a);if(c!=null)return c;c=b.reduce(function(b,c,d){b[c]=a[d];return b},{});v.set(a,c);return c}function x(a,b,c,e,f){if(f==null||f.length>a.keyFields.length||f.some(function(b){return a.keyFields.indexOf(b)===-1}))return a.entries(b,c,e);var g=a.keys(b,c,e);return{next:function(b){return(j||(j=d(\"PromiseOrValue\"))).map(g.next(b),function(b){return b.done?{done:!0}:{done:!1,value:[b.value,w(b.value,a.keyFields)]}})}}}function y(a,b){return Object.setPrototypeOf({direction:\"asc\",iterator:function(c,d){return x(a,c,\"asc\",d,b)},keyLength:a.keyFields.length,subscribe:function(c,d){return a.subscribe(c,d,b)}},l)}function z(a,b){return Object.setPrototypeOf({direction:\"desc\",iterator:function(c,d){return x(a,c,\"desc\",d,b)},keyLength:a.keyFields.length,subscribe:function(c,d){return a.subscribe(c,d,b)}},l)}function A(a){var b=[],c=a.iterator(new WeakMap());return Promise.resolve((j||(j=d(\"PromiseOrValue\"))).loop(function(){return(j||(j=d(\"PromiseOrValue\"))).map(c.next(),function(a){if(a.done)return{action:\"break\",value:b};b.push(a.value[1]);return{action:\"continue\",value:void 0}})}))}async function B(a){a=a.iterator(new WeakMap());a=await a.next();return a.done?void 0:a.value[1]}async function C(a){a=a.iterator(new WeakMap());a=await a.next();if(a.done)throw c(\"unrecoverableViolation\")(\"expected result\",\"messenger_web_product\");return a.value[1]}function D(a,b){var c=new WeakMap();function e(a){return a.gt!=null?{gt:a.gt.slice(1)}:{gte:a.gte.slice(1)}}function f(a){return a.lt!=null?{lt:a.lt.slice(1)}:{lte:a.lte.slice(1)}}function g(a){return a==null?void 0:babelHelpers.extends({},a.gte!=null||a.gt!=null?e(a):{},a.lte!=null||a.lt!=null?f(a):{})}return Object.setPrototypeOf({direction:a.direction,iterator:function(e,f){var g={};if(f){if(f.gt!=null){var h=f.gt,i=(k||(k=d(\"ReStoreKeyComparer\"))).compareValue(b,h[0]);if(i===0)if(h.length===1)return{next:function(){return{done:!0}}};else g.gt=h.slice(1);else if(i<0)return{next:function(){return{done:!0}}}}if(f.gte!=null){h=f.gte;i=(k||(k=d(\"ReStoreKeyComparer\"))).compareValue(b,h[0]);if(i===0)g.gte=h.slice(1);else if(i<0)return{next:function(){return{done:!0}}}}if(f.lte!=null){h=f.lte;i=(k||(k=d(\"ReStoreKeyComparer\"))).compareValue(b,h[0]);if(i===0)h.length!==1&&(g.lte=h.slice(1));else if(i>0)return{next:function(){return{done:!0}}}}if(f.lt!=null){h=f.lt;i=(k||(k=d(\"ReStoreKeyComparer\"))).compareValue(b,h[0]);if(i===0)if(h.length===1)return{next:function(){return{done:!0}}};else g.lt=h.slice(1);else if(i>0)return{next:function(){return{done:!0}}}}}var l=a.iterator(e,g);return{next:function(a){return(j||(j=d(\"PromiseOrValue\"))).map(l.next(a==null?void 0:a.slice(1)),function(a){if(a.done)return{done:!0};var d=c.get(a.value[0]);d==null&&(d=[b].concat(a.value[0]),c.set(a.value[0],d));return{done:!1,value:[d,a.value[1]]}})}}},keyLength:a.keyLength+1,subscribe:function(d,e){return a.subscribe(function(a,e,f){var g=c.get(a);g==null&&(g=[b].concat(a),c.set(a,g));return d(g,e,f)},g(e))}},l)}g.prototype=l;g.key=a;g.empty=e;g.leftJoin=p;g.union=r;g.mergeJoin=t;g.fromTableAscending=y;g.fromTableDescending=z;g.toArrayAsync=A;g.firstAsync=B;g.firstExnAsync=C;g.prependKey=D}),98);\n__d(\"SortedAsyncIterable\",[\"PromiseAnnotate\",\"PromiseOrValue\",\"ReQLGlobalQueryContext\",\"isPromise\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k;function l(a){var b;if((i||(i=d(\"ReQLGlobalQueryContext\"))).globalQueryContext.contents==null){var c=new WeakMap();(i||(i=d(\"ReQLGlobalQueryContext\"))).globalQueryContext.contents=c;return c}c=(i||(i=d(\"ReQLGlobalQueryContext\"))).globalQueryContext.contents;(b=(i||(i=d(\"ReQLGlobalQueryContext\"))).getDependencies(c))==null?void 0:b.push(a);return c}function a(a){var b=[],e=a.iterator(l(a)),f=(k||(k=d(\"PromiseOrValue\"))).loop(function(){return(k||(k=d(\"PromiseOrValue\"))).map(e.next(),function(a){if(a.done)return{action:\"break\",value:b};b.push(a.value);return{action:\"continue\",value:void 0}})});return(h||(h=c(\"isPromise\")))(f)?(j||(j=d(\"PromiseAnnotate\"))).setDisplayName(f,\"ReQL\"+(a.uniqueId!=null?\"_\"+a.uniqueId:\"\")):f}g.getOrCreateContext=l;g.toArray=a}),98);\n__d(\"applyChangesToBPlusTree\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){var c=!1;for(var e=0;e<b.length;e++){var f=b[e],g=f[0];f=f[1];switch(f.operation){case\"delete\":a[\"delete\"](g);break;case\"put\":var i=a.getWithDefault(g,void 0);if(i===f.value)continue;i=(h||(h=d(\"I64\"))).cast(i);if(i!=null){var j=(h||(h=d(\"I64\"))).cast(f.value);if(j!=null&&(h||(h=d(\"I64\"))).equal(i,j))continue}case\"add\":a.set(g,f.value);break}c=!0}b.length=0;return c}g[\"default\"]=a}),98);\n__d(\"createBPlusTreeFromSorted\",[\"BPlusTree\",\"ReStoreKeyComparer\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){return c(\"BPlusTree\").fromSorted(a,b===\"asc\"?(h||(h=d(\"ReStoreKeyComparer\"))).compareKey:(h||(h=d(\"ReStoreKeyComparer\"))).compareKeyDesc,64)}g[\"default\"]=a}),98);\n__d(\"shallowEqualI64\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){return Array.isArray(a)&&a.length===2&&Number.isInteger(a[0])&&Number.isInteger(a[1])}function j(a,b){if(a===b)return!0;return i(a)&&i(b)?(h||(h=d(\"I64\"))).equal(a,b):!1}function a(a,b){return k(a,b,j)}function k(a,b,c){c===void 0&&(c=function(a,b){return a===b});if(c(a,b))return!0;if(typeof a!==\"object\"||a===null||typeof b!==\"object\"||b===null)return!1;var d=Object.keys(a),e=Object.keys(b);if(d.length!==e.length)return!1;for(e=0;e<d.length;e++)if(!c(a[d[e]],b[d[e]],d[e]))return!1;return!0}g.shallowEqualI64=a;g.shallowEqual=k}),98);\n__d(\"ReStoreProvider.react\",[\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=h||d(\"react\"),j=i.createContext();function a(a){var b=a.children;a=a.db;return i.jsx(j.Provider,{value:a,children:b})}a.displayName=a.name+\" [from \"+f.id+\"]\";g.context=j;g.ReStoreProvider=a}),98);\n__d(\"useReStore\",[\"LSDatabaseSingleton\",\"LSSuspense\",\"PromiseAnnotate\",\"ReQLSuspenseSupportedContextTracking\",\"ReStoreProvider.react\",\"react\",\"suspendOrThrowIfUsedInSSR\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k,l,m,n=(m||d(\"react\")).useContext,o=(h||(h=c(\"LSSuspense\"))).makeCollection();function a(){d(\"ReQLSuspenseSupportedContextTracking\").useReStoreTrackInRender();var a=n((l||(l=d(\"ReStoreProvider.react\"))).context);if(a!=null)return a;(i||(i=c(\"suspendOrThrowIfUsedInSSR\")))(\"useReStore: LSDB is not available in SSR. Switching to client side render\");void (j||(j=d(\"PromiseAnnotate\"))).setDisplayName((k||(k=d(\"LSDatabaseSingleton\"))).LSDatabaseSingleton,\"LSDatabaseSingleton\");return(h||(h=c(\"LSSuspense\"))).getFromCollection(o,k.LSDatabaseSingleton,function(){return(k||(k=d(\"LSDatabaseSingleton\"))).LSDatabaseSingleton})}g[\"default\"]=a}),98);\n__d(\"ReQLSuspense\",[\"FBLogger\",\"I64\",\"Promise\",\"PromiseAnnotate\",\"PromiseOrValue\",\"ReQL\",\"ReQLGlobalQueryContext\",\"ReQLSuspenseSupportedContextTracking\",\"SortedAsyncIterable\",\"applyChangesToBPlusTree\",\"createBPlusTreeFromSorted\",\"isPromise\",\"promiseDone\",\"react\",\"shallowEqualI64\",\"useReStore\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k,l,m,n,o,p=m||d(\"react\"),q=p.startTransition,r=p.useEffect,s=p.useMemo,t=p.useState;function u(){var a=(o||(o=d(\"ReQLGlobalQueryContext\"))).globalQueryContext.withinSupportedContext===!0;return a?!0:d(\"ReQLSuspenseSupportedContextTracking\").isWithinReactRenderingContext()}function v(a,b,e){e===!0&&!u()&&c(\"FBLogger\")(\"messenger_web\",\"reqlsuspense_unsupported_use\").blameToPreviousFile().mustfix(\"Detected use of ReQLSuspense method in unsupported context.\\ntoArray\/first\/firstExn can only be used inside the body of a projection function passed to ReQL map operator.\\nFor React rendering contexts, please use appropriate hook (useArray\/useFirst\/useFirstExn) variants instead.\");if((i||(i=c(\"isPromise\")))(a))if(b!=null)throw(n||(n=d(\"PromiseAnnotate\"))).setDisplayName(a,b);else throw a;return a}function w(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1])?b.push(e[0],e[1]):b.push(e,void 0)}return b}function x(a){var b=arguments[1];return v(d(\"SortedAsyncIterable\").toArray(a),b,!0).map(function(a){a[0];a=a[1];return a})}function y(a){var b=arguments[1];return x(d(\"ReQL\").prototype.take.call(a,1),b)[0]}function z(a){var b=arguments[1],d=y(a,b);if(d==null)throw c(\"FBLogger\")(\"messenger_web\").mustfixThrow(\"expected result\");return d}function a(a,e){var f=arguments[2],g=s(function(){var b=a();b.uniqueId=f;return b},e==null?[a]:w(e)),i=s(function(){return v(d(\"SortedAsyncIterable\").toArray(g)).map(function(a){a[0];a=a[1];return a})},[g]),l=t([i,g]),m=l[0],n=l[1],o=(j||(j=c(\"useReStore\")))();r(function(){var a,e=[],f=g.subscribe(function(a,b){return void e.push([a,b])});function i(){if(e.length&&a!=null){var b=a;c(\"applyChangesToBPlusTree\")(b,e)&&n([Array.from(b.entries(),function(a){return a[1]}),g])}}var j=o.subscribeToCommit(i);c(\"promiseDone\")((h||(h=b(\"Promise\"))).resolve((k||(k=d(\"PromiseOrValue\"))).map(d(\"SortedAsyncIterable\").toArray(g),function(b){a=c(\"createBPlusTreeFromSorted\")(b,g.direction);var f=a;c(\"applyChangesToBPlusTree\")(f,e);q(function(){return n(function(a){var b=Array.from(f.entries(),function(a){return a[1]});return d(\"shallowEqualI64\").shallowEqualI64(a[0],b)&&a[1]===g?a:[b,g]})})})));return function(){j(),f()}},[g,o]);return g===m[1]?m[0]:i}function A(a,e){var f=arguments[2],g=s(function(){var b=a().take(1);b.uniqueId=f;return b},e==null?[a]:w(e)),i=s(function(){var a;return(a=v(g.iterator(d(\"SortedAsyncIterable\").getOrCreateContext(g)).next(),f).value)==null?void 0:a[1]},[g,f]),m=t([i,g]),n=m[0],o=m[1],p=(j||(j=c(\"useReStore\")))();r(function(){var a,e=!1,f=g.subscribe(function(b,c){switch(c.operation){case\"delete\":a=void 0;break;case\"put\":if(a===c.value)return;b=(l||(l=d(\"I64\"))).cast(a);if(b!=null){var f=(l||(l=d(\"I64\"))).cast(c.value);if(f!=null&&(l||(l=d(\"I64\"))).equal(b,f))return}case\"add\":a=c.value;break}e=!0}),i=F(p,function(){e&&(e=!1,o([a,g]))});c(\"promiseDone\")((h||(h=b(\"Promise\"))).resolve((k||(k=d(\"PromiseOrValue\"))).map(g.iterator(d(\"SortedAsyncIterable\").getOrCreateContext(g)).next(),function(b){var c;q(function(){return o(function(a){var c;return a[0]===((c=b.value)==null?void 0:c[1])&&a[1]===g?a:[(c=b.value)==null?void 0:c[1],g]})});a=(c=b.value)==null?void 0:c[1]})));return function(){i(),f()}},[g,p]);return g===n[1]?n[0]:i}function e(a,b){var d=arguments[2],e=A(a,b,d);if(e==null)throw c(\"FBLogger\")(\"messenger_web\").mustfixThrow(\"expected result\");return e}function B(a,b,c,e){var f=s(function(){var b=a();b.uniqueId=c;return b},b==null?[a]:w(b));return s(function(){return(o||(o=d(\"ReQLGlobalQueryContext\"))).runFromContextThatHandlesThrownPromise(function(){return e(f)})},[f,e])}function f(a,b){return B(a,b,arguments[2],x)}function C(a,b){return B(a,b,arguments[2],y)}function D(a,b){return B(a,b,arguments[2],z)}var E=new Map();function F(a,b){var c=E.get(a);if(c==null){var d=new Map();c={handlers:d,unsubscribe:a.subscribeToCommit(function(){q(function(){return d.forEach(function(a){return a()})})})};E.set(a,c)}var e={};c.handlers.set(e,b);var f=c;return function(){f.handlers[\"delete\"](e),f.handlers.size===0&&(f.unsubscribe(),E[\"delete\"](a))}}g.toArray=x;g.first=y;g.firstExn=z;g.useArray=a;g.useFirst=A;g.useFirstExn=e;g.useArrayWithoutSubscribing=f;g.useFirstWithoutSubscribing=C;g.useFirstExnWithoutSubscribing=D}),98);\n__d(\"sortBy\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){a=a.map(function(a,c){return{index:c,sortValue:b(a),value:a}});a.sort(function(a,b){var c=a.sortValue,d=b.sortValue;if(c>d)return 1;return c<d?-1:a.index-b.index});return a.map(function(a){return a.value})}f[\"default\"]=a}),66);\/*FB_PKG_DELIM*\/\n__d(\"URLMatcherConfig\",[],(function(a,b,c,d,e,f){e.exports={tlds:\"(?:\\\\.(com|\\ud55c\\uad6d|\\uc0bc\\uc131|\\ub2f7\\ucef4|\\ub2f7\\ub137|\\u9999\\u6e2f|\\u9999\\u683c\\u91cc\\u62c9|\\u9910\\u5385|\\u98df\\u54c1|\\u98de\\u5229\\u6d66|\\u96fb\\u8a0a\\u76c8\\u79d1|\\u96c6\\u56e2|\\u901a\\u8ca9|\\u8d2d\\u7269|\\u8c37\\u6b4c|\\u8bfa\\u57fa\\u4e9a|\\u8054\\u901a|\\u7f51\\u7edc|\\u7f51\\u7ad9|\\u7f51\\u5e97|\\u7f51\\u5740|\\u7ec4\\u7ec7\\u673a\\u6784|\\u79fb\\u52a8|\\u73e0\\u5b9d|\\u70b9\\u770b|\\u6fb3\\u9580|\\u6e38\\u620f|\\u6de1\\u9a6c\\u9521|\\u673a\\u6784|\\u66f8\\u7c4d|\\u65f6\\u5c1a|\\u65b0\\u95fb|\\u65b0\\u52a0\\u5761|\\u653f\\u5e9c|\\u653f\\u52a1|\\u624b\\u8868|\\u624b\\u673a|\\u6211\\u7231\\u4f60|\\u6148\\u5584|\\u5fae\\u535a|\\u5e7f\\u4e1c|\\u5de5\\u884c|\\u5bb6\\u96fb|\\u5a31\\u4e50|\\u5929\\u4e3b\\u6559|\\u5927\\u62ff|\\u5927\\u4f17\\u6c7d\\u8f66|\\u5728\\u7ebf|\\u5609\\u91cc\\u5927\\u9152\\u5e97|\\u5609\\u91cc|\\u5546\\u6807|\\u5546\\u5e97|\\u5546\\u57ce|\\u53f0\\u7063|\\u53f0\\u6e7e|\\u516c\\u76ca|\\u516c\\u53f8|\\u516b\\u5366|\\u5065\\u5eb7|\\u4fe1\\u606f|\\u4f5b\\u5c71|\\u4f01\\u4e1a|\\u4e2d\\u6587\\u7f51|\\u4e2d\\u570b|\\u4e2d\\u56fd|\\u4e2d\\u4fe1|\\u4e16\\u754c|\\u30dd\\u30a4\\u30f3\\u30c8|\\u30d5\\u30a1\\u30c3\\u30b7\\u30e7\\u30f3|\\u30bb\\u30fc\\u30eb|\\u30b9\\u30c8\\u30a2|\\u30b3\\u30e0|\\u30b0\\u30fc\\u30b0\\u30eb|\\u30af\\u30e9\\u30a6\\u30c9|\\u307f\\u3093\\u306a|\\u10d2\\u10d4|\\u0e44\\u0e17\\u0e22|\\u0e04\\u0e2d\\u0e21|\\u0dbd\\u0d82\\u0d9a\\u0dcf|\\u0d2d\\u0d3e\\u0d30\\u0d24\\u0d02|\\u0cad\\u0cbe\\u0cb0\\u0ca4|\\u0c2d\\u0c3e\\u0c30\\u0c24\\u0c4d|\\u0b9a\\u0bbf\\u0b99\\u0bcd\\u0b95\\u0baa\\u0bcd\\u0baa\\u0bc2\\u0bb0\\u0bcd|\\u0b87\\u0bb2\\u0b99\\u0bcd\\u0b95\\u0bc8|\\u0b87\\u0ba8\\u0bcd\\u0ba4\\u0bbf\\u0baf\\u0bbe|\\u0b2d\\u0b3e\\u0b30\\u0b24|\\u0aad\\u0abe\\u0ab0\\u0aa4|\\u0a2d\\u0a3e\\u0a30\\u0a24|\\u09ad\\u09be\\u09f0\\u09a4|\\u09ad\\u09be\\u09b0\\u09a4|\\u09ac\\u09be\\u0982\\u09b2\\u09be|\\u0938\\u0902\\u0917\\u0920\\u0928|\\u092d\\u093e\\u0930\\u094b\\u0924|\\u092d\\u093e\\u0930\\u0924\\u092e\\u094d|\\u092d\\u093e\\u0930\\u0924|\\u0928\\u0947\\u091f|\\u0915\\u0949\\u092e|\\u0680\\u0627\\u0631\\u062a|\\u067e\\u0627\\u06a9\\u0633\\u062a\\u0627\\u0646|\\u0647\\u0645\\u0631\\u0627\\u0647|\\u0645\\u0648\\u0642\\u0639|\\u0645\\u0648\\u0628\\u0627\\u064a\\u0644\\u064a|\\u0645\\u0644\\u064a\\u0633\\u064a\\u0627|\\u0645\\u0635\\u0631|\\u0643\\u0648\\u0645|\\u0643\\u0627\\u062b\\u0648\\u0644\\u064a\\u0643|\\u0642\\u0637\\u0631|\\u0641\\u0644\\u0633\\u0637\\u064a\\u0646|\\u0639\\u0645\\u0627\\u0646|\\u0639\\u0631\\u0628|\\u0639\\u0631\\u0627\\u0642|\\u0634\\u0628\\u0643\\u0629|\\u0633\\u0648\\u0631\\u064a\\u0629|\\u0633\\u0648\\u062f\\u0627\\u0646|\\u062a\\u0648\\u0646\\u0633|\\u0628\\u06be\\u0627\\u0631\\u062a|\\u0628\\u064a\\u062a\\u0643|\\u0628\\u0627\\u0632\\u0627\\u0631|\\u0628\\u0627\\u0631\\u062a|\\u0627\\u06cc\\u0631\\u0627\\u0646|\\u0627\\u0645\\u0627\\u0631\\u0627\\u062a|\\u0627\\u0644\\u0645\\u063a\\u0631\\u0628|\\u0627\\u0644\\u0639\\u0644\\u064a\\u0627\\u0646|\\u0627\\u0644\\u0633\\u0639\\u0648\\u062f\\u064a\\u0629|\\u0627\\u0644\\u062c\\u0632\\u0627\\u0626\\u0631|\\u0627\\u0644\\u0627\\u0631\\u062f\\u0646|\\u0627\\u0631\\u0627\\u0645\\u0643\\u0648|\\u0627\\u062a\\u0635\\u0627\\u0644\\u0627\\u062a|\\u0627\\u0628\\u0648\\u0638\\u0628\\u064a|\\u05e7\\u05d5\\u05dd|\\u0570\\u0561\\u0575|\\u049b\\u0430\\u0437|\\u0443\\u043a\\u0440|\\u0441\\u0440\\u0431|\\u0441\\u0430\\u0439\\u0442|\\u0440\\u0444|\\u0440\\u0443\\u0441|\\u043e\\u0440\\u0433|\\u043e\\u043d\\u043b\\u0430\\u0439\\u043d|\\u043c\\u043e\\u0441\\u043a\\u0432\\u0430|\\u043c\\u043e\\u043d|\\u043c\\u043a\\u0434|\\u043a\\u043e\\u043c|\\u043a\\u0430\\u0442\\u043e\\u043b\\u0438\\u043a|\\u0435\\u044e|\\u0434\\u0435\\u0442\\u0438|\\u0431\\u0435\\u043b|\\u0431\\u0433|\\u03b5\\u03bb|zw|zuerich|zone|zm|zippo|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--pbt977c|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbb9fbpob|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgbaakc7dvf|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpu716f|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq61u9w7b|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--estv75g|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3oq18vl8pn36a|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|vu|voyage|voto|voting|vote|volvo|volkswagen|vodka|vn|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verm\\xf6gensberatung|verm\\xf6gensberater|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|uconnect|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|symantec|sydney|sy|sx|swiss|swiftcover|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|st|srt|srl|sr|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|se|sd|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sc|sbs|sbi|sb|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|rocher|ro|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|raid|radio|racing|qvc|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|onyourside|online|onl|onion|ong|one|omega|om|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|northwesternmutual|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|natura|nationwide|name|nagoya|nadex|nab|na|mz|my|mx|mw|mv|mutual|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|ma|ly|lv|luxury|luxe|lupin|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|lk|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kinder|kim|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jlc|jio|jewelry|jetzt|jeep|je|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|it|istanbul|ist|ismaili|iselect|is|irish|ir|iq|ipiranga|io|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|guardian|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|glade|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|etisalat|et|esurance|estate|esq|es|erni|ericsson|er|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|domains|doha|dog|dodge|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrysler|chrome|christmas|chintai|cheap|chat|chase|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|ceb|cd|cc|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bugatti|budapest|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bnl|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|avianca|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|al|akdn|airtel|airforce|airbus|aigo|aig|ai|agency|agakhan|ag|africa|afl|afamilycompany|af|aetna|aero|aeg|ae|adult|ads|adac|ad|actor|active|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa))\"}}),null);\n__d(\"CometTaskFramework\",[\"BrowserLockManager\",\"Promise\",\"QuickPerformanceLogger\",\"asyncToGeneratorRuntime\",\"executeTask.xplat\",\"promiseDone\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=new Map();function k(a){return{issueTask:function(d,e,f){var g=c(\"qpl\")._(164763515,\"1216\");(i||(i=c(\"QuickPerformanceLogger\"))).markerStart(g);i.markerAnnotate(g,{string:{type:d}});var j=babelHelpers[\"extends\"]({id:Math.random(),name:d,payload:e},f);return new(h||(h=b(\"Promise\")))(function(d,e){var f=function(){var f=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){try{(i||(i=c(\"QuickPerformanceLogger\"))).markerPoint(g,\"execute\");var b=(yield c(\"executeTask.xplat\")(j.payload,{actorID:a,event:g,taskID:j.id},j.name));i.markerEnd(g,2);d(b)}catch(a){(i||(i=c(\"QuickPerformanceLogger\"))).markerEnd(g,3),e(a)}});return function(){return f.apply(this,arguments)}}();if(!c(\"BrowserLockManager\")||j.queue_name==null)return f();c(\"promiseDone\")(c(\"BrowserLockManager\")==null?void 0:c(\"BrowserLockManager\").request(j.queue_name,f))})}}}function a(a){var b=j.get(a);b==null&&(b=k(a),j.set(a,b));return b}g[\"default\"]=a}),98);\n__d(\"WAJobs\",[\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null;function i(){if(h==null)throw c(\"WAErr\")(\"WAJobs api called before set\");return h}function a(a){h=a}function b(){return i().jobResultConverter}function d(){return i().persistedJobs.api}function e(){return i().persistedJobs.manager}g.setJobsDependencies=a;g.getJobResultConvertersImpls=b;g.getPersistedJobsApi=d;g.getJobManager=e}),98);\n__d(\"MAWGlobals\",[\"WAGlobals\",\"WAJobs\",\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=null;function j(){if(i==null)throw c(\"err\")(\"MawMsgr api called before set\");return i}function a(){return j().config}function b(a){i=a,d(\"WAGlobals\").setGlobals(a),d(\"WAJobs\").setJobsDependencies(a)}function e(a){if(i==null)throw c(\"err\")(\"Cannot set CAT before all globals were set\");i.fbCat=a}function f(){return j().fbCat}function k(){return j().db}function l(){return j().persistedJobs.api}function m(){return j().persistedJobs.manager}function n(){return j().hmacKey}function o(){return j().dependencies}function p(a){if(i==null)throw c(\"err\")(\"Cannot set CAT before all globals were set\");i.activeThreadKey=a}function q(){return j().activeThreadKey}function r(){return j().offlineResumeStats}g.setMyJids=(h=d(\"WAGlobals\")).setMyJids;g.getMyDeviceJid=h.getMyDeviceJid;g.getMyUserJid=h.getMyUserJid;g.getJobResultConvertersImpls=d(\"WAJobs\").getJobResultConvertersImpls;g.isPeerDevice=h.isPeerDevice;g.getJidUtilsApi=h.getJidUtilsApi;g.getConfig=a;g.setGlobals=b;g.setFbCat=e;g.getFbCat=f;g.getDbImpls=k;g.getPersistedJobsApi=l;g.getJobManager=m;g.getHMACKey=n;g.getDependencies=o;g.setMAWActiveChatThreadKey=p;g.getMAWActiveChatThreadKey=q;g.getOfflineResumeStats=r}),98);\n__d(\"MAWAuthor\",[\"MAWGlobals\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(a){return a==null||a===d(\"WAJids\").AUTHOR_SYSTEM?null:d(\"WAJids\").isAuthorMe(a)?d(\"MAWGlobals\").getMyUserJid():d(\"WAJids\").authorAsUserJid(a)};g.getAuthorUserJid=a}),98);\n__d(\"WAStanzaUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a}f.toStanzaId=a}),66);\n__d(\"MAWExternalId\",[\"I64\",\"Random\",\"WALogger\",\"WAStanzaUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to parse stanza id \",\": \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to parse stanza id \",\" for platform: \",\"\"]);j=function(){return a};return a}var k=131071;function l(a){return Math.floor(c(\"Random\").random()*a)}function a(){return d(\"WAStanzaUtils\").toStanzaId((h||(h=d(\"I64\"))).to_string(h.and_(h.or_(h.lsl_(h.of_float(Date.now()),22),h.and_(h.of_float(l(k)),h.of_float(k))),h.max_int)))}function b(a){try{var b=(h||(h=d(\"I64\"))).of_float(4063232),c=h.of_float(0),e=h.of_float(131072);b=h.and_(h.of_string(a),b);if((h||(h=d(\"I64\"))).equal(b,c))return\"web\";return(h||(h=d(\"I64\"))).equal(b,e)?\"mobile\":\"unknown\"}catch(b){d(\"WALogger\").ERROR(j(),a,b);return\"error\"}}function e(a){var b=6917529027641082e3,c=!1;try{c=(h||(h=d(\"I64\"))).equal(h.and_(h.of_string(a),h.of_float(b)),h.of_float(b))}catch(b){d(\"WALogger\").ERROR(i(),a,b)}return c}g.generateExternalId=a;g.getPlatform=b;g.isStnazaId=e}),98);\n__d(\"MAWJids\",[\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"WAJids\").createJidUtils({platform:\"msgr\"});b=a.toUserJid;g.jidUtils=a;g.toUserJid=b}),98);\n__d(\"MAWBridgeDropAllSecureThreadsHandler\",[\"I64\",\"LSIntEnum\",\"LSMessagingThreadTypeUtil\",\"Promise\",\"ReQL\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j;function k(a){var c=d(\"ReQL\").fromTableAscending(a.threads_ranges_v2__generated).filter(function(a){return(i||(i=d(\"I64\"))).equal(a.parentThreadKey,(j||(j=d(\"LSIntEnum\"))).ofNumber(-1))||(i||(i=d(\"I64\"))).equal(a.parentThreadKey,(j||(j=d(\"LSIntEnum\"))).ofNumber(-10))});return d(\"ReQL\").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.threads_ranges_v2__generated[\"delete\"](c.parentThreadKey,c.minThreadKey,c.minLastActivityTimestampMs)})},(h||(h=b(\"Promise\"))).resolve())})}function l(a){var c=d(\"ReQL\").fromTableAscending(a.threads).filter(function(a){return d(\"LSMessagingThreadTypeUtil\").isSecure(a.threadType)});return d(\"ReQL\").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.threads[\"delete\"](c.threadKey)})},(h||(h=b(\"Promise\"))).resolve())})}function a(a){return(h||(h=b(\"Promise\"))).all([k(a),l(a)]).then(function(){return(h||(h=b(\"Promise\"))).resolve()})}g.call=a}),98);\n__d(\"InstamadilloMessageIdUtils\",[\"FBLogger\",\"I64\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a,b){var c;(h||(h=d(\"I64\"))).isI64(a)?c=(h||(h=d(\"I64\"))).to_string(a):c=a;return c+\":\"+b}function a(a){a=a.split(\":\");if(a.length!==2)throw c(\"FBLogger\")(\"igd_web_on_msgr\").mustfixThrow(\"Invalid instamadillo message id format. Format is <threadKey>:<stanzaId>.\");return{stanzaId:a[1],threadKey:a[0]}}function b(a){a=a.message.decrypted.id;var b=a.externalId;a=d(\"WAJids\").threadIdForChatJid(a.chat);return i(a,b)}g.toInstamadilloMessageId=i;g.fromInstamadilloMessageId=a;g.getInstsamadilloMessageIdFromStanza=b}),98);\n__d(\"IGDXMAAttachmentUtil\",[\"bx\"],(function(a,b,c,d,e,f,g){\"use strict\";b=c(\"bx\").getURL(c(\"bx\")(\"13341\"));var h=String.fromCodePoint(128293),i=String.fromCodePoint(128546),j=String.fromCodePoint(128079),k=String.fromCodePoint(128558),l=String.fromCodePoint(128514),m=String.fromCodePoint(128525);function a(a){return a!=null?a===h||a===i||a===j||a===k||a===l?!0:a===m:!1}g.DEFAULT_PROFILE_URL=b;g.isEmojiReaction=a}),98);\n__d(\"LSDatabaseSingletonLazyWrapper\",[\"LSDatabaseSingleton\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(){return(h||(h=d(\"LSDatabaseSingleton\"))).LSDatabaseSingleton}g[\"default\"]=a}),98);\n__d(\"MWLinkRegex\",[],(function(a,b,c,d,e,f){\"use strict\";function a(){var a=\"(?:(?:[a-z]+:)?\/\/)?\",b=\"(?:\\\\S+(?::\\\\S*)?@)?\",c=\"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\",d=\"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\",e=\"(?:\\\\.(?:((?:[a-z\\\\u00a1-\\\\uffff]{2,}))))\\\\.?\",f=\"(?::\\\\d{2,5})?\",g='(?:[\/?#][^\\\\s\"]*)?';a=\"(?:\"+a+\"|www\\\\.)\"+b+\"(?:localhost|\"+c+d+e+\")\"+f+g;return new RegExp(a,\"ig\")}function b(){var a=\"(^|)[^@\\\\s]+@[^@]+[.][^@\\\\s]+(?!\\\\S)\";return new RegExp(a,\"ig\")}f.getLinkRegex=a;f.getEmailRegex=b}),66);\n__d(\"VideoPlayerWithLiveVideoInterruptedOverlay.react\",[\"fbt\",\"CometLoadingAnimation.react\",\"TetraTextPairing.react\",\"VideoPlayerHooks\",\"VideoPlayerInteractionOverlay.react\",\"react\"],(function(a,b,c,d,e,f,g,h){\"use strict\";var i,j,k=i||d(\"react\");function a(){var a=(j||(j=d(\"VideoPlayerHooks\"))).useStreamInterrupted(),b=j.useIsLiveRewindActive();return!a||b?null:k.jsx(d(\"VideoPlayerInteractionOverlay.react\").VideoPlayerInteractionOverlay,{children:k.jsxs(\"div\",{className:\"x6s0dn4 x18l40ae x1ey2m1c x9f619 x78zum5 xds687c xdt5ytf xl56j7k x10l6tqk x17qophe x13vifvy\",children:[k.jsx(\"div\",{children:k.jsx(c(\"TetraTextPairing.react\"),{body:h._(\"__JHASH__VF7_ry1JLc___JHASH__\"),bodyColor:\"white\",headline:h._(\"__JHASH__BFvlG3IxPd7__JHASH__\"),headlineColor:\"white\",level:2,textAlign:\"center\"})}),k.jsx(\"div\",{className:\"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe\",children:k.jsx(c(\"CometLoadingAnimation.react\"),{size:36})})]})})}a.displayName=a.name+\" [from \"+f.id+\"]\";g[\"default\"]=a}),226);\n__d(\"URLMatcher\",[\"URLMatcherConfig\"],(function(a,b,c,d,e,f){d=\"!\\\"#%&'()*,-.\/:;<>?@[\\\\]^_`{|}\";f=\"\\u2000-\\u206f\\xab\\xbb\\uff08\\uff09\";var g=\"(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\",h=\"(?:https?):\/\/\";g=\"(?:(?:\"+g+\"[.]){3}\"+g+\")\";var i=\"\\\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\\\]\",j=\"(?:\\\\b)www\\\\d{0,3}[.]\";d=\"[^\\\\s\"+d+f+\"]\";f=\"(?:(?:(?:[.:\\\\-_%@]|\"+d+\")*\"+d+\")|\"+i+\")\";d=\"(?::\\\\d+){0,1}\";var k=\"(?=[\/?#])\";b=b(\"URLMatcherConfig\").tlds;var l=\"(?:(?:\"+h+f+d+\")|(?:\"+g+d+\")|(?:\"+i+d+\")|(?:\"+j+f+b+d+\")|(?:\"+f+b+d+k+\"))\";k=\"(?:(?:\"+h+f+d+\")|(?:\"+g+d+\")|(?:\"+i+d+\")|(?:\"+j+f+b+d+\")|(?:\"+f+b+d+\"))\";g=\"[\/#?]\";i=\"\\\\([^\\\\s()<>]+\\\\)\";var m=\"[^\\\\s()<>?#]+\",n=new RegExp(l,\"im\"),o=\"^\\\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\\\]\",p=new RegExp(o,\"im\"),q=\"(?:(?:\"+g+\")(?:(?:\"+i+\"|\"+m+\")*)*)*\",r=new RegExp(\"((?:\"+k+\")(?:\"+q+\"))\",\"im\");function a(){r.compile()}var s=new RegExp(\"((?:\"+h+f+d+\")|(?:\"+j+f+b+d+\"))\"),t=\/[\\s\\'\\\";]\/,u=new RegExp(g,\"im\"),v=new RegExp(\"[\\\\s!\\\"#%&'()*,.\/:;<>?@[\\\\]^`{|}\\xab\\xbb\\u2000-\\u206f\\uff08\\uff09]\",\"im\"),w=new RegExp(\"[\\\\s()<>?#]\",\"im\"),x=new RegExp(\"\\\\s()<>\"),y=function(a){if(a!=null&&a.indexOf(\"@\")!=-1)return s.exec(a)?a:null;else return a},z=function(a){return new RegExp(\"((?:\"+l+\")(?:\"+q+\"))\",a)};function c(){return r.source}o=function(a){return A(a,z(\"im\"))};i=function(a){return B(a,z(\"igm\"))};m=function(a){return A(a,r)};var A=function(a,b){b=b.exec(a);return b==null||b.length===0?null:y(b[1]||null)},B=function(a,b){a=a.match(b);return a==null?[]:a.filter(Boolean)||[]};k=function(a){return n.exec(a)};h=function(a){return!t.test(a.charAt(a.length-1))};j=function(a){a=a;var b=!1;do{var c=n.exec(a);if(!c)return null;b=!1;if(c[0][0]===\"[\"&&c.index>0&&a[c.index-1]===\"@\"){var d=p.exec(c[0]);d&&(b=!0,a=a.substr(c.index+d[0].length))}}while(b);if(!c)return null;d=a.substr(c.index+c[0].length);if(d.length===0||!u.test(d[0]))return y(c[0]);b=0;a=0;var e=1,f=[\"(\",\"[\"],g=[\")\",\"]\"],h=0,i=a;for(var j=1;j<d.length;j++){var k=d[j];if(i===a){if(f.includes(k))h+=1,i=e;else if(u.test(k)||!v.test(k))b=j;else if(w.test(k))break}else if(f.includes(k))h+=1;else if(g.includes(k))h-=1,h===0&&(i=a,b=j);else if(x.test(k))break}return y(c[0]+d.substring(0,b+1))};f={compilePermissiveHostPathMatcher:a,permissiveHostPathMatch:m,permissiveMatch:o,permissiveMultiMatch:i,matchToPattern:A,multiMatchToPattern:B,matchHost:k,trigger:h,match:j,getPermissiveHostPathMatcherSource:c};e.exports=f}),null);\n__d(\"LSMessageRenderingType\",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,NON_COLLAPSIBLE_ADMIN_MESSAGE:1,HIDDEN:2,RICH_TEXT_COMMON_MARK:3});f[\"default\"]=a}),66);\n__d(\"LSMessageReplySourceType\",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19});f[\"default\"]=a}),66);\n__d(\"LSMessageSendStatus\",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});f[\"default\"]=a}),66);\n__d(\"LSQuickReplyType\",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,HORIZONTAL:1,VERTICAL:2});f[\"default\"]=a}),66);\n__d(\"LSReplyMessageAttachmentType\",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,SOUND_BITE:9,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16});f[\"default\"]=a}),66);\n__d(\"LSReplyMessageStatus\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,VALID:1,DELETED:2,TEMPORARY_UNAVAILABLE:3,EXPIRED:4});f[\"default\"]=a}),66);\n__d(\"LSXmaContentType\",[],(function(a,b,c,d,e,f){a=Object.freeze({TEST:-1,NONE:0,IG_MEDIA_SHARE:1e3,IG_MULTIPOST_SHARE:1001,IG_STORY_REPLY:1002,IG_STORY_PHOTO_SHARE:1003,IG_STORY_PHOTO_MENTION:1004,IG_CLIPS_SHARE:1005,IG_SINGLE_VIDEO_POST_SHARE:1006,IG_STORY_VIDEO_SHARE:1007,IG_STORY_REACTION:1008,IG_IGTV_SHARE:1009,IG_SHOP_SHARE:1010,IG_PROFILE_SHARE:1011,IG_STORY_PHOTO_HIGHLIGHT_SHARE:1012,IG_STORY_VIDEO_HIGHLIGHT_SHARE:1013,IG_STORY_VIDEO_MENTION:1014,IG_STORY_HIGHLIGHT_REPLY:1015,IG_STORY_HIGHLIGHT_REACTION:1016,IG_EXTERNAL_LINK:1017,IG_RECEIVER_FETCH:1018,IG_TEXT_POST_APP_SHARE:1019,FB_FEED_SHARE:2e3,FB_STORY_REPLY:2001,FB_STORY_SHARE:2002,FB_STORY_MENTION:2003,FB_FEED_VIDEO_SHARE:2004,FB_GAMING_CUSTOM_UPDATE:2005,FB_PRODUCER_STORY_REPLY:2006,FB_EVENT:2007,FB_FEED_POST_PRIVATE_REPLY:2008,FB_SHORT:2009,MSG_EXTERNAL_LINK_SHARE:3e3,MSG_P2P_PAYMENT:3001,MSG_LOCATION_SHARING_DEPRECATED:3002,MSG_LOCATION_SHARING_V2:3003,MSG_RECEIVER_FETCH:3006,MSG_IG_MEDIA_SHARE:3007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:3008,MSG_REELS_LIST:3009,MSG_CONTACT:3010,MSG_FILE:3012,MSG_AI_CONTACT:3014,MSG_MEMORIES_SHARE:3015,MSG_EARLY_ACCESS_FB_SHARE:3016,RTC_AUDIO_CALL:4e3,RTC_VIDEO_CALL:4001,RTC_MISSED_AUDIO_CALL:4002,RTC_MISSED_VIDEO_CALL:4003,RTC_GROUP_AUDIO_CALL:4004,RTC_GROUP_VIDEO_CALL:4005,RTC_MISSED_GROUP_AUDIO_CALL:4006,RTC_MISSED_GROUP_VIDEO_CALL:4007,LIVE_LOCATION:5e3,OC_AVATAR_STATIC_STICKER:6e3});f[\"default\"]=a}),66);\n__d(\"MNLSXMALayoutType\",[],(function(a,b,c,d,e,f){a=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17});f[\"default\"]=a}),66);\n__d(\"MNXMAPreviewImageDecorationType\",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15});f[\"default\"]=a}),66);\n__d(\"MessagingAttachmentType\",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});f[\"default\"]=a}),66);\n__d(\"LSGetIfViewerIsWorkplaceUser\",[\"gkx\"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1],d=[];return d[0]=c(\"gkx\")(\"26374\"),b.resolve(d)}b=a;g[\"default\"]=b}),98);\n__d(\"LSBumpThread\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[1],b.i64.cast([0,1]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,2]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,3]))?b.db.table(9).fetch([[[a[2]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,b.i64.le(d.lastActivityTimestampMs,d.lastReadWatermarkTimestampMs)?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}))}):b.resolve(0)},function(a){return b.resolve(c)}])}e.exports=a}),null);\n__d(\"LSGetThreadParticipantDisplayName\",[\"LSGetIfViewerIsWorkplaceUser\"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.storedProcedure(b(\"LSGetIfViewerIsWorkplaceUser\")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[0]?c.sequence([function(b){return c.filter(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2352696798]),void 0).then(function(a){return d[4]=a})},function(a){return d[2]=d[4]}]):(b=a.item,d[2]=b.name)})},function(a){return d[1]=d[2]}]):c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=void 0:(b=a.item,d[2]=b.nickname)})},function(b){return c.filter(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):(b=a.item,d[4]=b.firstName==null?b.name:b.firstName)})},function(a){return d[1]=d[2]==null?d[4]:d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);\n__d(\"OfflineThreadingId\",[\"I64\",\"XPlatReactCrypto\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||(h=d(\"I64\"))).of_string(\"4194303\");function a(){return(h||(h=d(\"I64\"))).to_string(j())}function j(){var a=d(\"XPlatReactCrypto\").getRandomValues(new Uint8Array(8));a=new DataView(a.buffer);a=(h||(h=d(\"I64\"))).add(h.lsl_(h.of_int32(a.getUint32(0)),32),h.of_int32(a.getUint32(4)));return k(Date.now(),a)}function k(a,b){return(h||(h=d(\"I64\"))).and_(h.or_(h.lsl_(h.of_float(a),22),h.and_(b,i)),h.max_int)}function b(a){var b=j(),c=[];for(var e=0;e<a.length;e++)c.push([a[e],(h||(h=d(\"I64\"))).to_string(b)]),b=l(b);return c}function l(a,b){b===void 0&&(b=(h||(h=d(\"I64\"))).one);var c=m(a);a=n(a);return k(c,(h||(h=d(\"I64\"))).add(a,b))}function m(a){return(h||(h=d(\"I64\"))).to_float(h.lsr_(a,22))}function n(a){return(h||(h=d(\"I64\"))).and_(a,i)}g.createOfflineThreadingID=a;g.createForItemsInOrder=b;g.extractTimestamp=m}),98);\n__d(\"WALongInt\",[\"WAHex\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is not a valid decimal string']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" is not a safe integer\"]);j=function(){return a};return a}function k(a){if(typeof a!==\"number\"){d(\"WALogger\").LOG(j(),a).color(\"red\");throw new Error(\"numberOrThrowIfTooLarge is given a non-safe integer\")}return a}e=function(a){return a==null?a:k(a)};function a(a,b){if(typeof a===\"number\"&&typeof b===\"number\")return a>b;a=typeof a===\"number\"?d(\"WAHex\").hexLongFromNumber(a):a;b=typeof b===\"number\"?d(\"WAHex\").hexLongFromNumber(b):b;return d(\"WAHex\").isBiggerHexLong(a,b)}function b(a){if(typeof a===\"number\")return a.toString(10);var b=d(\"WAHex\").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d(\"WAHex\").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]\/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e\/10|0}g=c.reverse().join(\"\");return d(\"WAHex\").hexLongIsNegative(a)?\"-\"+g:g}function c(a){if(!\/^-?\\d+$\/.test(a)){d(\"WALogger\").LOG(i(),a).color(\"red\");throw new Error(\"decimalStringToLongInt is given an invalid decimal string\")}var b=a[0]===\"-\",c=a.replace(\/^-?0*\/,\"\"),e=c.length;if(e<16||e===16&&c<=\"9007199254740991\")return b?-Number(c):Number(c);if(e>20||e===20&&c>\"18446744073709551615\"||b&&(e>19||e===19&&c>\"9223372036854775807\")){d(\"WALogger\").LOG(h(),a).color(\"red\");throw new Error(\"decimalStringToHexLong is given value over 64 bits\")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a\/4294967296),a=a%4294967296;return d(\"WAHex\").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=e;g.isBiggerLongInt=a;g.longIntToDecimalString=b;g.decimalStringToLongInt=c}),98);\/*FB_PKG_DELIM*\/\n__d(\"MAWDbVersionList\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a}b={V21:21,V22:22,V23:23,V24:24,V25:25,V26:26,V27:27,V28:28,V29:29,V30:30,V31:31,V32:32,V33:33,V34:34,V35:35,V36:36,V37:37,V38:38,V39:39,V40:40,V41:41,V42:42,V43:43,V44:44,V45:45,V46:46,V47:47,V48:48,V49:49,V50:50,V51:51,V52:52,V53:53,V54:54,V55:55,V56:56,V57:57,V58:58,V59:59,V60:60,V61:61,V62:62,V63:63,V64:64,V65:65,V66:66,V67:67,V68:68,V69:69,V70:70,V71:71,V72:72,V73:73,V74:74,V75:75,V76:76,V77:77,V78:78,V79:79,V80:80,V81:81,V82:82,V83:83,V84:84,V85:85,V86:86,V87:87,V88:88,V89:89,V90:90,V91:91,V92:92,V93:93,V94:94,V95:95,V96:96,V97:97,V98:98,V99:99,V100:100,V101:101,V102:102,V103:103};f.toVersion=a;f.VERSION=b}),66);\n__d(\"MAWDbSchema\",[\"MAWDbVersionList\"],(function(a,b,c,d,e,f,g){\"use strict\";a=[{autoIncrement:!0,indexes:{externalId:{columns:[\"externalId\"]}},name:\"e2ee_appData\",primaryKey:[\"appDataId\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_meta\",primaryKey:[\"key\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_appMeta\",primaryKey:[\"key\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_prekey\",primaryKey:[\"keyId\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_prekeyGeneration\",primaryKey:[\"generationId\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_session\",primaryKey:[\"id\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_signedPrekey\",primaryKey:[\"keyId\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_tasks\",primaryKey:[\"taskName\"]},{autoIncrement:!1,indexes:{groupJid:{columns:[\"groupJid\"],unique:!1},userJid:{columns:[\"userJid\"],unique:!1}},name:\"e2ee_senderKeySessions\",primaryKey:[\"id\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_personalSenderKeyStatuses\",primaryKey:[\"groupJid\"]},{autoIncrement:!0,indexes:{altIndex:{columns:[\"altIndex\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]},{autoIncrement:!0,indexes:{externalId:{columns:[\"externalId\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1}},name:\"e2ee_unrenderedMessages\",primaryKey:[\"rowId\"]},{autoIncrement:!0,indexes:{externalIdWithType:{columns:[\"externalIdWithType\"],unique:!1}},name:\"e2ee_pendingStanzas\",primaryKey:[\"rowId\"]},{autoIncrement:!1,indexes:{threadId:{columns:[\"threadId\"],unique:!1},userJid:{columns:[\"userJid\"],unique:!1}},name:\"e2ee_participants\",primaryKey:[\"id\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_contacts\",primaryKey:[\"contactJid\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_receipts\",primaryKey:[\"msgId\"]},{autoIncrement:!0,indexes:{\"*msgIds\":{columns:[\"msgIds\"],multiEntry_DO_NOT_USE:!0},hashedPlaintextHash:{columns:[\"hashedPlaintextHash\"]}},name:\"e2ee_media\",primaryKey:[\"mediaId\"]},{autoIncrement:!0,indexes:{externalId:{columns:[\"externalId\"],unique:!1},reactionId:{columns:[\"reactionId\"],unique:!1},reactToExternalId:{columns:[\"reactToExternalId\"],unique:!1},reactToMsgId:{columns:[\"reactToMsgId\"],unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1}},name:\"e2ee_reactions\",primaryKey:[\"rowId\"]},{autoIncrement:!0,indexes:{hashedPlaintextHash:{columns:[\"hashedPlaintextHash\"]}},name:\"e2ee_chunk\",primaryKey:[\"chunkId\"]},{autoIncrement:!0,indexes:{jid:{columns:[\"jid\"]},threadOrder:{columns:[\"threadOrder\"],unique:!1}},name:\"e2ee_threads\",primaryKey:[\"chatId\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_existingUsers\",primaryKey:[\"id\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_pendingReceipts\",primaryKey:[\"id\"]},{autoIncrement:!0,indexes:{version:{columns:[\"version\"]}},name:\"e2ee_browserEncryptionMeta\",primaryKey:[\"id\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_ftsBackloggedMessages\",primaryKey:[\"rowId\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_ftsEncryptionMeta\",primaryKey:[\"key\"]},{autoIncrement:!0,indexes:{\"*prefixes\":{columns:[\"prefixes\"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:[\"chatId\"],unique:!1},id:{columns:[\"id\"],unique:!1}},name:\"e2ee_ftsIndexV3\",primaryKey:[\"ftsRowId\"]},{autoIncrement:!0,indexes:{uniqKey:{columns:[\"uniqKey\"]}},name:\"e2ee_jobs\",primaryKey:[\"jobId\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_identity\",primaryKey:[\"deviceJid\"]},{autoIncrement:!1,indexes:{threadId:{columns:[\"threadId\"],unique:!1}},name:\"e2ee_groupInfo\",primaryKey:[\"groupJid\"]}];b=[{autoIncrement:!0,indexes:{altIndex:{columns:[\"altIndex\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1},unsendMsgContentDeleteTs:{columns:[\"unsendMsgContentDeleteTs\"],unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]}];c=[{autoIncrement:!0,indexes:{altIndex:{columns:[\"altIndex\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],unique:!1},revokedExternalId:{columns:[\"revokedExternalId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1},unsendMsgContentDeleteTs:{columns:[\"unsendMsgContentDeleteTs\"],unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]}];e=[{autoIncrement:!0,indexes:{},name:\"e2ee_isDualSend\",primaryKey:[\"rowId\"]}];f=[{autoIncrement:!1,indexes:{},name:\"e2ee_historySyncQRCodeSecretKey\",primaryKey:[\"key\"]}];var h=[{autoIncrement:!0,indexes:{externalId:{columns:[\"externalId\"],unique:!1},messageDeleteForMeTs:{columns:[\"messageDeleteForMeTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1}},name:\"e2ee_unrenderedMessages\",primaryKey:[\"rowId\"]}],i=[{autoIncrement:!0,indexes:{altIndex:{columns:[\"altIndex\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],unique:!1},revokedExternalId:{columns:[\"revokedExternalId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1},unsendMsgContentDeleteTs:{columns:[\"unsendMsgContentDeleteTs\"],unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]},{autoIncrement:!0,indexes:{externalId:{columns:[\"externalId\"],unique:!1},messageDeleteForMeTs:{columns:[\"messageDeleteForMeTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1}},name:\"e2ee_unrenderedMessages\",primaryKey:[\"rowId\"]}],j=[{autoIncrement:!1,indexes:{inviterJid:{columns:[\"inviterJid\"],unique:!1}},name:\"e2ee_groupInvites\",primaryKey:[\"invitedParticipantId\"]}],k=[{autoIncrement:!0,indexes:{deleteTs:{columns:[\"deleteTs\"],unique:!1},externalIdWithType:{columns:[\"externalIdWithType\"],unique:!1}},name:\"e2ee_pendingStanzas\",primaryKey:[\"rowId\"]}],l=[{autoIncrement:!0,indexes:{\"*msgIds\":{columns:[\"msgIds\"],multiEntry_DO_NOT_USE:!0},fbid:{columns:[\"fbid\"]},hashedPlaintextHash:{columns:[\"hashedPlaintextHash\"]},objectId:{columns:[\"objectId\"]}},name:\"e2ee_media\",primaryKey:[\"mediaId\"]}],m=[{autoIncrement:!0,indexes:{},name:\"e2ee_dualSendMedia\",primaryKey:[\"id\"]}],n=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:[\"associatedMessageId\"],unique:!1},defaultPreviewMediaId:{columns:[\"defaultPreviewMediaId\"],unique:!1},faviconMediaId:{columns:[\"faviconMediaId\"],unique:!1},headerMediaId:{columns:[\"headerMediaId\"],unique:!1},targetExpiringAtSec:{columns:[\"targetExpiringAtSec\"],unique:!1}},name:\"e2ee_xma\",primaryKey:[\"xmaId\"]}],o=[{autoIncrement:!1,indexes:{},name:\"e2ee_historySyncQRCodeData\",primaryKey:[\"rowId\"]}],p=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:[\"associatedMessageId\"],unique:!1},defaultPreviewMediaId:{columns:[\"defaultPreviewMediaId\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},faviconMediaId:{columns:[\"faviconMediaId\"],unique:!1},headerMediaId:{columns:[\"headerMediaId\"],unique:!1},targetExpiringAtSec:{columns:[\"targetExpiringAtSec\"],unique:!1}},name:\"e2ee_xma\",primaryKey:[\"xmaId\"]}],q=[{autoIncrement:!0,indexes:{},name:\"e2ee_dyiBatch\",primaryKey:[\"batchId\"]}],r=[{autoIncrement:!1,indexes:{correspondingOpenThreadKey:{columns:[\"correspondingOpenThreadKey\"],unique:!1},threadId:{columns:[\"threadId\"],unique:!1}},name:\"e2ee_groupInfo\",primaryKey:[\"groupJid\"]}],s=[{autoIncrement:!1,indexes:{},name:\"e2ee_groupInvites\",primaryKey:[\"invitedParticipantId\",\"inviterJid\"],removed:!0}],t=[{autoIncrement:!1,indexes:{inviterJid:{columns:[\"inviterJid\"],unique:!1}},name:\"e2ee_groupInvites\",primaryKey:[\"invitedParticipantId\",\"inviterJid\"]}],u=[{autoIncrement:!0,indexes:{\"[thread+sortOrderMs]\":{columns:[\"thread\",\"sortOrderMs\"],unique:!1},altIndex:{columns:[\"altIndex\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],unique:!1},revokedExternalId:{columns:[\"revokedExternalId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1},unsendMsgContentDeleteTs:{columns:[\"unsendMsgContentDeleteTs\"],unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]},{autoIncrement:!0,indexes:{\"[thread+sortOrderMs]\":{columns:[\"thread\",\"sortOrderMs\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteForMeTs:{columns:[\"messageDeleteForMeTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1}},name:\"e2ee_unrenderedMessages\",primaryKey:[\"rowId\"]}],v=[{autoIncrement:!1,indexes:{\"[modelId+modelType+actionState]\":{columns:[\"modelId\",\"modelType\",\"actionState\"],unique:!1},action:{columns:[\"action\"],unique:!1},actionState:{columns:[\"actionState\"],unique:!1},collection:{columns:[\"collection\"],unique:!1},indexMac:{columns:[\"indexMac\"],unique:!1}},name:\"e2ee_syncActions\",primaryKey:[\"index\"]}],w=[{autoIncrement:!1,indexes:{},name:\"e2ee_missingKeys\",primaryKey:[\"keyHex\"]}],x=[{autoIncrement:!0,indexes:{action:{columns:[\"action\"],unique:!1},collection:{columns:[\"collection\"],unique:!1},index:{columns:[\"index\"],unique:!1}},name:\"e2ee_pendingMutations\",primaryKey:[\"id\"]}],y=[{autoIncrement:!0,indexes:{collection:{columns:[\"collection\"]}},name:\"e2ee_collectionVersions\",primaryKey:[\"id\"]}],z=[{autoIncrement:!0,indexes:{keyEpoch:{columns:[\"keyEpoch\"],unique:!1},keyId:{columns:[\"keyId\"]}},name:\"e2ee_syncKeys\",primaryKey:[\"id\"]}],A=[{autoIncrement:!1,indexes:{userJid:{columns:[\"userJid\"],unique:!1}},name:\"e2ee_identity\",primaryKey:[\"deviceJid\"]}],B=[{autoIncrement:!1,indexes:{externalId:{columns:[\"externalId\"],unique:!1},lastRetryTs:{columns:[\"lastRetryTs\"],unique:!1},traceId:{columns:[\"traceId\"],unique:!1}},name:\"e2ee_uploadRetryStatus\",primaryKey:[\"externalId\",\"lastRetryTs\"]}],C=[{autoIncrement:!0,indexes:{jid:{columns:[\"jid\"],unique:!1},stanzaId:{columns:[\"stanzaId\"],unique:!1},type:{columns:[\"type\"],unique:!1}},name:\"e2ee_stanzaQueue\",primaryKey:[\"stanzaQueueId\"]}],D=[{autoIncrement:!0,indexes:{},name:\"e2ee_deviceChangeAlerts\",primaryKey:[\"deviceChangeAlertsId\"]}],E=[{autoIncrement:!1,indexes:{},name:\"e2ee_retroactiveBackupsState\",primaryKey:[\"threadId\"]}],F=[{autoIncrement:!0,indexes:{deduplicationKey:{columns:[\"deduplicationKey\"],predicate:function(a){return a.deduplicationKey!=null}},jid:{columns:[\"jid\"]},threadOrder:{columns:[\"threadOrder\"],unique:!1}},name:\"e2ee_threads\",primaryKey:[\"chatId\"]}],G=[{autoIncrement:!0,indexes:{mediaId:{columns:[\"mediaId\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},objectId:{columns:[\"objectId\"]}},name:\"e2ee_mediaBackup\",primaryKey:[\"mediaBackupId\"]}],H=[{autoIncrement:!0,indexes:{authoritativeThreadKey:{columns:[\"authoritativeThreadKey\"]},deduplicationKey:{columns:[\"deduplicationKey\"],predicate:function(a){return a.deduplicationKey!=null}},jid:{columns:[\"jid\"]},threadOrder:{columns:[\"threadOrder\"],unique:!1}},name:\"e2ee_threads\",primaryKey:[\"chatId\"]}],I=[{autoIncrement:!0,indexes:{\"[jid+type]\":{columns:[\"jid\",\"type\"],unique:!1},jid:{columns:[\"jid\"],unique:!1},stanzaId:{columns:[\"stanzaId\"],unique:!1},type:{columns:[\"type\"],unique:!1}},name:\"e2ee_stanzaQueue\",primaryKey:[\"stanzaQueueId\"]}],J=[{autoIncrement:!0,indexes:{originalMsgExternalId:{columns:[\"originalMsgExternalId\"],unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1}},name:\"e2ee_editMsgHistory\",primaryKey:[\"editMsgHistoryId\"]}],K=[{autoIncrement:!1,indexes:{},name:\"e2ee_ftsBackloggedMessages\",primaryKey:[\"rowId\"],removed:!0},{autoIncrement:!1,indexes:{},name:\"e2ee_ftsEncryptionMeta\",primaryKey:[\"key\"],removed:!0},{autoIncrement:!0,indexes:{},name:\"e2ee_ftsIndexV3\",primaryKey:[\"ftsRowId\"],removed:!0}],L=[{autoIncrement:!0,indexes:{\"*msgIds\":{columns:[\"msgIds\"],multiEntry_DO_NOT_USE:!0},fbid:{columns:[\"fbid\"],unique:!1},hashedPlaintextHash:{columns:[\"hashedPlaintextHash\"]},objectId:{columns:[\"objectId\"],unique:!1}},name:\"e2ee_media\",primaryKey:[\"mediaId\"]}],M=[{autoIncrement:!0,indexes:{},name:\"e2ee_ebRestoreQueue\",primaryKey:[\"queueId\"]},{autoIncrement:!0,indexes:{},name:\"e2ee_ebUploadQueue\",primaryKey:[\"queueId\"]}],N=[{autoIncrement:!0,indexes:{\"[uploadStatus+uploadTsSec]\":{columns:[\"uploadStatus\",\"uploadTsSec\"],unique:!1},uploadStatus:{columns:[\"uploadStatus\"],unique:!1},uploadTsSec:{columns:[\"uploadTsSec\"],unique:!1}},name:\"e2ee_ebRestoreQueue\",primaryKey:[\"queueId\"]},{autoIncrement:!0,indexes:{\"[uploadStatus+uploadTsSec]\":{columns:[\"uploadStatus\",\"uploadTsSec\"],unique:!1},uploadStatus:{columns:[\"uploadStatus\"],unique:!1},uploadTsSec:{columns:[\"uploadTsSec\"],unique:!1}},name:\"e2ee_ebUploadQueue\",primaryKey:[\"queueId\"]}],O=[{autoIncrement:!0,indexes:{\"[thread+serverTs]\":{columns:[\"thread\",\"serverTs\"],unique:!1},\"[thread+sortOrderMs]\":{columns:[\"thread\",\"sortOrderMs\"],unique:!1},altIndex:{columns:[\"altIndex\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],unique:!1},revokedExternalId:{columns:[\"revokedExternalId\"],unique:!1},thread:{columns:[\"thread\"],unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1},unsendMsgContentDeleteTs:{columns:[\"unsendMsgContentDeleteTs\"],unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]}],P=[{autoIncrement:!0,indexes:{},name:\"e2ee_jobs\",primaryKey:[],removed:!0}],Q=[{autoIncrement:!0,indexes:{},name:\"e2ee_danglingQueue\",primaryKey:[\"queueId\"]}],R=[{autoIncrement:!0,indexes:{dbVersion:{columns:[\"dbVersion\"],unique:!1}},name:\"e2ee_staleQueue\",primaryKey:[\"staleQueueId\"]}],S=[{autoIncrement:!0,indexes:{\"[offlineThreadingId+backupActionType]\":{columns:[\"offlineThreadingId\",\"backupActionType\"],unique:!1},\"[uploadStatus+uploadTsSec]\":{columns:[\"uploadStatus\",\"uploadTsSec\"],unique:!1},backupActionType:{columns:[\"backupActionType\"],unique:!1},msgIdKey:{columns:[\"msgIdKey\"],unique:!1},offlineThreadingId:{columns:[\"offlineThreadingId\"],unique:!1},uploadStatus:{columns:[\"uploadStatus\"],unique:!1},uploadTsSec:{columns:[\"uploadTsSec\"],unique:!1}},name:\"e2ee_ebUploadQueue\",primaryKey:[\"queueId\"]}],T=[{autoIncrement:!1,indexes:{},name:\"e2ee_ftsBackloggedMessages\",primaryKey:[\"rowId\"]},{autoIncrement:!1,indexes:{},name:\"e2ee_ftsEncryptionMeta\",primaryKey:[\"key\"]},{autoIncrement:!0,indexes:{\"*prefixes\":{columns:[\"prefixes\"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:[\"chatId\"],unique:!1},id:{columns:[\"id\"],unique:!1}},name:\"e2ee_ftsIndexV3\",primaryKey:[\"ftsRowId\"]}],U=[{autoIncrement:!1,indexes:{\"[threadJid+userJid]\":{columns:[\"threadJid\",\"userJid\"],unique:!1},threadId:{columns:[\"threadId\"],unique:!1},userJid:{columns:[\"userJid\"],unique:!1}},name:\"e2ee_participants\",primaryKey:[\"id\"]}],V=[{autoIncrement:!0,indexes:{},name:\"e2ee_pendingMessageStanzaQueue\",primaryKey:[\"pendingMessageStanzaQueueId\"]}],W=[{autoIncrement:!0,indexes:{author:{columns:[\"author\"],unique:!1},chat:{columns:[\"chat\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1}},name:\"e2ee_deletedMessages\",primaryKey:[\"rowId\"]}],X=[{autoIncrement:!0,indexes:{threadJid:{columns:[\"threadJid\"],unique:!1}},name:\"e2ee_ebMsgRanges\",primaryKey:[\"rangeId\"]}],Y=[{autoIncrement:!1,indexes:{inviterJid:{columns:[\"inviterJid\"],unique:!1},threadJid:{columns:[\"threadJid\",\"inviteeJid\"],unique:!1}},name:\"e2ee_groupInvites\",primaryKey:[\"invitedParticipantId\",\"inviterJid\"]}],Z=[{autoIncrement:!1,indexes:{waMsgId:{columns:[\"waMsgId\"]}},name:\"e2ee_receipts\",primaryKey:[\"msgId\"]}],$=[{autoIncrement:!0,indexes:{\"[jid+priority]\":{columns:[\"jid\",\"priority\"],unique:!1},\"[jid+type]\":{columns:[\"jid\",\"type\"],unique:!1},jid:{columns:[\"jid\"],unique:!1},priority:{columns:[\"priority\"],unique:!1},stanzaId:{columns:[\"stanzaId\"],unique:!1},type:{columns:[\"type\"],unique:!1}},name:\"e2ee_stanzaQueue\",primaryKey:[\"stanzaQueueId\"]}],aa=[{autoIncrement:!0,indexes:{\"[thread+serverTs]\":{columns:[\"thread\",\"serverTs\"],unique:!1},\"[thread+sortOrderMs]\":{columns:[\"thread\",\"sortOrderMs\"],unique:!1},altIndex:{columns:[\"altIndex\"],unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],unique:!1},revokedExternalId:{columns:[\"revokedExternalId\"],unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1},unsendMsgContentDeleteTs:{columns:[\"unsendMsgContentDeleteTs\"],unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]}],ba=[{autoIncrement:!0,indexes:{\"[thread+serverTs]\":{columns:[\"thread\",\"serverTs\"],predicate:function(a){return a.serverTs!=null},unique:!1},\"[thread+sortOrderMs]\":{columns:[\"thread\",\"sortOrderMs\"],unique:!1},\"[threadJid+sortOrderMs]\":{columns:[\"threadJid\",\"sortOrderMs\"],unique:!1},altIndex:{columns:[\"altIndex\"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:[\"revokedExternalId\"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1},unsendMsgContentDeleteTs:{columns:[\"unsendMsgContentDeleteTs\"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]}],ca=[{autoIncrement:!1,dexieOnly_primaryKeyUnique:!0,indexes:{ts:{columns:[\"ts\"],unique:!1}},name:\"e2ee_sentBytesCache\",primaryKey:[\"waMsgId\"]}],da=[{autoIncrement:!0,indexes:{\"[thread+serverTs]\":{columns:[\"thread\",\"serverTs\"],predicate:function(a){return a.serverTs!=null},unique:!1},\"[threadJid+sortOrderMs]\":{columns:[\"threadJid\",\"sortOrderMs\"],unique:!1},altIndex:{columns:[\"altIndex\"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:[\"externalId\"],unique:!1},messageDeleteTs:{columns:[\"messageDeleteTs\"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:[\"messageExpirationTs\"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:[\"msgId\"],unique:!1},quoteExternalId:{columns:[\"quoteExternalId\"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:[\"revokedExternalId\"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:[\"threadJid\"],unique:!1},unsendMsgContentDeleteTs:{columns:[\"unsendMsgContentDeleteTs\"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:\"e2ee_messages\",primaryKey:[\"rowId\"]}],ea=[{autoIncrement:!0,indexes:{\"[originalMsgExternalId+threadJid]\":{columns:[\"originalMsgExternalId\",\"threadJid\"],unique:!1}},name:\"e2ee_editMsgHistory\",primaryKey:[\"editMsgHistoryId\"]}],fa=[{autoIncrement:!0,indexes:{deviceJid:{columns:[\"deviceJid\"],unique:!1},displayOrder:{columns:[\"isArchived\",\"ts\"],unique:!1},isConfirmedActionTs:{columns:[\"isConfirmed\",\"action\",\"ts\"],unique:!1},isNotifiedTs:{columns:[\"isNotified\",\"ts\"],unique:!1}},name:\"e2ee_deviceChangeAlerts\",primaryKey:[\"deviceChangeAlertsId\"]},{autoIncrement:!1,indexes:{threadId:{columns:[\"threadId\"],unique:!1}},name:\"e2ee_groupInfo\",primaryKey:[\"groupJid\"]}],ga=[{autoIncrement:!0,indexes:{\"[uploadStatus+uploadTsSec]\":{columns:[\"uploadStatus\",\"uploadTsSec\"],unique:!1},backupActionType:{columns:[\"backupActionType\"],unique:!1},msgIdKey:{columns:[\"msgIdKey\"],unique:!1},uploadStatus:{columns:[\"uploadStatus\"],unique:!1},uploadTsSec:{columns:[\"uploadTsSec\"],unique:!1}},name:\"e2ee_ebUploadQueue\",primaryKey:[\"queueId\"]}],ha=[{autoIncrement:!1,indexes:{},name:\"e2ee_ephemeralSettings\",primaryKey:[\"userJid\"]}],ia=[{autoIncrement:!1,indexes:{ebClientRequired:{columns:[\"ebClientRequired\",\"timestampMs\"],unique:!1},restorable:{columns:[\"restorable\",\"timestampMs\"],unique:!1}},name:\"e2ee_ebMessageRestoreTasks\",primaryKey:[\"messageId\"]}],ja=[{autoIncrement:!1,indexes:{},name:\"e2ee_igMessageAuxiliaryInfo\",primaryKey:[\"messageId\"]}];a=new Map([[(d=d(\"MAWDbVersionList\")).VERSION.V21,a],[d.VERSION.V22,b],[d.VERSION.V23,c],[d.VERSION.V24,e],[d.VERSION.V25,f],[d.VERSION.V30,h],[d.VERSION.V31,i],[d.VERSION.V32,j],[d.VERSION.V33,k],[d.VERSION.V34,l],[d.VERSION.V35,m],[d.VERSION.V36,n],[d.VERSION.V37,o],[d.VERSION.V38,p],[d.VERSION.V39,q],[d.VERSION.V40,r],[d.VERSION.V41,s],[d.VERSION.V42,t],[d.VERSION.V45,u],[d.VERSION.V48,v],[d.VERSION.V49,w],[d.VERSION.V50,x],[d.VERSION.V51,y],[d.VERSION.V52,z],[d.VERSION.V57,A],[d.VERSION.V59,B],[d.VERSION.V61,C],[d.VERSION.V62,D],[d.VERSION.V63,E],[d.VERSION.V64,F],[d.VERSION.V65,G],[d.VERSION.V67,H],[d.VERSION.V69,I],[d.VERSION.V70,J],[d.VERSION.V73,K],[d.VERSION.V74,L],[d.VERSION.V75,M],[d.VERSION.V77,N],[d.VERSION.V78,O],[d.VERSION.V79,P],[d.VERSION.V80,Q],[d.VERSION.V81,R],[d.VERSION.V83,S],[d.VERSION.V84,T],[d.VERSION.V85,U],[d.VERSION.V86,V],[d.VERSION.V88,W],[d.VERSION.V89,X],[d.VERSION.V90,Y],[d.VERSION.V91,Z],[d.VERSION.V92,$],[d.VERSION.V93,aa],[d.VERSION.V94,ba],[d.VERSION.V95,ca],[d.VERSION.V96,da],[d.VERSION.V97,ea],[d.VERSION.V98,fa],[d.VERSION.V99,ga],[d.VERSION.V100,ha],[d.VERSION.V102,ia],[d.VERSION.V103,ja]]);b=[\"messages\",\"unrenderedMessages\",\"groupInfo\",\"meta\",\"identity\",\"prekey\",\"prekeyGeneration\",\"session\",\"signedPrekey\",\"senderKeySessions\",\"receipts\",\"pendingReceipts\",\"threads\",\"contacts\",\"participants\",\"tasks\",\"personalSenderKeyStatuses\",\"appData\",\"appMeta\",\"chunk\",\"mediaBackup\",\"media\",\"reactions\",\"groupInvites\",\"dyiBatch\",\"syncActions\",\"missingKeys\",\"pendingMutations\",\"collectionVersions\",\"syncKeys\",\"deviceChangeAlerts\",\"xma\",\"retroactiveBackupsState\",\"editMsgHistory\",\"deletedMessages\",\"ebMsgRanges\"];g.dbSchema=a;g.TABLES_TO_ENCRYPT=b}),98);\n__d(\"MAWGetDbVersion\",[\"MAWDbVersionList\",\"gkx\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null;function a(){var a,b=Math.max(101,c(\"justknobx\")._(\"1716\"));return(a=h)!=null?a:d(\"MAWDbVersionList\").toVersion(b)}function b(a){if(!c(\"gkx\")(\"652\"))return;if(a==null){h=null;return}if(a===\"current\"){h=null;return}if(a===\"latest\"){h=d(\"MAWDbVersionList\").toVersion(Number.POSITIVE_INFINITY);return}Number.isInteger(a)&&(h=d(\"MAWDbVersionList\").toVersion(a))}g.getArmadilloDbVersion=a;g.setArmadilloDbVersionForTest=b}),98);\n__d(\"MAWDbSchema.restore\",[\"MAWDbSchema\",\"MAWGetDbVersion\",\"objectEntries\",\"sortBy\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){var b=Object.fromEntries(c(\"objectEntries\")(a.indexes).filter(function(a){a=a[1];return a.multiEntry_DO_NOT_USE!==!0}).map(function(b){var c=b[0];b=b[1];return[c,{columns:[].concat(b.columns,b.unique!==!1?[]:a.primaryKey),predicate:b.predicate}]}));return{auto_increment:a.autoIncrement===!0,indexes:b,name:a.name,primary_key:a.primaryKey}}var i=c(\"sortBy\")(Array.from(d(\"MAWDbSchema\").dbSchema.entries()),function(a){a=a[0];return a}).map(function(a){var b=a[0];a=a[1];return{schema:a,version:b}});a=function(a){return Array.from(i.filter(function(b){return b.version<=a&&b.schema!=null}).reduce(function(a,b){(b=b.schema)==null?void 0:b.forEach(function(b){if(b.removed===!0){a[\"delete\"](b.name);return}a.set(b.name,h(b))});return a},new Map()).values())};b=a(d(\"MAWGetDbVersion\").getArmadilloDbVersion());g.getSchemaForVersion=a;g.clientSchema=b}),98);\n__d(\"isArmadillo\",[\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"qex\")._(\"135\")===!0}g[\"default\"]=a}),98);\n__d(\"LSTableSchemas\",[],(function(a,b,c,d,e,f){e.exports=[[{name:\"sync_groups\",id:1,primary_key:[\"groupId\"]},{name:\"pending_tasks\",id:2,primary_key:[\"taskId\"],indexes:{queueNameTaskId:{columns:[\"queueName\",\"taskId\"]}},auto_increment:!0},{name:\"network_requests\",id:3,primary_key:[\"taskQueueName\",\"syncDatabaseId\"]},{name:\"_user_info\",id:4,primary_key:[\"id\"]},{name:\"pending_fire_and_forget_tasks\",id:5,primary_key:[\"taskId\"],auto_increment:!0},{name:\"user_visible_errors\",id:6,primary_key:[\"errorId\"],auto_increment:!0},{name:\"mailbox_task_completion_notification_context\",id:232,primary_key:[\"notificationScopeKey\"]},{name:\"mailbox_task_completion_api_tasks\",id:233,primary_key:[\"taskId\"]}],[{name:\"contacts\",id:7,primary_key:[\"id\"],indexes:{blockedByViewerStatusId:{columns:[\"blockedByViewerStatus\",\"id\"]}}},{name:\"ig_contact_info\",id:176,primary_key:[\"contactId\"]},{name:\"work_contact_info\",id:210,primary_key:[\"id\"]},{name:\"contextual_profile_v1\",id:216,primary_key:[\"ownerId\",\"associatedEntityId\"],indexes:{associatedEntityIdAndOwner:{columns:[\"associatedEntityId\",\"ownerId\"]}}},{name:\"profile_sheet_information\",id:256,primary_key:[\"userId\"]},{name:\"fb_transport_contacts\",id:240,primary_key:[\"pk\"]},{name:\"bot_profile_info_v2\",id:299,primary_key:[\"botId\"]},{name:\"horizon_contact_info\",id:323,primary_key:[\"contactId\"]}],[{name:\"reactions\",id:8,primary_key:[\"threadKey\",\"messageId\",\"actorId\"],indexes:{fk_messages:{columns:[\"threadKey\",\"timestampMs\",\"messageId\",\"actorId\"]}}},{name:\"threads\",id:9,primary_key:[\"threadKey\"],indexes:{lastActivityTimestampMs:{columns:[\"lastActivityTimestampMs\",\"threadKey\"]},parentThreadKeyLastActivityTimestampMs:{columns:[\"parentThreadKey\",\"lastActivityTimestampMs\",\"threadKey\"]},secondaryParentThreadKeyLastActivityTimestampMs:{columns:[\"secondaryParentThreadKey\",\"lastActivityTimestampMs\",\"threadKey\"],ignore_nulls:[\"secondaryParentThreadKey\"]},clientThreadKey:{columns:[\"clientThreadKey\",\"threadKey\"],ignore_nulls:[\"clientThreadKey\"]},threadTypeLastActivityTimestampMs:{columns:[\"threadType\",\"lastActivityTimestampMs\",\"threadKey\"]},syncGroupParentThreadKeyLastActivityTimestampMs:{columns:[\"syncGroup\",\"parentThreadKey\",\"lastActivityTimestampMs\",\"threadKey\"]}}},{name:\"threads_ranges_v2__generated\",id:10,primary_key:[\"parentThreadKey\",\"minThreadKey\",\"minLastActivityTimestampMs\"]},{name:\"messages\",id:12,primary_key:[\"threadKey\",\"timestampMs\",\"messageId\"],indexes:{optimistic:{columns:[\"offlineThreadingId\"]},messageDisplayOrder:{columns:[\"threadKey\",\"primarySortKey\",\"secondarySortKey\",\"messageId\",\"isCollapsed\"]},messageId:{columns:[\"messageId\"]},messageSubthreadKey:{columns:[\"subthreadKey\",\"primarySortKey\",\"secondarySortKey\",\"messageId\",\"isCollapsed\"],ignore_nulls:[\"subthreadKey\"]},replySourceIdMessageID:{columns:[\"replySourceId\",\"messageId\"],ignore_nulls:[\"replySourceId\"]},ephemeralExpirationTs:{columns:[\"ephemeralExpirationTs\",\"messageId\"],ignore_nulls:[\"ephemeralExpirationTs\"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{columns:[\"threadKey\",\"primarySortKey\",\"secondarySortKey\",\"botResponseId\",\"messageId\"],ignore_nulls:[\"botResponseId\"]}}},{name:\"messages_ranges_v2__generated\",id:13,primary_key:[\"threadKey\",\"minTimestampMs\",\"minMessageId\"]},{name:\"participants\",id:14,primary_key:[\"threadKey\",\"contactId\"],indexes:{threadKeyReadWatermarkTimestampMs:{columns:[\"threadKey\",\"readWatermarkTimestampMs\",\"contactId\"]},threadKeyDeliveredWatermarkTimestampMs:{columns:[\"threadKey\",\"deliveredWatermarkTimestampMs\",\"contactId\"]},contactIdThreadKey:{columns:[\"contactId\",\"threadKey\"]}}},{name:\"ctas\",id:15,primary_key:[\"ctaId\"]},{name:\"attachments\",id:16,primary_key:[\"threadKey\",\"messageId\",\"attachmentFbid\"],indexes:{fk_messages:{columns:[\"threadKey\",\"timestampMs\",\"messageId\",\"attachmentFbid\"]},idx_attachments_collapsible_id:{columns:[\"threadKey\",\"collapsibleId\",\"messageId\",\"attachmentFbid\"]}}},{name:\"attachments_ranges_v2__generated\",id:17,primary_key:[\"threadKey\",\"mediaGroup\",\"minTimestampMs\"]},{name:\"attachment_items\",id:18,primary_key:[\"attachmentFbid\",\"attachmentIndex\"],indexes:{fk_attachments:{columns:[\"threadKey\",\"messageId\",\"attachmentFbid\",\"attachmentIndex\"]}}},{name:\"attachment_ctas\",id:19,primary_key:[\"ctaId\"],indexes:{fk_attachments:{columns:[\"threadKey\",\"messageId\",\"attachmentFbid\",\"ctaId\"]}}},{name:\"quick_reply_ctas\",id:20,primary_key:[\"threadKey\",\"messageId\",\"ctaId\"]},{name:\"m_suggestions\",id:21,primary_key:[\"threadKey\",\"timestampMs\",\"suggestionId\"]},{name:\"rtc_signals\",id:22,primary_key:[\"timestampMs\",\"type_\"]},{name:\"rtc_ongoing_calls_on_threads_v2\",id:23,primary_key:[\"threadKey\"]},{name:\"rtc_multiway_call_initiation_conference_names\",id:24,primary_key:[\"threadKey\"]},{name:\"mailbox_metadata\",id:25,primary_key:[\"id\"]},{name:\"group_membership_approval_requests\",id:26,primary_key:[\"threadKey\",\"contactId\"]},{name:\"admin_message_ctas\",id:27,primary_key:[\"threadKey\",\"messageId\",\"ctaId\"],indexes:{ctaId:{columns:[\"ctaId\"]}}},{name:\"thread_nullstate\",id:28,primary_key:[\"threadKey\"]},{name:\"thread_nullstate_ctas\",id:29,primary_key:[\"ctaId\"],indexes:{threadKeyCtaId:{columns:[\"threadKey\",\"ctaId\"]}}},{name:\"focus_mode_ctas\",id:30,primary_key:[\"threadKey\",\"messageId\",\"ctaId\"]},{name:\"messages_optimistic_context\",id:31,primary_key:[\"taskId\"]},{name:\"threads_optimistic_context\",id:32,primary_key:[\"taskId\"]},{name:\"messages_status\",id:33,primary_key:[\"messageId\",\"threadKey\",\"timestampMs\",\"threadKeyFromParticipants\",\"contactId\",\"type_\"]},{name:\"message_requests\",id:34,primary_key:[\"threadKey\"]},{name:\"folder_metadata\",id:35,primary_key:[\"parentThreadKey\"]},{name:\"polls\",id:38,primary_key:[\"pollId\"]},{name:\"poll_options_v2\",id:39,primary_key:[\"pollId\",\"optionId\"]},{name:\"poll_votes_v2\",id:40,primary_key:[\"pollId\",\"optionId\",\"contactId\"]},{name:\"pinned_messages_v2\",id:155,primary_key:[\"threadKey\",\"messageId\"]},{name:\"filtered_threads_ranges_v3__generated\",id:247,primary_key:[\"parentThreadKey\",\"minThreadKey\",\"minLastActivityTimestampMs\",\"threadRangeFilter\",\"folderName\",\"secondaryThreadRangeFilter\",\"threadRangeFilterValue\"]},{name:\"community_folders\",id:162,primary_key:[\"folderId\"],indexes:{byFbGroupId:{columns:[\"fbGroupId\",\"folderId\"]}}},{name:\"community_members\",id:170,primary_key:[\"communityId\",\"contactId\",\"source\",\"requestId\"],indexes:{communitySource:{columns:[\"communityId\",\"source\",\"requestId\",\"contactId\",\"name\"]},communityContact:{columns:[\"communityId\",\"contactId\",\"requestId\",\"source\",\"name\"]}}},{name:\"community_members_ranges_v2__generated\",id:189,primary_key:[\"communityId\",\"isAdmin\",\"minName\",\"source\",\"requestId\"]},{name:\"attachment_conversion\",id:164,primary_key:[\"attachmentFbid\"]},{name:\"saved_messages\",id:165,primary_key:[\"threadKey\",\"messageId\"]},{name:\"rtc_rooms_on_threads\",id:181,primary_key:[\"threadKey\"]},{name:\"ig_thread_info\",id:194,primary_key:[\"threadKey\"],indexes:{igThreadID:{columns:[\"igThreadId\"]}}},{name:\"edit_message_history\",id:322,primary_key:[\"pk\"],indexes:{originalMsgPkEditTs:{columns:[\"originalMessagePk\",\"serverAdjustedEditTsMs\"]}},auto_increment:!0},{name:\"ig_thread_labels\",id:318,primary_key:[\"threadKey\",\"labelType\"]},{name:\"group_invites\",id:197,primary_key:[\"threadKey\",\"inviterId\",\"inviteeId\"],indexes:{threadKeyInviterIDInviteeID:{columns:[\"threadKey\",\"inviterId\",\"inviteeId\"]}}},{name:\"inbox_threads_ranges\",id:198,primary_key:[\"syncGroup\"]},{name:\"community_direct_invites_presets\",id:199,primary_key:[\"communityId\",\"presetType\",\"source\"]},{name:\"msg_pinned_messages_v2\",id:205,primary_key:[\"threadKey\",\"messageId\",\"pinnedTimestampMs\"],indexes:{pinnedMessageDisplayOrder:{columns:[\"threadKey\",\"pinnedTimestampMs\",\"messageId\"]}}},{name:\"filtered_messages_ranges_v2__generated\",id:211,primary_key:[\"threadKey\",\"mailboxType\",\"minTimestampMs\",\"minMessageId\",\"messageRangeFilter\"]},{name:\"taken_down_threads\",id:212,primary_key:[\"threadKey\"]},{name:\"participant_list_queries\",id:219,primary_key:[\"threadKey\"]},{name:\"sync_group_threads_ranges\",id:220,primary_key:[\"syncGroup\",\"parentThreadKey\"]},{name:\"community_chat_message_seen_count\",id:221,primary_key:[\"threadKey\",\"messageId\"]},{name:\"community_chat_polls\",id:223,primary_key:[\"pollId\"]},{name:\"community_chat_poll_options\",id:224,primary_key:[\"pollId\",\"optionId\"]},{name:\"community_chat_poll_votes\",id:225,primary_key:[\"pollId\",\"optionId\",\"contactId\"]},{name:\"reactions_v2\",id:226,primary_key:[\"threadKey\",\"messageId\",\"reactionFbid\",\"messageTimestamp\"],indexes:{optimistic:{columns:[\"threadKey\",\"messageId\",\"reactionFbid\"]}}},{name:\"reactions_v2_details_users\",id:227,primary_key:[\"reactorId\",\"reactionFbid\"]},{name:\"reactions_v2_details_users_ranges_v2__generated\",id:228,primary_key:[\"reactorId\",\"reactionFbid\",\"minTimestampMs\"]},{name:\"reaction_v2_types\",id:229,primary_key:[\"reactionFbid\"]},{name:\"bots\",id:230,primary_key:[\"threadKey\",\"botId\"]},{name:\"business_comm_items\",id:234,primary_key:[\"threadKey\",\"entId\"]},{name:\"group_invitations_pending\",id:235,primary_key:[\"linkHash\"]},{name:\"business_support_notification_settings\",id:236,primary_key:[\"userId\"]},{name:\"thread_label_mappings\",id:237,primary_key:[\"threadKey\",\"labelId\"]},{name:\"inbox_view_state\",id:277,primary_key:[\"interface_\",\"configName\"]},{name:\"inbox_view_state_v2\",id:281,primary_key:[\"configName\"]},{name:\"audio_channel_events\",id:238,primary_key:[\"eventId\",\"roomId\"]},{name:\"reactions_v2_details\",id:239,primary_key:[\"threadId\",\"messageId\",\"reactorId\",\"reactionFbid\"]},{name:\"reactions_v2_details_ranges_v2__generated\",id:243,primary_key:[\"threadId\",\"messageId\",\"reactionFbid\",\"minTimestampMs\"]},{name:\"community_chat_poll_votes_ranges_v2__generated\",id:244,primary_key:[\"pollId\",\"optionId\",\"minTimestampMs\"]},{name:\"discoverable_chat_participants\",id:248,primary_key:[\"threadId\",\"contactId\",\"source\"]},{name:\"discoverable_chat_participants_ranges_v2__generated\",id:249,primary_key:[\"threadId\",\"source\",\"minName\"]},{name:\"roll_calls\",id:250,primary_key:[\"rollCallId\",\"threadKey\"]},{name:\"community_surface_ranges\",id:253,primary_key:[\"surfaceType\",\"communityKey\"]},{name:\"community_rules\",id:254,primary_key:[\"communityId\",\"ruleId\"]},{name:\"roll_call_contributions_v2\",id:255,primary_key:[\"rollCallContributionId\",\"rollCallId\",\"messageId\",\"messageTimestampMs\",\"threadKey\"],indexes:{optimistic:{columns:[\"rollCallContributionId\",\"rollCallId\",\"messageId\",\"messageTimestampMs\"]}}},{name:\"business_thread_info\",id:260,primary_key:[\"threadKey\"]},{name:\"thread_creation_status\",id:278,primary_key:[\"taskId\"]},{name:\"shared_albums\",id:279,primary_key:[\"sharedAlbumId\",\"threadKey\"]},{name:\"shared_album_contributions\",id:280,primary_key:[\"sharedAlbumId\",\"sharedAlbumContributionId\",\"threadKey\",\"messageId\"]},{name:\"shared_albums_multimedia_upload_jobs\",id:283,primary_key:[\"offlineThreadingId\"]},{name:\"shared_albums_multimedia_upload_subjobs_status\",id:284,primary_key:[\"offlineThreadingId\",\"jobId\"]},{name:\"thread_point_query_ttrc\",id:286,primary_key:[\"threadKey\"]},{name:\"business_thread_suggestions\",id:290,primary_key:[\"threadKey\",\"suggestionType\"]},{name:\"community_chat_admin_assist_command_sequences\",id:291,primary_key:[\"commandSequenceId\"]},{name:\"community_thread_sync_info\",id:294,primary_key:[\"threadKey\"]},{name:\"thread_bans\",id:297,primary_key:[\"threadKey\",\"contactId\"]},{name:\"support_translations\",id:300,primary_key:[\"messageId\",\"targetLocale\"]},{name:\"threads_optimistic_metadata\",id:312,primary_key:[\"threadKey\"]},{name:\"ai_bot_feedback_submission_status\",id:315,primary_key:[\"botResponseId\"]},{name:\"igd_xma_receiver_fetch\",id:316,primary_key:[\"messageId\"]}],[{name:\"media_send_jobs\",id:51,primary_key:[\"offlineAttachmentId\"]}],[{name:\"typing_indicator\",id:52,primary_key:[\"threadKey\",\"senderId\"]}],[{name:\"server_search_results\",id:65,primary_key:[\"query\",\"resultId\",\"globalIndex\"]},{name:\"server_search_sections\",id:66,primary_key:[\"query\",\"globalIndex\"]},{name:\"search_queries\",id:67,primary_key:[\"query\",\"surfaceType\"]},{name:\"universal_search_recent_searches\",id:68,primary_key:[\"resultId\"]},{name:\"message_search_results\",id:69,primary_key:[\"type_\",\"query\",\"threadKey\",\"globalIndex\"]},{name:\"message_search_queries\",id:70,primary_key:[\"type_\",\"query\",\"threadKeyV2\"]},{name:\"participant_search_queries\",id:214,primary_key:[\"query\",\"threadKey\"]}],[{name:\"cm_search_nullstate_metadata\",id:289,primary_key:[\"threadKey\",\"scoreType\"]}],[{name:\"ai_bot_search_metadata\",id:298,primary_key:[\"botId\"]}],[{name:\"contact_upload_settings\",id:74,primary_key:[\"userid\"]},{name:\"gdpr_settings\",id:75,primary_key:[\"userid\"]},{name:\"presence_settings\",id:187,primary_key:[\"userId\"]},{name:\"persistent_menu_items\",id:77,primary_key:[\"threadKey\",\"ctaId\"]},{name:\"video_chat_links_joining\",id:78,primary_key:[\"url\",\"optimisticClientToken\"],indexes:{optimistic:{columns:[\"optimisticClientToken\"]}}},{name:\"video_chat_links_attempted_joiners\",id:79,primary_key:[\"userId\",\"url\"]},{name:\"cowatch_sessions\",id:80,primary_key:[\"cowatchSessionId\"]},{name:\"self_profile\",id:81,primary_key:[\"userId\"]},{name:\"pinned_threads\",id:82,primary_key:[\"threadKey\"],indexes:{pinnedTimestamp:{columns:[\"pinnedTimestamp\",\"threadKey\"]}}},{name:\"messaging_settings\",id:83,primary_key:[\"id\"]},{name:\"reachability_settings\",id:148,primary_key:[\"audience\"]},{name:\"feature_limits\",id:150,primary_key:[\"type_\"]},{name:\"emoji_sets\",id:151,primary_key:[\"categoryIdx\",\"emojiIdx\",\"type_\"]},{name:\"epd_cookie_settings\",id:163,primary_key:[]},{name:\"cm_community_list\",id:166,primary_key:[\"communityId\"]},{name:\"cm_channel_list\",id:167,primary_key:[\"communityId\",\"threadId\"],indexes:{threadIdCommunityId:{columns:[\"threadId\",\"communityId\"]}}},{name:\"cm_category_list\",id:182,primary_key:[\"communityId\",\"categoryId\"]},{name:\"notification_settings\",id:175,primary_key:[\"id\"]},{name:\"encrypted_backups_status_trigger\",id:195,primary_key:[\"pk\"],auto_increment:!0},{name:\"fb_events\",id:200,primary_key:[\"eventId\"]},{name:\"cm_channel_events\",id:201,primary_key:[\"eventId\",\"threadId\"],indexes:{eventsInThread:{columns:[\"threadId\",\"eventId\"]}}},{name:\"community_events\",id:202,primary_key:[\"eventId\",\"communityId\"]},{name:\"avatar_settings\",id:209,primary_key:[\"threadId\"]},{name:\"thread_labels\",id:215,primary_key:[\"labelId\"]},{name:\"thread_limits\",id:287,primary_key:[\"threadKey\"]},{name:\"business_support_case_details\",id:222,primary_key:[\"threadId\"]},{name:\"messaging_privacy_settings\",id:288,primary_key:[\"userId\"]},{name:\"rtc_call_events\",id:245,primary_key:[\"pk\"],auto_increment:!0},{name:\"custom_thread_commands\",id:296,primary_key:[\"threadKey\",\"commandId\"],indexes:{rank:{columns:[\"threadKey\",\"rank\"]},commandId:{columns:[\"commandId\"]}}},{name:\"msgr_quiet_time\",id:317,primary_key:[\"quietTimeId\"],indexes:{quietTimeId:{columns:[\"quietTimeId\"]}}}],[{name:\"payment_type_paypal\",id:85,primary_key:[\"paymentCredentialId\"]},{name:\"payment_type_card\",id:86,primary_key:[\"paymentCredentialId\"]},{name:\"payment_type_bank_v2\",id:88,primary_key:[\"paymentMethodId\"]},{name:\"payment_method\",id:89,primary_key:[\"paymentMethodId\"]},{name:\"new_payment_credential_option\",id:90,primary_key:[\"credentialType\"]},{name:\"paypal_funding_options\",id:91,primary_key:[\"optionId\"]},{name:\"payments_eligibility\",id:92,primary_key:[\"userId\"]},{name:\"payments_ofac_blacklisted_countries\",id:93,primary_key:[\"isoCountryCode\"]},{name:\"p2m_invoice\",id:94,primary_key:[\"orderId\"]},{name:\"p2m_invoice_attachment\",id:95,primary_key:[\"orderId\",\"productItemId\"]},{name:\"payment_price_list_item\",id:96,primary_key:[\"orderId\",\"id\"]},{name:\"p2m_charge\",id:97,primary_key:[\"orderId\"]},{name:\"payment_p2p_risk_verification\",id:98,primary_key:[\"requestId\",\"transactionId\"]},{name:\"payment_transaction_v2\",id:99,primary_key:[\"timestampMs\",\"transactionId\"],indexes:{optimistic:{columns:[\"optimisticTransactionId\"]}}},{name:\"p2p_request_v2\",id:100,primary_key:[\"timestampMs\",\"transactionId\"],indexes:{optimistic:{columns:[\"optimisticTransactionId\"]}}},{name:\"p2p_transfer_v2\",id:101,primary_key:[\"timestampMs\",\"transactionId\"],indexes:{optimistic:{columns:[\"optimisticTransactionId\"]}}},{name:\"transaction_history\",id:102,primary_key:[\"transactionId\"]},{name:\"payments_transaction_details_core\",id:103,primary_key:[\"transactionId\"]},{name:\"payments_transaction_details_ctas\",id:104,primary_key:[\"transactionId\",\"ctaId\"]},{name:\"payments_transaction_details_rows\",id:105,primary_key:[\"transactionId\",\"rowOrder\"]},{name:\"payment_user_auth\",id:106,primary_key:[\"userId\"]},{name:\"payment_client_auth_token\",id:107,primary_key:[\"userId\",\"deviceId\",\"appId\"]},{name:\"payment_auth_request_results\",id:108,primary_key:[\"requestId\"]},{name:\"payment_server_request_results\",id:109,primary_key:[\"requestId\"]},{name:\"payment_pin_verification_results\",id:113,primary_key:[\"requestId\"]}],[{name:\"connectivity_status\",id:114,primary_key:[\"statusId\"],auto_increment:!0},{name:\"user_visible_network_connectivity_error\",id:115,primary_key:[\"statusId\"],auto_increment:!0}],[{name:\"thread_themes\",id:116,primary_key:[\"fbid\"]},{name:\"gradient_colors\",id:117,primary_key:[\"themeFbid\",\"gradientIndex\"]}],[{name:\"in_thread_banner\",id:118,primary_key:[\"threadKey\",\"bannerId\"]},{name:\"in_thread_banner_ctas\",id:119,primary_key:[\"bannerId\",\"ctaId\"]},{name:\"in_thread_banner_overflow_menu\",id:120,primary_key:[\"threadKey\",\"bannerId\"]}],[{name:\"stickers\",id:121,primary_key:[\"stickerId\"],indexes:{stickerPackId:{columns:[\"stickerPackId\",\"stickerId\"]}}},{name:\"sticker_packs\",id:122,primary_key:[\"packId\"]},{name:\"sticker_search_results\",id:123,primary_key:[\"resultIndex\",\"query\",\"type_\"]},{name:\"sticker_search_queries\",id:124,primary_key:[\"query\"]},{name:\"sticker_search_featured_tags\",id:125,primary_key:[\"tagIndex\"]},{name:\"sticker_to_collection\",id:126,primary_key:[\"stickerId\",\"collectionId\"]},{name:\"sticker_pack_details\",id:127,primary_key:[\"packId\"]},{name:\"sticker_store_pack_indices\",id:128,primary_key:[\"packId\"]}],[{name:\"forward_content\",id:129,primary_key:[\"value\",\"type_\"]}],[{name:\"linked_groups\",id:130,primary_key:[\"id\"],indexes:{threadKey:{columns:[\"threadKey\"]}}}],[{name:\"ranking_scores\",id:134,primary_key:[\"contactId\",\"scoreType\"],indexes:{scoreTypeContactId:{columns:[\"scoreType\",\"contactId\"]}}},{name:\"ranking_requests\",id:135,primary_key:[\"scoreType\"]},{name:\"value_model_rules\",id:136,primary_key:[\"product\",\"ruleIndex\"]},{name:\"value_model_features\",id:137,primary_key:[\"feature\"]},{name:\"value_model_output\",id:138,primary_key:[\"product\",\"contactId\"]}],[{name:\"story_buckets\",id:53,primary_key:[\"bucketId\"],indexes:{optimistic:{columns:[\"ownerId\",\"bucketType\"]}}},{name:\"stories\",id:54,primary_key:[\"storyId\"],indexes:{optimistic:{columns:[\"optimisticClientId\"]}}},{name:\"story_viewers\",id:55,primary_key:[\"storyId\",\"viewerContactId\",\"interactionType\"]},{name:\"story_reactions\",id:56,primary_key:[\"reactionId\"],indexes:{optimistic:{columns:[\"optimisticClientId\"]}}},{name:\"story_ad_unit\",id:57,primary_key:[\"adPosition\",\"clientToken\"]},{name:\"story_ad_card\",id:58,primary_key:[\"adPosition\",\"clientToken\",\"cardId\"]},{name:\"story_ad_ctas\",id:59,primary_key:[\"ctaId\"]},{name:\"story_overlays\",id:60,primary_key:[\"storyId\",\"storyOverlayId\"]},{name:\"story_buckets_paginated_queries\",id:61,primary_key:[\"queryId\"]},{name:\"status\",id:62,primary_key:[\"statusId\"],indexes:{optimistic:{columns:[\"optimisticClientId\"]}}},{name:\"rooms\",id:63,primary_key:[\"roomId\"],indexes:{optimistic:{columns:[\"optimisticClientToken\"]}}},{name:\"room_participants\",id:64,primary_key:[\"roomId\",\"participantId\",\"type_\"],indexes:{optimistic:{columns:[\"roomId\",\"participantId\"]}}}],[{name:\"live_location_sharers\",id:149,primary_key:[\"threadKey\",\"userId\"]}],[{name:\"mi_act_mapping_table\",id:173,primary_key:[\"serverThreadKey\",\"clientThreadPk\",\"jid\"],indexes:{fk_threads:{columns:[\"serverThreadKey\"]},chat_id:{columns:[\"clientThreadPk\"]},jid:{columns:[\"jid\"]}}},{name:\"media_staging\",id:161,primary_key:[\"offlineAttachmentId\"]},{name:\"client_accounts\",id:272,primary_key:[\"pk\"]},{name:\"client_messages\",id:273,primary_key:[\"pk\"]},{name:\"client_participants\",id:274,primary_key:[\"pk\"]},{name:\"client_threads\",id:276,primary_key:[\"pk\"]}],[{name:\"data_trace_meta\",id:153,primary_key:[\"traceId\"],indexes:{shouldFlushInitTimestampMsTraceId:{columns:[\"shouldFlush\",\"initTimestampMs\",\"traceId\"]}}},{name:\"data_trace_addon\",id:154,primary_key:[\"addonId\"],indexes:{traceIdAddonId:{columns:[\"traceId\",\"addonId\"]}},auto_increment:!0}],[{name:\"ad_context\",id:160,primary_key:[\"adId\"]}],[{name:\"thread_proactive_warning_settings\",id:183,primary_key:[\"threadKey\"]},{name:\"client_thread_proactive_warning_settings\",id:241,primary_key:[\"threadPk\"]}],[{name:\"presence_states\",id:186,primary_key:[\"contactId\"],indexes:{statusContactId:{columns:[\"status\",\"contactId\"]}}}],[{name:\"available_reactions\",id:188,primary_key:[\"emojiIdx\"]}],[{name:\"pending_backups_context_v2\",id:177,primary_key:[\"pk\"],indexes:{fk_pending_tasks:{columns:[\"pendingBackupTaskId\"]}},auto_increment:!0},{name:\"secure_encrypted_backups_client_state\",id:168,primary_key:[\"backupId\"]},{name:\"encrypted_backups_debug_metadata\",id:206,primary_key:[\"backupId\"]},{name:\"encrypted_backups_epoch_debug_metadata\",id:207,primary_key:[\"epochId\"]},{name:\"encrypted_backups_debug_metadata_v2\",id:217,primary_key:[\"backupId\"]},{name:\"encrypted_backups_epoch_debug_metadata_v2\",id:218,primary_key:[\"epochId\"]},{name:\"secure_encrypted_backups_epochs\",id:169,primary_key:[\"epochId\"],indexes:{fk_secure_encrypted_backups_client_state:{columns:[\"backupId\",\"epochId\"]}}},{name:\"encrypted_backups\",id:172,primary_key:[\"pk\"],auto_increment:!0},{name:\"secure_encrypted_backups_generated_recovery_code\",id:174,primary_key:[\"pk\"]},{name:\"secure_encrypted_backups_recovery_code_status\",id:178,primary_key:[\"pk\"]},{name:\"secure_recovery_code_data\",id:179,primary_key:[\"taskId\"],indexes:{fk_pending_tasks:{columns:[\"taskId\"]}}},{name:\"secure_encrypted_backups_message_thread_id_context\",id:180,primary_key:[\"taskId\",\"listId\"],indexes:{fk_pending_tasks:{columns:[\"taskId\"]}}},{name:\"encrypted_backups_virtual_devices\",id:184,primary_key:[\"pk\"],auto_increment:!0},{name:\"encrypted_backups_metadata\",id:196,primary_key:[\"backupId\"]},{name:\"device_metadata\",id:185,primary_key:[\"pk\"]},{name:\"encrypted_backup_restore_task_payload_context\",id:190,primary_key:[\"taskId\"]},{name:\"encrypted_backups_dyi_backup_restore_status\",id:208,primary_key:[\"pk\"]},{name:\"encrypted_backups_message_backup_status\",id:213,primary_key:[\"messagePk\"]},{name:\"encrypted_backups_client_restore_status\",id:231,primary_key:[\"threadId\"]},{name:\"third_party_id_store\",id:242,primary_key:[\"platform\"]},{name:\"secure_get_secrets_context\",id:259,primary_key:[\"deviceRegistrationId\"]},{name:\"encrypted_backups_otc_devices\",id:261,primary_key:[\"deviceId\"]},{name:\"experiences_shared_state\",id:282,primary_key:[\"stateKey\"]},{name:\"encrypted_backups_otc_notification_sending_status\",id:285,primary_key:[\"pk\"]},{name:\"pending_protobuf_backups_context\",id:305,primary_key:[\"pk\"],auto_increment:!0}],[{name:\"secure_encrypted_backups_devices\",id:191,primary_key:[\"deviceId\"]},{name:\"secure_encrypted_backups_device_supported_versions\",id:192,primary_key:[\"deviceId\",\"supportedVersion\"],indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:{columns:[\"deviceId\",\"supportedVersion\"]}}}],[{name:\"e2ee_dummy_table_for_sync\",id:171,primary_key:[\"placeholder\"]},{name:\"cutover_threads\",id:193,primary_key:[\"openThreadId\"]},{name:\"occamadillo_most_recent_message_per_thread\",id:292,primary_key:[\"threadKey\"]},{name:\"offline_queue_thread_status\",id:295,primary_key:[\"threadJid\"]},{name:\"client_message_translation_info\",id:324,primary_key:[\"pk\"]}],[{name:\"community_messaging_aggregated_user_presence_counts_for_community\",id:203,primary_key:[\"folderId\"]},{name:\"community_messaging_aggregated_copresence_counts_for_chat\",id:204,primary_key:[\"threadId\"]}],[{name:\"workrooms_co_presence_states\",id:246,primary_key:[\"userId\"],indexes:{userCoPresence:{columns:[\"userId\",\"coPresenceObjectId\"]}}}],[{name:\"persistent_menu_ctas\",id:251,primary_key:[\"threadKey\",\"ctaId\"]}],[{name:\"workroom_creation_requests\",id:252,primary_key:[\"creationId\"]}],[{name:\"pake_messages\",id:258,primary_key:[\"sessionId\"]}],[{name:\"workroom_invites\",id:257,primary_key:[\"inviteId\"]}],[{name:\"work_genai\",id:293,primary_key:[\"threadKey\",\"messageId\"]}],[{name:\"local_message_persistence_store\",id:301,primary_key:[\"pk\"],auto_increment:!0},{name:\"local_message_persistence_store_supplemental\",id:302,primary_key:[\"pk\"],auto_increment:!0},{name:\"local_message_persistence_store_deleted_messages\",id:303,primary_key:[\"pk\"],auto_increment:!0},{name:\"local_message_persistence_store_tag_index\",id:304,primary_key:[\"pk\"],auto_increment:!0}],[{name:\"secure_acs_configurations\",id:307,primary_key:[\"configId\"]},{name:\"secure_acs_blinded_tokens\",id:308,primary_key:[\"tokenId\"],auto_increment:!0},{name:\"secure_acs_tokens\",id:309,primary_key:[\"tokenId\"]},{name:\"acs_request_context\",id:310,primary_key:[\"taskId\"]},{name:\"anonymous_task_context\",id:311,primary_key:[\"taskId\"]}],[{name:\"lightspeed_task_context\",id:306,primary_key:[\"taskId\"]}],[{name:\"ohai_gateway_key_configs\",id:313,primary_key:[\"keyId\"]}],[{name:\"client_xmas\",id:314,primary_key:[\"pk\"]}],[{name:\"supervision_edge\",id:319,primary_key:[\"edgeId\"]},{name:\"supervision_metadata\",id:320,primary_key:[\"supervisionMetadataId\"]},{name:\"screen_time\",id:321,primary_key:[\"recordId\"],auto_increment:!0}]]}),null);\n__d(\"ReStoreVaulting\",[\"cr:2075\",\"cr:2151\",\"cr:2203\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return b(\"cr:2075\")!=null?b(\"cr:2075\").vault(a):a}function c(a){return b(\"cr:2075\")!=null?b(\"cr:2075\").unvault(a):a}function d(a,c){return b(\"cr:2151\")!=null&&b(\"cr:2203\")!=null?b(\"cr:2151\").unvaultDbRow(a,c,b(\"cr:2203\").PERSISTED_DB_VAULT_DEFINITIONS):a}function e(a,c){return b(\"cr:2151\")!=null&&b(\"cr:2203\")!=null?b(\"cr:2151\").vaultDbRow(a,c,b(\"cr:2203\").PERSISTED_DB_VAULT_DEFINITIONS):a}g.maybeVault=a;g.maybeUnvault=c;g.maybeUnvaultDbRow=d;g.maybeVaultDbRow=e}),98);\n__d(\"LSDbSchema\",[\"MAWDbSchema.restore\"],(function(a,b,c,d,e,f){\"use strict\";a=importNamespace(\"MAWDbSchema.restore\").clientSchema;f.clientSchema=a}),66);\n__d(\"ReStoreDefaultValuesMetadata\",[\"FBLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b={c:\"string\",t:\"string\"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c(\"FBLogger\")(\"messenger_web_product\").warn('Malformed default values data, missing key \"%s\"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c(\"FBLogger\")(\"messenger_web_product\").warn('Malformed default values data, key \"%s\" has type \"%s\" but expected \"%s\"',d,e,f);return null}}if(typeof a.c!==\"string\"||typeof a.t!==\"string\")return null;e=[];f=a.t;try{e=JSON.parse(a.c);for(d=0;d<e.length;d++){b=e[d];if(typeof b!==\"string\")return null}}catch(a){return null}return{columns:e,tableName:f}}function b(a){return{c:JSON.stringify(a.columns),t:a.tableName}}d=\"_db_defaults_meta\";e=\"_db_schema_meta\";g.tryParseDefaultValuesData=a;g.defaultValuesColumnToValue=b;g.defaultValuesTableName=d;g.schemaVersionTableName=e}),98);\n__d(\"ReStoreIndexMetadata\",[\"FBLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(a){a=typeof a===\"string\"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(typeof e!==\"string\")return null}return a}catch(a){return null}}function a(a){var b={indexName:\"string\",keyIds:\"string\",\"predicate?\":\"string\",tableName:\"string\"};for(var d in b){var e=d.endsWith(\"?\");if(e)e=a[d.slice(0,-1)];else{if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c(\"FBLogger\")(\"messenger_web_product\").warn('Malformed index data, missing key \"%s\"',d);return null}e=a[d]}var f=b[d],g=typeof e;if(e!=null&&g!==f){c(\"FBLogger\")(\"messenger_web_product\").warn('Malformed index data, key \"%s\" has type \"%s\" but expected \"%s\"',d,g,f);return null}}e=h(a.keyIds);if(e==null){c(\"FBLogger\")(\"messenger_web_product\").warn('Malformed index data, key IDs \"%s\" are invalid',typeof a.keyIds===\"string\"?a.keyIds:\"<\"+typeof a.keyIds+\">\");return null}return typeof a.indexName!==\"string\"||typeof a.tableName!==\"string\"||typeof a.predicate!==\"string\"&&a.predicate!=null?null:babelHelpers[\"extends\"]({data:e,indexName:a.indexName,tableName:a.tableName},a.predicate==null?{}:{predicate:a.predicate})}function b(a,b){if(a[0]==null)return!0;if(a[0].length!==b[0].length)return!0;for(var c=0;c<a[0].length;c++)if(a[0][c]!==b[0][c])return!0;return a[1]!==b[1]?!0:!1}function d(a){return babelHelpers[\"extends\"]({indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName},a.predicate==null?{}:{predicate:a.predicate})}e=\"_db_indices_meta\";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);\n__d(\"LSDbForeignKeys\",[],(function(a,b,c,d,e,f){\"use strict\";a={attachments:[{indexName:\"fk_attachments\",tableName:\"attachment_items\"},{indexName:\"fk_attachments\",tableName:\"attachment_ctas\"}],community_chat_poll_options:[{tableName:\"community_chat_poll_votes\"}],community_chat_polls:[{tableName:\"community_chat_poll_options\"},{tableName:\"community_chat_poll_votes\"}],data_trace_meta:[{indexName:\"traceIdAddonId\",tableName:\"data_trace_addon\"}],messages:[{indexName:\"fk_messages\",tableName:\"attachments\"},{indexName:\"fk_messages\",tableName:\"reactions\"}],pending_tasks:[{tableName:\"encrypted_backup_restore_task_payload_context\"},{indexName:\"fk_pending_tasks\",tableName:\"pending_backups_context_v2\"},{indexName:\"fk_pending_tasks\",tableName:\"secure_recovery_code_data\"},{indexName:\"fk_pending_tasks\",tableName:\"secure_encrypted_backups_message_thread_id_context\"},{tableName:\"messages_optimistic_context\"}],rooms:[{tableName:\"room_participants\"}],secure_encrypted_backups_client_state:[{indexName:\"fk_secure_encrypted_backups_client_state\",tableName:\"secure_encrypted_backups_epochs\"}],secure_encrypted_backups_devices:[{indexName:\"fk_secure_encrypted_backups_device_supported_versions_device_id\",tableName:\"secure_encrypted_backups_device_supported_versions\"}],threads:[{indexName:\"threadKeyCtaId\",tableName:\"thread_nullstate_ctas\"},{tableName:\"messages\"},{tableName:\"attachments\"},{tableName:\"thread_nullstate\"},{tableName:\"messages_ranges_v2__generated\"},{tableName:\"participants\"},{indexName:\"fk_threads\",tableName:\"mi_act_mapping_table\"}]};b=a;f[\"default\"]=b}),66);\n__d(\"ReStoreMetadata\",[\"ReStoreDefaultValuesMetadata\",\"ReStoreIndexMetadata\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return function(b){var c={},e={},f=-1;for(var g=0;g<b.length;g++){var h=b[g];for(var h=h,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k={autoIncrement:(k=l.auto_increment)!=null?k:!1,cascadeUpdates:(k=a[l.name])!=null?k:[],id:parseInt(l.id,10),indexes:(k=Object.fromEntries(Object.entries((k=l.indexes)!=null?k:{}).map(function(a){var b=a[0];a=a[1].columns;return[b,a]})))!=null?k:{},indexPredicates:Object.fromEntries(Object.entries((k=l.indexes)!=null?k:{}).filter(function(a){a[0];a=a[1];return a.predicate}).map(function(a){var b=a[0];a=a[1];return[b,a.predicate]})),name:l.name,primaryKeyIds:l.primary_key};c[k.id]=k;e[k.name]=k;k.id>f&&(f=k.id)}}l={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d(\"ReStoreIndexMetadata\").indicesTableName,primaryKeyIds:[\"tableName\",\"indexName\"]};c[l.id]=l;e[l.name]=l;k={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d(\"ReStoreDefaultValuesMetadata\").defaultValuesTableName,primaryKeyIds:[\"t\"]};c[k.id]=k;e[k.name]=k;j={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d(\"ReStoreDefaultValuesMetadata\").schemaVersionTableName,primaryKeyIds:[]};c[j.id]=j;e[j.name]=j;return{tableIds:c,tableNames:e}}}g.getBuildTableData=a}),98);\n__d(\"LSMetadata\",[\"LSDbForeignKeys\",\"LSDbSchema\",\"LSTableSchemas\",\"ReStoreMetadata\",\"nullthrows\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=d(\"ReStoreMetadata\").getBuildTableData(c(\"LSDbForeignKeys\"));function a(a){var b=a.flat().reduce(function(a,b){return Math.max(a,parseInt(b.id,10))},-1);a=h([].concat(a,[d(\"LSDbSchema\").clientSchema.map(function(a,c){return babelHelpers[\"extends\"]({},a,{id:(b+c+1).toString()})})]));var c=a.tableIds;a=a.tableNames;return{tableIds:c,tableNames:a}}function i(a){return!0}function j(a){var b=a.reduce(function(a,b){return function(c){return c[b]!=null&&a(c)}},i);b.toString=function(){return\"dynamic predicate on [\"+a.join(\",\")+\"]\"};return b}b=a(c(\"LSTableSchemas\").map(function(a){return a.map(function(a){var b;return babelHelpers[\"extends\"]({},a,{indexes:Object.fromEntries(Object.keys((b=a.indexes)!=null?b:{}).map(function(b){var d=c(\"nullthrows\")(a.indexes)[b],e=d.ignore_nulls;d=babelHelpers.objectWithoutPropertiesLoose(d,[\"ignore_nulls\"]);return[b,babelHelpers[\"extends\"]({},d,{predicate:e?j(e):void 0})]}))})})}));g.buildTableData=h;g.buildMetadata=a;g.metadata=b}),98);\n__d(\"XPlatReactCrypto\",[\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h=self.crypto)==null?void 0:h.subtle;function a(a){var b;if(typeof ((b=self.crypto)==null?void 0:b.getRandomValues)!==\"function\")throw c(\"err\")(\"crypto.getRandomValues: Not implemented\");self.crypto.getRandomValues(a);return a}function b(){var a;if(typeof ((a=self.crypto)==null?void 0:a.randomUUID)!==\"function\")return null;a=self.crypto.randomUUID();return typeof a===\"string\"?a:null}function d(a,b,d,e,f){if(i==null)throw c(\"err\")(\"crypto.subtle.importKey: Not implemented\");return i.importKey(a,b,d,e,f)}function e(a,b){if(i==null)throw c(\"err\")(\"crypto.subtle.exportKey: Not implemented\");return i.exportKey(a,b)}function f(a,b,d){if(i==null)throw c(\"err\")(\"crypto.subtle.generateKey: Not implemented\");return i.generateKey(a,b,d)}function j(a,b,d){if(i==null)throw c(\"err\")(\"crypto.subtle.encrypt: Not implemented\");return i.encrypt(a,b,d)}function k(a,b,d){if(i==null)throw c(\"err\")(\"crypto.subtle.decrypt: Not implemented\");return i.decrypt(a,b,d)}function l(a,b,d){if(i==null)throw c(\"err\")(\"crypto.subtle.sign: Not implemented\");return i.sign(a,b,d)}function m(a,b){if(i==null)throw c(\"err\")(\"crypto.subtle.digest: Not implemented\");return i.digest(a,b)}function n(a,b,d){if(i==null)throw c(\"err\")(\"crypto.subtle.deriveBits: Not implemented\");return i.deriveBits(a,b,d)}function o(a,b,d,e,f){if(i==null)throw c(\"err\")(\"crypto.subtle.deriveKey: Not implemented\");return i.deriveKey(a,b,d,e,f)}g.getRandomValues=a;g.randomUUID=b;g.subtleImportKey=d;g.subtleExportKey=e;g.subtleGenerateKey=f;g.subtleEncrypt=j;g.subtleDecrypt=k;g.subtleSign=l;g.subtleDigest=m;g.subtleDeriveBits=n;g.subtleDeriveKey=o}),98);\/*FB_PKG_DELIM*\/\n__d(\"MAWReStoreDb\",[\"MAWIndexedDb\",\"MAWReStoreDbSetup\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(){h==null&&(d(\"MAWIndexedDb\").willSetupDB()?h=d(\"MAWIndexedDb\").getDB().then(function(){return d(\"MAWReStoreDbSetup\").getDB()}):h=d(\"MAWReStoreDbSetup\").getDB());return h}g.getDB=a}),98);\n__d(\"EchoCommonUtils\",[],(function(a,b,c,d,e,f){\"use strict\";c=\"Echo-Doc-Version\";function a(a,b){var c=a.localKey;a=a.transportKey;return c+\"@\"+a+\"-\"+b}function b(a,b,c){return a==null?{localKey:b,transportKey:c}:{displayName:a,localKey:b,transportKey:c}}f.ECHO_COMMON_FIELD_DOCUMENT_VERSION=c;f.getEchoAddressFieldNameWithSuffix=a;f.craftEchoAddress=b}),66);\n__d(\"EchoConstants\",[],(function(a,b,c,d,e,f){\"use strict\";a=new Set([\"\\0\",\"\\x01\",\"\\x02\",\"\\x03\",\"\\x04\",\"\\x05\",\"\\x06\",\"\\x07\",\"\\b\",\"\\t\",\"\\n\",\"\\v\",\"\\f\",\"\\r\",\"\\x0e\",\"\\x0f\",\"\\x10\",\"\\x11\",\"\\x12\",\"\\x13\",\"\\x14\",\"\\x15\",\"\\x16\",\"\\x17\",\"\\x18\",\"\\x19\",\"\\x1a\",\"\\x1b\",\"\\x1c\",\"\\x1d\",\"\\x1e\",\"\\x1f\",'\"',\" \",\"(\",\")\",\",\",\":\",\";\",\"<\",\">\",\"@\",\"[\",\"]\",\"\\\\\"]);f.ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE=a}),66);\n__d(\"EchoDecodingUtils\",[\"invariant\",\"EchoConstants\",\"WALogger\"],(function(a,b,c,d,e,f,g,h){\"use strict\";function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] \",\" not a valid number in echo message\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Fail to decode if the input string does not have CRLF\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Address  decode failed with value: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] invalid input to echoDecodeAddressList detected\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] invalid transportKey in address detected\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] invalid localKey in address detected\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] parse localKey in address failed\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] echoDecodeAddress failed\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] conditional quote mode decode failed\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] invalid input to echoDecodeAddress\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Fail decoding because we didn't have a closing quote. Error Field: \",\"\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Field name is blank\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] This is a raw line and we cannot decode its field name and value.\"]);u=function(){return a};return a}var v=new Set([]);function w(a,b){if(a.length===0)return;var c=a.indexOf(\":\");if(c===-1){d(\"WALogger\").ERROR(u());return}var e=a.substring(0,c).trim();a=a.substring(c+1).trim();if(e.length===0){d(\"WALogger\").ERROR(t());return}if(a.length===0){b.has(e)&&b[\"delete\"](e);return}b.set(e,a)}function x(a,b,c,e){c===void 0&&(c=new Set());var f=!1,g=b===\"conditional\"&&a[0]==='\"',h=\"\",i=g?1:0;while(i<a.length){var j=a[i];if(b===\"conditional\"&&!g&&j==='\"')break;if(!g&&c.has(j))break;if(g&&!f&&j==='\"'){g=!1;i++;break}if(g&&!f&&j===\"\\\\\"){if(i===a.length-1)break;f=!0}else f&&j===\"r\"?h+=\"\\r\":f&&j===\"n\"?h+=\"\\n\":h+=j,f=!1;i++}if(g||h.length===0){c=(j=e)!=null?j:\"unknown\";d(\"WALogger\").ERROR(s(),c);return{remainder:a,result:null,success:!1}}return{remainder:a.substring(i),result:h,success:!0}}function y(a,b){if(a.length===0){d(\"WALogger\").ERROR(r());return{remainder:a,result:null,success:!1}}var c=a.trimLeft();c=x(c,\"conditional\",d(\"EchoConstants\").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,b);if(!c.success){d(\"WALogger\").ERROR(q());return{remainder:a,result:null,success:!1}}c.result!=null||h(0,47923);if(c.remainder[0]===\"@\"){var e=z(c.remainder,c.result,b);return{remainder:e.remainder,result:e.result,success:e.success}}e=c.result;c=c.remainder.trimLeft();if(c.startsWith(\"<\")){c=z(c.substring(1),void 0,b);b=c.result;var f=c.remainder;if(c.success&&b!=null&&f.startsWith(\">\"))if(e.length===0)return{remainder:f.substring(1),result:b,success:!0};else return{remainder:f.substring(1),result:babelHelpers[\"extends\"]({},b,{displayName:e}),success:!0}}d(\"WALogger\").ERROR(p());return{remainder:a,result:null,success:!1}}function z(a,b,c){var e=b==null?a.trimLeft():a;b=b;if(b==null){var f=x(e,\"conditional\",d(\"EchoConstants\").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,c);if(!f.success){d(\"WALogger\").ERROR(o());return{remainder:a,result:null,success:!1}}b=f.result;e=f.remainder}if(b==null||b.length===0||e[0]!==\"@\"){d(\"WALogger\").ERROR(n());return{remainder:a,result:null,success:!1}}f=x(e.substring(1),\"never\",d(\"EchoConstants\").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,c);e=f.result;if(f.success&&e!=null&&e.length>0)return{remainder:f.remainder,result:{localKey:b,transportKey:e},success:!0};else{d(\"WALogger\").ERROR(m());return{remainder:a,result:null,success:!1}}}function A(a,b){if(a.length===0){d(\"WALogger\").ERROR(l());return{result:null,success:!1}}var c=y(a,b);if(!c.success){d(\"WALogger\").ERROR(k(),a);return{result:null,success:!1}}c.result!=null||h(0,47927);a=[c.result];c=c.remainder;while(c.startsWith(\",\")){var e=y(c.substring(1).trimLeft(),b);if(e.success)e.result!=null&&a.push(e.result),c=e.remainder;else break}return{result:a,success:!0}}function a(a){var b=new Map(),c=a.split(\"\\r\\n\");if(c.length===1&&c[0]===a){d(\"WALogger\").ERROR(j());return b}c.forEach(function(a){return w(a,b)});return b}function b(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};a=x(a,\"conditional\",v,b);b=a.result;a=a.success;return{result:b,success:a}}function c(a,b){a=B(a,b);return{result:(b=a.result)!=null?b:0,success:a.success}}function B(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};a=parseInt(a,10);if(isNaN(a)){d(\"WALogger\").ERROR(i(),b);return{result:null,success:!1}}else return Number.isSafeInteger(a)?{result:a,success:!0}:{result:a>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,success:!0}}function e(a,b){a=C(a,b);return{result:(b=a.result)!=null?b:!1,success:a.success}}function C(a,b){a=B(a,b);return!a.success||a.result!==0&&a.result!==1?{result:null,success:!1}:{result:a.result===1,success:!0}}function f(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};a=y(a,b);b=a.result;a=a.success;return{result:b,success:a}}function D(a,b){a=a.get(b);return a==null||a.length===0?{result:null,success:!1}:A(a,b)}function E(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};b=a.split(\",\").map(function(a){return a.trim()}).filter(Boolean);return b.length===0?{result:null,success:!1}:{result:b,success:!0}}g.echoDecodeFields=a;g.echoDecodeStringField=b;g.echoDecodeIntField=c;g.echoDecodeNullableIntField=B;g.echoDecodeBooleanField=e;g.echoDecodeNullableBooleanField=C;g.echoDecodeAddressField=f;g.echoDecodeAddressListField=D;g.echoDecodeObjectIdListField=E}),98);\n__d(\"EchoEncodingUtils\",[\"EchoConstants\",\"EchoMessage\",\"MAWMsgType\",\"WABase64\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=new Set(['\"',\"\\\\\",\"\\n\",\"\\r\",\"\\0\"]),i=new Set([\"\\0\",\"\\x01\",\"\\x02\",\"\\x03\",\"\\x04\",\"\\x05\",\"\\x06\",\"\\x07\",\"\\b\",\"\\t\",\"\\n\",\"\\v\",\"\\f\",\"\\r\",\"\\x0e\",\"\\x0f\",\"\\x10\",\"\\x11\",\"\\x12\",\"\\x13\",\"\\x14\",\"\\x15\",\"\\x16\",\"\\x17\",\"\\x18\",\"\\x19\",\"\\x1a\",\"\\x1b\",\"\\x1c\",\"\\x1d\",\"\\x1e\",\"\\x1f\",'\"',\"\\\\\"]);function j(a,b){for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(a.indexOf(e)>=0)return!0}return!1}function k(a,b,d){d===void 0&&(d=new Set());if(a.length<=0)throw c(\"unrecoverableViolation\")(\"The input string must be non-empty\",\"labyrinth_web\");var e=b;b===\"conditional\"&&(j(a,d)?e=\"always\":e=\"never\");if(e===\"never\")return a;b='\"';for(d=0;d<a.length;d++){e=a[d];h.has(e)?(b+=\"\\\\\",e===\"\\r\"?b+=\"r\":e===\"\\n\"?b+=\"n\":b+=e):b+=e}return b+'\"'}function l(a){if(!Number.isSafeInteger(a))throw c(\"unrecoverableViolation\")(\"The input value must be a safe integer\",\"labyrinth_web\");return a.toString()}function m(a){var b=\"\",c=a.displayName,e=a.localKey;a=a.transportKey;c!=null&&c.length>0&&(b+=k(c,\"always\")+\" <\");b+=k(e,\"conditional\",d(\"EchoConstants\").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE)+\"@\"+a;c!=null&&c.length>0&&(b+=\">\");return b}function n(a,b,c){c!=null&&c.length!==0&&a.set(b,k(c,\"conditional\",i))}function a(a,b,c){if(c!=null){c=l(c);n(a,b,c)}}function b(a,b,c){if(c!=null){c=l(c?1:0);n(a,b,c)}}function e(a,b,c){c!=null&&a.set(b,m(c))}function f(a,b,c){if(c!=null){var d=\"\";c.forEach(function(a,b){d+=m(a),b<c.length-1&&(d+=\", \")});a.set(b,d)}}function o(a){var b=\"\";a.forEach(function(a,c){b=b+c+\": \"+a+\"\\r\\n\"});return b}function p(a){return d(\"WABase64\").encodeB64UrlSafe(a)}function q(a){switch(a){case d(\"MAWMsgType\").MSG_TYPE.TEXT:return d(\"EchoMessage\").EchoXMessageContentType.TEXT;case d(\"MAWMsgType\").MSG_TYPE.IMAGE:return d(\"EchoMessage\").EchoXMessageContentType.IMAGE;case d(\"MAWMsgType\").MSG_TYPE.VIDEO:return d(\"EchoMessage\").EchoXMessageContentType.VIDEO;case d(\"MAWMsgType\").MSG_TYPE.PTT:return d(\"EchoMessage\").EchoXMessageContentType.AUDIO;case d(\"MAWMsgType\").MSG_TYPE.STICKER:return d(\"EchoMessage\").EchoXMessageContentType.STICKER;case d(\"MAWMsgType\").MSG_TYPE.GIF:return d(\"EchoMessage\").EchoXMessageContentType.GIF;case d(\"MAWMsgType\").MSG_TYPE.XMA:return d(\"EchoMessage\").EchoXMessageContentType.XMA;case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:return d(\"EchoMessage\").EchoXMessageContentType.DOCUMENT;case d(\"MAWMsgType\").MSG_TYPE.REACTION:return d(\"EchoMessage\").EchoXMessageContentType.REACTION;case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d(\"EchoMessage\").EchoXMessageContentType.EPHEMERAL_SETTINGS;case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d(\"EchoMessage\").EchoXMessageContentType.EPHEMERAL_SYNC_RESPONSE;case d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME:return d(\"EchoMessage\").EchoXMessageContentType.MESSAGE_DELETE_FOR_ME;case d(\"MAWMsgType\").MSG_TYPE.REVOKED:return d(\"EchoMessage\").EchoXMessageContentType.UNSEND;case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:return d(\"EchoMessage\").EchoXMessageContentType.GROUP_INVITES;default:return d(\"EchoMessage\").EchoXMessageContentType.UNKNOWN}}g.echoSetStringField=n;g.echoSetIntField=a;g.echoSetBooleanField=b;g.echoSetAddressField=e;g.echoSetAddressListField=f;g.echoEncodeFields=o;g.convertMediaKeyToString=p;g.convertDbMsgTypeToXMessageContentType=q}),98);\n__d(\"EchoMessage\",[\"$InternalEnum\",\"EchoCommonUtils\",\"EchoDecodingUtils\",\"EchoEncodingUtils\",\"EchoMessageMediaFieldUtils\",\"EchoMessageQuoteFieldUtils\",\"EchoMessageReceiptStatusFieldUtils\",\"EchoMessageXMAFieldUtils\",\"FBLogger\",\"WALogger\",\"gkx\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] mandatory xma data is missing from xma message, msgId: \",\"\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" Message origin: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" Message origin: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" Message origin: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" Message origin: \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] fieldsMap is empty for the echo message\"]);m=function(){return a};return a}var n=\"Message-ID\",o=\"Thread-ID\",p=\"Sort-Order\",q=\"Display-Timestamp\",r=\"Authoritative-Timestamp\",s=\"From\",t=\"Text\",u=\"Text-Size\",v=\"Send-Error\",w=\"Is-Tombstoned\",x=\"Expire-Timestamp\",y=\"Delete-Timestamp\",z=\"Ephemeral-Duration\",A=\"Message-Content-Type\",B=\"X-Message-Content-Type\",C=\"Message-Content-Subtype\",D=\"Is-Forwarded\",E=\"X-Offline-Threading-ID\",F=\"X-Thread-ID\",G=\"X-Message-Placeholder-Type\",H=\"Reactions\",I=\"Reaction-Authoritative-Timestamps\",J=\"X-Reaction-Offline-Threading-IDs\",K=\"Echo-Serialization-Origin\",L=\"Revoke-Sent-Timestamp\",M=\"Revoke-Unsent-Timestamp\",N=\"Edit-Count\",O=\"Edit-Contents-\",P=\"Edit-Timestamps-\",Q=1,R=(f=b(\"$InternalEnum\"))({NONE:\"none\",SMALL:\"small\",MEDIUM:\"medium\",LARGE:\"large\"}),S=f({NONE:\"none\",UNSEND:\"unsend\"}),T=f({DECRYPTION_FAILURE:\"decryption_failure\",UNSUPPORTED_NEEDS_UPDATE:\"unsupported_needs_update\",TEXT:\"text\",ADMIN_MESSAGE:\"admin_message\",MEDIA:\"media\",XMA:\"xma\",NULL_STATE:\"null_state\",PLACEHOLDER:\"placeholder\"}),U=f({UNKNOWN:\"unknown\",TEXT:\"text\",IMAGE:\"image\",VIDEO:\"video\",AUDIO:\"audio\",STICKER:\"sticker\",GIF:\"gif\",URL:\"url\",EPHEMERAL_SETTINGS:\"ephemeral_settings\",LOCATION:\"location\",DOCUMENT:\"document\",UNSEND:\"unsend\",SCREENSHOT_ACTION:\"screenshot_action\",REACTION:\"reaction\",XMA:\"xma\",VISUAL_MESSAGE_VIDEO:\"visual_message_video\",VISUAL_MESSAGE_IMAGE:\"visual_message_image\",VISUAL_MESSAGE_ACTION:\"visual_message_action\",SCREEN_RECORDING_ACTION:\"screen_recording_action\",MESSAGE_DELETE_FOR_ME:\"message_delete_for_me\",ENCRYPTED_BACKUP_NEW_DEVICE_ENROLLMENT:\"encrypted_backup_new_device_enrollment\",SENDER_KEY:\"sender_key\",DELETE_THREAD:\"delete_thread\",READ_THREAD:\"read_thread\",UNREAD_THREAD:\"unread_thread\",REACTION_UNSEND:\"reaction_unsend\",GROUP_INVITES:\"group_invites\",EPHEMERAL_SYNC_RESPONSE:\"ephemeral_sync_response\"}),V=f({NO_PLACEHOLDER:\"0\",DECRYPTION_FAILURE:\"-1\",CLIENT_NOT_SUPPORTED_NEED_UPDATE:\"-2\",UNAVIALABLE_DEVICE:\"-3\"}),W=f({UNKNOWN:\"Unknown\",WEB:\"Web\",MOBILE:\"Mobile\"});function a(a){var b=new Map();da(b,a);\"mediaData\"in a&&a.mediaData&&d(\"EchoMessageMediaFieldUtils\").echoMessageSetMediaMetadataFields(b,a.mediaData);return d(\"EchoEncodingUtils\").echoEncodeFields(b)}function X(a,b){var e=[],f=0,g=new Set();if(c(\"gkx\")(\"23918\")||c(\"qex\")._(\"778\")===!0){var h;b.forEach(function(c,f,h){c=f.startsWith(O);h=f.startsWith(P);if(c||h){h=f.slice(c?O.length:P.length);if(!g.has(h)){g.add(h);c=(f=d(\"EchoDecodingUtils\").echoDecodeStringField(b,\"\"+O+h).result)!=null?f:\"\";f=((f=d(\"EchoDecodingUtils\").echoDecodeIntField(b,\"\"+P+h).result)!=null?f:0)\/1e3;e.push({messageId:h,originalMessageId:a,text:c,timestamp:f})}}});f=(h=d(\"EchoDecodingUtils\").echoDecodeIntField(b,N).result)!=null?h:0}return{editCount:f,editHistory:e}}function e(a){a=d(\"EchoDecodingUtils\").echoDecodeFields(a);if(a.size===0){d(\"WALogger\").ERROR(m());return null}var b=d(\"EchoDecodingUtils\").echoDecodeStringField(a,n),e=d(\"EchoDecodingUtils\").echoDecodeStringField(a,o),f=d(\"EchoDecodingUtils\").echoDecodeIntField(a,p),g=d(\"EchoDecodingUtils\").echoDecodeIntField(a,q),N=d(\"EchoDecodingUtils\").echoDecodeStringField(a,A),O=d(\"EchoDecodingUtils\").echoDecodeStringField(a,B),P=d(\"EchoDecodingUtils\").echoDecodeStringField(a,C);if(b.success&&e.success&&f.success){b=b.result;if(b==null)throw c(\"FBLogger\")(\"messenger_e2ee_web\").mustfixThrow(\"The decoded messageId cannot be null\");e=e.result;if(e==null)throw c(\"FBLogger\")(\"messenger_e2ee_web\").mustfixThrow(\"The decoded threadId cannot be null\");N=N==null?void 0:N.result;if(N==null)throw c(\"FBLogger\")(\"messenger_e2ee_web\").mustfixThrow(\"The decoded contentTypeString cannot be null\");var R=X(b,a),U=R.editCount;R=R.editHistory;P={contentSubtype:aa(P.result),contentType:Z(N),displayTimestampMs:g.success?g.result:f.result,editCount:U,editHistory:R,messageId:b,sortOrderMs:f.result,threadId:e};N=$(O.result);N!=null&&(P.xContentType=N);g=d(\"EchoDecodingUtils\").echoDecodeAddressField(a,s);g.success&&g.result!=null&&(P.from=g.result);U=d(\"EchoDecodingUtils\").echoDecodeNullableBooleanField(a,w);U.success&&U.result!=null&&(P.isTombstoned=U.result);R=d(\"EchoDecodingUtils\").echoDecodeStringField(a,t);R.success&&R.result!=null&&(P.text=R.result);b=d(\"EchoDecodingUtils\").echoDecodeStringField(a,u);if(b.success&&b.result!=null){f=Y(b.result);P.textSize=f}e=d(\"EchoDecodingUtils\").echoDecodeStringField(a,G);if(e.success&&e.result!=null){O=ba(e.result);P.xMessagePlaceholderType=O}N=d(\"EchoDecodingUtils\").echoDecodeStringField(a,v);N.success&&N.result!=null&&(P.sendError=N.result);g=d(\"EchoDecodingUtils\").echoDecodeNullableIntField(a,x);g.success&&g.result!=null&&(P.expireTimestampMs=g.result);U=d(\"EchoDecodingUtils\").echoDecodeNullableIntField(a,y);U.success&&U.result!=null&&(P.deleteTimestampMs=U.result);R=d(\"EchoDecodingUtils\").echoDecodeNullableIntField(a,z);R.success&&R.result!=null&&(P.ephemeralDurationInSec=R.result);b=d(\"EchoDecodingUtils\").echoDecodeNullableIntField(a,r);b.success&&b.result!=null&&(P.authoritativeTimestampMs=b.result);f=d(\"EchoMessageReceiptStatusFieldUtils\").echoMessageDecodeReceiptStatusDataFields(a);f.length>0&&(P.receiptStatusList=f);e=d(\"EchoDecodingUtils\").echoDecodeNullableBooleanField(a,D);e.success&&e.result!=null&&(P.isForwarded=e.result);O=d(\"EchoDecodingUtils\").echoDecodeStringField(a,E);O.success&&O.result!=null&&(P.xOfflineThreadingId=O.result);N=d(\"EchoDecodingUtils\").echoDecodeStringField(a,F);N.success&&N.result!=null&&(P.xThreadId=N.result);g=d(\"EchoDecodingUtils\").echoDecodeStringField(a,K);g.success&&g.result!=null&&(P.serializationOrigin=ca(g.result));U=d(\"EchoDecodingUtils\").echoDecodeNullableIntField(a,d(\"EchoCommonUtils\").ECHO_COMMON_FIELD_DOCUMENT_VERSION);P.version=U.success&&U.result!=null?U.result:Q;R=d(\"EchoDecodingUtils\").echoDecodeAddressListField(a,H);R.success&&R.result!=null&&(P.reactions=R.result);b=d(\"EchoDecodingUtils\").echoDecodeAddressListField(a,I);b.success&&b.result!=null&&(P.reactionAuthoritativeTimestampMs=b.result);f=d(\"EchoDecodingUtils\").echoDecodeAddressListField(a,J);f.success&&f.result!=null&&(P.reactionXOfflineThreadingIds=f.result);e=d(\"EchoMessageQuoteFieldUtils\").echoMessageDecodeQuoteFields(a);e!=null&&(P.quoteData=e);if((P==null?void 0:P.contentType)===T.MEDIA||(P==null?void 0:P.contentType)===T.XMA){O=d(\"EchoMessageMediaFieldUtils\").echoMessageDecodeMediaDataFields(a,P==null?void 0:P.contentType,P==null?void 0:P.xContentType);N=\"[labyrinth_web] mandatory media data is missing from media message, msgId: \"+P.messageId+\".\";O!=null?(O.length!==1&&O.length!==2&&((P==null?void 0:P.contentType)===T.MEDIA&&d(\"WALogger\").ERROR(l(),N,P.serializationOrigin),(P==null?void 0:P.contentType)===T.XMA&&d(\"WALogger\").WARN(k(),N,P.serializationOrigin)),P.mediaData=O[0],O.length===2&&(P.previewMediaData=O[1])):((P==null?void 0:P.contentType)===T.MEDIA&&d(\"WALogger\").ERROR(j(),N,P.serializationOrigin),(P==null?void 0:P.contentType)===T.XMA&&d(\"WALogger\").WARN(i(),N,P.serializationOrigin))}if(P.contentType===T.PLACEHOLDER&&P.contentSubtype===S.UNSEND){g=d(\"EchoDecodingUtils\").echoDecodeNullableIntField(a,L);g.success&&g.result!=null&&(P.revokeSentTimestampMs=g.result);U=d(\"EchoDecodingUtils\").echoDecodeNullableIntField(a,M);U.success&&U.result!=null&&(P.revokeUnsentTimestampMS=U.result)}if(P.contentType===T.XMA){R=d(\"EchoMessageXMAFieldUtils\").decodeXMAFields(a);if(R!=null)P.xmaData=R;else{d(\"WALogger\").ERROR(h(),P.messageId);return null}}return P}else return null}function Y(a){return(a=R.cast(a))!=null?a:R.NONE}function Z(a){return(a=T.cast(a))!=null?a:T.TEXT}function $(a){return U.cast(a)}function aa(a){return(a=S.cast(a))!=null?a:S.NONE}function ba(a){return(a=V.cast(a))!=null?a:V.NO_PLACEHOLDER}function ca(a){return(a=W.cast(a))!=null?a:W.UNKNOWN}function da(a,b){var e;(e=d(\"EchoEncodingUtils\")).echoSetStringField(a,n,b.messageId);e.echoSetStringField(a,o,b.threadId);e.echoSetIntField(a,p,b.sortOrderMs);e.echoSetIntField(a,q,b.displayTimestampMs);e.echoSetIntField(a,r,b.authoritativeTimestampMs);e.echoSetAddressField(a,s,b.from);e.echoSetStringField(a,t,b.text);b.textSize!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,u,b.textSize);b.xMessagePlaceholderType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,G,b.xMessagePlaceholderType);d(\"EchoEncodingUtils\").echoSetStringField(a,v,b.sendError);d(\"EchoEncodingUtils\").echoSetBooleanField(a,w,b.isTombstoned);d(\"EchoEncodingUtils\").echoSetIntField(a,x,b.expireTimestampMs);d(\"EchoEncodingUtils\").echoSetIntField(a,y,b.deleteTimestampMs);d(\"EchoEncodingUtils\").echoSetIntField(a,z,b.ephemeralDurationInSec);b.contentType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,A,b.contentType);b.xContentType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,B,b.xContentType);d(\"EchoMessageReceiptStatusFieldUtils\").echoMessageSetReceiptStatusDataFields(a,b.receiptStatusList);d(\"EchoEncodingUtils\").echoSetBooleanField(a,D,b.isForwarded);d(\"EchoEncodingUtils\").echoSetStringField(a,E,b.xOfflineThreadingId);d(\"EchoEncodingUtils\").echoSetStringField(a,F,b.xThreadId);d(\"EchoEncodingUtils\").echoSetIntField(a,d(\"EchoCommonUtils\").ECHO_COMMON_FIELD_DOCUMENT_VERSION,b.version);b.contentSubtype!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,C,b.contentSubtype);d(\"EchoEncodingUtils\").echoSetAddressListField(a,H,b.reactions);d(\"EchoEncodingUtils\").echoSetAddressListField(a,I,b.reactionAuthoritativeTimestampMs);d(\"EchoEncodingUtils\").echoSetAddressListField(a,J,b.reactionXOfflineThreadingIds);d(\"EchoMessageQuoteFieldUtils\").echoMessageSetQuoteFields(a,b);b.serializationOrigin!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,K,b.serializationOrigin);b.revokeSentTimestampMs!=null&&d(\"EchoEncodingUtils\").echoSetIntField(a,L,b.revokeSentTimestampMs);b.revokeUnsentTimestampMS!=null&&d(\"EchoEncodingUtils\").echoSetIntField(a,M,b.revokeUnsentTimestampMS);e=b.xmaData;e!=null&&d(\"EchoMessageXMAFieldUtils\").echoMessageSetXMAFields(a,e);(c(\"gkx\")(\"23918\")||c(\"qex\")._(\"778\")===!0)&&((e=b.editHistory)==null?void 0:e.length)>0&&(d(\"EchoEncodingUtils\").echoSetIntField(a,N,b.editCount),b.editHistory.forEach(function(b){var c=b.messageId;c!=null&&(d(\"EchoEncodingUtils\").echoSetStringField(a,O+c,b.text),d(\"EchoEncodingUtils\").echoSetIntField(a,P+c,b.timestamp*1e3))}))}g.ECHO_SERIALIZATION_ORIGIN=K;g.ECHO_MESSAGE_FIELD_NAME_EDIT_COUNT=N;g.ECHO_MESSAGE_FIELD_NAME_EDIT_CONTENT_PREFIX=O;g.ECHO_MESSAGE_FIELD_NAME_EDIT_TS_PREFIX=P;g.ECHO_MESSAGE_MIGRATION_DOCUMENT_VERSION=Q;g.MessageTextSize=R;g.EchoMessageContentSubtype=S;g.EchoMessageContentType=T;g.EchoXMessageContentType=U;g.EchoMessagePlaceholderType=V;g.EchoSerializationOriginType=W;g.encodeEchoMessage=a;g.decodeEchoMessage=e}),98);\n__d(\"EchoMessageMediaFieldUtils\",[\"$InternalEnum\",\"EchoDecodingUtils\",\"EchoEncodingUtils\",\"EchoMessage\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] multi blob media message: cannot find secondary attachment object id\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] multi blob media message: cannot find primary attachment object id\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] multi blob media message: can not parse objects ids. \",\" msgType: \",\" mediaType: \",\"\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing enum fields from media fields: attachmentType: \",\" mediaPreviewContentType: \",\" mediaAttachmentType: \",\" EchoOrigin: \",\"\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing \",\" from media fields. AttachmentType: \",\" EchoOrigin: \",\"\"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing \",\" from media fields. AttachmentType: \",\". EchoOrigin: \",\"\"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Unable to get primary and secondary attachment object ids\"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] multi blob media message: primary attachment object id is null. msgType: \",\" mediaType: \",\"\"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing xAttachmentType field from required media metadata fields\"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing xContentType field from required media metadata fields\"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing plaintextHash field from required media metadata fields\"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing mediaKeyTimestamp field from required media metadata fields\"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing media key field from required media metadata fields\"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing direct path field from required media metadata fields\"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing attachment type from required media metadata fields\"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing attachment object id from required media metadata fields\"]);w=function(){return a};return a}var x=\"X-Object-Id\",y=\"X-Attachment-Object-Ids\",z=\"Attachment-Type\",A=\"Content-Type\",B=\"X-Encrypted-Hash\",C=\"X-Attachment-Type\",D=\"X-Backup-Ent-Fbid\",E=\"X-Backup-Status\",F=\"X-Content-Type\",G=\"X-Direct-Path\",H=\"Height\",I=\"X-Media-Key\",J=\"X-Media-Key-Timestamp\",K=\"Playable-Duration\",L=\"Preview-Height\",M=\"Preview-Content-Type\",N=\"Preview-Width\",O=\"Size\",P=\"Width\",Q=\"X-Plaintext-Hash\",R=\"File-Name\",S=\"Header-Attribution-Content-Type\",T=b(\"$InternalEnum\")({IMAGE:\"image\",STICKER:\"sticker\",VIDEO:\"video\",GIF:\"animated_image\",PTT:\"audio\",XMA:\"xma\",DOCUMENT:\"document\"}),U=b(\"$InternalEnum\")({IMAGE_JPEG:\"image\/jpeg\",IMAGE_PNG:\"image\/png\",STICKER:\"image\/webp\",GIF:\"image\/gif\",AUDIO_MP4:\"audio\/mp4\",AUDIO_WAV:\"audio\/wav\",XMA:\"xma\"}),V=b(\"$InternalEnum\")({INVALID:\"-1\",IMAGE:\"0\",PTT:\"1\",AUDIO:\"2\",DOCUMENT:\"3\",VIDEO:\"4\",GIF:\"5\",STICKER:\"6\",PROFILE_PICTURE:\"7\",APP_STATE:\"8\",HISTORY_SYNC:\"9\",THUMBNAIL_IMAGE:\"10\",THUMBNAIL_VIDEO:\"11\",THUMBNAIL_GIF:\"12\",THUMBNAIL_DOCUMENT:\"13\",THUMBNAIL_LINK:\"14\",NOVI_IMAGE:\"15\",NOVI_VIDEO:\"16\",KYCID:\"17\",WAFFLE_IMAGE:\"18\",WAFFLE_VIDEO:\"19\",WAFFLE_GIF:\"20\",PAYMENT_BG_IMAGE:\"21\",XMA_IMAGE:\"22\",PAYMENT_BR_DOCUMENT:\"23\",BIZ_COVER_PHOTO:\"24\",MESSENGER_PREVIEW:\"25\"});function W(a){var b=a.attachmentObjectId,c=a.attachmentType,e=a.backupEntFbid,f=a.directPath,g=a.filename,h=a.encryptedHash,i=a.height,j=a.mediaBackupStatus,k=a.mediaContentType,l=a.mediaKey,m=a.mediaKeyTimestamp,n=a.mediaPlayableDuration,o=a.plaintextHash,x=a.previewContentHeight,y=a.previewContentType,z=a.previewContentWidth,A=a.size,B=a.width,C=a.xAttachmentType,D=a.xContentType;a=a.xmaData;if(b==null)d(\"WALogger\").ERROR(w());else if(c==null)d(\"WALogger\").ERROR(v());else if(f==null)d(\"WALogger\").ERROR(u());else if(l==null)d(\"WALogger\").ERROR(t());else if(m==null)d(\"WALogger\").ERROR(s());else if(o==null)d(\"WALogger\").ERROR(r());else if(D==null)d(\"WALogger\").ERROR(q());else if(C==null)d(\"WALogger\").ERROR(p());else return{attachmentObjectId:b,attachmentType:c,backupEntFbid:e,directPath:f,encryptedHash:h,filename:g,height:i,mediaBackupStatus:j,mediaContentType:k,mediaKey:l,mediaKeyTimestamp:m,mediaPlayableDuration:n,plaintextHash:o,previewContentHeight:x,previewContentType:y,previewContentWidth:z,size:A,width:B,xAttachmentType:C,xContentType:D,xmaData:a}}function a(a,b){var c;(c=d(\"EchoEncodingUtils\")).echoSetStringField(a,x,b.attachmentObjectId);c.echoSetStringField(a,z,b.attachmentType);c.echoSetStringField(a,Q,b.plaintextHash);c.echoSetStringField(a,B,b.encryptedHash);c.echoSetIntField(a,O,b.size);c.echoSetStringField(a,I,b.mediaKey);c.echoSetIntField(a,J,b.mediaKeyTimestamp);c.echoSetStringField(a,G,b.directPath);b.mediaContentType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,A,b.mediaContentType);d(\"EchoEncodingUtils\").echoSetIntField(a,P,b.width);d(\"EchoEncodingUtils\").echoSetIntField(a,H,b.height);b.previewContentType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,M,b.previewContentType);b.headerAttributionContentType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,S,b.headerAttributionContentType);d(\"EchoEncodingUtils\").echoSetIntField(a,N,b.previewContentWidth);d(\"EchoEncodingUtils\").echoSetIntField(a,L,b.previewContentHeight);d(\"EchoEncodingUtils\").echoSetIntField(a,K,b.mediaPlayableDuration);b.xAttachmentType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,C,b.xAttachmentType);d(\"EchoEncodingUtils\").echoSetStringField(a,F,b.xContentType);d(\"EchoEncodingUtils\").echoSetStringField(a,D,b.backupEntFbid);d(\"EchoEncodingUtils\").echoSetStringField(a,E,b.mediaBackupStatus);d(\"EchoEncodingUtils\").echoSetStringField(a,R,b.filename)}function c(a,b,c){var e={},f=!1,g=!1,h=!1;if(aa(a)){var i=ba(a,b,c);if(i==null){d(\"WALogger\").ERROR(o(),b,c);return null}i.length!==2&&d(\"WALogger\").ERROR(n());b=!1;c=!1;var j=i[0];i=i[1];var k={};f=Z(a,e,j);b=Z(a,k,i);g=Y(a,e,j,j);c=Y(a,k,i,j);h=X(a,e,j);j=X(a,k,i);if(!f||!g||!h||!b||!c||!j)return null;i=W(e);b=W(k);if(i!=null&&b!=null)return[i,b]}else{f=Z(a,e);g=Y(a,e);h=X(a,e);if(!f||!g||!h)return null;c=W(e);if(c!=null)return[c]}}function X(a,b,c){var e;e=(e=a.get(d(\"EchoMessage\").ECHO_SERIALIZATION_ORIGIN))!=null?e:\"\";var f=[{fieldName:\"height\",id:H},{fieldName:\"width\",id:P},{fieldName:\"size\",id:O},{fieldName:\"previewContentHeight\",id:L},{fieldName:\"previewContentWidth\",id:N}];c=[{attachmentTypes:[V.IMAGE,V.GIF,V.STICKER,V.VIDEO,V.AUDIO],fieldName:\"mediaKeyTimestamp\",id:c!=null?c+\"-\"+J:J},{attachmentTypes:[V.VIDEO,V.AUDIO],fieldName:\"mediaPlayableDuration\",id:K}];for(var g=0;g<c.length;g++){var h=c[g],i=h.attachmentTypes,j=h.fieldName;h=h.id;h=d(\"EchoDecodingUtils\").echoDecodeIntField(a,h);var k=h.result;h=h.success;if(h&&k!=null)b[j]=k;else if(!(b.xAttachmentType!=null&&!$(i,b.xAttachmentType))){d(\"WALogger\").ERROR(m(),j,b.xAttachmentType,e);return!1}}f.map(function(f){var c=f.fieldName;f=f.id;f=d(\"EchoDecodingUtils\").echoDecodeIntField(a,f);var e=f.result;f=f.success;f&&e!=null&&(b[c]=e)});return!0}function Y(a,b,c,e){var f,g;f=(f=a.get(d(\"EchoMessage\").ECHO_SERIALIZATION_ORIGIN))!=null?f:\"\";var h=[{fieldName:\"filename\",id:R}];c!=null&&e!=null?(b.attachmentObjectId=c,g=[{fieldName:\"mediaKey\",id:c+\"-\"+I},{fieldName:\"plaintextHash\",id:c+\"-\"+Q},{fieldName:\"directPath\",id:c+\"-\"+G},{fieldName:\"xContentType\",id:c+\"-\"+F},{fieldName:\"mediaBackupStatus\",id:e+\"-\"+E}],e=e+\"-\"+D,c=c+\"-\"+B):(g=[{fieldName:\"mediaKey\",id:I},{fieldName:\"attachmentObjectId\",id:x},{fieldName:\"plaintextHash\",id:Q},{fieldName:\"directPath\",id:G},{fieldName:\"xContentType\",id:F}],e=D,c=B);h.push({fieldName:\"backupEntFbid\",id:e});h.push({fieldName:\"mediaContentType\",id:A});h.push({fieldName:\"mediaBackupStatus\",id:E});h.push({fieldName:\"encryptedHash\",id:c});for(e=g,c=Array.isArray(e),g=0,e=c?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var i;if(c){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;var j=i.fieldName;i=i.id;i=d(\"EchoDecodingUtils\").echoDecodeStringField(a,i);var k=i.result;i=i.success;if(i&&k!=null)b[j]=k;else{d(\"WALogger\").ERROR(l(),j,b.attachmentType,f);return!1}}h.map(function(f){var c=f.fieldName;f=f.id;f=d(\"EchoDecodingUtils\").echoDecodeStringField(a,f);var e=f.result;f=f.success;f&&e!=null&&(b[c]=e)});return!0}function Z(a,b,c){var e;e=(e=a.get(d(\"EchoMessage\").ECHO_SERIALIZATION_ORIGIN))!=null?e:\"\";var f=d(\"EchoDecodingUtils\").echoDecodeStringField(a,z);f=T.cast(f.result);f!=null&&(b.attachmentType=f);var g=d(\"EchoDecodingUtils\").echoDecodeStringField(a,M);g=U.cast(g.result);g!=null&&(b.previewContentType=g);var h=d(\"EchoDecodingUtils\").echoDecodeStringField(a,S);h=h.result;h!=null&&(b.headerAttributionContentType=h);h=d(\"EchoDecodingUtils\").echoDecodeStringField(a,c!=null?c+\"-\"+C:C);h.success&&h.result!=null&&(a=ca(h.result),a!=null&&(b.xAttachmentType=a));if(f!=null&&(g!=null||f===T.DOCUMENT))return!0;else d(\"WALogger\").ERROR(k(),f,g,h,e);return!1}function $(a,b){return a.reduce(function(a,c){return a||c===b},!1)}function aa(a){return a.has(y)}function ba(a,b,c){var e=d(\"EchoDecodingUtils\").echoDecodeObjectIdListField(a,y),f=e.result;e=e.success;if(!e||f==null||f.length===0){d(\"WALogger\").ERROR(j(),f,b,c);return null}var g=f.find(function(b){b=b+\"-\"+E;b=d(\"EchoDecodingUtils\").echoDecodeStringField(a,b);var c=b.result;b=b.success;if(b&&c!=null)return!0});e=f.find(function(a){return a!==g});if(g==null){d(\"WALogger\").ERROR(i());return null}if(e==null){d(\"WALogger\").ERROR(h());return null}return[g,e]}function ca(a){a=V.cast(a);return(a=a)!=null?a:V.INVALID}g.AttachmentType=T;g.EchoMessageMediaPreviewType=U;g.EchoMessageActMediaAttachmentType=V;g.convertMediaMetadataDetailsToMediaMetadata=W;g.echoMessageSetMediaMetadataFields=a;g.echoMessageDecodeMediaDataFields=c}),98);\n__d(\"EchoMessageQuoteFieldUtils\",[\"EchoDecodingUtils\",\"EchoEncodingUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"Reply-Message-Id\",i=\"Reply-Message-Sender\",j=\"Reply-Sort-Order\";function a(a){var b={quoteMessageId:\"<not set>\",quoteMessageSender:{localKey:\"<not set>\",transportKey:\"<not set>\"},quoteSortOrderInMs:0},c=k(a,b),d=l(a,b);a=m(a,b);return!c||!d||!a?null:b}function b(a,b){b=b.quoteData;if(b==null)return;d(\"EchoEncodingUtils\").echoSetStringField(a,h,b.quoteMessageId);d(\"EchoEncodingUtils\").echoSetAddressField(a,i,b.quoteMessageSender);d(\"EchoEncodingUtils\").echoSetIntField(a,j,b.quoteSortOrderInMs)}function k(a,b){var c=[{fieldName:\"quoteMessageSender\",id:i}];for(var e=0;e<c.length;e++){var f=c[e],g=f.fieldName;f=f.id;f=d(\"EchoDecodingUtils\").echoDecodeAddressField(a,f);var h=f.result;f=f.success;if(f&&h!=null)b[g]=h;else return!1}return!0}function l(a,b){var c=[{fieldName:\"quoteMessageId\",id:h}];for(var e=0;e<c.length;e++){var f=c[e],g=f.fieldName;f=f.id;f=d(\"EchoDecodingUtils\").echoDecodeStringField(a,f);var i=f.result;f=f.success;if(f&&i!=null)b[g]=i;else return!1}return!0}function m(a,b){var c=[{fieldName:\"quoteSortOrderInMs\",id:j}];for(var e=0;e<c.length;e++){var f=c[e],g=f.fieldName;f=f.id;f=d(\"EchoDecodingUtils\").echoDecodeIntField(a,f);var h=f.result;f=f.success;if(f&&h!=null)b[g]=h;else return!1}return!0}g.echoMessageDecodeQuoteFields=a;g.echoMessageSetQuoteFields=b}),98);\n__d(\"EchoMessageReceiptStatusFieldUtils\",[\"$InternalEnum\",\"EchoCommonUtils\",\"EchoDecodingUtils\",\"EchoEncodingUtils\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Error occurred while decoding participants from echo doc, error: \",\"\"]);h=function(){return a};return a}var i=\"Receipt-Status\",j=\"Receipt-Timestamp\",k=b(\"$InternalEnum\")({UNKNOWN:\"unknown\",SENDING:\"sending\",SERVER_RECEIVED:\"server_received\",DELIVERED:\"delivered\",READ:\"read\",ERROR:\"error\",NON_RETRYABLE_ERROR:\"non_retryable_error\"});function a(a,b){if(b==null||b.length===0)return;b.forEach(function(b){d(\"EchoEncodingUtils\").echoSetStringField(a,d(\"EchoCommonUtils\").getEchoAddressFieldNameWithSuffix(b.address,i),b.status),b.timestampMs!=null&&d(\"EchoEncodingUtils\").echoSetIntField(a,d(\"EchoCommonUtils\").getEchoAddressFieldNameWithSuffix(b.address,j),b.timestampMs)})}function c(a){var b=[];l(a).forEach(function(c){var e=d(\"EchoCommonUtils\").getEchoAddressFieldNameWithSuffix(c,i);e=d(\"EchoDecodingUtils\").echoDecodeStringField(a,e);if(e.success){e=(e=k.cast(e.result))!=null?e:k.UNKNOWN;var f=d(\"EchoCommonUtils\").getEchoAddressFieldNameWithSuffix(c,j);f=d(\"EchoDecodingUtils\").echoDecodeNullableIntField(a,f);f.result!=null?b.push({address:c,status:e,timestampMs:f.result}):b.push({address:c,status:e})}});return b}function l(a){var b=new Set();for(var a=a.keys(),c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(c){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.includes(i))try{f=f.split(\"@\");var g=f[0];f=m(f[1]);b.add({localKey:g,transportKey:f})}catch(a){d(\"WALogger\").ERROR(h(),a)}}return Array.from(b)}function m(a){a=a.split(i);return a[0].split(\"-\")[0]}g.MessageReceiptStatus=k;g.echoMessageSetReceiptStatusDataFields=a;g.echoMessageDecodeReceiptStatusDataFields=c}),98);\n__d(\"EchoMessageXMAFieldUtils\",[\"$InternalEnum\",\"EchoDecodingUtils\",\"EchoEncodingUtils\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing \",\" from xma fields\"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing \",\" from xma fields\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing \",\" from media fields\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"[labyrinth_web] Missing xmaIsTombstoned from xma fields\"]);k=function(){return a};return a}var l=\"XMA-Default-CTA\",m=\"XMA-Gating-Type\",n=\"XMA-Header-Subtitle\",o=\"XMA-Header-Title\",p=\"XMA-Is-Tombstoned\",q=\"XMA-Layout-Type\",r=\"XMA-Max-Subtitle-Num-Lines\",s=\"XMA-Max-Title-Num-Lines\",t=\"XMA-Subtitle-Text\",u=\"XMA-Target-Expiry\",v=\"XMA-Target-ID\",w=\"XMA-Target-Type\",x=\"XMA-Target-Username\",y=\"XMA-Title-Text\",z=\"XMA-Content-Ref\",A=b(\"$InternalEnum\").Mirrored([\"SINGLE\",\"HSCROLL\",\"VSTACK\",\"PORTRAIT\"]),B=b(\"$InternalEnum\").Mirrored([\"NONE\",\"IG_STORY_PHOTO_MENTION\",\"IG_SINGLE_IMAGE_POST_SHARE\",\"IG_MULTIPOST_SHARE\",\"IG_SINGLE_VIDEO_POST_SHARE\",\"IG_STORY_PHOTO_SHARE\",\"IG_STORY_VIDEO_SHARE\",\"IG_CLIPS_SHARE\",\"IG_IGTV_SHARE\",\"IG_SHOP_SHARE\",\"IG_PROFILE_SHARE\",\"IG_STORY_PHOTO_HIGHLIGHT_SHARE\",\"IG_STORY_VIDEO_HIGHLIGHT_SHARE\",\"IG_STORY_REPLY\",\"IG_STORY_REACTION\",\"FB_FEED_SHARE\",\"FB_STORY_REPLY\",\"FB_STORY_SHARE\",\"FB_STORY_MENTION\",\"FB_FEED_VIDEO_SHARE\",\"FB_GAMING_CUSTOM_UPDATE\",\"FB_PRODUCER_STORY_REPLY\",\"MSG_EXTERNAL_LINK_SHARE\",\"MSG_RECEIVER_FETCH\",\"RTC_AUDIO_CALL\",\"RTC_VIDEO_CALL\",\"RTC_MISSED_AUDIO_CALL\",\"RTC_MISSED_VIDEO_CALL\",\"RTC_GROUP_AUDIO_CALL\",\"RTC_GROUP_VIDEO_CALL\",\"FB_EVENT\"]),C=b(\"$InternalEnum\").Mirrored([\"NONE\",\"PRIVATE\",\"SENSITIVE\",\"MISINFORMATION\",\"MEDIA_LABEL\",\"POST_COVER\",\"POST_LABEL\",\"WARNING_SCREENS\",\"INFO\",\"EYE_OFF\",\"NEWS_OFF\",\"WARNING\"]);function a(a,b){b.xmaLayoutType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,q,b.xmaLayoutType),b.xmaTargetType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,w,b.xmaTargetType),d(\"EchoEncodingUtils\").echoSetStringField(a,x,b.xmaTargetUsername),d(\"EchoEncodingUtils\").echoSetStringField(a,v,b.xmaTargetId),b.xmaTargetExpiry!=null&&d(\"EchoEncodingUtils\").echoSetIntField(a,u,b.xmaTargetExpiry),d(\"EchoEncodingUtils\").echoSetStringField(a,l,b.xmaDefaultCTA),d(\"EchoEncodingUtils\").echoSetStringField(a,o,b.xmaHeaderTitle),d(\"EchoEncodingUtils\").echoSetStringField(a,n,b.xmaHeaderSubtitle),d(\"EchoEncodingUtils\").echoSetStringField(a,y,b.xmaTitleText),d(\"EchoEncodingUtils\").echoSetStringField(a,t,b.xmaSubtitleText),b.xmaMaxTitleNumLines!=null&&d(\"EchoEncodingUtils\").echoSetIntField(a,s,b.xmaMaxTitleNumLines),b.xmaMaxSubtitleNumLines!=null&&d(\"EchoEncodingUtils\").echoSetIntField(a,r,b.xmaMaxSubtitleNumLines),b.xmaGatingType!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,m,b.xmaGatingType),d(\"EchoEncodingUtils\").echoSetBooleanField(a,p,b.xmaIsTombstoned),b.xmaContentRef!=null&&d(\"EchoEncodingUtils\").echoSetStringField(a,z,b.xmaContentRef)}function c(a){var b=F(a,p);if(b==null){d(\"WALogger\").ERROR(k());return null}var c=C.cast(d(\"EchoDecodingUtils\").echoDecodeStringField(a,m).result),e=A.cast(d(\"EchoDecodingUtils\").echoDecodeStringField(a,q).result),f=B.cast(d(\"EchoDecodingUtils\").echoDecodeStringField(a,w).result);return{xmaContentRef:D(a,z),xmaDefaultCTA:D(a,l),xmaGatingType:c,xmaHeaderSubtitle:D(a,n),xmaHeaderTitle:D(a,o),xmaIsTombstoned:b,xmaLayoutType:e,xmaMaxSubtitleNumLines:E(a,r),xmaMaxTitleNumLines:E(a,s),xmaSubtitleText:D(a,t),xmaTargetExpiry:E(a,u),xmaTargetId:D(a,v),xmaTargetType:f,xmaTargetUsername:D(a,x),xmaTitleText:D(a,y)}}function D(a,b){a=d(\"EchoDecodingUtils\").echoDecodeStringField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d(\"WALogger\").WARN(j(),b)}function E(a,b){a=d(\"EchoDecodingUtils\").echoDecodeIntField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d(\"WALogger\").WARN(i(),b)}function F(a,b){a=d(\"EchoDecodingUtils\").echoDecodeBooleanField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d(\"WALogger\").WARN(h(),b)}g.XMALayoutType=A;g.XMAContentType=B;g.XMAGatingType=C;g.echoMessageSetXMAFields=a;g.decodeXMAFields=c}),98);\/*FB_PKG_DELIM*\/\n__d(\"MWLSThread\",[\"FBLogger\",\"Promise\",\"ReQL\",\"ReQLSuspense\",\"useReStore\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=function(a){return a};function a(a,b){b===void 0&&(b=j);var e=(i||(i=c(\"useReStore\")))();return d(\"ReQLSuspense\").useFirst(function(){return a!=null?d(\"ReQL\").fromTableAscending(e.table(\"threads\")).getKeyRange(a).map(function(a){return b(a)}):d(\"ReQL\").empty()},[e,a],f.id+\":29\")}function e(a,b){b===void 0&&(b=j);var e=(i||(i=c(\"useReStore\")))();return d(\"ReQLSuspense\").useFirstExn(function(){return d(\"ReQL\").fromTableAscending(e.table(\"threads\")).getKeyRange(a).map(function(a){var c;return(c=b==null?void 0:b(a))!=null?c:a})},[e,a],f.id+\":48\")}function k(a,b,e){e===void 0&&(e=j);a=d(\"ReQLSuspense\").first(d(\"ReQL\").fromTableAscending(a.table(\"threads\")).getKeyRange(b),f.id+\":65\");if(!a)throw c(\"FBLogger\")(\"messenger_web\").mustfixThrow(\"thread is null\/undefined\");return e(a)}function l(a,c,e){e===void 0&&(e=j);return c!=null?d(\"ReQL\").firstAsync(d(\"ReQL\").fromTableAscending(a.table(\"threads\")).getKeyRange(c)).then(function(a){return a?e(a):void 0}):(h||(h=b(\"Promise\"))).resolve(void 0)}g.useThread=a;g.useThreadExn=e;g.getThreadExn=k;g.getThreadAsync=l}),98);\n__d(\"IGDRouteProvider.react\",[\"I64\",\"MWLSThread\",\"react\",\"useCurrentRoute\",\"useRoutePassthroughProps\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=h||(h=d(\"react\")),k=h,l=k.createContext,m=k.useContext,n=k.unstable_useMemoCache;function o(a){try{return(i||(i=d(\"I64\"))).of_string(a)}catch(a){return}}function p(a){if(a==null)return;a=a.params.thread_key;if(a!=null&&typeof a===\"string\")return o(a)}var q=l(),r=l();function a(a){var b=n(9);a=a.children;var e=c(\"useCurrentRoute\")(),f;b[0]!==e?(f=p(e),b[0]=e,b[1]=f):f=b[1];e=f;b[2]===Symbol[\"for\"](\"react.memo_cache_sentinel\")?(f=function(a){return a.threadType},b[2]=f):f=b[2];f=d(\"MWLSThread\").useThread(e,f);var g;b[3]!==f||b[4]!==a?(g=j.jsx(r.Provider,{value:f,children:a}),b[3]=f,b[4]=a,b[5]=g):g=b[5];b[6]!==e||b[7]!==g?(f=j.jsx(q.Provider,{value:e,children:g}),b[6]=e,b[7]=g,b[8]=f):f=b[8];return f}function s(){return m(q)}function b(){return m(r)}function e(){var a=c(\"useCurrentRoute\")(),b=s(),d=c(\"useRoutePassthroughProps\")();if(a!=null&&(a.url===\"\/direct\/requests\"||a.url===\"\/direct\/requests\/\"))return!0;return b!=null&&d!=null?d.entryPoint===\"pendingRequests\":!1}function f(){var a=c(\"useCurrentRoute\")(),b=s(),d=c(\"useRoutePassthroughProps\")();if(a!=null&&(a.url===\"\/direct\/requests\/hidden\"||a.url===\"\/direct\/requests\/hidden\/\"))return!0;return b!=null&&d!=null?d.entryPoint===\"inboxSpam\":!1}function t(){var a=c(\"useCurrentRoute\")();return a!=null&&(a.url===\"\/direct\/partnerships\"||a.url===\"\/direct\/partnerships\/\")?!0:!1}g.IGDRouteProvider=a;g.useThreadKeyFromCurrentRoute=s;g.useThreadTypeFromCurrentRoute=b;g.useIsCurrentRouteMessageRequests=e;g.useIsCurrentRouteMessageHiddenRequests=f;g.useIsCurrentRoutePartnershipInbox=t}),98);\n__d(\"LSCookie\",[\"$InternalEnum\",\"Cookie\",\"CookieCore\",\"CurrentEnvironment\",\"CurrentMessengerUser\",\"FBLogger\",\"I64\",\"LSE2EEMetadataSyncGroupUtils\",\"LSIntEnum\",\"MessengerLogHistory\",\"MqttWebDeviceID\",\"ReQL\",\"SortedAsyncIterable\",\"isPromise\",\"isStringNullOrEmpty\",\"pageID\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k=b(\"$InternalEnum\")({SYNCING:\"1\",NOT_SYNCING:\"0\"}),l=d(\"MessengerLogHistory\").getInstance(\"client_init\"),m=c(\"CurrentEnvironment\").instagramdotcom?\"igd_ls\":\"m_ls\",n={c:{},d:c(\"MqttWebDeviceID\").clientID,s:k.NOT_SYNCING,u:c(\"pageID\")};function o(a){function b(a){d(\"CookieCore\").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(a),window.location.hostname)}var e=c(\"Cookie\").get(m);if(e==null){var f;b((f={},f[d(\"CurrentMessengerUser\").getIDorEIMU()]=a,f));return}f=JSON.parse(e);if(f.u==null){b(babelHelpers[\"extends\"]({},f,(e={},e[d(\"CurrentMessengerUser\").getIDorEIMU()]=a,e)))}else{b((f={},f[d(\"CurrentMessengerUser\").getIDorEIMU()]=a,f))}}function a(){c(\"Cookie\").clear(m)}function p(a){if(typeof a!==\"object\")return null;if(a==null)return null;var b=a.c,c=a.d,d=a.s;a=a.u;d=typeof d===\"string\"?k.cast(d):null;b=typeof b===\"object\"&&b!=null?Object.entries(b).reduce(function(a,b){var c=b[0];b=b[1];if(a==null||typeof b!==\"string\")return null;a[c]=b;return a},{}):null;if(typeof c!==\"string\")return null;if(d==null)return null;if(b==null)return null;return typeof a!==\"string\"?null:{c:b,d:c,s:d,u:a}}function q(){var a=c(\"Cookie\").get(m);if(c(\"isStringNullOrEmpty\")(a))return n;a=JSON.parse(a);var b=d(\"CurrentMessengerUser\").getIDorEIMU(),e=p(a);a=typeof a===\"object\"&&a!=null?p(a[b]):null;return(a=(b=a)!=null?b:e)!=null?a:n}function r(a){var b=q();if(b.u!==c(\"pageID\"))return;var e={};a.forEach(function(a){a[0];a=a[1];var b=a.currentCursor;a=a.groupId;b!=null&&(e[(i||(i=d(\"I64\"))).to_string(a)]=b)});l.debug(\"Updated sync cookie to set syncing=false, saving latest cursors\");o(babelHelpers[\"extends\"]({},b,{c:e,s:k.NOT_SYNCING}))}var s=[1,2,d(\"LSE2EEMetadataSyncGroupUtils\").shouldAlwaysResetE2EEMetadata()?null:95];function e(a){var b=d(\"SortedAsyncIterable\").toArray(d(\"ReQL\").union.apply(void 0,s.map(function(b){return b==null?d(\"ReQL\").empty():d(\"ReQL\").fromTableAscending(a.tables.sync_groups).getKeyRange((j||(j=d(\"LSIntEnum\"))).ofNumber(b))})));if((h||(h=c(\"isPromise\")))(b)){c(\"promiseDone\")(b.then(function(a){r(a)}));return}r(b)}function f(){try{var a=q();l.debug(\"Updated sync cookie to set syncing=true\");o(babelHelpers[\"extends\"]({},a,{s:k.SYNCING,u:c(\"pageID\")}))}catch(a){c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).warn(\"Failed to sync cookie\")}}g.Status=k;g.DEFAULT_COOKIE=n;g.clear=a;g.get=q;g.syncBeforeUnload=e;g.setSyncing=f}),98);\n__d(\"LSProgramTarget\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){a=b(\"$InternalEnum\")({DASM:1,JS:2,JSON:3});c=a;f[\"default\"]=c}),66);\n__d(\"LSDataTraceCheckPoint\",[],(function(a,b,c,d,e,f){a=Object.freeze({CLIENT_DB_OUTBOUND:1,CLIENT_NETWORK_OUTBOUND:2,CLIENT_NETWORK_INBOUND:10,CLIENT_DB_INBOUND:11,CLIENT_EVALUATE_DASM:12,CLIENT_APP_STATE_CHANGE:13,CLIENT_CREATE_TASK:20,CLIENT_RECIPIENT_PRESENCE:21,CLIENT_EVALUATE_DASM_BEGIN:22,MQTT_PUBLISH:30,MQTT_PUBLISH_ACK:31,MQTT_DISCONNECTED:32,MQTT_CONNECTING:33,MQTT_CONNECTED:34,MQTT_CONNECTION_ACKED:35,TINCAN_RECEIVE_MESSAGE:36,TINCAN_RECEIVE_DECRYPTION_COMPLETE:37,TINCAN_RECEIVE_DECRYPTION_FAILED:38,TINCAN_RECEIVE_DR_QUEUED:39,TINCAN_RECEIVE_DR_SENT_TO_NETWORK:40,TINCAN_RECEIVE_DR_PUBLISH_TO_MQTT:41,TINCAN_RECEIVE_DRMQTT_PUBACK:42,TINCAN_RECEIVE_BOUNCE_TASK_QUEUED:43,TINCAN_RECEIVE_BOUNCE_TASK_SENT_TO_NETWORK:44,TINCAN_RECEIVE_BOUNCE_TASK_PUBLISH_TO_MQTT:45,RICH_MEDIA_DOWNLOAD_START:50,RICH_MEDIA_DOWNLOAD_END:51,RICH_MEDIA_DOWNLOAD_ERROR:52,RICH_MEDIA_UPLOAD_START:53,ARMADILLO_ACT:60,ARMADILLO_ACT_TASK_PICK:61,ARMADILLO_ACT_SERIALIZE:62,ARMADILLO_ACT_GROUP_SEND:63,ARMADILLO_ACT_SEND_FAILURE:64,ARMADILLO_ACT_MESSAGE_SEND:65,NETWORK_DISCONNECTED:70,NETWORK_CONNECTED:71,NETWORK_UNKNOWN:72,FLOW_CREAT:80,FLOW_END:81,FLOW_INTERRUPTED:82,FLOW_CONNECT_ID:83,FLOW_END_AND_FLUSH:84,FLOW_END_FOR_FAILURE:85,TRACE_CREATED:98,CLIENT_READY_TO_FLUSH:99,PENDING_DELTA:100,NO_PENDING_DELTA:101,INIT_SYNC:102,RESNAPSHOT:103,CATCH_UP:104,PERIODIC_SYNC:105,CATCH_UP_FROM_REVISION:106,RESNAPSHOT_CONTINUE:107,RESNAPSHOT_END:108,PERIODIC_SYNC_CONTINUE:109,PERIODIC_SYNC_END:110,CONTACT_SYNC_OPTIMISTIC:111,CONTACT_SYNC_FROM_OMNISTORE:112,CONTACT_SYNC_TAM_OPTIMISTC:113,CONTACT_SYNC_TAM_FROM_OMNISTORE:114,CONTACT_SYNC_TAM_ERROR:115,VERIFY_USER_FOR_SYNC:116,SNAPSHOT_START:117,SNAPSHOT_CONTINUE:118,SNAPSHOT_END:119,FETCH_DELTA:120,DELTA_SUMMARY:130,RECEIVE_DELIVERY_RECEIPT:200,TASK_DESERIALIZATION_ERROR:201,OPTIMISIC_MESSAGE_FAILED:202,SEND_SERVER_AUTHORITATIVE:203,THREAD_RANGE_QUERY_COMPLETE:204,THREAD_RANGE_QUERY_FAILURE:205,THREAD_POINT_QUERY_COMPLETE:206,SEND_SERVER_PARTIAL:207,MARK_AS_OPTIMISTIC_SENT:208,XMS_TRANSPORT_MESSAGE_SEND_START:300,XMS_TRANSPORT_MESSAGE_SEND_FAIL:301,SKIP_TASK_DISPATCH:900,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_START:1200,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_COMPLETE:1201,ADVANCED_CRYPTO_MEM_WA_PUBLISH:1202,ADVANCED_CRYPTO_MEM_PUBLISH_ACK:1203,ADVANCED_CRYPTO_MEM_SEND_TASK_COMPLETE:1204,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED:1205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING:1206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED:1207,ADVANCED_CRYPTO_MEM_FAILURE:1208,ADVANCED_CRYPTO_MEM_SEND_SUCCESS_WITH_RETRY:1209,ADVANCED_CRYPTO_MEM_DELIVERY_RECEIPT_RECEIVED:1210,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_START:1211,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_END:1212,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_START:1213,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_RETRYSTART:1214,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_END:1215,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_START:1216,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_END:1217,ADVANCED_CRYPTO_REGISTRATION_WCR_REGISTER:1218,ADVANCED_CRYPTO_REGISTRATION_SAVE_WA_DEVICE_ID_ERROR:1219,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_START:1220,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_END:1221,ADVANCED_CRYPTO_MEM_ENCRYPTION_BEGIN:1222,ADVANCED_CRYPTO_MEM_ENCRYPTION_END:1223,ADVANCED_CRYPTO_MEM_ENCRYPTION_DEVICE_COUNT:1224,ADVANCED_CRYPTO_DUAL_SEND:1225,ADVANCED_CRYPTO_REGISTRATION_SERVER_SUCCESS:1226,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER:1227,ADVANCED_CRYPTO_REGISTRATION_CAT_NULL:1228,ADVANCED_CRYPTO_REGISTRATION_WCR_MANAGER_NULL:1229,ADVANCED_CRYPTO_REGISTRATION_RESPONSE_NULL:1230,ADVANCED_CRYPTO_REGISTRATION_SELF_NULL:1231,ADVANCED_CRYPTO_REGISTRATION_EMPTY_DEVICE_ID:1232,ADVANCED_CRYPTO_REGISTRATIONRETRY_REGISTER_FAILURE:1233,ADVANCED_CRYPTO_GROUP_DUAL_SEND:1234,RAVEN_IMAGE_MESSAGE:1235,RAVEN_VIDEO_MESSAGE:1236,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_CAT:1237,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_NETWORK:1238,ADVANCED_CRYPTO_CAT_DISK_FETCH_CAT_INVALID:1239,ADVANCED_CRYPTO_RECONNECT_GENERIC_ERROR:1240,ADVANCED_CRYPTO_RECONNECT_CAT_INVALID:1241,ADVANCED_CRYPTO_RECONNECT_CAT_EXPIRED:1242,ADVANCED_CRYPTO_CAT_MEMORY_FETCH_NULL:1243,ADVANCED_CRYPTO_FIRST_CONNECTION_START:1244,LABYRINTH_INITIALIZE_BACKUP_SPROC:1400,LABYRINTH_INITIALIZE_BACKUP_SUCCESS_SPROC:1401,LABYRINTH_INITIALIZE_BACKUP_FAILURE:1402,LABYRINTH_CREATE_BACKUP_MAILBOX_SPROC:1403,LABYRINTH_HANDLE_CREATE_BACKUP_MAILBOX_SUCCESS_SPROC:1404,LABYRINTH_OPEN_EPOCH_SPROC:1405,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC:1406,LABYRINTH_HANDLER_OPEN_EPOCH_FAILURE_SPROC:1407,LABYRINTH_CREATE_VIRTUAL_DEVICE_SPROC:1410,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_SUCCESS_SPROC:1411,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_FAILURE_SPROC:1412,LABYRINTH_ADD_DEVICE_SPROC:1413,LABYRINTH_ADD_DEVICE_FROM_VIRTUAL_SPROC:1414,LABYRINTH_HANDOLE_WRONG_RECOVERY_CODE_SPROC:1415,LABYRINTH_HANDLE_ADD_DEVICE_SUCCESS_SPROC:1416,LABYRINTH_HANDLE_ADD_DEVICE_FAILURE_SPROC:1417,LABYRINTH_INITIALIZE_RESTORE_SPROC:1418,LABYRINTH_DECRYPT_THREADS_SPROC:1419,LABYRINTH_REQUEST_MESSAGES_FROM_THREADS_SPROC:1420,LABYRINTH_REQUEST_MESSAGES_FROM_RANGE_QUERY_SPROC:1421,LABYRINTH_DECRYPT_MESSAGES_SPROC:1422,LABYRINTH_DELETE_BACKUP_ON_CLIENT_SPROC:1423,LABYRINTH_DELETE_BACKUPS_SPROC:1424,LABYRINTH_HANDLE_DELETE_MAILBOX_SPROC:1425,LABYRINTH_ISSUE_DELETE_BACKUP_TASK_SPROC:1426,LABYRINTH_BACKUP_UPLOAD_BEGIN:1427,LABYRINTH_BACKUP_UPLOAD_SUCCESS_SPROC:1428,LABYRINTH_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC:1429,LABYRINTH_QR_INIT_ADD_DEVICE_SPROC:1430,LABYRINTH_QR_INIT_ADD_DEVICE_SUCCESS_SPROC:1431,LABYRINTH_QR_INIT_GET_SECRETS_SPROC:1433,LABYRINTH_QR_FINISH_ADD_PEER_DEVICE_SPROC:1434,LABYRINTH_SYNC_EPOCHS_STORED_PROCEDURE_SPROC:1436,LABYRINTH_SYNC_EPOCHS_SUCCESS_SPROC:1437,LABYRINTH_SYNC_EPOCHS_FORWARD_DERIVATION_END:1438,LABYRINTH_SYNC_EPOCHS_BACKWARD_DERIVATION_END:1439,LABYRINTH_SYNC_EPOCHS_OPEN_NEW_EPOCH:1440,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC:1441,LABYRINTH_PREPARE_OPEN_EPOCH_SUCCESS_SPROC:1442,LABYRINTH_MEB_MANAGER_ADD_DEVICE:1443,LABYRINTH_BACKUP_UPLOAD_FAIL:1450,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SPROC:1498,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SUCCESS:1499,LABYRINTH_MEDIA_BACKUP_START:1455,LABYRINTH_MEDIA_BACKUP_SUCCESS:1456,LABYRINTH_MEDIA_BACKUP_FAILURE:1458,LABYRINTH_MEDIA_RESTORE_START:1459,LABYRINTH_MEDIA_RESTORE_SUCCESS:1460,LABYRINTH_MEDIA_RESTORE_FAILURE:1462,LABYRINTH_REMOVE_VIRTUAL_DEVICE_SPROC:1484,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_SUCCESS:1485,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_FAILURE:1486,LABYRINTH_REMOVE_VIRTUAL_DEVICE_BACKUP_NOT_FOUND:1493,LABYRINTH_REMOVE_VIRTUAL_DEVICE_WRITE_TASK:1494,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_TASK_EXECUTER:1495,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_SERIALIZER:1496,LABYRINTH_BACKUP_UPLOAD_SERIALIZE:1451,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_SUCCEED:1463,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_FAIL:1464,LABYRINTH_UPDATE_BACKUP_TABLE_SPROC:1467,LABYRINTH_FETCH_BACKUP_IDS_SPROC:1468,LABYRINTH_PROCESS_BACKUP_IDS_SPROC:1487,LABYRINTH_BACKUP_STATUS_NO_INFO:1488,LABYRINTH_BACKUP_STATUS_FETCH_ERROR:1489,LABYRINTH_BACKUP_STATUS_NOT_ONBOARDED:1490,LABYRINTH_BACKUP_STATUS_ONBOARDED:1491,LABYRINTH_BACKUP_STATUS_NO_BACKUPS_PRESENT:1492,LABYRINTH_OPT_OUT_OF_BACKUP_SPROC:1469,LABYRINTH_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1470,LABYRINTH_HANDLE_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1471,LABYRINTH_FETCH_BACKUPS_METADATA_SPROC:1478,LABYRINTH_HANDLE_BACKUPS_METADATA_RESULT_SPROC:1480,LABYRINTH_RESTORE_THREADS_SUCCESS:1481,LABYRINTH_RESTORE_MESSAGES_SUCCESS:1482,LABYRINTH_POINT_QUERY_MESSAGE_RESTORE:2511,LABYRINTH_RESTORE_MESSAGE_NEWER_DIRECTION:2514,LABYRINTH_RESTORE_SURROUNDING_MESSAGES:2515,LABYRINTH_BACKUP_UPLOAD_GET_ECHO_DOC:1497,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE:1800,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_SUCCESS:1801,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_FAILURE:1802,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_CALLED:1803,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_SUCCESS:1804,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_FAILURE:1805,LABYRINTH_MEBMANAGER_ADD_DEVICE_NOTOFICATION_TRIGGERED:1806,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATE:1807,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATEFAILURE:1808,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_CALLED:1809,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_SUCCESS:1810,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_FAILURE:1811,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_CALLED:1812,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_SUCCESS:1813,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_FAILURE:1814,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_NOTIFICATION_TRIGGERRED:1815,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS:1816,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS_FAILURE:1817,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_SUCCESS:1818,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_FAILURE:1819,LABYRINTH_MEBMANAGER_WRONG_RECOVERY_CODE:1823,LABYRINTH_ENCRYPT_MESSAGE_FAIL:1828,LABYRINTH_ENCRYPT_MESSAGE_GENERATED_PAYLOAD:1824,LABYRINTH_ENCODE_DOCUMENT:1820,LABYRINTH_ENCODE_DOCUMENT_FAIL:1821,LABYRINTH_ENCODE_DOCUMENT_SUCCESS:1822,LABYRINTH_MEDIA_ISSUE_ATTACHMENT_BACKUP_TASK_SPROC:1825,LABYRINTH_MEDIA_UPDATE_ATTACHMENT_BACKUP_ENT_SPROC:1826,LABYRINTH_MEDIA_HANDLE_ATTACHMENT_BACKUP_FAILURE_SPROC:1827,LABYRINTH_MEDIA_ISSUE_ATTACHMENT_RESTORE_TASK:1829,LABYRINTH_MEDIA_UPDATE_ATTACHMENT_CDN_URL:1830,LABYRINTH_MEDIA_HANDLE_ATTACHMENT_RESTORE_FAILURE:1831,LABYRINTH_MEDIA_ISSUE_BATCH_ATTACHMENT_BACKUP_TASK_SPROC:1873,LABYRINTH_UPLOAD_CANCEL:1850,LABYRINTH_DELETE_BACKUP_ON_CLIENT_STARTING_CANCEL:1851,LABYRINTH_DELETE_BACKUP_ON_CLIENT_DID_CANCEL:1852,LABYRINTH_DELETE_BACKUP_ON_CLIENT_FAILED_CANCEL:1853,LABYRINTH_BACKUP_RETRY_DELETE_MESSAGE_BACKUP_STATUS_ENTRY:1865,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN:1881,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_GOT_MESSAGE_IDS_FROM_ACT:1882,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN_OCMF_OPE_OPERATIONS:1883,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_END_OCMF_OPE_OPERATIONS:1884,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_FETCH_MESSAGE_RANGE_ERROR:1885,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_ISSUE_COMPARATOR_TASK:1886,LABYRINTH_CLEAR_BACKUP_TABLE_ON_CLIENT:1891,LABYRINTH_CLEAR_VIRTUAL_DEVICES_TABLE_ON_CLIENT:1892,LABYRINTH_CLEAR_BACKUP_METADATA_TABLE_ON_CLIENT:1893,SAP_VESTA_FETCH_VESTA_KEY_AND_SECRET_BEGIN:2400,LABYRINTH_PLUGIN_CALLING_GENERATE_RECOVERY_CODE:2401,SAP_FESTA_FETCH_KEY_AND_SECRET_COMPLETION:2402,SAP_VESTA_CALLING_VESTA_REGISTRATION:2403,SAP_VESTA_REGISTRATION_COMPLETION:2404,LABYRINTH_PLUGIN_CALLING_CREATE_EXTRA_VIRTUAL_DEVICE:2405,SAP_VESTA_NOTIFY_SECRET_STORED_COMPLETION:2406,SAP_VESTA_NOTIFY_CLIENT_ABOUT_VESTA_REGISTRATION:2407,SAP_VESTA_CALLING_VESTA_LOGIN:2411,SAP_VESTA_LOGIN_COMPLETION:2412,LABYRINTH_PLUGIN_CALLING_ADD_DEVICE:2413,LABYRINTH_PLUGIN_CALLING_INITIALIZE_BACKUP:2416,LABYRINTH_PIN_SETUP_BEGIN:2417,LABYRINTH_PIN_SETUP_SUCCESS:2418,LABYRINTH_PIN_SETUP_FAILURE:2419,LABYRINTH_PIN_RESTORE_BEGIN:2420,LABYRINTH_PIN_RESTORE_SUCCESS:2421,LABYRINTH_PIN_RESTORE_FAILURE:2422,LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE:2423,LABYRINTH_FETCH_THREAD_IDS_SPROC:2500,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_SUCCESS:2501,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_FAILURE:2502,LABYRINTH_REQUEST_MESSAGES_FROM_FETCH_THREAD_IDS_SPROC:2503,LABYRINTH_REQUEST_MESSAGES_FROM_INIT_RESTORE_SPROC:2506,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_START:2512,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_END:2513,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_START:2800,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_END:2801,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_ENCRYPTION_VERSION_DATA_SPROC:2802,LABYRINTH_VERSIONING_UPSERT_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2803,LABYRINTH_VERSIONING_SYNC_ENCRYPTION_VERSION_DATA_SPROC:2804,LABYRINTH_VERSIONING_VERSION_SUPPORTED:2805,LABYRINTH_VERSIONING_SYNC_UPDATE_VERSION_DATA:2806,LABYRINTH_VERSIONING_SYNC_NO_VERSION_DATA:2807,LABYRINTH_VERSIONING_VERSION_SELECTED:2808,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2809,LABYRINTH_VERSIONING_VERSION_NOT_SUPPORTED:2810,LABYRINTH_VERSIONING_UPSERT_DEVICE_INVALID_SIGNATURE:2811,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_ISSUE_REQUEST_ASSOC_DEVICES:2821,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_NO_BACKUP:2822,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_FLOW_ALREADY_IN_PROGRES:2823,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC:2824,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_NUM_EDGES:2825,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_FROM:2826,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_TO:2827,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_SOURCE:2828,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_SOURCE_EPOCH_LOADED:2829,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DERIVE_CHAINING_KEY_PSK:2830,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_FORWARD_EDGE_ENTROPY:2831,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_SUCCESS:2832,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_FAIL:2833,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2834,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_SOURCE:2835,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_SOURCE_EPOCH_LOADED:2836,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_BACKWARD_EDGE:2837,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DECRYPTION_SUCCESS:2838,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DERIVATION_FAIL:2839,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2840,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FAILURE:2841,LABYRINTH_GET_OPEN_EPOCH_KEYS_SPROC:2842,LABYRINTH_GET_OPEN_EPOCH_KEYS_NO_EPOCHS_ON_CLIENT:2843,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_ALL_EPOCH_ANON_IDS:2844,LABYRINTH_GET_OPEN_EPOCH_KEYS_NUM_ANON_IDS:2845,LABYRINTH_GET_OPEN_EPOCHS_KEYS_EPOCH_ANON_ID_LIST_EMPTY:2846,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_KEYS_FOR_ANON_ID:2847,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NOT_FOUND:2848,LABYRINTH_SYNC_EPOCHS_SPROC_DOWNLOAD_EPOCHS_V2_WRITE_TASK:2849,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_INITIAL_EPOCH:2850,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_EPOCH_WITH_LAST_EPOCH_METADATA:2851,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_AFTER_FIRST_EPOCH:2852,LABYRINTH_OPEN_EPOCH_SPROC_FAILURE_LAST_EPOCH_NOT_FOUND:2853,LABYRINTH_OPEN_EPOCH_SPROC_ERROR:2854,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_CLOSE_LAST_EPOCH:2855,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_DERIVE_AND_STORE_EPOCH:2856,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_DERIVE_AND_STORE:2857,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_AUTHORITY:2858,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_EPOCH_ID:2859,LABYRINTH_INCLUDE_FALLBACK_KEY_DURING_ENCRYPTION:2860,LABYRINTH_DERIVE_FALLBACK_KEY:2861,LABYRINTH_FAILED_TO_INCLUDE_FALLBACK_KEY:2862,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_VALUE:2863,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NULL_VALUE:2864,LABYRINTH_MESSAGE_RESTORE_EPOCH_ANON_ID_NULL:2865,LABYRINTH_WEB_EPOCH_ROTATION_ENABLED:2866,LABYRINTH_WEB_EPOCH_ROTATION_DISABLED:2867,LABYRINTH_MOBILE_EPOCH_ROTATION_ENABLED:2868,LABYRINTH_MOBILE_EPOCH_ROTATION_DISABLED:2869,LABYRINTH_DECRYPT_MESSAGE_SPROC_SINGLE_EPOCH_KEY:2870,LABYRINTH_DECRYPT_MESSAGE_SPROC_EPOCH_NOT_FOUND_ERROR:2871,LABYRINTH_DECRYPT_MESSAGE_SPROC_MULTIPLE_EPOCHS_ERROR:2872,LABYRINTH_WEB_ECHO_MESSAGE_RESTORE_BEGIN:3600,LABYRINTH_WEB_ISSUE_RESTORE_JOB_DONE:3601,LABYRINTH_WEB_INSERT_TO_BAKCUP_MESSAGE_TABLE_DONE:3602,LABYRINTH_WEB_RESTORE_WITH_SERIALIZER_START:3603,LABYRINTH_WEB_ISSUE_RESTORE_JOB_STARTED:3604,LABYRINTH_WEB_INSERT_TO_RESTORE_PAYLOAD_CONTEXT_TABLE_DONE:3605,LABYRINTH_WEB_XMA_RESTORE_STARTED:3606,LABYRINTH_WEB_XMA_RESTORE_ENDED:3607,LABYRINTH_WEB_XMA_RESTORE_MEDIAID_NULL:3608,LABYRINTH_WEB_XMA_RESTORE_DBXMA_NULL:3609,LABYRINTH_WEB_ISSUE_MESSAGE_RANGE_QUERY:3610,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST:3700,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN:3701,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE:3702,LABYRINTH_WEB_UPLOAD_THREAD_NOT_PRESENT:3703,LABYRINTH_WEB_UPLOAD_THREAD_PRESENT:3704,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_UNSUCCESSFUL:3705,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_SUCCESSFUL:3706,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NULL:3707,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NOT_NULL:3708,LABYRINTH_WEB_UPLOAD_GET_RECEIPT_STATUS_LIST_SUCCESSFUL:3709,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NULL:3710,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NOT_NULL:3711,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_SUCCESSFUL:3712,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_UNSUCCESSFUL:3713,LABYRINTH_WEB_UPLOAD_INVALID_MSG_TYPE_FOR_MEDIA_TYPE:3714,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_TRUE:3715,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_FALSE:3716,LABYRINTH_WEB_UPLOAD_UNSUPPORTED_MEDIA_TYPE:3717,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ID_FOUND_IN_MEDIA_MSG:3718,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ENTRY_FOR_MEDIA_ID:3719,LABYRINTH_WEB_UPLOAD_GET_REACTION_DATA_SUCCESSFUL:3720,LABYRINTH_WEB_UPLOAD_GET_QUOTE_MSG_SUCCESSFUL:3721,LABYRINTH_WEB_UPLOAD_GET_QUOTE_SENDER_NAME_SUCCESSFUL:3722,LABYRINTH_WEB_UPLOAD_FB_ID_NULL_FOR_XMA_MSG:3723,LABYRINTH_WEB_UPLOAD_GET_XMA_DATA_SUCCESSFUL:3724,LABYRINTH_WEB_UPLOAD_NO_XMA_DB_ENTRY_FOR_EXTERNAL_ID:3725,LABYRINTH_WEB_UPLOAD_ECHO_MESSAGE_CREATION_SUCCESSFUL:3726,LABYRINTH_WEB_UPLOAD_MISSING_MEDIA_DATA_FOR_MEDIA_MSG:3727,LABYRINTH_WEB_UPLOAD_INVOKE_MESSAGE_UPLOAD_SPROC:3728,LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3729,LABYRINTH_WEB_UPLOAD_USER_DEVICE_NOT_ENROLLED:3730,LABYRINTH_WEB_GET_BACKUP_TENANCY:3731,LABYRINTH_WEB_UPLOAD_ERROR_OCCURRED_ON_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3739,LABYRINTH_WEB_UPLOAD_XMA_NOT_FOUND_IN_IDB:3740,LABYRINTH_WEB_UPLOAD_MEDIA_NOT_FOUND_FOR_XMA_IN_IDB:3741,LABYRINTH_WEB_UPLOAD_INVALID_ECHO_MESSAGE_SERIALIZATION_RESPONSE:3742,LABYRINTH_WEB_UPLOAD_DUPLICATE_REQUEST:3743,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MSG:3744,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MEDIA:3745,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MSG_ERROR:3746,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MEDIA_ERROR:3747,LABYRINTH_WEB_UPLOAD_XMA_DATA_IS_NULL:3748,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_NOT_IN_DB:3749,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_IN_DB:3750,MQTT_STATE_DISCONNECTED_EVENT:10000001,MQTT_STATE_CONNECTED_EVENT:10000002,APP_STATEBACKGROUND:10000003,APP_STATEFOREGROUND:10000004,MQTT_STATE_CONNECTING_EVENT:10000005,GLOBAL_CONNECTIVITY_BANNER_DISPLAY:10000006,GLOBAL_CONNECTIVITY_BANNER_VANISH:10000007,SWITCH_ACCOUNT_EVENT:10000008,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED_EVENT:10001205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING_EVENT:10001206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED_EVENT:10001207});f[\"default\"]=a}),66);\n__d(\"LSDataTraceType\",[],(function(a,b,c,d,e,f){a=Object.freeze({TASK:1,SYNC:2,RECEIVE_MSG:3,RICH_MEDIA_SEND:4,RICH_MEDIA_DOWNLOAD:5,TASK_CLIENT_MODE:6,ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS:69,ENCRYPTED_BACKUPS_INIT:70,ENCRYPTED_BACKUPS_ADD_DEVICE:71,ENCRYPTED_BACKUPS_UPLOAD:72,ENCRYPTED_BACKUPS_RESTORE:73,ENCRYPTED_BACKUPS_DELETE_BACKUP:75,ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE:76,ENCRYPTED_BACKUPS_QR_ADD_DEVICE:77,ENCRYPTED_BACKUPS_SYNC_EPOCHS:78,ENCRYPTED_BACKUPS_OPEN_EPOCH:79,ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP:80,ENCRYPTED_BACKUPS_MEDIA_BACKUP:81,ENCRYPTED_BACKUPS_MEDIA_RESTORE:82,ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION:83,ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA:86,ENCRYPTED_BACKUPS_REMOVE_VIRTUAL_DEVICE:87,ENCRYPTED_BACKUPS_QR_ADD_DEVICE_RECEIVER:88,ENCRYPTED_BACKUPS_DERIVE_AND_STORE_EPOCHS:89,ENCRYPTED_BACKUPS_GET_OPEN_EPOCH_KEYS:90,ENCRYPTED_BACKUPS_END_TO_END_THREAD_RESTORE:190,SAP_VESTA_REGISTRATION:251,SAP_VESTA_LOGIN:252,ENCRYPTED_BACKUPS_SHADOW_FETCH_BACKUP_STATUS:197,ENCRYPTED_BACKUPS_SHADOW_INIT:198,ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE:199,ENCRYPTED_BACKUPS_SHADOW_UPLOAD:200,ENCRYPTED_BACKUPS_SHADOW_RESTORE:201,ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP:203,ENCRYPTED_BACKUPS_SHADOW_CREATE_EXTRA_VIRTUAL_DEVICE:204,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE:205,ENCRYPTED_BACKUPS_SHADOW_SYNC_EPOCHS:206,ENCRYPTED_BACKUPS_SHADOW_OPEN_EPOCH:207,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE_RECEIVER:216,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_UPSERT_VERSION_DATA:240,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_DELETE_VERSION_DATA:241,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_SYNC_VERSION_DATA:242,ENCRYPTED_BACKUPS_MESSAGE_INTEGRITY_CHECKER:243});f[\"default\"]=a}),66);\n__d(\"LSInternetConnectionState\",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});f[\"default\"]=a}),66);\n__d(\"LSPendingTasksPluginType\",[],(function(a,b,c,d,e,f){a=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40});f[\"default\"]=a}),66);\n__d(\"WALoggerDeferred\",[\"requireDeferred\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=c(\"requireDeferred\")(\"WATagsLogger\").__setRef(\"WALoggerDeferred\");function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).DEV.apply(d,[a].concat(c))})})}function b(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).DEV_XMPP.apply(d,[a].concat(c))})})}function d(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).LOG.apply(d,[a].concat(c))})})}function e(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).WARN.apply(d,[a].concat(c))})})}function f(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).ERROR.apply(d,[a].concat(c))})})}function i(a,b,c){return h.load().then(function(d){return d.whenReady().then(function(){return d.TAGS(a)}).then(function(a){a[c](b)})})}g.DEV=a;g.DEV_XMPP=b;g.LOG=d;g.WARN=e;g.ERROR=f;g.logWithTags=i}),98);\n__d(\"LSShape\",[\"LSDict\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return c(\"LSDict\").fromObject(a)}function b(a){return c(\"LSDict\").shapeToRecord(a)}g.ofRecord=a;g.toRecord=b}),98);\n__d(\"MWLSThreadDisplayContext\",[\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=h||(h=d(\"react\")),j=h.useContext,k=i.createContext();function a(a){var b=a.children;a=a.value;return i.jsx(k.Provider,{value:a,children:b})}a.displayName=a.name+\" [from \"+f.id+\"]\";function b(){return j(k)}g.MWLSThreadDisplayContextProvider=a;g.useMWLSThreadDisplayContext=b}),98);\n__d(\"MWPActor.react\",[\"Actor\",\"CurrentMessengerUser\",\"I64\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=h||(h=d(\"react\"));e=h;var k=e.createContext,l=e.useContext,m=e.useMemo,n=k();function a(){var a=l(n),b=d(\"Actor\").useActor(),c=b[0],e=m(function(){return(i||(i=d(\"I64\"))).of_string(c)},[c]),f=d(\"CurrentMessengerUser\").getPageMessagingMailboxId(),g=m(function(){return f!==\"0\"?(i||(i=d(\"I64\"))).of_string(f):null},[f]);b=m(function(){return a!=null?a:g!=null?g:e},[e,a,g]);return b}function b(){return o()!=null}function o(){var a=d(\"CurrentMessengerUser\").getPageMessagingMailboxId();return a===\"0\"?null:a}function c(a){var b=a.actorId;a=a.children;return b!=null?j.jsx(n.Provider,{value:b,children:a},(i||(i=d(\"I64\"))).to_string(b)):a}c.displayName=c.name+\" [from \"+f.id+\"]\";g.useActor=a;g.isAPPlus=b;g.getAPPlusMailboxId=o;g.MWPActorProvider=c}),98);\n__d(\"LSAppendDataTraceAddonStoredProcedure\",[\"LSAppendDataTraceAddon\",\"cr:8709\"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.dataTraceId;d[1]=b.checkPointId;d[2]=b.syncChannel;d[3]=b.errorMessage;d[4]=b.tags;return c(\"LSAppendDataTraceAddon\").apply(void 0,d.concat([a]))}g[\"default\"]=a}),98);\n__d(\"LSPredefineTraceForTask\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.forEach(b.db.table(2).fetch([[[a[1]]]]),function(b){var d=b.update;b.item;return d({dataTraceId:a[0],initTraceTimestampMs:c[0]})})},function(d){return b.db.table(153).add({traceId:a[0],initTimestampMs:c[0],foregroundTimestampMs:b.i64.cast([0,0]),traceType:b.i64.cast([0,1]),shouldFlush:!1,contextOne:a[2],contextTwo:b.i64.to_string(a[1]),predefinedId:a[3]})}])},function(a){return b.resolve(d)}])}e.exports=a}),null);\n__d(\"isRegisterArmadilloOnIgEnabled\",[\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"gkx\")(\"26380\")===!0}g[\"default\"]=a}),98);\n__d(\"LSResult\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return[a]}f[\"default\"]=a}),66);\n__d(\"ArmadilloDataTraceType\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=(h||d(\"I64\")).of_string(\"13\");g.armadilloMessageSend=a}),98);\n__d(\"LSGenerateTraceId\",[\"LSRequestId\",\"MetaConfig\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){if(c(\"MetaConfig\")._(\"62\"))return c(\"LSRequestId\").generate();else return void 0}g[\"default\"]=a}),98);\n__d(\"ReQLTable\",[\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f){\"use strict\";function a(a,b,c){return g.apply(this,arguments)}function g(){g=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b,c){var d=(yield a.get.apply(a,b));c=c(d);yield a.upsert(b,c)});return g.apply(this,arguments)}f.update=a}),66);\n__d(\"updateAndFlushLSDataTrace\",[\"I64\",\"LSAppendDataTraceAddonStoredProcedure\",\"LSDataTraceCheckPoint\",\"LSFactory\",\"LSIntEnum\",\"Promise\",\"ReQLTable\",\"requireDeferred\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k=c(\"requireDeferred\")(\"LSDataTraceFlush\").__setRef(\"updateAndFlushLSDataTrace\");function a(a,e){return e==null?(j||(j=b(\"Promise\"))).resolve():c(\"LSAppendDataTraceAddonStoredProcedure\")(c(\"LSFactory\")(a),{checkPointId:(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").CLIENT_READY_TO_FLUSH),dataTraceId:e,syncChannel:(i||(i=d(\"I64\"))).neg_one}).then(function(){return d(\"ReQLTable\").update(a.data_trace_meta,[e],function(a){if(a!=null)return{contextOne:a.contextOne,contextThree:a.contextThree,contextTwo:a.contextTwo,foregroundTimestampMs:a.foregroundTimestampMs,initTimestampMs:a.initTimestampMs,predefinedId:a.predefinedId,shouldFlush:!0,traceId:a.traceId,traceType:a.traceType};else throw c(\"unrecoverableViolation\")(\"Data trace is missing \"+e,\"messenger_web_product\")}).then(function(){return k.load().then(function(b){return b.flush(a,e)})})})}g[\"default\"]=a}),98);\n__d(\"LSPlatformRealtimeTransport\",[\"I64\",\"LSDynamicDependencies\",\"LSIntEnum\",\"LSJson\",\"LSShape\",\"Promise\",\"clearTimeout\",\"promiseDone\",\"setTimeout\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j;e=\"LSPlatformRealtimeTransport.NotConnected\";var k=\"LSPlatformRealtimeTransport.Timeout\";function l(a){var b=new Map();return{getAll:function(){return Array.from(b.values())},getOrStart:function(c){var d=c.toString(),e=b.get(d);e==null&&(e=a(c),b.set(d,e));return e}}}function m(){}function a(a,e,f){var g=new Map(),n={contents:m},o=new Set(),p=new Map(),q=[],r=l(function(b){b=a(b,f);q.push(b.subscribe(function(a){var b=JSON.parse(a),e=d(\"LSDynamicDependencies\").downloadBootloaderDependencies(b.sp,b.nop,b.ntop);a=b.request_id;var f;if(a!=null){var h=g.get(a);h==null?f=!1:(c(\"clearTimeout\")(h.timeoutId),h.resolve({downloadTask:e,payload:b,type:\"taskresponse\"}),g[\"delete\"](a),f=!0)}else f=!1;if(!f){Array.from(p.entries()).forEach(function(a){return a[1](e,b)});return}}));q.push(b.onReconnect(function(){return n.contents()}));q.push(b.onConnectionStatusChange(function(a){o.forEach(function(b){return b(a)})}));return b});r.getOrStart(1);return{cleanup:function(){q.forEach(function(a){return a()}),r.getAll().forEach(function(a){return a.cleanup()})},onConnectionStatusChange:function(a){o.add(a);return function(){o[\"delete\"](a)}},onReconnect:function(a){n.contents=a;return function(){n.contents=m}},publish:function(a){var f=a.payload,l=a.queueName,m=a.requestId,n=a.syncChannel,o=a.type_;return new(j||(j=b(\"Promise\")))(function(a,b){if((h||(h=d(\"I64\"))).equal(o,(i||(i=d(\"LSIntEnum\"))).ofNumber(3))){var j=c(\"setTimeout\")(function(){var a=g.get(m);a!=null&&(g[\"delete\"](m),a.reject({RE_EXN_ID:k}));return b({RE_EXN_ID:k})},3e4);g.set(m,{queueName:l,reject:b,resolve:a,timeoutId:j,timestamp:Date.now()})}c(\"promiseDone\")(r.getOrStart((i||(i=d(\"LSIntEnum\"))).unwrapIntEnum(n)).publish(d(\"LSJson\").stringify(d(\"LSShape\").ofRecord({app_id:e,payload:f,request_id:m,type:o})),o),function(){if(!(h||(h=d(\"I64\"))).equal(o,(i||(i=d(\"LSIntEnum\"))).ofNumber(3)))return a({type:\"noresponseexpected\"})},function(a){return b(a)})})},subscribeToNonTaskResponses:function(a){var b={};p.set(b,a);return function(){p[\"delete\"](b)}}}}g.NotConnected=e;g.Timeout=k;g.LSPlatformRealtimeTransport=a}),98);\n__d(\"MWPBumpEntityKey\",[\"CurrentUser\",\"ODS\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a,b){(h||(h=d(\"ODS\"))).bumpEntityKey(3185,a,b)}function a(a,b){var d=c(\"CurrentUser\").getAppID();d=d==null?\"unknown\":d;return i(a,b+\".\"+d)}g.bumpEntityKey=i;g.bumpEntityKeyWithAppId=a}),98);\/*FB_PKG_DELIM*\/\n__d(\"LSDataTraceTag\",[],(function(a,b,c,d,e,f){\"use strict\";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7,j=20,k=21,l=22,m=23,n=24,o=25,p=26,q=27,r=28,s=29,t=30,u=31,v=32,w=33,x=34,y=35,z=36,A=37,B=38,C=39,D=40,E=41,F=42;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.messageTypeNone=j;f.messageTypeText=k;f.messageTypeFutureproof=l;f.messageTypeCiphertext=m;f.messageTypeUnavailable=n;f.messageTypeImage=o;f.messageTypeVideo=p;f.messageTypePtt=q;f.messageTypeAdmin=r;f.messageTypeRevoked=s;f.messageTypeGif=t;f.messageTypeSticker=u;f.messageTypeExpiredEphemeral=v;f.messageTypeEphemeralSettingAdmin=w;f.messageTypeEphemeralSyncResponse=x;f.messageTypeEphemeralScreenshotAction=y;f.messageTypeDeleteForMe=z;f.messageTypeEphemeralSettingChangeFromCurrentDevice=A;f.messageTypeAlertICDC=B;f.messageTypeGroupInvite=C;f.messageTypeXMA=D;f.messageTypeReaction=E;f.messageTypeSenderKeyDistribution=F}),66);\n__d(\"MAWBridgeTrace\",[\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b,c,e,f,g,h,i){var j=a.ack,k=a.externalId,l=a.ts;a=a.type;var m=d(\"WAJids\").switchOnMsgrChatJidType(b,{group:function(a){return\"Group\"},user:function(a){return\"User\"}});return{ack:j,externalId:k,isFirstMsg:!!f,openMessageOtid:e,openMessageParticipantCount:g,participantCount:h,threadJid:b,threadKey:i,threadType:m,traceType:c,ts:l,type_:a}}function b(a,b,c){return{traceContext:c,traceId:b,traceType:a}}function c(a,b,c,d){return{errorMessage:d,event:b,externalIds:a,traceType:c}}function e(a,b,c,d,e,f){return{checkPointId:a,dataTraceId:b,errorMessage:c,shouldFlush:d,syncChannel:e,tags:f}}g.createBridgeStartTraceData=a;g.createBridgeStartTraceWithTraceIdData=b;g.createBridgeUpdateTraceData=c;g.createBridgeTraceRecordCheckpointData=e}),98);\n__d(\"MAWTraceUtils\",[\"LSDataTraceCheckPoint\",\"LSDataTraceTag\",\"LSIntEnum\",\"LSRequestId\",\"MAWBridge\",\"MAWBridgeTrace\",\"MAWMsgType\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=\"backup_upload\",j=\"media_backup\",k=\"vesta_registration\",l=\"vesta_login\";function m(){return c(\"LSRequestId\").generate()}function a(a,b,c){c=(c=c)!=null?c:m();d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"StartTraceWithTraceId\",value:d(\"MAWBridgeTrace\").createBridgeStartTraceWithTraceIdData(a,c,b)}]},!0);return c}function n(a,b,c,e,f){if(a!=null){c=c.length>0?c.map(function(a){return a.toString()}).join(\",\"):void 0;d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"uiUpdate\",{events:[{tag:\"TraceRecordCheckpoint\",value:d(\"MAWBridgeTrace\").createBridgeTraceRecordCheckpointData(b,a,f,e,-1,c)}]},!0)}}function b(a,b,e,f){n(a,b,e,!1),n(a,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").FLOW_END_FOR_FAILURE),e,!0,f)}function e(a,b,e){n(a,b,e,!1),n(a,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").FLOW_END_AND_FLUSH),e,!0)}function f(a,b,e){n(a,b,e,!1),n(a,(h||(h=d(\"LSIntEnum\"))).ofNumber(c(\"LSDataTraceCheckPoint\").FLOW_END_AND_FLUSH),e,!0)}function o(a){switch(a){case d(\"MAWMsgType\").MSG_TYPE.TEXT:return d(\"LSDataTraceTag\").messageTypeText;case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:return d(\"LSDataTraceTag\").messageTypeFutureproof;case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:return d(\"LSDataTraceTag\").messageTypeCiphertext;case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:return d(\"LSDataTraceTag\").messageTypeUnavailable;case d(\"MAWMsgType\").MSG_TYPE.IMAGE:return d(\"LSDataTraceTag\").messageTypeImage;case d(\"MAWMsgType\").MSG_TYPE.VIDEO:return d(\"LSDataTraceTag\").messageTypeVideo;case d(\"MAWMsgType\").MSG_TYPE.PTT:return d(\"LSDataTraceTag\").messageTypePtt;case d(\"MAWMsgType\").MSG_TYPE.ADMIN:return d(\"LSDataTraceTag\").messageTypeAdmin;case d(\"MAWMsgType\").MSG_TYPE.REVOKED:return d(\"LSDataTraceTag\").messageTypeRevoked;case d(\"MAWMsgType\").MSG_TYPE.GIF:return d(\"LSDataTraceTag\").messageTypeGif;case d(\"MAWMsgType\").MSG_TYPE.STICKER:return d(\"LSDataTraceTag\").messageTypeSticker;case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:return d(\"LSDataTraceTag\").messageTypeExpiredEphemeral;case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d(\"LSDataTraceTag\").messageTypeEphemeralSettingAdmin;case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d(\"LSDataTraceTag\").messageTypeEphemeralSyncResponse;case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d(\"LSDataTraceTag\").messageTypeEphemeralScreenshotAction;case d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME:return d(\"LSDataTraceTag\").messageTypeDeleteForMe;case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:return d(\"LSDataTraceTag\").messageTypeEphemeralSettingChangeFromCurrentDevice;case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:return d(\"LSDataTraceTag\").messageTypeAlertICDC;case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:return d(\"LSDataTraceTag\").messageTypeGroupInvite;case d(\"MAWMsgType\").MSG_TYPE.XMA:return d(\"LSDataTraceTag\").messageTypeXMA;case d(\"MAWMsgType\").MSG_TYPE.REACTION:return d(\"LSDataTraceTag\").messageTypeReaction;case d(\"MAWMsgType\").MSG_TYPE.SK_DISTRIBUTION:return d(\"LSDataTraceTag\").messageTypeSenderKeyDistribution;default:return d(\"LSDataTraceTag\").messageTypeNone}}g.CONTEXT_BACKUP_UPLOAD=i;g.CONTEXT_MEDIA_BACKUP=j;g.CONTEXT_VESTA_REGISTRATION=k;g.CONTEXT_VESTA_LOGIN=l;g.createTraceId=m;g.startNewTrace=a;g.recordCheckpointForTrace=n;g.recordFailureAndFlushForTraceId=b;g.recordSuccessAndFlushForTraceId=e;g.recordInvalidUploadRequestAndFlushTrace=f;g.getTagForMsgType=o}),98);\n__d(\"MAWReceiveToUploadUtils\",[\"I64\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;b=c(\"justknobx\")._(\"1693\");e=100;var i=(h||(h=d(\"I64\"))).of_int32(e*100),j=h.of_int32(e*b),k=new RegExp(\/^[1-9]{1}[0-9]*$\/);function a(a){if(!k.test(a))return!1;try{a=(h||(h=d(\"I64\"))).of_string(a);return h.compare(h.mod_(a,i),j)<0}catch(a){return!1}}g.checkUploadEligbility=a}),98);\n__d(\"MAWBridgeTraceEvent\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\").Mirrored([\"ReceivedReceipt\",\"ReceivedSent\",\"FlowEndForFailure\",\"FlowEndForSuccess\"]);c=a;f[\"default\"]=c}),66);\n__d(\"MAWSharedAsBackupMessage\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b,c,d,e){d={frankingTag:d==null?void 0:d.frankingTag,reportingTag:d==null?void 0:d.reportingTag};d={frankingMetadata:d,messageId:b,senderId:a,timestampMs:c};return{metadata:d,payload:e}}f.asBackupMessage=a}),66);\n__d(\"MAWSharedMsgIdUtil\",[\"FBLogger\",\"WAJids\",\"WAStanzaUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return JSON.stringify([a.author,a.chat,a.externalId])}function b(a){a=JSON.parse(a);if(!Array.isArray(a))throw c(\"FBLogger\")(\"labyrinth_web\").mustfixThrow(\"Unable to parse msg id string as proper json\");if(a.length!==3)throw c(\"FBLogger\")(\"labyrinth_web\").mustfixThrow(\"Parsed array should have 3 components\");var b=d(\"WAJids\").unsafeCoerceToUserJid(a[0]),e=d(\"WAJids\").unsafeCoerceToChatJid(a[1]);a=d(\"WAStanzaUtils\").toStanzaId(a[2]);return{author:b,chat:e,externalId:a}}g.convertWAMsgIdToStringId=a;g.convertStringIdToWAMsgId=b}),98);\n__d(\"WAArmadilloBackupMessage.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.internalSpec={metadata:[1,(e=d(\"WAProtoConst\")).TYPES.MESSAGE,b],payload:[2,e.TYPES.BYTES]};b.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32]};c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]};g.BackupMessageSpec=a;g.BackupMessage$MetadataSpec=b;g.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);\n__d(\"WABinary\",[\"WAErr\",\"WAHex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=65533,i=10,j=new Uint8Array(i),k=new Uint8Array(0);a=function(){function a(b,c){var d=this;b===void 0&&(b=k);c===void 0&&(c=!1);this.$1=new Uint8Array(0);this.$2=0;this.$4=0;this.write=function(){for(var b=0;b<arguments.length;b++){var c=b<0||arguments.length<=b?void 0:arguments[b];typeof c===\"string\"?d.writeString(c):typeof c===\"number\"?d.writeUint8(c):c instanceof a?d.writeBinary(c):c instanceof ArrayBuffer?d.writeBuffer(c):c instanceof Uint8Array&&d.writeByteArray(c)}};b instanceof ArrayBuffer?(this.$1=new Uint8Array(b),this.$2=this.$4=b.byteLength):b instanceof Uint8Array&&(this.$1=b,this.$2=this.$4=b.length);this.$5=0;this.$6=this.$3=0;this.$7=null;this.$8=c;this.$9=0;this.$10=0}var b=a.prototype;b.size=function(){return this.$2-this.$3};b.peek=function(a,b){this.$9++;var c=this.$3,d=this.$5;try{return a(this,b)}finally{this.$9--,this.$3=c-(this.$5-d)}};b.advance=function(a){this.$11(a)};b.readWithViewParser=function(a,b,c,d){return b(this.$12(),this.$11(a),a,c,d)};b.readWithBytesParser=function(a,b,c,d){return b(this.$1,this.$11(a),a,c,d)};b.readUint8=function(){return p(this,1,r,!1)};b.readInt8=function(){return p(this,1,r,!0)};b.readUint16=function(a){a===void 0&&(a=this.$8);return p(this,2,s,a)};b.readInt32=function(a){a===void 0&&(a=this.$8);return p(this,4,t,a)};b.readUint32=function(a){a===void 0&&(a=this.$8);return p(this,4,u,a)};b.readInt64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,U,a)};b.readUint64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,V,a)};b.readLong=function(a,b){b===void 0&&(b=this.$8);return p(this,8,v,a,b)};b.readFloat32=function(a){a===void 0&&(a=this.$8);return p(this,4,w,a)};b.readFloat64=function(a){a===void 0&&(a=this.$8);return p(this,8,x,a)};b.readVarInt=function(a){var b=this.size();b=q(this,0,y,b);return q(this,b,z,a)};b.readBuffer=function(a){a===void 0&&(a=this.size());return a===0?new ArrayBuffer(0):q(this,a,A)};b.readByteArray=function(a){a===void 0&&(a=this.size());return a===0?new Uint8Array(0):q(this,a,B)};b.readBinary=function(b,c){b===void 0&&(b=this.size());c===void 0&&(c=this.$8);if(b===0)return new a(void 0,c);b=q(this,b,B);return new a(b,c)};b.indexOf=function(a){if(a.length===0)return 0;var b=this.$1,c=this.$2,d=this.$3,e=0,f=d;for(var g=d;g<c;g++)if(b[g]===a[e]){e===0&&(f=g);e++;if(e===a.byteLength)return g-d-a.byteLength+1}else e>0&&(e=0,g=f);return-1};b.readString=function(a){return q(this,a,C)};b.ensureCapacity=function(a){this.$13(this.$3+a)};b.ensureAdditionalCapacity=function(a){this.$13(this.$4+a)};b.writeToView=function(a,b,c,d){var e=this.$14(a);return b(this.$12(),e,a,c,d)};b.writeToBytes=function(a,b,c,d){var e=this.$14(a);return b(this.$1,e,a,c,d)};b.writeUint8=function(a){S(a,0,256,\"uint8\"),E(this,1,F,a,!1)};b.writeInt8=function(a){S(a,-128,128,\"signed int8\"),E(this,1,F,a,!0)};b.writeUint16=function(a,b){b===void 0&&(b=this.$8),S(a,0,65536,\"uint16\"),D(this,2,G,a,b)};b.writeInt16=function(a,b){b===void 0&&(b=this.$8),S(a,-32768,32768,\"signed int16\"),D(this,2,H,a,b)};b.writeUint32=function(a,b){b===void 0&&(b=this.$8),S(a,0,4294967296,\"uint32\"),D(this,4,I,a,b)};b.writeInt32=function(a,b){b===void 0&&(b=this.$8),S(a,-2147483648,2147483648,\"signed int32\"),D(this,4,J,a,b)};b.writeUint64=function(a,b){b===void 0&&(b=this.$8),S(a,0,18446744073709552e3,\"uint64\"),D(this,8,K,a,b)};b.writeInt64=function(a,b){b===void 0&&(b=this.$8),S(a,-9223372036854776e3,9223372036854776e3,\"signed int64\"),D(this,8,K,a,b)};b.writeFloat32=function(a,b){b===void 0&&(b=this.$8),D(this,4,L,a,b)};b.writeFloat64=function(a,b){b===void 0&&(b=this.$8),D(this,8,M,a,b)};b.writeVarInt=function(a){S(a,-9223372036854776e3,9223372036854776e3,\"varint (signed int64)\");var b=a<0;a=b?-a:a;var c=Math.floor(a\/4294967296);a=a-c*4294967296;b&&(c=~c,a===0?c++:a=-a);b=R(c,a);E(this,b,N,c,a)};b.writeVarIntFromHexLong=function(a){var b=d(\"WAHex\").hexLongIsNegative(a);a=b?d(\"WAHex\").negateHexLong(a):a;a=d(\"WAHex\").hexLongToHex(a);var c=0,e=0;for(var f=0;f<d(\"WAHex\").NUM_HEX_IN_LONG;f++)c=c<<4|e>>>28,e=e<<4|d(\"WAHex\").hexAt(a,f);b&&(c=~c,e===0?c++:e=-e);a=R(c,e);E(this,a,N,c,e)};b.writeBinary=function(a){a=a.peek(function(a){return a.readByteArray()});if(a.length){var b=this.$14(a.length);this.$1.set(a,b)}};b.writeBuffer=function(a){this.writeByteArray(new Uint8Array(a))};b.writeByteArray=function(a){var b=this.$14(a.length);this.$1.set(a,b)};b.writeBufferView=function(a){this.writeByteArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))};b.writeString=function(a){E(this,n(a),O,a)};b.writeHexLong=function(a,b){b===void 0&&(b=this.$8),D(this,8,P,a,b)};b.writeBytes=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++)S(b[d],0,256,\"byte\");E(this,b.length,Q,b)};b.writeAtomically=function(a,b){this.$10++;var c=this.$4,d=this.$5;try{a=a(this,b);c=this.$4;d=this.$5;return a}finally{this.$10--,this.$4=c-(this.$5-d)}};b.writeWithVarIntLength=function(a,b){var c=this.$4;a=this.writeAtomically(a,b);b=this.$4;this.writeVarInt(b-c);var d=this.$4-b,e=this.$1;for(var f=0;f<d;f++)j[f]=e[b+f];for(f=b-1;f>=c;f--)e[f+d]=e[f];for(b=0;b<d;b++)e[c+b]=j[b];return a};a.build=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=0;for(var f=0;f<c.length;f++){var g=c[f];typeof g===\"string\"?e+=n(g):typeof g===\"number\"?e++:g instanceof a?e+=g.size():g instanceof ArrayBuffer?e+=g.byteLength:g instanceof Uint8Array&&(e+=g.length)}var h=new a();h.ensureCapacity(e);h.write.apply(h,arguments);return h};b.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))};b.$11=function(a){if(a<0)throw c(\"WAErr\")(\"ReadError: given negative number of bytes to read\");var b=this.$3;a=b+a;if(a>this.$2)throw c(\"WAErr\")(b===this.$2?\"ReadError: tried to read from depleted binary\":\"ReadError: tried to read beyond end of binary\");this.$3=a;this.$9||(this.$6=a);return b};b.$13=function(a){var b=this.$1;if(a<=b.length)return a;else{var c=this.$6;a=a-c;var d=Math.max(a,2*(b.length-c),64);d=new Uint8Array(d);c?(d.set(b.subarray(c)),this.$5+=c,this.$3-=c,this.$2-=c,this.$4-=c,this.$6=0):d.set(b);this.$1=d;this.$7=null;return a}};b.$14=function(a){a=this.$13(this.$4+a);var b=this.$4;this.$4=a;this.$10||(this.$2=a);return b};return a}();var l=\"\",m=0;function n(a){if(a===l)return m;var b=a.length,c=0;for(var d=0;d<b;d++){var e=a.charCodeAt(d);if(e<128)c++;else if(e<2048)c+=2;else if(e<55296||57344<=e&&e<=65535)c+=3;else if(55296<=e&&e<56320&&d+1!==b){e=a.charCodeAt(d+1);56320<=e&&e<57344?(d++,c+=4):c+=3}else c+=3}l=a;return m=c}function o(a,b,c){var d=b>>21;if(!a)return d===0;else{a=b&2097151;b=Boolean(a||c);return d===0||d===-1&&b}}function p(a,b,c,d,e){return a.readWithViewParser(b,c,d,e)}function q(a,b,c,d,e){return a.readWithBytesParser(b,c,d,e)}function r(a,b,c,d){return d?a.getInt8(b):a.getUint8(b)}function s(a,b,c,d){return a.getUint16(b,d)}function t(a,b,c,d){return a.getInt32(b,d)}function u(a,b,c,d){return a.getUint32(b,d)}function v(a,b,c,d,e){c=a.getInt32(e?b+4:b,e);a=a.getInt32(e?b:b+4,e);return d(c,a)}function w(a,b,c,d){return a.getFloat32(b,d)}function x(a,b,c,d){return a.getFloat64(b,d)}function y(a,b,d,e){d=Math.min(e,i);e=0;var f=128;while(e<d&&f&128)f=a[b+e++];if(e===i&&f>1)throw c(\"WAErr\")(\"ParseError: varint exceeds 64 bits\");else if(f&128)return e+1;return e}function z(b,c,d,a){var e=0,f=0,g=d;d===i&&(g--,f=b[c+g]&1);for(d=g-1;d>=0;d--)e=e<<7|f>>>25,f=f<<7|b[c+d]&127;return a(e,f)}function A(a,b,c){b=b+a.byteOffset;a=a.buffer;return b===0&&c===a.byteLength?a:a.slice(b,b+c)}function B(a,b,c){return a.subarray(b,b+c)}function C(a,b,c){c=b+c;var d=[],e=null;for(b=b;b<c;b++){d.length>5e3&&(e||(e=[]),e.push(String.fromCharCode.apply(String,d)),d=[]);var f=a[b]|0;if((f&128)===0)d.push(f);else if((f&224)===192){var g=W(a,b+1,c);if(g){b++;g=(f&31)<<6|g&63;g>=128?d.push(g):d.push(h)}else d.push(h)}else if((f&240)===224){g=W(a,b+1,c);var i=W(a,b+2,c);if(g&&i){b+=2;i=(f&15)<<12|(g&63)<<6|i&63;i>=2048&&!(55296<=i&&i<57344)?d.push(i):d.push(h)}else g?(b++,d.push(h)):d.push(h)}else if((f&248)===240){i=W(a,b+1,c);g=W(a,b+2,c);var j=W(a,b+3,c);if(i&&g&&j){b+=3;f=(f&7)<<18|(i&63)<<12|(g&63)<<6|j&63;if(f>=65536&&f<=1114111){j=f-65536;d.push(55296|j>>10,56320|j&1023)}else d.push(h)}else i&&g?(b+=2,d.push(h)):i?(b++,d.push(h)):d.push(h)}else d.push(h)}f=String.fromCharCode.apply(String,d);if(e){e.push(f);return e.join(\"\")}else return f}function D(a,b,c,d,e){return a.writeToView(b,c,d,e)}function E(a,b,c,d,e){return a.writeToBytes(b,c,d,e)}function F(a,b,c,d){a[b]=d}function G(a,b,c,d,e){a.setUint16(b,d,e)}function H(a,b,c,d,e){a.setInt16(b,d,e)}function I(a,b,c,d,e){a.setUint32(b,d,e)}function J(a,b,c,d,e){a.setInt32(b,d,e)}function K(a,b,c,d,e){c=d<0;d=c?-d:d;var f=Math.floor(d\/4294967296);d=d-f*4294967296;c&&(f=~f,d===0?f++:d=-d);a.setUint32(e?b+4:b,f,e);a.setUint32(e?b:b+4,d,e)}function L(a,b,c,d,e){a.setFloat32(b,d,e)}function M(a,b,c,d,e){a.setFloat64(b,d,e)}function N(a,b,c,d,e){d=d;e=e;c=b+c-1;for(b=b;b<c;b++)a[b]=128|e&127,e=d<<25|e>>>7,d>>>=7;a[c]=e}function O(a,b,c,d){c=b;b=d.length;for(var e=0;e<b;e++){var f=d.charCodeAt(e);if(f<128)a[c++]=f;else if(f<2048)a[c++]=192|f>>6,a[c++]=128|f&63;else if(f<55296||57344<=f)a[c++]=224|f>>12,a[c++]=128|f>>6&63,a[c++]=128|f&63;else if(55296<=f&&f<56320&&e+1!==b){var g=d.charCodeAt(e+1);if(56320<=g&&g<57344){e++;f=65536+((f&1023)<<10|g&1023);a[c++]=240|f>>18;a[c++]=128|f>>12&63;a[c++]=128|f>>6&63;a[c++]=128|f&63}else a[c++]=239,a[c++]=191,a[c++]=189}else a[c++]=239,a[c++]=191,a[c++]=189}}function P(a,b,c,e,f){c=d(\"WAHex\").hexLongIsNegative(e);e=d(\"WAHex\").hexLongToHex(e);var g=0,h=0;for(var i=0;i<16;i++)g=g<<4|h>>>28,h=h<<4|d(\"WAHex\").hexAt(e,i);c&&(g=~g,h===0?g++:h=-h);a.setUint32(f?b+4:b,g,f);a.setUint32(f?b:b+4,h,f)}function Q(a,b,c,d){for(var e=0;e<c;e++)a[b+e]=d[e]}function R(a,b){var c;a?(c=5,a=a>>>3):(c=1,a=b>>>7);while(a)c++,a>>>=7;return c}function S(a,b,d,e){if(typeof a!==\"number\"||a!==a||Math.floor(a)!==a||a<b||a>=d)throw c(\"WAErr\")(typeof a===\"string\"?'TyperError WriteError: string \"'+a+'\" is not a valid '+e:\"TypeError WriteError: \"+String(a)+\" is not a valid \"+e)}function T(a,b,d){var e=o(a,b,d),f;b>=0?f=b:f=a?b:4294967296+b;a=d>=0?d:4294967296+d;b=f*4294967296+a;if(!e)throw c(\"WAErr\")(\"ReadError: integer exceeded 53 bits (\"+b+\")\");return b}function U(a,b){return T(!0,a,b)}function V(a,b){return T(!1,a,b)}function W(a,b,c){if(b>=c)return 0;c=a[b]|0;return(c&192)===128?c:0}g.Binary=a;g.numUtf8Bytes=n;g.longFitsInDouble=o;g.parseInt64OrThrow=U;g.parseUint64OrThrow=V}),98);\n__d(\"WAProtoCompile\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error(\"Message Class \"+String(a)+\" does not have internalSpec\");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d(\"WAProtoConst\").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d(\"WAProtoConst\").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];n=o[1];var p=o[0];g.push(p);j.push(n);if((n&d(\"WAProtoConst\").TYPE_MASK)===d(\"WAProtoConst\").TYPES.MESSAGE)f[m]=o[2];else if((n&d(\"WAProtoConst\").TYPE_MASK)===d(\"WAProtoConst\").TYPES.ENUM){p=o[2];if(typeof p.cast===\"function\")f[m]=p;else{n=!0;o=0;for(var q in p)n&&q!==o++&&(n=!1);q=void 0;if(n){q=[];for(n=0;n<o;n++)q.push(!0)}else{q={};for(n in p)q[p[n]]=!0}f[m]=q}}else f[m]=null}var r={};o=function(a){l[a].forEach(function(b){r[b]||(r[b]=[]),r[b].push(a)})};for(n in l)o(n);p=b[d(\"WAProtoConst\").KEYS.RESERVED]&&b[d(\"WAProtoConst\").KEYS.RESERVED][d(\"WAProtoConst\").KEYS.RESERVED_TAGS];q=b[d(\"WAProtoConst\").KEYS.RESERVED]&&b[d(\"WAProtoConst\").KEYS.RESERVED][d(\"WAProtoConst\").KEYS.RESERVED_FIELDS];m=new h(e,g,j,k,f,l,r,p,q);a.internalCompiledSpec=m;return m}function i(a,b){a=a[b];if(a==null)throw new Error(\"fieldData of \"+b+\" is missing\");return a}g.Spec=h;g.compileSpec=a}),98);\n__d(\"WAProtoUtils\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){if(a&d(\"WAProtoConst\").FLAGS.PACKED)return d(\"WAProtoConst\").ENC.BINARY;a=a&d(\"WAProtoConst\").TYPE_MASK;if(a<=d(\"WAProtoConst\").TYPES.ENUM)return d(\"WAProtoConst\").ENC.VARINT;else if(a<=d(\"WAProtoConst\").TYPES.DOUBLE)return d(\"WAProtoConst\").ENC.BIT64;else if(a<=d(\"WAProtoConst\").TYPES.MESSAGE)return d(\"WAProtoConst\").ENC.BINARY;else return d(\"WAProtoConst\").ENC.BIT32}g.typeToEncType=a}),98);\n__d(\"WAHasProperty\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f[\"default\"]=a}),66);\n__d(\"WAProtoValidate\",[\"WAHasProperty\",\"WALogger\",\"WAProtoCompile\",\"WAProtoConst\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is not an array']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is not ',\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is out of range']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is not a valid int']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['\"','\" is not a valid long']);l=function(){return a};return a}var m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError(\"Message missing required value \"+a.join(\".\"))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError(\"Invalid value at \"+b.path.join(\".\")+\": \"+b.error)}}function o(a,b){a=d(\"WAProtoCompile\").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c(\"WAHasProperty\")(b,j)?b[j]:void 0;if(i&d(\"WAProtoConst\").FLAGS.REQUIRED&&k==null)g=[j];else if((i&d(\"WAProtoConst\").TYPE_MASK)===d(\"WAProtoConst\").TYPES.MESSAGE&&i&d(\"WAProtoConst\").FLAGS.REPEATED&&k!=null){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+\"[\"+m+\"]\")}else(i&d(\"WAProtoConst\").TYPE_MASK)===d(\"WAProtoConst\").TYPES.MESSAGE&&k!=null&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a===\"string\")if(\/^-?0x[0-9a-f]{16}$\/i.test(a))return!1;else{d(\"WALogger\").LOG(l(),s(a)).color(\"red\");return{path:[],error:\"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long\"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!==\"number\"||a!==a||Math.floor(a)!==a){d(\"WALogger\").LOG(k(),s(a)).color(\"red\");return{path:[],error:\"value must be an int\"}}else if(a<b||a>=c){d(\"WALogger\").LOG(j(),s(a)).color(\"red\");return{path:[],error:\"value is out of range\"}}else return!1}function r(a,b,c){if(a)return void 0;else{d(\"WALogger\").LOG(i(),s(c),b).color(\"red\");return{path:[],error:\"value is invalid\"}}}function s(a){if(typeof a===\"string\")return'\"'+a+'\"';else if(Array.isArray(a))return\"[\"+a.join(\", \")+\"]\";else return\"\"+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a===\"boolean\",\"boolean\",a)},function(a,b){return r(typeof a===\"number\"&&(b[a]||b.cast(a)!==void 0),\"in enum\",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a===\"number\",\"number\",a)},function(a){return r(typeof a===\"string\",\"string\",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,\"ArrayBuffer or Uint8Array\",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a===\"number\",\"number\",a)}];function u(a,b){b=d(\"WAProtoCompile\").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,i=b.oneofToFields,j=b.fieldToOneof,k=b.reservedTags,l=b.reservedFields,m=void 0;b=function(b){var n=c[b],o=f[b],p=a[n],q=o&d(\"WAProtoConst\").TYPE_MASK,r=t[q];if(r===void 0)throw new Error(\"Can not find the validator for type \"+q);if(o&(d(\"WAProtoConst\").FLAGS.PACKED|d(\"WAProtoConst\").FLAGS.REPEATED)&&p!=null)if(!Array.isArray(p))d(\"WALogger\").LOG(h(),s(p)).color(\"red\"),m={path:[n],error:\"repeated field must be array\"};else{q=g[b];for(o=0;o<p.length&&!m;o++)m=r(p[o],q),m&&m.path.push(n+\"[\"+o+\"]\")}else if(p!=null){m=r(p,g[b]);m&&m.path.push(n);o=j[n];o&&o.forEach(function(b){var c=i[b].filter(function(a){return a!==n});c.forEach(function(c){typeof a[c]!==\"undefined\"&&(m={path:[b],error:\"oneof '\"+b+\"' has fields '\"+n+\"' and '\"+c+\"' set\"})})});k[e[b]]&&(m={path:[n],error:\"tag \"+e[b]+\" is reserved\"});l[n]&&(m={path:[n],error:\"field \"+n+\" is reserved\"})}};for(var n=0;n<c.length&&!m;n++)b(n);return m}g.checkRequirements=n;g.checkValid=a}),98);\n__d(\"encodeProtobuf\",[\"WABinary\",\"WAHex\",\"WAProtoCompile\",\"WAProtoConst\",\"WAProtoUtils\",\"WAProtoValidate\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d(\"WABinary\").Binary)());d(\"WAProtoValidate\").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?\"Last encoded value for \"+h:\"No information known\"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b===\"number\"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d(\"WABinary\").Binary)(),e;typeof b===\"number\"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d(\"WAHex\").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d(\"WAHex\").negateHexLong(b):b));b=c.peek(function(){return c.readByteArray()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b===\"number\"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d(\"WABinary\").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength(function(a,b){return o(a,b,c)},b)}var m=[void 0,c,f,c,f,e,e,function(a,b){a.writeVarInt(b?1:0)},c,function(a,b){typeof b===\"number\"?a.writeUint64(b,!0):a.writeHexLong(b,!0)},function(a,b){typeof b===\"number\"?a.writeInt64(b,!0):a.writeHexLong(b,!0)},function(a,b){a.writeFloat64(b,!0)},j,k,l,function(a,b){a.writeUint32(b,!0)},function(a,b){a.writeInt32(b,!0)},function(a,b){a.writeFloat32(b,!0)}];f=function(a){if(a==null)return void 0;var b=a;function c(a,c){for(var d=0;d<c.length;d++)b(a,c[d])}return function(a,b){a.writeWithVarIntLength(c,b)}};var n=m.map(f);function o(a,b,c){var e=d(\"WAProtoCompile\").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l==null&&c&&(l=c[k]);if(l!=null){h=k;k=g[j];var o=i[j],p=o&d(\"WAProtoConst\").TYPE_MASK,q=e[j];k=k*8|d(\"WAProtoUtils\").typeToEncType(o);if(o&d(\"WAProtoConst\").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d(\"WAProtoConst\").FLAGS.REPEATED)for(r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else{a.writeVarInt(k);o=m[p];o(a,l,q)}}}}g.encodeProtobuf=a;g.encodeErrorInfo=b}),98);\n__d(\"MAWSharedEbUploadEntity\",[\"$InternalEnum\",\"MAWSharedAsBackupMessage\",\"MAWSharedMsgIdUtil\",\"WAArmadilloBackupMessage.pb\",\"WAGlobals\",\"WAJids\",\"WATimeUtils\",\"encodeProtobuf\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=b(\"$InternalEnum\").Mirrored([\"NEEDS_BACKUP\",\"COMPLETED\",\"NEEDS_BACKUP_RETRY\",\"PERMANENT_FAILURE\",\"EXPIRED\",\"THREAD_DELETED\",\"DELETION_PURGED\",\"MESSAGE_DELETED\",\"UPLOADING\"]);function a(a){var b=a.backupDirective,c=a.messageApplication,e=a.msgId,f=a.reportingMeta;a=a.serverTs;e=d(\"WAJids\").authorToUserId(e.author,d(\"WAJids\").extractUserId(d(\"WAGlobals\").getMyUserJid()));return d(\"encodeProtobuf\").encodeProtobuf(d(\"WAArmadilloBackupMessage.pb\").BackupMessageSpec,d(\"MAWSharedAsBackupMessage\").asBackupMessage(e,b.originalMsgProtocolId.externalId,a,(e=f)!=null?e:{frankingKey:null,frankingTag:null,frankingVersion:null,reportingContent:null,reportingTag:null},c)).readByteArray()}function c(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function e(a){var b=a.backupDirective,c=a.msgId,e=a.originalMsgProtocolId,f=a.protobuf,g=a.senderId;a=a.serverTs;return{backupActionType:b.actionType,failAcks:0,failTsMs:d(\"WATimeUtils\").castToMillisTime(0),msgId:c,msgIdKey:d(\"MAWSharedMsgIdUtil\").convertWAMsgIdToStringId(c),originalMsgProtocolId:e,protobuf:f,senderId:g,serverTs:a,supplementalKey:b.supplementalKey,uploadStatus:h.NEEDS_BACKUP,uploadTsSec:d(\"WATimeUtils\").unixTime()}}g.EbUploadStatus=h;g.encodeBackupMessage=a;g.getEbBackupMessabeBytesBuffer=c;g.asEBUploadEntity=e}),98);\n__d(\"LSMEBTaskCreationSource\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42});f[\"default\"]=a}),66);\/*FB_PKG_DELIM*\/\n__d(\"MAWHexUtils\",[\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){a=a.toString(16);return(a.length-1).toString(16)+a}function b(a){for(var b=1;b<a.length;b++){var d=a.substring(0,b),e=a.substring(b);if(e.length-1===parseInt(d,16))return parseInt(e,16)}throw c(\"err\")(\"Cannot convert the order-preserving-hex back to number\")}g.orderPreservingHex=a;g.reverseOrderPreservingHex=b}),98);\n__d(\"WAMsgType\",[],(function(a,b,c,d,e,f){\"use strict\";a=\"Text\";b=\"Futureproof\";c=\"Ciphertext\";d=\"Unavailable\";e=\"Image\";var g=\"Video\",h=\"Ptt\",i=\"Admin\",j=\"Revoked\",k=\"Gif\",l=\"Sticker\",m=\"DocumentFile\",n=\"ExpiredEphemeral\",o=\"EphemeralSettingAdmin\",p=\"EphemeralSyncResponse\",q=\"DeleteForMe\",r=\"EphemeralSettingChangeFromCurrentDevice\",s=\"AlertICDC\",t=\"GroupInvite\",u=\"NoteReply\",v=\"Reaction\",w=\"SenderKeyDistribution\",x=\"EditAction\",y={ADMIN:i,CIPHERTEXT:c,DELETE_FOR_ME:q,DOCUMENT_FILE:m,EDIT_ACTION:x,EPHEMERAL_SETTING_ADMIN:o,EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:r,EPHEMERAL_SYNC_RESPONSE:p,EXPIRED_EPHEMERAL:n,FUTUREPROOF:b,GIF:k,GROUP_INVITE:t,ICDC_ALERT:s,IMAGE:e,PTT:h,REACTION:v,REVOKED:j,SK_DISTRIBUTION:w,STICKER:l,TEXT:a,UNAVAILABLE:d,VIDEO:g};f.TEXT=a;f.FUTUREPROOF=b;f.CIPHERTEXT=c;f.UNAVAILABLE=d;f.IMAGE=e;f.VIDEO=g;f.PTT=h;f.ADMIN=i;f.REVOKED=j;f.GIF=k;f.STICKER=l;f.DOCUMENT_FILE=m;f.EXPIRED_EPHEMERAL=n;f.EPHEMERAL_SETTING_ADMIN=o;f.EPHEMERAL_SYNC_RESPONSE=p;f.DELETE_FOR_ME=q;f.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE=r;f.ICDC_ALERT=s;f.GROUP_INVITE=t;f.NOTE_REPLY=u;f.REACTION=v;f.SK_DISTRIBUTION=w;f.EDIT_ACTION=x;f.MSG_TYPE=y}),66);\n__d(\"MAWMsgType\",[\"WAMsgType\"],(function(a,b,c,d,e,f,g){\"use strict\";a=function(a){return j.has(a)};b=function(a){return k.has(a)||j.has(a)};c=\"EphemeralScreenshotAction\";e=\"Raven\";f=\"RavenAction\";var h=\"XMA\",i=\"BumpExistingMessage\";d=babelHelpers[\"extends\"]({},d(\"WAMsgType\").MSG_TYPE,{BUMP_EXISTING_MESSAGE:i,EPHEMERAL_SCREENSHOT_ACTION:c,RAVEN:e,RAVEN_ACTION:f,XMA:h});var j=new Set([d.IMAGE,d.VIDEO,d.PTT,d.GIF,d.STICKER,d.XMA,d.RAVEN,d.DOCUMENT_FILE]),k=new Set([d.TEXT,d.REVOKED,d.XMA]),l=new Set([d.TEXT,d.IMAGE,d.VIDEO,d.PTT,d.GIF,d.STICKER,d.DOCUMENT_FILE,d.UNAVAILABLE,d.EXPIRED_EPHEMERAL,d.REVOKED,d.XMA]);i=function(a){return l.has(a)};g.isMAWSupportedMediaType=a;g.isEBSupportedMsgType=b;g.EPHEMERAL_SCREENSHOT_ACTION=c;g.MSG_TYPE=d;g.mawSupportedMediaTypes=j;g.isQuotedMsgType=i}),98);\n__d(\"WAMsg\",[\"WAAssertUnreachable\",\"WAErr\",\"WAJids\",\"WAMsgType\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=a.chat,c=a.author;a=a.externalId;return b+\"_\"+a+\"_\"+c}function h(a){switch(a.type){case d(\"WAMsgType\").MSG_TYPE.TEXT:case d(\"WAMsgType\").MSG_TYPE.IMAGE:case d(\"WAMsgType\").MSG_TYPE.VIDEO:case d(\"WAMsgType\").MSG_TYPE.PTT:case d(\"WAMsgType\").MSG_TYPE.GIF:case d(\"WAMsgType\").MSG_TYPE.STICKER:return{externalId:a.id.externalId,author:a.id.author,ts:a.ts,sentTs:a.sentTs,serverTs:a.serverTs,expirationTs:a.expirationTs,deleteTs:a.deleteTs,ephemeralSetting:a.ephemeralSetting};case d(\"WAMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"WAMsgType\").MSG_TYPE.UNAVAILABLE:return{externalId:a.id.externalId,author:a.id.author,ts:a.ts,sentTs:a.sentTs};default:a.type;return null}}function b(a){var b=h(a);if(b==null)return null;switch(a.type){case d(\"WAMsgType\").MSG_TYPE.TEXT:return babelHelpers[\"extends\"]({},b,{type:d(\"WAMsgType\").MSG_TYPE.TEXT,msgContent:a.msgContent});case d(\"WAMsgType\").MSG_TYPE.IMAGE:return babelHelpers[\"extends\"]({},b,{type:d(\"WAMsgType\").MSG_TYPE.IMAGE,mediaId:a.mediaId});case d(\"WAMsgType\").MSG_TYPE.VIDEO:return babelHelpers[\"extends\"]({},b,{type:d(\"WAMsgType\").MSG_TYPE.VIDEO,mediaId:a.mediaId});case d(\"WAMsgType\").MSG_TYPE.PTT:return babelHelpers[\"extends\"]({},b,{type:d(\"WAMsgType\").MSG_TYPE.PTT,mediaId:a.mediaId});case d(\"WAMsgType\").MSG_TYPE.STICKER:return babelHelpers[\"extends\"]({},b,{type:d(\"WAMsgType\").MSG_TYPE.STICKER,mediaId:a.mediaId});case d(\"WAMsgType\").MSG_TYPE.GIF:return babelHelpers[\"extends\"]({},b,{type:d(\"WAMsgType\").MSG_TYPE.PTT,mediaId:a.mediaId});case d(\"WAMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers[\"extends\"]({},b,{type:d(\"WAMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL});case d(\"WAMsgType\").MSG_TYPE.UNAVAILABLE:return babelHelpers[\"extends\"]({},b,{type:d(\"WAMsgType\").MSG_TYPE.UNAVAILABLE});case d(\"WAMsgType\").MSG_TYPE.REVOKED:case d(\"WAMsgType\").MSG_TYPE.REACTION:case d(\"WAMsgType\").MSG_TYPE.ICDC_ALERT:case d(\"WAMsgType\").MSG_TYPE.ADMIN:case d(\"WAMsgType\").MSG_TYPE.FUTUREPROOF:case d(\"WAMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"WAMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d(\"WAMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d(\"WAMsgType\").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d(\"WAMsgType\").MSG_TYPE.GROUP_INVITE:case d(\"WAMsgType\").MSG_TYPE.DELETE_FOR_ME:case d(\"WAMsgType\").MSG_TYPE.DOCUMENT_FILE:case d(\"WAMsgType\").MSG_TYPE.EDIT_ACTION:return null;default:return c(\"WAAssertUnreachable\")(a.type)}}function e(a){if(d(\"WAJids\").isAuthorSystem(a.author))throw c(\"WAErr\")(\"Cannot send @system messages\");else return{author:a.author,chat:a.chat,externalId:a.externalId}}g.craftWAMsgIdString=a;g.asQuotedMsg=b;g.asProtocolMsgId=e}),98);\n__d(\"MAWDbMsg\",[\"FBLogger\",\"MAWDbChatId\",\"MAWHexUtils\",\"MAWMsgType\",\"WAMsg\",\"justknobx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;h=[(h=d(\"MAWMsgType\")).MSG_TYPE.REVOKED,h.MSG_TYPE.EPHEMERAL_SYNC_RESPONSE,h.MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE,h.MSG_TYPE.GROUP_INVITE,h.MSG_TYPE.SK_DISTRIBUTION,h.MSG_TYPE.RAVEN_ACTION];var i=0,j=Number.MAX_SAFE_INTEGER;function a(a){return u(a)?a:null}function b(a){return a}function e(a){return a}var k=\"futureproof\",l=\"futureproof_spam\",m=\"spam\",n=\"toBeRead\",o=\"e2ee_admin_msg\",p=\"cutover_admin_msg\";function q(a,b){return d(\"MAWHexUtils\").orderPreservingHex(a)+\"_\"+d(\"MAWHexUtils\").orderPreservingHex(b)+\"_m\"}function f(a,b,e){a=d(\"MAWHexUtils\").orderPreservingHex(a)+\"_\"+d(\"MAWHexUtils\").orderPreservingHex(b)+\"_m\";return!c(\"justknobx\")._(\"621\")?a:a+\"_\"+e.externalId}function r(a,b){return!c(\"justknobx\")._(\"1903\")?q(a,b):d(\"MAWHexUtils\").orderPreservingHex(a)+\"_\"+d(\"MAWHexUtils\").orderPreservingHex(b)+\"_um\"}function s(a,b){return!c(\"justknobx\")._(\"1903\")?q(a,b):d(\"MAWHexUtils\").orderPreservingHex(a)+\"_\"+d(\"MAWHexUtils\").orderPreservingHex(b)+\"_r\"}function t(a,b){return d(\"MAWHexUtils\").orderPreservingHex(a)+\"_\"+d(\"MAWHexUtils\").orderPreservingHex(b)+\"_DEBUG_\"+d(\"MAWHexUtils\").orderPreservingHex(Math.floor(Math.random()*1e4))}function u(a){a=a.split(\"_\");return a.length>=3&&a[0]!==\"\"&&a[1]!==\"\"&&a[2]===\"m\"}function v(a){return d(\"MAWDbChatId\").craftAltIndex(a,n)}function w(a){return d(\"MAWDbChatId\").craftAltIndex(a,o)}function x(a){return d(\"MAWDbChatId\").craftAltIndex(a,p)}function y(a){a=a.split(\"_\");a=a[0];return d(\"MAWDbChatId\").unsafeCoerceToChatId(d(\"MAWHexUtils\").reverseOrderPreservingHex(a))}function z(a){a=a.split(\"_\");a[0];a=a[1];return d(\"MAWHexUtils\").reverseOrderPreservingHex(a)}function A(a){return d(\"MAWHexUtils\").orderPreservingHex(a)+\"_\"}function B(a){return d(\"MAWHexUtils\").orderPreservingHex(a)+\"_z\"}function C(a){switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.XMA:return!0;case d(\"MAWMsgType\").MSG_TYPE.IMAGE:case d(\"MAWMsgType\").MSG_TYPE.VIDEO:case d(\"MAWMsgType\").MSG_TYPE.PTT:case d(\"MAWMsgType\").MSG_TYPE.GIF:case d(\"MAWMsgType\").MSG_TYPE.STICKER:case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:case d(\"MAWMsgType\").MSG_TYPE.TEXT:case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.REVOKED:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:case d(\"MAWMsgType\").MSG_TYPE.RAVEN:case d(\"MAWMsgType\").MSG_TYPE.BUMP_EXISTING_MESSAGE:return!1}throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow('Invalid msg type for isXMAMsg check: \"%s\"',a.type)}function D(a){switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.IMAGE:case d(\"MAWMsgType\").MSG_TYPE.VIDEO:case d(\"MAWMsgType\").MSG_TYPE.PTT:case d(\"MAWMsgType\").MSG_TYPE.GIF:case d(\"MAWMsgType\").MSG_TYPE.STICKER:case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:case d(\"MAWMsgType\").MSG_TYPE.RAVEN:return!0;case d(\"MAWMsgType\").MSG_TYPE.TEXT:case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.REVOKED:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:case d(\"MAWMsgType\").MSG_TYPE.XMA:case d(\"MAWMsgType\").MSG_TYPE.BUMP_EXISTING_MESSAGE:return!1}throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow('Invalid msg type for isMediaMsg check: \"%s\"',a.type)}function E(a){switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.TEXT:case d(\"MAWMsgType\").MSG_TYPE.IMAGE:case d(\"MAWMsgType\").MSG_TYPE.VIDEO:case d(\"MAWMsgType\").MSG_TYPE.PTT:case d(\"MAWMsgType\").MSG_TYPE.GIF:case d(\"MAWMsgType\").MSG_TYPE.STICKER:case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:case d(\"MAWMsgType\").MSG_TYPE.REVOKED:case d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME:case d(\"MAWMsgType\").MSG_TYPE.XMA:case d(\"MAWMsgType\").MSG_TYPE.RAVEN:case d(\"MAWMsgType\").MSG_TYPE.BUMP_EXISTING_MESSAGE:return!0;case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:case d(\"MAWMsgType\").MSG_TYPE.SK_DISTRIBUTION:case d(\"MAWMsgType\").MSG_TYPE.RAVEN_ACTION:case d(\"MAWMsgType\").MSG_TYPE.EDIT_ACTION:return!1}throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow('Invalid msg type for isContentMsg check: \"%s\"',a.type)}function F(a){switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.TEXT:case d(\"MAWMsgType\").MSG_TYPE.IMAGE:case d(\"MAWMsgType\").MSG_TYPE.VIDEO:case d(\"MAWMsgType\").MSG_TYPE.PTT:case d(\"MAWMsgType\").MSG_TYPE.GIF:case d(\"MAWMsgType\").MSG_TYPE.STICKER:case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:case d(\"MAWMsgType\").MSG_TYPE.XMA:case d(\"MAWMsgType\").MSG_TYPE.RAVEN:case d(\"MAWMsgType\").MSG_TYPE.BUMP_EXISTING_MESSAGE:return!0;case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:case d(\"MAWMsgType\").MSG_TYPE.REVOKED:case d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME:case d(\"MAWMsgType\").MSG_TYPE.SK_DISTRIBUTION:case d(\"MAWMsgType\").MSG_TYPE.EDIT_ACTION:return!1}throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow('Invalid msg type for isMsgEligibleForTriggeringEphemeralSyncResponse check: \"%s\"',a.type)}function G(a){return I(a.type)}function H(a){return a.type===d(\"MAWMsgType\").MSG_TYPE.ADMIN}function I(a){return a===\"EphemeralSyncResponse\"||a===\"EphemeralSettingChangeFromCurrentDevice\"||a===\"GroupInvite\"||a===\"SenderKeyDistribution\"||a===\"RavenAction\"||a===\"EditAction\"}function J(a){return a===\"RavenAction\"}function K(a){return a.originalTs!=null?a.originalTs:L(a)}function L(a){return a.serverTs!=null?a.serverTs:a.ts}function M(a){if(a.sortOrderMs!=null)return a.sortOrderMs;else return L(a)*1e3}function N(a,b){if(a.serverTs!=null)return Math.max(b+1,a.serverTs*1e3);else return b+1}function O(a){switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.TEXT:return a.msgContent;case d(\"MAWMsgType\").MSG_TYPE.EDIT_ACTION:return a.editMsgContent;case d(\"MAWMsgType\").MSG_TYPE.IMAGE:case d(\"MAWMsgType\").MSG_TYPE.VIDEO:case d(\"MAWMsgType\").MSG_TYPE.PTT:case d(\"MAWMsgType\").MSG_TYPE.GIF:case d(\"MAWMsgType\").MSG_TYPE.STICKER:case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:case d(\"MAWMsgType\").MSG_TYPE.REVOKED:case d(\"MAWMsgType\").MSG_TYPE.DELETE_FOR_ME:case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:case d(\"MAWMsgType\").MSG_TYPE.GROUP_INVITE:case d(\"MAWMsgType\").MSG_TYPE.XMA:case d(\"MAWMsgType\").MSG_TYPE.RAVEN:case d(\"MAWMsgType\").MSG_TYPE.BUMP_EXISTING_MESSAGE:return}throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow('Invalid msg type for getMsgContent check: \"%s\"',a.type)}function P(a){return d(\"WAMsg\").craftWAMsgIdString({author:a.author,chat:a.threadJid,externalId:a.externalId})}g.NO_CONTENT_MESSAGE_TYPES_ALLOWLIST=h;g.MIN_MSG_SORT_ORDER=i;g.MAX_MSG_SORT_ORDER=j;g.toMsgId=a;g.stanzaIdToMsgId=b;g.instamadilloMsgIdToMsgId=e;g.FUTUREPROOF_ALT_INDEX=k;g.FUTUREPROOF_SPAM_ALT_INDEX=l;g.SPAM_ALT_INDEX=m;g.craftMsgId=q;g.craftMsgIdV2=f;g.craftUnrenderedMsgId=r;g.craftReactionId=s;g.craftDebugMsgId=t;g.isValidMsgId=u;g.craftToBeReadAltIndex=v;g.craftE2eeAdminMsgAltIndex=w;g.craftCutoverAdminMsgAltIndex=x;g.getThreadIdFromMsgId=y;g.getInChatMsgIdFromMsgId=z;g.msgIdsInChatLowerBound=A;g.msgIdsInChatUpperBound=B;g.isXMAMsg=C;g.isMediaMsg=D;g.isContentMsg=E;g.isMsgEligibleForTriggeringEphemeralSyncResponse=F;g.isUnrenderedMsg=G;g.isAdminMsg=H;g.isUnrenderedMsgType=I;g.isRavenActionMsgType=J;g.getOriginalTsFromMsg=K;g.getCanonicalTsFromMsg=L;g.getSortOrderWithFallback=M;g.getSortOrderFromPrevious=N;g.getMsgContent=O;g.getWAMsgId=P}),98);\n__d(\"MAWODSProxy\",[\"CurrentMessengerUser\",\"MAWBridge\",\"ODS\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=!((b=c(\"gkx\")(\"23949\"))!=null?b:!1);function a(a,b){var c=a.amount,e=a.entity;a=a.key;b===void 0&&(b=!0);i?(h||(h=d(\"ODS\"))).bumpEntityKey(3185,e,a+\".\"+(d(\"CurrentMessengerUser\").getAppID()||\"unknown\"),c):d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"odsBumpEntityKey\",{amount:c,entity:e,key:a},b)}g.odsBumpEntityKey=a}),98);\n__d(\"WAArrayBufferUtils\",[\"Promise\",\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function d(a,c){c===void 0&&(c=5e5);return new(h||(h=b(\"Promise\")))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;setTimeout(i,0);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}setTimeout(i,16)}})}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var i=8388607;function f(a,b){a=new Uint8Array(a);if(b>i)throw c(\"WAErr\")(\"Divisor is too big\");var d=0;for(var e=0;e<a.length;++e)d=((d<<8)+a[e])%b;return d}function j(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function k(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return l(a,b)}function l(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}g.stringToArrayBuffer=a;g.largeStringToArrayBuffer=d;g.arrayBufferToString=e;g.arrayBufferMod=f;g.concatBuffers=j;g.arrayBuffersEqualUNSAFE=k;g.uint8ArraysEqualUNSAFE=l}),98);\n__d(\"MAWVaultMaterials\",[\"FBLogger\",\"WAArrayBufferUtils\",\"randomInt\",\"tweetnacl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null,i=null;function j(a){i=a}function k(){return h}function l(a){h=a}function a(){h=null,i=null}function m(){return o()!=null&&k()!=null}function n(){var a=1e9,b=9999999999;return c(\"randomInt\")(a,b)+\"##\"+c(\"randomInt\")(a,b)}function o(){return i}function p(){if(!m())throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Vault materials are null\");return{encryptionKey:h,prefixAndSuffix:i}}function b(a){var b=m();c(\"FBLogger\")(\"mpf_web_foundations\").debug(\"Setting vault materials -- vaultMaterials=%s, previouslySetup=%s\",Boolean(a).toString(),b);if(!b){q((b=a)!=null?b:{encryptionKey:d(\"tweetnacl\").randomBytes(32).buffer,prefixAndSuffix:n()})}return p()}function q(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(b==null||a==null)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Cannot set null values for encryption key and prefix\");l(b);j(a)}function e(){return r(p())}function r(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(a!=null&&b!=null){b=d(\"WAArrayBufferUtils\").arrayBufferToString(b);return JSON.stringify({encryptionKey:b,prefixAndSuffix:a})}else return\"\"}function f(a){if(a===\"\")return null;else{a=JSON.parse(a);if(a.encryptionKey==null||a.prefixAndSuffix==null)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Vault materials were not in correct format\");var b=d(\"WAArrayBufferUtils\").stringToArrayBuffer(a.encryptionKey);a=a.prefixAndSuffix;return{encryptionKey:b,prefixAndSuffix:a}}}g.TEST_ONLY_clearVaultMaterials=a;g.hasVaultBeenSetup=m;g.getVaultPrefixAndSuffix=o;g.getVaultMaterials=p;g.initializeVaultMaterials=b;g.materialsToString=e;g.fromMaterialsToString=r;g.fromStringToMaterials=f}),98);\n__d(\"MAWVault\",[\"FBLogger\",\"MAWKeychainNaClCrypto\",\"MAWVaultMaterials\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=c(\"gkx\")(\"23967\")?new Map():null,i=c(\"gkx\")(\"23967\")?new Map():null;function j(a){if(!c(\"gkx\")(\"23909\"))return!1;var b=d(\"MAWVaultMaterials\").getVaultPrefixAndSuffix();b=b==null?!1:new RegExp(b+\".*\"+b).test(a);return b}function k(a,b){b===void 0&&(b=!1);if(!c(\"gkx\")(\"23909\"))return a;if(j(a)){var e=d(\"MAWVaultMaterials\").getVaultMaterials(),f=e.encryptionKey;e=e.prefixAndSuffix;if(e==null)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Vault prefix and suffix should not be null when unvaulting\");var g=new RegExp(e+\"(.*)\"+e);g=a.match(g);if(g==null||g.length!=2)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Could not retrieve inner value to unvault\");if(f==null)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Vault encryption key was null before unvault\");g=g[1];e=\"\"+e+g+e;var h=m(f,g);return a.replace(e,function(){return h})}if(b){f=new RegExp(\"^[0-9]{10}##[0-9]{10}.*[0-9]{10}##[0-9]{10}$\").test(a);if(f)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Encountered vaulted value with incorrect key.\")}return a}function a(a){if(a===\"\")return a;if(!c(\"gkx\")(\"23909\"))return a;if(!d(\"MAWVaultMaterials\").hasVaultBeenSetup()){c(\"FBLogger\")(\"mpf_web_foundations\").mustfix(\"Attempted to vault value while materials were not setup\");return a}if(j(a)){c(\"FBLogger\")(\"mpf_web_foundations\").warn(\"Attempted to vault value that's already been vaulted\");return a}var b=d(\"MAWVaultMaterials\").getVaultMaterials(),e=b.encryptionKey;b=b.prefixAndSuffix;if(b==null||e==null)throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Cannot vault before vault materials are set\");e=l(e,a);return\"\"+b+e+b}function b(a){if(!c(\"gkx\")(\"23909\"))return a;if(!j(a))throw c(\"FBLogger\")(\"mpf_web_foundations\").mustfixThrow(\"Value should be vaulted\");return k(a)}function l(a,b){var c=h==null?void 0:h.get(b);if(c!=null)return c;c=new TextEncoder().encode(b).buffer;a=d(\"MAWKeychainNaClCrypto\").encryptTweetNaCl(a,new Uint8Array(c));h==null?void 0:h.set(b,a);i==null?void 0:i.set(a,b);return a}function m(a,b){var c=i==null?void 0:i.get(b);if(c!=null)return c;c=new TextDecoder().decode(d(\"MAWKeychainNaClCrypto\").decryptTweetNaCl(a,b));h==null?void 0:h.set(c,b);i==null?void 0:i.set(b,c);return c}g.isVaulted=j;g.unvault=k;g.vault=a;g.unvaultOrThrow=b}),98);\n__d(\"WAOdsEnums\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\")({WA_CONNECTIVITY:\"wa_connectivity\",GET_DEVICES:\"armadillo_get_devices\",DECRYPTION:\"armadillo_msg_decryption\",DEVICE_REREG_CHECK:\"armadillo_device_rereg_check\",DEVICE_REGISTRATION:\"armadillo_device_registration\",DEVICE_REGISTRATION_NON_EMPLOYEE:\"armadillo_device_registration_non_employee\",PHASH_MISMATCH:\"phash_mismatch\",WEB_PLACEHOLDER:\"armadillo_web_placeholder\",PREKEY_UPLOAD:\"armadillo_prekey_upload\",PREKEY_DIGEST:\"armadillo_prekey_digest\",C2C_META_SYNC:\"armadillo_c2c_meta_sync\",ADMIN_MESSAGE:\"armadillo_admin_message\",PREVIEW_SNIPPET:\"armadillo_snippet\",TOTAL_INCOMING_MESSAGE:\"armadillo_total_incoming_message\",COMPARE_IDENTITY:\"armadillo_compare_identity\",GET_PREKEY:\"armadillo_get_prekey\",SECURITY_ALERT_FOR_CONTACT:\"armadillo_security_alert_for_contact\",SECURITY_ALERT_FOR_SELF:\"armadillo_security_alert_for_self\",MSG_SEND:\"armadillo_message_send\",RETRY_MISSING_MSG:\"armadillo_retry_missing_msg\",REGISTRATION_TYPE:\"aramdillo_registration_type\",CLOCK_SKEW_UPDATE:\"clock_skew_update\",STREAM_ERROR:\"wajs_stream_error\",ICDC:\"wajs_icdc\",LOAD_MORE_NO_ORIGINAL_MSG_IN_MAW:\"load_more_no_original_msg_in_maw\",POISON_QUEUE_ENTTITY:\"poison_queue_entity\",WA_DISCONNECT:\"armadillo_disconnect\",GROUP_CREATE:\"armadillo_group_create\",GROUP_DELETE:\"armadillo_group_delete\",GROUP_ADD_PARTICIPANT:\"armadillo_group_add_participant\",GROUP_PROMOTE_PARTICIPANT:\"armadillo_group_promote_participant\",GROUP_DEMOTE_PARTICIPANT:\"armadillo_group_demote_participant\",GROUP_REMOVE_PARTICIPANT:\"armadillo_group_remove_participant\",GROUP_LEAVE_PARTICIPANT:\"armadillo_group_leave_participant\",SEND_READ_RECEIPTS:\"armadillo_send_read_receipts\",MESSAGE_MISSING_THREAD_JID:\"MESSAGE_MISSING_THREAD_JID\",MESSAGE_MISSING:\"MESSAGE_MISSING\",MAW_NON_TIMEOUT:\"maw_non_timeout\",MAW_TIMEOUT:\"maw_timeout\",MAW_WEBWORKER_LOG_TEST:\"maw_webworker_log_test\",PROTOCOL_QUEUE:\"protocol_queue\",WA_FAIL_STANZA_QUEUE_ITEM:\"wa_fail_stanza_queue_item\",WA_QUERY_GROUP:\"wa_query_group\",MAW_MISMATCH_PARTICIPANT:\"maw_mismatch_participant\",MAW_ONE_TO_ONE_THREAD_PARTICIPANT_CLEANUP:\"maw_one_to_one_thread_participant_cleanup\",MAW_THREADID_DEPRECATION:\"maw_threadid_deprecation\",MAW_THREADID_DEPRECATION_DETAILS:\"maw_threadid_deprecation_details\",MAW_DELETE_DANGLING_PARTICIPANTS:\"maw_delete_dangling_participants\",S2S_QPL_MISSING_INSTANCE_KEY:\"s2s_qpl_missing_instance_key\",MAW_MUTATION_VALIDATOR:\"maw_mutation_validator\"});f.Entity=a}),66);\n__d(\"WACustomError\",[],(function(a,b,c,d,e,f){\"use strict\";var g=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function a(a,b,c){b===void 0&&(b=!0);function d(c){var d=Error.call(this,c);this.message=c;d.name=a;this.name=a;b&&(this.stack=d.stack)}d.prototype=Object.create(c?c.prototype:g);d.prototype.constructor=d;return d}function h(a){if(a.length===0)return\"No errors\";return a.length===1?a[0].message:a.map(function(a){return\"- \"+a.message}).join(\"\\n\")}e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=c!=null&&c.length>0?c:h(b);c=a.call(this,c)||this;c.errors=b;return c}return b}(a(\"AggregateError\",!0));var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a(\"TimeoutError\",!1)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.code=c;return a}return a}(a(\"HttpError\",!1)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a(\"UnimplementedMethod\")),l=!1;function b(a){if(a==null||a.name!==\"QuotaExceededError\")throw a;l=!0}function c(){return l}function d(a){return JSON.stringify(a,Object.getOwnPropertyNames(a))}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.inner=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));f.customError=a;f.AggregateError=e;f.TimeoutError=i;f.HttpError=j;f.UnimplementedMethod=k;f.supressQuotaExceededError=b;f.hasSupressedQuotaExceededError=c;f.obtainErrorSummary=d;f.WrappedError=m}),66);\n__d(\"WAAbortError\",[\"WACustomError\"],(function(a,b,c,d,e,f,g){\"use strict\";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d(\"WACustomError\").customError(\"AbortError\"));var h=\"AbortError\";function a(a){return function(b){if(b.name===h)return a(b);else throw b}}g.AbortError=b;g.ABORT_ERROR=h;g.catchAbort=a}),98);\n__d(\"WAPromiseDelays\",[\"Promise\",\"WAAbortError\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,c){return new(h||(h=b(\"Promise\")))(function(b,e){if(c==null?void 0:c.aborted)throw new(d(\"WAAbortError\").AbortError)();var f=setTimeout(g,a);c==null?void 0:c.addEventListener(\"abort\",h);function g(){c==null?void 0:c.removeEventListener(\"abort\",h),b()}function h(){c==null?void 0:c.removeEventListener(\"abort\",h),clearTimeout(f),e(new(d(\"WAAbortError\").AbortError)())}})}function c(a,c,d){return new(h||(h=b(\"Promise\")))(function(b,e){var f=setTimeout(function(){try{b(d())}catch(a){e(a)}},c);a.then(function(a){clearTimeout(f),b(a)},function(a){clearTimeout(f),e(a)})})}g.delayMs=a;g.withTimeout=c}),98);\n__d(\"MAWMaybeWithTimeout\",[\"MAWODSProxy\",\"WAOdsEnums\",\"WAPromiseDelays\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){return!0}function a(a,b,c,e){return h()?d(\"WAPromiseDelays\").withTimeout(a.then(function(a){var b;d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.MAW_NON_TIMEOUT,key:(b=e)!=null?b:\"unknown\"});return a}),b,function(){var a;d(\"MAWODSProxy\").odsBumpEntityKey({entity:d(\"WAOdsEnums\").Entity.MAW_TIMEOUT,key:(a=e)!=null?a:\"unknown\"});return c()}):a}g.maybeWithTimeout=a}),98);\n__d(\"MAWTimeUtils\",[\"FBLogger\",\"I64\",\"WATimeUtils\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){return(h||(h=d(\"I64\"))).of_float(a*1e3)}function j(a){a=Number(a);return a<=d(\"WATimeUtils\").MAX_INT&&a!==-1e3&&a!==0}function a(a){if(j(a)){Number(a)!==-1&&c(\"FBLogger\")(\"messenger_e2ee_web\").mustfix(\"Invalid timestamp supplied to millisTimeToTimestamp: %s\",Number(a));return i(a)}return(h||(h=d(\"I64\"))).of_float(a)}function b(a,b){var c=Date.now();c=c-b*24*60*60*1e3;b=d(\"WATimeUtils\").castMilliSecondsToUnixTime(c);return a>=b}function e(a){if(a==null)return;if(j(a)){Number(a)!==-1&&c(\"FBLogger\")(\"messenger_e2ee_web\").mustfix(\"Invalid timestamp supplied to ensureValidMillisTime: %s\",Number(a));return d(\"WATimeUtils\").castToMillisTime(a*1e3)}return a}f=(h||(h=d(\"I64\"))).of_string(\"9999999999999\");var k=Number.MAX_VALUE;g.toTimestamp=i;g.millisTimeToTimestamp=a;g.isTimestampNewerThanXDays=b;g.ensureValidMillisTime=e;g.MAX_TIMESTAMP_MS=f;g.MAX_TIMESTAMP=k;g.MIN_TIMESTAMP_MS=h.zero}),98);\n__d(\"MAWBridgeSearchMsg\",[\"MAWDbMsg\",\"MAWMsgType\",\"MAWVault\",\"WAAssertUnreachable\",\"WAGlobals\",\"WAJids\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=d(\"WAJids\").extractDeviceIDParts(d(\"WAGlobals\").getMyDeviceJid()).userId;b={chatId:a.thread,msgId:a.msgId,rowId:a.rowId,sender:d(\"WAJids\").authorToUserId(a.author,b),ts:d(\"MAWDbMsg\").getCanonicalTsFromMsg(a)};switch(a.type){case d(\"MAWMsgType\").MSG_TYPE.TEXT:return babelHelpers[\"extends\"]({},b,{content:d(\"MAWVault\").isVaulted(a.msgContent.content)?a.msgContent.content:d(\"MAWVault\").vault(a.msgContent.content)});case d(\"MAWMsgType\").MSG_TYPE.IMAGE:case d(\"MAWMsgType\").MSG_TYPE.VIDEO:case d(\"MAWMsgType\").MSG_TYPE.PTT:case d(\"MAWMsgType\").MSG_TYPE.GIF:case d(\"MAWMsgType\").MSG_TYPE.STICKER:case d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE:case d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF:case d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT:case d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE:case d(\"MAWMsgType\").MSG_TYPE.EXPIRED_EPHEMERAL:case d(\"MAWMsgType\").MSG_TYPE.ICDC_ALERT:case d(\"MAWMsgType\").MSG_TYPE.ADMIN:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d(\"MAWMsgType\").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d(\"MAWMsgType\").MSG_TYPE.REVOKED:case d(\"MAWMsgType\").MSG_TYPE.XMA:case d(\"MAWMsgType\").MSG_TYPE.RAVEN:case d(\"MAWMsgType\").MSG_TYPE.BUMP_EXISTING_MESSAGE:return b;default:return c(\"WAAssertUnreachable\")(a.type)}}b=\"message_content_search\";e=\"non_message_content_search\";g.createBridgeSearchMsg=a;g.MESSAGE_CONTENT_SEARCH=b;g.NON_MESSAGE_CONTENT_SEARCH=e}),98);\n__d(\"MAWWorkerEvent\",[\"QPLUserFlow\",\"qpl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=new Set();function a(a,b){if(h.has(b))return;h.add(b);c(\"QPLUserFlow\").start(c(\"qpl\")._(1056842055,\"807\"),{annotations:{string:{event:a}},instanceKey:b})}function b(a){if(!h.has(a))return;h[\"delete\"](a);c(\"QPLUserFlow\").endSuccess(c(\"qpl\")._(1056842055,\"807\"),{instanceKey:a})}function d(a,b){if(!h.has(a))return;h[\"delete\"](a);c(\"QPLUserFlow\").endFailure(c(\"qpl\")._(1056842055,\"807\"),\"fail\",{annotations:{string:{error:b}},instanceKey:a})}function e(a){if(!h.has(a))return;h[\"delete\"](a);c(\"QPLUserFlow\").addPoint(c(\"qpl\")._(1056842055,\"807\"),\"timeout_logged\");c(\"QPLUserFlow\").endFailure(c(\"qpl\")._(1056842055,\"807\"),\"timeout\",{instanceKey:a})}g.logStart=a;g.logSuccess=b;g.logFailure=d;g.logTimeout=e}),98);\n__d(\"MAWBridgeLoggingUtils\",[\"MAWWorkerEvent\",\"ODS\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=3185,j=\"armadillo_worker_runtime\",k=\"getWorkerHeartbeat\",l=10,m=new Array(l);function n(a,b,c){(h||(h=d(\"ODS\"))).bumpEntityKey(i,j,a+\"_\"+b+\"_\"+c)}function a(a,b,c){n(a,b,\"start\");if(b===k)return;(h||(h=d(\"ODS\"))).bumpEntityKey(i,j,\"route_start\");d(\"MAWWorkerEvent\").logStart(b,c);m.length===l&&m.shift();m.push(a+\"_\"+b)}function o(a){m.filter(Boolean).forEach(function(b){(h||(h=d(\"ODS\"))).bumpEntityKey(i,j,b+a)})}function b(a,b,c){n(a,b,\"success\");if(b===k)return;(h||(h=d(\"ODS\"))).bumpEntityKey(i,j,\"route_success\");d(\"MAWWorkerEvent\").logSuccess(c)}function c(a,b,c,e){n(a,b,\"fail\");if(b===k)return;(h||(h=d(\"ODS\"))).bumpEntityKey(i,j,\"route_fail\");d(\"MAWWorkerEvent\").logFailure(e,c)}function e(a,b,c){n(a,b,\"timeout\");if(b===k)return;(h||(h=d(\"ODS\"))).bumpEntityKey(i,j,\"route_timeout\");d(\"MAWWorkerEvent\").logTimeout(c)}function f(){o(\"_before_unresponsive\"),m.fill(null)}g.CAT_ID=i;g.ENT=j;g.HEARTBEAT_ROUTE=k;g.RECENT_ROUTES_NUM=l;g.routeStart=a;g.logRecentRoutes=o;g.routeSuccess=b;g.routeFail=c;g.routeTimeout=e;g.logRecentBridgeEvents=f}),98);\n__d(\"MAWTimedBridge\",[\"FBLogger\",\"MAWBridgeLoggingUtils\",\"MAWMaybeWithTimeout\",\"MAWWaitForBackendSetup\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=6e4;function a(a,b,e,f,g){g===void 0&&(g=h);return d(\"MAWMaybeWithTimeout\").maybeWithTimeout(d(\"MAWWaitForBackendSetup\").waitForBackendSetup(e).then(function(){return a()}),g,function(){d(\"MAWBridgeLoggingUtils\").routeTimeout(b,e,f);throw c(\"FBLogger\")(\"messenger_e2ee_web\").mustfixThrow(\"Failed to complete bridge route %s in time\",e)},e)}g.bridgeTimeout=a}),98);\n__d(\"MAWBridgeSendAndReceive\",[\"MAWBridge\",\"MAWBridgeLoggingUtils\",\"MAWTimedBridge\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=0;function a(a,b,c,e){e=d(\"MAWTimedBridge\").bridgeTimeout(function(){d(\"MAWBridgeLoggingUtils\").routeStart(a,b,h);return d(\"MAWBridge\").getBridge().sendAndReceive(a,b,c).then(function(c){d(\"MAWBridgeLoggingUtils\").routeSuccess(a,b,h);return c})[\"catch\"](function(c){d(\"MAWBridgeLoggingUtils\").routeFail(a,b,c.message,h);throw c})},a,b,h,e);h++;return e}g.sendAndReceive=a}),98);\n__d(\"MWEncryptedBackupsFirstRestoreUpsellTime\",[\"FBLogger\",\"WebStorage\",\"getMWEncryptedBackupsIsLocalStorageSupported\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=\"mw_encrypted_backups_restore_upsell_first_impression_time_key\";function a(){var a=Date.now().toString();if(!d(\"getMWEncryptedBackupsIsLocalStorageSupported\").getMWEncryptedBackupsIsLocalStorageSupported())return a;try{var b;b=(b=(h||(h=c(\"WebStorage\"))).getLocalStorage())==null?void 0:b.getItem(i);if(b==null){var e;(e=(h||(h=c(\"WebStorage\"))).getLocalStorage())==null?void 0:e.setItem(i,a);return a}return b}catch(b){c(\"FBLogger\")(\"labyrinth_web\").warn(\"[labyrinth][web] Failed to set EB session identifier due to %s\",b);return a}}g.getFirstRestoreUpsellTime=a}),98);\n__d(\"LSContactGender\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f[\"default\"]=a}),66);\n__d(\"LSContactType\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});f[\"default\"]=a}),66);\n__d(\"LSContactViewerRelationship\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});f[\"default\"]=a}),66);\n__d(\"LSContactWorkForeignEntityType\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f[\"default\"]=a}),66);\n__d(\"LSInstagramE2EEEligibility\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});f[\"default\"]=a}),66);\n__d(\"LSRtcCallState\",[],(function(a,b,c,d,e,f){a=Object.freeze({NO_ONGOING_CALL:0,AUDIO_GROUP_CALL:1,VIDEO_GROUP_CALL:2,VIDEO_1TO1_CALL:3,AUDIO_1TO1_CALL:4});f[\"default\"]=a}),66);\n__d(\"MWLSContactTypeExactUtils\",[\"I64\",\"LSContactTypeExact\",\"LSIntEnum\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a){if((h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSContactTypeExact\").IG_USER))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSContactTypeExact\").IG_BUSINESS_USER)))return!0;else return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSContactTypeExact\").IG_CREATOR_USER))}g.isIgContact=a}),98);\n__d(\"LSInitSyncCompleteSubscription\",[\"I64\",\"LSIntEnum\",\"Promise\",\"ReQL\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j;function k(a,c){return new(j||(j=b(\"Promise\")))(function(b,e){var f=d(\"ReQL\").fromTableAscending(a.table(\"sync_groups\")).getKeyRange(c).subscribe(function(a,c){if(c.operation===\"delete\")return;if((h||(h=d(\"I64\"))).equal(c.value.syncStatus,(i||(i=d(\"LSIntEnum\"))).ofNumber(2))){f();return b()}})})}function a(a,b){return d(\"ReQL\").firstAsync(d(\"ReQL\").fromTableAscending(a.table(\"sync_groups\")).getKeyRange(b)).then(function(c){if(c!=null&&(h||(h=d(\"I64\"))).equal(c.syncStatus,(i||(i=d(\"LSIntEnum\"))).ofNumber(2)))return;return k(a,b)})}function c(a){return k(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(1))}g.maybeWaitForSyncGroup=a;g.use=c}),98);\n__d(\"LSCreateOfflineThreadingID\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return c[0]=b.i64.random(),d[0]=b.i64.and_(b.i64.or_(b.i64.lsl_(a[0],b.i64.to_int32(b.i64.cast([0,22]))),b.i64.and_(c[0],b.i64.cast([0,4194303]))),b.i64.cast([2147483647,4294967295])),b.resolve(d)}e.exports=a}),null);\/*FB_PKG_DELIM*\/\n__d(\"LSFlushSyncTrace\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(153).fetch(),function(c){return b.i64.eq(c.traceType,b.i64.cast([0,2]))&&c.contextOne===a[1]&&c.contextThree===a[0]}),function(a){var b=a.update;a.item;return b({shouldFlush:!0})})},function(a){return b.resolve(c)}])}e.exports=a}),null);\n__d(\"LSExecuteFinallyBlockForSyncTransaction\",[\"LSFlushSyncTrace\"],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(3).fetch([[[\"\",a[1]]]]),function(c){return c.taskQueueName===\"\"&&b.i64.eq(c.syncDatabaseId,a[1])&&b.i64.eq(c.epochId,a[2])}),function(c){var d=c.update;c=c.item;return d({epochId:!a[0]&&b.i64.eq(c.failureCount,b.i64.cast([-1,4294967295]))?c.epochId:void 0,failureCount:b.i64.eq(c.failureCount,b.i64.cast([-1,4294967295]))?b.i64.cast([0,0]):b.i64.add(c.failureCount,b.i64.cast([0,1]))})})},function(a){return b.resolve()}])},function(a){return b.resolve(c)}])}e.exports=a}),null);\n__d(\"LSAppendDataTraceAddon\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(154).add({addonId:void 0,traceId:a[0],timestampMs:c[0],checkPointId:a[1],syncChannel:a[2],errorMessage:a[3],tags:a[4]})},function(a){return b.resolve(d)}])}e.exports=a}),null);\n__d(\"bs_caml\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){if(a<b)return-1;else if(a===b)return 0;else return 1}function b(a,b){if(a)if(b)return 0;else return 1;else if(b)return-1;else return 0}function c(a,b){if(a===b)return 0;else if(a<b)return-1;else if(a>b||a===a)return 1;else if(b===b)return-1;else return 0}function d(a,b){if(a===b)return 0;else if(a<b)return-1;else return 1}function e(a,b){if(a)return b;else return a}function g(a,b){if(a<b)return a;else return b}function h(a,b){if(a<b)return a;else return b}function i(a,b){if(a<b)return a;else return b}function j(a,b){if(a<b)return a;else return b}function k(a,b){if(a)return a;else return b}function l(a,b){if(a>b)return a;else return b}function m(a,b){if(a>b)return a;else return b}function n(a,b){if(a>b)return a;else return b}function o(a,b){if(a>b)return a;else return b}function p(a,b){if(a[1]===b[1])return a[0]===b[0];else return!1}function q(a,b){var c=b[0],d=a[0];if(d>c)return!0;else if(d<c)return!1;else return a[1]>=b[1]}function r(a,b){return!p(a,b)}function s(a,b){return!q(a,b)}function t(a,b){if(a[0]>b[0])return!0;else if(a[0]<b[0])return!1;else return a[1]>b[1]}function u(a,b){return!t(a,b)}function v(a,b){if(q(a,b))return b;else return a}function w(a,b){if(t(a,b))return a;else return b}f.caml_int_compare=a;f.caml_bool_compare=b;f.caml_float_compare=c;f.caml_string_compare=d;f.caml_bool_min=e;f.caml_int_min=g;f.caml_float_min=h;f.caml_string_min=i;f.caml_int32_min=j;f.caml_bool_max=k;f.caml_int_max=l;f.caml_float_max=m;f.caml_string_max=n;f.caml_int32_max=o;f.i64_eq=p;f.i64_neq=r;f.i64_lt=s;f.i64_gt=t;f.i64_le=u;f.i64_ge=q;f.i64_min=v;f.i64_max=w}),null);\n__d(\"bs_caml_int64\",[\"bs_caml\"],(function(a,b,c,d,e,f){\"use strict\";var g;function a(a,b){return[b,a>>>0]}var h=[-2147483648,0],i=[2147483647,4294967295],j=[0,1],k=[0,0],l=[-1,4294967295];function m(a){return(a&-2147483648)!==0}function n(a){return(a&-2147483648)===0}function c(a){var b=a[1];a=a[0];b=b+1|0;return[a+(b===0?1:0)|0,b>>>0]}function o(a){var b=(a[1]^-1)+1|0;return[(a[0]^-1)+(b===0?1:0)|0,b>>>0]}function p(a,b,c){var d=a[1],e=d+b|0;d=m(d)&&(m(b)||n(e))||m(b)&&n(e)?1:0;return[a[0]+c+d|0,e>>>0]}function q(a,b){return p(a,b[1],b[0])}function d(a,c){if(c!==null)return(g||(g=b(\"bs_caml\"))).i64_eq(a,c);else return!1}function e(a,c){if(c!==void 0)return(g||(g=b(\"bs_caml\"))).i64_eq(a,c);else return!1}function r(a,c){if(c==null)return!1;else return(g||(g=b(\"bs_caml\"))).i64_eq(a,c)}function s(a,b,c){b=(b^-1)+1>>>0;c=(c^-1)+(b===0?1:0)|0;return p(a,b,c)}function t(a,b){return s(a,b[1],b[0])}function u(a,b){if(b===0)return a;var c=a[1];if(b>=32)return[c<<(b-32|0),0];else return[c>>>(32-b|0)|a[0]<<b,c<<b>>>0]}function v(a,b){if(b===0)return a;var c=a[0],d=b-32|0;if(d===0)return[0,c>>>0];else if(d>0)return[0,c>>>d];else return[c>>>b,(c<<(-d|0)|a[1]>>>b)>>>0]}function w(a,b){if(b===0)return a;var c=a[0];if(b<32)return[c>>b,(c<<(32-b|0)|a[1]>>>b)>>>0];else return[c>=0?0:-1,c>>(b-32|0)>>>0]}function x(a){if(a[0]!==0)return!1;else return a[1]===0}function y(a,b){while(!0){var c=b,d=a,e,f=d[0],g=0,i=0,j;if(f!==0)j=4;else{if(d[1]===0)return k;j=4}if(j===4)if(c[0]!==0)i=3;else{if(c[1]===0)return k;i=3}i===3&&(f!==-2147483648||d[1]!==0?g=2:e=c[1]);if(g===2){j=c[0];i=d[1];g=0;j!==-2147483648||c[1]!==0?g=3:e=i;if(g===3){g=c[1];if(f<0){if(j>=0)return o(y(o(d),c));b=o(c);a=o(d);continue}if(j<0)return o(y(d,o(c)));d=f>>>16;c=f&65535;f=i>>>16;i=i&65535;var l=j>>>16;j=j&65535;var m=g>>>16;g=g&65535;var n,p,q,r=i*g;q=(r>>>16)+f*g;p=q>>>16;q=(q&65535)+i*m;p=p+(q>>>16)+c*g;n=p>>>16;p=(p&65535)+f*m;n=n+(p>>>16);p=(p&65535)+i*j;n=n+(p>>>16);p=p&65535;n=n+(d*g+c*m+f*j+i*l)&65535;return[p|n<<16,(r&65535|(q&65535)<<16)>>>0]}}if((e&1)===0)return k;else return h}}function z(a,b){return[a[0]^b[0],(a[1]^b[1])>>>0]}function A(a,b){return[a[0]|b[0],(a[1]|b[1])>>>0]}function B(a,b){return[a[0]&b[0],(a[1]&b[1])>>>0]}function C(a){return a[0]*4294967296+a[1]}function D(a){if(isNaN(a)||!isFinite(a))return k;if(a<=-9223372036854776e3)return h;if(a+1>=9223372036854776e3)return i;if(a<0)return o(D(-a));var b=a\/4294967296|0;a=a%4294967296|0;return[b,a>>>0]}function E(a){var b=a[0],c=b>>21;if(c===0)return!0;else if(c===-1)return!(a[1]===0&&b===-2097152);else return!1}function F(a){if(E(a))return String(C(a));if(a[0]<0)if((g||(g=b(\"bs_caml\"))).i64_eq(a,h))return\"-9223372036854775808\";else return\"-\"+F(o(a));var c=D(Math.floor(C(a)\/10)),d=c[1],e=c[0];a=s(s(a,d<<3,d>>>29|e<<3),d<<1,d>>>31|e<<1);d=a[1];e=a[0];if(d===0&&e===0)return F(c)+\"0\";if(e<0){a=(d^-1)+1>>>0;e=Math.ceil(a\/10);a=10*e-a;return F(s(c,e|0,0))+String(a|0)}e=Math.floor(d\/10);a=d-10*e;return F(p(c,e|0,0))+String(a|0)}function G(a,c){while(!0){var d=c,e=a,f=e[0],i=0,m;if(d[0]!==0||d[1]!==0)m=2;else throw{RE_EXN_ID:\"Division_by_zero\",Error:new Error()};if(m===2)if(f!==-2147483648)if(f!==0)i=1;else{if(e[1]===0)return k;i=1}else if(e[1]!==0)i=1;else{if((g||(g=b(\"bs_caml\"))).i64_eq(d,j)||(g||(g=b(\"bs_caml\"))).i64_eq(d,l))return e;if((g||(g=b(\"bs_caml\"))).i64_eq(d,h))return j;m=w(e,1);m=u(G(m,d),1);var n;if(m[0]!==0)n=3;else{if(m[1]===0)if(d[0]<0)return j;else return o(j);n=3}if(n===3){n=t(e,y(d,m));return q(m,G(n,d))}}if(i===1){m=d[0];if(m!==-2147483648)n=2;else{if(d[1]===0)return k;n=2}if(n===2){if(f<0){if(m>=0)return o(G(o(e),d));c=o(d);a=o(e);continue}if(m<0)return o(G(e,o(d)));i=k;n=e;while((g||(g=b(\"bs_caml\"))).i64_ge(n,d)){f=Math.floor(C(n)\/C(d));m=1>f?1:f;e=Math.ceil(Math.log(m)\/Math.LN2);f=e<=48?1:Math.pow(2,e-48);e=D(m);var p=y(e,d);while(p[0]<0||(g||(g=b(\"bs_caml\"))).i64_gt(p,n))m=m-f,e=D(m),p=y(e,d);x(e)&&(e=j);i=q(i,e);n=t(n,p)}return i}}}}function H(a,b){return t(a,y(G(a,b),b))}function I(a,b){var c=G(a,b);return[c,t(a,y(c,b))]}function J(a,b){var c=b[0],d=a[0];d=d<c?-1:d===c?0:1;if(d!==0)return d;c=b[1];d=a[1];if(d<c)return-1;else if(d===c)return 0;else return 1}function K(a){return[a<0?-1:0,a>>>0]}function L(a){return a[1]|0}function M(a){var b=a[1];a=a[0];var c=function(a){return(a>>>0).toString(16)};if(a===0&&b===0)return\"0\";if(b===0)return c(a)+\"00000000\";if(a===0)return c(b);b=c(b);var d=8-b.length|0;if(d<=0)return c(a)+b;else return c(a)+(\"0\".repeat(d)+b)}function N(a){return[2147483647&a[0],a[1]]}function O(a){return function(a,b){return new Float64Array(new Int32Array([a,b]).buffer)[0]}(a[1],a[0])}function P(a){a=function(a){return new Int32Array(new Float64Array([a]).buffer)}(a);return[a[1],a[0]>>>0]}f.mk=a;f.succ=c;f.min_int=h;f.max_int=i;f.one=j;f.zero=k;f.neg_one=l;f.of_int32=K;f.to_int32=L;f.add=q;f.neg=o;f.sub=t;f.lsl_=u;f.lsr_=v;f.asr_=w;f.is_zero=x;f.mul=y;f.xor=z;f.or_=A;f.and_=B;f.equal_null=d;f.equal_undefined=e;f.equal_nullable=r;f.to_float=C;f.of_float=D;f.div=G;f.mod_=H;f.compare=J;f.float_of_bits=O;f.bits_of_float=P;f.div_mod=I;f.to_hex=M;f.discard_sign=N;f.to_string=F}),null);\n__d(\"bs_caml_format\",[\"bs_caml\",\"bs_caml_int64\"],(function(a,b,c,d,e,f){\"use strict\";var g,h;function i(a){if(a>=65)if(a>=97)if(a>=123)return-1;else return a-87|0;else if(a>=91)return-1;else return a-55|0;else if(a>57||a<48)return-1;else return a-48|0}function j(a){switch(a){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function k(a){var b=1,c=2,d=0,e=a.charCodeAt(d);switch(e){case 43:d=d+1|0;break;case 44:break;case 45:b=-1;d=d+1|0;break;default:}if(a[d]===\"0\"){e=a.charCodeAt(d+1|0);if(e>=89)if(e>=111){if(e<121)switch(e){case 111:c=0;d=d+2|0;break;case 117:d=d+2|0;break;case 112:case 113:case 114:case 115:case 116:case 118:case 119:break;case 120:c=1;d=d+2|0;break}}else e===98&&(c=3,d=d+2|0);else if(e!==66){if(e>=79)switch(e){case 79:c=0;d=d+2|0;break;case 85:d=d+2|0;break;case 80:case 81:case 82:case 83:case 84:case 86:case 87:break;case 88:c=1;d=d+2|0;break}}else c=3,d=d+2|0}return[d,b,c]}function a(a){var b=k(a),c=b[0],d=j(b[2]),e=4294967295,f=a.length,g=c<f?a.charCodeAt(c):0;g=i(g);if(g<0||g>=d)throw{RE_EXN_ID:\"Failure\",_1:\"int_of_string\",Error:new Error()};var h=function(b,c){while(!0){var g=c,h=b;if(g===f)return h;var j=a.charCodeAt(g);if(j===95){c=g+1|0;continue}j=i(j);if(j<0||j>=d)throw{RE_EXN_ID:\"Failure\",_1:\"int_of_string\",Error:new Error()};h=d*h+j;if(h>e)throw{RE_EXN_ID:\"Failure\",_1:\"int_of_string\",Error:new Error()};c=g+1|0;b=h;continue}};b=b[1]*h(g,c+1|0);h=b|0;if(d===10&&b!==h)throw{RE_EXN_ID:\"Failure\",_1:\"int_of_string\",Error:new Error()};return h}function c(a){var c=k(a),d=c[2],e=c[0],f=(g||(g=b(\"bs_caml_int64\"))).of_int32(j(d));c=g.of_int32(c[1]);var l;switch(d){case 0:l=[536870911,4294967295];break;case 1:l=[268435455,4294967295];break;case 2:l=[429496729,2576980377];break;case 3:l=(g||(g=b(\"bs_caml_int64\"))).max_int;break}var m=a.length;d=e<m?a.charCodeAt(e):0;d=g.of_int32(i(d));if((h||(h=b(\"bs_caml\"))).i64_lt(d,(g||(g=b(\"bs_caml_int64\"))).zero)||(h||(h=b(\"bs_caml\"))).i64_ge(d,f))throw{RE_EXN_ID:\"Failure\",_1:\"int64_of_string\",Error:new Error()};var n=function(c,d){while(!0){var e=d,j=c;if(e===m)return j;var k=a.charCodeAt(e);if(k===95){d=e+1|0;continue}k=(g||(g=b(\"bs_caml_int64\"))).of_int32(i(k));if((h||(h=b(\"bs_caml\"))).i64_lt(k,(g||(g=b(\"bs_caml_int64\"))).zero)||(h||(h=b(\"bs_caml\"))).i64_ge(k,f)||(h||(h=b(\"bs_caml\"))).i64_gt(j,l))throw{RE_EXN_ID:\"Failure\",_1:\"int64_of_string\",Error:new Error()};j=g.add(g.mul(f,j),k);d=e+1|0;c=j;continue}};c=g.mul(c,n(d,e+1|0));n=g.or_(c,g.zero);if((h||(h=b(\"bs_caml\"))).i64_eq(f,[0,10])&&(h||(h=b(\"bs_caml\"))).i64_neq(c,n))throw{RE_EXN_ID:\"Failure\",_1:\"int64_of_string\",Error:new Error()};return n}function l(a){switch(a){case 0:return 8;case 1:return 16;case 2:return 10}}function m(a){if(a>=65&&a<=90||a>=192&&a<=214||a>=216&&a<=222)return a+32|0;else return a}function n(a){var b=a.length;if(b>31)throw{RE_EXN_ID:\"Invalid_argument\",_1:\"format_int: format too long\",Error:new Error()};var c={justify:\"+\",signstyle:\"-\",filter:\" \",alternate:!1,base:2,signedconv:!1,width:0,uppercase:!1,sign:1,prec:-1,conv:\"f\"},d=0;while(!0){var e=d;if(e>=b)return c;var f=a.charCodeAt(e),g=0;if(f>=69)if(f>=88)if(f>=121)g=1;else switch(f){case 88:c.base=1;c.uppercase=!0;d=e+1|0;continue;case 101:case 102:case 103:g=5;break;case 100:case 105:g=4;break;case 111:c.base=0;d=e+1|0;continue;case 117:c.base=2;d=e+1|0;continue;case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 104:case 106:case 107:case 108:case 109:case 110:case 112:case 113:case 114:case 115:case 116:case 118:case 119:g=1;break;case 120:c.base=1;d=e+1|0;continue}else if(f>=72)g=1;else{c.signedconv=!0;c.uppercase=!0;c.conv=String.fromCharCode(m(f));d=e+1|0;continue}else switch(f){case 35:c.alternate=!0;d=e+1|0;continue;case 32:case 43:g=2;break;case 45:c.justify=\"-\";d=e+1|0;continue;case 46:c.prec=0;var h=e+1|0;while(function(b){return function(){var c=a.charCodeAt(b)-48|0;return c>=0&&c<=9}}(h)())c.prec=(Math.imul(c.prec,10)+a.charCodeAt(h)|0)-48|0,h=h+1|0;d=h;continue;case 33:case 34:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 44:case 47:g=1;break;case 48:c.filter=\"0\";d=e+1|0;continue;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:g=3;break;default:g=1}switch(g){case 1:d=e+1|0;continue;case 2:c.signstyle=String.fromCharCode(f);d=e+1|0;continue;case 3:c.width=0;h=e;while(function(b){return function(){var c=a.charCodeAt(b)-48|0;return c>=0&&c<=9}}(h)())c.width=(Math.imul(c.width,10)+a.charCodeAt(h)|0)-48|0,h=h+1|0;d=h;continue;case 4:c.signedconv=!0;c.base=2;d=e+1|0;continue;case 5:c.signedconv=!0;c.conv=String.fromCharCode(f);d=e+1|0;continue}}}function o(a,b){var c=a.justify,d=a.signstyle,e=a.filter,f=a.alternate,g=a.base,h=a.signedconv,i=a.width,j=a.uppercase;a=a.sign;var k=b.length;h&&(a<0||d!==\"-\")&&(k=k+1|0);f&&(g===0?k=k+1|0:g===1&&(k=k+2|0));var l=\"\";if(c===\"+\"&&e===\" \")for(var m=k;m<i;++m)l=l+e;h&&(a<0?l=l+\"-\":d!==\"-\"&&(l=l+d));f&&g===0&&(l=l+\"0\");f&&g===1&&(l=l+\"0x\");if(c===\"+\"&&e===\"0\")for(m=k;m<i;++m)l=l+e;l=j?l+b.toUpperCase():l+b;if(c===\"-\")for(h=k;h<i;++h)l=l+\" \";return l}function d(a,b){if(a===\"%d\")return String(b);a=n(a);b=b<0?a.signedconv?(a.sign=-1,-b>>>0):b>>>0:b;b=b.toString(l(a.base));if(a.prec>=0){a.filter=\" \";var c=a.prec-b.length|0;c>0&&(b=\"0\".repeat(c)+b)}return o(a,b)}function p(a){if(!(h||(h=b(\"bs_caml\"))).i64_lt(a,(g||(g=b(\"bs_caml_int64\"))).zero))return(g||(g=b(\"bs_caml_int64\"))).to_string(a);var c=[0,10];a=(g||(g=b(\"bs_caml_int64\"))).discard_sign(a);a=g.div_mod(a,c);c=g.div_mod(g.add([0,8],a[1]),c);a=g.add(g.add([214748364,3435973836],a[0]),c[0]);return g.to_string(a)+\"0123456789\"[g.to_int32(c[1])]}function q(a){var c=\"\",d=[0,8],e=\"01234567\";if((h||(h=b(\"bs_caml\"))).i64_lt(a,(g||(g=b(\"bs_caml_int64\"))).zero)){var f=(g||(g=b(\"bs_caml_int64\"))).discard_sign(a);f=g.div_mod(f,d);var i=g.add([268435456,0],f[0]);f=f[1];c=e[g.to_int32(f)]+c;while((h||(h=b(\"bs_caml\"))).i64_neq(i,(g||(g=b(\"bs_caml_int64\"))).zero)){var j=(g||(g=b(\"bs_caml_int64\"))).div_mod(i,d);i=j[0];f=j[1];c=e[g.to_int32(f)]+c}}else{j=(g||(g=b(\"bs_caml_int64\"))).div_mod(a,d);f=j[0];i=j[1];c=e[g.to_int32(i)]+c;while((h||(h=b(\"bs_caml\"))).i64_neq(f,(g||(g=b(\"bs_caml_int64\"))).zero)){a=(g||(g=b(\"bs_caml_int64\"))).div_mod(f,d);f=a[0];i=a[1];c=e[g.to_int32(i)]+c}}return c}function e(a,c){if(a===\"%d\")return(g||(g=b(\"bs_caml_int64\"))).to_string(c);a=n(a);c=a.signedconv&&(h||(h=b(\"bs_caml\"))).i64_lt(c,(g||(g=b(\"bs_caml_int64\"))).zero)?(a.sign=-1,(g||(g=b(\"bs_caml_int64\"))).neg(c)):c;var d=a.base,e;switch(d){case 0:e=q(c);break;case 1:e=(g||(g=b(\"bs_caml_int64\"))).to_hex(c);break;case 2:e=p(c);break}if(a.prec>=0){a.filter=\" \";d=a.prec-e.length|0;c=d>0?\"0\".repeat(d)+e:e}else c=e;return o(a,c)}function r(a,b){a=n(a);var c=a.prec<0?6:a.prec,d=b<0?(a.sign=-1,-b):b;b=\"\";if(isNaN(d))b=\"nan\",a.filter=\" \";else if(isFinite(d)){var e=a.conv;switch(e){case\"e\":b=d.toExponential(c);e=b.length;b[e-3|0]===\"e\"&&(b=b.slice(0,e-1|0)+(\"0\"+b.slice(e-1|0)));break;case\"f\":b=d.toFixed(c);break;case\"g\":var f=c!==0?c:1;b=d.toExponential(f-1|0);e=b.indexOf(\"e\");c=Number(b.slice(e+1|0))|0;if(c<-4||d>=1e21||d.toFixed().length>f){var g=e-1|0;while(b[g]===\"0\")g=g-1|0;b[g]===\".\"&&(g=g-1|0);b=b.slice(0,g+1|0)+b.slice(e);g=b.length;b[g-3|0]===\"e\"&&(b=b.slice(0,g-1|0)+(\"0\"+b.slice(g-1|0)))}else{var h=f;if(c<0)h=h-(c+1|0)|0,b=d.toFixed(h);else while(function(){b=d.toFixed(h);return b.length>(f+1|0)}())h=h-1|0;if(h!==0){e=b.length-1|0;while(b[e]===\"0\")e=e-1|0;b[e]===\".\"&&(e=e-1|0);b=b.slice(0,e+1|0)}}break;default:}}else b=\"inf\",a.filter=\" \";return o(a,b)}var s=function(a,b,c){if(!isFinite(a))return isNaN(a)?\"nan\":a>0?\"infinity\":\"-infinity\";var d=a==0&&1\/a==-Infinity?1:a>=0?0:1;d&&(a=-a);var e=0;if(!(a==0))if(a<1)while(a<1&&e>-1022)a*=2,e--;else while(a>=2)a\/=2,e++;var f=e<0?\"\":\"+\",g=\"\";if(d)g=\"-\";else switch(c){case 43:g=\"+\";break;case 32:g=\" \";break;default:break}if(b>=0&&b<13){d=Math.pow(2,b*4);a=Math.round(a*d)\/d}c=a.toString(16);if(b>=0){d=c.indexOf(\".\");if(d<0)c+=\".\"+\"0\".repeat(b);else{a=d+1+b;c.length<a?c+=\"0\".repeat(a-c.length):c=c.substr(0,a)}}return g+\"0x\"+c+\"p\"+f+e.toString(10)},t=function(a,b){var c=+a;if(a.length>0&&c===c)return c;a=a.replace(\/_\/g,\"\");c=+a;if(a.length>0&&c===c||\/^[+-]?nan$\/i.test(a))return c;var d=\/^ *([+-]?)0x([0-9a-f]+)\\.?([0-9a-f]*)p([+-]?[0-9]+)\/i.exec(a);if(d){var e=d[3].replace(\/0+$\/,\"\"),f=parseInt(d[1]+d[2]+e,16);d=(d[4]|0)-4*e.length;c=f*Math.pow(2,d);return c}if(\/^\\+?inf(inity)?$\/i.test(a))return Infinity;if(\/^-inf(inity)?$\/i.test(a))return-Infinity;throw b};function u(a){return t(a,{RE_EXN_ID:\"Failure\",_1:\"float_of_string\"})}var v=d,w=d,x=a,y=a;f.caml_format_float=r;f.caml_hexstring_of_float=s;f.caml_format_int=d;f.caml_nativeint_format=v;f.caml_int32_format=w;f.caml_float_of_string=u;f.caml_int64_format=e;f.caml_int_of_string=a;f.caml_int32_of_string=x;f.caml_int64_of_string=c;f.caml_nativeint_of_string=y}),null);\n__d(\"bs_caml_exceptions\",[],(function(a,b,c,d,e,f){\"use strict\";var g={contents:0};function a(a){g.contents=g.contents+1|0;return a+(\"\/\"+g.contents)}function b(a){if(a==null)return!1;else return typeof a.RE_EXN_ID===\"string\"}function c(a){return a.RE_EXN_ID}f.id=g;f.create=a;f.caml_is_extension=b;f.caml_exn_slot_name=c}),null);\n__d(\"bs_caml_option\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a.BS_PRIVATE_NESTED_SOME_NONE!==void 0}function g(a){if(a===void 0)return{BS_PRIVATE_NESTED_SOME_NONE:0};else if(a!==null&&a.BS_PRIVATE_NESTED_SOME_NONE!==void 0)return{BS_PRIVATE_NESTED_SOME_NONE:a.BS_PRIVATE_NESTED_SOME_NONE+1|0};else return a}function b(a){if(a==null)return;else return g(a)}function c(a){if(a===void 0)return;else return g(a)}function d(a){if(a===null)return;else return g(a)}function h(a){if(!(a!==null&&a.BS_PRIVATE_NESTED_SOME_NONE!==void 0))return a;a=a.BS_PRIVATE_NESTED_SOME_NONE;if(a===0)return;else return{BS_PRIVATE_NESTED_SOME_NONE:a-1|0}}function e(a){if(a===void 0)return;else return h(a)}function i(a){if(a!==void 0)return a.VAL;else return a}f.nullable_to_opt=b;f.undefined_to_opt=c;f.null_to_opt=d;f.valFromOption=h;f.some=g;f.isNested=a;f.option_get=e;f.option_unwrap=i}),null);\n__d(\"bs_caml_js_exceptions\",[\"bs_caml_exceptions\",\"bs_caml_option\"],(function(a,b,c,d,e,f){\"use strict\";var g=b(\"bs_caml_exceptions\").create(\"Caml_js_exceptions.Error\");function a(a){if(b(\"bs_caml_exceptions\").caml_is_extension(a))return a;else return{RE_EXN_ID:g,_1:a}}function c(a){if(a.RE_EXN_ID===g)return b(\"bs_caml_option\").some(a._1)}f.$$Error=g;f.internalToOCamlException=a;f.caml_as_js_exn=c}),null);\n__d(\"bs_int64\",[\"bs_caml\",\"bs_caml_format\",\"bs_caml_int64\",\"bs_caml_js_exceptions\"],(function(a,b,c,d,e,f){\"use strict\";var g,h;function a(a){return(g||(g=b(\"bs_caml_int64\"))).sub(a,g.one)}function c(a){if((h||(h=b(\"bs_caml\"))).i64_ge(a,(g||(g=b(\"bs_caml_int64\"))).zero))return a;else return(g||(g=b(\"bs_caml_int64\"))).neg(a)}function d(a){return(g||(g=b(\"bs_caml_int64\"))).xor(a,g.neg_one)}function e(a){try{return b(\"bs_caml_format\").caml_int64_of_string(a)}catch(c){a=b(\"bs_caml_js_exceptions\").internalToOCamlException(c);if(a.RE_EXN_ID===\"Failure\")return;throw a}}var i=(g||(g=b(\"bs_caml_int64\"))).compare;function j(a,c){return(g||(g=b(\"bs_caml_int64\"))).compare(a,c)===0}var k=g.zero,l=g.one,m=g.neg_one,n=g.succ,o=g.max_int,p=g.min_int,q=g.to_string;f.zero=k;f.one=l;f.minus_one=m;f.succ=n;f.pred=a;f.abs=c;f.max_int=o;f.min_int=p;f.lognot=d;f.of_string_opt=e;f.to_string=q;f.compare=i;f.equal=j}),null);\n__d(\"I64\",[\"bs_caml\",\"bs_caml_format\",\"bs_caml_int64\",\"bs_int64\",\"nullthrows\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a){return function(){var b=a.apply(void 0,arguments);b._tag=\"i64\";return b}}function b(a){return function(){var b=a.apply(void 0,arguments);b!=null&&(b._tag=\"i64\");return b}}f=a((h||(h=c(\"bs_caml_int64\"))).mk);var j=a(h.succ),k=a(function(){return(h||(h=c(\"bs_caml_int64\"))).min_int})(),l=a(function(){return(h||(h=c(\"bs_caml_int64\"))).max_int})(),m=a(function(){return(h||(h=c(\"bs_caml_int64\"))).one})(),n=a(function(){return(h||(h=c(\"bs_caml_int64\"))).zero})(),o=a(function(){return(h||(h=c(\"bs_caml_int64\"))).neg_one})(),p=a(h.of_int32),q=a(h.add),r=a(h.neg),s=a(h.sub),t=a(h.lsl_),u=a(h.lsr_),v=a(h.asr_),w=a(h.mul),x=a(h.xor),y=a(h.or_),z=a(h.and_),A=a(h.of_float),B=a(h.div),C=a(h.mod_),D=a(function(){return c(\"bs_int64\").minus_one})(),E=a(c(\"bs_int64\").abs),F=a(c(\"bs_int64\").lognot);b=b(c(\"bs_int64\").of_string_opt);var G,H;if(typeof BigInt===\"function\"){var I=BigInt(32),J=BigInt(4294967295);G=function(a){return BigInt.asIntN(64,(BigInt(a[0])<<I)+BigInt(a[1])).toString()};H=function(a){a=BigInt.asIntN(64,BigInt(a));a=[Number(a>>I),Number(a&J)];a._tag=\"i64\";return a}}else G=(h||(h=c(\"bs_caml_int64\"))).to_string,H=a(c(\"bs_caml_format\").caml_int64_of_string);G=G;H=H;var K=a((i||(i=c(\"bs_caml\"))).i64_max);a=a(i.i64_min);function L(a){if(Array.isArray(a)&&a.length===2){var b=a[0];a=a[1];if(typeof b===\"number\"&&Number.isInteger(b)&&typeof a===\"number\"&&Number.isInteger(a)){b=[b,a];b._tag=\"i64\";return b}}return void 0}function d(a){return c(\"nullthrows\")(L(a))}function e(a){return(a==null?void 0:a._tag)===\"i64\"}g.mk=f;g.succ=j;g.min_int=k;g.max_int=l;g.one=m;g.zero=n;g.neg_one=o;g.of_int32=p;g.to_int32=h.to_int32;g.add=q;g.neg=r;g.sub=s;g.lsl_=t;g.lsr_=u;g.asr_=v;g.is_zero=h.is_zero;g.mul=w;g.xor=x;g.or_=y;g.and_=z;g.to_float=h.to_float;g.of_float=A;g.div=B;g.mod_=C;g.compare=h.compare;g.minus_one=D;g.abs=E;g.lognot=F;g.of_string_opt=b;g.equal=c(\"bs_int64\").equal;g.to_string=G;g.of_string=H;g.gt=i.i64_gt;g.ge=i.i64_ge;g.lt=i.i64_lt;g.le=i.i64_le;g.max=K;g.min=a;g.cast=L;g.castExn=d;g.isI64=e}),98);\n__d(\"LSArrayGetObjectAt\",[\"I64\",\"Promise\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a,c,e,f){return(i||(i=b(\"Promise\"))).resolve([e[(h||(h=d(\"I64\"))).to_int32(f)],e])}g.call=a}),98);\n__d(\"LSLogEventAnnotate.nop\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g;function a(){return(g||(g=b(\"Promise\"))).resolve()}e.exports=a}),null);\n__d(\"LSExecuteFirstBlockForSyncTransaction\",[\"LSAppendDataTraceAddon\",\"LSArrayGetObjectAt\",\"LSLogEventAnnotate.nop\"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.resolve()},function(e){return c.filter(c.db.table(3).fetch([[[\"\",a[0]]]]),function(b){return b.taskQueueName===\"\"&&c.i64.eq(b.syncDatabaseId,a[0])&&c.i64.eq(b.epochId,a[1])}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return function(a){c.logger(a).mustfix(a)}([\"epoch mismatch\",\",\",c.i64.to_string(a[0])].join(\"\")),d[2]=new c.Map(),d[2].set(\"database_id\",a[0]),d[2].set(\"epoch_id\",a[1]),d[2].set(\"sync_status\",a[4]),d[2].set(\"next_cursor\",a[3]),d[2].set(\"error_msg\",\"epoch mismatch\"),a[9]?d[3]=!1:d[3]=!0,d[3]?c.resolve():(d[5]=a[9].keys(),d[6]=c.i64.of_int32(d[5].length),c.i64.gt(d[6],c.i64.cast([0,0]))?c.loopAsync(d[6],function(e){return d[7]=e,c.sequence([function(a){return c.nativeTypeOperation(\"Array\",b(\"LSArrayGetObjectAt\"),d[5],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(b){return d[10]=a[9].get(d[8]),a[9],d[2].set(d[8],d[10])}])}):c.resolve())},function(a){return c.nativeOperation(b(\"LSLogEventAnnotate.nop\"),c.i64.cast([0,16]),c.i64.cast([0,35]),c.i64.cast([0,0]),d[2])},function(a){return d[4]=!1,d[0]=d[4]}]):(e.item,c.sequence([function(e){return c.filter(c.db.table(1).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.groupId,a[0])&&b.currentCursor===a[2]}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return function(a){c.logger(a).mustfix(a)}([\"cursor mismatch\",\",\",c.i64.to_string(a[0])].join(\"\")),d[4]=new c.Map(),d[4].set(\"database_id\",a[0]),d[4].set(\"epoch_id\",a[1]),d[4].set(\"sync_status\",a[4]),d[4].set(\"next_cursor\",a[3]),d[4].set(\"error_msg\",\"cursor mismatch\"),a[9]?d[5]=!1:d[5]=!0,d[5]?c.resolve():(d[7]=a[9].keys(),d[8]=c.i64.of_int32(d[7].length),c.i64.gt(d[8],c.i64.cast([0,0]))?c.loopAsync(d[8],function(e){return d[9]=e,c.sequence([function(a){return c.nativeTypeOperation(\"Array\",b(\"LSArrayGetObjectAt\"),d[7],d[9]).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],a})},function(b){return d[12]=a[9].get(d[10]),a[9],d[4].set(d[10],d[12])}])}):c.resolve())},function(a){return c.nativeOperation(b(\"LSLogEventAnnotate.nop\"),c.i64.cast([0,16]),c.i64.cast([0,35]),c.i64.cast([0,0]),d[4])},function(a){return d[6]=!1,d[2]=d[6]}]):(e.item,c.sequence([function(b){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.of_float(Date.now()),c.forEach(c.db.table(1).fetch([[[a[0]]]]),function(b){var e=b.update;b.item;return e({currentCursor:a[3],syncStatus:a[4],sendSyncParams:a[5],minTimeToSyncTimestampMs:c.i64.eq(a[6],c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[4],a[6]),canIgnoreTimestamp:a[7],syncChannel:a[8],lastSyncCompletedTimestampMs:d[5]})})},function(b){return c.forEach(c.db.table(3).fetch([[[\"\",a[0]]]]),function(a){var b=a.update;a.item;return b({failureCount:c.i64.cast([-1,4294967295])})})},function(e){return d[6]=new c.Map(),d[6].set(\"database_id\",a[0]),d[6].set(\"epoch_id\",a[1]),d[6].set(\"sync_status\",a[4]),d[6].set(\"next_cursor\",a[3]),a[9]?d[7]=!1:d[7]=!0,d[7]?c.resolve():(d[9]=a[9].keys(),d[10]=c.i64.of_int32(d[9].length),c.i64.gt(d[10],c.i64.cast([0,0]))?c.loopAsync(d[10],function(e){return d[11]=e,c.sequence([function(a){return c.nativeTypeOperation(\"Array\",b(\"LSArrayGetObjectAt\"),d[9],d[11]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(b){return d[14]=a[9].get(d[12]),a[9],d[6].set(d[12],d[14])}])}):c.resolve())},function(a){return c.nativeOperation(b(\"LSLogEventAnnotate.nop\"),c.i64.cast([0,16]),c.i64.cast([0,35]),c.i64.cast([0,0]),d[6])},function(a){return d[8]=!0,d[2]=d[8]}]))})},function(a){return d[0]=d[2]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);\n__d(\"LSSetRegionHint\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(1).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({regionHint:a[1]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);\n__d(\"LSDeleteThenInsertContactPresence\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(186).put({contactId:a[0],status:a[1],expirationTimestampMs:a[3],lastActiveTimestampMs:a[2],capabilities:a[4],publishId:a[5]})},function(a){return b.resolve(c)}])}e.exports=a}),null);\n__d(\"LSTruncatePresenceDatabase\",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return a[0]?b.forEach(b.db.table(186).fetch(),function(a){return a[\"delete\"]()}):b.forEach(b.db.table(186).fetch(),function(a){return a[\"delete\"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);\/*FB_PKG_DELIM*\/\n\/**\n * License: https:\/\/www.facebook.com\/legal\/license\/t3hOLs8wlXy\/\n *\/\n__d(\"minisearch-3.0.2\",[],(function(a,b,c,d,e,f){\"use strict\";var g={},h={exports:g};function i(){(function(b,c){typeof g===\"object\"&&typeof h!==\"undefined\"?h.exports=c():(b=typeof globalThis!==\"undefined\"?globalThis:b||self,b.MiniSearch=c())})(this,function(){var a=function(){a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)};function b(a){var b=typeof Symbol===\"function\"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length===\"number\")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function c(a,b){var c=typeof Symbol===\"function\"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a[\"return\"])&&c.call(a)}finally{if(f)throw f.error}}return e}function d(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(c(arguments[b]));return a}var e=\"ENTRIES\",f=\"KEYS\",g=\"VALUES\",h=\"\",i=function(){function a(a,b){var c=a._tree,d=Object.keys(c);this.set=a;this._type=b;this._path=d.length>0?[{node:c,keys:d}]:[]}a.prototype.next=function(){var a=this.dive();this.backtrack();return a};a.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var a=j(this._path),b=a.node;a=a.keys;if(j(a)===h)return{done:!1,value:this.result()};this._path.push({node:b[j(a)],keys:Object.keys(b[j(a)])});return this.dive()};a.prototype.backtrack=function(){if(this._path.length===0)return;j(this._path).keys.pop();if(j(this._path).keys.length>0)return;this._path.pop();this.backtrack()};a.prototype.key=function(){return this.set._prefix+this._path.map(function(a){a=a.keys;return j(a)}).filter(function(a){return a!==h}).join(\"\")};a.prototype.value=function(){return j(this._path).node[h]};a.prototype.result=function(){if(this._type===g)return this.value();return this._type===f?this.key():[this.key(),this.value()]};a.prototype[Symbol.iterator]=function(){return this};return a}(),j=function(a){return a[a.length-1]},k=0,l=1,m=2,n=3,o=function(a,b,d){var e=[{distance:0,i:0,key:\"\",node:a}],f={},g=[];a=function(){var a=e.pop(),i=a.node,j=a.distance,k=a.key,l=a.i,m=a.edit;Object.keys(i).forEach(function(n){if(n===h){var o=j+(b.length-l),a=c(f[k]||[null,Infinity],2);a=a[1];o<=d&&o<a&&(f[k]=[i[n],o])}else p(b,n,d-j,l,m,g).forEach(function(a){var c=a.distance,b=a.i;a=a.edit;e.push({node:i[n],distance:j+c,key:k+n,i:b,edit:a})})})};while(e.length>0)a();return f},p=function(a,b,c,d,e,f){f.push({distance:0,ia:d,ib:0,edit:e});d=[];while(f.length>0){e=f.pop();var g=e.distance,h=e.ia,i=e.ib;e=e.edit;if(i===b.length){d.push({distance:g,i:h,edit:e});continue}if(a[h]===b[i])f.push({distance:g,ia:h+1,ib:i+1,edit:k});else{if(g>=c)continue;e!==m&&f.push({distance:g+1,ia:h,ib:i+1,edit:n});h<a.length&&(e!==n&&f.push({distance:g+1,ia:h+1,ib:i,edit:m}),e!==n&&e!==m&&f.push({distance:g+1,ia:h+1,ib:i+1,edit:l}))}}return d},q=function(){function a(a,b){a===void 0&&(a={}),b===void 0&&(b=\"\"),this._tree=a,this._prefix=b}a.prototype.atPrefix=function(d){var b;if(!d.startsWith(this._prefix))throw new Error(\"Mismatched prefix\");var e=c(r(this._tree,d.slice(this._prefix.length)),2),f=e[0];e=e[1];if(f===void 0){e=c(y(e),2);var g=e[0],i=e[1];e=Object.keys(g).find(function(a){return a!==h&&a.startsWith(i)});if(e!==void 0)return new a((b={},b[e.slice(i.length)]=g[e],b),d)}return new a(f||{},d)};a.prototype.clear=function(){delete this._size,this._tree={}};a.prototype[\"delete\"]=function(a){delete this._size;return v(this._tree,a)};a.prototype.entries=function(){return new i(this,e)};a.prototype.forEach=function(d){var e,a;try{for(var f=b(this),g=f.next();!g.done;g=f.next()){var h=c(g.value,2),i=h[0];h=h[1];d(i,h,this)}}catch(a){e={error:a}}finally{try{g&&!g.done&&(a=f[\"return\"])&&a.call(f)}finally{if(e)throw e.error}}};a.prototype.fuzzyGet=function(a,b){return o(this._tree,a,b)};a.prototype.get=function(a){a=s(this._tree,a);return a!==void 0?a[h]:void 0};a.prototype.has=function(a){a=s(this._tree,a);return a!==void 0&&a.hasOwnProperty(h)};a.prototype.keys=function(){return new i(this,f)};a.prototype.set=function(a,b){if(typeof a!==\"string\")throw new Error(\"key must be a string\");delete this._size;a=t(this._tree,a);a[h]=b;return this};Object.defineProperty(a.prototype,\"size\",{get:function(){var a=this;if(this._size)return this._size;this._size=0;this.forEach(function(){a._size+=1});return this._size},enumerable:!1,configurable:!0});a.prototype.update=function(a,b){if(typeof a!==\"string\")throw new Error(\"key must be a string\");delete this._size;a=t(this._tree,a);a[h]=b(a[h]);return this};a.prototype.values=function(){return new i(this,g)};a.prototype[Symbol.iterator]=function(){return this.entries()};a.from=function(e){var f,d,g=new a();try{for(var h=b(e),i=h.next();!i.done;i=h.next()){e=c(i.value,2);var j=e[0];e=e[1];g.set(j,e)}}catch(a){f={error:a}}finally{try{i&&!i.done&&(d=h[\"return\"])&&d.call(h)}finally{if(f)throw f.error}}return g};a.fromObject=function(b){return a.from(Object.entries(b))};return a}(),r=function(a,b,c){c===void 0&&(c=[]);if(b.length===0||a==null)return[a,c];var d=Object.keys(a).find(function(a){return a!==h&&b.startsWith(a)});if(d===void 0){c.push([a,b]);return r(void 0,\"\",c)}c.push([a,d]);return r(a[d],b.slice(d.length),c)},s=function(a,b){if(b.length===0||a==null)return a;var c=Object.keys(a).find(function(a){return a!==h&&b.startsWith(a)});return c===void 0?void 0:s(a[c],b.slice(c.length))},t=function(b,c){var a;if(c.length===0||b==null)return b;var d=Object.keys(b).find(function(a){return a!==h&&c.startsWith(a)});if(d===void 0){var e=Object.keys(b).find(function(a){return a!==h&&a.startsWith(c[0])});if(e===void 0)b[c]={};else{var f=u(c,e);b[f]=(a={},a[e.slice(f.length)]=b[e],a);delete b[e];return t(b[f],c.slice(f.length))}return b[c]}return t(b[d],c.slice(d.length))},u=function(a,b,c,d,e){c===void 0&&(c=0);d===void 0&&(d=Math.min(a.length,b.length));e===void 0&&(e=\"\");if(c>=d)return e;return a[c]!==b[c]?e:u(a,b,c+1,d,e+a[c])},v=function(a,b){a=c(r(a,b),2);b=a[0];a=a[1];if(b===void 0)return;delete b[h];var d=Object.keys(b);d.length===0&&w(a);d.length===1&&x(a,d[0],b[d[0]])},w=function(b){if(b.length===0)return;var a=c(y(b),2),d=a[0];a=a[1];delete d[a];Object.keys(d).length===0&&w(b.slice(0,-1))},x=function(a,b,d){if(a.length===0)return;a=c(y(a),2);var e=a[0];a=a[1];e[a+b]=d;delete e[a]},y=function(a){return a[a.length-1]},z,A=\"or\",B=\"and\",C=function(){function b(b){if((b===null||b===void 0?void 0:b.fields)==null)throw new Error('MiniSearch: option \"fields\" must be provided');this._options=a(a(a({},J),b),{searchOptions:a(a({},K),b.searchOptions||{})});this._index=new q();this._documentCount=0;this._documentIds={};this._fieldIds={};this._fieldLength={};this._averageFieldLength={};this._nextId=0;this._storedFields={};this.addFields(this._options.fields)}b.prototype.add=function(b){var c=this,a=this._options,d=a.extractField,e=a.tokenize,f=a.processTerm,g=a.fields;a=a.idField;var h=d(b,a);if(h==null)throw new Error('MiniSearch: document does not have ID field \"'+a+'\"');var i=this.addDocumentId(h);this.saveStoredFields(i,b);g.forEach(function(a){var g=d(b,a);if(g==null)return;g=e(g.toString(),a);c.addFieldLength(i,c._fieldIds[a],c.documentCount-1,g.length);g.forEach(function(b){b=f(b,a);b&&c.addTerm(c._fieldIds[a],i,b)})})};b.prototype.addAll=function(a){var b=this;a.forEach(function(a){return b.add(a)})};b.prototype.addAllAsync=function(a,b){var c=this;b===void 0&&(b={});b=b.chunkSize;var d=b===void 0?10:b;b={chunk:[],promise:Promise.resolve()};a=a.reduce(function(a,e,f){var b=a.chunk;a=a.promise;b.push(e);if((f+1)%d===0)return{chunk:[],promise:a.then(function(){return new Promise(function(a){return setTimeout(a,0)})}).then(function(){return c.addAll(b)})};else return{chunk:b,promise:a}},b);var e=a.chunk;b=a.promise;return b.then(function(){return c.addAll(e)})};b.prototype.remove=function(b){var d=this,a=this._options,e=a.tokenize,f=a.processTerm,g=a.extractField,h=a.fields;a=a.idField;var i=g(b,a);if(i==null)throw new Error('MiniSearch: document does not have ID field \"'+a+'\"');a=c(Object.entries(this._documentIds).find(function(a){a=c(a,2);a[0];a=a[1];return i===a})||[],1);var j=a[0];if(j==null)throw new Error(\"MiniSearch: cannot remove document with ID \"+i+\": it is not in the index\");h.forEach(function(a){var c=g(b,a);if(c==null)return;c=e(c.toString(),a);c.forEach(function(b){b=f(b,a);b&&d.removeTerm(d._fieldIds[a],j,b)})});delete this._storedFields[j];delete this._documentIds[j];this._documentCount-=1};b.prototype.removeAll=function(a){var b=this;if(a)a.forEach(function(a){return b.remove(a)});else if(arguments.length>0)throw new Error(\"Expected documents to be present. Omit the argument to remove all documents.\");else this._index=new q(),this._documentCount=0,this._documentIds={},this._fieldLength={},this._averageFieldLength={},this._storedFields={},this._nextId=0};b.prototype.search=function(d,e){var f=this;e===void 0&&(e={});var b=this._options,g=b.tokenize,h=b.processTerm;b=b.searchOptions;var i=a(a({tokenize:g,processTerm:h},b),e);g=i.tokenize;var j=i.processTerm;h=g(d).map(function(a){return j(a)}).filter(function(a){return!!a});b=h.map(H(i));e=b.map(function(a){return f.executeQuery(a,i)});g=this.combineResults(e,i.combineWith);return Object.entries(g).reduce(function(d,a){a=c(a,2);var e=a[0];a=a[1];var b=a.score,g=a.match;a=a.terms;a={id:f._documentIds[e],terms:I(a),score:b,match:g};Object.assign(a,f._storedFields[e]);(i.filter==null||i.filter(a))&&d.push(a);return d},[]).sort(function(a,b){a=a.score;b=b.score;return a<b?1:-1})};b.prototype.autoSuggest=function(b,d){d===void 0&&(d={});d=a(a({},L),d);b=this.search(b,d).reduce(function(c,a){var b=a.score;a=a.terms;var d=a.join(\" \");c[d]==null?c[d]={score:b,terms:a,count:1}:(c[d].score+=b,c[d].count+=1);return c},{});return Object.entries(b).map(function(a){a=c(a,2);var d=a[0];a=a[1];var b=a.score,e=a.terms;a=a.count;return{suggestion:d,terms:e,score:b\/a}}).sort(function(a,b){a=a.score;b=b.score;return a<b?1:-1})};Object.defineProperty(b.prototype,\"documentCount\",{get:function(){return this._documentCount},enumerable:!1,configurable:!0});b.loadJSON=function(a,c){if(c==null)throw new Error(\"MiniSearch: loadJSON should be given the same options used when serializing the index\");return b.loadJS(JSON.parse(a),c)};b.getDefault=function(a){if(J.hasOwnProperty(a))return D(J,a);else throw new Error('MiniSearch: unknown option \"'+a+'\"')};b.loadJS=function(a,c){var d=a.index,e=a.documentCount,f=a.nextId,g=a.documentIds,h=a.fieldIds,i=a.fieldLength,j=a.averageFieldLength;a=a.storedFields;c=new b(c);c._index=new q(d._tree,d._prefix);c._documentCount=e;c._nextId=f;c._documentIds=g;c._fieldIds=h;c._fieldLength=i;c._averageFieldLength=j;c._fieldIds=h;c._storedFields=a||{};return c};b.prototype.executeQuery=function(b,d){var e=this;d=a(a({},this._options.searchOptions),d);var f=(d.fields||this._options.fields).reduce(function(c,d){var b;return a(a({},c),(b={},b[d]=D(c,d)||1,b))},d.boost||{}),g=d.boostDocument;d=d.weights;d=a(a({},K.weights),d);var h=d.fuzzy,i=d.prefix;d=this.termResults(b.term,f,g,this._index.get(b.term));if(!b.fuzzy&&!b.prefix)return d;var j=[d];b.prefix&&this._index.atPrefix(b.term).forEach(function(a,c){var d=.3*(a.length-b.term.length)\/a.length;j.push(e.termResults(a,f,g,c,i,d))});if(b.fuzzy){d=b.fuzzy===!0?.2:b.fuzzy;d=d<1?Math.round(b.term.length*d):d;Object.entries(this._index.fuzzyGet(b.term,d)).forEach(function(a){a=c(a,2);var b=a[0];a=c(a[1],2);var d=a[0];a=a[1];a=a\/b.length;j.push(e.termResults(b,f,g,d,h,a))})}return j.reduce(E[A],{})};b.prototype.combineResults=function(a,b){b===void 0&&(b=A);if(a.length===0)return{};b=b.toLowerCase();return a.reduce(E[b],null)||{}};b.prototype.toJSON=function(){return{index:this._index,documentCount:this._documentCount,nextId:this._nextId,documentIds:this._documentIds,fieldIds:this._fieldIds,fieldLength:this._fieldLength,averageFieldLength:this._averageFieldLength,storedFields:this._storedFields}};b.prototype.termResults=function(a,b,d,e,f,g){var h=this;g===void 0&&(g=0);return e==null?{}:Object.entries(b).reduce(function(f,b){b=c(b,2);var i=b[0],j=b[1],k=h._fieldIds[i];b=e[k]||{ds:{}};var l=b.df;b=b.ds;Object.entries(b).forEach(function(b){b=c(b,2);var e=b[0];b=b[1];var m=d?d(h._documentIds[e],a):1;if(!m)return;var n=h._fieldLength[e][k]\/h._averageFieldLength[k];f[e]=f[e]||{score:0,match:{},terms:[]};f[e].terms.push(a);f[e].match[a]=D(f[e].match,a)||[];f[e].score+=m*G(b,l,h._documentCount,n,j,g);f[e].match[a].push(i)});return f},{})};b.prototype.addTerm=function(b,c,d){this._index.update(d,function(d){d=d||{};var e=d[b]||{df:0,ds:{}};e.ds[c]==null&&(e.df+=1);e.ds[c]=(e.ds[c]||0)+1;return a(a({},d),(d={},d[b]=e,d))})};b.prototype.removeTerm=function(b,c,d){var e=this;if(!this._index.has(d)){this.warnDocumentChanged(c,b,d);return}this._index.update(d,function(f){var g=f[b];if(g==null||g.ds[c]==null){e.warnDocumentChanged(c,b,d);return f}if(g.ds[c]<=1){if(g.df<=1){delete f[b];return f}g.df-=1}if(g.ds[c]<=1){delete g.ds[c];return f}g.ds[c]-=1;return a(a({},f),(f={},f[b]=g,f))});Object.keys(this._index.get(d)).length===0&&this._index[\"delete\"](d)};b.prototype.warnDocumentChanged=function(a,b,d){if(console==null||emptyFunction==null)return;a=Object.entries(this._fieldIds).find(function(a){a=c(a,2);a[0];a=a[1];return a===b})[0]};b.prototype.addDocumentId=function(a){var b=this._nextId.toString(36);this._documentIds[b]=a;this._documentCount+=1;this._nextId+=1;return b};b.prototype.addFields=function(a){var b=this;a.forEach(function(a,c){b._fieldIds[a]=c})};b.prototype.addFieldLength=function(a,b,c,d){this._averageFieldLength[b]=this._averageFieldLength[b]||0;var e=this._averageFieldLength[b]*c+d;this._fieldLength[a]=this._fieldLength[a]||{};this._fieldLength[a][b]=d;this._averageFieldLength[b]=e\/(c+1)};b.prototype.saveStoredFields=function(b,c){var d=this,a=this._options,e=a.storeFields,f=a.extractField;if(e==null||e.length===0)return;this._storedFields[b]=this._storedFields[b]||{};e.forEach(function(a){var e=f(c,a);if(e===void 0)return;d._storedFields[b][a]=e})};return b}(),D=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:void 0},E=(z={},z[A]=function(a,b){return Object.entries(b).reduce(function(e,a){a=c(a,2);var f=a[0];a=a[1];var b=a.score,g=a.match;a=a.terms;e[f]==null?e[f]={score:b,match:g,terms:a}:(e[f].score+=b,e[f].score*=1.5,(b=e[f].terms).push.apply(b,d(a)),Object.assign(e[f].match,g));return e},a||{})},z[B]=function(b,e){return b==null?e:Object.entries(e).reduce(function(g,e){e=c(e,2);var h=e[0];e=e[1];var f=e.score,i=e.match;e=e.terms;if(b[h]===void 0)return g;g[h]=g[h]||{};g[h].score=b[h].score+f;g[h].match=a(a({},b[h].match),i);g[h].terms=d(b[h].terms,e);return g},{})},z),F=function(a,b,c){return a*Math.log(c\/b)},G=function(a,b,c,d,e,f){e=e\/(1+.333*e*f);return e*F(a,b,c)\/d},H=function(a){return function(b,c,d){var e=typeof a.fuzzy===\"function\"?a.fuzzy(b,c,d):a.fuzzy||!1;c=typeof a.prefix===\"function\"?a.prefix(b,c,d):a.prefix===!0;return{term:b,fuzzy:e,prefix:c}}},I=function(a){return a.filter(function(b,c,a){return a.indexOf(b)===c})},J={idField:\"id\",extractField:function(a,b){return a[b]},tokenize:function(a,b){return a.split(M)},processTerm:function(a,b){return a.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},K={combineWith:A,prefix:!1,fuzzy:!1,boost:{},weights:{fuzzy:.9,prefix:.75}},L={prefix:function(a,b,c){return b===c.length-1}},M=\/[\\n\\r -#%-*,-\/:;?@[-\\]_{}\\u00A0\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u1680\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2000-\\u200A\\u2010-\\u2029\\u202F-\\u2043\\u2045-\\u2051\\u2053-\\u205F\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u3000-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]+\/u;return C})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);\n__d(\"minisearch\",[\"minisearch-3.0.2\"],(function(a,b,c,d,e,f){e.exports=b(\"minisearch-3.0.2\")()}),null);\n\/**\n * License: https:\/\/www.facebook.com\/legal\/license\/t3hOLs8wlXy\/\n *\/\n__d(\"remove-accents-0.4.2\",[],(function(a,b,c,d,e,f){\"use strict\";b={};var g={exports:b};function h(){var a={\"\\xc0\":\"A\",\"\\xc1\":\"A\",\"\\xc2\":\"A\",\"\\xc3\":\"A\",\"\\xc4\":\"A\",\"\\xc5\":\"A\",\"\\u1ea4\":\"A\",\"\\u1eae\":\"A\",\"\\u1eb2\":\"A\",\"\\u1eb4\":\"A\",\"\\u1eb6\":\"A\",\"\\xc6\":\"AE\",\"\\u1ea6\":\"A\",\"\\u1eb0\":\"A\",\"\\u0202\":\"A\",\"\\xc7\":\"C\",\"\\u1e08\":\"C\",\"\\xc8\":\"E\",\"\\xc9\":\"E\",\"\\xca\":\"E\",\"\\xcb\":\"E\",\"\\u1ebe\":\"E\",\"\\u1e16\":\"E\",\"\\u1ec0\":\"E\",\"\\u1e14\":\"E\",\"\\u1e1c\":\"E\",\"\\u0206\":\"E\",\"\\xcc\":\"I\",\"\\xcd\":\"I\",\"\\xce\":\"I\",\"\\xcf\":\"I\",\"\\u1e2e\":\"I\",\"\\u020a\":\"I\",\"\\xd0\":\"D\",\"\\xd1\":\"N\",\"\\xd2\":\"O\",\"\\xd3\":\"O\",\"\\xd4\":\"O\",\"\\xd5\":\"O\",\"\\xd6\":\"O\",\"\\xd8\":\"O\",\"\\u1ed0\":\"O\",\"\\u1e4c\":\"O\",\"\\u1e52\":\"O\",\"\\u020e\":\"O\",\"\\xd9\":\"U\",\"\\xda\":\"U\",\"\\xdb\":\"U\",\"\\xdc\":\"U\",\"\\xdd\":\"Y\",\"\\xe0\":\"a\",\"\\xe1\":\"a\",\"\\xe2\":\"a\",\"\\xe3\":\"a\",\"\\xe4\":\"a\",\"\\xe5\":\"a\",\"\\u1ea5\":\"a\",\"\\u1eaf\":\"a\",\"\\u1eb3\":\"a\",\"\\u1eb5\":\"a\",\"\\u1eb7\":\"a\",\"\\xe6\":\"ae\",\"\\u1ea7\":\"a\",\"\\u1eb1\":\"a\",\"\\u0203\":\"a\",\"\\xe7\":\"c\",\"\\u1e09\":\"c\",\"\\xe8\":\"e\",\"\\xe9\":\"e\",\"\\xea\":\"e\",\"\\xeb\":\"e\",\"\\u1ebf\":\"e\",\"\\u1e17\":\"e\",\"\\u1ec1\":\"e\",\"\\u1e15\":\"e\",\"\\u1e1d\":\"e\",\"\\u0207\":\"e\",\"\\xec\":\"i\",\"\\xed\":\"i\",\"\\xee\":\"i\",\"\\xef\":\"i\",\"\\u1e2f\":\"i\",\"\\u020b\":\"i\",\"\\xf0\":\"d\",\"\\xf1\":\"n\",\"\\xf2\":\"o\",\"\\xf3\":\"o\",\"\\xf4\":\"o\",\"\\xf5\":\"o\",\"\\xf6\":\"o\",\"\\xf8\":\"o\",\"\\u1ed1\":\"o\",\"\\u1e4d\":\"o\",\"\\u1e53\":\"o\",\"\\u020f\":\"o\",\"\\xf9\":\"u\",\"\\xfa\":\"u\",\"\\xfb\":\"u\",\"\\xfc\":\"u\",\"\\xfd\":\"y\",\"\\xff\":\"y\",\"\\u0100\":\"A\",\"\\u0101\":\"a\",\"\\u0102\":\"A\",\"\\u0103\":\"a\",\"\\u0104\":\"A\",\"\\u0105\":\"a\",\"\\u0106\":\"C\",\"\\u0107\":\"c\",\"\\u0108\":\"C\",\"\\u0109\":\"c\",\"\\u010a\":\"C\",\"\\u010b\":\"c\",\"\\u010c\":\"C\",\"\\u010d\":\"c\",\"C\\u0306\":\"C\",\"c\\u0306\":\"c\",\"\\u010e\":\"D\",\"\\u010f\":\"d\",\"\\u0110\":\"D\",\"\\u0111\":\"d\",\"\\u0112\":\"E\",\"\\u0113\":\"e\",\"\\u0114\":\"E\",\"\\u0115\":\"e\",\"\\u0116\":\"E\",\"\\u0117\":\"e\",\"\\u0118\":\"E\",\"\\u0119\":\"e\",\"\\u011a\":\"E\",\"\\u011b\":\"e\",\"\\u011c\":\"G\",\"\\u01f4\":\"G\",\"\\u011d\":\"g\",\"\\u01f5\":\"g\",\"\\u011e\":\"G\",\"\\u011f\":\"g\",\"\\u0120\":\"G\",\"\\u0121\":\"g\",\"\\u0122\":\"G\",\"\\u0123\":\"g\",\"\\u0124\":\"H\",\"\\u0125\":\"h\",\"\\u0126\":\"H\",\"\\u0127\":\"h\",\"\\u1e2a\":\"H\",\"\\u1e2b\":\"h\",\"\\u0128\":\"I\",\"\\u0129\":\"i\",\"\\u012a\":\"I\",\"\\u012b\":\"i\",\"\\u012c\":\"I\",\"\\u012d\":\"i\",\"\\u012e\":\"I\",\"\\u012f\":\"i\",\"\\u0130\":\"I\",\"\\u0131\":\"i\",\"\\u0132\":\"IJ\",\"\\u0133\":\"ij\",\"\\u0134\":\"J\",\"\\u0135\":\"j\",\"\\u0136\":\"K\",\"\\u0137\":\"k\",\"\\u1e30\":\"K\",\"\\u1e31\":\"k\",\"K\\u0306\":\"K\",\"k\\u0306\":\"k\",\"\\u0139\":\"L\",\"\\u013a\":\"l\",\"\\u013b\":\"L\",\"\\u013c\":\"l\",\"\\u013d\":\"L\",\"\\u013e\":\"l\",\"\\u013f\":\"L\",\"\\u0140\":\"l\",\"\\u0141\":\"l\",\"\\u0142\":\"l\",\"\\u1e3e\":\"M\",\"\\u1e3f\":\"m\",\"M\\u0306\":\"M\",\"m\\u0306\":\"m\",\"\\u0143\":\"N\",\"\\u0144\":\"n\",\"\\u0145\":\"N\",\"\\u0146\":\"n\",\"\\u0147\":\"N\",\"\\u0148\":\"n\",\"\\u0149\":\"n\",\"N\\u0306\":\"N\",\"n\\u0306\":\"n\",\"\\u014c\":\"O\",\"\\u014d\":\"o\",\"\\u014e\":\"O\",\"\\u014f\":\"o\",\"\\u0150\":\"O\",\"\\u0151\":\"o\",\"\\u0152\":\"OE\",\"\\u0153\":\"oe\",\"P\\u0306\":\"P\",\"p\\u0306\":\"p\",\"\\u0154\":\"R\",\"\\u0155\":\"r\",\"\\u0156\":\"R\",\"\\u0157\":\"r\",\"\\u0158\":\"R\",\"\\u0159\":\"r\",\"R\\u0306\":\"R\",\"r\\u0306\":\"r\",\"\\u0212\":\"R\",\"\\u0213\":\"r\",\"\\u015a\":\"S\",\"\\u015b\":\"s\",\"\\u015c\":\"S\",\"\\u015d\":\"s\",\"\\u015e\":\"S\",\"\\u0218\":\"S\",\"\\u0219\":\"s\",\"\\u015f\":\"s\",\"\\u0160\":\"S\",\"\\u0161\":\"s\",\"\\u0162\":\"T\",\"\\u0163\":\"t\",\"\\u021b\":\"t\",\"\\u021a\":\"T\",\"\\u0164\":\"T\",\"\\u0165\":\"t\",\"\\u0166\":\"T\",\"\\u0167\":\"t\",\"T\\u0306\":\"T\",\"t\\u0306\":\"t\",\"\\u0168\":\"U\",\"\\u0169\":\"u\",\"\\u016a\":\"U\",\"\\u016b\":\"u\",\"\\u016c\":\"U\",\"\\u016d\":\"u\",\"\\u016e\":\"U\",\"\\u016f\":\"u\",\"\\u0170\":\"U\",\"\\u0171\":\"u\",\"\\u0172\":\"U\",\"\\u0173\":\"u\",\"\\u0216\":\"U\",\"\\u0217\":\"u\",\"V\\u0306\":\"V\",\"v\\u0306\":\"v\",\"\\u0174\":\"W\",\"\\u0175\":\"w\",\"\\u1e82\":\"W\",\"\\u1e83\":\"w\",\"X\\u0306\":\"X\",\"x\\u0306\":\"x\",\"\\u0176\":\"Y\",\"\\u0177\":\"y\",\"\\u0178\":\"Y\",\"Y\\u0306\":\"Y\",\"y\\u0306\":\"y\",\"\\u0179\":\"Z\",\"\\u017a\":\"z\",\"\\u017b\":\"Z\",\"\\u017c\":\"z\",\"\\u017d\":\"Z\",\"\\u017e\":\"z\",\"\\u017f\":\"s\",\"\\u0192\":\"f\",\"\\u01a0\":\"O\",\"\\u01a1\":\"o\",\"\\u01af\":\"U\",\"\\u01b0\":\"u\",\"\\u01cd\":\"A\",\"\\u01ce\":\"a\",\"\\u01cf\":\"I\",\"\\u01d0\":\"i\",\"\\u01d1\":\"O\",\"\\u01d2\":\"o\",\"\\u01d3\":\"U\",\"\\u01d4\":\"u\",\"\\u01d5\":\"U\",\"\\u01d6\":\"u\",\"\\u01d7\":\"U\",\"\\u01d8\":\"u\",\"\\u01d9\":\"U\",\"\\u01da\":\"u\",\"\\u01db\":\"U\",\"\\u01dc\":\"u\",\"\\u1ee8\":\"U\",\"\\u1ee9\":\"u\",\"\\u1e78\":\"U\",\"\\u1e79\":\"u\",\"\\u01fa\":\"A\",\"\\u01fb\":\"a\",\"\\u01fc\":\"AE\",\"\\u01fd\":\"ae\",\"\\u01fe\":\"O\",\"\\u01ff\":\"o\",\"\\xde\":\"TH\",\"\\xfe\":\"th\",\"\\u1e54\":\"P\",\"\\u1e55\":\"p\",\"\\u1e64\":\"S\",\"\\u1e65\":\"s\",\"X\\u0301\":\"X\",\"x\\u0301\":\"x\",\"\\u0403\":\"\\u0413\",\"\\u0453\":\"\\u0433\",\"\\u040c\":\"\\u041a\",\"\\u045c\":\"\\u043a\",\"A\\u030b\":\"A\",\"a\\u030b\":\"a\",\"E\\u030b\":\"E\",\"e\\u030b\":\"e\",\"I\\u030b\":\"I\",\"i\\u030b\":\"i\",\"\\u01f8\":\"N\",\"\\u01f9\":\"n\",\"\\u1ed2\":\"O\",\"\\u1ed3\":\"o\",\"\\u1e50\":\"O\",\"\\u1e51\":\"o\",\"\\u1eea\":\"U\",\"\\u1eeb\":\"u\",\"\\u1e80\":\"W\",\"\\u1e81\":\"w\",\"\\u1ef2\":\"Y\",\"\\u1ef3\":\"y\",\"\\u0200\":\"A\",\"\\u0201\":\"a\",\"\\u0204\":\"E\",\"\\u0205\":\"e\",\"\\u0208\":\"I\",\"\\u0209\":\"i\",\"\\u020c\":\"O\",\"\\u020d\":\"o\",\"\\u0210\":\"R\",\"\\u0211\":\"r\",\"\\u0214\":\"U\",\"\\u0215\":\"u\",\"B\\u030c\":\"B\",\"b\\u030c\":\"b\",\"\\u010c\\u0323\":\"C\",\"\\u010d\\u0323\":\"c\",\"\\xca\\u030c\":\"E\",\"\\xea\\u030c\":\"e\",\"F\\u030c\":\"F\",\"f\\u030c\":\"f\",\"\\u01e6\":\"G\",\"\\u01e7\":\"g\",\"\\u021e\":\"H\",\"\\u021f\":\"h\",\"J\\u030c\":\"J\",\"\\u01f0\":\"j\",\"\\u01e8\":\"K\",\"\\u01e9\":\"k\",\"M\\u030c\":\"M\",\"m\\u030c\":\"m\",\"P\\u030c\":\"P\",\"p\\u030c\":\"p\",\"Q\\u030c\":\"Q\",\"q\\u030c\":\"q\",\"\\u0158\\u0329\":\"R\",\"\\u0159\\u0329\":\"r\",\"\\u1e66\":\"S\",\"\\u1e67\":\"s\",\"V\\u030c\":\"V\",\"v\\u030c\":\"v\",\"W\\u030c\":\"W\",\"w\\u030c\":\"w\",\"X\\u030c\":\"X\",\"x\\u030c\":\"x\",\"Y\\u030c\":\"Y\",\"y\\u030c\":\"y\",\"A\\u0327\":\"A\",\"a\\u0327\":\"a\",\"B\\u0327\":\"B\",\"b\\u0327\":\"b\",\"\\u1e10\":\"D\",\"\\u1e11\":\"d\",\"\\u0228\":\"E\",\"\\u0229\":\"e\",\"\\u0190\\u0327\":\"E\",\"\\u025b\\u0327\":\"e\",\"\\u1e28\":\"H\",\"\\u1e29\":\"h\",\"I\\u0327\":\"I\",\"i\\u0327\":\"i\",\"\\u0197\\u0327\":\"I\",\"\\u0268\\u0327\":\"i\",\"M\\u0327\":\"M\",\"m\\u0327\":\"m\",\"O\\u0327\":\"O\",\"o\\u0327\":\"o\",\"Q\\u0327\":\"Q\",\"q\\u0327\":\"q\",\"U\\u0327\":\"U\",\"u\\u0327\":\"u\",\"X\\u0327\":\"X\",\"x\\u0327\":\"x\",\"Z\\u0327\":\"Z\",\"z\\u0327\":\"z\"},b=Object.keys(a).join(\"|\"),c=new RegExp(b,\"g\"),d=new RegExp(b,\"\");b=function(b){return b.replace(c,function(b){return a[b]})};var e=function(a){return!!a.match(d)};g.exports=b;g.exports.has=e;g.exports.remove=b}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);\n__d(\"remove-accents\",[\"remove-accents-0.4.2\"],(function(a,b,c,d,e,f){e.exports=b(\"remove-accents-0.4.2\")()}),null);\/*FB_PKG_DELIM*\/\n__d(\"MAWIndexedDBDeletion\",[\"CurrentMessengerUser\",\"FBLogger\",\"MAWIndexedDbMetadata\",\"Promise\",\"asyncToGeneratorRuntime\",\"recoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a,d){return indexedDB==null||a==null?(h||(h=b(\"Promise\"))).resolve():new(h||(h=b(\"Promise\")))(function(b,e){var f=indexedDB.deleteDatabase(a);f.onsuccess=function(){c(\"FBLogger\")(\"mpf_web_foundations\").warn(\"%s db was deleted\",d),b()};f.onblocked=function(){c(\"recoverableViolation\")(\"Cannot delete \"+d+\" db: blocked\",\"messenger_e2ee_web\"),b()};f.onerror=function(){c(\"recoverableViolation\")(\"Cannot delete \"+d+\" db\",\"messenger_e2ee_web\"),e(f.error)}})}function a(){return j.apply(this,arguments)}function j(){j=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=d(\"CurrentMessengerUser\").getID();yield (h||(h=b(\"Promise\"))).all([i(d(\"MAWIndexedDbMetadata\").dbName(a),\"maw_v1\"),i(d(\"MAWIndexedDbMetadata\").restoreDbName2(a),\"maw_v3\"),i(d(\"MAWIndexedDbMetadata\").signalDbName(a),\"signal\"),i(d(\"MAWIndexedDbMetadata\").logDbName(a),\"logDb\")])});return j.apply(this,arguments)}g.deleteDB=i;g.deleteMAWPersistence=a}),98);\n__d(\"MAWEARGenNewKeychainCryptoKey\",[\"FBLogger\",\"MAWCryptoConsts\",\"MAWKeychainCrypto\",\"MessengerWebInitData\",\"WATimeUtils\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return h.apply(this,arguments)}function h(){h=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){try{var a,b=(yield (a=d(\"MAWKeychainCrypto\")).getAccountKey()),e=a.genBrowserEncryptionKeyString(),f=a.genDatabaseEncryptionSeed();b=(yield a.encryptDataToStringBuffer(b,f));f=d(\"WATimeUtils\").castToUnixTime(d(\"WATimeUtils\").unixTime()+d(\"MAWCryptoConsts\").ENC_KEY_TTL);return{accountKeyString:yield a.generateHashString(c(\"MessengerWebInitData\").accountKey),expiration:f,key:e,seed:b}}catch(a){throw c(\"FBLogger\")(\"messenger_e2ee_web\").catching(a).mustfixThrow(\"Failed to generateNewKey\")}});return h.apply(this,arguments)}g[\"default\"]=a}),98);\n__d(\"MAWGenKeychainCryptoKeyWithVersion\",[\"FBLogger\",\"MAWKeychainCrypto\",\"MessengerWebInitData\",\"Promise\",\"asyncToGeneratorRuntime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,e,f,g){try{var i=(yield d(\"MAWKeychainCrypto\").getAccountKey());a=(yield (h||(h=b(\"Promise\"))).all([d(\"MAWKeychainCrypto\").importBrowserEncryptionKey(a),d(\"MAWKeychainCrypto\").decryptDataToArrayBuffer(i,e)]));i=a[0];e=a[1];a=(yield d(\"MAWKeychainCrypto\").genDatabaseEncryptionKey(i,e));return{key:a,version:f}}catch(a){throw c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).mustfixThrow(\"Failed to genKeyWithVersion\",f,g!=null,c(\"MessengerWebInitData\").accountKey!=null,g===(yield d(\"MAWKeychainCrypto\").generateHashString(c(\"MessengerWebInitData\").accountKey)))}});return i.apply(this,arguments)}g[\"default\"]=a}),98);\n__d(\"IndexedDbPolyfills\",[],(function(a,b,c,d,e,f){\"use strict\";var g=function(){function a(){this.$1=new Map()}var b=a.prototype;b.emit=function(a){var b=this.$1.get(a);for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];if(b!==void 0)for(var f=b,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}var j=i;j.apply(void 0,d)}var k=this[\"on\"+a];k!=null&&k.apply(void 0,d)};b.addEventListener=function(a,b,c){var d=this;c===void 0&&(c={});c=c;c=c.signal;var e=this.$1.get(a);e===void 0&&(e=new Set(),this.$1.set(a,e));e.add(b);c!=null&&(c.onabort=function(){d.removeEventListener(a,b)})};b.removeEventListener=function(a,b){a=this.$1.get(a);if(a===void 0)return;a[\"delete\"](b)};return a}();a=function(){return function(a,b){a=this.openCursor((a=a)!=null?a:null);var c=[],d=new g();a.onsuccess=function(a){a=a.target.result;if(a!=null&&(b===void 0||c.length<b))c.push(a.value),a[\"continue\"]();else{d.result=c;d.onsuccess==null?void 0:d.onsuccess({target:{readyState:\"done\",result:c}});return}};a.onerror=function(a){d.onerror==null?void 0:d.onerror(a)};return d}};b=typeof window!==\"undefined\"?window:self;typeof b.IDBObjectStore!==\"undefined\"&&b.IDBObjectStore.prototype.getAll===void 0&&(b.IDBObjectStore.prototype.getAll=a());f.IDBRequest=g;f.getAll=a}),66);\n__d(\"WAWorkerGlobalScope\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(){if(typeof window!==\"undefined\")return window;return typeof globalThis!==\"undefined\"?globalThis:self}();f.workerGlobalScope=a}),66);\n__d(\"MAWEncyptionIndexedDbV2\",[\"ExecutionEnvironment\",\"FBLogger\",\"IndexedDbPolyfills\",\"LSPlatformLsInitLog\",\"MAWCurrentUser\",\"MAWErrorObject\",\"MAWExceededStorageQuota\",\"MAWIndexedDBDeletion\",\"MAWIndexedDbMetadata\",\"MAWTransactionMode\",\"Promise\",\"WAWorkerGlobalScope\",\"err\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;b(\"IndexedDbPolyfills\");var j=\"browserEncryptionMetaV2\",k=\"version\",l=null,m=null,n=null;function o(){if(l==null)throw c(\"err\")(\"Encryption IndexDB should've been initialized\");return l}function a(){return l!=null}function e(){var a=d(\"MAWCurrentUser\").getID();return new(i||(i=b(\"Promise\")))(function(b,e){d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_start\");var f=\"false\",g=\"false\",i=\"false\",o=\"false\";try{if(l==null){if(indexedDB==null)return e(c(\"err\")(\"IndexedDB API not available\"));d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_start\");n=d(\"MAWIndexedDbMetadata\").encryptionDbName(a);var p=indexedDB.open(n),q=d(\"WAWorkerGlobalScope\").workerGlobalScope.setTimeout(function(){e(c(\"err\")(\"IndexedDB onsuccess and onerror were never called. IndexedDb failed to initialize. In worker: %s. In shared worker: %s. onsuccess called: %s. onerror called: %s. onupgradeneeded called: %s. onblockedCalled: %s. openRequest: %s\",(h||(h=c(\"ExecutionEnvironment\"))).isInWorker?\"true\":\"false\",(h||(h=c(\"ExecutionEnvironment\"))).isInSharedWorker?\"true\":\"false\",g,f,i,o,p.readyState))},1e4);d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_end\");p.onupgradeneeded=function(a){i=\"true\";d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_upgrade_start\");a=a.target.result;if(!a.objectStoreNames.contains(j)){a=a.createObjectStore(j,{autoIncrement:!0,keyPath:\"id\"});a.createIndex(k,k,{unique:!0})}d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_upgrade_end\")};p.onblocked=function(){d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_blocked\"),o=\"true\",d(\"WAWorkerGlobalScope\").workerGlobalScope.setTimeout(function(){e(c(\"err\")(\"EAR Open timed out while blocked\"))},2e3)};p.onsuccess=function(a){g=\"true\";d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_success_start\");d(\"WAWorkerGlobalScope\").workerGlobalScope.clearTimeout(q);var e=a.target.result;e.onversionchange=function(){d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_version_change_start\"),e.close(),c(\"FBLogger\")(\"mpf_web_foundations\").info(\"EAR onversionchange triggered\"),m==null?void 0:m(),d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_version_change_end\")};d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_success_end\");l=e;b()};p.onerror=function(){f=\"true\",d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_open_error\"),d(\"WAWorkerGlobalScope\").workerGlobalScope.clearTimeout(q),e(p.error)}}else d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_end\"),b()}catch(a){d(\"LSPlatformLsInitLog\").addPoint(\"ear_db_end\"),e(a)}})}function f(a){m=m==null?a:m}function p(a){var b=d(\"MAWTransactionMode\").READWRITE===a?\"readwrite\":\"readonly\";a=function(a){return function(){var e=o(),f=e.transaction(j,b);d(\"MAWExceededStorageQuota\").listenToQuotaExceededError(f);var g=f.objectStore(j);for(var h=arguments.length,i=new Array(h),k=0;k<h;k++)i[k]=arguments[k];return a.apply(void 0,[g].concat(i))[\"catch\"](function(a){a=d(\"MAWErrorObject\").getErrorObject(a);throw c(\"unrecoverableViolation\")(\"Error performing transaction in encryption transactor v2\",\"messenger_e2ee_web\",a?{error:a}:{})})}};return a}function q(){l!=null&&l.close();return d(\"MAWIndexedDBDeletion\").deleteDB(n,\"ear\")}g.storeName=j;g.ENCRYPTION_MAW_STORES_INDEX=k;g.getEncryptionDB=o;g.isEncryptionDBInited=a;g.makeEncryptionDB=e;g.maybeSetEncryptionDbOnVersionChange=f;g.makeEncryptionMsgrTransactor=p;g.deleteEncryptionDB=q}),98);\n__d(\"MWEARKeychainV3Errors\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.name=\"EARKeychainNotFoundError\";c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.EARKeychainNotFoundError=a}),66);\n__d(\"MWLSIndexedDBName\",[\"MAWCurrentUser\",\"MWLSDatabaseNames\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){var a=d(\"MAWCurrentUser\").getID();return d(\"MWLSDatabaseNames\").lightspeedPrefix+a}g.dbName=a}),98);\n__d(\"MWEARKeychainV3\",[\"ExecutionEnvironment\",\"FBLogger\",\"LSPlatformLsInitLog\",\"MAWCryptoConsts\",\"MAWCurrentUser\",\"MAWEARGenNewKeychainCryptoKey\",\"MAWEncyptionIndexedDbV2\",\"MAWGenKeychainCryptoKeyWithVersion\",\"MAWKeychainCrypto\",\"MWEARKeychainV3Errors\",\"MessengerWebInitData\",\"Promise\",\"ReStoreTabNotifier\",\"WAResultOrError\",\"WATimeUtils\",\"asyncToGeneratorRuntime\",\"err\",\"getErrorSafe\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j={accountKey:null,databaseEncryptionKeys:new Map(),latestVersion:d(\"MAWCryptoConsts\").VERSION},k=\"browserEncryptionMetaV2\";function a(){return l.apply(this,arguments)}function l(){l=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a=d(\"MAWCurrentUser\").getID(),e=c(\"ReStoreTabNotifier\")(\"channel-ear-keychain-v3-\"+a);e==null?void 0:e.onEventReceive(\"notifyEarKeychain\",u);d(\"LSPlatformLsInitLog\").addPoint(\"ear_init_start\");try{d(\"LSPlatformLsInitLog\").addPoint(\"ear_fetch_start\");var f=(yield p(r(\"readonly\")));d(\"LSPlatformLsInitLog\").addPoint(\"ear_fetch_end\");if(o(f)){d(\"LSPlatformLsInitLog\").addPoint(\"ear_gen_key_start\");var g=(yield c(\"MAWEARGenNewKeychainCryptoKey\")());yield new(i||(i=b(\"Promise\")))(function(a,b){var c=r(\"readwrite\"),d=c.objectStore(k).getAll();d.onerror=function(){return b(d.error)};d.onsuccess=function(){var h;f=q(d.result);h=(h=(h=f[f.length-1])==null?void 0:h.version)!=null?h:0;if(!o(f))return a();var i=babelHelpers[\"extends\"]({},g,{version:h+1});c.oncomplete=function(){f.push(babelHelpers[\"extends\"]({},i,{id:i.version})),e.postMessage(\"notifyEarKeychain\",i.version),a()};var j=c.objectStore(k).put(i);j.onerror=function(){return b(j.error)}}})[\"catch\"](function(a){throw c(\"FBLogger\")(\"messenger_e2ee_web\").catching(a).mustfixThrow(\"Failed to rotate EAR key\")});d(\"LSPlatformLsInitLog\").addPoint(\"ear_gen_key_end\")}d(\"LSPlatformLsInitLog\").addPoint(\"ear_import_start\");a=(yield (i||(i=b(\"Promise\"))).allSettled(f.map(function(a){return n(a).then(function(b){a.accountKeyString==null&&(d(\"LSPlatformLsInitLog\").addPoint(\"ear_import_entry_backfill\"),c(\"promiseDone\")(v(a)));return b})})));for(var h of a)if(h.status===\"fulfilled\"){var l=h.value;j.databaseEncryptionKeys.set(l.version,l.key)}d(\"LSPlatformLsInitLog\").addPoint(\"ear_import_end\");t();l=Array.from(a?a.values():[]).find(function(a){return a.status===\"rejected\"});if(l&&l.status===\"rejected\")throw l.reason;d(\"LSPlatformLsInitLog\").addPoint(\"ear_init_end\");return d(\"WAResultOrError\").makeResult(m())}catch(a){d(\"LSPlatformLsInitLog\").addPoint(\"ear_init_error\");d(\"LSPlatformLsInitLog\").addPoint(\"ear_init_end\");c(\"FBLogger\")(\"messenger_e2ee_web\").catching(c(\"getErrorSafe\")(a)).mustfix(\"Failed to setup EAR Keychain V3\");return d(\"WAResultOrError\").makeError(\"keychain-setup-failure\")}});return l.apply(this,arguments)}function m(){return j.latestVersion}function e(a){a===void 0&&(a=m());var b=j.databaseEncryptionKeys.get(a);if(b==null){c(\"promiseDone\")(p(r(\"readonly\")).then(function(b){var d=b.map(function(a){return a.version}).includes(a);c(\"FBLogger\")(\"messenger_e2ee_web\").info(\"EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s\",d,a,b.length)}));throw new(d(\"MWEARKeychainV3Errors\").EARKeychainNotFoundError)(\"EAR Key \"+a+\" was null. Latest version: \"+m())}return{key:b,version:a}}function n(a){return c(\"MAWGenKeychainCryptoKeyWithVersion\")(a.key,a.seed,a.version,a.accountKeyString)}function o(a){return a.length===0||!d(\"WATimeUtils\").isInFuture(a[a.length-1].expiration)}function p(a){return s(a.objectStore(k).getAll()).then(q)}function q(a){return a.sort(function(a,b){return a.version-b.version})}function r(a){var b=d(\"MAWEncyptionIndexedDbV2\").getEncryptionDB();return b.transaction(k,a,{durability:\"relaxed\"})}function s(a){return new(i||(i=b(\"Promise\")))(function(b,c){a.onsuccess=function(){return b(a.result)},a.onerror=function(){return c(a.error)}})}var t=function(){var a=Array.from(j.databaseEncryptionKeys.keys());a.length>0&&(j.latestVersion=Math.max.apply(Math,a))},u=function(a){c(\"promiseDone\")(b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){try{var b=(yield p(r(\"readonly\"))).find(function(b){return b.version===a});if(b==null)throw c(\"err\")(\"Notified new Ear Key but missing in DB\");b=(yield n(b));j.databaseEncryptionKeys.set(b.version,b.key);t()}catch(a){return c(\"FBLogger\")(\"messenger_e2ee_web\").catching(a).mustfix(\"Failed to handleNewVersion. In worker %s. In shared worker %s\",(h||(h=c(\"ExecutionEnvironment\"))).isInWorker?\"true\":\"false\",(h||(h=c(\"ExecutionEnvironment\"))).isInSharedWorker?\"true\":\"false\")}})())},v=function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){var b=(yield d(\"MAWKeychainCrypto\").generateHashString(c(\"MessengerWebInitData\").accountKey)),e=r(\"readwrite\");e.objectStore(k).put(babelHelpers[\"extends\"]({},a,{accountKeyString:b}))});return function(b){return a.apply(this,arguments)}}();g.init=a;g.getLatestVersion=m;g.getDbEncryptionKey=e}),98);\n__d(\"MWLocalStorageErrorHandler\",[\"cr:3449\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){b(\"cr:3449\")&&b(\"cr:3449\").clearLocalStorageBigValues()}g.onQuotaExceeded=a}),98);\n__d(\"MAWLocalStorage\",[\"LocalStorageWrapper\",\"MWLocalStorageErrorHandler\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"not storage found\"]);h=function(){return a};return a}function i(a){d(\"WALogger\").LOG([a])}function j(a){d(\"WALogger\").ERROR([a])}function a(){return d(\"LocalStorageWrapper\").getStorage(i)}function b(){return d(\"LocalStorageWrapper\").isLocalStorageAvailable(i)}function c(a,b,c){return d(\"LocalStorageWrapper\").setItemGuarded(a,b,c,j,d(\"MWLocalStorageErrorHandler\").onQuotaExceeded)}function e(a,b){a==null?d(\"WALogger\").ERROR(h()):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);\n__d(\"WebStorageLockManager\",[\"FBLogger\",\"LocalStorageWrapper\",\"LockManager\",\"Promise\",\"Run\",\"clearInterval\",\"err\",\"promiseDone\",\"regeneratorRuntime\",\"setInterval\",\"uuidv4\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(a){c(\"FBLogger\")(\"messenger_browser_clients\").mustfix(a)}function a(a,e){var f=\"Failed to execute 'request' on 'LockManager'\",g=\"Lock broken by another request with the 'steal' option.\",j=function(a,b,c){var d=a.get(b);if(d!=null)return d;d=c();a.set(b,d);return d};try{var k=d(\"LocalStorageWrapper\").getStorage(i),l=function(a,b){d(\"LocalStorageWrapper\").setItemGuarded(k,a,b,i,e==null?void 0:e.onQuotaExceeded)},m=function(a){d(\"LocalStorageWrapper\").removeItemGuarded(k,a,i)},n=function(a){return d(\"LocalStorageWrapper\").getItemGuarded(k,a,i)},o=function(){function a(a,b){this.lockName=a,this.tabId=b,this.lockA=this.lockName+\"-a\",this.lockB=this.lockName+\"-b\"}var d=a.prototype;d.run=function(a){return this.$1(a,0)};d.$1=function(a,d){var e=this,f=function(b){return window.requestAnimationFrame(function(){return e.$1(a,d+1).then(b)})},g=function(a){return n(a)==null};l(this.lockA,this.tabId);return new(h||(h=b(\"Promise\")))(function(b){var h=function(){try{a(),b()}finally{m(e.lockB),m(e.lockA)}};g(e.lockB)||d>10?(d>10&&c(\"FBLogger\")(\"messenger_comet\").warn(\"web-lock polyfill: Had to steal lock\"),l(e.lockB,e.tabId),n(e.lockA)===e.tabId?h():window.requestAnimationFrame(function(){n(e.lockB)===e.tabId?h():f(b)})):f(b)})};return a}(),p=function(){function a(b){this.tabId=b,this.lock=new o(a.tabsKey,b),c(\"promiseDone\")(this.$1()),this.$2(),this.keepOnlyTabs(function(b){return a.isAlive(b)})}a.isAlive=function(b){b=n(a.$3(b));return b==null?!1:Date.now()-parseFloat(b)<1e3};var e=a.prototype;e.keepOnlyTabs=function(c){return b(\"regeneratorRuntime\").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b(\"regeneratorRuntime\").awrap(this.lock.run(function(){var b;b=JSON.parse((b=n(a.tabsKey))!=null?b:\"[]\").filter(c);b.length>0?l(a.tabsKey,JSON.stringify(b)):m(a.tabsKey)}));case 2:case\"end\":return d.stop()}},null,this)};e.$2=function(){var b=a.$3(this.tabId);l(b,Date.now().toString());var e=c(\"setInterval\")(function(){l(b,Date.now().toString())},500);d(\"Run\").onUnload(function(){c(\"clearInterval\")(e),m(b)})};e.$1=function(){var e=this;return b(\"regeneratorRuntime\").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b(\"regeneratorRuntime\").awrap(this.lock.run(function(){var b;b=JSON.parse((b=n(a.tabsKey))!=null?b:\"[]\");l(a.tabsKey,JSON.stringify([].concat(b,[e.tabId])))}));case 2:d(\"Run\").onUnload(function(){return c(\"promiseDone\")(e.keepOnlyTabs(function(a){return a!==e.tabId}))});case 3:case\"end\":return f.stop()}},null,this)};a.$3=function(a){return\"$navigator.heartbeat-\"+a};return a}();p.tabsKey=\"$navigator.heartbeat-tabs\";var q=function(){function a(b,e){var f=this;this.requests=new Map();this.name=b;this.tabId=e;this.queueKey=a.storagePrefix+\"-\"+b+\"-q\";this.currentOwnerKey=a.storagePrefix+\"-\"+b+\"-o\";this.lock=new o(a.storagePrefix+\"-\"+b,this.tabId);d(\"Run\").onUnload(function(){c(\"promiseDone\")(f.keepOnlyRequests(function(a){return(a==null?void 0:a.t)!==f.tabId}))})}var e=a.prototype;e.enqueue=function(d,e,a){var f=this,g,h,i,j;return b(\"regeneratorRuntime\").async(function(k){while(1)switch(k.prev=k.next){case 0:g=c(\"uuidv4\")().toString();h={t:this.tabId,u:g};i=function(){d(null),f.markRequestReleased(g)};j=function(){d(g),f.markRequestReleased(g)};this.requests.set(g,[function(){return d(g)},function(){e(),f.markRequestReleased(g)}]);if(!((a==null?void 0:a.signal)!=null)){k.next=9;break}a.signal.onabort=function(){c(\"promiseDone\")(f.keepOnlyRequests(function(a){return(a==null?void 0:a.u)!==g})),j()};if(!a.signal.aborted){k.next=9;break}return k.abrupt(\"return\",j());case 9:k.next=11;return b(\"regeneratorRuntime\").awrap(this.lock.run(function(){var b=f.getOwner();(a==null?void 0:a.steal)===!0&&f.$1(b==null?void 0:b.u);if(b==null||(a==null?void 0:a.steal)===!0||!p.isAlive(b.t))f.$2(f.currentOwnerKey,babelHelpers[\"extends\"]({},h,(a==null?void 0:a.steal)===!0?{s:!0}:{})),f.$3(g);else if((a==null?void 0:a.ifAvailable)!==!0){b=f.getQueue();b.push(h);f.$2(f.queueKey,b)}else i()}));case 11:case\"end\":return k.stop()}},null,this)};e.dequeue=function(c){var d=this,e,f;return b(\"regeneratorRuntime\").async(function(g){while(1)switch(g.prev=g.next){case 0:f=null;g.next=3;return b(\"regeneratorRuntime\").awrap(this.lock.run(function(){var b=d.getOwner();if((b==null?void 0:b.t)!==d.tabId||(b==null?void 0:b.u)!==c)return;b=d.getQueue();b=a.getNextOwner(b);var e=b[0];b=b[1];f=e;d.$2(d.currentOwnerKey,e);d.$2(d.queueKey,b)}));case 3:this.$3((e=f)==null?void 0:e.u);case 4:case\"end\":return g.stop()}},null,this)};e.storageChangedOnOtherTab=function(a,c){var d=this;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(a===\"o\")){e.next=3;break}e.next=3;return b(\"regeneratorRuntime\").awrap(this.lock.run(function(){var a=d.getOwner();if(a==null)return;d.$3(a==null?void 0:a.u);if(a.s===!0){a=c==null?void 0:c.oldValue;if(a!=null){a=JSON.parse(a);a.t===d.tabId&&d.$1(a.u)}}}));case 3:case\"end\":return e.stop()}},null,this)};e.getQueue=function(){var a;return(a=this.$4(this.queueKey))!=null?a:[]};e.getOwner=function(){return this.$4(this.currentOwnerKey)};a.getQueueNameAndStorageType=function(b){if(!b.startsWith(a.storagePrefix))return null;var d=b.slice(a.storagePrefix.length+1,b.length-2),e=b.charAt(b.length-1);switch(e){case\"q\":case\"o\":case\"a\":case\"b\":break;default:throw c(\"err\")(\"Queue was stored with a suffix other than q or o. This is either a bug in the web lock api polyfill code, or it means that something overwrote localStorage with a weird key. Key: \"+b)}return[d,e]};a.getNextOwner=function(a){for(var b=0;b<a.length;b+=1)if(p.isAlive(a[b].t))return[a[b],a.slice(b+1)];return[null,[]]};e.$4=function(a){a=n(a);return a!=null?JSON.parse(a):null};e.$2=function(a,b){b=b==null||Array.isArray(b)&&b.length===0?null:JSON.stringify(b);b==null?m(a):l(a,b)};e.keepOnlyRequests=function(c){var d=this;return b(\"regeneratorRuntime\").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b(\"regeneratorRuntime\").awrap(this.lock.run(function(){var b=d.getOwner(),e=d.getQueue().filter(c);if(c(b))d.$2(d.queueKey,e);else{b=a.getNextOwner(e);e=b[0];b=b[1];d.$2(d.currentOwnerKey,e);d.$2(d.queueKey,b)}}));case 2:case\"end\":return e.stop()}},null,this)};e.markRequestReleased=function(a){a!=null&&this.requests[\"delete\"](a)};e.$3=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a=a[0];a()}}};e.$1=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a[0];a=a[1];a()}}};return a}();q.storagePrefix=\"$navigator.locks\";var r=function(){function a(a){this.$1=new Map(),this.storage=d(\"LocalStorageWrapper\").getStorage(i),this.tabId=a,new p(this.tabId),c(\"promiseDone\")(this.$2()),this.$3()}var e=a.prototype;e.request=function(){var a=this;for(var e=arguments.length,i=new Array(e),j=0;j<e;j++)i[j]=arguments[j];return new(h||(h=b(\"Promise\")))(function(e,j){c(\"promiseDone\")(function(){var k,l,e,m,n,o,p;return b(\"regeneratorRuntime\").async(function(q){while(1)switch(q.prev=q.next){case 0:l=i[0];e=i.length===3?i[1]:null;m=i.length===2?i[1]:i[2];if(!l.startsWith(\"-\")){q.next=5;break}throw new DOMException(\"Names cannot start with '-'.\",f);case 5:if(!((e==null?void 0:e.ifAvailable)===!0&&(e==null?void 0:e.signal)!=null)){q.next=7;break}throw new DOMException(\"The 'signal' and 'ifAvailable' options cannot be used together.\",f);case 7:n=a.$4(l);q.next=10;return b(\"regeneratorRuntime\").awrap(new(h||(h=b(\"Promise\")))(function(a){c(\"promiseDone\")(n.enqueue(a,function(){j(new DOMException(g,f))},e))}));case 10:o=q.sent;if(!((e==null?void 0:(k=e.signal)==null?void 0:k.aborted)===!0)){q.next=13;break}throw new DOMException(\"The request was aborted.\",f);case 13:q.prev=13;q.next=16;return b(\"regeneratorRuntime\").awrap(m(o!=null?{mode:(p=e==null?void 0:e.mode)!=null?p:d(\"LockManager\").LockMode.Exclusive,name:l}:null));case 16:q.prev=16;if(!(o!=null)){q.next=20;break}q.next=20;return b(\"regeneratorRuntime\").awrap(n.dequeue(o));case 20:n.markRequestReleased(o);return q.finish(16);case 22:case\"end\":return q.stop()}},null,this,[[13,,16,22]])}(),e,j)})};e.query=function(){var a=[],c=[];for(var e=this.$5(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;if(i!=null){var j={mode:d(\"LockManager\").LockMode.Exclusive,name:i.name};if(i.getOwner()!=null)a.push(j);else for(var i=i.getQueue(),k=Array.isArray(i),l=0,i=k?i:i[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var m;if(k){if(l>=i.length)break;m=i[l++]}else{l=i.next();if(l.done)break;m=l.value}m;c.push(j)}}}return(h||(h=b(\"Promise\"))).resolve({held:a,pending:c})};e.$4=function(a){var b=this;return j(this.$1,a,function(){return new q(a,b.tabId)})};e.$3=function(){var a=this;window.addEventListener(\"storage\",function(b){var d=b.key;if(b.storageArea!==a.storage||d==null)return;d=q.getQueueNameAndStorageType(d);if(d==null)return;var e=d[0];d=d[1];c(\"promiseDone\")((e=a.$4(e))==null?void 0:e.storageChangedOnOtherTab(d,b))})};e.$2=function(){return b(\"regeneratorRuntime\").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b(\"regeneratorRuntime\").awrap((h||(h=b(\"Promise\"))).all(this.$5().map(function(a){return a==null?void 0:a.keepOnlyRequests(function(a){return a==null?!1:p.isAlive(a.t)})})));case 2:case\"end\":return a.stop()}},null,this)};e.$5=function(){var a=this;return k==null?[]:Object.keys(k).map(function(b){b=q.getQueueNameAndStorageType(b);if(b==null)return;b=b[0];return a.$4(b)})};return a}();return new r(a)}catch(a){return null}}g.make=a}),98);\n__d(\"ReStoreLocalStorageQuotaExceed\",[\"FBLogger\",\"recoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"Failed to execute 'setItem' on 'Storage'\",i=\"ReStoreLocalStorageQuotaExceed\";function j(){try{var a=window.localStorage,b=[],d=[];if(a!=null&&a.length!==0)for(var e in a){b.length===0&&d.length===0&&(e.includes(\"falco_queue_log\")&&d.push(e));if(!Object.prototype.hasOwnProperty.call(a,e))continue;var f=((a[e]||\"\").length+e.length)*2;f\/1024>2e3&&b.push(e)}c(\"FBLogger\")(\"messenger_web_product\").mustfix(h+\": QuotaExceeded - trying to clean up %s or %s\",b.join(\",\"),d.join(\",\"));return b.length!==0?b:d}catch(a){c(\"FBLogger\")(\"messenger_web_product\").mustfix(\"Error getting local storage big values for cleanup.\");return[]}}function a(){try{var a=window.localStorage,b=j();b.forEach(function(b){a.removeItem(b)})}catch(a){c(\"recoverableViolation\")(\"Couldn't remove vals from localStorage\",\"messenger_web_product\",a)}}b=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;b=h+\": \"+b+\"; Keys to delete: \"+j().join(\",\");c=a.call(this,b)||this;c.message=b;c.name=i;return c}return b}(babelHelpers.wrapNativeSuper(Error));g.ERROR_NAME=i;g.getLocalStorageValuesToRemoveOnExceed=j;g.clearLocalStorageBigValues=a;g.ReStoreLocalStorageQuotaExceed=b}),98);\/*FB_PKG_DELIM*\/\n__d(\"WABaseGlobals\",[\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=null;function a(a){h=a}function i(){if(h==null)throw c(\"WAErr\")(\"Trying to access WAGlobals before being set\");return h}function b(a){var b=i();b.myJids=a}function d(){var a;a=(a=i().myJids)==null?void 0:a.deviceJid;if(a==null)throw c(\"WAErr\")(\"Trying to access myDeviceJid, but it's not set\");return a}function e(){var a;a=(a=i().myJids)==null?void 0:a.userJid;if(a==null)throw c(\"WAErr\")(\"Trying to access myUserJid, but it's not set\");return a}function f(){return i().db}function j(){return i().jidUtils}function k(){return i().config}function l(){return i().qpl}function m(a,b){return i().runInTransaction(a,b)}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=d;g.getMyUserJid=e;g.getDbImpls=f;g.getJidUtilsApi=j;g.getConfig=k;g.getQplConfig=l;g.runInTransaction=m}),98);\n__d(\"WAAssertUnreachable\",[\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){throw c(\"WAErr\")(\"Impossible value, the default statement should never be reached for value: \"+a)}g[\"default\"]=a}),98);\n__d(\"WAJids\",[\"WAAssertUnreachable\",\"WAErr\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=0,i=\"@me\",j=\"@system\",k=\"status@broadcast\",aa=\"0@s.whatsapp.net\",l=\"@g.us\",m=\/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$\/,n=\"@msgr\",ba=\"msgr\",o=\"@interop\",ca=\"interop\",da=\"@call\",p=\/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$\/,q=\/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$\/,r=\/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$\/,s=\/^([1-9][0-9]{0,19})@msgr$\/,t=\/^([1-9][0-9]{0,19})(:0)?@msgr$\/,ea=\"@s.whatsapp.net\",fa=\"s.whatsapp.net\",u=\"@s.whatsapp.net\",v=\"s.whatsapp.net\",w=\"lid\",ga=\"@call\",x=\"@newsletter\",y=\/^([1-9][0-9]{0,19})@newsletter$\/,z=\/^(0|((?!10)[1-9][0-9]{4,19}(\\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$\/,A=\/^(0|((?!10)[1-9][0-9]{4,19})(\\.[0-9]{1,2})?)@s.whatsapp.net$\/,B=\"@lid\",ha=\"lid\",C=\/^([1-9][0-9]{0,14})@lid$\/,D=\/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$\/,ia=\"@broadcast\",E=\/^(status|location|[1-9][0-9]{0,19})@broadcast$\/,F=\/^([0-9a-fA-F]{18,32})@call$\/,G=\"@hosted\",H=\"hosted\",I=\/^(((?!10)[1-9][0-9]{4,19})):99@hosted$\/,J=\"@hosted.lid\",K=\"hosted.lid\",L=\/^([1-9][0-9]{0,14}):99@hosted.lid$\/,ja=\"16505361212\"+u,ka=\/([0-9a-zA-Z-:]+)@(g\\.us|call|s\\.whatsapp\\.net|broadcast|msgr|lid)\/g;function a(a){return\"\"+a+u}function b(a){return\"\"+a+B}function M(a){return\"\"+a+n}function d(a){return a.endsWith(l)?a:\"\"+a+l}function e(a){return a.endsWith(x)?a:\"\"+a+x}function f(a){return a.endsWith(G)?a:\"\"+a+G}function la(a){return a.endsWith(J)?a:\"\"+a+J}function ma(){return l}function N(a){if(a.endsWith(u))return a.slice(0,-u.length);else if(a.endsWith(n))return a.slice(0,-n.length);else if(a.endsWith(o))return a.slice(0,-o.length);else if(a.endsWith(B))return a.slice(0,-B.length);else throw c(\"WAErr\")('userIdFromJid called with non-user jid \"'+a+'\"')}function na(a,b){return Y(N(a)+\":\"+b+u)}function oa(a,b){return Z(N(a)+\":\"+b+n)}function O(a,b){return vb(Q(a)+\":\"+b+B)}function pa(a,b){return X(N(a)+\":\"+b+qb(a))}function qa(a){return\"\"+a+ia}function P(a){return a.split(\"@\")[0]}function ra(a){a=a.split(\"@\")[0];a=a.split(\":\");var b=a[0];a=a[1];a=parseInt(a,10);return{userId:b,deviceID:a}}function sa(a){a=ra(a);return a.deviceID}function ta(a,b){if(a===i||a===j)return b;else return P(a)}function ua(a){return a===i||a===j?null:a}function va(a){if(a===i||a===j)return null;return!a.endsWith(u)?null:a}function wa(a){if(!a.endsWith(u))throw c(\"WAErr\")('phoneNumberFromJid called with non-user jid \"'+a+'\"');return a.slice(0,-u.length)}function xa(a){if(a.endsWith(u))return wa(a);else if(a.endsWith(B))return Q(a);throw c(\"WAErr\")('lidOrPhoneFromUserJid called with non phone or lid jid \"'+a+'\"')}function ya(a){return a.endsWith(u)||a.endsWith(o)||a.endsWith(n)||a.endsWith(B)?a:null}function za(a){return a.endsWith(u)?a:null}function Aa(a){return a===k?null:$(a)}function Ba(a){return a===k?null:$(a)}function Ca(a){return a===k?k:null}function Q(a){if(!a.endsWith(B))throw c(\"WAErr\")('lidFromLidUserJid called with non-LidUserJid \"'+a+'\"');return a.slice(0,-B.length)}function R(a){a=a.split(\"@\");var b=a[0];a=a[1];b=b.split(\":\")[0];b=b.split(\".\")[0];a===H&&(a=v);a===K&&(a=w);return wb(b+\"@\"+a)}function Da(a){return R(a)}function Ea(a){return R(a)}function Fa(a){if(a.jidType===\"phoneDevice\")return a.deviceJid;else if(a.jidType===\"interopDevice\")return a.deviceJid;else if(a.jidType===\"lidDevice\")return a.deviceJid;else if(a.jidType===\"msgrDevice\")return a.deviceJid;else if(a.jidType===\"lidUser\")return a.userJid;else if(a.jidType===\"interopUser\")return a.userJid;else if(a.jidType===\"msgrUser\")return a.userJid;else if(a.jidType===\"phoneUser\")return a.userJid;else if(a.jidType===\"group\")return a.groupJid;else if(a.jidType===\"status\")return a.statusJid;else if(a.jidType===\"call\")return a.callJid;else if(a.jidType===\"newsletter\")return a.newsletterJid;else if(a.jidType===\"hosted\")return a.hostedDeviceJid;else if(a.jidType===\"hostedLid\")return a.hostedLidDeviceJid;else{a.jidType;return a.broadcastJid}}function Ga(a){return Y(N(a)+\":\"+h+u)}function Ha(a){return Z(N(a)+\":\"+h+n)}function Ia(a){return O(a,h)}function Ja(a){return sa(a)===h}function Ka(a){return Ab(a)}function La(a){return a}function S(a){a=a.split(\"@\");var b=a[0];a=a[1];b=b.split(\":\");var c=b[0];b=b[1];c=c.split(\".\");var d=c[0];c=c[1];return{user:d,device:b,agent:c,server:a}}function Ma(a){a=S(a);var b=a.user,c=a.agent;c=c===void 0?\"0\":c;var d=a.device;d=d===void 0?\"0\":d;a=a.server;return b+\".\"+c+\":\"+d+\"@\"+a}function Na(a){switch(a.jidType){case\"interopUser\":return a.userJid;case\"lidUser\":return a.userJid;case\"msgrUser\":return a.userJid;case\"phoneUser\":return a.userJid;case\"group\":return a.groupJid;case\"status\":return a.statusJid;case\"interopDevice\":return a.deviceJid;case\"lidDevice\":return a.deviceJid;case\"msgrDevice\":return a.deviceJid;case\"phoneDevice\":return a.deviceJid;case\"broadcast\":return a.broadcastJid;case\"call\":return a.callJid;case\"newsletter\":return a.newsletterJid;case\"hosted\":return a.hostedDeviceJid;case\"hostedLid\":return a.hostedLidDeviceJid;default:return c(\"WAAssertUnreachable\")(a.jidType)}}function Oa(a){if(a===k)return{jidType:\"status\",statusJid:k};else if(A.test(a))return{jidType:\"phoneUser\",userJid:xb(a)};else if(q.test(a))return{jidType:\"interopUser\",userJid:yb(a)};else if(s.test(a))return{jidType:\"msgrUser\",userJid:zb(a)};else if(t.test(a)){var b=a.substr(0,a.indexOf(\":\"));return{jidType:\"msgrUser\",userJid:M(b)}}else if(z.test(a))return{jidType:\"phoneDevice\",deviceJid:Y(a)};else if(p.test(a))return{jidType:\"interopDevice\",deviceJid:ub(a)};else if(r.test(a))return{jidType:\"msgrDevice\",deviceJid:Z(a)};else if(m.test(a))return{jidType:\"group\",groupJid:a.endsWith(l)?a:\"\"+a+l};else if(E.test(a))return{jidType:\"broadcast\",broadcastJid:a};else if(F.test(a))return{jidType:\"call\",callJid:a};else if(C.test(a))return{jidType:\"lidUser\",userJid:a};else if(D.test(a))return{jidType:\"lidDevice\",deviceJid:a};else if(y.test(a))return{jidType:\"newsletter\",newsletterJid:a};else if(I.test(a))return{jidType:\"hosted\",hostedDeviceJid:a};else if(L.test(a))return{jidType:\"hostedLid\",hostedLidDeviceJid:a};else return{jidType:\"unknown\"}}function Pa(a){return a===\"status@broadcast\"?a:null}function Qa(a){if(A.test(a)||q.test(a)||s.test(a)||C.test(a))return a;else if(t.test(a)){a=a.substr(0,a.indexOf(\":\"));return M(a)}else return null}function Ra(a){return E.test(a)?a:null}function Sa(a){if(z.test(a)||r.test(a)||p.test(a)||D.test(a)||I.test(a)||L.test(a))return a;return A.test(a)?rb(a):null}function Ta(a){return p.test(a)?a:null}function T(a){return m.test(a)?a:null}function Ua(a){return Pa(a)||T(a)||Ra(a)?a:null}function Va(a){return F.test(a)?a:null}function Wa(a){return a===\"s.whatsapp.net\"||a===\"g.us\"?a:null}function Xa(a){return Qa(a)||T(a)}function Ya(a){return y.test(a)?a:null}function Za(a){return I.test(a)?a:null}function $a(a){return L.test(a)?a:null}function ab(a){return ya(a)==null?$(a):null}function bb(a){a=S(a);var b=a.user,c=a.device;c=c===void 0?\"0\":c;a=a.server;return Y(b+\":\"+c+\"@\"+a)}function cb(a){if(a.endsWith(l))return a.slice(0,-l.length);else throw c(\"WAErr\")('groupId called with non-group jid \"'+a+'\"')}function db(a){var b=Oa(a);if(b.jidType===\"unknown\")return a;if(b.jidType===\"status\")return b.statusJid;b.jidType;return Na(b).replace(\/^([^@]*)([^@][^@][^@][^@])@(.*)$\/,\"...$2@$3\")}function eb(a){return!a.includes(\"@\")?a:a.replace(ka,db)}function U(a){if(a.endsWith(l))return $(a);else return null}function V(a,b){if(a.endsWith(u))return b.phoneUser(a);else if(a.endsWith(n))return b.msgrUser(a);else if(a.endsWith(o))return b.interopUser(a);else if(a.endsWith(B))return b.lidUser(a);else if(U(a)!=null)return b.group($(a));throw c(\"WAErr\")(\"Can not switch on chat jid \"+a)}function fb(a,b){if(a.endsWith(n))return b.user(a);else if(U(a)!=null)return b.group(a);throw c(\"WAErr\")(\"Can not switch on chat jid \"+a)}function W(a,b){if(a.endsWith(u))return b.user(a);else if(U(a)!=null)return b.group(a);throw c(\"WAErr\")(\"Can not switch on chat jid \"+a)}function gb(a,b){return V(a,{lidUser:function(a){return b.user(a)},interopUser:function(a){return b.user(a)},msgrUser:function(a){return b.user(a)},phoneUser:function(a){return b.user(a)},group:function(a){return b.group(a)}})}function hb(a,b){return a===k?b.status():W(a,{user:b.user,group:b.group})}function ib(a,b){return a===k?b.status():V(a,{interopUser:b.interopUser,phoneUser:b.phoneUser,msgrUser:b.msgrUser,lidUser:b.lidUser,group:b.group})}function jb(a,b){return a===k?b.multicast(k):W(a,{user:b.user,group:b.multicast})}function kb(a){return a.endsWith(B)}function lb(a){return a===\"@me\"}function mb(a){return a===\"@system\"}function nb(){return n}function ob(){return u}function pb(){return ea}function qb(a){if(a.endsWith(u))return u;else if(a.endsWith(n))return n;else if(a.endsWith(B))return B;else throw c(\"WAErr\")('userDomainFromJid called with non-user jid \"'+a+'\"')}function rb(a){return X(N(a)+\":\"+h+qb(a))}function sb(a){a=a.platform;var b=a===\"msgr\"?n:u,c=a===\"msgr\"?da:ga;function d(a){return\"\"+a+b}function e(){return b}function f(){return c}return{toUserJid:d,getUserDomain:e,getGroupCallDomain:f}}function tb(a){return a}function X(a){return a}function Y(a){return a}function Z(a){return a}function ub(a){return a}function vb(a){return a}function wb(a){return a}function xb(a){return a}function yb(a){return a}function zb(a){return a}function $(a){return a}function Ab(a){return a}function Bb(a){return a}function Cb(a){return a}function Db(a){return a}function Eb(a){return V(a,{group:function(a){return cb(a)},lidUser:function(a){return N(a)},interopUser:function(a){return N(a)},phoneUser:function(a){return N(a)},msgrUser:function(a){return N(a)}})}g.DEFAULT_DEVICE_ID=h;g.AUTHOR_ME=i;g.AUTHOR_SYSTEM=j;g.STATUS_JID=k;g.PSA_JID=aa;g.MSGR_USER_DOMAIN=n;g.MSGR_USER_JID_SUFFIX=ba;g.INTEROP_DOMAIN=o;g.INTEROP_USER_JID_SUFFIX=ca;g.WA_SERVER_JID_SUFFIX=fa;g.WA_USER_DOMAIN=u;g.WA_USER_JID_SUFFIX=v;g.WA_LID_SUFFIX=w;g.WA_NEWSLETTER_JID_DOMAIN=x;g.LID_DOMAIN=B;g.LID_SUFFIX=ha;g.HOSTED_DOMAIN=G;g.HOSTED_SUFFIX=H;g.HOSTED_LID_DOMAIN=J;g.HOSTED_LID_SUFFIX=K;g.SURVEY_USER_JID=ja;g.toPhoneUserJid=a;g.toLidUserJid=b;g.toMsgrUserJid=M;g.toGroupJid=d;g.toNewsletterJid=e;g.toHostedDeviceJid=f;g.toHostedLidDeviceJid=la;g.getGroupDomain=ma;g.userIdFromJid=N;g.toPhoneDeviceJid=na;g.toMsgrDeviceJid=oa;g.toLidDeviceJid=O;g.toDeviceJid=pa;g.toBroadcastJid=qa;g.extractUserId=P;g.extractDeviceIDParts=ra;g.extractDeviceId=sa;g.authorToUserId=ta;g.authorAsUserJid=ua;g.authorAsPhoneUserJid=va;g.phoneNumberFromJid=wa;g.lidOrPhoneFromUserJid=xa;g.interpretAsUserJid=ya;g.interpretAsPhoneUserJid=za;g.asChatJid=Aa;g.asPhoneChatJid=Ba;g.asStatusJid=Ca;g.lidFromLidUserJid=Q;g.extractUserJid=R;g.extractPhoneUserJid=Da;g.extractLidUserJid=Ea;g.extractJidFromJidWithType=Fa;g.defaultPhoneDeviceJidForUser=Ga;g.defaultMsgrDeviceJidForUser=Ha;g.defaultLidDeviceJidForLidUserJid=Ia;g.isPrimaryDevice=Ja;g.interpretAsDeviceId=Ka;g.interpretAsNumber=La;g.parseJidParts=S;g.fullFormDeviceJidString=Ma;g.extractFromJid=Na;g.interpretAndValidateJid=Oa;g.validateStatusJid=Pa;g.validateUserJid=Qa;g.validateBroadcastJid=Ra;g.validateDeviceJid=Sa;g.validateInteropDeviceJid=Ta;g.validateGroupJid=T;g.validateMulticastJid=Ua;g.validateCallJid=Va;g.validateDomainJid=Wa;g.validateChatJid=Xa;g.validateNewsletterJid=Ya;g.validateHostedDeviceJid=Za;g.validateHostedLidDeviceJid=$a;g.asMulticastJid=ab;g.stripAgentIdFromPhoneDeviceJid=bb;g.groupIdFromJid=cb;g.sanitizeJidForLogging=db;g.maybeSanitizeLogLineText=eb;g.interpretAsGroupJid=U;g.switchOnChatJidType=V;g.switchOnMsgrChatJidType=fb;g.switchOnPhoneChatJidType=W;g.switchOnUserChatJidType=gb;g.switchOnPhoneJidType=hb;g.switchOnJidType=ib;g.switchOnMulticastJidType=jb;g.isLidUser=kb;g.isAuthorMe=lb;g.isAuthorSystem=mb;g.getMsgrUserDomain=nb;g.getWhatsappUserDomain=ob;g.getServerDomain=pb;g.defaultDeviceJidForUser=rb;g.createJidUtils=sb;g.unsafeCoerceToChatJid=tb;g.unsafeCoerceToDeviceJid=X;g.unsafeCoerceToPhoneDeviceJid=Y;g.unsafeCoerceToMsgrDeviceJid=Z;g.unsafeCoerceToInteropDeviceJid=ub;g.unsafeCoerceToLidDeviceJid=vb;g.unsafeCoerceToUserJid=wb;g.unsafeCoerceToPhoneUserJid=xb;g.unsafeCoerceToInteropUserJid=yb;g.unsafeCoerceToMsgrUserJid=zb;g.unsafeCoerceToGroupJid=$;g.unsafeCoerceToDeviceId=Ab;g.unsafeCoerceToNewsletterJid=Bb;g.unsafeCoerceToHostedDeviceJid=Cb;g.unsafeCoerceToHostedLidDeviceJid=Db;g.threadIdForChatJid=Eb}),98);\n__d(\"WAGlobals\",[\"WABaseGlobals\",\"WAErr\",\"WAJids\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\"\"]);h=function(){return a};return a}var i=null;function a(a){i=a,d(\"WABaseGlobals\").setGlobals(a)}function j(){if(i==null)throw c(\"WAErr\")(\"WaMsgr api called before set\");return i}function b(a,b){var d=j();if(d.myJids!=null)throw c(\"WAErr\")(\"Trying to set UserJid and DeviceJid but they are already set\");d.myJids={userJid:a,deviceJid:b}}function k(){var a;a=(a=j().myJids)==null?void 0:a.deviceJid;if(a==null)throw c(\"WAErr\")(\"Trying to access myDeviceJid, but it's not set\");return a}function e(){var a;a=(a=j().myJids)==null?void 0:a.userJid;if(a==null)throw c(\"WAErr\")(\"Trying to access myUserJid, but it's not set\");return a}function f(){return j().db}function l(a){return d(\"WAJids\").extractUserJid(a)===d(\"WAJids\").extractUserJid(k())}function m(){return j().jidUtils}function n(){return j().crypto.manager}function o(){return j().config}function p(){return j().dependencies}function q(a,b,c){return j().runInTransaction(a,b,c)}var r=\"WAOneQueue is not defined\";function s(){var a=j().waOneQueue;if(a==null){d(\"WALogger\").ERROR(h(),r);throw c(\"WAErr\")(r)}return a}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=k;g.getMyUserJid=e;g.getDbImpls=f;g.isPeerDevice=l;g.getJidUtilsApi=m;g.DEPRECATED_getCryptoManager=n;g.getConfig=o;g.getDependencies=p;g.runInTransaction=q;g.getWaOneQueue=s}),98);\n__d(\"LSMessageThreadUnsendabilityStatus\",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_UNSEND:0,DENY_FOR_SPECIFIC_IDS:1,DENY_IF_THREAD_CONTAINS_PAU:2,DENY_IF_THREAD_CONTAINS_WORK_USER:3,DENY_IF_PAGE_THREAD:4,DENY_IF_MARKETPLACE_THREAD:5,DENY_IF_CANNOT_LOAD_THREAD:6,DENY_IF_THREAD_CONTAINS_WORK_USER_FAILING_KILLSWITCH:7,DENY_IF_CANONICAL_THREAD_CONTAINS_BLOCKED_USERS:8,DENY_IF_CANNOT_REPLY_TO_VIEWER_THREAD:9,DENY_IF_UNCONNECTED_THREAD:10});f[\"default\"]=a}),66);\n__d(\"MessagingThreadSubtype\",[],(function(a,b,c,d,e,f){a=Object.freeze({ADMIN_MODEL_V2_THREAD:1,FB_GROUP_CHAT:2,MARKETPLACE_THREAD:3,SCHOOL_CHAT:4,DEPRECATED__WORK_SYNCED_CHAT:5,ADMIN_NOT_SUPPORTED_THREAD:6,BELL_SYNCED_CHAT:7,GAMES_APP_THREAD:8,VAULT_CHAT:9,VERSE_CHAT:10,GENERIC_COMMERCE_THREAD:11,USER_JOB_THREAD:12,COWORKER_GROUP_THREAD:13,APPROVAL_ENFORCED_CHATROOM_THREAD:14,PARENT_APPROVED_SHEPHERD_MANAGED_THREAD:15,CAMPUS_GROUP_THREAD:16,LOCAL_COMMUNITIES_THREAD:17,CHAT_FOR_ROOM_THREAD:18,GAMING_PLAY_SQUAD:19,CHAT_FOR_GROUP_ADMIN_TO_MEMBER_THREAD:20,EITM_BACKED_IG_1TO1_THREAD:21,LEARNING_SPACE:23,E2EE_GROUP_THREAD_METADATA:24,IGD_BC_PARTNERSHIP:25,E2EE_1TO1_THREAD_METADATA:26,JOBS_CAREER_GROUP_THREAD:27,IG_CREATOR_SUBSCRIBER_GROUP_THREAD:28,IG_CREATOR_SUBSCRIBER_BROADCAST_CHAT:29,BUSINESS_SUPPORT_THREAD:30,TAGGED_PII_DATA:31,IG_DISCOVERABLE_CHAT_THREAD:32,SUPPORT_MESSAGING_THREAD:33,DISCOVERABLE_PUBLIC_CHAT:34,DISCOVERABLE_PUBLIC_BROADCAST_CHAT:35,DISCOVERABLE_PUBLIC_CHAT_V2:36,IG_DISCOVERABLE_CHAT_THREAD_V2:37,OCULUS_MEDIA_MESSAGING:38,WORK_CHAT_THREAD_CENTRIC:39,COMMUNITY_MESSAGING_PUBLIC_THREAD:40,COMMUNITY_MESSAGING_PRIVATE_THREAD:41,COMMUNITY_MESSAGING_ADMOD_THREAD:42,COMMUNITY_MESSAGING_BROADCAST_THREAD:43,IG_E2EE_GROUP_THREAD_METADATA:44,IG_NFT_BROADCAST_CHAT:45,STANDALONE_COMMUNITY_STANDARD_THREAD:46,IGD_GROUP:47,WORKCHAT_GROUP_THREAD:48,WORKROOM_GROUP_THREAD:49,OCULUS_GROUP_THREAD:50,INTEROP_GROUP:51,IG_BTV_E2EE_1TO1_THREAD_METADATA:52,COMMUNITY_MESSAGING_HELPER_BOT_THREAD:53,COMMUNITY_MESSAGING_SUB_THREAD:54,IG_GROUP_PROFILES:55,IG_PRIVATE_EVENT:56,WA_GENAI_BOT_MAILBOX_THREAD:57,MESSENGER_GENAI_BOT_MAILBOX_THREAD:58,IG_GENAI_BOT_MAILBOX_THREAD:59,E2EE_COMMUNITY_CHAT_METADATA:60,IG_SUBSCRIBER_SOCIAL_CHANNEL:61,IG_SOCIAL_CHANNEL:62,GENERIC_GENAI_BOT_MAILBOX_THREAD:63,GENAI_IMAGINE:64,FB_GENAI_BOT_MAILBOX_THREAD:65,ABRA_GENAI_BOT_MAILBOX_THREAD:66,GENAI_STUDIO_BOT_MAILBOX_THREAD:67,ONE_TO_ONE:1001,PARENT_APPROVED_ONE_TO_ONE:1002,IG_ONLY_ONE_TO_ONE:1003,INTEROP_ONE_TO_ONE:1004,WHATSAPP_ONE_TO_ONE:1005,WORKCHAT_ONE_TO_ONE:1006,OC_PROXY_ONE_TO_ONE:1007,MARKETPLACE_ASSISTANT_ONE_TO_ONE:1008,PAGE_TO_USER:1009,PAGE_TO_PAGE:1010,MESSENGER_AI_BOT_ONE_TO_ONE:1011,IG_AI_BOT_ONE_TO_ONE:1012,IG_CREATOR_AGENT_SANDBOX:1013,IG_USER_GENERATED_AI_BOT_ONE_TO_ONE:1014,OCULUS:2001});f[\"default\"]=a}),66);\n__d(\"LSMessagingThreadTypeUtil\",[\"I64\",\"LSIntEnum\",\"LSMessageThreadUnsendabilityStatus\",\"LSThreadBitOffset\",\"MWCMIsAnyCMThread\",\"MessagingThreadSubtype\",\"MetaConfig\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(2))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(8))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(16))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(5))||c(\"MWCMIsAnyCMThread\")(a)||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(3))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(150))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(151))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(154))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(155))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(152))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(153))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(26))}function j(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(1))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(7))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(10))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(13))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(201))}function b(a){return j(a)||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(15))}function k(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(15))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(16))}function e(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(15))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(16))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(1))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(201))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(2))}function f(a){return a===\"e2ee_cutover\"||a===\"inbox\"}function l(a,b){b===void 0&&(b=!0);return!b&&(h||(h=d(\"I64\"))).equal(a.parentThreadKey,(i||(i=d(\"LSIntEnum\"))).ofNumber(0))?!1:d(\"LSThreadBitOffset\").has(21,a)}function m(a){return a!=null&&(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"MessagingThreadSubtype\").IGD_BC_PARTNERSHIP))}function n(a){return l(a,!1)}function o(a){return(h||(h=d(\"I64\"))).equal(a.parentThreadKey,(i||(i=d(\"LSIntEnum\"))).ofNumber(-3))}function p(a){return a==null?!1:(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"MessagingThreadSubtype\").BUSINESS_SUPPORT_THREAD))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"MessagingThreadSubtype\").SUPPORT_MESSAGING_THREAD))}function q(a){var b=(h||(h=d(\"I64\"))).equal(a.threadType,(i||(i=d(\"LSIntEnum\"))).ofNumber(2)),c=(h||(h=d(\"I64\"))).equal(a.threadType,(i||(i=d(\"LSIntEnum\"))).ofNumber(1))&&!K(a);return!p(a.threadSubtype)&&(b||c)}function r(a){return a==null?!1:(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"MessagingThreadSubtype\").PAGE_TO_USER))}function s(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(150))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(154))&&c(\"MetaConfig\")._(\"36\")}function t(a){return(v(a)||w(a))&&c(\"MetaConfig\")._(\"32\")}function u(a){return(v(a)||w(a))&&!c(\"MetaConfig\")._(\"32\")}function v(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(152))}function w(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(153))}function x(a){return((h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(155))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(154)))&&c(\"MetaConfig\")._(\"36\")}function y(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(154))&&c(\"MetaConfig\")._(\"36\")}function z(a){return a==null?!1:(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(150))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(154))}function A(a){return z(a)||t(a)}function B(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(26))}function C(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(17))}function D(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(19))}function E(a){return a==null?!1:(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(151))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(155))}function F(a){return a==null?!1:E(a)||w(a)}function G(a){return(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(201))}function H(a){return d(\"LSThreadBitOffset\").has(183,a)}function I(a){return k(a)||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(1))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(2))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(3))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(4))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(5))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(6))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(10))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(11))}function J(a){return A(a)||E(a)||w(a)||c(\"MWCMIsAnyCMThread\")(a)||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(17))||B(a)}function K(a){return(h||(h=d(\"I64\"))).equal(a.threadType,(i||(i=d(\"LSIntEnum\"))).ofNumber(1))&&a.cannotUnsendReason!=null&&(h||(h=d(\"I64\"))).equal(a.cannotUnsendReason,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"LSMessageThreadUnsendabilityStatus\").DENY_IF_PAGE_THREAD))}function L(a){return a!=null&&((h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"MessagingThreadSubtype\").WORKCHAT_GROUP_THREAD))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"MessagingThreadSubtype\").WORKROOM_GROUP_THREAD))||(h||(h=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(c(\"MessagingThreadSubtype\").WORKCHAT_ONE_TO_ONE)))}g.isGroup=a;g.isOpenOneToOne=j;g.isOneToOne=b;g.isSecure=k;g.isRecentsSectionAllowedTypes=e;g.isMessengerOrE2EEInbox=f;g.isMessageRequest=l;g.isPartnership=m;g.isIGDMessageRequest=n;g.isHiddenRequest=o;g.isBusinessSupportThread=p;g.isOpenFnFThread=q;g.isPageToUserThread=r;g.isJoinedSocialChannel=s;g.isDiscoverablePublicBroadcastChannel=t;g.isDiscoverablePublicBroadcastChannelWithNoAccessibility=u;g.isJoinedDiscoverablePublicBroadcastChannel=v;g.isUnjoinedDiscoverablePublicBroadcastChannel=w;g.isSocialChannelV2=x;g.isJoinedSocialChannelV2=y;g.isSocialChannel=z;g.isDiscoverableChannel=A;g.isCMSubthread=B;g.isCMFolder=C;g.isCMGroupUnjoined=D;g.isSocialChannelUnjoined=E;g.isChannelPreview=F;g.isAiBot=G;g.isAiBotSummoning=H;g.isPrivateThread=I;g.isPublicCMThread=J;g.isThreadForPage=K;g.isWorkThread=L}),98);\n__d(\"WATimeUtils\",[\"Promise\",\"WAHex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=60,j=5*i,k=60*i,l=24*k,m=7*l,n=365*l,o=60*1e3,p=k*1e3,q=24*p,r=7*q,s=1<<31,t=~s,u=s+1,v={time:0,day:-4},w=0;function a(){return w}function c(a){w=a}function e(a){return Z(a).toUTCString()}function x(a){a=a|0;return Math.max(u,Math.min(a,t))}function y(a){return x(a\/1e3)}function f(a){if(typeof a!==\"number\")if(d(\"WAHex\").hexLongIsNegative(a))return u;else return t;else return x(a)}function z(a){return a==null?a:a>t?y(a):x(a)}function A(){return B($()-w*1e3)}function B(a){return a}function C(a){return a}function D(a){return B(a*1e3)}function E(a){return a<u||a>t}function F(a,b){var c=K();a=Math.max(a+b-c,0);return Math.min(1e3*a,~(1<<31))}function G(a,b){b=b!=null?b:K();return x(Math.ceil(b+Math.max(a,0)))}function H(a,b){b=b!=null?b:K();return x(Math.ceil(b-Math.max(a,0)))}function I(a){a=Math.max(a-K(),0);return Math.min(1e3*a,~(1<<31))}function J(a){var c=I(a);return new(h||(h=b(\"Promise\")))(function(a){return void setTimeout(a,c)})}function K(){return x(Date.now()\/1e3-w)}function L(){return x(Date.now()\/1e3)}function M(){return x(new Date().setHours(0,0,0,0)\/1e3-w)}function N(a){return x(Z(a).setHours(0,0,0,0)\/1e3-w)}function O(){return Date.now()-w*1e3}function P(a){return Math.max(a-K(),0)}function Q(a){return P(a)>0}function R(){return performance.now()}function S(a){return Math.floor(performance.now()-a)}function T(a,b){return a<b?a:b}var U=function(){function a(){var a=R();this.$1=a;this.$2=a}var b=a.prototype;b.reset=function(){this.$2=R()};b.elapsed=function(){return S(this.$2)};b.cumulative=function(){return S(this.$1)};return a}();function V(a){return Math.max(K()-a,0)}function W(){return new Date()}function X(a,b,c){return Math.abs(a-b)<=c}function Y(a,b){return X(K(),a,b)}function Z(a){return new Date(a*1e3)}function aa(a,b){if(Math.abs(a-b)>l)return!1;a=v.time===a?v.day:Z(a+w).getDay();var c=v.time===b?v.day:Z(b+w).getDay();v.time=b;v.day=c;return a===c}function ba(a){a=a-K();return a<=l}function ca(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(x(a)*1e3):null}function $(){return Date.now()}function da(a,b){a=Math.abs(a-b);return Math.ceil(a\/q)}g.MINUTE_SECONDS=i;g.FIVE_MINUTES=j;g.HOUR_SECONDS=k;g.DAY_SECONDS=l;g.WEEK_SECONDS=m;g.YEAR_SECONDS=n;g.MINUTE_MILLISECONDS=o;g.HOUR_MILLISECONDS=p;g.DAY_MILLISECONDS=q;g.WEEK_MILLISECONDS=r;g.DEFAULT_UNIXTIME=s;g.MAX_INT=t;g.getClockSkew=a;g.setClockSkew=c;g.toHttpHeaderDate=e;g.castToUnixTime=x;g.castMilliSecondsToUnixTime=y;g.castLongIntToUnixTime=f;g.castMillisTimeToUnixTime=z;g.millisTime=A;g.castToMillisTime=B;g.fromMillisTime=C;g.castUnixTimeToMillisTime=D;g.isOverflowTime=E;g.timeoutFor=F;g.futureUnixTime=G;g.pastUnixTime=H;g.cappedMillisecondsUntil=I;g.delayUntil=J;g.unixTime=K;g.unixTimeWithoutClockSkewCorrection=L;g.midnight=M;g.midnightOn=N;g.unixTimeMs=O;g.secondsUntil=P;g.isInFuture=Q;g.monotonicTime=R;g.monotonicTimeSince=S;g.oldest=T;g.MonotonicTimer=U;g.timeSince_USE_ONLY_IF_APPROVED=V;g.unskewedDate_USE_ONLY_IF_APPROVED=W;g.happenedWithinAt=X;g.happenedWithin=Y;g.toDate=Z;g.sameDay=aa;g.isWithinNext24h=ba;g.convertHexToDate=ca;g.performanceAbsoluteNow=$;g.daysDiff=da}),98);\/*FB_PKG_DELIM*\/\n__d(\"promiseFromRequest\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return new self.Promise(function(b,c){a.onsuccess=function(a){b(a.target.result)},a.onerror=function(a){c(a)}})}f[\"default\"]=a}),66);\n__d(\"ReStoreDbConfigStore\",[\"asyncToGeneratorRuntime\",\"promiseFromRequest\",\"uuidv4\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"_db_config\",i=\"name\",j=\"epoch\",k=\"main\",l=\"dbCorruption\";function m(a){a=a.objectStoreNames;return a.contains(\"_db_config\")}function a(a,b){if(m(a))return;a=a.createObjectStore(h,{autoIncrement:!0,keyPath:i});a.createIndex(i,i,{unique:!0});a.add(b);a.put({name:j,value:c(\"uuidv4\")()})}function d(a){return c(\"promiseFromRequest\")(a.objectStore(h).get(l))}function e(a,b){a=a.objectStore(h);return c(\"promiseFromRequest\")(a.put({name:l,value:b+1}))}function n(a){return c(\"promiseFromRequest\")(a.objectStore(h).get(k))}function f(a,b){return o.apply(this,arguments)}function o(){o=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){a=(yield n(a));b=!b.isEqual(a);return b});return o.apply(this,arguments)}g.CONFIG_STORE_NAME=h;g.CACHE_VERSION_KEY=j;g.DB_CONFIG_KEY=k;g.createDbConfig=a;g.readCorruptionFailuresFromConfig=d;g.writeCorruptionFailuresToConfig=e;g.readDbConfig=n;g.detectConfigMismatch=f}),98);\n__d(\"ReStoreBinaryEncoding\",[\"I64\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=new TextDecoder(),j=new TextEncoder(),k=1,l={true:1,false:2,null:3,undefined:4,emptyString:5,string:6,binary:7,u8binary:8,struct:9,number:10,list:11,i64:12,set:13,map:14},m={boolean:function(a){return a===!0?l.true:l.false},number:function(){return l.number},object:function(a){if(a===null)return l.null;if((h||(h=d(\"I64\"))).isI64(a))return l.i64;if(a instanceof ArrayBuffer)return l.binary;if(a instanceof Uint8Array)return l.u8binary;if(Array.isArray(a))return l.list;if(a instanceof Set)return l.set;return a instanceof Map?l.map:l.struct},string:function(a){return a===\"\"?l.emptyString:l.string},undefined:function(){return l.undefined}};function n(a){return m[typeof a](a)}function o(a,b){a=[a,b];a._tag=\"i64\";return a}var p=j.encodeInto!=null?function(a,b){return j.encodeInto(a,b)}:function(a,b){a=j.encode(a);b.set(a,0);return{written:a.length}};b=function(){function a(){var a=this;this.$1=0;this.$2=[];this.$3=0;this.$4=new DataView(new ArrayBuffer(0));this.$8=function(){a.$3+=a.$5(a.$6());var b=a.$2[a.$3];return b};this.$9=function(){var b=a.$6(),c=a.$4.buffer.slice(a.$4.byteOffset+a.$1,a.$4.byteOffset+b+a.$1);a.$1+=b;return c};this.$10=function(){return new Uint8Array(a.$9(),a.$6(),a.$6())};this.$11=function(){return a.$4.getFloat64((a.$1+=8)-8)};this.$12=function(){var b={},c;while((c=a.$4.getUint8(a.$1++))!==0)b[a.$8()]=a.$13.get(c)();return b};this.$14=function(){var b=[],c;while((c=a.$4.getUint8(a.$1++))!==0)b.push(a.$13.get(c)());return b};this.$15=function(){var b=o(a.$4.getInt32(a.$1),a.$4.getUint32(a.$1+4));a.$1+=8;return b};this.$16=function(){var b=new Set(),c;while((c=a.$4.getUint8(a.$1++))!==0)b.add(a.$13.get(c)());return b};this.$17=function(){var b=new Map(),c;while((c=a.$4.getUint8(a.$1++))!==0)b.set(a.$13.get(a.$4.getUint8(a.$1++))(),a.$13.get(c)());return b};this.$13=new Map([[l.true,function(){return!0}],[l.false,function(){return!1}],[l.null,function(){return null}],[l.undefined,function(){return void 0}],[l.emptyString,function(){return\"\"}],[l.string,this.$8],[l.binary,this.$9],[l.u8binary,this.$10],[l.number,this.$11],[l.struct,this.$12],[l.list,this.$14],[l.i64,this.$15],[l.set,this.$16],[l.map,this.$17]])}var b=a.prototype;b.$5=function(a){return a>>>1^(-(a&1)|0)};b.$6=function(){var a=0,b=!0;for(var d=0;b;d++,this.$1++){if(d>4)throw c(\"unrecoverableViolation\")(\"expected end of var int\",\"messenger_web_product\");var e=this.$4.getUint8(this.$1);b=(e&128)!==0;e=e&-129;a+=e<<7*d}return a};b.$7=function(){this.$1=this.$4.getUint32(0);if(this.$1!==0){while(this.$4.getUint8(this.$1)!==0)this.$2.push(this.$6());this.$1++;var a=this.$4.getUint32(this.$1);a=i.decode(this.$4.buffer.slice(this.$4.byteOffset+this.$1+4,this.$4.byteOffset+a+this.$1+4));var b=0;for(var c=0;c<this.$2.length;c++){var d=this.$2[c];this.$2[c]=a.substr(b,d);b+=d}}this.$1=4};b.decode=function(a){this.$1=0;this.$2=[];this.$3=0;this.$4=new DataView(a.buffer,a.byteOffset,a.byteLength);this.$7();return this.$13.get(this.$4.getUint8(this.$1++))()};return a}();e=function(){function a(){var a=this;this.$1=new ArrayBuffer(65536);this.$2=new Map();this.$3=this.$1;this.$4=new DataView(this.$3);this.$5=4;this.$6=0;this.$7=function(b){if(a.$5+b>a.$3.byteLength){var c=a.$3;a.$3=new ArrayBuffer(Math.max(Math.ceil(a.$3.byteLength*1.5),a.$5+b));new Uint8Array(a.$3).set(new Uint8Array(c));a.$4=new DataView(a.$3)}};this.$9=function(b){b=b;while(b>=128){var c=b&127,d=b>>>7;a.$7(1);a.$4.setUint8(a.$5++,c+128);b=d}a.$7(1);a.$4.setUint8(a.$5++,b)};this.$10=function(){if(a.$2.size>0){a.$4.setUint32(0,a.$5);var b=\"\";for(var c=a.$2.keys(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.$9(f.length);b+=f}a.$7(1+b.length*3+4);a.$4.setUint32(a.$5++,0);f=p(b,new Uint8Array(a.$3,a.$5+4));e=f.written;a.$4.setUint32(a.$5,e);a.$5+=e+4}else a.$7(1),a.$4.setUint32(0,0)};this.$11=function(b){var c=Object.keys(b);for(var d=0;d<c.length;d++){var e=c[d],f=b[e],g=n(f);a.$7(1);a.$4.setUint8(a.$5++,g);a.$12(e);if(g<6)continue;a.$13.get(g)(f)}a.$7(1);a.$4.setUint8(a.$5++,0)};this.$12=function(b){var c=a.$2.get(b);c==null&&a.$2.set(b,c=a.$2.size);a.$9(a.$8(c-a.$6));a.$6=c};this.$14=function(b){a.$9(b.byteLength),a.$7(b.byteLength),new Uint8Array(a.$3).set(new Uint8Array(b),a.$5),a.$5+=b.byteLength};this.$15=function(b){a.$14(b.buffer),a.$9(b.byteOffset),a.$9(b.byteLength)};this.$16=function(b){a.$7(8),a.$4.setFloat64(a.$5,b),a.$5+=8};this.$17=function(b){a.$7(8),a.$4.setInt32(a.$5,b[0]),a.$4.setUint32(a.$5+4,b[1]),a.$5+=8};this.$18=function(b){for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=n(e);a.$7(1);a.$4.setUint8(a.$5++,f);if(f<6)continue;a.$13.get(f)(e)}a.$7(1);a.$4.setUint8(a.$5++,0)};this.$19=function(b){for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];var g=n(e);a.$7(1);a.$4.setUint8(a.$5++,g);var h=n(f);a.$7(1);a.$4.setUint8(a.$5++,h);h>5&&a.$13.get(h)(f);if(g<6)continue;a.$13.get(g)(e)}a.$7(1);a.$4.setUint8(a.$5++,0)};this.$13=new Map([[l.struct,this.$11],[l.string,this.$12],[l.binary,this.$14],[l.u8binary,this.$15],[l.number,this.$16],[l.i64,this.$17],[l.list,this.$18],[l.set,this.$18],[l.map,this.$19]])}var b=a.prototype;b.$8=function(a){return a<<1^a>>31};b.encode=function(a){this.$3=this.$1;this.$4=new DataView(this.$3);this.$2=new Map();this.$5=4;this.$6=0;var b=n(a);this.$7(1);this.$4.setUint8(this.$5++,b);b>4&&(this.$13.get(b)(a),this.$10());return new Uint8Array(this.$3,0,this.$5)};return a}();function a(a){var b=new Set();function e(a){if(a==null||a===!0||a===!1||a===\"\")return 1;if(typeof a===\"number\"||(h||(h=d(\"I64\"))).isI64(a))return 9;if(typeof a===\"string\"){if(b.has(a))return 2;b.add(a);return a.length*k+4}if(Array.isArray(a)){var f=2;for(var g=a,i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var l;if(i){if(j>=g.length)break;l=g[j++]}else{j=g.next();if(j.done)break;l=j.value}l=l;f+=e(l)}return f}if(a instanceof ArrayBuffer)return a.byteLength+3;if(a instanceof Uint8Array)return a.byteLength+6;if(a instanceof Map){l=0;for(j=a,i=Array.isArray(j),g=0,j=i?j:j[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){if(i){if(g>=j.length)break;f=j[g++]}else{g=j.next();if(g.done)break;f=g.value}f=f;var m=f[0];f=f[1];l+=e(m)+e(f)}return l+2}if(typeof a===\"object\"){m=0;f=Object.keys(a);for(g=0;g<f.length;g++){i=f[g];j=a[i];m+=e(i)+e(j)-2}return m+2}throw c(\"unrecoverableViolation\")(\"unsupported type\",\"messenger_web_product\")}return e(a)+4+(b.size?5:0)}g.Decoder=b;g.Encoder=e;g.estimateSize=a}),98);\n__d(\"ReStoreDbClosedError\",[\"ClientConsistencyEventEmitter\",\"MAWCurrentUser\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"LS DB closed\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;b=(b=b)!=null?b:h;e=a.call(this,b)||this;e.message=b;switch(d(\"MAWCurrentUser\").getAppID()){case 772021112871879:c(\"ClientConsistencyEventEmitter\").emit(\"hardRefresh\",\"ls_forced_refresh\");break;default:c(\"ClientConsistencyEventEmitter\").emit(\"softRefresh\",\"ls_forced_refresh\")}return e}return b}(babelHelpers.wrapNativeSuper(Error));g[\"default\"]=a}),98);\n__d(\"LSPlatformLockState\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\")({Waiting:\"waiting\",Acquired:\"acquired\",Cleaning:\"cleaning\",Canceled:\"canceled\"});f.LockState=a}),66);\n__d(\"MessengerLocksManagerFallback\",[\"MWLocalStorageErrorHandler\",\"WebStorageLockManager\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){return d(\"WebStorageLockManager\").make(a,{onQuotaExceeded:d(\"MWLocalStorageErrorHandler\").onQuotaExceeded})}g[\"default\"]=a}),98);\n__d(\"ReStoreNameUtils\",[\"CurrentMessengerUser\"],(function(a,b,c,d,e,f,g){\"use strict\";a=d(\"CurrentMessengerUser\").getIDorEIMU();b=\"RestoreIDBMainLock-\"+a;c=\"dbLock-\"+a;e=\"RestoreConcurrency-\"+a;f=\"lsPlatformLock-\"+a;d=\"syncLock-\"+a;a=\"single-instance-pdb-\"+a;g.reStoreCMLockName=b;g.reStoreDBLockName=c;g.restoreConcurrencyBroadcastChannelName=e;g.lsPlatformLockBroadcastChannelName=f;g.lsPlatformLockName=d;g.singleTabLockName=a}),98);\n__d(\"saveHandler\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){var c={};a.set(c,b);return function(){a[\"delete\"](c)}}f[\"default\"]=a}),66);\n__d(\"LSPlatformSyncLock\",[\"BrowserLockManager\",\"FBLogger\",\"LSPlatformErrorChannel\",\"LSPlatformLockState\",\"LSPlatformLsInitLog\",\"MAWLocalStorage\",\"MWBroadcastChannel\",\"MessengerLocksManagerFallback\",\"MessengerLogHistory\",\"Promise\",\"ReStoreNameUtils\",\"Run\",\"asyncToGeneratorRuntime\",\"clearTimeout\",\"emptyFunction\",\"gkx\",\"justknobx\",\"pageID\",\"promiseDone\",\"saveHandler\",\"setTimeout\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=d(\"MessengerLogHistory\").getInstance(\"client_init\"),j=typeof window!==\"undefined\"?window:self,k=\"iwantlock\",l=\"lockRequestOnDemand\",m=\"mw_msgr_mutex\";function n(a,e){a===void 0&&(a=j);e===void 0&&(e=function(){return document.hasFocus()});var f=new Map(),g=new Map(),n=d(\"LSPlatformLockState\").LockState.Waiting,o=c(\"emptyFunction\"),p,q=c(\"gkx\")(\"24155\")||c(\"gkx\")(\"24152\")?d(\"MWBroadcastChannel\").MWBroadcastChannel(d(\"ReStoreNameUtils\").lsPlatformLockBroadcastChannelName):void 0,r=function(){if(!c(\"gkx\")(\"24155\"))return;p!=null&&c(\"clearTimeout\")(p);if(n===d(\"LSPlatformLockState\").LockState.Canceled||n===d(\"LSPlatformLockState\").LockState.Acquired)return;p=c(\"setTimeout\")(function(){e()&&n!==d(\"LSPlatformLockState\").LockState.Acquired&&(i.debug(\"tab has focus and wants to acquire sync lock\"),q==null?void 0:q.postMessage(k))},c(\"justknobx\")._(\"1764\"))};function s(){return t.apply(this,arguments)}function t(){t=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){i.debug(\"Sync lock acquired\"),n=d(\"LSPlatformLockState\").LockState.Acquired,yield (h||(h=b(\"Promise\"))).all(Array.from(f.values()).map(function(a){return a()}))});return t.apply(this,arguments)}function u(){n=d(\"LSPlatformLockState\").LockState.Cleaning,o=c(\"emptyFunction\"),g.forEach(function(a){return a()})}function v(){var b=new AbortController(),f=c(\"LSPlatformErrorChannel\").subscribe(function(e){i.debug(\"syncLock aborted due to \"+e.name),c(\"FBLogger\")(\"mpf_web_foundations\").info(\"SyncLock aborted due to %s\",e.name),o(),b.abort(),n=d(\"LSPlatformLockState\").LockState.Canceled,q==null?void 0:q.removeEventListener(\"message\",g),a.removeEventListener(\"focus\",r),f()}),g=function a(g){if(g==null||g.data==null||(g.data!==k||e())&&g.data!==l)return;i.debug(\"got message from other tab to abort request to sync lock\");o();b.abort();f();q==null?void 0:q.removeEventListener(\"message\",a);n=d(\"LSPlatformLockState\").LockState.Waiting;c(\"promiseDone\")(w())};q==null?void 0:q.addEventListener(\"message\",g);return b}function w(){return x.apply(this,arguments)}function x(){x=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(){var a,e=(a=c(\"BrowserLockManager\"))!=null?a:c(\"MessengerLocksManagerFallback\")(c(\"pageID\"));if(e){n=d(\"LSPlatformLockState\").LockState.Waiting;d(\"LSPlatformLsInitLog\").addPoint(\"sync_lock_start\");i.debug(\"Sync lock requested if available\");yield new(h||(h=b(\"Promise\")))(function(a){return e.request(d(\"ReStoreNameUtils\").lsPlatformLockName,{ifAvailable:!0},function(){var c=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(c){if(c==null){i.debug(\"Attempted to acquire sync lock but it already taken\");d(\"LSPlatformLsInitLog\").addPoint(\"sync_lock_unavailable\");a();return}i.debug(\"Attempted to acquire sync lock and suceeded\");yield s();d(\"LSPlatformLsInitLog\").addPoint(\"sync_lock_acquired\");a();return new(h||(h=b(\"Promise\")))(function(a){o=function(){i.debug(\"Releasing sync lock\"),u(),a()}})});return function(a){return c.apply(this,arguments)}}())});a=v();if(n!==d(\"LSPlatformLockState\").LockState.Acquired){i.debug(\"Sync lock requested and will wait\");d(\"LSPlatformLsInitLog\").addPoint(\"sync_lock_requests_again\");c(\"promiseDone\")(e.request(d(\"ReStoreNameUtils\").lsPlatformLockName,{signal:a.signal},function(){var a=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){i.debug(\"Previous attempt to get sync lock failed, getting in queue for when\/if it becomes available\");yield s();return new(h||(h=b(\"Promise\")))(function(a){o=function(){i.debug(\"Releasing sync lock\"),u(),a()}})});return function(b){return a.apply(this,arguments)}}()),function(a){},function(a){if((a==null?void 0:a.name)===\"AbortError\")i.debug(\"Aborting attempt to acquire sync lock\");else{d(\"LSPlatformLsInitLog\").addPoint(\"sync_lock_request_failure\");throw a}});if(c(\"gkx\")(\"24152\"))try{a=d(\"MAWLocalStorage\").getStorage();a=a==null?void 0:a.getItem(m);if(a!=null){a=Number(a);var f=Date.now();f-a>=1e3*60*20&&(i.debug(\"sending lock request on demand\"),q==null?void 0:q.postMessage(l))}}catch(a){c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).warn(\"Failed to send lock request on demand\")}}d(\"LSPlatformLsInitLog\").addPoint(\"lock_requested\")}else{d(\"LSPlatformLsInitLog\").addPoint(\"sync_lock_end_failure\");throw c(\"unrecoverableViolation\")(\"No lock manager inited\",\"messenger_web_product\")}});return x.apply(this,arguments)}q!=null&&(a.addEventListener(\"focus\",r),r(),d(\"LSPlatformLsInitLog\").addPoint(\"onfocus_set\"));d(\"Run\").onBeforeUnload(function(){o()},!1);d(\"LSPlatformLsInitLog\").addPoint(\"beforeunload_set\");return{_getStateInternal:function(){return n},hasLock:function(){return n===d(\"LSPlatformLockState\").LockState.Acquired},onAcquired:function(a){return c(\"saveHandler\")(f,a)},onLost:function(a){return c(\"saveHandler\")(g,a)},onLostOnce:function(a){var b=c(\"saveHandler\")(g,function(){a(),b()})},release:function(){o()},requestLock:w}}var o=null;function a(){o==null&&(o=n());return o}function e(){o!=null&&o.release()}g.SYNC_KEY=m;g.init=n;g.use=a;g.releaseIfExist=e}),98);\n__d(\"ReStoreErrorAction\",[\"ClientConsistencyEventEmitter\",\"LSPlatformSyncLock\",\"MAWCurrentUser\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){switch(d(\"MAWCurrentUser\").getAppID()){case 772021112871879:c(\"ClientConsistencyEventEmitter\").emit(\"hardRefresh\",\"ls_forced_refresh\");break;default:h()}}function h(){c(\"ClientConsistencyEventEmitter\").emit(\"softRefresh\",\"ls_forced_refresh\")}function b(){d(\"LSPlatformSyncLock\").releaseIfExist()}g.refresh=a;g.softRefresh=h;g.stopClient=b}),98);\n__d(\"ReStoreDbVersionChange\",[\"ReStoreErrorAction\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=\"LS DB changed version\",i=\"ReStoreDbVersionChange\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c=h;b=a.call(this,c)||this;b.message=c;b.name=i;d(\"ReStoreErrorAction\").stopClient();d(\"ReStoreErrorAction\").refresh();return b}return b}(babelHelpers.wrapNativeSuper(Error));g.ERROR_NAME=i;g.ReStoreDbVersionChange=a}),98);\n__d(\"ReStoreDecryptionFailure\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"ReStoreDecryptionFailure\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;b=b+\" - Encrypted Restore was unable to decrypt an entity for table \"+c;d=a.call(this,b)||this;d.message=b;d.name=g;d.tableName=c;return d}return b}(babelHelpers.wrapNativeSuper(Error));f.ERROR_NAME=g;f.ReStoreDecryptionFailure=a}),66);\n__d(\"MAWLSDBEncryption\",[\"I64\",\"LSPlatformErrorChannel\",\"MAWCryptoConsts\",\"MAWKeychainCrypto\",\"MAWKeychainNaClCrypto\",\"MAWKeychainUtil\",\"MWEARKeychainV3\",\"QPLUserFlow\",\"ReStoreDecryptionFailure\",\"err\",\"nullthrows\",\"qpl\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=typeof window!==\"undefined\"?window:self;function j(a){a=atob(a);var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c.buffer}function k(a){var b=\"\";a=new Uint8Array(a);var c=a.byteLength;for(var d=0;d<c;d++)b+=String.fromCharCode(a[d]);return i.btoa(b)}function l(a){return c(\"nullthrows\")(JSON.stringify(a,function(a,b){if((h||(h=d(\"I64\"))).isI64(b))return{type:\"64\",value:[b[0],b[1]]};else if(a===\"\"||b===null||typeof b===\"string\"||typeof b===\"number\"||typeof b===\"boolean\"||Array.isArray(b))return b;else if(b===void 0)return{type:\"u\"};else if(b instanceof ArrayBuffer)return{type:\"ab\",value:k(b)};else if(b instanceof Uint8Array)return{l:b.byteLength,o:b.byteOffset,type:\"ui8\",value:k(b.buffer)};else if(b instanceof Map)return{e:l(Array.from(b.entries())),type:\"m\"};else if(b instanceof Set)return{type:\"s\",v:l(Array.from(b.values()))};else if(typeof b===\"object\")return{type:\"o\",value:l(b)};throw c(\"unrecoverableViolation\")(\"Not supported\",\"messenger_comet\")}))}function m(a){return JSON.parse(a,function(a,b){if(a===\"\"||b===null||typeof b===\"string\"||typeof b===\"number\"||typeof b===\"boolean\"||Array.isArray(b))return b;else if(typeof b===\"object\")if(b.type===\"64\"){b.value._tag=\"i64\";return b.value}else if(b.type===\"u\")return void 0;else if(b.type===\"ab\")return j(b.value);else if(b.type===\"ui8\")return new Uint8Array(j(b.value),b.o,b.l);else if(b.type===\"o\")return m(b.value);else if(b.type===\"m\")return new Map(m(b.e));else if(b.type===\"s\")return new Set(m(b.v));throw c(\"unrecoverableViolation\")(\"Not supported\",\"messenger_comet\")})}function a(a,b){try{var e=d(\"MWEARKeychainV3\").getDbEncryptionKey(),f=e.key;e=e.version;e=d(\"MAWKeychainUtil\").makeAAD(e,d(\"MAWCryptoConsts\").CIPHER_ID);return n(f,c(\"nullthrows\")(l(a)),e)}catch(a){throw c(\"err\")(a.message+\" - Encrypted LSDB was unable to encrypt an entity for table \"+b)}}function b(a,b){try{var e=d(\"MAWKeychainCrypto\").getKeyVersionFromCipherData(a),f=d(\"MWEARKeychainV3\").getDbEncryptionKey(e);f=f.key;f=o(f,a,e);return c(\"nullthrows\")(m(f))}catch(a){c(\"QPLUserFlow\").addPoint(c(\"qpl\")._(521481876,\"1407\"),\"EBSM_HYDRATION_DECRYPTION_FAILURE_ON_\"+b.toUpperCase());c(\"LSPlatformErrorChannel\").emit(new(d(\"ReStoreDecryptionFailure\").ReStoreDecryptionFailure)(a.message,b));throw new(d(\"ReStoreDecryptionFailure\").ReStoreDecryptionFailure)(a.message,b)}}function n(a,b,c){b=new TextEncoder().encode(b).buffer;return d(\"MAWKeychainNaClCrypto\").encryptTweetNaClArrayBuffer(a,new Uint8Array(b),c)}function o(a,b,c){a=d(\"MAWKeychainNaClCrypto\").decryptTweetNaClArrayBuffer(a,b,c);return new TextDecoder().decode(a)}g.stringify=l;g.parse=m;g.encryptLSDBObj=a;g.decryptLSDBObj=b}),98);\n__d(\"MWLSIndexedDBDelete\",[\"MWLSIndexedDBName\",\"ODS\",\"Promise\",\"recoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i;function a(a){return new(i||(i=b(\"Promise\")))(function(b,e){try{var f=d(\"MWLSIndexedDBName\").dbName(),g=indexedDB.deleteDatabase(f);g.onerror=function(){(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"db_delete\",\"error.\"+a),c(\"recoverableViolation\")(\"[pdb] Failed to delete db\",\"messenger_web_product\"),e(g.error)};g.onblocked=function(){(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"db_delete\",\"block.\"+a)};g.onsuccess=function(){(h||(h=d(\"ODS\"))).bumpEntityKey(3185,\"db_delete\",\"success.\"+a),b()}}catch(a){c(\"recoverableViolation\")(\"[pdb] error in db deletion\",\"messenger_web_product\"),e()}})}g.deleteIndexedDB=a}),98);\n__d(\"EBSMGating\",[\"MAWWaitForBackendSetup\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"gkx\")(\"24151\")}function h(){return c(\"gkx\")(\"1211\")}function b(){return h()||d(\"MAWWaitForBackendSetup\").isBackendSetupSuccessful()}g.isPersistedEBTableEnabled=a;g.isEBSMV2Enabled=h;g.isBackendSetupSuccessfulForEBSM=b}),98);\n__d(\"EBSMProperties\",[],(function(a,b,c,d,e,f){\"use strict\";a=[\"encrypted_backups_virtual_devices\",\"secure_encrypted_backups_recovery_code_status\",\"device_metadata\",\"secure_encrypted_backups_epochs\",\"secure_encrypted_backups_client_state\",\"encrypted_backups\",\"experiences_shared_state\",\"occamadillo_most_recent_message_per_thread\"];b=new Set([\"secure_encrypted_backups_client_state\",\"secure_encrypted_backups_epochs\"]);c={dbVersion:4,mandatoryTables:b,persistedTables:new Set(a),persistedTablesArray:a};d=c;f[\"default\"]=d}),66);\n__d(\"ReStoreEARSetupFailure\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"Encryption keychain could not be setup\",h=\"ReStoreEARSetupFailure\";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;b=g+\": \"+b;c=a.call(this,b)||this;c.message=b;c.name=h;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.ERROR_MESSAGE=g;f.ERROR_NAME=h;f.ReStoreEARSetupFailure=a}),66);\/*FB_PKG_DELIM*\/\n__d(\"MAWIndexedDbMetadata\",[],(function(a,b,c,d,e,f){\"use strict\";var g=\"v1\",h=\"v1\",i=\"v1\",j=\"v1\",k=\"v1\",l=\"v1\",m=\"messenger_web_\"+g,n=\"messenger_web_v3\",o=\"messenger_web_encryption_\"+h,p=\"messenger_web_signal_\"+i,q=\"messenger_web_log_\"+j,r=\"messenger_web_eb_lsdb_\"+k,s=\"messenger_web_fts_\"+l;function a(a){return m+\"_\"+a}function b(a){return s+\"_\"+a}function c(a){return n+\"_\"+a}function d(a){return o+\"_\"+a}function e(a){return p+\"_\"+a}function t(a){return q+\"_\"+a}function u(a){return r+\"_\"+a}f.dbName=a;f.ftsDbName=b;f.restoreDbName2=c;f.encryptionDbName=d;f.signalDbName=e;f.logDbName=t;f.ebLSDBName=u}),66);\n__d(\"MAWTransactionMode\",[],(function(a,b,c,d,e,f){\"use strict\";a=\"r\";b=\"rw\";f.READONLY=a;f.READWRITE=b}),66);\n__d(\"MAWErrorObject\",[\"err\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){if(a instanceof Error)return a;else if(typeof a===\"string\")return c(\"err\")(a);else return null}g.getErrorObject=a}),98);\n__d(\"MAWCryptoConsts\",[],(function(a,b,c,d,e,f){a=60*60;b=24*a;c=32;d=new Uint8Array(0).buffer;e=128;a=256;var g=12,h=1,i=2,j=2;b=b*30*6;var k=3,l=\"AES-GCM\",m=\"HKDF\",n=\"SHA-256\";f.HKDF_SEED_LENGTH_IN_BYTES=c;f.HKDF_INFO=d;f.AES_GCM_TAG_LENGTH=e;f.AES_GCM_KEY_LENGTH=a;f.AES_GCM_IV_LENGTH_IN_BYTES=g;f.VERSION=h;f.CIPHER_ID=i;f.ADDITIONAL_DATA_LENGTH_IN_BYTES=j;f.ENC_KEY_TTL=b;f.MAX_KEYCHAIN_SETUP_RETRIES=k;f.AES_GCM=l;f.HKDF=m;f.SHA256=n}),66);\n__d(\"MAWKeychainUtil\",[],(function(a,b,c,d,e,f){function a(a){return self.crypto.getRandomValues(new Uint8Array(a))}function b(a){var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(new Uint8Array(b),a);return a+b.byteLength},0);return c.buffer}function c(a,b){return new Uint8Array([a,b]).buffer}function d(a){var b=a.length;if(b>0&&b%2===0&&\/^[\\da-f]+$\/gi.test(a)){var c=[];for(var d=0,b=b\/2;d<b;++d){var e=parseInt(a.substring(d*2,d*2+2),16);c.push(e)}return new Uint8Array(c)}else return null}f.getBufferWithRandomValuesFromLength=a;f.mergeBuffers=b;f.makeAAD=c;f.fromHexString=d}),66);\n__d(\"MAWSubtleCrypto\",[],(function(a,b,c,d,e,f){a=self.crypto;b=a&&(a.subtle||a.webkitSubtle||a.subtle);f.MAWSubtleCrypto=b}),66);\n__d(\"WABase64\",[\"WACryptoDependencies\",\"WAErr\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";function h(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Found unexpected character code while decoding B64 at index \",\", length \",\": \",\"\"]);h=function(){return a};return a}var i=43,j=47,k=61,l=45,m=95,n=3e3,o=\"data:image\/jpeg;base64,\",p=function(a){return typeof a===\"string\"&&\/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$\/.test(a)};function q(a){return r(a,i,j,!0)}function a(a,b){b===void 0&&(b=!1);return r(a,l,m,b)}function r(a,b,c,d){a=Array.isArray(a)||a instanceof ArrayBuffer?new Uint8Array(a):a;if(a.length<=n)return s(a,b,c,d);else{var e=[];for(var f=0;f<a.length;f+=n)e.push(s(a.subarray(f,f+n),b,c,d));return e.join(\"\")}}function s(a,b,c,d){var e=Math.ceil(a.length*4\/3),f=4*Math.ceil(a.length\/3),g=new Array(f);for(var h=0,i=0;h<f;h+=4,i+=3){var j=a[i]<<16|a[i+1]<<8|a[i+2];g[h]=j>>18;g[h+1]=j>>12&63;g[h+2]=j>>6&63;g[h+3]=j&63}for(j=0;j<e;j++){a=g[j];a<26?g[j]=65+a:a<52?g[j]=71+a:a<62?g[j]=a-4:a===62?g[j]=b:g[j]=c}for(h=e;h<f;h++)g[h]=61;i=String.fromCharCode.apply(String,g);return d?i:i.substring(0,e)}function t(a,b,c,e){var f=a.length,g=new Int32Array(f+f%4);for(var i=0;i<f;i++){var j=a.charCodeAt(i);if(65<=j&&j<=90)g[i]=j-65;else if(97<=j&&j<=122)g[i]=j-71;else if(48<=j&&j<=57)g[i]=j+4;else if(j===b)g[i]=62;else if(j===c)g[i]=63;else if(j===e){f=i;break}else{self.ERROR!=null&&d(\"WALogger\").ERROR(h(),i,f,j);return null}}j=g.length\/4;for(b=0,c=0;b<j;b++,c+=4)g[b]=g[c]<<18|g[c+1]<<12|g[c+2]<<6|g[c+3];e=Math.floor(f*3\/4);i=new Uint8Array(e);a=0;b=0;for(;b+3<=e;a++,b+=3){j=g[a];i[b]=j>>16;i[b+1]=j>>8&255;i[b+2]=j&255}switch(e-b){case 2:i[b]=g[a]>>16;i[b+1]=g[a]>>8&255;break;case 1:i[b]=g[a]>>16}return i}function b(a){a=t(a,i,j,k);if(a)return a.buffer;else throw c(\"WAErr\")(\"Base64.decode given invalid string\")}function e(a,b){b===void 0&&(b=!1);a=t(a,l,m,b?k:-1);if(a)return a.buffer;else throw c(\"WAErr\")(\"Base64.decode given invalid string\")}function f(a){a=a instanceof ArrayBuffer?new Uint8Array(a):t(a,i,j,k);return a&&Array.from(a)}function u(a){return Math.floor(a.length*3\/4)}function v(a){a=new Uint8Array(a);d(\"WACryptoDependencies\").getCrypto().getRandomValues(a);return q(a)}g.BASE64_DATA_URL_SCHEME=o;g.isBase64=p;g.encodeB64=q;g.encodeB64UrlSafe=a;g.decodeB64=b;g.decodeB64UrlSafe=e;g.decodeB64ToJsArray=f;g.sizeWhenB64Decoded=u;g.randomBase64=v}),98);\n__d(\"MAWKeychainCrypto\",[\"FBLogger\",\"MAWCryptoConsts\",\"MAWKeychainUtil\",\"MAWSubtleCrypto\",\"MessengerWebInitData\",\"WABase64\",\"asyncToGeneratorRuntime\",\"err\",\"memoizeOneWithArgs\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=d(\"MAWKeychainUtil\").makeAAD(d(\"MAWCryptoConsts\").VERSION,d(\"MAWCryptoConsts\").CIPHER_ID);function a(a,b,e){var f=d(\"MAWKeychainUtil\").getBufferWithRandomValuesFromLength(d(\"MAWCryptoConsts\").AES_GCM_IV_LENGTH_IN_BYTES),g=e?e:h;return d(\"MAWSubtleCrypto\").MAWSubtleCrypto.encrypt({additionalData:g,iv:new Uint8Array(f),name:d(\"MAWCryptoConsts\").AES_GCM,tagLength:d(\"MAWCryptoConsts\").AES_GCM_TAG_LENGTH},a,b).then(function(a){a=d(\"MAWKeychainUtil\").mergeBuffers([g,f,a]);return d(\"WABase64\").encodeB64(a)})[\"catch\"](function(b){throw c(\"FBLogger\")(\"mpf_web_foundations\").catching(b).mustfixThrow(\"Failed to encryptDataToStringBuffer\",typeof a,a.constructor.name)})}function e(a,b){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){var e,f=new Uint8Array(d(\"WABase64\").decodeB64(b)),g=f.subarray(0,(e=d(\"MAWCryptoConsts\")).ADDITIONAL_DATA_LENGTH_IN_BYTES),h=f.subarray(e.ADDITIONAL_DATA_LENGTH_IN_BYTES,e.AES_GCM_IV_LENGTH_IN_BYTES+e.ADDITIONAL_DATA_LENGTH_IN_BYTES);f=f.subarray(e.AES_GCM_IV_LENGTH_IN_BYTES+e.ADDITIONAL_DATA_LENGTH_IN_BYTES);try{e=(yield d(\"MAWSubtleCrypto\").MAWSubtleCrypto.decrypt({additionalData:g,iv:h,name:d(\"MAWCryptoConsts\").AES_GCM,tagLength:d(\"MAWCryptoConsts\").AES_GCM_TAG_LENGTH},a,f));return e}catch(d){throw c(\"FBLogger\")(\"mpf_web_foundations\").catching(d).mustfixThrow(\"Failed to decryptDataToArrayBuffer\",a.constructor.name,b.length,String(d))}});return i.apply(this,arguments)}function j(){var a=d(\"MAWKeychainUtil\").fromHexString(c(\"MessengerWebInitData\").accountKey);if(a==null)throw c(\"err\")(\"Invalid value for account key\");return a.buffer}function k(){var a=j();return d(\"MAWSubtleCrypto\").MAWSubtleCrypto.importKey(\"raw\",a,{name:d(\"MAWCryptoConsts\").AES_GCM},!1,[\"encrypt\",\"decrypt\"])}function f(){return d(\"WABase64\").encodeB64(d(\"MAWKeychainUtil\").getBufferWithRandomValuesFromLength(d(\"MAWCryptoConsts\").HKDF_SEED_LENGTH_IN_BYTES))}function l(a){return m.apply(this,arguments)}function m(){m=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=d(\"WABase64\").decodeB64(a);try{a=(yield d(\"MAWSubtleCrypto\").MAWSubtleCrypto.importKey(\"raw\",a,{name:d(\"MAWCryptoConsts\").HKDF},!1,[\"deriveKey\"]));return a}catch(a){throw c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).mustfixThrow(\"Failed to importBrowserEncryptionKey\")}});return m.apply(this,arguments)}function n(){return d(\"MAWKeychainUtil\").getBufferWithRandomValuesFromLength(d(\"MAWCryptoConsts\").HKDF_SEED_LENGTH_IN_BYTES)}function o(a,b){var e;return d(\"MAWSubtleCrypto\").MAWSubtleCrypto.deriveKey({hash:{name:(e=d(\"MAWCryptoConsts\")).SHA256},info:e.HKDF_INFO,name:e.HKDF,salt:b},a,{length:e.AES_GCM_KEY_LENGTH,name:e.AES_GCM},!0,[\"encrypt\",\"decrypt\"]).then(function(a){return d(\"MAWSubtleCrypto\").MAWSubtleCrypto.exportKey(\"raw\",a)})[\"catch\"](function(a){throw c(\"FBLogger\")(\"mpf_web_foundations\").catching(a).mustfixThrow(\"Failed to genDatabaseEncryptionKey\")})}function p(a){a=a.slice(0,d(\"MAWCryptoConsts\").ADDITIONAL_DATA_LENGTH_IN_BYTES);return new DataView(a).getUint8(0)}function q(a){return p(d(\"WABase64\").decodeB64(a))}var r=c(\"memoizeOneWithArgs\")(function(){return k()});function s(a){return t.apply(this,arguments)}function t(){t=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a){a=d(\"WABase64\").decodeB64(a);a=(yield d(\"MAWSubtleCrypto\").MAWSubtleCrypto.digest(d(\"MAWCryptoConsts\").SHA256,a));return d(\"WABase64\").encodeB64(a)});return t.apply(this,arguments)}g.ADDITIONAL_DATA=h;g.encryptDataToStringBuffer=a;g.decryptDataToArrayBuffer=e;g.getAccountKeyBuffer=j;g.genAccountKey=k;g.genBrowserEncryptionKeyString=f;g.importBrowserEncryptionKey=l;g.genDatabaseEncryptionSeed=n;g.genDatabaseEncryptionKey=o;g.getKeyVersionFromCipherData=p;g.getKeyVersionFromCipherDataString=q;g.getAccountKey=r;g.generateHashString=s}),98);\n__d(\"MAWKeychainNaClCrypto\",[\"MAWCryptoConsts\",\"MAWKeychainCrypto\",\"WABase64\",\"tweetnacl\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name=\"EARError\";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));function i(a,b,c){c=c?c:d(\"MAWKeychainCrypto\").ADDITIONAL_DATA;c=new Uint8Array(c);var e=d(\"tweetnacl\").randomBytes(d(\"tweetnacl\").secretbox.nonceLength);b=d(\"tweetnacl\").secretbox(b,e,new Uint8Array(a));a=new Uint8Array(d(\"MAWCryptoConsts\").ADDITIONAL_DATA_LENGTH_IN_BYTES+e.length+b.length);a.set(c);a.set(e,d(\"MAWCryptoConsts\").ADDITIONAL_DATA_LENGTH_IN_BYTES);a.set(b,d(\"MAWCryptoConsts\").ADDITIONAL_DATA_LENGTH_IN_BYTES+e.length);return a.buffer}function j(a,b,c){return d(\"WABase64\").encodeB64(i(a,b,c))}function k(a,b,c){var e,f;b.slice(0,(e=d(\"MAWCryptoConsts\")).ADDITIONAL_DATA_LENGTH_IN_BYTES);var g=b.slice(e.ADDITIONAL_DATA_LENGTH_IN_BYTES,e.ADDITIONAL_DATA_LENGTH_IN_BYTES+(f=d(\"tweetnacl\")).secretbox.nonceLength);e=b.slice(e.ADDITIONAL_DATA_LENGTH_IN_BYTES+f.secretbox.nonceLength,e.ADDITIONAL_DATA_LENGTH_IN_BYTES+f.secretbox.nonceLength+4*Math.ceil(b.byteLength\/3));b=f.secretbox.open(new Uint8Array(e),new Uint8Array(g),new Uint8Array(a));if(b==null){throw new h(\"decryptTweetNaCl was unable to decrypt an entity. Attempting to use key version : \"+((f=c)!=null?f:\"non-provided\")+\".\")}return b}function l(a,b,c){return k(a,d(\"WABase64\").decodeB64(b),c)}function a(a,b,c){return j(a,b,c)}function b(a,b,c){return l(a,b,c)}g.EARDecryptionError=h;g.encryptTweetNaClArrayBuffer=i;g.encryptTweetNaCl=j;g.decryptTweetNaClArrayBuffer=k;g.decryptTweetNaCl=l;g.encrypt=a;g.decrypt=b}),98);\n__d(\"IGDThreadListNewMessageLoggingDataContext\",[\"react\",\"uuidv4\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=h||(h=d(\"react\"));d=h;var j=d.createContext,k=d.useContext,l=d.useRef,m=j({current:\"\"});function a(a){var b=a.children;a=a.flowInstanceId;a=l(a);return i.jsx(m.Provider,{value:a,children:b})}a.displayName=a.name+\" [from \"+f.id+\"]\";function b(){return k(m)}function e(){var a=k(m);(a.current===null||a.current===\"\")&&(a.current=c(\"uuidv4\")());return a}g.IGDThreadListNewMessageLoggingContextProvider=a;g.useFlowInstanceIdContext=b;g.useFlowInstanceId=e}),98);\n__d(\"XAsyncRequestWWW\",[\"AsyncRequest\"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=this;this.setAllowCrossPageTransition=function(a){b.$1.setAllowCrossPageTransition(a);return b};this.$1=new(c(\"AsyncRequest\"))(a)}var b=a.prototype;b.setURI=function(a){this.$1.setURI(a);return this};b.setTimeoutHandler=function(a,b){this.$1.setTimeoutHandler(a,b);return this};b.setOption=function(a,b){this.$1.setOption(a,b);return this};b.setMethod=function(a){this.$1.setMethod(a);return this};b.setAutoProcess=function(a){this.$1.setOption(\"suppressEvaluation\",a);return this};b.setData=function(a){this.$1.setData(a);return this};b.setHandler=function(a){this.$1.setHandler(a);return this};b.setPayloadHandler=function(a){this.setHandler(function(b){return a(b.payload)});return this};b.setErrorHandler=function(a){this.$1.setErrorHandler(a);return this};b.send=function(){this.$1.send();return this};b.abort=function(){this.$1.abort()};b.setReadOnly=function(a){this.$1.setReadOnly(a);return this};b.setAllowCrossOrigin=function(a){this.$1.setAllowCrossOrigin(a);return this};b.setAllowCredentials=function(a){this.$1.setAllowCredentials(a);return this};return a}();g[\"default\"]=a}),98);\n__d(\"PolarisPostLikedByListDialogQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"7687108631341096\"}),null);\n__d(\"XAsyncRequest\",[\"cr:1042\"],(function(a,b,c,d,e,f,g){\"use strict\";g[\"default\"]=b(\"cr:1042\")}),98);\n__d(\"DisappearingMessagesMode\",[],(function(a,b,c,d,e,f){a=Object.freeze({OFF:0,ON:1,OPEN_ON:2});f[\"default\"]=a}),66);\n__d(\"MAWThreadId\",[\"I64\",\"LSMessagingThreadTypeUtil\",\"ReQL\",\"asyncToGeneratorRuntime\",\"recoverableViolation\",\"unrecoverableViolation\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){a=(yield d(\"ReQL\").firstAsync(d(\"ReQL\").fromTableAscending(a.mi_act_mapping_table.index(\"chat_id\")).getKeyRange((h||(h=d(\"I64\"))).of_int32(b))));if(a!=null)return a.serverThreadKey;throw c(\"unrecoverableViolation\")(\"Tried to convert a rowId to thread key but couldn't find a\\n      corresponding row in the mapping table. This can mean that\\n      there is a race condition between the time a thread was created\\n      on the WA backend, and the time it was inserted into the mapping table.\\n      i.e. this function is called before the fn that inserts the mapping\\n      into the mapping table\",\"messenger_web_product\")});return i.apply(this,arguments)}function e(a){c(\"recoverableViolation\")(\"Checking if a threadKey is a secure thread key in Occamadillo. We should be\\n      checking the thread's thread type instead\",\"messenger_web_product\");return!1}function j(a,b){return k.apply(this,arguments)}function k(){k=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){a=(yield d(\"ReQL\").firstAsync(d(\"ReQL\").fromTableAscending(a.threads).getKeyRange(b)));if(a==null)return;return a.threadType});return k.apply(this,arguments)}function f(a,b){return l.apply(this,arguments)}function l(){l=b(\"asyncToGeneratorRuntime\").asyncToGenerator(function*(a,b){a=(yield j(a,b));return a==null?!1:d(\"LSMessagingThreadTypeUtil\").isSecure(a)});return l.apply(this,arguments)}function m(a,b){return d(\"ReQL\").firstAsync(d(\"ReQL\").fromTableAscending(a.threads).getKeyRange(b))}g.toThreadKey_DEPRECATED=a;g.isThreadId=e;g.isSecureThreadId=f;g.getThreadFromJid=m}),98);\n__d(\"LSMediaUrlUtils\",[\"I64\",\"ServerTime\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){if((h||(h=d(\"I64\"))).gt(a,(h||(h=d(\"I64\"))).zero)){var b=(h||(h=d(\"I64\"))).of_float(d(\"ServerTime\").getMillis()\/1e3);return h.lt(a,b)}return!1}g.isTimestampExpired=a}),98);\n__d(\"rewriteFallbackUrl\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a}f[\"default\"]=a}),66);\n__d(\"getLSMediaContactProfilePictureUrl\",[\"LSMediaUrlUtils\",\"rewriteFallbackUrl\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a){var b=a.profilePictureUrlExpirationTimestampMs;if(b!=null&&d(\"LSMediaUrlUtils\").isTimestampExpired(b)){return(b=c(\"rewriteFallbackUrl\")(a.profilePictureFallbackUrl))!=null?b:a.profilePictureUrl}else return a.profilePictureUrl}g[\"default\"]=a}),98);\/*FB_PKG_DELIM*\/\n__d(\"MAWExceededStorageQuota\",[\"MAWBridge\",\"Promise\",\"WAResultOrError\",\"WATagsLogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\": \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"successfully deleted data from DB\"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([\"successfully wrote to db\"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([\"transaction completed\"]);l=function(){return a};return a}var m=d(\"WATagsLogger\").TAGS([\"MAWExceededStorageQuota\"]),n=typeof importScripts===\"function\",o=!1;function a(){return o}function p(a){o=a,n&&d(\"MAWBridge\").getBridge().fireAndForget(\"event\",\"storageQuota\",{exceededStorageQuota:o})}function c(a){if(a==null)return;if(a instanceof Error&&u(a)||(a==null?void 0:a.inner)instanceof Error&&u(a.inner)){p(!0);return}}function e(a){a.addEventListener(\"abort\",function(a){a=a.target.error;u(a)&&p(!0)})}var q=\"storage_quota_check\",r=\"storage_quota_check_store\",s=\"storage_quota_check_key\";function f(){return new(h||(h=b(\"Promise\")))(function(a){var b=indexedDB.open(q);b.onerror=function(b){b=t(b.target.error,\"Failed to open DB\");a(b)};b.onupgradeneeded=function(a){a=a.target.result;a.createObjectStore(r)};b.onsuccess=function(b){b=b.target.result;b=b.transaction([r],\"readwrite\");b.oncomplete=function(){m.LOG(l()),a(d(\"WAResultOrError\").makeResult(\"storage-quota-sufficient\"))};b.onerror=function(b){b=t(b.target.error,\"transaction failed\");a(b)};b.onabort=function(b){b=t(b.target.error,\"transaction aborted\");a(b)};var c=b.objectStore(r);b=new Blob([new Uint8Array(1024)]);b=c.add(b,s);b.onerror=function(b){b=t(b.target.error,\"failed to write data\");a(b)};b.onsuccess=function(){m.LOG(k());var b=c[\"delete\"](s);b.onerror=function(b){b=t(b.target.error,\"failed to delete data\");a(b)};b.onsuccess=function(){m.LOG(j())}}}})}function t(a,b){if(u(a)){p(!0);return d(\"WAResultOrError\").makeResult(\"storage-quota-exceeded\")}m.ERROR(i(),b,a);return d(\"WAResultOrError\").makeError(\"runtime-error\")}function u(a){return a==null?!1:Boolean(a instanceof self.DOMException&&(a.code===22||a.code===1014||a.name===\"QuotaExceededError\"||a.name===\"NS_ERROR_DOM_QUOTA_REACHED\"))}g.getExceededStorageQuota=a;g.setExceededStorageQuota=p;g.checkQuotaExceededError=c;g.listenToQuotaExceededError=e;g.checkStorageQuota=f}),98);\n__d(\"WAPromiseCacheWithTtl\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){var c=0,d=null;return function(){var e=Date.now();if(d!=null&&e-c<=a)return d;c=e;d=b();return d}}f.cacheWithTtl=a}),66);\n__d(\"WAStorageEstimator\",[\"Promise\",\"WAResultOrError\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(){return navigator.storage!=null&&typeof navigator.storage.estimate===\"function\"?navigator.storage.estimate().then(function(a){return d(\"WAResultOrError\").makeResult(a)})[\"catch\"](function(a){return d(\"WAResultOrError\").makeError({type:\"runtime-error\",runtimeError:a})}):(h||(h=b(\"Promise\"))).resolve(d(\"WAResultOrError\").makeError({type:\"not-support\"}))}g.estimateStorage=a}),98);\n__d(\"MAWGetStorageQplAnnotations\",[\"MAWExceededStorageQuota\",\"Promise\",\"WALogger\",\"WAPromiseCacheWithTtl\",\"WAStorageEstimator\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to get storage info. runtime-error: \",\"\"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([\"Failed to get storage info: \",\"\"]);j=function(){return a};return a}c=1e3*60;e=1e3*60*5;var k=d(\"WAPromiseCacheWithTtl\").cacheWithTtl(c,d(\"WAStorageEstimator\").estimateStorage),l=d(\"WAPromiseCacheWithTtl\").cacheWithTtl(e,d(\"MAWExceededStorageQuota\").checkStorageQuota);function a(){return(h||(h=b(\"Promise\"))).all([k(),l()]).then(function(a){var b=a[0];a[1];b.success||(b.error.type===\"not-support\"?d(\"WALogger\").DEV(j(),b.error):(b.error.type,d(\"WALogger\").ERROR(i(),b.error.runtimeError)));a=b.success?b.value:{};b=a.quota;var c=a.usage;a=a.usageDetails;return{bool:{exceededStorageQuota:d(\"MAWExceededStorageQuota\").getExceededStorageQuota()},\"int\":{storageCache:a==null?void 0:a.caches,storageIndexedDB:a==null?void 0:a.indexedDB,storageQuota:b,storageServiceWorkerRegistrations:a==null?void 0:a.serviceWorkerRegistrations,storageUsage:c}}})}g.getStorageQplAnnotations=a}),98);\n__d(\"HiddenTabDataUtils\",[\"vc-tracker\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){function d(){var d;return(d=c(\"vc-tracker\")==null?void 0:c(\"vc-tracker\").VisibilityState.getHiddenSpans(a,b))!=null?d:[]}function e(){var a=d();return a.length>0?a[0]:null}function f(){var a=0,b=d();b.forEach(function(b){a+=b.end-b.start});return Math.round(a)}function g(){var a=f();return a>0}function h(){var a;a=(a=c(\"vc-tracker\")==null?void 0:c(\"vc-tracker\").VisibilityState.getHiddenSpans(b-1,b))!=null?a:[];return a.length>0}function i(){var a=e();return a!=null?Math.round(a.end-a.start):0}function j(){var a=e();return a!=null?Math.round(a.start):null}function k(){var a=d();return a.length===0?null:Math.round(a[a.length-1].start)}return{firstTimeHidden:j,firstTimeHiddenDuration:i,isHidden:h,lastTimeHidden:k,totalHiddenTime:f,wasHidden:g}}g.getHiddenTabDataForTimeInterval=a}),98);\n__d(\"MAWEBSwitch\",[],(function(a,b,c,d,e,f){\"use strict\";a=function(){function a(){this.$1=!0}var b=a.prototype;b.set=function(a){this.$1=a;return this.$1};b.isEnabled=function(){return this.$1};return a}();b=new a();c=b;f[\"default\"]=c}),66);\n__d(\"WorkerUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function b(){try{return\"WorkerGlobalScope\"in a&&a instanceof a.WorkerGlobalScope}catch(a){return!1}}function c(){try{return\"SharedWorkerGlobalScope\"in a&&a instanceof a.SharedWorkerGlobalScope}catch(a){return!1}}function d(){return\"SharedWorker\"in a&&typeof a.SharedWorker===\"function\"}f.isWorkerContext=b;f.isSharedWorkerContext=c;f.isSharedWorkerSupported=d}),66);\n__d(\"shouldUseMAWSharedWorker\",[\"QE2Logger\",\"WorkerUtils\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(){return(h||(h=d(\"WorkerUtils\"))).isSharedWorkerSupported()&&c(\"qex\")._(\"9\")===!0}function b(){(h||(h=d(\"WorkerUtils\"))).isSharedWorkerSupported()&&d(\"QE2Logger\").logExposureForUser(\"armadillo_web_worker\")}g.shouldUseMAWSharedWorker=a;g.logExposureForMAWSharedWorker=b}),98);\n__d(\"WAResolvable\",[\"Promise\"],(function(a,b,c,d,e,f){\"use strict\";var g;a=function(){function a(){var a=this;this.$1=function(){};this.$2=!1;this.promise=new(g||(g=b(\"Promise\")))(function(b){a.$1=b})}var c=a.prototype;c.resolve=function(a){this.$2=!0,this.$1(a)};c.reject=function(a){this.resolve((g||(g=b(\"Promise\"))).reject(a))};c.resolveWasCalled=function(){return this.$2};return a}();f.Resolvable=a}),66);\n__d(\"waitForMAWMIC\",[\"WAResolvable\"],(function(a,b,c,d,e,f,g){\"use strict\";a=new(d(\"WAResolvable\").Resolvable)();b=a.promise;g.resolvable=a;g.promise=b}),98);\n__d(\"MAWMIC\",[\"HiddenTabDataUtils\",\"IGDWebUtils\",\"MAWCurrentUser\",\"MAWEBSwitch\",\"MAWGetStorageQplAnnotations\",\"MultipleTabsLogger\",\"QPLUserFlow\",\"QuickPerformanceLogger\",\"gkx\",\"performanceNow\",\"qpl\",\"shouldUseMAWSharedWorker\",\"waitForMAWMIC\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j=!1,k=!1,l=new Set(),m=new Map(),n=new Map(),o=d(\"IGDWebUtils\").isOnInstagramWeb()?new Set([\"worker_process_offline_queue_end\",\"maw_init_end\",\"ls_init_end\"]):new Set([\"worker_process_offline_queue_end\",\"maw_init_end\",\"ls_init_end\",\"occamadillo_thread_mapping_end\"]),p={worker_download_offline_queue_end:\"worker_download_offline_queue_start\",worker_process_offline_queue_end:\"worker_process_offline_queue_start\"};function q(){k=!0;A();var a=d(\"HiddenTabDataUtils\").getHiddenTabDataForTimeInterval(0,(h||(h=c(\"performanceNow\")))());x(\"isHidden\",a.isHidden());y(\"totalHiddenTime\",a.totalHiddenTime());var b=a.firstTimeHidden();b!=null&&y(\"firstTimeHidden\",b);b=a.lastTimeHidden();b!=null&&y(\"lastTimeHidden\",b)}function a(){return!k}function b(a,b){if(k||!j)return;q();b&&c(\"QPLUserFlow\").markError(c(\"qpl\")._(1056839232,\"112\"),\"maw_ttrc_cancel_with_error\",{error:b});c(\"QPLUserFlow\").endCancel(c(\"qpl\")._(1056839232,\"112\"),{annotations:{string:{cancelReason:a}}})}function e(a,b){if(k)return;q();d(\"waitForMAWMIC\").resolvable.reject(\"MAWMIC Failed\");c(\"QPLUserFlow\").endFailure(c(\"qpl\")._(1056839232,\"112\"),a,{error:b})}function f(a){if(k)return;q();d(\"waitForMAWMIC\").resolvable.reject(\"MAWMIC dropped due to: \"+a);z(\"dropReason\",a);(i||(i=c(\"QuickPerformanceLogger\"))).markerDrop(c(\"qpl\")._(1056839232,\"112\"))}function r(a,b){if(j)v(a,b);else if(!m.has(a)){m.set(a,(a=b)!=null?a:(i||(i=c(\"QuickPerformanceLogger\"))).currentTimestamp())}}function s(){n.forEach(function(a,b){a===!0||a===!1?x(b,a):Number.isInteger(a)?y(b,Number(a)):z(b,String(a))}),n.clear()}function t(){m.forEach(function(a,b){return v(b,a)}),m.clear()}function u(){if(j)return;c(\"QPLUserFlow\").startFromNavStart(c(\"qpl\")._(1056839232,\"112\"),{annotations:{bool:{is_pdb:c(\"gkx\")(\"24032\"),isArmadilloPublicLaunchUser:c(\"gkx\")(\"23405\"),isEBEnabled:c(\"MAWEBSwitch\").isEnabled(),isRestoreDBEnabled:c(\"gkx\")(\"23906\"),isTlcPublicUser:d(\"MAWCurrentUser\").isTlcPublicUser(),useSharedWorker:d(\"shouldUseMAWSharedWorker\").shouldUseMAWSharedWorker(),useWorkerV2:!0},string:{hostname:window.location.hostname}},onFlowTimeout:function(){return q()}});A();d(\"MultipleTabsLogger\").addAnnotationToQPLEvent(c(\"qpl\")._(1056839232,\"112\"));j=!0;t();s()}function v(a,b){if(k||l.has(a))return;l.add(a);o[\"delete\"](a);b=b!=null?{timestamp:b}:void 0;var d=p[a];d!=null&&!l.has(d)&&c(\"QPLUserFlow\").addPoint(c(\"qpl\")._(1056839232,\"112\"),d,b);c(\"QPLUserFlow\").addPoint(c(\"qpl\")._(1056839232,\"112\"),a,b);o.size===0&&w()}function w(a){a===void 0&&(a=!1);q();a={bool:{workerAlreadySetup:a}};d(\"waitForMAWMIC\").resolvable.resolve();c(\"QPLUserFlow\").endSuccess(c(\"qpl\")._(1056839232,\"112\"),{annotations:a})}function x(a,b){var d;if(!j){n.set(a,b);return}c(\"QPLUserFlow\").addAnnotations(c(\"qpl\")._(1056839232,\"112\"),{bool:(d={},d[a]=b,d)})}function y(a,b){var d;if(!j){n.set(a,b);return}c(\"QPLUserFlow\").addAnnotations(c(\"qpl\")._(1056839232,\"112\"),{\"int\":(d={},d[a]=b,d)})}function z(a,b){var d;if(!j){n.set(a,b);return}c(\"QPLUserFlow\").addAnnotations(c(\"qpl\")._(1056839232,\"112\"),{string:(d={},d[a]=b,d)})}function A(){void d(\"MAWGetStorageQplAnnotations\").getStorageQplAnnotations().then(function(a){return c(\"QPLUserFlow\").addAnnotations(c(\"qpl\")._(1056839232,\"112\"),babelHelpers[\"extends\"]({},a))})}g.duringMIC=a;g.cancel=b;g.fail=e;g.drop=f;g.markEvent=r;g.startMAWMICFlow=u;g.endSuccess=w;g.addBoolAnnotation=x;g.addIntAnnotation=y;g.addStringAnnotation=z}),98);\/*FB_PKG_DELIM*\/\n__d(\"MAWDbXMA\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a}function b(a){return a}f.convertNumbersToXMAIds=a;f.convertNumberToXMAId=b}),66);\n__d(\"MAWParseXMAFBConfig\",[\"WAArmadilloXMA.pb\",\"gkx\"],(function(a,b,c,d,e,f,g){\"use strict\";b=new Set([(a=d(\"WAArmadilloXMA.pb\")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,c(\"gkx\")(\"23929\")?d(\"WAArmadilloXMA.pb\").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:null].filter(Boolean));g.FB_SUPPORTED_TARGET_TYPES=b}),98);\n__d(\"MWQPLMarkers\",[],(function(a,b,c,d,e,f){\"use strict\";a={BEFORE_CREATE_OPTIMISTIC_MESSAGE:\"before_create_optimistic_message\",CREATE_OPTIMISTIC_MESSAGE_SUCCESS:\"create_optimistic_message_success\",CREATED_THREAD_FOR_XMA_SHARE:\"created_thread_for_xma_share\",FAIL_FORWARDING_MESSAGE:\"fail_forwarding_message\",FAILED_MEDIA_MISSING_THREAD:\"failed_media_missing_thread\",FAILED_MEDIA_MSGID_MISSING_IN_DB:\"failed_media_msgid_missing_in_db\",FAILED_MEDIA_UNSUPPORTED_TYPE:\"failed_media_unsupported_type\",FAILED_MESSAGE_MISSING_THREAD:\"failed_message_missing_thread\",FAILED_MISSING_ASSOCIATED_MESSAGE_IN_DB:\"failed_missing_associated_message_in_db\",FAILED_MISSING_THREAD_IN_DB:\"failed_missing_thread_in_db\",FAILED_MISSING_THREAD_IN_WRITING_XMA:\"failed_missing_thread_in_writing_xma\",FAILED_MISSING_XMA_MESSAGE_IN_DB:\"failed_missing_xma_message_in_db\",FAILED_TO_FETCH_BLOB_FOR_XMA_SHARE:\"failed_to_fetch_blob_for_xma_share\",FAILED_TO_FETCH_CHAT_JID_FOR_XMA_SHARE:\"failed_to_fetch_chat_jid_for_xma_share\",FAILED_TO_FETCH_QUERY_DATA_FOR_XMA_SHARE:\"failed_to_fetch_query_data_for_xma_share\",FAILED_TO_FETCH_THREAD_KEY_FOR_XMA_SHARE:\"failed_to_fetch_thread_key_for_xma_share\",FAILED_TO_PARSE_JSON_FOR_XMA_SHARE:\"failed_to_parse_json_for_xma_share\",FAILED_UPLOAD_MEDIA_TO_BACKEND:\"failed_upload_media_to_backend\",FETCHING_DEVICES_FOR_XMA_SHARE:\"fetching_devices_for_xma_share\",FORWARDED_MESSAGE_WRITTEN:\"forwarded_message_written\",GET_EXTERNAL_LINK_RESPONSE_SUCCESS:\"get_external_link_response_success\",MESSAGE_ALREADY_SENT_TO_BACKEND:\"message_already_sent_to_backend\",MISSING_XMA_DATA:\"missing_xma_data\",PREVIEW_DOES_NOT_EXIST:\"preview_does_not_exist\",PREVIEW_FAVICON_SPEC_READY:\"preview_favicon_spec_ready\",RECEIVED_FAILURE_SERVER_ACK:\"received_failure_server_ack\",RECEIVED_MEDIA_IN_WAJOB:\"received_media_in_wajob\",RECEIVED_MESSAGE_IN_WAJOB:\"received_message_in_wajob\",RECEIVED_SUCCESSFUL_SERVER_ACK:\"received_successful_server_ack\",RETURN_PRIVATE_XMA_DATA:\"return_private_xma_data\",RETURN_PUBLIC_XMA_DATA:\"return_public_xma_data\",SAVED_XMA_CONTENT_IN_DB:\"saved_xma_content_in_db\",SAVING_XMA_UPLOAD_RESULT_IN_DB:\"saving_xma_upload_result_in_db\",SEND_MESSAGE_TO_BACKEND_FAILED:\"send_message_to_backend_failed\",START_POST_SHARING:\"start_post_sharing\",START_STORY_REPLY:\"start_story_reply\",SUCCESSFUL_MESSAGE_SENT_TO_BACKEND:\"successful_message_sent_to_backend\",SUCCESSFUL_UPLOAD_MEDIA_TO_BACKEND:\"successful_upload_media_to_backend\",UPLOADING_MEDIA_TO_BACKEND:\"uploading_media_to_backend\",WRITING_MEDIA_TO_DB_FAILED:\"writing_media_to_db_failed\",WRITING_MESSAGE_TO_DB:\"writing_message_to_db\",WRITING_XMA_TO_DB:\"writing_xma_to_db\",XMA_DATA_FETCH_BEGIN:\"xma_data_fetch_begin\",XMA_DATA_FETCH_SUCCESS:\"xma_data_fetch_success\",XMA_DATA_QUERY_BEGIN:\" xma_data_query_begin\",XMA_DATA_QUERY_COMPLETE:\"xma_data_query_complete\"};f.MESSAGE_SEND_TO_SENT=a}),66);\n__d(\"IGDSReportPanoOutline24Icon.react\",[\"IGDSSVGIconBase.react\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||(h=d(\"react\"))).unstable_useMemoCache,j=h;function a(a){var b=i(3),d;b[0]===Symbol[\"for\"](\"react.memo_cache_sentinel\")?(d=j.jsx(\"path\",{d:\"M18.001 1h-12a5.006 5.006 0 0 0-5 5v9.005a5.006 5.006 0 0 0 5 5h2.514l2.789 2.712a1 1 0 0 0 1.394 0l2.787-2.712h2.516a5.006 5.006 0 0 0 5-5V6a5.006 5.006 0 0 0-5-5Zm3 14.005a3.003 3.003 0 0 1-3 3h-2.936a1 1 0 0 0-.79.387l-2.274 2.212-2.276-2.212a1 1 0 0 0-.79-.387H6a3.003 3.003 0 0 1-3-3V6a3.003 3.003 0 0 1 3-3h12a3.003 3.003 0 0 1 3 3Zm-9-1.66a1.229 1.229 0 1 0 1.228 1.228A1.23 1.23 0 0 0 12 13.344Zm0-8.117a1.274 1.274 0 0 0-.933.396 1.108 1.108 0 0 0-.3.838l.347 4.861a.892.892 0 0 0 1.77 0l.348-4.86a1.106 1.106 0 0 0-.3-.838A1.272 1.272 0 0 0 12 5.228Z\"}),b[0]=d):d=b[0];b[1]!==a?(d=j.jsx(c(\"IGDSSVGIconBase.react\"),babelHelpers[\"extends\"]({},a,{viewBox:\"0 0 24 24\",children:d})),b[1]=a,b[2]=d):d=b[2];return d}b=j.memo(a);g[\"default\"]=b}),98);\n__d(\"PolarisBoostNewBadge.react\",[\"IGDSBadge.react\",\"PolarisNavigationStrings\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=(h||(h=d(\"react\"))).unstable_useMemoCache,j=h,k={newBadge:{backgroundColor:\"x1tu34mt\",paddingTop:\"x1nn3v0j\",paddingEnd:\"x150jy0e\",paddingBottom:\"x1120s5i\",paddingStart:\"x1e558r4\",$$css:!0}};function a(a){var b=i(4);a=a.xstyle;var e;b[0]!==a?(e=[k.newBadge,a],b[0]=a,b[1]=e):e=b[1];b[2]!==e?(a=j.jsx(c(\"IGDSBadge.react\"),{xstyle:e,children:d(\"PolarisNavigationStrings\").NEW_FEATURE_BADGE}),b[2]=e,b[3]=a):a=b[3];return a}g[\"default\"]=a}),98);\n__d(\"WAPromiseTimeout\",[\"Promise\",\"WACustomError\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;a=function(a,c,e){var f=null,g=new(h||(h=b(\"Promise\")))(function(a,b){f=setTimeout(function(){b(new(d(\"WACustomError\").TimeoutError)(e)),clearTimeout(f)},c)});return h.race([a,g])[\"finally\"](function(){clearTimeout(f)})};g.promiseTimeout=a}),98);\n__d(\"WAByteArray\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a,b){b=b;var c=new Uint8Array(a);for(a=a-1;a>=0;a--)c[a]=b&255,b>>>=8;return c}function b(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function c(a,b){if(!a||!b)return!1;a=new Uint8Array(a);b=new Uint8Array(b);var c=a.length,d=b.length;if(c!==d)return!1;for(d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}f.intToBytes=a;f.uint8ArrayToBuffer=b;f.compareArrayBuffer=c}),66);\/*FB_PKG_DELIM*\/\n__d(\"PolarisPostCommentsContainerQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"7760287947336073\"}),null);\n__d(\"PolarisPostCommentsContainerQuery$Parameters\",[\"PolarisPostCommentsContainerQuery_instagramRelayOperation\"],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:b(\"PolarisPostCommentsContainerQuery_instagramRelayOperation\"),metadata:{is_distillery:!0},name:\"PolarisPostCommentsContainerQuery\",operationKind:\"query\",text:null}};e.exports=a}),null);\n__d(\"PolarisShareMenu.relayprovider\",[\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";a={get:function(){var a=c(\"qex\")._(\"964\");return a!==\"\"&&a!=null||c(\"qex\")._(\"966\")===!0}};g[\"default\"]=a}),98);\n__d(\"PolarisPostRootQuery$Parameters\",[\"PolarisShareMenu.relayprovider\"],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:\"26054906647441386\",metadata:{},name:\"PolarisPostRootQuery\",operationKind:\"query\",text:null,providedVariables:{__relay_internal__pv__PolarisShareMenurelayprovider:b(\"PolarisShareMenu.relayprovider\")}}};e.exports=a}),null);\n__d(\"PolarisProfilePageContentQuery$Parameters\",[],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:\"7095771120549188\",metadata:{},name:\"PolarisProfilePageContentQuery\",operationKind:\"query\",text:null}};e.exports=a}),null);\n__d(\"PolarisProfilePostsQuery$Parameters\",[\"PolarisShareMenu.relayprovider\"],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:\"7268577773270422\",metadata:{},name:\"PolarisProfilePostsQuery\",operationKind:\"query\",text:null,providedVariables:{__relay_internal__pv__PolarisShareMenurelayprovider:b(\"PolarisShareMenu.relayprovider\")}}};e.exports=a}),null);\n__d(\"PolarisProfileStoryHighlightsTrayContentQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"8298007123561120\"}),null);\n__d(\"PolarisProfileStoryHighlightsTrayContentQuery$Parameters\",[\"PolarisProfileStoryHighlightsTrayContentQuery_instagramRelayOperation\"],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:b(\"PolarisProfileStoryHighlightsTrayContentQuery_instagramRelayOperation\"),metadata:{is_distillery:!0},name:\"PolarisProfileStoryHighlightsTrayContentQuery\",operationKind:\"query\",text:null}};e.exports=a}),null);\n__d(\"PolarisSeoCrawlingPoolRootQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"6380577035393602\"}),null);\n__d(\"PolarisSeoCrawlingPoolRootQuery$Parameters\",[\"PolarisSeoCrawlingPoolRootQuery_instagramRelayOperation\"],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:b(\"PolarisSeoCrawlingPoolRootQuery_instagramRelayOperation\"),metadata:{},name:\"PolarisSeoCrawlingPoolRootQuery\",operationKind:\"query\",text:null}};e.exports=a}),null);\n__d(\"PolarisProfileNoteBubbleQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"7793931850637856\"}),null);\n__d(\"PolarisProfileNoteBubbleQuery$Parameters\",[\"PolarisProfileNoteBubbleQuery_instagramRelayOperation\"],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:b(\"PolarisProfileNoteBubbleQuery_instagramRelayOperation\"),metadata:{is_distillery:!0},name:\"PolarisProfileNoteBubbleQuery\",operationKind:\"query\",text:null}};e.exports=a}),null);\n__d(\"PolarisProfileSuggestedUsersWithPreloadableQuery$Parameters\",[],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:\"7218983261504064\",metadata:{},name:\"PolarisProfileSuggestedUsersWithPreloadableQuery\",operationKind:\"query\",text:null}};e.exports=a}),null);\n__d(\"PolarisCreatorMarketplaceProfileBadgeQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"7784270231607032\"}),null);\n__d(\"PolarisCreatorMarketplaceProfileBadgeQuery$Parameters\",[\"PolarisCreatorMarketplaceProfileBadgeQuery_instagramRelayOperation\"],(function(a,b,c,d,e,f){\"use strict\";a={kind:\"PreloadableConcreteRequest\",params:{id:b(\"PolarisCreatorMarketplaceProfileBadgeQuery_instagramRelayOperation\"),metadata:{},name:\"PolarisCreatorMarketplaceProfileBadgeQuery\",operationKind:\"query\",text:null}};e.exports=a}),null);\n__d(\"JSResource\",[\"JSResourceReferenceImpl\"],(function(a,b,c,d,e,f,g){var h={};function i(a,b){h[a]=b}function j(a){return h[a]}function a(a){a=a;var b=j(a);if(b)return b;b=new(c(\"JSResourceReferenceImpl\"))(a);i(a,b);return b}a.loadAll=c(\"JSResourceReferenceImpl\").loadAll;g[\"default\"]=a}),98);\n__d(\"JSResourceForInteraction\",[\"JSResource\"],(function(a,b,c,d,e,f,g){function a(a){return c(\"JSResource\").call(null,a)}b=a;g[\"default\"]=b}),98);\n__d(\"PolarisPostRoot.entrypoint\",[\"JSResourceForInteraction\",\"PolarisSeoCrawlingPoolRootQuery$Parameters\"],(function(a,b,c,d,e,f,g){\"use strict\";a={getPreloadProps:function(a){return a.routeProps.enable_seo_crawling_pool?{queries:{seoCrawlingPoolQuery:{options:{},parameters:c(\"PolarisSeoCrawlingPoolRootQuery$Parameters\"),variables:{caller:\"ig_post\"}}}}:{}},root:c(\"JSResourceForInteraction\")(\"PolarisPostRoot.react\").__setRef(\"PolarisPostRoot.entrypoint\")};g[\"default\"]=a}),98);\n__d(\"react-relay\/relay-hooks\/NestedRelayEntryPointBuilderUtils\",[],(function(a,b,c,d,e,f){\"use strict\";function a(a){return a}f.NestedRelayEntryPoint=a}),66);\n__d(\"NestedRelayEntryPointBuilderUtils\",[\"react-relay\/relay-hooks\/NestedRelayEntryPointBuilderUtils\"],(function(a,b,c,d,e,f){\"use strict\";Object.keys(importNamespace(\"react-relay\/relay-hooks\/NestedRelayEntryPointBuilderUtils\")).forEach(function(a){if(a===\"default\"||a===\"__esModule\")return;f[a]=importNamespace(\"react-relay\/relay-hooks\/NestedRelayEntryPointBuilderUtils\")[a]})}),null);\n__d(\"buildPolarisProfileRoute.entrypoint\",[\"JSResourceForInteraction\",\"NestedRelayEntryPointBuilderUtils\",\"PolarisCreatorMarketplaceProfileBadgeQuery$Parameters\",\"PolarisProfileNoteBubbleQuery$Parameters\",\"PolarisProfilePageContentQuery$Parameters\",\"PolarisProfileStoryHighlightsTrayContentQuery$Parameters\",\"PolarisProfileSuggestedUsersWithPreloadableQuery$Parameters\",\"PolarisSeoCrawlingPoolRootQuery$Parameters\",\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(a,b){return{getPreloadProps:function(e){var f=e.routeProps,g=f.enable_highlights_query,h=f.enable_relay_profile_header,i=f.enable_seo_crawling_pool,j=f.enable_suggested_users_query;f=f.id;h={userQuery:{parameters:c(\"PolarisProfilePageContentQuery$Parameters\"),variables:{id:f,relay_header:h,render_surface:\"PROFILE\"}}};c(\"qex\")._(\"757\")&&(h=babelHelpers[\"extends\"]({},h,{creatorMarketplaceProfileBadgeQuery:{parameters:c(\"PolarisCreatorMarketplaceProfileBadgeQuery$Parameters\"),variables:{igid:f}}}));c(\"qex\")._(\"900\")===!0&&(h=babelHelpers[\"extends\"]({},h,{profileNoteQuery:{parameters:c(\"PolarisProfileNoteBubbleQuery$Parameters\"),variables:{user_id:f}}}));g&&(h=babelHelpers[\"extends\"]({},h,{highlightsQuery:{parameters:c(\"PolarisProfileStoryHighlightsTrayContentQuery$Parameters\"),variables:{user_id:f}}}));i&&(h=babelHelpers[\"extends\"]({},h,{seoCrawlingPoolQuery:{options:{},parameters:c(\"PolarisSeoCrawlingPoolRootQuery$Parameters\"),variables:{caller:\"ig_profile\"}}}));j&&(h=babelHelpers[\"extends\"]({},h,{suggestedUsersQuery:{parameters:c(\"PolarisProfileSuggestedUsersWithPreloadableQuery$Parameters\"),variables:{module:\"profile\",target_id:f}}}));return{entryPoints:{contentEntryPoint:d(\"NestedRelayEntryPointBuilderUtils\").NestedRelayEntryPoint({entryPoint:{getPreloadProps:b,root:a},entryPointParams:e})},queries:h}},root:c(\"JSResourceForInteraction\")(\"PolarisProfileRoot.react\").__setRef(\"buildPolarisProfileRoute.entrypoint\")}}g[\"default\"]=a}),98);\n__d(\"PolarisProfileNestedContentRoot.entrypoint\",[\"JSResourceForInteraction\",\"buildPolarisProfileRoute.entrypoint\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"buildPolarisProfileRoute.entrypoint\")(c(\"JSResourceForInteraction\")(\"PolarisProfileNestedContentRoot.react\").__setRef(\"PolarisProfileNestedContentRoot.entrypoint\"),function(){return{}});g[\"default\"]=a}),98);\n__d(\"PolarisProfilePostsTabRoot.entrypoint\",[\"JSResourceForInteraction\",\"PolarisProfilePostsQuery$Parameters\",\"buildPolarisProfileRoute.entrypoint\"],(function(a,b,c,d,e,f,g){\"use strict\";a=c(\"buildPolarisProfileRoute.entrypoint\")(c(\"JSResourceForInteraction\")(\"PolarisProfilePostsTabRoot.react\").__setRef(\"PolarisProfilePostsTabRoot.entrypoint\"),function(a){a=a.routeParams.username;return{queries:{contentQuery:{options:{},parameters:c(\"PolarisProfilePostsQuery$Parameters\"),variables:{data:{count:12,include_relationship_info:!0,latest_besties_reel_media:!0,latest_reel_media:!0},username:a}}}}});g[\"default\"]=a}),98);\n__d(\"PolarisClipsAudioRoot.entrypoint\",[\"JSResourceForInteraction\"],(function(a,b,c,d,e,f,g){\"use strict\";a={getPreloadProps:function(a){return{queries:{}}},root:c(\"JSResourceForInteraction\")(\"PolarisClipsAudioRoot.react\").__setRef(\"PolarisClipsAudioRoot.entrypoint\")};g[\"default\"]=a}),98);\n__d(\"IGDInboxTrayQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"25996693819929771\"}),null);\n__d(\"PolarisClipsHomeNonProfiledQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"7734860276598699\"}),null);\n__d(\"PolarisClipsHomeRootQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"7680070528706182\"}),null);\n__d(\"PolarisMobileAllCommentsPageQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"24967413089573509\"}),null);\n__d(\"PolarisOwnerToTimelineMediaLoggedOutQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"5705646626225886\"}),null);\n__d(\"PolarisStoriesV3HighlightsPageQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"7492204094178267\"}),null);\n__d(\"PolarisStoriesV3ReelPageGalleryQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"25115901671358156\"}),null);\n__d(\"PolarisSuggestedUserListQuery_instagramRelayOperation\",[],(function(a,b,c,d,e,f){e.exports=\"7268436406581438\"}),null);\n__d(\"PolarisFeedVariants\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){a=b(\"$InternalEnum\")({FAVORITES:\"favorites\",FOLLOWING:\"following\",HOME:\"home\",PAST_POSTS:\"past_posts\"});c=a;f[\"default\"]=c}),66);\n__d(\"CometScreenReaderText.react\",[\"BaseView.react\",\"react\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i=h||d(\"react\"),j={visuallyHidden:{clip:\"xzpqnlu\",clipPath:\"x1hyvwdk\",height:\"xjm9jq1\",overflowX:\"x6ikm8r\",overflowY:\"x10wlt62\",position:\"x10l6tqk\",width:\"x1i1rx1s\",$$css:!0}};function a(a){var b=a.text;a=babelHelpers.objectWithoutPropertiesLoose(a,[\"text\"]);return i.jsx(c(\"BaseView.react\"),babelHelpers[\"extends\"]({},a,{xstyle:j.visuallyHidden,children:b}))}a.displayName=a.name+\" [from \"+f.id+\"]\";g[\"default\"]=a}),98);\n__d(\"isInstamadilloEB\",[\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"qex\")._(\"670\")===!0}g[\"default\"]=a}),98);\/*FB_PKG_DELIM*\/\n__d(\"WADynamicRouter\",[\"Promise\",\"WAErr\",\"WALogger\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([\"\",\" is not defined for \",\"\"]);i=function(){return a};return a}var j={sentinel:\"RESPONSE_NAMESPACE\"},k={sentinel:\"NOT_HANDLED\"};a=function(){function a(){var a=this;this.$1=(h||(h=b(\"Promise\"))).resolve();this.$2=new Map();this.$4=0;this.$5=null;this.$6=null;this.$7=null;this.fireAndForget=function(b,c,d,e){e===void 0&&(e=!1),a.$3==null?void 0:a.$3(b,c,d),a.$9(b,c,d,null,e)};this.sendAndReceive=function(c,d,e,f){f===void 0&&(f=!1);a.$3==null?void 0:a.$3(c,d,e);return new(h||(h=b(\"Promise\")))(function(b,g){a.$9(c,d,e,function(c){try{var d=n(c);d?d.call(c,function(c){a.$9(j,\"\",c,b,f)},function(b){a.$9(j,\"\",b,g,!1)}):a.$9(j,\"\",c,b,f)}catch(b){a.$9(j,\"\",b,g,!1)}},f)})};this.$8=function(){var b=a.$6;if(!b)return;var c=a.$2,d;while(b&&!(d=l(c,b)))a.$6=b=b.nextRoute;if(!b||!d)return;c=a.$10(d,b);var e=!0;if(c!==k){var f=b.prevRoute,g=b.nextRoute;a.$6===b&&(a.$6=g);f?f.nextRoute=g:a.$5=g;g?g.prevRoute=f:(e=!1,a.$7=f)}e&&a.$1.then(a.$8);return c}}var e=a.prototype;e.hasHandlerForNamespace=function(a){return this.$2.has(a)};e.getHandledNamespaces=function(){return Array.from(this.$2.keys())};e.setOnRouteCalled=function(a){this.$3=a};e.setNamespaceHandler=function(a,b){var c=this.$2,d=c.get(a);if(d===b)return;++this.$4;c.set(a,b);if(!d){c=this.$5;c&&(this.$6||this.$1.then(this.$8),this.$6=c)}};e.setHandlers=function(a,b){function e(e,f,g){if(b[e]==null){d(\"WALogger\").ERROR(i(),e,a);throw c(\"WAErr\")(e+\" is not defined for \"+a)}e=b[e](f);g&&g(e)}this.setNamespaceHandler(a,e)};e.$9=function(a,b,c,d,e){var f=this.$7;a={namespace:a,route:b,arg:c,resolver:d,prevRoute:f,nextRoute:null,silentLog:e};this.$7=a;b=!0;f?(f.nextRoute=a,b=!this.$6):this.$5=a;b&&l(this.$2,a)&&(this.$6=a,this.$1.then(this.$8))};e.$10=function(a,d){var e=d.route,f=d.arg,g=d.resolver;d=d.silentLog;var i=this.$4,j=null,l=null;try{j=a(e,f,g,d)}catch(a){l=(h||(h=b(\"Promise\"))).reject(a)}if(j===k)if(i===this.$4)l=(h||(h=b(\"Promise\"))).reject(c(\"WAErr\")(\"DynamicRouter: NOT_HANDLED can only be used when updating handlers\"));else return k;if(g){l&&g(l);return}else return l};return a}();function l(a,b){b=b.namespace;return b===j?m:a.get(b)}function m(a,b,c){c(b)}function n(a){if(a!=null&&(typeof a===\"object\"||typeof a===\"function\")){a=a.then;return typeof a===\"function\"?a:null}return null}g.NOT_HANDLED=k;g.DynamicRouter=a}),98);\n__d(\"WABridge\",[\"WADynamicRouter\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=new(d(\"WADynamicRouter\").DynamicRouter)();function a(){return h}g.getBridge=a}),98);\n__d(\"MAWBridge\",[\"WABridge\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return d(\"WABridge\").getBridge()}g.getBridge=a}),98);\n__d(\"MAWWaitForBackendSetup\",[\"Promise\",\"err\",\"promiseDone\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j,k=new(h||(h=b(\"Promise\")))(function(a,b){i=a,j=b}),l=!1,m=i,n=j;function o(a){return k[\"catch\"](function(){throw c(\"err\")(\"'\"+a+\"' rejected because backend setup failed.\")})}function a(a,b){c(\"promiseDone\")(o(b).then(function(){a()}))}function d(){k=new(h||(h=b(\"Promise\")))(function(a,b){i=a,j=b}),l=!1,m=i,n=j}function e(){l=!0,m==null?void 0:m()}function f(a){l=!1,n==null?void 0:n(a)}function p(){return l}g.waitForBackendSetup=o;g.runAfterBackendSetup=a;g.resetBackendSetup=d;g.resolveBackendSetup=e;g.rejectBackendSetup=f;g.isBackendSetupSuccessful=p}),98);\/*FB_PKG_DELIM*\/\n__d(\"MAWMsg\",[\"$InternalEnum\",\"I64\",\"LSIntEnum\",\"MAWMsgType\"],(function(a,b,c,d,e,f,g){\"use strict\";var h,i,j;function a(a,b,c,e){if(a===d(\"MAWMsgType\").MSG_TYPE.TEXT)if(b)return(i||(i=d(\"LSIntEnum\"))).ofNumber(8192);else return(i||(i=d(\"LSIntEnum\"))).ofNumber(1);else if(a===d(\"MAWMsgType\").MSG_TYPE.IMAGE||a===d(\"MAWMsgType\").MSG_TYPE.VIDEO||a===d(\"MAWMsgType\").MSG_TYPE.RAVEN)return(i||(i=d(\"LSIntEnum\"))).ofNumber(2);else if(a===d(\"MAWMsgType\").MSG_TYPE.PTT)return(i||(i=d(\"LSIntEnum\"))).ofNumber(4);else if(a===d(\"MAWMsgType\").MSG_TYPE.FUTUREPROOF)return k(e);else if(a===d(\"MAWMsgType\").MSG_TYPE.CIPHERTEXT)return(i||(i=d(\"LSIntEnum\"))).ofNumber(65536);else if(a===d(\"MAWMsgType\").MSG_TYPE.UNAVAILABLE)return(i||(i=d(\"LSIntEnum\"))).ofNumber(262144);else if(a===d(\"MAWMsgType\").MSG_TYPE.GIF)return(i||(i=d(\"LSIntEnum\"))).ofNumber(16384);else if(a===d(\"MAWMsgType\").MSG_TYPE.STICKER)return(i||(i=d(\"LSIntEnum\"))).ofNumber(4096);else if(a===d(\"MAWMsgType\").MSG_TYPE.DOCUMENT_FILE)return(i||(i=d(\"LSIntEnum\"))).ofNumber(64);else if(a===d(\"MAWMsgType\").MSG_TYPE.XMA)if(c!=null&&c)return(i||(i=d(\"LSIntEnum\"))).ofNumber(256);else return(i||(i=d(\"LSIntEnum\"))).ofNumber(1024);else return(i||(i=d(\"LSIntEnum\"))).ofNumber(1)}function k(a){switch(a){case\"locationMessage\":case\"liveLocationMessage\":return(i||(i=d(\"LSIntEnum\"))).ofNumber(524288);case\"pollCreationMessage\":return(i||(i=d(\"LSIntEnum\"))).ofNumber(1048576);default:return(i||(i=d(\"LSIntEnum\"))).ofNumber(131072)}}function c(a){a=a.displayedContentTypes;return(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(2))||(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(4))||(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(16384))||(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(16))||(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(64))||(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(4096))}function e(a){a=a.displayedContentTypes;if((j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(32)))return!0;else return!1}function f(a){a=a.displayedContentTypes;return(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(1024))}function l(a){a=a.displayedContentTypes;return(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(65536))||(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(131072))||(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(524288))||(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(1048576))?!0:(j||(j=d(\"I64\"))).equal(a,(i||(i=d(\"LSIntEnum\"))).ofNumber(262144))}var m=b(\"$InternalEnum\")({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),n=b(\"$InternalEnum\")({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});b=b(\"$InternalEnum\")({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2});g.text=(h=d(\"MAWMsgType\")).MSG_TYPE.TEXT;g.image=h.MSG_TYPE.IMAGE;g.video=h.MSG_TYPE.VIDEO;g.ptt=h.MSG_TYPE.PTT;g.unsent=h.MSG_TYPE.REVOKED;g.gif=h.MSG_TYPE.GIF;g.getDisplayedContentTypes=a;g.isMediaMsg=c;g.isAdminMsg=e;g.isXMAMsg=f;g.isPlaceholder=l;g.MAWRavenActionNotifType=m;g.MAWRavenMsgEphemeralMediaState=n;g.MAWRavenMsgEphemeralType=b}),98);\n__d(\"MAWSharedProtocolQueueConst\",[\"$InternalEnum\"],(function(a,b,c,d,e,f){\"use strict\";a=b(\"$InternalEnum\")({Initializing:\"initializing\",Failed:\"failed\",Processing:\"processing\",Complete:\"complete\"});f.OfflineConsumerStatus=a}),66);\/*FB_PKG_DELIM*\/\n__d(\"MAWDbMedia\",[],(function(a,b,c,d,e,f){\"use strict\";c=\"Image\";d=\"Video\";e=\"Ptt\";var g=\"Gif\",h=\"Sticker\",i=\"DocumentFile\",j={DOCUMENT_FILE:i,GIF:g,IMAGE:c,PTT:e,STICKER:h,VIDEO:d};function a(a){return a}function b(a){return a}f.IMAGE=c;f.VIDEO=d;f.PTT=e;f.GIF=g;f.STICKER=h;f.DOCUMENT_FILE=i;f.MEDIA_TYPE=j;f.convertNumberToMediaId=a;f.convertToMediaId64=b}),66);\n__d(\"WACommon.pb\",[\"WAProtoConst\"],(function(a,b,c,d,e,f,g){a={EVERYONE:1,SILENT:2,AI:3,AI_IMAGINE:4};b={PLACEHOLDER:0,NO_PLACEHOLDER:1,IGNORE:2};c={};e={};f={};var h={};c.internalSpec={remoteJid:[1,(d=d(\"WAProtoConst\")).TYPES.STRING],fromMe:[2,d.TYPES.BOOL],id:[3,d.TYPES.STRING],participant:[4,d.TYPES.STRING]};e.internalSpec={commandType:[1,d.TYPES.ENUM,a],offset:[2,d.TYPES.UINT32],length:[3,d.TYPES.UINT32],validationToken:[4,d.TYPES.STRING]};f.internalSpec={text:[1,d.TYPES.STRING],mentionedJid:[2,d.FLAGS.REPEATED|d.TYPES.STRING],commands:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e]};h.internalSpec={payload:[1,d.TYPES.BYTES],version:[2,d.TYPES.INT32]};g.COMMAND_COMMAND_TYPE=a;g.FUTURE_PROOF_BEHAVIOR=b;g.MessageKeySpec=c;g.CommandSpec=e;g.MessageTextSpec=f;g.SubProtocolSpec=h}),98);\/*FB_PKG_DELIM*\/\n__d(\"LSContactBlockedByViewerStatus\",[],(function(a,b,c,d,e,f){a=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});f[\"default\"]=a}),66);\n__d(\"MAWDbChatId\",[\"I64\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a){return a}function b(a){return(h||(h=d(\"I64\"))).of_float(a)}function c(a){return(h||(h=d(\"I64\"))).to_float(a)}function e(a,b){return a+\"_\"+b}g.unsafeCoerceToChatId=a;g.convertToChatId64=b;g.convertToChatId=c;g.craftAltIndex=e}),98);\n__d(\"LSBitOffset\",[\"I64\",\"LSBitFlag\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;function a(a,b){return d(\"LSBitFlag\").set((h||(h=d(\"I64\"))).lsl_(h.one,h.to_int32(a)),b)}function b(a,b){return d(\"LSBitFlag\").clear((h||(h=d(\"I64\"))).lsl_(h.one,h.to_int32(a)),b)}g.set=a;g.clear=b;g.empty=(h||(h=d(\"I64\"))).zero}),98);\n__d(\"LSContactBitOffset\",[\"I64\",\"LSBitFlag\",\"LSBitOffset\"],(function(a,b,c,d,e,f,g){\"use strict\";var h;c=[\"capabilities\",\"capabilities2\"];function a(a,b){return i(a,b,!1)}function i(a,b,c){var e=b.capabilities,f=b.capabilities2;if(a>=64){return f==null?c:d(\"LSBitFlag\").has((h||(h=d(\"I64\"))).lsl_(h.one,a-64),(f=b.capabilities2)!=null?f:d(\"LSBitOffset\").empty)}return e==null?c:d(\"LSBitFlag\").has((h||(h=d(\"I64\"))).lsl_(h.one,a),(f=b.capabilities)!=null?f:d(\"LSBitOffset\").empty)}function b(a,b){return d(\"LSBitFlag\").has((h||(h=d(\"I64\"))).lsl_(h.one,a-64),(a=b)!=null?a:d(\"LSBitOffset\").empty)}g.contactCapabilityFields=c;g.has=a;g.hasWithDefault=i;g.contactCapabilitiesHas=b}),98);\/*FB_PKG_DELIM*\/\n__d(\"MAWDbAppMeta\",[],(function(a,b,c,d,e,f){\"use strict\";a={allowSecurityAlert:\"allowSecurityAlert\",allowSecurityAlertForSelf:\"allowSecurityAlertForSelf\",deviceJid:\"deviceJid\",hasMigratedFromDexie:\"hasMigratedFromDexie\",hmacKey:\"hmacKey\",hotlikeSticker:\"hotlikeSticker\",isBackfilledForOccamadillo:\"isBackfilledForOccamadillo\",msgTypeVersion:\"msgTypeVersion\",restoreMigrationAttempts:\"restoreMigrationAttempts\",restoreToDexieMigrationComplete:\"restoreToDexieMigrationComplete\"};f.AppMetaKeysEnum=a}),66);\n__d(\"MAWSignalUtils\",[],(function(a,b,c,d,e,f){\"use strict\";var g=null;function h(){if(g==null){g=[];for(var a=0;a<=255;a++){var b=a.toString(16).padStart(2,\"0\").toUpperCase();g.push(b)}}return g}function a(a){var b=h(),c=[];a.forEach(function(a){c.push(b[a])});return c.join(\" \")}f.getHexRepresentation=a}),66);\n__d(\"isStickerEnabled\",[\"qex\"],(function(a,b,c,d,e,f,g){\"use strict\";function a(){return c(\"qex\")._(\"330\")===!0}g[\"default\"]=a}),98);\/*FB_PKG_DELIM*\/\n__d(\"ReStoreTabNotifier\",[\"CurrentMessengerUser\",\"FBLogger\",\"MWBroadcastChannel\",\"MWLSIndexedDBName\"],(function(a,b,c,d,e,f,g){\"use strict\";var h=d(\"CurrentMessengerUser\").getIDorEIMU();function a(a){var b=d(\"MWBroadcastChannel\").MWBroadcastChannel(a===\"restore-table-\"+h+\"-\"+d(\"MWLSIndexedDBName\").dbName()?\"mwChat-\"+h:a);function e(a,d){try{b.postMessage([a,d])}catch(a){c(\"FBLogger\")(\"messenger_browser_clients\").catching(a).warn(\"Failed to broadcast changes\")}}function f(a,c){b.addEventListener(\"message\",function(b){b=b.data;var d=b[0];d===a&&c(b[1])})}return{onEventReceive:f,postMessage:e}}g[\"default\"]=a}),98);"
        },
        "redirectURL": "",
        "headersSize": -1,
        "bodySize": -1,
        "_transferSize": 497031,
        "_error": null
    },
    "serverIPAddress": "157.240.227.63",
    "startedDateTime": "2024-04-12T09:46:00.933Z",
    "time": 825.3709999989951,
    "timings": {
        "blocked": 2.085000000471715,
        "dns": -1,
        "ssl": -1,
        "connect": -1,
        "send": 0.3920000000000001,
        "wait": 162.67300000025006,
        "receive": 660.2209999982733,
        "_blocked_queueing": 1.1190000004717149
    }
}